var OW=Object.defineProperty;var NW=(e,t,n)=>t in e?OW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(NW(e,typeof t!="symbol"?t+"":t,n),n);function PW(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NL={exports:{}},Ub={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FW=Symbol.for("react.transitional.element"),BW=Symbol.for("react.fragment");function PL(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:FW,type:e,key:i,ref:t!==void 0?t:null,props:n}}Ub.Fragment=BW;Ub.jsx=PL;Ub.jsxs=PL;NL.exports=Ub;var Y4=NL.exports;const pe=Y4.Fragment,g=Y4.jsx,P=Y4.jsxs;var FL={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W4=Symbol.for("react.transitional.element"),zW=Symbol.for("react.portal"),HW=Symbol.for("react.fragment"),VW=Symbol.for("react.strict_mode"),$W=Symbol.for("react.profiler"),GW=Symbol.for("react.consumer"),XW=Symbol.for("react.context"),jW=Symbol.for("react.forward_ref"),YW=Symbol.for("react.suspense"),WW=Symbol.for("react.memo"),BL=Symbol.for("react.lazy"),gS=Symbol.iterator;function KW(e){return e===null||typeof e!="object"?null:(e=gS&&e[gS]||e["@@iterator"],typeof e=="function"?e:null)}var zL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HL=Object.assign,VL={};function zh(e,t,n){this.props=e,this.context=t,this.refs=VL,this.updater=n||zL}zh.prototype.isReactComponent={};zh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $L(){}$L.prototype=zh.prototype;function K4(e,t,n){this.props=e,this.context=t,this.refs=VL,this.updater=n||zL}var Z4=K4.prototype=new $L;Z4.constructor=K4;HL(Z4,zh.prototype);Z4.isPureReactComponent=!0;var mS=Array.isArray,hn={H:null,A:null,T:null,S:null},GL=Object.prototype.hasOwnProperty;function q4(e,t,n,i,r,s){return n=s.ref,{$$typeof:W4,type:e,key:t,ref:n!==void 0?n:null,props:s}}function ZW(e,t){return q4(e.type,t,void 0,void 0,void 0,e.props)}function Q4(e){return typeof e=="object"&&e!==null&&e.$$typeof===W4}function qW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pS=/\/+/g;function Sy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qW(""+e.key):t.toString(36)}function US(){}function QW(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(US,US):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Jd(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case W4:case zW:o=!0;break;case BL:return o=e._init,Jd(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+Sy(e,0):i,mS(r)?(n="",o!=null&&(n=o.replace(pS,"$&/")+"/"),Jd(r,t,n,"",function(c){return c})):r!=null&&(Q4(r)&&(r=ZW(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(pS,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(mS(e))for(var l=0;l<e.length;l++)i=e[l],s=a+Sy(i,l),o+=Jd(i,t,n,s,r);else if(l=KW(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+Sy(i,l++),o+=Jd(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return Jd(QW(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Tp(e,t,n){if(e==null)return e;var i=[],r=0;return Jd(e,i,"","",function(s){return t.call(n,s,r++)}),i}function JW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function eK(){}We.Children={map:Tp,forEach:function(e,t,n){Tp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tp(e,function(){t++}),t},toArray:function(e){return Tp(e,function(t){return t})||[]},only:function(e){if(!Q4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=zh;We.Fragment=HW;We.Profiler=$W;We.PureComponent=K4;We.StrictMode=VW;We.Suspense=YW;We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=hn;We.act=function(){throw Error("act(...) is not supported in production builds of React.")};We.cache=function(e){return function(){return e.apply(null,arguments)}};We.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=HL({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!GL.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return q4(e.type,r,void 0,void 0,s,i)};We.createContext=function(e){return e={$$typeof:XW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:GW,_context:e},e};We.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)GL.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return q4(e,s,void 0,void 0,null,r)};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:jW,render:e}};We.isValidElement=Q4;We.lazy=function(e){return{$$typeof:BL,_payload:{_status:-1,_result:e},_init:JW}};We.memo=function(e,t){return{$$typeof:WW,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=hn.T,n={};hn.T=n;try{var i=e(),r=hn.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(eK,bS)}catch(s){bS(s)}finally{hn.T=t}};We.unstable_useCacheRefresh=function(){return hn.H.useCacheRefresh()};We.use=function(e){return hn.H.use(e)};We.useActionState=function(e,t,n){return hn.H.useActionState(e,t,n)};We.useCallback=function(e,t){return hn.H.useCallback(e,t)};We.useContext=function(e){return hn.H.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e,t){return hn.H.useDeferredValue(e,t)};We.useEffect=function(e,t){return hn.H.useEffect(e,t)};We.useId=function(){return hn.H.useId()};We.useImperativeHandle=function(e,t,n){return hn.H.useImperativeHandle(e,t,n)};We.useInsertionEffect=function(e,t){return hn.H.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return hn.H.useLayoutEffect(e,t)};We.useMemo=function(e,t){return hn.H.useMemo(e,t)};We.useOptimistic=function(e,t){return hn.H.useOptimistic(e,t)};We.useReducer=function(e,t,n){return hn.H.useReducer(e,t,n)};We.useRef=function(e){return hn.H.useRef(e)};We.useState=function(e){return hn.H.useState(e)};We.useSyncExternalStore=function(e,t,n){return hn.H.useSyncExternalStore(e,t,n)};We.useTransition=function(){return hn.H.useTransition()};We.version="19.0.0";FL.exports=We;var O=FL.exports;const ae=cl(O),tK=PW({__proto__:null,default:ae},[O]);var XL={exports:{}},bb={},jL={exports:{}},YL={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,$){var j=V.length;V.push($);e:for(;0<j;){var X=j-1>>>1,Z=V[X];if(0<r(Z,$))V[X]=$,V[j]=Z,j=X;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var $=V[0],j=V.pop();if(j!==$){V[0]=j;e:for(var X=0,Z=V.length,ge=Z>>>1;X<ge;){var ce=2*(X+1)-1,le=V[ce],Be=ce+1,$e=V[Be];if(0>r(le,j))Be<Z&&0>r($e,le)?(V[X]=$e,V[Be]=j,X=Be):(V[X]=le,V[ce]=j,X=ce);else if(Be<Z&&0>r($e,j))V[X]=$e,V[Be]=j,X=Be;else break e}}return $}function r(V,$){var j=V.sortIndex-$.sortIndex;return j!==0?j:V.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function v(V){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=V)i(c),$.sortIndex=$.expirationTime,t(l,$);else break;$=n(c)}}function w(V){if(p=!1,v(V),!m)if(n(l)!==null)m=!0,G();else{var $=n(c);$!==null&&H(w,$.startTime-V)}}var S=!1,R=-1,_=5,T=-1;function x(){return!(e.unstable_now()-T<_)}function I(){if(S){var V=e.unstable_now();T=V;var $=!0;try{e:{m=!1,p&&(p=!1,E(R),R=-1),h=!0;var j=f;try{t:{for(v(V),d=n(l);d!==null&&!(d.expirationTime>V&&x());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var Z=X(d.expirationTime<=V);if(V=e.unstable_now(),typeof Z=="function"){d.callback=Z,v(V),$=!0;break t}d===n(l)&&i(l),v(V)}else i(l);d=n(l)}if(d!==null)$=!0;else{var ge=n(c);ge!==null&&H(w,ge.startTime-V),$=!1}}break e}finally{d=null,f=j,h=!1}$=void 0}}finally{$?M():S=!1}}}var M;if(typeof y=="function")M=function(){y(I)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=I,M=function(){L.postMessage(null)}}else M=function(){b(I,0)};function G(){S||(S=!0,M())}function H(V,$){R=b(function(){V(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,G())},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var j=f;f=$;try{return V()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=f;f=V;try{return $()}finally{f=j}},e.unstable_scheduleCallback=function(V,$,j){var X=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?X+j:X):j=X,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=j+Z,V={id:u++,callback:$,priorityLevel:V,startTime:j,expirationTime:Z,sortIndex:-1},j>X?(V.sortIndex=j,t(c,V),n(l)===null&&V===n(c)&&(p?(E(R),R=-1):p=!0,H(w,j-X))):(V.sortIndex=Z,t(l,V),m||h||(m=!0,G())),V},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(V){var $=f;return function(){var j=f;f=$;try{return V.apply(this,arguments)}finally{f=j}}}})(YL);jL.exports=YL;var nK=jL.exports,WL={exports:{}},nr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iK=O;function KL(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ul(){}var qi={d:{f:Ul,r:function(){throw Error(KL(522))},D:Ul,C:Ul,L:Ul,m:Ul,X:Ul,S:Ul,M:Ul},p:0,findDOMNode:null},rK=Symbol.for("react.portal");function sK(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rK,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var T1=iK.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function yb(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qi;nr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(KL(299));return sK(e,t,null,n)};nr.flushSync=function(e){var t=T1.T,n=qi.p;try{if(T1.T=null,qi.p=2,e)return e()}finally{T1.T=t,qi.p=n,qi.d.f()}};nr.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,qi.d.C(e,t))};nr.prefetchDNS=function(e){typeof e=="string"&&qi.d.D(e)};nr.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=yb(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&qi.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};nr.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=yb(t.as,t.crossOrigin);qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&qi.d.M(e)};nr.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=yb(n,t.crossOrigin);qi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};nr.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=yb(t.as,t.crossOrigin);qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else qi.d.m(e)};nr.requestFormReset=function(e){qi.d.r(e)};nr.unstable_batchedUpdates=function(e,t){return e(t)};nr.useFormState=function(e,t,n){return T1.H.useFormState(e,t,n)};nr.useFormStatus=function(){return T1.H.useHostTransitionStatus()};nr.version="19.0.0";function ZL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZL)}catch(e){console.error(e)}}ZL(),WL.exports=nr;var jn=WL.exports;const oK=cl(jn);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=nK,qL=O,aK=jn;function ne(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function QL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var lK=Symbol.for("react.element"),Sp=Symbol.for("react.transitional.element"),e1=Symbol.for("react.portal"),ff=Symbol.for("react.fragment"),JL=Symbol.for("react.strict_mode"),G7=Symbol.for("react.profiler"),cK=Symbol.for("react.provider"),eD=Symbol.for("react.consumer"),Ia=Symbol.for("react.context"),J4=Symbol.for("react.forward_ref"),X7=Symbol.for("react.suspense"),j7=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),xl=Symbol.for("react.lazy"),tD=Symbol.for("react.offscreen"),uK=Symbol.for("react.memo_cache_sentinel"),yS=Symbol.iterator;function Sg(e){return e===null||typeof e!="object"?null:(e=yS&&e[yS]||e["@@iterator"],typeof e=="function"?e:null)}var dK=Symbol.for("react.client.reference");function Y7(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dK?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ff:return"Fragment";case e1:return"Portal";case G7:return"Profiler";case JL:return"StrictMode";case X7:return"Suspense";case j7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ia:return(e.displayName||"Context")+".Provider";case eD:return(e._context.displayName||"Context")+".Consumer";case J4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ev:return t=e.displayName||null,t!==null?t:Y7(e.type)||"Memo";case xl:t=e._payload,e=e._init;try{return Y7(e(t))}catch{}}return null}var Ye=qL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Jt=Object.assign,Iy,ES;function t1(e){if(Iy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Iy=t&&t[1]||"",ES=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Iy+e+ES}var xy=!1;function Cy(e,t){if(!e||xy)return"";xy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{xy=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?t1(n):""}function fK(e){switch(e.tag){case 26:case 27:case 5:return t1(e.type);case 16:return t1("Lazy");case 13:return t1("Suspense");case 19:return t1("SuspenseList");case 0:case 15:return e=Cy(e.type,!1),e;case 11:return e=Cy(e.type.render,!1),e;case 1:return e=Cy(e.type,!0),e;default:return""}}function vS(e){try{var t="";do t+=fK(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Hh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wS(e){if(Hh(e)!==e)throw Error(ne(188))}function hK(e){var t=e.alternate;if(!t){if(t=Hh(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return wS(r),e;if(s===i)return wS(r),t;s=s.sibling}throw Error(ne(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==i)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function iD(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=iD(e),t!==null)return t;e=e.sibling}return null}var n1=Array.isArray,Qt=aK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Iu={pending:!1,data:null,method:null,action:null},W7=[],hf=-1;function qo(e){return{current:e}}function ui(e){0>hf||(e.current=W7[hf],W7[hf]=null,hf--)}function cn(e,t){hf++,W7[hf]=e.current,e.current=t}var Po=qo(null),h0=qo(null),Zl=qo(null),U2=qo(null);function b2(e,t){switch(cn(Zl,t),cn(h0,e),cn(Po,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?_I(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=_I(e),t=mN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ui(Po),cn(Po,t)}function Qf(){ui(Po),ui(h0),ui(Zl)}function K7(e){e.memoizedState!==null&&cn(U2,e);var t=Po.current,n=mN(t,e.type);t!==n&&(cn(h0,e),cn(Po,n))}function y2(e){h0.current===e&&(ui(Po),ui(h0)),U2.current===e&&(ui(U2),T0._currentValue=Iu)}var Z7=Object.prototype.hasOwnProperty,tv=Qn.unstable_scheduleCallback,Ay=Qn.unstable_cancelCallback,gK=Qn.unstable_shouldYield,mK=Qn.unstable_requestPaint,Fo=Qn.unstable_now,pK=Qn.unstable_getCurrentPriorityLevel,rD=Qn.unstable_ImmediatePriority,sD=Qn.unstable_UserBlockingPriority,E2=Qn.unstable_NormalPriority,UK=Qn.unstable_LowPriority,oD=Qn.unstable_IdlePriority,bK=Qn.log,yK=Qn.unstable_setDisableYieldValue,bm=null,Or=null;function EK(e){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(bm,e,void 0,(e.current.flags&128)===128)}catch{}}function zl(e){if(typeof bK=="function"&&yK(e),Or&&typeof Or.setStrictMode=="function")try{Or.setStrictMode(bm,e)}catch{}}var Nr=Math.clz32?Math.clz32:_K,vK=Math.log,wK=Math.LN2;function _K(e){return e>>>=0,e===0?32:31-(vK(e)/wK|0)|0}var Ip=128,xp=4194304;function Jc(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Eb(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=Jc(n):(s&=a,s!==0?i=Jc(s):e||(o=a&~o,o!==0&&(i=Jc(o))))):(a=n&~r,a!==0?i=Jc(a):s!==0?i=Jc(s):e||(o=n&~o,o!==0&&(i=Jc(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function ym(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function TK(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aD(){var e=Ip;return Ip<<=1,!(Ip&4194176)&&(Ip=128),e}function lD(){var e=xp;return xp<<=1,!(xp&62914560)&&(xp=4194304),e}function Ry(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Em(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function SK(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Nr(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&cD(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function cD(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Nr(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function uD(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Nr(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function dD(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function fD(){var e=Qt.p;return e!==0?e:(e=window.event,e===void 0?32:SN(e.type))}function IK(e,t){var n=Qt.p;try{return Qt.p=e,t()}finally{Qt.p=n}}var Nc=Math.random().toString(36).slice(2),Bi="__reactFiber$"+Nc,Ur="__reactProps$"+Nc,Vh="__reactContainer$"+Nc,q7="__reactEvents$"+Nc,xK="__reactListeners$"+Nc,CK="__reactHandles$"+Nc,_S="__reactResources$"+Nc,g0="__reactMarker$"+Nc;function nv(e){delete e[Bi],delete e[Ur],delete e[q7],delete e[xK],delete e[CK]}function hu(e){var t=e[Bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vh]||n[Bi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=SI(e);e!==null;){if(n=e[Bi])return n;e=SI(e)}return t}e=n,n=e.parentNode}return null}function $h(e){if(e=e[Bi]||e[Vh]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function i1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(ne(33))}function Of(e){var t=e[_S];return t||(t=e[_S]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function si(e){e[g0]=!0}var hD=new Set,gD={};function bd(e,t){Jf(e,t),Jf(e+"Capture",t)}function Jf(e,t){for(gD[e]=t,e=0;e<t.length;e++)hD.add(t[e])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AK=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),TS={},SS={};function RK(e){return Z7.call(SS,e)?!0:Z7.call(TS,e)?!1:AK.test(e)?SS[e]=!0:(TS[e]=!0,!1)}function IU(e,t,n){if(RK(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Cp(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function sa(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Jr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MK(e){var t=mD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function v2(e){e._valueTracker||(e._valueTracker=MK(e))}function pD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=mD(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function w2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kK=/[\n"\\]/g;function ns(e){return e.replace(kK,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Q7(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Jr(t)):e.value!==""+Jr(t)&&(e.value=""+Jr(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?J7(e,o,Jr(t)):n!=null?J7(e,o,Jr(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+Jr(a):e.removeAttribute("name")}function UD(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+Jr(n):"",t=t!=null?""+Jr(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function J7(e,t,n){t==="number"&&w2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Nf(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Jr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function bD(e,t,n){if(t!=null&&(t=""+Jr(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Jr(n):""}function yD(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(ne(92));if(n1(i)){if(1<i.length)throw Error(ne(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Jr(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function eh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var LK=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function IS(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||LK.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ED(e,t,n){if(t!=null&&typeof t!="object")throw Error(ne(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&IS(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&IS(e,s,t[s])}function iv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DK=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OK=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xU(e){return OK.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var e3=null;function rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gf=null,Pf=null;function xS(e){var t=$h(e);if(t&&(e=t.stateNode)){var n=e[Ur]||null;e:switch(e=t.stateNode,t.type){case"input":if(Q7(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ns(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ur]||null;if(!r)throw Error(ne(90));Q7(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&pD(i)}break e;case"textarea":bD(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Nf(e,!!n.multiple,t,!1)}}}var My=!1;function vD(e,t,n){if(My)return e(t,n);My=!0;try{var i=e(t);return i}finally{if(My=!1,(gf!==null||Pf!==null)&&(Rb(),gf&&(t=gf,e=Pf,Pf=gf=null,xS(t),e)))for(t=0;t<e.length;t++)xS(e[t])}}function m0(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ur]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var t3=!1;if(Va)try{var Ig={};Object.defineProperty(Ig,"passive",{get:function(){t3=!0}}),window.addEventListener("test",Ig,Ig),window.removeEventListener("test",Ig,Ig)}catch{t3=!1}var Hl=null,sv=null,CU=null;function wD(){if(CU)return CU;var e,t=sv,n=t.length,i,r="value"in Hl?Hl.value:Hl.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return CU=r.slice(e,1<i?1-i:void 0)}function AU(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ap(){return!0}function CS(){return!1}function yr(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ap:CS,this.isPropagationStopped=CS,this}return Jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ap)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ap)},persist:function(){},isPersistent:Ap}),t}var yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vb=yr(yd),vm=Jt({},yd,{view:0,detail:0}),NK=yr(vm),ky,Ly,xg,wb=Jt({},vm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xg&&(xg&&e.type==="mousemove"?(ky=e.screenX-xg.screenX,Ly=e.screenY-xg.screenY):Ly=ky=0,xg=e),ky)},movementY:function(e){return"movementY"in e?e.movementY:Ly}}),AS=yr(wb),PK=Jt({},wb,{dataTransfer:0}),FK=yr(PK),BK=Jt({},vm,{relatedTarget:0}),Dy=yr(BK),zK=Jt({},yd,{animationName:0,elapsedTime:0,pseudoElement:0}),HK=yr(zK),VK=Jt({},yd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$K=yr(VK),GK=Jt({},yd,{data:0}),RS=yr(GK),XK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WK(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YK[e])?!!t[e]:!1}function ov(){return WK}var KK=Jt({},vm,{key:function(e){if(e.key){var t=XK[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=AU(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jK[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(e){return e.type==="keypress"?AU(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?AU(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ZK=yr(KK),qK=Jt({},wb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MS=yr(qK),QK=Jt({},vm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),JK=yr(QK),eZ=Jt({},yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),tZ=yr(eZ),nZ=Jt({},wb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iZ=yr(nZ),rZ=Jt({},yd,{newState:0,oldState:0}),sZ=yr(rZ),oZ=[9,13,27,32],av=Va&&"CompositionEvent"in window,S1=null;Va&&"documentMode"in document&&(S1=document.documentMode);var aZ=Va&&"TextEvent"in window&&!S1,_D=Va&&(!av||S1&&8<S1&&11>=S1),kS=" ",LS=!1;function TD(e,t){switch(e){case"keyup":return oZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mf=!1;function lZ(e,t){switch(e){case"compositionend":return SD(t);case"keypress":return t.which!==32?null:(LS=!0,kS);case"textInput":return e=t.data,e===kS&&LS?null:e;default:return null}}function cZ(e,t){if(mf)return e==="compositionend"||!av&&TD(e,t)?(e=wD(),CU=sv=Hl=null,mf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _D&&t.locale!=="ko"?null:t.data;default:return null}}var uZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uZ[e.type]:t==="textarea"}function ID(e,t,n,i){gf?Pf?Pf.push(i):Pf=[i]:gf=i,t=F2(t,"onChange"),0<t.length&&(n=new vb("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var I1=null,p0=null;function dZ(e){fN(e,0)}function _b(e){var t=i1(e);if(pD(t))return e}function OS(e,t){if(e==="change")return t}var xD=!1;if(Va){var Oy;if(Va){var Ny="oninput"in document;if(!Ny){var NS=document.createElement("div");NS.setAttribute("oninput","return;"),Ny=typeof NS.oninput=="function"}Oy=Ny}else Oy=!1;xD=Oy&&(!document.documentMode||9<document.documentMode)}function PS(){I1&&(I1.detachEvent("onpropertychange",CD),p0=I1=null)}function CD(e){if(e.propertyName==="value"&&_b(p0)){var t=[];ID(t,p0,e,rv(e)),vD(dZ,t)}}function fZ(e,t,n){e==="focusin"?(PS(),I1=t,p0=n,I1.attachEvent("onpropertychange",CD)):e==="focusout"&&PS()}function hZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _b(p0)}function gZ(e,t){if(e==="click")return _b(t)}function mZ(e,t){if(e==="input"||e==="change")return _b(t)}function pZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zr=typeof Object.is=="function"?Object.is:pZ;function U0(e,t){if(zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Z7.call(t,r)||!zr(e[r],t[r]))return!1}return!0}function FS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BS(e,t){var n=FS(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FS(n)}}function AD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?AD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RD(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=w2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=w2(e.document)}return t}function lv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UZ(e,t){var n=RD(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&AD(t.ownerDocument.documentElement,t)){if(i!==null&&lv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=BS(t,s);var o=BS(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var bZ=Va&&"documentMode"in document&&11>=document.documentMode,pf=null,n3=null,x1=null,i3=!1;function zS(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;i3||pf==null||pf!==w2(i)||(i=pf,"selectionStart"in i&&lv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),x1&&U0(x1,i)||(x1=i,i=F2(n3,"onSelect"),0<i.length&&(t=new vb("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=pf)))}function Wc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Uf={animationend:Wc("Animation","AnimationEnd"),animationiteration:Wc("Animation","AnimationIteration"),animationstart:Wc("Animation","AnimationStart"),transitionrun:Wc("Transition","TransitionRun"),transitionstart:Wc("Transition","TransitionStart"),transitioncancel:Wc("Transition","TransitionCancel"),transitionend:Wc("Transition","TransitionEnd")},Py={},MD={};Va&&(MD=document.createElement("div").style,"AnimationEvent"in window||(delete Uf.animationend.animation,delete Uf.animationiteration.animation,delete Uf.animationstart.animation),"TransitionEvent"in window||delete Uf.transitionend.transition);function Ed(e){if(Py[e])return Py[e];if(!Uf[e])return e;var t=Uf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in MD)return Py[e]=t[n];return e}var kD=Ed("animationend"),LD=Ed("animationiteration"),DD=Ed("animationstart"),yZ=Ed("transitionrun"),EZ=Ed("transitionstart"),vZ=Ed("transitioncancel"),OD=Ed("transitionend"),ND=new Map,HS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function uo(e,t){ND.set(e,t),bd(t,[e])}var qr=[],bf=0,cv=0;function Tb(){for(var e=bf,t=cv=bf=0;t<e;){var n=qr[t];qr[t++]=null;var i=qr[t];qr[t++]=null;var r=qr[t];qr[t++]=null;var s=qr[t];if(qr[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&PD(n,r,s)}}function Sb(e,t,n,i){qr[bf++]=e,qr[bf++]=t,qr[bf++]=n,qr[bf++]=i,cv|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function uv(e,t,n,i){return Sb(e,t,n,i),_2(e)}function gc(e,t){return Sb(e,null,null,t),_2(e)}function PD(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Nr(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function _2(e){if(50<B1)throw B1=0,S3=null,Error(ne(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var yf={},VS=new WeakMap;function is(e,t){if(typeof e=="object"&&e!==null){var n=VS.get(e);return n!==void 0?n:(t={value:e,source:t,stack:vS(t)},VS.set(e,t),t)}return{value:e,source:t,stack:vS(t)}}var Ef=[],vf=0,T2=null,S2=0,es=[],ts=0,xu=null,xa=1,Ca="";function eu(e,t){Ef[vf++]=S2,Ef[vf++]=T2,T2=e,S2=t}function FD(e,t,n){es[ts++]=xa,es[ts++]=Ca,es[ts++]=xu,xu=e;var i=xa;e=Ca;var r=32-Nr(i)-1;i&=~(1<<r),n+=1;var s=32-Nr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,xa=1<<32-Nr(t)+r|n<<r|i,Ca=s+e}else xa=1<<s|n<<r|i,Ca=e}function dv(e){e.return!==null&&(eu(e,1),FD(e,1,0))}function fv(e){for(;e===T2;)T2=Ef[--vf],Ef[vf]=null,S2=Ef[--vf],Ef[vf]=null;for(;e===xu;)xu=es[--ts],es[ts]=null,Ca=es[--ts],es[ts]=null,xa=es[--ts],es[ts]=null}var Ki=null,yi=null,vt=!1,ks=null,Ao=!1,r3=Error(ne(519));function Hu(e){var t=Error(ne(418,""));throw b0(is(t,e)),r3}function $S(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Bi]=e,t[Ur]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<v0.length;n++)rt(v0[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),UD(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),v2(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),yD(t,i.value,i.defaultValue,i.children),v2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||gN(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=kb),t=!0):t=!1,t||Hu(e)}function GS(e){for(Ki=e.return;Ki;)switch(Ki.tag){case 3:case 27:Ao=!0;return;case 5:case 13:Ao=!1;return;default:Ki=Ki.return}}function Cg(e){if(e!==Ki)return!1;if(!vt)return GS(e),vt=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||k3(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&yi&&Hu(e),GS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){yi=Gs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}yi=null}}else yi=Ki?Gs(e.stateNode.nextSibling):null;return!0}function wm(){yi=Ki=null,vt=!1}function b0(e){ks===null?ks=[e]:ks.push(e)}var C1=Error(ne(460)),BD=Error(ne(474)),s3={then:function(){}};function XS(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Rp(){}function zD(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Rp,Rp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===C1?Error(ne(483)):e;default:if(typeof t.status=="string")t.then(Rp,Rp);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(ne(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===C1?Error(ne(483)):e}throw A1=t,C1}}var A1=null;function jS(){if(A1===null)throw Error(ne(459));var e=A1;return A1=null,e}var Ff=null,y0=0;function Mp(e){var t=y0;return y0+=1,Ff===null&&(Ff=[]),zD(Ff,e,t)}function Ag(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function kp(e,t){throw t.$$typeof===lK?Error(ne(525)):(e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function YS(e){var t=e._init;return t(e._payload)}function HD(e){function t(E,y){if(e){var v=E.deletions;v===null?(E.deletions=[y],E.flags|=16):v.push(y)}}function n(E,y){if(!e)return null;for(;y!==null;)t(E,y),y=y.sibling;return null}function i(E){for(var y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function r(E,y){return E=Jl(E,y),E.index=0,E.sibling=null,E}function s(E,y,v){return E.index=v,e?(v=E.alternate,v!==null?(v=v.index,v<y?(E.flags|=33554434,y):v):(E.flags|=33554434,y)):(E.flags|=1048576,y)}function o(E){return e&&E.alternate===null&&(E.flags|=33554434),E}function a(E,y,v,w){return y===null||y.tag!==6?(y=Ky(v,E.mode,w),y.return=E,y):(y=r(y,v),y.return=E,y)}function l(E,y,v,w){var S=v.type;return S===ff?u(E,y,v.props.children,w,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xl&&YS(S)===y.type)?(y=r(y,v.props),Ag(y,v),y.return=E,y):(y=DU(v.type,v.key,v.props,null,E.mode,w),Ag(y,v),y.return=E,y)}function c(E,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Zy(v,E.mode,w),y.return=E,y):(y=r(y,v.children||[]),y.return=E,y)}function u(E,y,v,w,S){return y===null||y.tag!==7?(y=Au(v,E.mode,w,S),y.return=E,y):(y=r(y,v),y.return=E,y)}function d(E,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Ky(""+y,E.mode,v),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sp:return v=DU(y.type,y.key,y.props,null,E.mode,v),Ag(v,y),v.return=E,v;case e1:return y=Zy(y,E.mode,v),y.return=E,y;case xl:var w=y._init;return y=w(y._payload),d(E,y,v)}if(n1(y)||Sg(y))return y=Au(y,E.mode,v,null),y.return=E,y;if(typeof y.then=="function")return d(E,Mp(y),v);if(y.$$typeof===Ia)return d(E,Lp(E,y),v);kp(E,y)}return null}function f(E,y,v,w){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return S!==null?null:a(E,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sp:return v.key===S?l(E,y,v,w):null;case e1:return v.key===S?c(E,y,v,w):null;case xl:return S=v._init,v=S(v._payload),f(E,y,v,w)}if(n1(v)||Sg(v))return S!==null?null:u(E,y,v,w,null);if(typeof v.then=="function")return f(E,y,Mp(v),w);if(v.$$typeof===Ia)return f(E,y,Lp(E,v),w);kp(E,v)}return null}function h(E,y,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return E=E.get(v)||null,a(y,E,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sp:return E=E.get(w.key===null?v:w.key)||null,l(y,E,w,S);case e1:return E=E.get(w.key===null?v:w.key)||null,c(y,E,w,S);case xl:var R=w._init;return w=R(w._payload),h(E,y,v,w,S)}if(n1(w)||Sg(w))return E=E.get(v)||null,u(y,E,w,S,null);if(typeof w.then=="function")return h(E,y,v,Mp(w),S);if(w.$$typeof===Ia)return h(E,y,v,Lp(y,w),S);kp(y,w)}return null}function m(E,y,v,w){for(var S=null,R=null,_=y,T=y=0,x=null;_!==null&&T<v.length;T++){_.index>T?(x=_,_=null):x=_.sibling;var I=f(E,_,v[T],w);if(I===null){_===null&&(_=x);break}e&&_&&I.alternate===null&&t(E,_),y=s(I,y,T),R===null?S=I:R.sibling=I,R=I,_=x}if(T===v.length)return n(E,_),vt&&eu(E,T),S;if(_===null){for(;T<v.length;T++)_=d(E,v[T],w),_!==null&&(y=s(_,y,T),R===null?S=_:R.sibling=_,R=_);return vt&&eu(E,T),S}for(_=i(_);T<v.length;T++)x=h(_,E,T,v[T],w),x!==null&&(e&&x.alternate!==null&&_.delete(x.key===null?T:x.key),y=s(x,y,T),R===null?S=x:R.sibling=x,R=x);return e&&_.forEach(function(M){return t(E,M)}),vt&&eu(E,T),S}function p(E,y,v,w){if(v==null)throw Error(ne(151));for(var S=null,R=null,_=y,T=y=0,x=null,I=v.next();_!==null&&!I.done;T++,I=v.next()){_.index>T?(x=_,_=null):x=_.sibling;var M=f(E,_,I.value,w);if(M===null){_===null&&(_=x);break}e&&_&&M.alternate===null&&t(E,_),y=s(M,y,T),R===null?S=M:R.sibling=M,R=M,_=x}if(I.done)return n(E,_),vt&&eu(E,T),S;if(_===null){for(;!I.done;T++,I=v.next())I=d(E,I.value,w),I!==null&&(y=s(I,y,T),R===null?S=I:R.sibling=I,R=I);return vt&&eu(E,T),S}for(_=i(_);!I.done;T++,I=v.next())I=h(_,E,T,I.value,w),I!==null&&(e&&I.alternate!==null&&_.delete(I.key===null?T:I.key),y=s(I,y,T),R===null?S=I:R.sibling=I,R=I);return e&&_.forEach(function(D){return t(E,D)}),vt&&eu(E,T),S}function b(E,y,v,w){if(typeof v=="object"&&v!==null&&v.type===ff&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Sp:e:{for(var S=v.key;y!==null;){if(y.key===S){if(S=v.type,S===ff){if(y.tag===7){n(E,y.sibling),w=r(y,v.props.children),w.return=E,E=w;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xl&&YS(S)===y.type){n(E,y.sibling),w=r(y,v.props),Ag(w,v),w.return=E,E=w;break e}n(E,y);break}else t(E,y);y=y.sibling}v.type===ff?(w=Au(v.props.children,E.mode,w,v.key),w.return=E,E=w):(w=DU(v.type,v.key,v.props,null,E.mode,w),Ag(w,v),w.return=E,E=w)}return o(E);case e1:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(E,y.sibling),w=r(y,v.children||[]),w.return=E,E=w;break e}else{n(E,y);break}else t(E,y);y=y.sibling}w=Zy(v,E.mode,w),w.return=E,E=w}return o(E);case xl:return S=v._init,v=S(v._payload),b(E,y,v,w)}if(n1(v))return m(E,y,v,w);if(Sg(v)){if(S=Sg(v),typeof S!="function")throw Error(ne(150));return v=S.call(v),p(E,y,v,w)}if(typeof v.then=="function")return b(E,y,Mp(v),w);if(v.$$typeof===Ia)return b(E,y,Lp(E,v),w);kp(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(n(E,y.sibling),w=r(y,v),w.return=E,E=w):(n(E,y),w=Ky(v,E.mode,w),w.return=E,E=w),o(E)):n(E,y)}return function(E,y,v,w){try{y0=0;var S=b(E,y,v,w);return Ff=null,S}catch(_){if(_===C1)throw _;var R=as(29,_,null,E.mode);return R.lanes=w,R.return=E,R}finally{}}}var Vu=HD(!0),VD=HD(!1),th=qo(null),I2=qo(0);function WS(e,t){e=Xa,cn(I2,e),cn(th,t),Xa=e|t.baseLanes}function o3(){cn(I2,Xa),cn(th,th.current)}function hv(){Xa=I2.current,ui(th),ui(I2)}var Us=qo(null),Bo=null;function Ll(e){var t=e.alternate;cn(Wn,Wn.current&1),cn(Us,e),Bo===null&&(t===null||th.current!==null||t.memoizedState!==null)&&(Bo=e)}function $D(e){if(e.tag===22){if(cn(Wn,Wn.current),cn(Us,e),Bo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bo=e)}}else Dl()}function Dl(){cn(Wn,Wn.current),cn(Us,Us.current)}function Aa(e){ui(Us),Bo===e&&(Bo=null),ui(Wn)}var Wn=qo(0);function x2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wZ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},_Z=Qn.unstable_scheduleCallback,TZ=Qn.unstable_NormalPriority,Yn={$$typeof:Ia,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gv(){return{controller:new wZ,data:new Map,refCount:0}}function _m(e){e.refCount--,e.refCount===0&&_Z(TZ,function(){e.controller.abort()})}var R1=null,a3=0,nh=0,Bf=null;function SZ(e,t){if(R1===null){var n=R1=[];a3=0,nh=Pv(),Bf={status:"pending",value:void 0,then:function(i){n.push(i)}}}return a3++,t.then(KS,KS),t}function KS(){if(--a3===0&&R1!==null){Bf!==null&&(Bf.status="fulfilled");var e=R1;R1=null,nh=0,Bf=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function IZ(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var ZS=Ye.S;Ye.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&SZ(e,t),ZS!==null&&ZS(e,t)};var Cu=qo(null);function mv(){var e=Cu.current;return e!==null?e:Wt.pooledCache}function RU(e,t){t===null?cn(Cu,Cu.current):cn(Cu,t.pool)}function GD(){var e=mv();return e===null?null:{parent:Yn._currentValue,pool:e}}var mc=0,Ke=null,Ot=null,Ln=null,C2=!1,zf=!1,$u=!1,A2=0,E0=0,Hf=null,xZ=0;function _n(){throw Error(ne(321))}function pv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zr(e[n],t[n]))return!1;return!0}function Uv(e,t,n,i,r,s){return mc=s,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ye.H=e===null||e.memoizedState===null?vd:Pc,$u=!1,s=n(i,r),$u=!1,zf&&(s=jD(t,n,i,r)),XD(e),s}function XD(e){Ye.H=Vo;var t=Ot!==null&&Ot.next!==null;if(mc=0,Ln=Ot=Ke=null,C2=!1,E0=0,Hf=null,t)throw Error(ne(300));e===null||ai||(e=e.dependencies,e!==null&&k2(e)&&(ai=!0))}function jD(e,t,n,i){Ke=e;var r=0;do{if(zf&&(Hf=null),E0=0,zf=!1,25<=r)throw Error(ne(301));if(r+=1,Ln=Ot=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Ye.H=wd,s=t(n,i)}while(zf);return s}function CZ(){var e=Ye.H,t=e.useState()[0];return t=typeof t.then=="function"?Tm(t):t,e=e.useState()[0],(Ot!==null?Ot.memoizedState:null)!==e&&(Ke.flags|=1024),t}function bv(){var e=A2!==0;return A2=0,e}function yv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ev(e){if(C2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}C2=!1}mc=0,Ln=Ot=Ke=null,zf=!1,E0=A2=0,Hf=null}function ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Ke.memoizedState=Ln=e:Ln=Ln.next=e,Ln}function Fn(){if(Ot===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Ln===null?Ke.memoizedState:Ln.next;if(t!==null)Ln=t,Ot=e;else{if(e===null)throw Ke.alternate===null?Error(ne(467)):Error(ne(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ln===null?Ke.memoizedState=Ln=e:Ln=Ln.next=e}return Ln}var Ib;Ib=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Tm(e){var t=E0;return E0+=1,Hf===null&&(Hf=[]),e=zD(Hf,e,t),t=Ke,(Ln===null?t.memoizedState:Ln.next)===null&&(t=t.alternate,Ye.H=t===null||t.memoizedState===null?vd:Pc),e}function xb(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tm(e);if(e.$$typeof===Ia)return zi(e)}throw Error(ne(438,String(e)))}function vv(e){var t=null,n=Ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ib(),Ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=uK;return t.index++,n}function $a(e,t){return typeof t=="function"?t(e):t}function MU(e){var t=Fn();return wv(t,Ot,e)}function wv(e,t,n){var i=e.queue;if(i===null)throw Error(ne(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ft&d)===d:(mc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===nh&&(u=!0);else if((mc&f)===f){c=c.next,f===nh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,Ke.lanes|=f,Uc|=f;d=c.action,$u&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,Ke.lanes|=d,Uc|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!zr(s,e.memoizedState)&&(ai=!0,u&&(n=Bf,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Fy(e){var t=Fn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);zr(s,t.memoizedState)||(ai=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function YD(e,t,n){var i=Ke,r=Fn(),s=vt;if(s){if(n===void 0)throw Error(ne(407));n=n()}else n=t();var o=!zr((Ot||r).memoizedState,n);if(o&&(r.memoizedState=n,ai=!0),r=r.queue,_v(ZD.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||Ln!==null&&Ln.memoizedState.tag&1){if(i.flags|=2048,ih(9,KD.bind(null,i,r,n,t),{destroy:void 0},null),Wt===null)throw Error(ne(349));s||mc&60||WD(i,t,n)}return n}function WD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t=Ib(),Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function KD(e,t,n,i){t.value=n,t.getSnapshot=i,qD(t)&&QD(e)}function ZD(e,t,n){return n(function(){qD(t)&&QD(e)})}function qD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zr(e,n)}catch{return!0}}function QD(e){var t=gc(e,2);t!==null&&Qi(t,e,2)}function l3(e){var t=ar();if(typeof e=="function"){var n=e;if(e=n(),$u){zl(!0);try{n()}finally{zl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:e},t}function JD(e,t,n,i){return e.baseState=n,wv(e,Ot,typeof i=="function"?i:$a)}function AZ(e,t,n,i,r){if(Ab(e))throw Error(ne(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};Ye.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,eO(t,s)):(s.next=n.next,t.pending=n.next=s)}}function eO(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=Ye.T,o={};Ye.T=o;try{var a=n(r,i),l=Ye.S;l!==null&&l(o,a),qS(e,t,a)}catch(c){c3(e,t,c)}finally{Ye.T=s}}else try{s=n(r,i),qS(e,t,s)}catch(c){c3(e,t,c)}}function qS(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){QS(e,t,i)},function(i){return c3(e,t,i)}):QS(e,t,n)}function QS(e,t,n){t.status="fulfilled",t.value=n,tO(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,eO(e,n)))}function c3(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,tO(t),t=t.next;while(t!==i)}e.action=null}function tO(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function nO(e,t){return t}function iO(e,t){if(vt){var n=Wt.formState;if(n!==null){e:{var i=Ke;if(vt){if(yi){t:{for(var r=yi,s=Ao;r.nodeType!==8;){if(!s){r=null;break t}if(r=Gs(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){yi=Gs(r.nextSibling),i=r.data==="F!";break e}}Hu(i)}i=!1}i&&(t=n[0])}}return n=ar(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nO,lastRenderedState:t},n.queue=i,n=EO.bind(null,Ke,i),i.dispatch=n,i=l3(!1),s=xv.bind(null,Ke,!1,i.queue),i=ar(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=AZ.bind(null,Ke,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function rO(e){var t=Fn();return sO(t,Ot,e)}function sO(e,t,n){t=wv(e,t,nO)[0],e=MU($a)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Tm(t):t;var i=Fn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(Ke.flags|=2048,ih(9,RZ.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function RZ(e,t){e.action=t}function oO(e){var t=Fn(),n=Ot;if(n!==null)return sO(t,n,e);Fn(),t=t.memoizedState,n=Fn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ih(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=Ke.updateQueue,t===null&&(t=Ib(),Ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function aO(){return Fn().memoizedState}function kU(e,t,n,i){var r=ar();Ke.flags|=e,r.memoizedState=ih(1|t,n,{destroy:void 0},i===void 0?null:i)}function Cb(e,t,n,i){var r=Fn();i=i===void 0?null:i;var s=r.memoizedState.inst;Ot!==null&&i!==null&&pv(i,Ot.memoizedState.deps)?r.memoizedState=ih(t,n,s,i):(Ke.flags|=e,r.memoizedState=ih(1|t,n,s,i))}function JS(e,t){kU(8390656,8,e,t)}function _v(e,t){Cb(2048,8,e,t)}function lO(e,t){return Cb(4,2,e,t)}function cO(e,t){return Cb(4,4,e,t)}function uO(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dO(e,t,n){n=n!=null?n.concat([e]):null,Cb(4,4,uO.bind(null,t,e),n)}function Tv(){}function fO(e,t){var n=Fn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&pv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function hO(e,t){var n=Fn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&pv(t,i[1]))return i[0];if(i=e(),$u){zl(!0);try{e()}finally{zl(!1)}}return n.memoizedState=[i,t],i}function Sv(e,t,n){return n===void 0||mc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=tN(),Ke.lanes|=e,Uc|=e,n)}function gO(e,t,n,i){return zr(n,t)?n:th.current!==null?(e=Sv(e,n,i),zr(e,t)||(ai=!0),e):mc&42?(e=tN(),Ke.lanes|=e,Uc|=e,t):(ai=!0,e.memoizedState=n)}function mO(e,t,n,i,r){var s=Qt.p;Qt.p=s!==0&&8>s?s:8;var o=Ye.T,a={};Ye.T=a,xv(e,!1,t,n);try{var l=r(),c=Ye.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=IZ(l,i);M1(e,t,u,Pr(e))}else M1(e,t,i,Pr(e))}catch(d){M1(e,t,{then:function(){},status:"rejected",reason:d},Pr())}finally{Qt.p=s,Ye.T=o}}function MZ(){}function u3(e,t,n,i){if(e.tag!==5)throw Error(ne(476));var r=pO(e).queue;mO(e,r,t,Iu,n===null?MZ:function(){return UO(e),n(i)})}function pO(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Iu,baseState:Iu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:Iu},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function UO(e){var t=pO(e).next.queue;M1(e,t,{},Pr())}function Iv(){return zi(T0)}function bO(){return Fn().memoizedState}function yO(){return Fn().memoizedState}function kZ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pr();e=ql(n);var i=Ql(t,e,n);i!==null&&(Qi(i,t,n),L1(i,t,n)),t={cache:gv()},e.payload=t;return}t=t.return}}function LZ(e,t,n){var i=Pr();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ab(e)?vO(t,n):(n=uv(e,t,n,i),n!==null&&(Qi(n,e,i),wO(n,t,i)))}function EO(e,t,n){var i=Pr();M1(e,t,n,i)}function M1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ab(e))vO(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,zr(a,o))return Sb(e,t,r,0),Wt===null&&Tb(),!1}catch{}finally{}if(n=uv(e,t,r,i),n!==null)return Qi(n,e,i),wO(n,t,i),!0}return!1}function xv(e,t,n,i){if(i={lane:2,revertLane:Pv(),action:i,hasEagerState:!1,eagerState:null,next:null},Ab(e)){if(t)throw Error(ne(479))}else t=uv(e,n,i,2),t!==null&&Qi(t,e,2)}function Ab(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function vO(e,t){zf=C2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wO(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,uD(e,n)}}var Vo={readContext:zi,use:xb,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n};Vo.useCacheRefresh=_n;Vo.useMemoCache=_n;Vo.useHostTransitionStatus=_n;Vo.useFormState=_n;Vo.useActionState=_n;Vo.useOptimistic=_n;var vd={readContext:zi,use:xb,useCallback:function(e,t){return ar().memoizedState=[e,t===void 0?null:t],e},useContext:zi,useEffect:JS,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,kU(4194308,4,uO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kU(4194308,4,e,t)},useInsertionEffect:function(e,t){kU(4,2,e,t)},useMemo:function(e,t){var n=ar();t=t===void 0?null:t;var i=e();if($u){zl(!0);try{e()}finally{zl(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ar();if(n!==void 0){var r=n(t);if($u){zl(!0);try{n(t)}finally{zl(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=LZ.bind(null,Ke,e),[i.memoizedState,e]},useRef:function(e){var t=ar();return e={current:e},t.memoizedState=e},useState:function(e){e=l3(e);var t=e.queue,n=EO.bind(null,Ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Tv,useDeferredValue:function(e,t){var n=ar();return Sv(n,e,t)},useTransition:function(){var e=l3(!1);return e=mO.bind(null,Ke,e.queue,!0,!1),ar().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ke,r=ar();if(vt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),Wt===null)throw Error(ne(349));ft&60||WD(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,JS(ZD.bind(null,i,s,e),[e]),i.flags|=2048,ih(9,KD.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=ar(),t=Wt.identifierPrefix;if(vt){var n=Ca,i=xa;n=(i&~(1<<32-Nr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=A2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xZ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ar().memoizedState=kZ.bind(null,Ke)}};vd.useMemoCache=vv;vd.useHostTransitionStatus=Iv;vd.useFormState=iO;vd.useActionState=iO;vd.useOptimistic=function(e){var t=ar();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xv.bind(null,Ke,!0,n),n.dispatch=t,[e,t]};var Pc={readContext:zi,use:xb,useCallback:fO,useContext:zi,useEffect:_v,useImperativeHandle:dO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:hO,useReducer:MU,useRef:aO,useState:function(){return MU($a)},useDebugValue:Tv,useDeferredValue:function(e,t){var n=Fn();return gO(n,Ot.memoizedState,e,t)},useTransition:function(){var e=MU($a)[0],t=Fn().memoizedState;return[typeof e=="boolean"?e:Tm(e),t]},useSyncExternalStore:YD,useId:bO};Pc.useCacheRefresh=yO;Pc.useMemoCache=vv;Pc.useHostTransitionStatus=Iv;Pc.useFormState=rO;Pc.useActionState=rO;Pc.useOptimistic=function(e,t){var n=Fn();return JD(n,Ot,e,t)};var wd={readContext:zi,use:xb,useCallback:fO,useContext:zi,useEffect:_v,useImperativeHandle:dO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:hO,useReducer:Fy,useRef:aO,useState:function(){return Fy($a)},useDebugValue:Tv,useDeferredValue:function(e,t){var n=Fn();return Ot===null?Sv(n,e,t):gO(n,Ot.memoizedState,e,t)},useTransition:function(){var e=Fy($a)[0],t=Fn().memoizedState;return[typeof e=="boolean"?e:Tm(e),t]},useSyncExternalStore:YD,useId:bO};wd.useCacheRefresh=yO;wd.useMemoCache=vv;wd.useHostTransitionStatus=Iv;wd.useFormState=oO;wd.useActionState=oO;wd.useOptimistic=function(e,t){var n=Fn();return Ot!==null?JD(n,Ot,e,t):(n.baseState=e,[e,n.queue.dispatch])};function By(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Jt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var d3={isMounted:function(e){return(e=e._reactInternals)?Hh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Pr(),r=ql(i);r.payload=t,n!=null&&(r.callback=n),t=Ql(e,r,i),t!==null&&(Qi(t,e,i),L1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Pr(),r=ql(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ql(e,r,i),t!==null&&(Qi(t,e,i),L1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pr(),i=ql(n);i.tag=2,t!=null&&(i.callback=t),t=Ql(e,i,n),t!==null&&(Qi(t,e,n),L1(t,e,n))}};function eI(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!U0(n,i)||!U0(r,s):!0}function tI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&d3.enqueueReplaceState(t,t.state,null)}function Gu(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Jt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var R2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function _O(e){R2(e)}function TO(e){console.error(e)}function SO(e){R2(e)}function M2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function nI(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function f3(e,t,n){return n=ql(n),n.tag=3,n.payload={element:null},n.callback=function(){M2(e,t)},n}function IO(e){return e=ql(e),e.tag=3,e}function xO(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){nI(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){nI(t,n,i),typeof r!="function"&&(ec===null?ec=new Set([this]):ec.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function DZ(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Sm(t,n,r,!0),n=Us.current,n!==null){switch(n.tag){case 13:return Bo===null?x3():n.alternate===null&&En===0&&(En=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===s3?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Qy(e,i,r)),!1;case 22:return n.flags|=65536,i===s3?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Qy(e,i,r)),!1}throw Error(ne(435,n.tag))}return Qy(e,i,r),x3(),!1}if(vt)return t=Us.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==r3&&(e=Error(ne(422),{cause:i}),b0(is(e,n)))):(i!==r3&&(t=Error(ne(423),{cause:i}),b0(is(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=is(i,n),r=f3(e.stateNode,i,r),Xy(e,r),En!==4&&(En=2)),!1;var s=Error(ne(520),{cause:i});if(s=is(s,n),P1===null?P1=[s]:P1.push(s),En!==4&&(En=2),t===null)return!0;i=is(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=f3(n.stateNode,i,e),Xy(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ec===null||!ec.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=IO(r),xO(r,e,n,i),Xy(n,r),!1}n=n.return}while(n!==null);return!1}var CO=Error(ne(461)),ai=!1;function mi(e,t,n,i){t.child=e===null?VD(t,null,n,i):Vu(t,e.child,n,i)}function iI(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return Xu(t),i=Uv(e,t,n,o,s,r),a=bv(),e!==null&&!ai?(yv(e,t,r),Ga(e,t,r)):(vt&&a&&dv(t),t.flags|=1,mi(e,t,i,r),t.child)}function rI(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!kv(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,AO(e,t,s,i,r)):(e=DU(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Cv(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:U0,n(o,i)&&e.ref===t.ref)return Ga(e,t,r)}return t.flags|=1,e=Jl(s,i),e.ref=t.ref,e.return=t,t.child=e}function AO(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(U0(s,i)&&e.ref===t.ref)if(ai=!1,t.pendingProps=i=s,Cv(e,r))e.flags&131072&&(ai=!0);else return t.lanes=e.lanes,Ga(e,t,r)}return h3(e,t,n,i,r)}function RO(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(k1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return sI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&RU(t,o!==null?o.cachePool:null),o!==null?WS(t,o):o3(),$D(t);else return t.lanes=t.childLanes=536870912,sI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(RU(t,o.cachePool),WS(t,o),Dl(),t.memoizedState=null):(e!==null&&RU(t,null),o3(),Dl());return mi(e,t,r,n),t.child}function sI(e,t,n,i){var r=mv();return r=r===null?null:{parent:Yn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&RU(t,null),o3(),$D(t),e!==null&&Sm(e,t,i,!0),null}function k1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(ne(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function h3(e,t,n,i,r){return Xu(t),n=Uv(e,t,n,i,void 0,r),i=bv(),e!==null&&!ai?(yv(e,t,r),Ga(e,t,r)):(vt&&i&&dv(t),t.flags|=1,mi(e,t,n,r),t.child)}function oI(e,t,n,i,r,s){return Xu(t),t.updateQueue=null,n=jD(t,i,n,r),XD(e),i=bv(),e!==null&&!ai?(yv(e,t,s),Ga(e,t,s)):(vt&&i&&dv(t),t.flags|=1,mi(e,t,n,s),t.child)}function aI(e,t,n,i,r){if(Xu(t),t.stateNode===null){var s=yf,o=n.contextType;typeof o=="object"&&o!==null&&(s=zi(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=d3,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Av(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?zi(o):yf,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(By(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&d3.enqueueReplaceState(s,s.state,null),O1(t,i,s,r),D1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=Gu(n,a);s.props=l;var c=s.context,u=n.contextType;o=yf,typeof u=="object"&&u!==null&&(o=zi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&tI(t,s,i,o),Cl=!1;var f=t.memoizedState;s.state=f,O1(t,i,s,r),D1(),c=t.memoizedState,a||f!==c||Cl?(typeof d=="function"&&(By(t,n,d,i),c=t.memoizedState),(l=Cl||eI(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,y3(e,t),o=t.memoizedProps,u=Gu(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=yf,typeof c=="object"&&c!==null&&(l=zi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&tI(t,s,i,l),Cl=!1,f=t.memoizedState,s.state=f,O1(t,i,s,r),D1();var h=t.memoizedState;o!==d||f!==h||Cl||e!==null&&e.dependencies!==null&&k2(e.dependencies)?(typeof a=="function"&&(By(t,n,a,i),h=t.memoizedState),(u=Cl||eI(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&k2(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,k1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Vu(t,e.child,null,r),t.child=Vu(t,null,n,r)):mi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Ga(e,t,r),e}function lI(e,t,n,i){return wm(),t.flags|=256,mi(e,t,n,i),t.child}var zy={dehydrated:null,treeContext:null,retryLane:0};function Hy(e){return{baseLanes:e,cachePool:GD()}}function Vy(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ls),e}function MO(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(Wn.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(vt){if(r?Ll(t):Dl(),vt){var a=yi,l;if(l=a){e:{for(l=a,a=Ao;l.nodeType!==8;){if(!a){a=null;break e}if(l=Gs(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:xu!==null?{id:xa,overflow:Ca}:null,retryLane:536870912},l=as(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Ki=t,yi=null,l=!0):l=!1}l||Hu(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;Aa(t)}return a=i.children,i=i.fallback,r?(Dl(),r=t.mode,a=m3({mode:"hidden",children:a},r),i=Au(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=Hy(n),r.childLanes=Vy(e,o,n),t.memoizedState=zy,i):(Ll(t),g3(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(Ll(t),t.flags&=-257,t=$y(e,t,n)):t.memoizedState!==null?(Dl(),t.child=e.child,t.flags|=128,t=null):(Dl(),r=i.fallback,a=t.mode,i=m3({mode:"visible",children:i.children},a),r=Au(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Vu(t,e.child,null,n),i=t.child,i.memoizedState=Hy(n),i.childLanes=Vy(e,o,n),t.memoizedState=zy,t=r);else if(Ll(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(ne(419)),i.stack="",i.digest=o,b0({value:i,source:null,stack:null}),t=$y(e,t,n)}else if(ai||Sm(e,t,n,!1),o=(n&e.childLanes)!==0,ai||o){if(o=Wt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,gc(e,i),Qi(o,e,i),CO}a.data==="$?"||x3(),t=$y(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=KZ.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,yi=Gs(a.nextSibling),Ki=t,vt=!0,ks=null,Ao=!1,e!==null&&(es[ts++]=xa,es[ts++]=Ca,es[ts++]=xu,xa=e.id,Ca=e.overflow,xu=t),t=g3(t,i.children),t.flags|=4096);return t}return r?(Dl(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=Jl(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=Jl(c,r):(r=Au(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=Hy(n):(l=a.cachePool,l!==null?(c=Yn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=GD(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=Vy(e,o,n),t.memoizedState=zy,i):(Ll(t),n=e.child,e=n.sibling,n=Jl(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function g3(e,t){return t=m3({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function m3(e,t){return JO(e,t,0,null)}function $y(e,t,n){return Vu(t,e.child,null,n),e=g3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),U3(e.return,t,n)}function Gy(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function kO(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(mi(e,t,i.children,n),i=Wn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cI(e,n,t);else if(e.tag===19)cI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(cn(Wn,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&x2(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gy(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&x2(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gy(t,!0,n,null,s);break;case"together":Gy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Uc|=t.lanes,!(n&t.childLanes))if(e!==null){if(Sm(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=Jl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Cv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&k2(e)))}function OZ(e,t,n){switch(t.tag){case 3:b2(t,t.stateNode.containerInfo),Ol(t,Yn,e.memoizedState.cache),wm();break;case 27:case 5:K7(t);break;case 4:b2(t,t.stateNode.containerInfo);break;case 10:Ol(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ll(t),t.flags|=128,null):n&t.child.childLanes?MO(e,t,n):(Ll(t),e=Ga(e,t,n),e!==null?e.sibling:null);Ll(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Sm(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return kO(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),cn(Wn,Wn.current),i)break;return null;case 22:case 23:return t.lanes=0,RO(e,t,n);case 24:Ol(t,Yn,e.memoizedState.cache)}return Ga(e,t,n)}function LO(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ai=!0;else{if(!Cv(e,n)&&!(t.flags&128))return ai=!1,OZ(e,t,n);ai=!!(e.flags&131072)}else ai=!1,vt&&t.flags&1048576&&FD(t,S2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")kv(i)?(e=Gu(i,e),t.tag=1,t=aI(null,t,i,e,n)):(t.tag=0,t=h3(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===J4){t.tag=11,t=iI(null,t,i,e,n);break e}else if(r===ev){t.tag=14,t=rI(null,t,i,e,n);break e}}throw t=Y7(i)||i,Error(ne(306,t,""))}}return t;case 0:return h3(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Gu(i,t.pendingProps),aI(e,t,i,r,n);case 3:e:{if(b2(t,t.stateNode.containerInfo),e===null)throw Error(ne(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,y3(e,t),O1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Ol(t,Yn,s),s!==r.cache&&b3(t,[Yn],n,!0),D1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=lI(e,t,s,n);break e}else if(s!==i){i=is(Error(ne(424)),t),b0(i),t=lI(e,t,s,n);break e}else for(yi=Gs(t.stateNode.containerInfo.firstChild),Ki=t,vt=!0,ks=null,Ao=!0,n=VD(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wm(),s===i){t=Ga(e,t,n);break e}mi(e,t,s,n)}t=t.child}return t;case 26:return k1(e,t),e===null?(n=xI(t.type,null,t.pendingProps,null))?t.memoizedState=n:vt||(n=t.type,e=t.pendingProps,i=B2(Zl.current).createElement(n),i[Bi]=t,i[Ur]=e,Ei(i,n,e),si(i),t.stateNode=i):t.memoizedState=xI(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K7(t),e===null&&vt&&(i=t.stateNode=UN(t.type,t.pendingProps,Zl.current),Ki=t,Ao=!0,yi=Gs(i.firstChild)),i=t.pendingProps.children,e!==null||vt?mi(e,t,i,n):t.child=Vu(t,null,i,n),k1(e,t),t.child;case 5:return e===null&&vt&&((r=i=yi)&&(i=dq(i,t.type,t.pendingProps,Ao),i!==null?(t.stateNode=i,Ki=t,yi=Gs(i.firstChild),Ao=!1,r=!0):r=!1),r||Hu(t)),K7(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,k3(r,s)?i=null:o!==null&&k3(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=Uv(e,t,CZ,null,null,n),T0._currentValue=r),k1(e,t),mi(e,t,i,n),t.child;case 6:return e===null&&vt&&((e=n=yi)&&(n=fq(n,t.pendingProps,Ao),n!==null?(t.stateNode=n,Ki=t,yi=null,e=!0):e=!1),e||Hu(t)),null;case 13:return MO(e,t,n);case 4:return b2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Vu(t,null,i,n):mi(e,t,i,n),t.child;case 11:return iI(e,t,t.type,t.pendingProps,n);case 7:return mi(e,t,t.pendingProps,n),t.child;case 8:return mi(e,t,t.pendingProps.children,n),t.child;case 12:return mi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ol(t,t.type,i.value),mi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Xu(t),r=zi(r),i=i(r),t.flags|=1,mi(e,t,i,n),t.child;case 14:return rI(e,t,t.type,t.pendingProps,n);case 15:return AO(e,t,t.type,t.pendingProps,n);case 19:return kO(e,t,n);case 22:return RO(e,t,n);case 24:return Xu(t),i=zi(Yn),e===null?(r=mv(),r===null&&(r=Wt,s=gv(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Av(t),Ol(t,Yn,r)):(e.lanes&n&&(y3(e,t),O1(t,null,null,n),D1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Ol(t,Yn,i)):(i=s.cache,Ol(t,Yn,i),i!==r.cache&&b3(t,[Yn],n,!0))),mi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(ne(156,t.tag))}var p3=qo(null),_d=null,Ra=null;function Ol(e,t,n){cn(p3,t._currentValue),t._currentValue=n}function La(e){e._currentValue=p3.current,ui(p3)}function U3(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function b3(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),U3(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(ne(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),U3(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function Sm(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(ne(387));if(o=o.memoizedProps,o!==null){var a=r.type;zr(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===U2.current){if(o=r.alternate,o===null)throw Error(ne(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(T0):e=[T0])}r=r.return}e!==null&&b3(t,e,n,i),t.flags|=262144}function k2(e){for(e=e.firstContext;e!==null;){if(!zr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xu(e){_d=e,Ra=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zi(e){return DO(_d,e)}function Lp(e,t){return _d===null&&Xu(e),DO(e,t)}function DO(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ra===null){if(e===null)throw Error(ne(308));Ra=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ra=Ra.next=t;return n}var Cl=!1;function Av(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function y3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ql(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ql(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,gn&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=_2(e),PD(e,null,n),t}return Sb(e,i,t,n),_2(e)}function L1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,uD(e,n)}}function Xy(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var E3=!1;function D1(){if(E3){var e=Bf;if(e!==null)throw e}}function O1(e,t,n,i){E3=!1;var r=e.updateQueue;Cl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(ft&f)===f:(i&f)===f){f!==0&&f===nh&&(E3=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var b=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(b,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(b,d,f):m,f==null)break e;d=Jt({},d,f);break e;case 2:Cl=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Uc|=o,e.lanes=o,e.memoizedState=d}}function OO(e,t){if(typeof e!="function")throw Error(ne(191,e));e.call(t)}function NO(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)OO(n[e],t)}function Im(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Bt(t,t.return,a)}}function pc(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Bt(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Bt(t,t.return,c)}}function PO(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{NO(t,n)}catch(i){Bt(e,e.return,i)}}}function FO(e,t,n){n.props=Gu(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Bt(e,t,i)}}function gu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Bt(e,t,s)}}function Rr(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Bt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Bt(e,t,r)}else n.current=null}function BO(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Bt(e,e.return,r)}}function uI(e,t,n){try{var i=e.stateNode;oq(i,e.type,n,t),i[Ur]=t}catch(r){Bt(e,e.return,r)}}function zO(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function jy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function v3(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kb));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(v3(e,t,n),e=e.sibling;e!==null;)v3(e,t,n),e=e.sibling}function L2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(L2(e,t,n),e=e.sibling;e!==null;)L2(e,t,n),e=e.sibling}var ya=!1,yn=!1,Yy=!1,dI=typeof WeakSet=="function"?WeakSet:Set,ri=null,fI=!1;function NZ(e,t){if(e=e.containerInfo,R3=$2,e=RD(e),lv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(M3={focusedElem:e,selectionRange:n},$2=!1,ri=t;ri!==null;)if(t=ri,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ri=e;else for(;ri!==null;){switch(t=ri,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=Gu(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Bt(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)L3(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":L3(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(ne(163))}if(e=t.sibling,e!==null){e.return=t.return,ri=e;break}ri=t.return}return m=fI,fI=!1,m}function HO(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:aa(e,n),i&4&&Im(5,n);break;case 1:if(aa(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Bt(n,n.return,a)}else{var r=Gu(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Bt(n,n.return,a)}}i&64&&PO(n),i&512&&gu(n,n.return);break;case 3:if(aa(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{NO(i,e)}catch(a){Bt(n,n.return,a)}}break;case 26:aa(e,n),i&512&&gu(n,n.return);break;case 27:case 5:aa(e,n),t===null&&i&4&&BO(n),i&512&&gu(n,n.return);break;case 12:aa(e,n);break;case 13:aa(e,n),i&4&&GO(e,n);break;case 22:if(r=n.memoizedState!==null||ya,!r){t=t!==null&&t.memoizedState!==null||yn;var s=ya,o=yn;ya=r,(yn=t)&&!o?wl(e,n,(n.subtreeFlags&8772)!==0):aa(e,n),ya=s,yn=o}i&512&&(n.memoizedProps.mode==="manual"?gu(n,n.return):Rr(n,n.return));break;default:aa(e,n)}}function VO(e){var t=e.alternate;t!==null&&(e.alternate=null,VO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&nv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kn=null,Sr=!1;function oa(e,t,n){for(n=n.child;n!==null;)$O(e,t,n),n=n.sibling}function $O(e,t,n){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(bm,n)}catch{}switch(n.tag){case 26:yn||Rr(n,t),oa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:yn||Rr(n,t);var i=kn,r=Sr;for(kn=n.stateNode,oa(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);nv(n),kn=i,Sr=r;break;case 5:yn||Rr(n,t);case 6:r=kn;var s=Sr;if(kn=null,oa(e,t,n),kn=r,Sr=s,kn!==null)if(Sr)try{e=kn,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Bt(n,t,o)}else try{kn.removeChild(n.stateNode)}catch(o){Bt(n,t,o)}break;case 18:kn!==null&&(Sr?(t=kn,n=n.stateNode,t.nodeType===8?s8(t.parentNode,n):t.nodeType===1&&s8(t,n),x0(t)):s8(kn,n.stateNode));break;case 4:i=kn,r=Sr,kn=n.stateNode.containerInfo,Sr=!0,oa(e,t,n),kn=i,Sr=r;break;case 0:case 11:case 14:case 15:yn||pc(2,n,t),yn||pc(4,n,t),oa(e,t,n);break;case 1:yn||(Rr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&FO(n,t,i)),oa(e,t,n);break;case 21:oa(e,t,n);break;case 22:yn||Rr(n,t),yn=(i=yn)||n.memoizedState!==null,oa(e,t,n),yn=i;break;default:oa(e,t,n)}}function GO(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{x0(e)}catch(n){Bt(t,t.return,n)}}function PZ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new dI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new dI),t;default:throw Error(ne(435,e.tag))}}function Wy(e,t){var n=PZ(e);t.forEach(function(i){var r=ZZ.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function jr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:kn=a.stateNode,Sr=!1;break e;case 3:kn=a.stateNode.containerInfo,Sr=!0;break e;case 4:kn=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(kn===null)throw Error(ne(160));$O(s,o,r),kn=null,Sr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)XO(t,e),t=t.sibling}var Rs=null;function XO(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jr(t,e),Yr(e),i&4&&(pc(3,e,e.return),Im(3,e),pc(5,e,e.return));break;case 1:jr(t,e),Yr(e),i&512&&(yn||n===null||Rr(n,n.return)),i&64&&ya&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Rs;if(jr(t,e),Yr(e),i&512&&(yn||n===null||Rr(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[g0]||s[Bi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ei(s,i,n),s[Bi]=e,si(s),i=s;break e;case"link":var o=AI("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),Ei(s,i,n),r.head.appendChild(s);break;case"meta":if(o=AI("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),Ei(s,i,n),r.head.appendChild(s);break;default:throw Error(ne(468,i))}s[Bi]=e,si(s),i=s}e.stateNode=i}else RI(r,e.type,e.stateNode);else e.stateNode=CI(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?RI(r,e.type,e.stateNode):CI(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&uI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[g0]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ei(r,d,s),r[Bi]=e,r[Ur]=s}catch(m){Bt(e,e.return,m)}}case 5:if(jr(t,e),Yr(e),i&512&&(yn||n===null||Rr(n,n.return)),e.flags&32){r=e.stateNode;try{eh(r,"")}catch(m){Bt(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,uI(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Yy=!0);break;case 6:if(jr(t,e),Yr(e),i&4){if(e.stateNode===null)throw Error(ne(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Bt(e,e.return,m)}}break;case 3:if(NU=null,r=Rs,Rs=z2(t.containerInfo),jr(t,e),Rs=r,Yr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{x0(t.containerInfo)}catch(m){Bt(e,e.return,m)}Yy&&(Yy=!1,jO(e));break;case 4:i=Rs,Rs=z2(e.stateNode.containerInfo),jr(t,e),Yr(e),Rs=i;break;case 12:jr(t,e),Yr(e);break;case 13:jr(t,e),Yr(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ov=Fo()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wy(e,i)));break;case 22:if(i&512&&(yn||n===null||Rr(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=ya,d=yn,ya=u||l,yn=d||c,jr(t,e),yn=d,ya=u,Yr(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=ya||yn,n===null||c||t||ef(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Bt(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Bt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Wy(e,n))));break;case 19:jr(t,e),Yr(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Wy(e,i)));break;case 21:break;default:jr(t,e),Yr(e)}}function Yr(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(zO(n)){var i=n;break e}n=n.return}throw Error(ne(160))}switch(i.tag){case 27:var r=i.stateNode,s=jy(e);L2(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(eh(o,""),i.flags&=-33);var a=jy(e);L2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=jy(e);v3(e,c,l);break;default:throw Error(ne(161))}}}catch(u){Bt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jO(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;jO(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)HO(e,t.alternate,t),t=t.sibling}function ef(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:pc(4,t,t.return),ef(t);break;case 1:Rr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&FO(t,t.return,n),ef(t);break;case 26:case 27:case 5:Rr(t,t.return),ef(t);break;case 22:Rr(t,t.return),t.memoizedState===null&&ef(t);break;default:ef(t)}e=e.sibling}}function wl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:wl(r,s,n),Im(4,s);break;case 1:if(wl(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Bt(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)OO(l[r],a)}catch(c){Bt(i,i.return,c)}}n&&o&64&&PO(s),gu(s,s.return);break;case 26:case 27:case 5:wl(r,s,n),n&&i===null&&o&4&&BO(s),gu(s,s.return);break;case 12:wl(r,s,n);break;case 13:wl(r,s,n),n&&o&4&&GO(r,s);break;case 22:s.memoizedState===null&&wl(r,s,n),gu(s,s.return);break;default:wl(r,s,n)}t=t.sibling}}function Rv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&_m(n))}function Mv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_m(e))}function bl(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)YO(e,t,n,i),t=t.sibling}function YO(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:bl(e,t,n,i),r&2048&&Im(9,t);break;case 3:bl(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_m(e)));break;case 12:if(r&2048){bl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Bt(t,t.return,l)}}else bl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?bl(e,t,n,i):N1(e,t):s._visibility&4?bl(e,t,n,i):(s._visibility|=4,tf(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Rv(t.alternate,t);break;case 24:bl(e,t,n,i),r&2048&&Mv(t.alternate,t);break;default:bl(e,t,n,i)}}function tf(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:tf(s,o,a,l,r),Im(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?tf(s,o,a,l,r):N1(s,o):(u._visibility|=4,tf(s,o,a,l,r)),r&&c&2048&&Rv(o.alternate,o);break;case 24:tf(s,o,a,l,r),r&&c&2048&&Mv(o.alternate,o);break;default:tf(s,o,a,l,r)}t=t.sibling}}function N1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:N1(n,i),r&2048&&Rv(i.alternate,i);break;case 24:N1(n,i),r&2048&&Mv(i.alternate,i);break;default:N1(n,i)}t=t.sibling}}var r1=8192;function zd(e){if(e.subtreeFlags&r1)for(e=e.child;e!==null;)WO(e),e=e.sibling}function WO(e){switch(e.tag){case 26:zd(e),e.flags&r1&&e.memoizedState!==null&&Sq(Rs,e.memoizedState,e.memoizedProps);break;case 5:zd(e);break;case 3:case 4:var t=Rs;Rs=z2(e.stateNode.containerInfo),zd(e),Rs=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=r1,r1=16777216,zd(e),r1=t):zd(e));break;default:zd(e)}}function KO(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Rg(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ri=i,qO(i,e)}KO(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ZO(e),e=e.sibling}function ZO(e){switch(e.tag){case 0:case 11:case 15:Rg(e),e.flags&2048&&pc(9,e,e.return);break;case 3:Rg(e);break;case 12:Rg(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,LU(e)):Rg(e);break;default:Rg(e)}}function LU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ri=i,qO(i,e)}KO(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:pc(8,t,t.return),LU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,LU(t));break;default:LU(t)}e=e.sibling}}function qO(e,t){for(;ri!==null;){var n=ri;switch(n.tag){case 0:case 11:case 15:pc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:_m(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ri=i;else e:for(n=e;ri!==null;){i=ri;var r=i.sibling,s=i.return;if(VO(i),i===n){ri=null;break e}if(r!==null){r.return=s,ri=r;break e}ri=s}}}function FZ(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(e,t,n,i){return new FZ(e,t,n,i)}function kv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jl(e,t){var n=e.alternate;return n===null?(n=as(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function QO(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function DU(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")kv(e)&&(o=1);else if(typeof e=="string")o=_q(e,n,Po.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ff:return Au(n.children,r,s,t);case JL:o=8,r|=24;break;case G7:return e=as(12,n,t,r|2),e.elementType=G7,e.lanes=s,e;case X7:return e=as(13,n,t,r),e.elementType=X7,e.lanes=s,e;case j7:return e=as(19,n,t,r),e.elementType=j7,e.lanes=s,e;case tD:return JO(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cK:case Ia:o=10;break e;case eD:o=9;break e;case J4:o=11;break e;case ev:o=14;break e;case xl:o=16,i=null;break e}o=29,n=Error(ne(130,e===null?"null":typeof e,"")),i=null}return t=as(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Au(e,t,n,i){return e=as(7,e,i,t),e.lanes=n,e}function JO(e,t,n,i){e=as(22,e,i,t),e.elementType=tD,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(ne(456));if(!(r._pendingVisibility&2)){var o=gc(s,2);o!==null&&(r._pendingVisibility|=2,Qi(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(ne(456));if(r._pendingVisibility&2){var o=gc(s,2);o!==null&&(r._pendingVisibility&=-3,Qi(o,s,2))}}};return e.stateNode=r,e}function Ky(e,t,n){return e=as(6,e,null,t),e.lanes=n,e}function Zy(e,t,n){return t=as(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function la(e){e.flags|=4}function hI(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!EN(t)){if(t=Us.current,t!==null&&((ft&4194176)===ft?Bo!==null:(ft&62914560)!==ft&&!(ft&536870912)||t!==Bo))throw A1=s3,BD;e.flags|=8192}}function Dp(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?lD():536870912,e.lanes|=t,rh|=t)}function Mg(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function BZ(e,t,n){var i=t.pendingProps;switch(fv(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return un(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),La(Yn),Qf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cg(t)?la(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(I3(ks),ks=null))),un(t),null;case 26:return n=t.memoizedState,e===null?(la(t),n!==null?(un(t),hI(t,n)):(un(t),t.flags&=-16777217)):n?n!==e.memoizedState?(la(t),un(t),hI(t,n)):(un(t),t.flags&=-16777217):(e.memoizedProps!==i&&la(t),un(t),t.flags&=-16777217),null;case 27:y2(t),n=Zl.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&la(t);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return un(t),null}e=Po.current,Cg(t)?$S(t):(e=UN(r,i,n),t.stateNode=e,la(t))}return un(t),null;case 5:if(y2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&la(t);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return un(t),null}if(e=Po.current,Cg(t))$S(t);else{switch(r=B2(Zl.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Bi]=t,e[Ur]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Ei(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&la(t)}}return un(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&la(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ne(166));if(e=Zl.current,Cg(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ki,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Bi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||gN(e.nodeValue,n)),e||Hu(t)}else e=B2(e).createTextNode(i),e[Bi]=t,t.stateNode=e}return un(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Cg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(ne(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ne(317));r[Bi]=t}else wm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),r=!1}else ks!==null&&(I3(ks),ks=null),r=!0;if(!r)return t.flags&256?(Aa(t),t):(Aa(t),null)}if(Aa(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Dp(t,t.updateQueue),un(t),null;case 4:return Qf(),e===null&&Fv(t.stateNode.containerInfo),un(t),null;case 10:return La(t.type),un(t),null;case 19:if(ui(Wn),r=t.memoizedState,r===null)return un(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Mg(r,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=x2(e),s!==null){for(t.flags|=128,Mg(r,!1),e=s.updateQueue,t.updateQueue=e,Dp(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)QO(n,e),n=n.sibling;return cn(Wn,Wn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Fo()>D2&&(t.flags|=128,i=!0,Mg(r,!1),t.lanes=4194304)}else{if(!i)if(e=x2(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Dp(t,e),Mg(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!vt)return un(t),null}else 2*Fo()-r.renderingStartTime>D2&&n!==536870912&&(t.flags|=128,i=!0,Mg(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Fo(),t.sibling=null,e=Wn.current,cn(Wn,i?e&1|2:e&1),t):(un(t),null);case 22:case 23:return Aa(t),hv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),n=t.updateQueue,n!==null&&Dp(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&ui(Cu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),La(Yn),un(t),null;case 25:return null}throw Error(ne(156,t.tag))}function zZ(e,t){switch(fv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return La(Yn),Qf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return y2(t),null;case 13:if(Aa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));wm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ui(Wn),null;case 4:return Qf(),null;case 10:return La(t.type),null;case 22:case 23:return Aa(t),hv(),e!==null&&ui(Cu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return La(Yn),null;case 25:return null;default:return null}}function eN(e,t){switch(fv(t),t.tag){case 3:La(Yn),Qf();break;case 26:case 27:case 5:y2(t);break;case 4:Qf();break;case 13:Aa(t);break;case 19:ui(Wn);break;case 10:La(t.type);break;case 22:case 23:Aa(t),hv(),e!==null&&ui(Cu);break;case 24:La(Yn)}}var HZ={getCacheForType:function(e){var t=zi(Yn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},VZ=typeof WeakMap=="function"?WeakMap:Map,gn=0,Wt=null,Qe=null,ft=0,jt=0,Ir=null,Ea=!1,Gh=!1,Lv=!1,Xa=0,En=0,Uc=0,Ru=0,Dv=0,ls=0,rh=0,P1=null,Ro=null,w3=!1,Ov=0,D2=1/0,O2=null,ec=null,Op=!1,ou=null,F1=0,_3=0,T3=null,B1=0,S3=null;function Pr(){if(gn&2&&ft!==0)return ft&-ft;if(Ye.T!==null){var e=nh;return e!==0?e:Pv()}return fD()}function tN(){ls===0&&(ls=!(ft&536870912)||vt?aD():536870912);var e=Us.current;return e!==null&&(e.flags|=32),ls}function Qi(e,t,n){(e===Wt&&jt===2||e.cancelPendingCommit!==null)&&(sh(e,0),va(e,ft,ls,!1)),Em(e,n),(!(gn&2)||e!==Wt)&&(e===Wt&&(!(gn&2)&&(Ru|=n),En===4&&va(e,ft,ls,!1)),Qo(e))}function nN(e,t,n){if(gn&6)throw Error(ne(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||ym(e,t),r=i?XZ(e,t):qy(e,t,!0),s=i;do{if(r===0){Gh&&!i&&va(e,t,0,!1);break}else if(r===6)va(e,t,0,!Ea);else{if(n=e.current.alternate,s&&!$Z(n)){r=qy(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=P1;var l=a.current.memoizedState.isDehydrated;if(l&&(sh(a,o).flags|=256),o=qy(a,o,!1),o!==2){if(Lv&&!l){a.errorRecoveryDisabledLanes|=s,Ru|=s,r=4;break e}s=Ro,Ro=r,s!==null&&I3(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){sh(e,0),va(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(ne(345));case 4:if((t&4194176)===t){va(i,t,ls,!Ea);break e}break;case 2:Ro=null;break;case 3:case 5:break;default:throw Error(ne(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=Ov+300-Fo(),10<s)){if(va(i,t,ls,!Ea),Eb(i,0)!==0)break e;i.timeoutHandle=pN(gI.bind(null,i,n,Ro,O2,w3,t,ls,Ru,rh,Ea,2,-0,0),s);break e}gI(i,n,Ro,O2,w3,t,ls,Ru,rh,Ea,0,-0,0)}}break}while(!0);Qo(e)}function I3(e){Ro===null?Ro=e:Ro.push.apply(Ro,e)}function gI(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(_0={stylesheets:null,count:0,unsuspend:Tq},WO(t),t=Iq(),t!==null)){e.cancelPendingCommit=t(pI.bind(null,e,n,i,r,o,a,l,1,d,f)),va(e,s,o,!c);return}pI(e,n,i,r,o,a,l,u,d,f)}function $Z(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!zr(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function va(e,t,n,i){t&=~Dv,t&=~Ru,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Nr(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&cD(e,n,t)}function Rb(){return gn&6?!0:(xm(0),!1)}function Nv(){if(Qe!==null){if(jt===0)var e=Qe.return;else e=Qe,Ra=_d=null,Ev(e),Ff=null,y0=0,e=Qe;for(;e!==null;)eN(e.alternate,e),e=e.return;Qe=null}}function sh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,lq(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Nv(),Wt=e,Qe=n=Jl(e.current,null),ft=t,jt=0,Ir=null,Ea=!1,Gh=ym(e,t),Lv=!1,rh=ls=Dv=Ru=Uc=En=0,Ro=P1=null,w3=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Nr(i),s=1<<r;t|=e[r],i&=~s}return Xa=t,Tb(),n}function iN(e,t){Ke=null,Ye.H=Vo,t===C1?(t=jS(),jt=3):t===BD?(t=jS(),jt=4):jt=t===CO?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ir=t,Qe===null&&(En=1,M2(e,is(t,e.current)))}function rN(){var e=Ye.H;return Ye.H=Vo,e===null?Vo:e}function sN(){var e=Ye.A;return Ye.A=HZ,e}function x3(){En=4,Ea||(ft&4194176)!==ft&&Us.current!==null||(Gh=!0),!(Uc&134217727)&&!(Ru&134217727)||Wt===null||va(Wt,ft,ls,!1)}function qy(e,t,n){var i=gn;gn|=2;var r=rN(),s=sN();(Wt!==e||ft!==t)&&(O2=null,sh(e,t)),t=!1;var o=En;e:do try{if(jt!==0&&Qe!==null){var a=Qe,l=Ir;switch(jt){case 8:Nv(),o=6;break e;case 3:case 2:case 6:Us.current===null&&(t=!0);var c=jt;if(jt=0,Ir=null,wf(e,a,l,c),n&&Gh){o=0;break e}break;default:c=jt,jt=0,Ir=null,wf(e,a,l,c)}}GZ(),o=En;break}catch(u){iN(e,u)}while(!0);return t&&e.shellSuspendCounter++,Ra=_d=null,gn=i,Ye.H=r,Ye.A=s,Qe===null&&(Wt=null,ft=0,Tb()),o}function GZ(){for(;Qe!==null;)oN(Qe)}function XZ(e,t){var n=gn;gn|=2;var i=rN(),r=sN();Wt!==e||ft!==t?(O2=null,D2=Fo()+500,sh(e,t)):Gh=ym(e,t);e:do try{if(jt!==0&&Qe!==null){t=Qe;var s=Ir;t:switch(jt){case 1:jt=0,Ir=null,wf(e,t,s,1);break;case 2:if(XS(s)){jt=0,Ir=null,mI(t);break}t=function(){jt===2&&Wt===e&&(jt=7),Qo(e)},s.then(t,t);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:XS(s)?(jt=0,Ir=null,mI(t)):(jt=0,Ir=null,wf(e,t,s,7));break;case 5:var o=null;switch(Qe.tag){case 26:o=Qe.memoizedState;case 5:case 27:var a=Qe;if(!o||EN(o)){jt=0,Ir=null;var l=a.sibling;if(l!==null)Qe=l;else{var c=a.return;c!==null?(Qe=c,Mb(c)):Qe=null}break t}}jt=0,Ir=null,wf(e,t,s,5);break;case 6:jt=0,Ir=null,wf(e,t,s,6);break;case 8:Nv(),En=6;break e;default:throw Error(ne(462))}}jZ();break}catch(u){iN(e,u)}while(!0);return Ra=_d=null,Ye.H=i,Ye.A=r,gn=n,Qe!==null?0:(Wt=null,ft=0,Tb(),En)}function jZ(){for(;Qe!==null&&!gK();)oN(Qe)}function oN(e){var t=LO(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,t===null?Mb(e):Qe=t}function mI(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=oI(n,t,t.pendingProps,t.type,void 0,ft);break;case 11:t=oI(n,t,t.pendingProps,t.type.render,t.ref,ft);break;case 5:Ev(t);default:eN(n,t),t=Qe=QO(t,Xa),t=LO(n,t,Xa)}e.memoizedProps=e.pendingProps,t===null?Mb(e):Qe=t}function wf(e,t,n,i){Ra=_d=null,Ev(t),Ff=null,y0=0;var r=t.return;try{if(DZ(e,r,t,n,ft)){En=1,M2(e,is(n,e.current)),Qe=null;return}}catch(s){if(r!==null)throw Qe=r,s;En=1,M2(e,is(n,e.current)),Qe=null;return}t.flags&32768?(vt||i===1?e=!0:Gh||ft&536870912?e=!1:(Ea=e=!0,(i===2||i===3||i===6)&&(i=Us.current,i!==null&&i.tag===13&&(i.flags|=16384))),aN(t,e)):Mb(t)}function Mb(e){var t=e;do{if(t.flags&32768){aN(t,Ea);return}e=t.return;var n=BZ(t.alternate,t,Xa);if(n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);En===0&&(En=5)}function aN(e,t){do{var n=zZ(e.alternate,e);if(n!==null){n.flags&=32767,Qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Qe=e;return}Qe=e=n}while(e!==null);En=6,Qe=null}function pI(e,t,n,i,r,s,o,a,l,c){var u=Ye.T,d=Qt.p;try{Qt.p=2,Ye.T=null,YZ(e,t,n,i,d,r,s,o,a,l,c)}finally{Ye.T=u,Qt.p=d}}function YZ(e,t,n,i,r,s,o,a){do Vf();while(ou!==null);if(gn&6)throw Error(ne(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=cv,SK(e,i,c,s,o,a),e===Wt&&(Qe=Wt=null,ft=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Op||(Op=!0,_3=c,T3=n,qZ(E2,function(){return Vf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=Ye.T,Ye.T=null,s=Qt.p,Qt.p=2,o=gn,gn|=4,NZ(e,l),XO(l,e),UZ(M3,e.containerInfo),$2=!!R3,M3=R3=null,e.current=l,HO(e,l.alternate,l),mK(),gn=o,Qt.p=s,Ye.T=n):e.current=l,Op?(Op=!1,ou=e,F1=i):lN(e,c),c=e.pendingLanes,c===0&&(ec=null),EK(l.stateNode),Qo(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return F1&3&&Vf(),c=e.pendingLanes,i&4194218&&c&42?e===S3?B1++:(B1=0,S3=e):B1=0,xm(0),null}function lN(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_m(t)))}function Vf(){if(ou!==null){var e=ou,t=_3;_3=0;var n=dD(F1),i=Ye.T,r=Qt.p;try{if(Qt.p=32>n?32:n,Ye.T=null,ou===null)var s=!1;else{n=T3,T3=null;var o=ou,a=F1;if(ou=null,F1=0,gn&6)throw Error(ne(331));var l=gn;if(gn|=4,ZO(o.current),YO(o,o.current,a,n),gn=l,xm(0,!1),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(bm,o)}catch{}s=!0}return s}finally{Qt.p=r,Ye.T=i,lN(e,t)}}return!1}function UI(e,t,n){t=is(n,t),t=f3(e.stateNode,t,2),e=Ql(e,t,2),e!==null&&(Em(e,2),Qo(e))}function Bt(e,t,n){if(e.tag===3)UI(e,e,n);else for(;t!==null;){if(t.tag===3){UI(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ec===null||!ec.has(i))){e=is(n,e),n=IO(2),i=Ql(t,n,2),i!==null&&(xO(n,i,t,e),Em(i,2),Qo(i));break}}t=t.return}}function Qy(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new VZ;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Lv=!0,r.add(n),e=WZ.bind(null,e,t,n),t.then(e,e))}function WZ(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Wt===e&&(ft&n)===n&&(En===4||En===3&&(ft&62914560)===ft&&300>Fo()-Ov?!(gn&2)&&sh(e,0):Dv|=n,rh===ft&&(rh=0)),Qo(e)}function cN(e,t){t===0&&(t=lD()),e=gc(e,t),e!==null&&(Em(e,t),Qo(e))}function KZ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cN(e,n)}function ZZ(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(ne(314))}i!==null&&i.delete(t),cN(e,n)}function qZ(e,t){return tv(e,t)}var N2=null,nf=null,C3=!1,P2=!1,Jy=!1,Mu=0;function Qo(e){e!==nf&&e.next===null&&(nf===null?N2=nf=e:nf=nf.next=e),P2=!0,C3||(C3=!0,JZ(QZ))}function xm(e,t){if(!Jy&&P2){Jy=!0;do for(var n=!1,i=N2;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Nr(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,bI(i,s))}else s=ft,s=Eb(i,i===Wt?s:0),!(s&3)||ym(i,s)||(n=!0,bI(i,s));i=i.next}while(n);Jy=!1}}function QZ(){P2=C3=!1;var e=0;Mu!==0&&(aq()&&(e=Mu),Mu=0);for(var t=Fo(),n=null,i=N2;i!==null;){var r=i.next,s=uN(i,t);s===0?(i.next=null,n===null?N2=r:n.next=r,r===null&&(nf=n)):(n=i,(e!==0||s&3)&&(P2=!0)),i=r}xm(e)}function uN(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Nr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=TK(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Wt,n=ft,n=Eb(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&jt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Ay(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ym(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Ay(i),dD(n)){case 2:case 8:n=sD;break;case 32:n=E2;break;case 268435456:n=oD;break;default:n=E2}return i=dN.bind(null,e),n=tv(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Ay(i),e.callbackPriority=2,e.callbackNode=null,2}function dN(e,t){var n=e.callbackNode;if(Vf()&&e.callbackNode!==n)return null;var i=ft;return i=Eb(e,e===Wt?i:0),i===0?null:(nN(e,i,t),uN(e,Fo()),e.callbackNode!=null&&e.callbackNode===n?dN.bind(null,e):null)}function bI(e,t){if(Vf())return null;nN(e,t,!0)}function JZ(e){cq(function(){gn&6?tv(rD,e):e()})}function Pv(){return Mu===0&&(Mu=aD()),Mu}function yI(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:xU(""+e)}function EI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function eq(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=yI((r[Ur]||null).action),o=i.submitter;o&&(t=(t=o[Ur]||null)?yI(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new vb("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Mu!==0){var l=o?EI(r,o):new FormData(r);u3(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?EI(r,o):new FormData(r),u3(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var e8=0;e8<HS.length;e8++){var t8=HS[e8],tq=t8.toLowerCase(),nq=t8[0].toUpperCase()+t8.slice(1);uo(tq,"on"+nq)}uo(kD,"onAnimationEnd");uo(LD,"onAnimationIteration");uo(DD,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(yZ,"onTransitionRun");uo(EZ,"onTransitionStart");uo(vZ,"onTransitionCancel");uo(OD,"onTransitionEnd");Jf("onMouseEnter",["mouseout","mouseover"]);Jf("onMouseLeave",["mouseout","mouseover"]);Jf("onPointerEnter",["pointerout","pointerover"]);Jf("onPointerLeave",["pointerout","pointerover"]);bd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bd("onBeforeInput",["compositionend","keypress","textInput","paste"]);bd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var v0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(v0));function fN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){R2(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){R2(u)}r.currentTarget=null,s=l}}}}function rt(e,t){var n=t[q7];n===void 0&&(n=t[q7]=new Set);var i=e+"__bubble";n.has(i)||(hN(t,e,2,!1),n.add(i))}function n8(e,t,n){var i=0;t&&(i|=4),hN(n,e,i,t)}var Np="_reactListening"+Math.random().toString(36).slice(2);function Fv(e){if(!e[Np]){e[Np]=!0,hD.forEach(function(n){n!=="selectionchange"&&(iq.has(n)||n8(n,!1,e),n8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Np]||(t[Np]=!0,n8("selectionchange",!1,t))}}function hN(e,t,n,i){switch(SN(t)){case 2:var r=Aq;break;case 8:r=Rq;break;default:r=Vv}n=r.bind(null,t,n,e),r=void 0,!t3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function i8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=hu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}vD(function(){var c=s,u=rv(n),d=[];e:{var f=ND.get(e);if(f!==void 0){var h=vb,m=e;switch(e){case"keypress":if(AU(n)===0)break e;case"keydown":case"keyup":h=ZK;break;case"focusin":m="focus",h=Dy;break;case"focusout":m="blur",h=Dy;break;case"beforeblur":case"afterblur":h=Dy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=AS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=FK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=JK;break;case kD:case LD:case DD:h=HK;break;case OD:h=tZ;break;case"scroll":case"scrollend":h=NK;break;case"wheel":h=iZ;break;case"copy":case"cut":case"paste":h=$K;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=MS;break;case"toggle":case"beforetoggle":h=sZ}var p=(t&4)!==0,b=!p&&(e==="scroll"||e==="scrollend"),E=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,v;y!==null;){var w=y;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||E===null||(w=m0(y,E),w!=null&&p.push(w0(y,w,v))),b)break;y=y.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==e3&&(m=n.relatedTarget||n.fromElement)&&(hu(m)||m[Vh]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?hu(m):null,m!==null&&(b=Hh(m),p=m.tag,m!==b||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=AS,w="onMouseLeave",E="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=MS,w="onPointerLeave",E="onPointerEnter",y="pointer"),b=h==null?f:i1(h),v=m==null?f:i1(m),f=new p(w,y+"leave",h,n,u),f.target=b,f.relatedTarget=v,w=null,hu(u)===c&&(p=new p(E,y+"enter",m,n,u),p.target=v,p.relatedTarget=b,w=p),b=w,h&&m)t:{for(p=h,E=m,y=0,v=p;v;v=Hd(v))y++;for(v=0,w=E;w;w=Hd(w))v++;for(;0<y-v;)p=Hd(p),y--;for(;0<v-y;)E=Hd(E),v--;for(;y--;){if(p===E||E!==null&&p===E.alternate)break t;p=Hd(p),E=Hd(E)}p=null}else p=null;h!==null&&vI(d,f,h,p,!1),m!==null&&b!==null&&vI(d,b,m,p,!0)}}e:{if(f=c?i1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=OS;else if(DS(f))if(xD)S=mZ;else{S=hZ;var R=fZ}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&iv(c.elementType)&&(S=OS):S=gZ;if(S&&(S=S(e,c))){ID(d,S,n,u);break e}R&&R(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&J7(f,"number",f.value)}switch(R=c?i1(c):window,e){case"focusin":(DS(R)||R.contentEditable==="true")&&(pf=R,n3=c,x1=null);break;case"focusout":x1=n3=pf=null;break;case"mousedown":i3=!0;break;case"contextmenu":case"mouseup":case"dragend":i3=!1,zS(d,n,u);break;case"selectionchange":if(bZ)break;case"keydown":case"keyup":zS(d,n,u)}var _;if(av)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mf?TD(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(_D&&n.locale!=="ko"&&(mf||T!=="onCompositionStart"?T==="onCompositionEnd"&&mf&&(_=wD()):(Hl=u,sv="value"in Hl?Hl.value:Hl.textContent,mf=!0)),R=F2(c,T),0<R.length&&(T=new RS(T,e,null,n,u),d.push({event:T,listeners:R}),_?T.data=_:(_=SD(n),_!==null&&(T.data=_)))),(_=aZ?lZ(e,n):cZ(e,n))&&(T=F2(c,"onBeforeInput"),0<T.length&&(R=new RS("onBeforeInput","beforeinput",null,n,u),d.push({event:R,listeners:T}),R.data=_)),eq(d,e,c,n,u)}fN(d,t)})}function w0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function F2(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=m0(e,n),r!=null&&i.unshift(w0(e,r,s)),r=m0(e,t),r!=null&&i.push(w0(e,r,s))),e=e.return}return i}function Hd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vI(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=m0(n,s),c!=null&&o.unshift(w0(n,c,l))):r||(c=m0(n,s),c!=null&&o.push(w0(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var rq=/\r\n?/g,sq=/\u0000|\uFFFD/g;function wI(e){return(typeof e=="string"?e:""+e).replace(rq,`
`).replace(sq,"")}function gN(e,t){return t=wI(t),wI(e)===t}function kb(){}function Dt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||eh(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&eh(e,""+i);break;case"className":Cp(e,"class",i);break;case"tabIndex":Cp(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Cp(e,n,i);break;case"style":ED(e,i,s);break;case"data":if(t!=="object"){Cp(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=xU(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Dt(e,t,"name",r.name,r,null),Dt(e,t,"formEncType",r.formEncType,r,null),Dt(e,t,"formMethod",r.formMethod,r,null),Dt(e,t,"formTarget",r.formTarget,r,null)):(Dt(e,t,"encType",r.encType,r,null),Dt(e,t,"method",r.method,r,null),Dt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=xU(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=kb);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=xU(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),IU(e,"popover",i);break;case"xlinkActuate":sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":sa(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":sa(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":sa(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":sa(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":IU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=DK.get(n)||n,IU(e,n,i))}}function A3(e,t,n,i,r,s){switch(n){case"style":ED(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));e.innerHTML=n}}break;case"children":typeof i=="string"?eh(e,i):(typeof i=="number"||typeof i=="bigint")&&eh(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=kb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gD.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Ur]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):IU(e,n,i)}}}function Ei(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,t));default:Dt(e,t,s,o,n,null)}}r&&Dt(e,t,"srcSet",n.srcSet,n,null),i&&Dt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ne(137,t));break;default:Dt(e,t,i,u,n,null)}}UD(e,s,a,l,c,o,r,!1),v2(e);return;case"select":rt("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Dt(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?Nf(e,!!i,t,!1):n!=null&&Nf(e,!!i,n,!0);return;case"textarea":rt("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(ne(91));break;default:Dt(e,t,o,a,n,null)}yD(e,i,r,s),v2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Dt(e,t,l,i,n,null)}return;case"dialog":rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<v0.length;i++)rt(v0[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,t));default:Dt(e,t,c,i,n,null)}return;default:if(iv(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&A3(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Dt(e,t,a,i,n,null))}function oq(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||Dt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(ne(137,t));break;default:h!==d&&Dt(e,t,f,h,i,d)}}Q7(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||Dt(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&Dt(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?Nf(e,!!n,f,!1):!!i!=!!n&&(t!=null?Nf(e,!!n,t,!0):Nf(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Dt(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(ne(91));break;default:r!==s&&Dt(e,t,o,r,i,s)}bD(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Dt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Dt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&Dt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ne(137,t));break;default:Dt(e,t,c,f,i,h)}return;default:if(iv(t)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!==void 0&&!i.hasOwnProperty(b)&&A3(e,t,b,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||A3(e,t,u,f,i,h);return}}for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&Dt(e,t,E,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||Dt(e,t,d,f,i,h)}var R3=null,M3=null;function B2(e){return e.nodeType===9?e:e.ownerDocument}function _I(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mN(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function k3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var r8=null;function aq(){var e=window.event;return e&&e.type==="popstate"?e===r8?!1:(r8=e,!0):(r8=null,!1)}var pN=typeof setTimeout=="function"?setTimeout:void 0,lq=typeof clearTimeout=="function"?clearTimeout:void 0,TI=typeof Promise=="function"?Promise:void 0,cq=typeof queueMicrotask=="function"?queueMicrotask:typeof TI<"u"?function(e){return TI.resolve(null).then(e).catch(uq)}:pN;function uq(e){setTimeout(function(){throw e})}function s8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),x0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);x0(t)}function L3(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":L3(n),nv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function dq(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[g0])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Gs(e.nextSibling),e===null)break}return null}function fq(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Gs(e.nextSibling),e===null))return null;return e}function Gs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function SI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function UN(e,t,n){switch(t=B2(n),e){case"html":if(e=t.documentElement,!e)throw Error(ne(452));return e;case"head":if(e=t.head,!e)throw Error(ne(453));return e;case"body":if(e=t.body,!e)throw Error(ne(454));return e;default:throw Error(ne(451))}}var bs=new Map,II=new Set;function z2(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var ul=Qt.d;Qt.d={f:hq,r:gq,D:mq,C:pq,L:Uq,m:bq,X:Eq,S:yq,M:vq};function hq(){var e=ul.f(),t=Rb();return e||t}function gq(e){var t=$h(e);t!==null&&t.tag===5&&t.type==="form"?UO(t):ul.r(e)}var Xh=typeof document>"u"?null:document;function bN(e,t,n){var i=Xh;if(i&&typeof t=="string"&&t){var r=ns(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),II.has(r)||(II.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Ei(t,"link",e),si(t),i.head.appendChild(t)))}}function mq(e){ul.D(e),bN("dns-prefetch",e,null)}function pq(e,t){ul.C(e,t),bN("preconnect",e,t)}function Uq(e,t,n){ul.L(e,t,n);var i=Xh;if(i&&e&&t){var r='link[rel="preload"][as="'+ns(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ns(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ns(n.imageSizes)+'"]')):r+='[href="'+ns(e)+'"]';var s=r;switch(t){case"style":s=oh(e);break;case"script":s=jh(e)}bs.has(s)||(e=Jt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),bs.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Cm(s))||t==="script"&&i.querySelector(Am(s))||(t=i.createElement("link"),Ei(t,"link",e),si(t),i.head.appendChild(t)))}}function bq(e,t){ul.m(e,t);var n=Xh;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ns(i)+'"][href="'+ns(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=jh(e)}if(!bs.has(s)&&(e=Jt({rel:"modulepreload",href:e},t),bs.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Am(s)))return}i=n.createElement("link"),Ei(i,"link",e),si(i),n.head.appendChild(i)}}}function yq(e,t,n){ul.S(e,t,n);var i=Xh;if(i&&e){var r=Of(i).hoistableStyles,s=oh(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Cm(s)))a.loading=5;else{e=Jt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=bs.get(s))&&Bv(e,n);var l=o=i.createElement("link");si(l),Ei(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,OU(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function Eq(e,t){ul.X(e,t);var n=Xh;if(n&&e){var i=Of(n).hoistableScripts,r=jh(e),s=i.get(r);s||(s=n.querySelector(Am(r)),s||(e=Jt({src:e,async:!0},t),(t=bs.get(r))&&zv(e,t),s=n.createElement("script"),si(s),Ei(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function vq(e,t){ul.M(e,t);var n=Xh;if(n&&e){var i=Of(n).hoistableScripts,r=jh(e),s=i.get(r);s||(s=n.querySelector(Am(r)),s||(e=Jt({src:e,async:!0,type:"module"},t),(t=bs.get(r))&&zv(e,t),s=n.createElement("script"),si(s),Ei(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function xI(e,t,n,i){var r=(r=Zl.current)?z2(r):null;if(!r)throw Error(ne(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=oh(n.href),n=Of(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=oh(n.href);var s=Of(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(Cm(e)))&&!s._p&&(o.instance=s,o.state.loading=5),bs.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bs.set(e,n),s||wq(r,e,n,o.state))),t&&i===null)throw Error(ne(528,""));return o}if(t&&i!==null)throw Error(ne(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=jh(n),n=Of(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(ne(444,e))}}function oh(e){return'href="'+ns(e)+'"'}function Cm(e){return'link[rel="stylesheet"]['+e+"]"}function yN(e){return Jt({},e,{"data-precedence":e.precedence,precedence:null})}function wq(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ei(t,"link",n),si(t),e.head.appendChild(t))}function jh(e){return'[src="'+ns(e)+'"]'}function Am(e){return"script[async]"+e}function CI(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ns(n.href)+'"]');if(i)return t.instance=i,si(i),i;var r=Jt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),si(i),Ei(i,"style",r),OU(i,n.precedence,e),t.instance=i;case"stylesheet":r=oh(n.href);var s=e.querySelector(Cm(r));if(s)return t.state.loading|=4,t.instance=s,si(s),s;i=yN(n),(r=bs.get(r))&&Bv(i,r),s=(e.ownerDocument||e).createElement("link"),si(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ei(s,"link",i),t.state.loading|=4,OU(s,n.precedence,e),t.instance=s;case"script":return s=jh(n.src),(r=e.querySelector(Am(s)))?(t.instance=r,si(r),r):(i=n,(r=bs.get(s))&&(i=Jt({},n),zv(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),si(r),Ei(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(ne(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,OU(i,n.precedence,e));return t.instance}function OU(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Bv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var NU=null;function AI(e,t,n){if(NU===null){var i=new Map,r=NU=new Map;r.set(n,i)}else r=NU,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[g0]||s[Bi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function RI(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function _q(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function EN(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var _0=null;function Tq(){}function Sq(e,t,n){if(_0===null)throw Error(ne(475));var i=_0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=oh(n.href),s=e.querySelector(Cm(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=H2.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,si(s);return}s=e.ownerDocument||e,n=yN(n),(r=bs.get(r))&&Bv(n,r),s=s.createElement("link"),si(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ei(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=H2.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Iq(){if(_0===null)throw Error(ne(475));var e=_0;return e.stylesheets&&e.count===0&&D3(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&D3(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function H2(){if(this.count--,this.count===0){if(this.stylesheets)D3(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var V2=null;function D3(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,V2=new Map,t.forEach(xq,e),V2=null,H2.call(e))}function xq(e,t){if(!(t.state.loading&4)){var n=V2.get(e);if(n)var i=n.get(null);else{n=new Map,V2.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=H2.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var T0={$$typeof:Ia,Provider:null,Consumer:null,_currentValue:Iu,_currentValue2:Iu,_threadCount:0};function Cq(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ry(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ry(0),this.hiddenUpdates=Ry(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function vN(e,t,n,i,r,s,o,a,l,c,u,d){return e=new Cq(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=as(3,null,null,t),e.current=s,s.stateNode=e,t=gv(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Av(s),e}function wN(e){return e?(e=yf,e):yf}function _N(e,t,n,i,r,s){r=wN(r),i.context===null?i.context=r:i.pendingContext=r,i=ql(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ql(e,i,t),n!==null&&(Qi(n,e,t),L1(n,e,t))}function MI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hv(e,t){MI(e,t),(e=e.alternate)&&MI(e,t)}function TN(e){if(e.tag===13){var t=gc(e,67108864);t!==null&&Qi(t,e,67108864),Hv(e,67108864)}}var $2=!0;function Aq(e,t,n,i){var r=Ye.T;Ye.T=null;var s=Qt.p;try{Qt.p=2,Vv(e,t,n,i)}finally{Qt.p=s,Ye.T=r}}function Rq(e,t,n,i){var r=Ye.T;Ye.T=null;var s=Qt.p;try{Qt.p=8,Vv(e,t,n,i)}finally{Qt.p=s,Ye.T=r}}function Vv(e,t,n,i){if($2){var r=O3(i);if(r===null)i8(e,t,i,G2,n),kI(e,i);else if(kq(r,e,t,n,i))i.stopPropagation();else if(kI(e,i),t&4&&-1<Mq.indexOf(e)){for(;r!==null;){var s=$h(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Jc(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Nr(o);a.entanglements[1]|=l,o&=~l}Qo(s),!(gn&6)&&(D2=Fo()+500,xm(0))}}break;case 13:a=gc(s,2),a!==null&&Qi(a,s,2),Rb(),Hv(s,2)}if(s=O3(i),s===null&&i8(e,t,i,G2,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else i8(e,t,i,null,n)}}function O3(e){return e=rv(e),$v(e)}var G2=null;function $v(e){if(G2=null,e=hu(e),e!==null){var t=Hh(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=nD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return G2=e,null}function SN(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pK()){case rD:return 2;case sD:return 8;case E2:case UK:return 32;case oD:return 268435456;default:return 32}default:return 32}}var N3=!1,tc=null,nc=null,ic=null,S0=new Map,I0=new Map,Nl=[],Mq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kI(e,t){switch(e){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":S0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":I0.delete(t.pointerId)}}function kg(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=$h(t),t!==null&&TN(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function kq(e,t,n,i,r){switch(t){case"focusin":return tc=kg(tc,e,t,n,i,r),!0;case"dragenter":return nc=kg(nc,e,t,n,i,r),!0;case"mouseover":return ic=kg(ic,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return S0.set(s,kg(S0.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,I0.set(s,kg(I0.get(s)||null,e,t,n,i,r)),!0}return!1}function IN(e){var t=hu(e.target);if(t!==null){var n=Hh(t);if(n!==null){if(t=n.tag,t===13){if(t=nD(n),t!==null){e.blockedOn=t,IK(e.priority,function(){if(n.tag===13){var i=Pr(),r=gc(n,i);r!==null&&Qi(r,n,i),Hv(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function PU(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=O3(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);e3=i,n.target.dispatchEvent(i),e3=null}else return t=$h(n),t!==null&&TN(t),e.blockedOn=n,!1;t.shift()}return!0}function LI(e,t,n){PU(e)&&n.delete(t)}function Lq(){N3=!1,tc!==null&&PU(tc)&&(tc=null),nc!==null&&PU(nc)&&(nc=null),ic!==null&&PU(ic)&&(ic=null),S0.forEach(LI),I0.forEach(LI)}function Pp(e,t){e.blockedOn===t&&(e.blockedOn=null,N3||(N3=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,Lq)))}var Fp=null;function DI(e){Fp!==e&&(Fp=e,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,function(){Fp===e&&(Fp=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if($v(i||n)===null)continue;break}var s=$h(n);s!==null&&(e.splice(t,3),t-=3,u3(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function x0(e){function t(l){return Pp(l,e)}tc!==null&&Pp(tc,e),nc!==null&&Pp(nc,e),ic!==null&&Pp(ic,e),S0.forEach(t),I0.forEach(t);for(var n=0;n<Nl.length;n++){var i=Nl[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Nl.length&&(n=Nl[0],n.blockedOn===null);)IN(n),n.blockedOn===null&&Nl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[Ur]||null;if(typeof s=="function")o||DI(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[Ur]||null)a=o.formAction;else if($v(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),DI(n)}}}function Gv(e){this._internalRoot=e}Lb.prototype.render=Gv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));var n=t.current,i=Pr();_N(n,i,e,t,null,null)};Lb.prototype.unmount=Gv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Vf(),_N(e.current,2,null,e,null,null),Rb(),t[Vh]=null}};function Lb(e){this._internalRoot=e}Lb.prototype.unstable_scheduleHydration=function(e){if(e){var t=fD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nl.length&&t!==0&&t<Nl[n].priority;n++);Nl.splice(n,0,e),n===0&&IN(e)}};var OI=qL.version;if(OI!=="19.0.0")throw Error(ne(527,OI,"19.0.0"));Qt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=hK(t),e=e!==null?iD(e):null,e=e===null?null:e.stateNode,e};var Dq={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ye,findFiberByHostInstance:hu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{bm=Bp.inject(Dq),Or=Bp}catch{}}bb.createRoot=function(e,t){if(!QL(e))throw Error(ne(299));var n=!1,i="",r=_O,s=TO,o=SO,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=vN(e,1,!1,null,null,n,i,r,s,o,a,null),e[Vh]=t.current,Fv(e.nodeType===8?e.parentNode:e),new Gv(t)};bb.hydrateRoot=function(e,t,n){if(!QL(e))throw Error(ne(299));var i=!1,r="",s=_O,o=TO,a=SO,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=vN(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=wN(null),n=t.current,i=Pr(),r=ql(i),r.callback=null,Ql(n,r,i),t.current.lanes=i,Em(t,i),Qo(t),e[Vh]=t.current,Fv(e),new Lb(t)};bb.version="19.0.0";function xN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xN)}catch(e){console.error(e)}}xN(),XL.exports=bb;var Oq=XL.exports;const Nq="modulepreload",Pq=function(e,t){return new URL(e,t).href},NI={},ye=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=Pq(o,i),o in NI)return;NI[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Nq,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Fq(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await ye(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([]),import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{s?s("./sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const kt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Nt=globalThis,Td=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ku="9.0.1";function Db(){return Ob(Nt),Nt}function Ob(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ku,t[ku]=t[ku]||{}}function Nb(e,t,n=Nt){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[ku]=i[ku]||{};return r[e]||(r[e]=t())}const Bq="Sentry Logger ",X2=["debug","info","warn","error","log","assert","trace"],j2={};function Yh(e){if(!("console"in Nt))return e();const t=Nt.console,n={},i=Object.keys(j2);i.forEach(r=>{const s=j2[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function zq(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Td?X2.forEach(n=>{t[n]=(...i)=>{e&&Yh(()=>{Nt.console[n](`${Bq}[${n}]:`,...i)})}}):X2.forEach(n=>{t[n]=()=>{}}),t}const He=Nb("logger",zq),CN=50,ju="?",PI=/\(error: (.*)\)/,FI=/captureMessage|captureException/;function AN(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=PI.test(l)?l.replace(PI,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=CN+r)break}}return Vq(s.slice(r))}}function Hq(e){return Array.isArray(e)?AN(...e):e}function Vq(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(zp(t).function||"")&&t.pop(),t.reverse(),FI.test(zp(t).function||"")&&(t.pop(),FI.test(zp(t).function||"")&&t.pop()),t.slice(0,CN).map(n=>({...n,filename:n.filename||zp(t).filename,function:n.function||ju}))}function zp(e){return e[e.length-1]||{}}const o8="<anonymous>";function bc(e){try{return!e||typeof e!="function"?o8:e.name||o8}catch{return o8}}function BI(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const FU={},zI={};function Sd(e,t){FU[e]=FU[e]||[],FU[e].push(t)}function Id(e,t){if(!zI[e]){zI[e]=!0;try{t()}catch(n){Td&&He.error(`Error while instrumenting ${e}`,n)}}}function Xs(e,t){const n=e&&FU[e];if(n)for(const i of n)try{i(t)}catch(r){Td&&He.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${bc(i)}
Error:`,r)}}let a8=null;function $q(e){const t="error";Sd(t,e),Id(t,Gq)}function Gq(){a8=Nt.onerror,Nt.onerror=function(e,t,n,i,r){return Xs("error",{column:i,error:r,line:n,msg:e,url:t}),a8?a8.apply(this,arguments):!1},Nt.onerror.__SENTRY_INSTRUMENTED__=!0}let l8=null;function Xq(e){const t="unhandledrejection";Sd(t,e),Id(t,jq)}function jq(){l8=Nt.onunhandledrejection,Nt.onunhandledrejection=function(e){return Xs("unhandledrejection",e),l8?l8.apply(this,arguments):!0},Nt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const RN=Object.prototype.toString;function Xv(e){switch(RN.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Yu(e,Error)}}function Wh(e,t){return RN.call(e)===`[object ${t}]`}function MN(e){return Wh(e,"ErrorEvent")}function HI(e){return Wh(e,"DOMError")}function Yq(e){return Wh(e,"DOMException")}function Da(e){return Wh(e,"String")}function jv(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Yv(e){return e===null||jv(e)||typeof e!="object"&&typeof e!="function"}function ah(e){return Wh(e,"Object")}function Pb(e){return typeof Event<"u"&&Yu(e,Event)}function Wq(e){return typeof Element<"u"&&Yu(e,Element)}function Kq(e){return Wh(e,"RegExp")}function Fb(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function Zq(e){return ah(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Yu(e,t){try{return e instanceof t}catch{return!1}}function kN(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const Wv=Nt,qq=80;function LN(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||qq;for(;n&&s++<i&&(c=Qq(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function Qq(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(Wv.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&Da(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function Kv(){try{return Wv.document.location.href}catch{return""}}function Jq(e){if(!Wv.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function $f(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Y2(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{kN(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function eQ(e,t,n=!1){return Da(e)?Kq(t)?t.test(e):Da(t)?n?e===t:e.includes(t):!1:!1}function Bb(e,t=[],n=!1){return t.some(i=>eQ(e,i,n))}function Mr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&DN(r,i);try{e[t]=r}catch{Td&&He.log(`Failed to replace method "${t}" in object`,e)}}function Wu(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Td&&He.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function DN(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Wu(e,"__sentry_original__",t)}catch{}}function Zv(e){return e.__sentry_original__}function ON(e){if(Xv(e))return{message:e.message,name:e.name,stack:e.stack,...$I(e)};if(Pb(e)){const t={type:e.type,target:VI(e.target),currentTarget:VI(e.currentTarget),...$I(e)};return typeof CustomEvent<"u"&&Yu(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function VI(e){try{return Wq(e)?LN(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function $I(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function tQ(e,t=40){const n=Object.keys(ON(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return $f(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:$f(s,t)}return""}function kr(e){return P3(e,new Map)}function P3(e,t){if(nQ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=P3(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(P3(r,t))}),i}return e}function nQ(e){if(!ah(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const NN=1e3;function Rm(){return Date.now()/NN}function iQ(){const{performance:e}=Nt;if(!(e!=null&&e.now))return Rm;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/NN}const Oa=iQ();function fs(){const e=Nt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function PN(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Al(e){const{message:t,event_id:n}=e;if(t)return t;const i=PN(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function F3(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Ku(e,t){const n=PN(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r==null?void 0:r.data,...t.data};n.mechanism.data=s}}function GI(e){if(rQ(e))return!0;try{Wu(e,"__sentry_captured__",!0)}catch{}return!1}function rQ(e){try{return e.__sentry_captured__}catch{}}var ha;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(ha||(ha={}));function Zu(e){return new yc(t=>{t(e)})}function W2(e){return new yc((t,n)=>{n(e)})}class yc{constructor(t){this._state=ha.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new yc((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new yc((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===ha.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ha.RESOLVED&&n[1](this._value),this._state===ha.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===ha.PENDING){if(Fb(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(ha.RESOLVED,s)},r=s=>{n(ha.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function sQ(e){const t=Oa(),n={sid:fs(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>aQ(n)};return e&&lh(n,e),n}function lh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Oa(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:fs()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function oQ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),lh(e,n)}function aQ(e){return kr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function XI(){return fs()}function FN(){return fs().substring(16)}function Mm(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=Mm(i[r],t[r],n-1));return i}const B3="_sentrySpan";function jI(e,t){t?Wu(e,B3,t):delete e[B3]}function YI(e){return e[B3]}const lQ=100;class $o{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:XI(),sampleRand:Math.random()}}clone(){const t=new $o;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,jI(t,YI(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&lh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof $o?n.getScopeData():ah(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,jI(this,void 0),this._attachments=[],this.setPropagationContext({traceId:XI(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const i=typeof n=="number"?n:lQ;if(i<=0)return this;const r={timestamp:Rm(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:YI(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Mm(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||fs();if(!this._client)return He.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=(i==null?void 0:i.event_id)||fs();if(!this._client)return He.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||fs();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(He.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function cQ(){return Nb("defaultCurrentScope",()=>new $o)}function uQ(){return Nb("defaultIsolationScope",()=>new $o)}class dQ{constructor(t,n){let i;t?i=t:i=new $o;let r;n?r=n:r=new $o,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return Fb(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ch(){const e=Db(),t=Ob(e);return t.stack=t.stack||new dQ(cQ(),uQ())}function fQ(e){return ch().withScope(e)}function hQ(e,t){const n=ch();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function WI(e){return ch().withScope(()=>e(ch().getIsolationScope()))}function gQ(){return{withIsolationScope:WI,withScope:fQ,withSetScope:hQ,withSetIsolationScope:(e,t)=>WI(t),getCurrentScope:()=>ch().getScope(),getIsolationScope:()=>ch().getIsolationScope()}}function qv(e){const t=Ob(e);return t.acs?t.acs:gQ()}function dl(){const e=Db();return qv(e).getCurrentScope()}function km(){const e=Db();return qv(e).getIsolationScope()}function mQ(){return Nb("globalScope",()=>new $o)}function Qv(...e){const t=Db(),n=qv(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function $i(){return dl().getClient()}function pQ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return kr({trace_id:n,span_id:r||FN(),parent_span_id:i})}const UQ="sentry.source",bQ="sentry.sample_rate",yQ="sentry.op",EQ="sentry.origin",BN="sentry.profile_id",zN="sentry.exclusive_time",vQ=0,wQ=1,_Q="_sentryScope",TQ="_sentryIsolationScope";function HN(e){return{scope:e[_Q],isolationScope:e[TQ]}}function SQ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const IQ="sentry-",xQ=/^sentry-/;function CQ(e){const t=AQ(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(xQ)){const o=r.slice(IQ.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function AQ(e){if(!(!e||!Da(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=KI(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):KI(e)}function KI(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const RQ=1;let ZI=!1;function MQ(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:Jv(e).parent_span_id,s=HN(e).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||FN():t;return kr({parent_span_id:r,span_id:o,trace_id:n})}function qI(e){return typeof e=="number"?QI(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?QI(e.getTime()):Oa()}function QI(e){return e>9999999999?e/1e3:e}function Jv(e){if(LQ(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(kQ(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return kr({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:qI(r),timestamp:qI(o)||void 0,status:OQ(l),op:i[yQ],origin:i[EQ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function kQ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function LQ(e){return typeof e.getSpanJSON=="function"}function DQ(e){const{traceFlags:t}=e.spanContext();return t===RQ}function OQ(e){if(!(!e||e.code===vQ))return e.code===wQ?"ok":e.message||"unknown_error"}const NQ="_sentryRootSpan";function VN(e){return e[NQ]||e}function JI(){ZI||(Yh(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),ZI=!0)}function PQ(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=$i())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const ew="production",FQ="_frozenDsc";function $N(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=kr({environment:n.environment||ew,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function BQ(e,t){const n=t.getPropagationContext();return n.dsc||$N(n.traceId,e)}function zQ(e){var m;const t=$i();if(!t)return{};const n=VN(e),i=Jv(n),r=i.data,s=n.spanContext().traceState,o=(s==null?void 0:s.get("sentry.sample_rate"))??r[bQ];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[FQ];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&CQ(c);if(u)return a(u);const d=$N(e.spanContext().traceId,t),f=r[UQ],h=i.description;return f!=="url"&&h&&(d.transaction=h),PQ()&&(d.sampled=String(DQ(n)),d.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((m=HN(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const HQ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function VQ(e){return e==="http"||e==="https"}function tw(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function $Q(e){const t=HQ.exec(e);if(!t){Yh(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return GN({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function GN(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function GQ(e){if(!Td)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(He.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?VQ(i)?t&&isNaN(parseInt(t,10))?(He.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(He.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(He.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function XQ(e){const t=typeof e=="string"?$Q(e):GN(e);if(!(!t||!GQ(t)))return t}function ga(e,t=100,n=1/0){try{return z3("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function XN(e,t=3,n=100*1024){const i=ga(e,t);return KQ(i)>n?XN(e,t-1,n):i}function z3(e,t,n=1/0,i=1/0,r=ZQ()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=jQ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return z3("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=ON(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=z3(h,m,l-1,i,r),d++}return o(t),u}function jQ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(kN(t))return"[VueViewModel]";if(Zq(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${bc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=YQ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function YQ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function WQ(e){return~-encodeURI(e).split(/%..|./).length}function KQ(e){return WQ(JSON.stringify(e))}function ZQ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function zb(e,t=[]){return[e,t]}function qQ(e,t){const[n,i]=e;return[n,[...i,t]]}function ex(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function H3(e){const t=Ob(Nt);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function QQ(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[H3(i),s]:i.push(typeof s=="string"?H3(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ga(a))}r(l)}}return typeof i=="string"?i:JQ(i)}function JQ(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function eJ(e){const t=typeof e.data=="string"?H3(e.data):e.data;return[kr({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const tJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function tx(e){return tJ[e]}function jN(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function nJ(e,t,n,i){var s;const r=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:tw(i)},...r&&{trace:kr({...r})}}}function iJ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function rJ(e,t,n,i){const r=jN(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:tw(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return zb(s,[o])}function sJ(e,t,n,i){const r=jN(n),s=e.type&&e.type!=="replay_event"?e.type:"event";iJ(e,n==null?void 0:n.sdk);const o=nJ(e,r,i,t);return delete e.sdkProcessingMetadata,zb(o,[[{type:s},e]])}function V3(e,t,n,i=0){return new yc((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);kt&&o.id&&a===null&&He.log(`Event processor "${o.id}" dropped event`),Fb(a)?a.then(l=>V3(e,l,n,i+1).then(r)).then(null,s):V3(e,a,n,i+1).then(r).then(null,s)}})}let Hp,nx,Vp;function oJ(e){const t=Nt._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Vp&&n.length===nx||(nx=n.length,Vp=n.reduce((i,r)=>{Hp||(Hp={});const s=Hp[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[r];if(c&&u){i[c]=u,Hp[r]=[c,u];break}}}return i},{})),Vp}function aJ(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;lJ(e,t),i&&dJ(e,i),fJ(e,n),cJ(e,r),uJ(e,s)}function ix(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;$p(e,"extra",n),$p(e,"tags",i),$p(e,"user",r),$p(e,"contexts",s),e.sdkProcessingMetadata=Mm(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function $p(e,t,n){e[t]=Mm(e[t],n,1)}function lJ(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=kr(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=kr(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=kr(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=kr(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function cJ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function uJ(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function dJ(e,t){e.contexts={trace:MQ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:zQ(t),...e.sdkProcessingMetadata};const n=VN(t),i=Jv(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function fJ(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function hJ(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||fs(),timestamp:t.timestamp||Rm()},c=n.integrations||e.integrations.map(b=>b.name);gJ(l,e),UJ(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&mJ(l,e.stackParser);const u=yJ(i,n.captureContext);n.mechanism&&Ku(l,n.mechanism);const d=r?r.getEventProcessors():[],f=mQ().getScopeData();if(s){const b=s.getScopeData();ix(f,b)}if(u){const b=u.getScopeData();ix(f,b)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),aJ(l,f);const m=[...d,...f.eventProcessors];return V3(m,l,n).then(b=>(b&&pJ(b),typeof o=="number"&&o>0?bJ(b,o,a):b))}function gJ(e,t){var l,c;const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||ew,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=$f(e.message,s));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=$f(o.value,s));const a=e.request;a!=null&&a.url&&(a.url=$f(a.url,s))}function mJ(e,t){var i,r;const n=oJ(t);(r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function pJ(e){var i,r;const t={};if((r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,o])=>{n.push({type:"sourcemap",code_file:s,debug_id:o})})}function UJ(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function bJ(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:ga(o.data,t,n)}}))},...e.user&&{user:ga(e.user,t,n)},...e.contexts&&{contexts:ga(e.contexts,t,n)},...e.extra&&{extra:ga(e.extra,t,n)}};return(r=e.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ga(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:ga(o.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=ga(e.contexts.flags,3,n)),i}function yJ(e,t){if(!t)return e;const n=e?e.clone():new $o;return n.update(t),n}function EJ(e){if(e)return vJ(e)?{captureContext:e}:_J(e)?{captureContext:e}:e}function vJ(e){return e instanceof $o||typeof e=="function"}const wJ=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function _J(e){return Object.keys(e).some(t=>wJ.includes(t))}function nw(e,t){return dl().captureException(e,EJ(t))}function rx(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return dl().captureMessage(e,n,i)}function YN(e,t){return dl().captureEvent(e,t)}function sx(e){const t=km(),n=dl(),{userAgent:i}=Nt.navigator||{},r=sQ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&lh(s,{status:"exited"}),WN(),t.setSession(r),r}function WN(){const e=km(),n=dl().getSession()||e.getSession();n&&oQ(n),KN(),e.setSession()}function KN(){const e=km(),t=$i(),n=e.getSession();n&&t&&t.captureSession(n)}function ox(e=!1){if(e){WN();return}KN()}const TJ="7";function SJ(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function IJ(e){return`${SJ(e)}${e.projectId}/envelope/`}function xJ(e,t){const n={sentry_version:TJ};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function CJ(e,t,n){return t||`${IJ(e)}?${xJ(e,n)}`}const ax=[];function AJ(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function RJ(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return AJ(i)}function MJ(e,t){const n={};return t.forEach(i=>{i&&ZN(e,i,n)}),n}function lx(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function ZN(e,t,n){if(n[t.name]){kt&&He.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,ax.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),ax.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}kt&&He.log(`Integration installed: ${t.name}`)}function kJ(e,t,n){const i=[{type:"client_report"},{timestamp:Rm(),discarded_events:e}];return zb(t?{dsn:t}:{},[i])}class Ls extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function qN(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function LJ(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return kr({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o==null?void 0:o[BN],exclusive_time:o==null?void 0:o[zN],measurements:e.measurements,is_segment:!0})}function DJ(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[BN]:e.profile_id},...e.exclusive_time&&{[zN]:e.exclusive_time}}}},measurements:e.measurements};return kr(t)}const cx="Not capturing exception because it's already been captured.",ux="Discarded session because of missing or non-string release";class OJ{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=XQ(t.dsn):kt&&He.warn("No DSN provided, client will not send events."),this._dsn){const n=CJ(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=fs();if(GI(t))return kt&&He.log(cx),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:fs(),...i},o=jv(t)?t:String(t),a=Yv(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=fs();if(n!=null&&n.originalException&&GI(n.originalException))return kt&&He.log(cx),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),lh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):Zu(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];ZN(this,t,this._integrations),n||lx(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=sJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=qQ(i,eJ(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=ew}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){kt&&He.warn(ux);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){kt&&He.warn(ux);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=rJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;kt&&He.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(kt&&He.error("Error while sending envelope:",n),n)):(kt&&He.error("Transport disabled"),Zu({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=MJ(this,t),lx(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",r=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(lh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new yc(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),hJ(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:pQ(i),...a.contexts};const l=BQ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=dl(),r=km()){return kt&&$3(t)&&He.log(`Captured error event \`${qN(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{kt&&(s instanceof Ls&&s.logLevel==="log"?He.log(s.message):He.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=QN(t),l=$3(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:SQ(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),W2(new Ls(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new Ls("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=PJ(this,s,h,n);return NJ(p,u)}).then(h=>{var b;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw new Ls(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const E=((b=h.sdkProcessingMetadata)==null?void 0:b.spanCountBeforeProcessing)||0,y=h.spans?h.spans.length:0,v=E-y;v>0&&this.recordDroppedEvent("before_send","span",v)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const E="custom";h.transaction_info={...p,source:E}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof Ls?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Ls(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){kt&&He.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){kt&&He.log("No outcomes to send");return}if(!this._dsn){kt&&He.log("No dsn provided, will not send outcomes");return}kt&&He.log("Sending outcomes:",t);const n=kJ(t,this._options.tunnel&&tw(this._dsn));this.sendEnvelope(n)}}function NJ(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Fb(e))return e.then(i=>{if(!ah(i)&&i!==null)throw new Ls(n);return i},i=>{throw new Ls(`${t} rejected with ${i}`)});if(!ah(e)&&e!==null)throw new Ls(n);return e}function PJ(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if($3(a)&&r)return r(a,i);if(QN(a)){if(o){const l=o(LJ(a));if(l?a=Mm(n,DJ(l)):JI(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(JI(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function $3(e){return e.type===void 0}function QN(e){return e.type==="transaction"}function FJ(e,t){t.debug===!0&&(kt?He.enable():Yh(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),dl().update(t.initialScope);const i=new e(t);return BJ(i),i.init(),i}function BJ(e){dl().setClient(e)}function zJ(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return W2(new Ls("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new yc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{Zu(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const HJ=60*1e3;function VJ(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?HJ:i-t}function $J(e,t){return e[t]||e.all||0}function GJ(e,t,n=Date.now()){return $J(e,t)>n}function XJ(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+VJ(o,i):t===429&&(r.all=i+60*1e3);return r}const jJ=64;function YJ(e,t,n=zJ(e.bufferSize||jJ)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(ex(o,(d,f)=>{const h=tx(f);GJ(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return Zu({});const l=zb(o[0],a),c=d=>{ex(l,(f,h)=>{e.recordDroppedEvent(d,tx(h))})},u=()=>t({body:QQ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&kt&&He.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=XJ(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Ls)return kt&&He.error("Skipped sending event because buffer is full."),c("queue_overflow"),Zu({});throw d})}return{send:s,flush:r}}function WJ(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function KJ(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function ZJ(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:ku})),version:ku}),e._metadata=r}const qJ=100;function qu(e,t){const n=$i(),i=km();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=qJ}=n.getOptions();if(s<=0)return;const a={timestamp:Rm(),...e},l=r?Yh(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let dx;const QJ="FunctionToString",fx=new WeakMap,JJ=()=>({name:QJ,setupOnce(){dx=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Zv(this),n=fx.has($i())&&t!==void 0?t:this;return dx.apply(n,e)}}catch{}},setup(e){fx.set(e,!0)}}),eee=JJ,tee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],nee="InboundFilters",iee=(e={})=>({name:nee,processEvent(t,n,i){const r=i.getOptions(),s=see(e,r);return oee(t,s)?null:t}}),ree=iee;function see(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:tee],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function oee(e,t){return t.ignoreInternal&&dee(e)?(kt&&He.warn(`Event dropped due to being internal Sentry Error.
Event: ${Al(e)}`),!0):aee(e,t.ignoreErrors)?(kt&&He.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Al(e)}`),!0):hee(e)?(kt&&He.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Al(e)}`),!0):lee(e,t.ignoreTransactions)?(kt&&He.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Al(e)}`),!0):cee(e,t.denyUrls)?(kt&&He.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Al(e)}.
Url: ${K2(e)}`),!0):uee(e,t.allowUrls)?!1:(kt&&He.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Al(e)}.
Url: ${K2(e)}`),!0)}function aee(e,t){return e.type||!t||!t.length?!1:qN(e).some(n=>Bb(n,t))}function lee(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Bb(n,t):!1}function cee(e,t){if(!(t!=null&&t.length))return!1;const n=K2(e);return n?Bb(n,t):!1}function uee(e,t){if(!(t!=null&&t.length))return!0;const n=K2(e);return n?Bb(n,t):!0}function dee(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function fee(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function K2(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?fee(t):null}catch{return kt&&He.error(`Cannot extract url for event ${Al(e)}`),null}}function hee(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function gee(e,t,n=250,i,r,s,o){var l;if(!((l=s.exception)!=null&&l.values)||!o||!Yu(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=mee(G3(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function G3(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(Yu(i[r],Error)){hx(o,a);const c=e(t,i[r]),u=l.length;gx(c,r,u,a),l=G3(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(Yu(c,Error)){hx(o,a);const d=e(t,c),f=l.length;gx(d,`errors[${u}]`,f,a),l=G3(e,t,n,c,r,[d,...l],d,f)}}),l}function hx(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function gx(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function mee(e,t){return e.map(n=>(n.value&&(n.value=$f(n.value,t)),n))}function JN(e){const t="console";Sd(t,e),Id(t,pee)}function pee(){"console"in Nt&&X2.forEach(function(e){e in Nt.console&&Mr(Nt.console,e,function(t){return j2[e]=t,function(...n){Xs("console",{args:n,level:e});const r=j2[e];r==null||r.apply(Nt.console,n)}})})}function eP(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Uee="CaptureConsole",bee=(e={})=>{const t=e.levels||X2,n=e.handled??!0;return{name:Uee,setup(i){"console"in Nt&&JN(({args:r,level:s})=>{$i()!==i||!t.includes(s)||Eee(r,s,n)})}}},yee=bee;function Eee(e,t,n){const i={level:eP(t),extra:{arguments:e}};Qv(r=>{if(r.addEventProcessor(a=>(a.logger="console",Ku(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${Y2(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),rx(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){nw(s,i);return}const o=Y2(e," ");rx(o,i)})}const vee="Dedupe",wee=()=>{let e;return{name:vee,processEvent(t){if(t.type)return t;try{if(Tee(t,e))return kt&&He.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},_ee=wee;function Tee(e,t){return t?!!(See(e,t)||Iee(e,t)):!1}function See(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!nP(e,t)||!tP(e,t))}function Iee(e,t){const n=mx(t),i=mx(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!nP(e,t)||!tP(e,t))}function tP(e,t){let n=BI(e),i=BI(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function nP(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function mx(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function c8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function iP(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Z2=Nt;function xee(){return"history"in Z2}function rP(){if(!("fetch"in Z2))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function X3(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Cee(){var n;if(typeof EdgeRuntime=="string")return!0;if(!rP())return!1;if(X3(Z2.fetch))return!0;let e=!1;const t=Z2.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=X3(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){Td&&He.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function Aee(e,t){const n="fetch";Sd(n,e),Id(n,()=>Ree(void 0,t))}function Ree(e,t=!1){t&&!Cee()||Mr(Nt,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=Mee(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:Oa()*1e3,virtualError:r};return Xs("fetch",{...a}),n.apply(Nt,i).then(async l=>(Xs("fetch",{...a,endTimestamp:Oa()*1e3,response:l}),l),l=>{throw Xs("fetch",{...a,endTimestamp:Oa()*1e3,error:l}),Xv(l)&&l.stack===void 0&&(l.stack=r.stack,Wu(l,"framesToPop",1)),l})}})}function j3(e,t){return!!e&&typeof e=="object"&&!!e[t]}function px(e){return typeof e=="string"?e:e?j3(e,"url")?e.url:e.toString?e.toString():"":""}function Mee(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:px(n),method:j3(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:px(t),method:j3(t,"method")?String(t.method).toUpperCase():"GET"}}function kee(){return"npm"}const xn=Nt;let Y3=0;function sP(){return Y3>0}function Lee(){Y3++,setTimeout(()=>{Y3--})}function uh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(Zv(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>uh(o,t));return e.apply(this,s)}catch(s){throw Lee(),Qv(o=>{o.addEventProcessor(a=>(t.mechanism&&(F3(a,void 0),Ku(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),nw(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}DN(i,e),Wu(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function iw(e,t){const n=rw(e,t),i={type:Fee(t),value:Bee(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Dee(e,t,n,i){const r=$i(),s=r==null?void 0:r.getOptions().normalizeDepth,o=Gee(t),a={__serialized__:XN(t,s)};if(o)return{exception:{values:[iw(e,o)]},extra:a};const l={exception:{values:[{type:Pb(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:Vee(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=rw(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function u8(e,t){return{exception:{values:[iw(e,t)]}}}function rw(e,t){const n=t.stacktrace||t.stack||"",i=Nee(t),r=Pee(t);try{return e(n,i,r)}catch{}return[]}const Oee=/Minified React error #\d+;/i;function Nee(e){return e&&Oee.test(e.message)?1:0}function Pee(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function oP(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Fee(e){const t=e==null?void 0:e.name;return!t&&oP(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Bee(e){const t=e==null?void 0:e.message;return oP(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function zee(e,t,n,i){const r=(n==null?void 0:n.syntheticException)||void 0,s=sw(e,t,r,i);return Ku(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),Zu(s)}function Hee(e,t,n="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=W3(e,t,s,r);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),Zu(o)}function sw(e,t,n,i,r){let s;if(MN(t)&&t.error)return u8(e,t.error);if(HI(t)||Yq(t)){const o=t;if("stack"in t)s=u8(e,t);else{const a=o.name||(HI(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=W3(e,l,n,i),F3(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Xv(t)?u8(e,t):ah(t)||Pb(t)?(s=Dee(e,t,n,r),Ku(s,{synthetic:!0}),s):(s=W3(e,t,n,i),F3(s,`${t}`),Ku(s,{synthetic:!0}),s)}function W3(e,t,n,i){const r={};if(i&&n){const s=rw(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),Ku(r,{synthetic:!0})}if(jv(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function Vee(e,{isUnhandledRejection:t}){const n=tQ(e),i=t?"promise rejection":"exception";return MN(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:Pb(e)?`Event \`${$ee(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function $ee(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Gee(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Xee extends OJ{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=xn.SENTRY_SDK_SOURCE||kee();ZJ(n,"browser",["browser"],i),super(n),n.sendClientReports&&xn.document&&xn.document.addEventListener("visibilitychange",()=>{xn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",WJ),this.on("beforeSendSession",KJ))}eventFromException(t,n){return zee(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Hee(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const jee=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,dr=Nt,Yee=1e3;let Ux,K3,Z3;function Wee(e){const t="dom";Sd(t,e),Id(t,Kee)}function Kee(){if(!dr.document)return;const e=Xs.bind(null,"dom"),t=bx(e,!0);dr.document.addEventListener("click",t,!1),dr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,o;const r=(s=dr[n])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Mr(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=bx(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Mr(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function Zee(e){if(e.type!==K3)return!1;try{if(!e.target||e.target._sentryId!==Z3)return!1}catch{}return!0}function qee(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function bx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Qee(n);if(qee(n.type,i))return;Wu(n,"_sentryCaptured",!0),i&&!i._sentryId&&Wu(i,"_sentryId",fs());const r=n.type==="keypress"?"input":n.type;Zee(n)||(e({event:n,name:r,global:t}),K3=n.type,Z3=i?i._sentryId:void 0),clearTimeout(Ux),Ux=dr.setTimeout(()=>{Z3=void 0,K3=void 0},Yee)}}function Qee(e){try{return e.target}catch{return null}}let Gp;function aP(e){const t="history";Sd(t,e),Id(t,Jee)}function Jee(){if(dr.addEventListener("popstate",()=>{const t=dr.location.href,n=Gp;if(Gp=t,n===t)return;Xs("history",{from:n,to:t})}),!xee())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=Gp,s=String(i);if(Gp=s,r===s)return;Xs("history",{from:r,to:s})}return t.apply(this,n)}}Mr(dr.history,"pushState",e),Mr(dr.history,"replaceState",e)}const BU={};function ete(e){const t=BU[e];if(t)return t;let n=dr[e];if(X3(n))return BU[e]=n.bind(dr);const i=dr.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){jee&&He.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(BU[e]=n.bind(dr))}function yx(e){BU[e]=void 0}const s1="__sentry_xhr_v3__";function tte(e){const t="xhr";Sd(t,e),Id(t,nte)}function nte(){if(!dr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=Oa()*1e3,o=Da(i[0])?i[0].toUpperCase():void 0,a=ite(i[1]);if(!o||!a)return t.apply(n,i);n[s1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[s1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Oa()*1e3,startTimestamp:s,xhr:n,virtualError:r};Xs("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[s1];return m&&Da(f)&&Da(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[s1];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:Oa()*1e3,xhr:n};return Xs("xhr",s),t.apply(n,i)}})}function ite(e){if(Da(e))return e;try{return e.toString()}catch{}}function rte(e,t=ete("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return yx("fetch"),W2("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return yx("fetch"),n-=o,i--,W2(l)}}return YJ(e,r)}const ste=30,ote=50;function q3(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?ju:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const ate=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,lte=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,cte=/\((\S*)(?::(\d+))(?::(\d+))\)/,ute=e=>{const t=ate.exec(e);if(t){const[,i,r,s]=t;return q3(i,ju,+r,+s)}const n=lte.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=cte.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=lP(n[1]||ju,n[2]);return q3(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},dte=[ste,ute],fte=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,hte=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gte=e=>{const t=fte.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=hte.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||ju;return[r,i]=lP(r,i),q3(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},mte=[ote,gte],pte=[dte,mte],Ute=AN(...pte),lP=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:ju,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},C0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Xp=1024,bte="Breadcrumbs",yte=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:bte,setup(n){t.console&&JN(_te(n)),t.dom&&Wee(wte(n,t.dom)),t.xhr&&tte(Tte(n)),t.fetch&&Aee(Ste(n)),t.history&&aP(Ite(n)),t.sentry&&n.on("beforeSendEvent",vte(n))}}},Ete=yte;function vte(e){return function(n){$i()===e&&qu({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Al(n)},{event:n})}}function wte(e,t){return function(i){if($i()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Xp&&(C0&&He.warn(`\`dom.maxStringLength\` cannot exceed ${Xp}, but a value of ${a} was configured. Sentry will use ${Xp} instead.`),a=Xp),typeof o=="string"&&(o=[o]);try{const c=i.event,u=xte(c)?c.target:c;r=LN(u,{keyAttrs:o,maxStringLength:a}),s=Jq(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),qu(l,{event:i.event,name:i.name,global:i.global})}}function _te(e){return function(n){if($i()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:eP(n.level),message:Y2(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${Y2(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;qu(i,{input:n.args,level:n.level})}}function Tte(e){return function(n){if($i()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[s1];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=iP(l);qu({category:"xhr",data:u,type:"http",level:f},d)}}function Ste(e){return function(n){if($i()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};qu({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=iP(s.status_code);qu({category:"fetch",data:s,type:"http",level:l},a)}}}function Ite(e){return function(n){if($i()!==e)return;let i=n.from,r=n.to;const s=c8(xn.location.href);let o=i?c8(i):void 0;const a=c8(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),qu({category:"navigation",data:{from:i,to:r}})}}function xte(e){return!!e&&!!e.target}const Cte=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ate="BrowserApiErrors",Rte=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ate,setupOnce(){t.setTimeout&&Mr(xn,"setTimeout",Ex),t.setInterval&&Mr(xn,"setInterval",Ex),t.requestAnimationFrame&&Mr(xn,"requestAnimationFrame",kte),t.XMLHttpRequest&&"XMLHttpRequest"in xn&&Mr(XMLHttpRequest.prototype,"send",Lte);const n=t.eventTarget;n&&(Array.isArray(n)?n:Cte).forEach(Dte)}}},Mte=Rte;function Ex(e){return function(...t){const n=t[0];return t[0]=uh(n,{mechanism:{data:{function:bc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function kte(e){return function(t){return e.apply(this,[uh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:bc(e)},handled:!1,type:"instrument"}})])}}function Lte(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Mr(n,r,function(s){const o={mechanism:{data:{function:r,handler:bc(s)},handled:!1,type:"instrument"}},a=Zv(s);return a&&(o.mechanism.data.handler=bc(a)),uh(s,o)})}),e.apply(this,t)}}function Dte(e){var i,r;const n=(i=xn[e])==null?void 0:i.prototype;(r=n==null?void 0:n.hasOwnProperty)!=null&&r.call(n,"addEventListener")&&(Mr(n,"addEventListener",function(s){return function(o,a,l){try{Ote(a)&&(a.handleEvent=uh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:bc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,uh(a,{mechanism:{data:{function:"addEventListener",handler:bc(a),target:e},handled:!1,type:"instrument"}}),l])}}),Mr(n,"removeEventListener",function(s){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&s.call(this,o,c,l)}catch{}return s.call(this,o,a,l)}}))}function Ote(e){return typeof e.handleEvent=="function"}const Nte=()=>({name:"BrowserSession",setupOnce(){if(typeof xn.document>"u"){C0&&He.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}sx({ignoreDuration:!0}),ox(),aP(({from:e,to:t})=>{e!==void 0&&e!==t&&(sx({ignoreDuration:!0}),ox())})}}),Pte="GlobalHandlers",Fte=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Pte,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(zte(n),vx("onerror")),t.onunhandledrejection&&(Hte(n),vx("onunhandledrejection"))}}},Bte=Fte;function zte(e){$q(t=>{const{stackParser:n,attachStacktrace:i}=cP();if($i()!==e||sP())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=Gte(sw(n,l||r,void 0,i,!1),s,o,a);c.level="error",YN(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Hte(e){Xq(t=>{const{stackParser:n,attachStacktrace:i}=cP();if($i()!==e||sP())return;const r=Vte(t),s=Yv(r)?$te(r):sw(n,r,void 0,i,!0);s.level="error",YN(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Vte(e){if(Yv(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function $te(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Gte(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=Da(t)&&t.length>0?t:Kv();return l.length===0&&l.push({colno:c,filename:d,function:ju,in_app:!0,lineno:u}),e}function vx(e){C0&&He.log(`Global Handler attached: ${e}`)}function cP(){const e=$i();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Xte=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!xn.navigator&&!xn.location&&!xn.document)return;const t=((o=e.request)==null?void 0:o.url)||Kv(),{referrer:n}=xn.document||{},{userAgent:i}=xn.navigator||{},r={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),jte="cause",Yte=5,Wte="LinkedErrors",Kte=(e={})=>{const t=e.limit||Yte,n=e.key||jte;return{name:Wte,preprocessEvent(i,r,s){const o=s.getOptions();gee(iw,o.stackParser,o.maxValueLength,n,t,i,r)}}},Zte=Kte;function qte(e){return[ree(),eee(),Mte(),Ete(),Bte(),Zte(),_ee(),Xte(),Nte()]}function Qte(e={}){var n;return{...{defaultIntegrations:qte(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=xn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...Jte(e)}}function Jte(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function ene(){var l;const e=typeof xn.window<"u"&&xn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,r=Kv()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&xn===xn.top&&s.some(c=>r.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function tne(e={}){const t=Qte(e);if(!t.skipBrowserExtensionCheck&&ene()){C0&&Yh(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}C0&&!rP()&&He.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:Hq(t.stackParser||Ute),integrations:RJ(t),transport:t.transport||rte};return FJ(Xee,n)}function nne(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var ine={};const uP={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},rne=ine.VITE_APP_DISABLE_SENTRY==="true",d8=!rne&&Object.keys(uP).find(e=>window.location.hostname.indexOf(e)>=0);tne({dsn:d8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:d8?uP[d8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[yee({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:nne().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class sne{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,r=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(r))this.content[i]=n,this.content[t]=r,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=t+1<<1,o=s-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<r&&(a=o)}if(s<n){const c=this.content[s];this.scoreFunction(c)<(a===null?r:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const one="#ffffff",ane="#000000",lne=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],cne=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],une=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],dne=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],fne=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],hne=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],gne=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],mne=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],pne=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],Une=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],bne=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yne=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],Ene=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],li={white:one,black:ane,gray:lne,red:cne,pink:une,grape:dne,violet:fne,indigo:hne,blue:gne,cyan:mne,teal:pne,green:Une,lime:bne,yellow:yne,orange:Ene},dP=240,vne=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),wne=5,rf=5,_ne=4,o1=4,a1=1,_s=[0,2,4,6,8],Ts=(e,t)=>t.map(n=>li[e][n]),je={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Ts("gray",_s),red:Ts("red",_s),pink:Ts("pink",_s),grape:Ts("grape",_s),violet:Ts("violet",_s),blue:Ts("blue",_s),cyan:Ts("cyan",_s),teal:Ts("teal",_s),green:Ts("green",_s),yellow:Ts("yellow",_s),orange:Ts("orange",_s),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},fP=vne(je,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),hP=[je.black,je.red[o1],je.green[o1],je.blue[o1],je.yellow[o1]],gP=[je.transparent,je.red[a1],je.green[a1],je.blue[a1],je.yellow[a1]],mP=[je.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],Tne={transparent:je.transparent,white:je.white,gray:je.gray,black:je.black,bronze:je.bronze,...fP},Sne={transparent:je.transparent,white:je.white,gray:je.gray,black:je.black,bronze:je.bronze,...fP},Ine=e=>[je.cyan[e],je.blue[e],je.violet[e],je.grape[e],je.pink[e],je.green[e],je.teal[e],je.yellow[e],je.orange[e],je.red[e]],xne=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Go=/Mac|iPod|iPhone|iPad/.test(navigator.platform),pP=/^Win/.test(navigator.platform),Cne=/\b(android)\b/i.test(navigator.userAgent),A0="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Ane=navigator.userAgent.indexOf("Chrome")!==-1,Rne=!Ane&&navigator.userAgent.indexOf("Safari")!==-1,UP=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Mne=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},Q3=typeof window<"u"&&"ResizeObserver"in window,Na="Excalidraw",kne=36,tu=10,zU=8,Lne=5,wx=1,Dne=30,Ec=Math.PI/12,One="red",yt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},_l={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},nu={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var te=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(te||{});const jp={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},bP={TEST:"test",DEVELOPMENT:"development"},dh={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},_f="Xiaolai",R0="Segoe UI Emoji",xt={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},Tf={[_f]:100,[R0]:1e3},yP=e=>{switch(e){case xt.Excalifont:return[_f,R0];default:return[R0]}},xe={LIGHT:"light",DARK:"dark"},on={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},ow=1,fl=20,Fc=xt.Excalifont,Lm="left",q2="top",EP="{version}",Qu=2,Q2=2*Qu,Nne=1e-5,Pne=2*Q2-Nne,Yp="#ffffff",Fne="#1e1e1e",Bne="#a2f1a6",J2=20,vP=5,fh={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},Ee={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...fh},zne=[Ee.text,Ee.html,...Object.values(fh)],f8={png:"png",svg:"svg",clipboard:"clipboard"},hs={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},aw=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Hne=500,Vne=300,$ne=500,Gne=1e4,Xne=3e4,jne=100,Hb=.1,lw=.1,cw=30,Yne=300,_x=6e4,Tx=3e3,uw="invert(93%) hue-rotate(180deg)",J3={addLibrary:"addLibrary"},eE={addLibrary:"addLibrary"},Sx={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Wne=730,Kne=1e3,Zne=500,qne=1229,Lg=2,dw=[1,2,3],Kh=10,Qne=1440,Ix=4*1024*1024,it="http://www.w3.org/2000/svg",Jne=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,wP=128,Vb={excalidraw:2,excalidrawLibrary:2},On=5,eie=.7,tie=11,Lr={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},M0={LEFT:"left",CENTER:"center",RIGHT:"right"},nie=20,h8=.25,iie=32,Nn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},_P={artist:1,cartoonist:2},g8={thin:1,bold:2,extraBold:4},fn={strokeColor:je.black,backgroundColor:je.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:_P.artist,opacity:100,locked:!1},e6="library",Lu="search",gs={name:"default",defaultTab:e6},TP=new Set(["iframe","embeddable","image"]),Xn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},z1={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},SP="Untitled",Sf={generalStats:1,elementProperties:2},Qr=1,ni={sharp:"sharp",round:"round",elbow:"elbow"},IP=.3,t6="element";var mu=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(mu||{});const hh={[xt.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[xt.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35}},[xt["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[xt["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[xt.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[xt.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[xt.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[xt["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[Tf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[Tf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},au={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},fw="local:",xP=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:r,descender:s}=((c=hh[e])==null?void 0:c.metrics)||hh[xt.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Ju=e=>{var n;const{lineHeight:t}=((n=hh[e])==null?void 0:n.metrics)||hh[xt.Excalifont].metrics;return t};class rie{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(_c(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=Gb();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const et={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},z={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Go?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},sie=new Map([[z.Z,et.Z],[z.Y,et.Y]]),oie=e=>/^[a-z]$/.test(e.toLowerCase()),tE=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=sie.get(t);return!!(n&&!oie(e.key)&&e.code===n)},l1=e=>e===z.ARROW_LEFT||e===z.ARROW_RIGHT||e===z.ARROW_DOWN||e===z.ARROW_UP,xx=e=>e.altKey,Dg=e=>e.shiftKey,H1=e=>e.shiftKey,vc=1e-4,Xe=(e,t,n)=>Math.min(Math.max(e,t),n),Pa=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},aie=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},Wp=(e,t)=>(e+t)/2,V1=e=>typeof e=="number"&&Number.isFinite(e),Cx=(e,t,n=vc)=>Math.abs(e-t)<n,n6=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Du(e){return e*Math.PI/180}function $b(e){return e*180/Math.PI}function lie(e){return Math.abs(Math.sin(2*e))<vc}function Ui(e,t,n=0,i=0){return[e-n,t-i]}function se(e,t=[0,0]){return Ui(e[0]-t[0],e[1]-t[1])}function mt(e,t){return e[0]*t[1]-t[0]*e[1]}function Ax(e,t){return e[0]*t[0]+e[1]*t[1]}function Vl(e,t){return[e[0]+t[0],e[1]+t[1]]}function i6(e,t){return[e[0]-t[0],e[1]-t[1]]}function Rt(e,t){return Ui(e[0]*t,e[1]*t)}function cie(e){return e[0]*e[0]+e[1]*e[1]}function uie(e){return Math.sqrt(cie(e))}const ci=e=>{const t=uie(e);return t===0?Ui(0,0):Ui(e[0]/t,e[1]/t)};function A(e,t){return[e,t]}function hw(e){return e.length===2?A(e[0],e[1]):void 0}function De(e,t=A(0,0)){return A(t[0]+e[0],t[1]+e[1])}function pu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function Qs(e,t){const n=Math.abs;return n(e[0]-t[0])<vc&&n(e[1]-t[1])<vc}function q([e,t],[n,i],r){return A((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function r6(e,t=[0,0]){return A(e[0]+t[0],e[1]+t[1])}function k0(e,t){return A((e[0]+t[0])/2,(e[1]+t[1])/2)}function wt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function wa(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const c1=(e,t,n)=>r6(t,Rt(se(e,t),n)),CP=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function nE(e,t){return[e,t]}function die(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return A((a*s-l*i)/o,(n*l-r*a)/o)}return null}function _e(e,t){return[e,t]}const fie=e=>Array.isArray(e)&&e.length===2&&pu(e[0])&&pu(e[0]),ed=(e,t,n=vc)=>{const i=gw(e,t);return i===0?!0:i<n},gw=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,b;m<0?(p=r,b=s):m>1?(p=o,b=a):(p=r+m*u,b=s+m*d);const E=n-p,y=i-b;return Math.sqrt(E*E+y*y)};function td(e,t,n){const i=die(nE(e[0],e[1]),nE(t[0],t[1]));return!i||!ed(i,t,n)||!ed(i,e,n)?null:i}function iE(e,t){return[e,t]}function hie(e,t){return[_e(e[0],A(e[1][0],e[0][1])),_e(A(e[1][0],e[0][1]),e[1]),_e(e[1],A(e[0][0],e[1][1])),_e(A(e[0][0],e[1][1]),e[0])].map(n=>td(t,n)).filter(n=>!!n)}function Ma(e,t,n,i){return[e,t,n,i]}function Rx(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function gie(e,t,n,i=.001,r=10){let s=1/0,o=0;for(;s>=i;){if(o>=r)return null;const a=e(t,n),l=[Rx((p,b)=>e(p,b)[0],t,n),Rx((p,b)=>e(p,b)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);s=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const $1=(e,t)=>A((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function AP(e,t){const n=Uie(e);if(hie(iE(A(n[0],n[1]),A(n[2],n[3])),t).length===0)return[];const i=a=>A(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),r=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{const c=gie((f,h)=>{const m=$1(e,f),p=i(h);return[m[0]-p[0],m[1]-p[1]]},a,l);if(!c)return null;const[u,d]=c;return u<0||u>1||d<0||d>1?null:$1(e,u)};let o=s(r[0]);return o?[o]:(o=s(r[1]),o?[o]:(o=s(r[2]),o?[o]:[]))}function mie(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=wt(t,$1(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>wt(t,$1(e,c)));return l?$1(e,l):null}function RP(e,t){const n=mie(e,t);return n?wt(t,n):0}function pie(e){return Array.isArray(e)&&e.length===4&&pu(e[0])&&pu(e[1])&&pu(e[2])&&pu(e[3])}function Uie(e){const[t,n,i,r]=e,s=[t[0],n[0],i[0],r[0]],o=[t[1],n[1],i[1],r[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function Mx(...e){return MP(e)}function L0(e){return MP(e)}const kx=(e,t)=>{const n=e[0],i=e[1];let r=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s][0],l=t[s][1],c=t[o][0],u=t[o][1];(l>i&&u<=i||l<=i&&u>i)&&n<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r},bie=(e,t)=>{const[n,i]=e;let r=0;for(let s=0;s<t.length;s++){const o=(s+1)%t.length,[a,l]=t[s],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&r++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&r--}return r!==0},yie=(e,t,n=vc)=>{let i=!1;for(let r=0,s=t.length-1;r<s;r++)if(ed(e,_e(t[r],t[r+1]),n)){i=!0;break}return i};function MP(e){return Eie(e)?e:[...e,e[0]]}function Eie(e){return Qs(e[0],e[e.length-1])}function Di(e,t){return ys([e,t])}const s6=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,o6=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?ys([r,s]):null},Kp=(e,[t,n])=>e>=t&&e<=n;function m8([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const gh=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},a6=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Rn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var kP={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Sa,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(kP);var vie=kP.exports;const wie=cl(vie);class Lx{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new wie(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let LP=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function _ie(){return Math.floor(Math.random()*2**31)}class DP{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Dx=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},G1=e=>e.charAt(0).toUpperCase()+e.slice(1),Tie=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),rE=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,Sie=e=>rE(e)||e instanceof Element&&!!e.closest("label, button"),lu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Dm=({fontFamily:e})=>{for(const[t,n]of Object.entries(xt))if(n===e)return`${t}${yP(n).map(i=>`, ${i}`).join("")}`;return R0},Ct=({fontSize:e,fontFamily:t})=>`${e}px ${Dm({fontFamily:t})}`,ja=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},Zh=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t!=null&&t.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Ya=e=>1-Math.pow(1-e,4),Ox=(e,t,n)=>(t-e)*Ya(n)+e,Iie=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s==null||s());const h=Math.min(f-u,i),m=Ya(h/i),p={};if(Object.keys(e).forEach(b=>{const E=b,y=(t[E]-e[E])*m+e[E];p[E]=y}),n(p),h<i){const b=h/i,E={};Object.keys(e).forEach(y=>{const v=y,w=e[v],S=t[v];let R;R=r?r(w,S,b,v):Ox(w,S,b),R==null&&(R=Ox(w,S,b)),E[v]=R}),n(E),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},xie=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Ni=(e,t)=>Math.abs(e-t),dn=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},Q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Go?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Mt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Fs=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},Zp=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Cie="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",Aie="֑-߿יִ-﷽ﹰ-ﻼ",Rie=new RegExp(`^[^${Cie}]*[${Aie}]`),OP=e=>Rie.test(e),Bs=e=>{const[t,n]=e;return{x:t,y:n}},NP=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},PP=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},cu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},zs=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===je.transparent},p8=e=>e.fillStyle!=="solid"||zs(e.backgroundColor),Gb=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},Nx=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},sE=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||EP},Mie=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},kie=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},mw=e=>{e.preventDefault(),e.returnValue=""},FP=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),qh=()=>Date.now(),Se=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Lie=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),ca=(e,t)=>e.reduce((n,i)=>(n[t?t(i):String(i)]=i,n),{}),Die=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Oie=()=>bP.TEST==="production",BP=()=>bP.DEVELOPMENT==="production",Nie=()=>typeof process<"u"&&!0,zP=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),HU=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},Om=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Pie=()=>Om()==="iframe",Nm=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,oE=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},Px=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,vi=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||Px(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||Px(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},Xb=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},wc=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function gr(e,t){if(!e)throw new Error(t)}const Fie=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},HP=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Fa=e=>JSON.parse(JSON.stringify(e)),Og=(e,t)=>vi(e,t)?e:t;function rn(e,t,n,i){var r;return e?((r=e==null?void 0:e.addEventListener)==null||r.call(e,t,n,i),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,i)}):()=>{}}function Bie(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${Wp(r[0],s[0]).toFixed(2)},${Wp(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${Wp(i[0],r[0]).toFixed(2)},${Wp(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const VP=e=>e.replace(/\r?\n|\r/g,`
`),ys=e=>e,_c=async(e,...t)=>new Promise(n=>{n(e(...t))}),zie=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Hie=e=>{try{return JSON.parse(e)}catch{return null}},VU=e=>e.replace(/"/g,"&quot;"),U8=e=>Array.isArray(e)?e:[e],fi=(e,t=0,n=0)=>{const{x:i,y:r,width:s,height:o}=e,a=i+s/2+t,l=r+o/2+n;return A(a,l)};let Vie=new DP(Date.now());const Xo=()=>Math.floor(Vie.next()*2**31),Hr=()=>LP();var pw={};Object.defineProperty(pw,"__esModule",{value:!0});var $P=pw.sanitizeUrl=void 0,$ie=/^([^\w]*)(javascript|data|vbscript)/im,Gie=/&#(\w+)(^\w|;)?/g,Xie=/&(newline|tab);/gi,jie=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Yie=/^.+(:|&colon;)/gim,Wie=[".","/"];function Kie(e){return Wie.indexOf(e[0])>-1}function Zie(e){return e.replace(Gie,function(t,n){return String.fromCharCode(n)})}function qie(e){var t=Zie(e||"").replace(Xie,"").replace(jie,"").trim();if(!t)return"about:blank";if(Kie(t))return t;var n=t.match(Yie);if(!n)return t;var i=n[0];return $ie.test(i)?"about:blank":t}$P=pw.sanitizeUrl=qie;const Fr=e=>(e=e.trim(),e&&$P(VU(e))),GP=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),Uw=e=>{if(e=Fr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};function XP(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=XP(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function be(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=XP(t))&&(i&&(i+=" "),i+=n);return i}var jP="Expected a function",Fx=NaN,Qie="[object Symbol]",Jie=/^\s+|\s+$/g,ere=/^[-+]0x[0-9a-f]+$/i,tre=/^0b[01]+$/i,nre=/^0o[0-7]+$/i,ire=parseInt,rre=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,sre=typeof self=="object"&&self&&self.Object===Object&&self,ore=rre||sre||Function("return this")(),are=Object.prototype,lre=are.toString,cre=Math.max,ure=Math.min,b8=function(){return ore.Date.now()};function dre(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(jP);t=Bx(t)||0,l6(n)&&(u=!!n.leading,d="maxWait"in n,s=d?cre(Bx(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(R){var _=i,T=r;return i=r=void 0,c=R,o=e.apply(T,_),o}function m(R){return c=R,a=setTimeout(E,t),u?h(R):o}function p(R){var _=R-l,T=R-c,x=t-_;return d?ure(x,s-T):x}function b(R){var _=R-l,T=R-c;return l===void 0||_>=t||_<0||d&&T>=s}function E(){var R=b8();if(b(R))return y(R);a=setTimeout(E,p(R))}function y(R){return a=void 0,f&&i?h(R):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:y(b8())}function S(){var R=b8(),_=b(R);if(i=arguments,r=this,l=R,_){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=w,S}function fre(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(jP);return l6(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),dre(e,t,{leading:i,maxWait:t,trailing:r})}function l6(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function hre(e){return!!e&&typeof e=="object"}function gre(e){return typeof e=="symbol"||hre(e)&&lre.call(e)==Qie}function Bx(e){if(typeof e=="number")return e;if(gre(e))return Fx;if(l6(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=l6(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Jie,"");var n=tre.test(e);return n||nre.test(e)?ire(e.slice(2),n?2:8):ere.test(e)?Fx:+e}var mre=fre;const Do=cl(mre);function aE(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function pre(e,t,n){const i=[];e.forEach(r=>i.push(...r)),aE(i,t,n)}function Ure(e,t){return e[0]===t[0]&&e[1]===t[1]}function bre(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)aE(c,a,r);const l=yre(o,s,i);if(r){for(const c of o)aE(c,a,-r);pre(l,a,-r)}return l}function yre(e,t,n){const i=[];for(const c of e){const u=[...c];Ure(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function Pm(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),bre(e,r,i,s||1)}class bw{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=Pm(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function jb(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class Ere extends bw{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=Pm(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)jb([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class vre extends bw{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class wre{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=Pm(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=jb(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,b=f-o+Math.random()*2*o,E=p-o+Math.random()*2*o,y=this.helper.ellipse(b,E,s,s,n);i.push(...y.ops)}}return{type:"fillSketch",ops:i}}}class _re{constructor(t){this.helper=t}fillPolygons(t,n){const i=Pm(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=jb(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,b=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],E=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(b[0],b[1],E[0],E[1],n))}}),s}}class Tre{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=Pm(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=jb(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],b=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],E=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],E[0],E[1],i),...this.helper.doubleLineOps(E[0],E[1],b[0],b[1],i))}}),r}}const sr={};function Sre(e,t){let n=e.fillStyle||"hachure";if(!sr[n])switch(n){case"zigzag":sr[n]||(sr[n]=new Ere(t));break;case"cross-hatch":sr[n]||(sr[n]=new vre(t));break;case"dots":sr[n]||(sr[n]=new wre(t));break;case"dashed":sr[n]||(sr[n]=new _re(t));break;case"zigzag-line":sr[n]||(sr[n]=new Tre(t));break;case"hachure":default:n="hachure",sr[n]||(sr[n]=new bw(t));break}return sr[n]}const Ire=0,lE=1,YP=2,qp={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function xre(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:Ire,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:lE,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:YP,text:""},t}function y8(e,t){return e.type===t}function yw(e){const t=[],n=xre(e);let i="BOD",r=0,s=n[r];for(;!y8(s,YP);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=qp[s.text],i=s.text;else return yw("M0,0"+e);else y8(s,lE)?o=qp[i]:(r++,o=qp[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(y8(c,lE))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof qp[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function WP(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function KP(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,b=r+2*(m-r)/3,E=d+2*(h-d)/3,y=f+2*(m-f)/3;t.push({key:"C",data:[p,b,E,y,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,b=r+2*(f-r)/3,E=h+2*(d-h)/3,y=m+2*(f-m)/3;t.push({key:"C",data:[p,b,E,y,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],b=u[5],E=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,b,E,b,E]}),i=b,r=E):(i!==b||r!==E)&&(ZP(i,r,b,E,d,f,h,m,p).forEach(function(v){t.push({key:"C",data:v})}),i=b,r=E);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function Cre(e){return Math.PI*e/180}function Ng(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function ZP(e,t,n,i,r,s,o,a,l,c){const u=Cre(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Ng(e,t,-u),[n,i]=Ng(n,i,-u);const D=(e-n)/2,L=(t-i)/2;let G=D*D/(r*r)+L*L/(s*s);G>1&&(G=Math.sqrt(G),r=G*r,s=G*s);const H=a===l?-1:1,V=r*r,$=s*s,j=V*$-V*L*L-$*D*D,X=V*L*L+$*D*D,Z=H*Math.sqrt(Math.abs(j/X));m=Z*r*L/s+(e+n)/2,p=Z*-s*D/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let b=h-f;if(Math.abs(b)>Math.PI*120/180){const D=h,L=n,G=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=ZP(n,i,L,G,r,s,o,0,l,[h,D,m,p])}b=h-f;const E=Math.cos(f),y=Math.sin(f),v=Math.cos(h),w=Math.sin(h),S=Math.tan(b/4),R=4/3*r*S,_=4/3*s*S,T=[e,t],x=[e+R*y,t-_*E],I=[n+R*w,i-_*v],M=[n,i];if(x[0]=2*T[0]-x[0],x[1]=2*T[1]-x[1],c)return[x,I,M].concat(d);{d=[x,I,M].concat(d);const D=[];for(let L=0;L<d.length;L+=3){const G=Ng(d[L][0],d[L][1],u),H=Ng(d[L+1][0],d[L+1][1],u),V=Ng(d[L+2][0],d[L+2][1],u);D.push([G[0],G[1],H[0],H[1],V[0],V[1]])}return D}}const Are={randOffset:Dre,randOffsetWithRange:Ore,ellipse:kre,doubleLineOps:Nre};function qP(e,t,n,i,r){return{type:"path",ops:Wa(e,t,n,i,r)}}function $U(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...Wa(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...Wa(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return qP(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function Rre(e,t){return $U(e,!0,t)}function Mre(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return Rre(s,r)}function zx(e,t){let n=Gx(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=Gx(e,1.5*(1+t.roughness*.22),Pre(t));n=n.concat(i)}return{type:"path",ops:n}}function kre(e,t,n,i,r){const s=QP(n,i,r);return cE(e,t,r,s).opset}function QP(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Oe(o*l,n),a+=Oe(a*l,n),{increment:s,rx:o,ry:a}}function cE(e,t,n,i){const[r,s]=Xx(i.increment,e,t,i.rx,i.ry,1,i.increment*c6(.1,c6(.4,1,n),n),n);let o=u6(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=Xx(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=u6(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Hx(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Oe(d*.01,l),f+=Oe(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,b=Math.min(p/2,(m-h)/2),E=jx(b,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const y=jx(b,c,u,d,f,h,m,1.5,l);E.push(...y)}return o&&(a?E.push(...Wa(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...Wa(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):E.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:E}}function Vx(e,t){const n=KP(WP(yw(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...Wa(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Fre(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...Wa(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function E8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+Oe(r,t),i[0][1]+Oe(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+Oe(r,t),i[o][1]+Oe(r,t)]})}}return{type:"fillPath",ops:n}}function sf(e,t){return Sre(t,Are).fillPolygons(e,t)}function Lre(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Oe(c*.01,o),u+=Oe(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),sf([m],o)}function Dre(e,t){return Oe(e,t)}function Ore(e,t,n){return c6(e,t,n)}function Nre(e,t,n,i,r){return Wa(e,t,n,i,r,!0)}function Pre(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function JP(e){return e.randomizer||(e.randomizer=new DP(e.seed||0)),e.randomizer.next()}function c6(e,t,n,i=1){return n.roughness*i*(JP(n)*(t-e)+e)}function Oe(e,t,n=1){return c6(-e,e,t,n)}function Wa(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=$x(e,t,n,i,r,!0,!1);if(o)return a;const l=$x(e,t,n,i,r,!0,!0);return a.concat(l)}function $x(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+JP(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=Oe(h,r,c),m=Oe(m,r,c);const p=[],b=()=>Oe(d,r,c),E=()=>Oe(u,r,c),y=r.preserveVertices;return o?p.push({op:"move",data:[e+(y?0:b()),t+(y?0:b())]}):p.push({op:"move",data:[e+(y?0:Oe(u,r,c)),t+(y?0:Oe(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+b(),m+t+(i-t)*f+b(),h+e+2*(n-e)*f+b(),m+t+2*(i-t)*f+b(),n+(y?0:b()),i+(y?0:b())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+E(),m+t+(i-t)*f+E(),h+e+2*(n-e)*f+E(),m+t+2*(i-t)*f+E(),n+(y?0:E()),i+(y?0:E())]}),p}function Gx(e,t,n){const i=[];i.push([e[0][0]+Oe(t,n),e[0][1]+Oe(t,n)]),i.push([e[0][0]+Oe(t,n),e[0][1]+Oe(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+Oe(t,n),e[r][1]+Oe(t,n)]),r===e.length-1&&i.push([e[r][0]+Oe(t,n),e[r][1]+Oe(t,n)]);return u6(i,null,n)}function u6(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...Wa(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function Xx(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=Oe(.5,a)-Math.PI/2;u.push([Oe(s,a)+t+.9*i*Math.cos(d-e),Oe(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Oe(s,a)+t+i*Math.cos(h),Oe(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([Oe(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Oe(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([Oe(s,a)+t+.98*i*Math.cos(d+o),Oe(s,a)+n+.98*r*Math.sin(d+o)]),u.push([Oe(s,a)+t+.9*i*Math.cos(d+o*.5),Oe(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function jx(e,t,n,i,r,s,o,a,l){const c=s+Oe(.1,l),u=[];u.push([Oe(a,l)+t+.9*i*Math.cos(c-e),Oe(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Oe(a,l)+t+i*Math.cos(d),Oe(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u6(u,null,l)}function Fre(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Oe(c[0],a)),o[1]+(f?0:Oe(c[0],a))]}),u=f?[r,s]:[r+Oe(c[h],a),s+Oe(c[h],a)],l.push({op:"bcurveTo",data:[e+Oe(c[h],a),t+Oe(c[h],a),n+Oe(c[h],a),i+Oe(c[h],a),u[0],u[1]]});return l}function Pg(e){return[...e]}function Bre(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(Pg(e[0]),Pg(e[1]),Pg(e[2]),Pg(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(Pg(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function zre(e,t){return Math.sqrt(GU(e,t))}function GU(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Hre(e,t,n){const i=GU(t,n);if(i===0)return GU(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),GU(e,iu(t,n,r))}function iu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Vre(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function uE(e,t,n,i){const r=i||[];if(Vre(e,t)<n){const s=e[t+0];r.length?zre(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=iu(o,a,.5),d=iu(a,l,.5),f=iu(l,c,.5),h=iu(u,d,.5),m=iu(d,f,.5),p=iu(h,m,.5);uE([o,u,h,p],0,n,r),uE([p,m,f,c],0,n,r)}return r}function eF(e,t){return d6(e,0,e.length,t)}function d6(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Hre(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(d6(e,t,c+1,i,s),d6(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function Fm(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;uE(e,o,t,i)}return n&&n>0?d6(i,0,i.length,n):i}function $re(e,t,n){const i=yw(e),r=KP(WP(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...Fm(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=eF(f,n);h.length&&d.push(h)}return d}const _r="none";class D0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return _ie()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[qP(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=Mre(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(E8([c],o)):a.push(sf([c],o))}return o.stroke!==_r&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=QP(i,r,o),c=cE(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=cE(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(sf([c.estimatedPoints],o));return o.stroke!==_r&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[$U(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=Hx(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=Hx(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Lre(t,n,i,r,s,o,c));return c.stroke!==_r&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=zx(t,i);if(i.fill&&i.fill!==_r&&t.length>=3)if(i.fillStyle==="solid"){const o=zx(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=Bre(t),a=Fm(o,10,(1+i.roughness)/2);r.push(sf([a],i))}return i.stroke!==_r&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=$U(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(E8([t],i)):r.push(sf([t],i))),i.stroke!==_r&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==_r,o=i.stroke!==_r,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=$re(t,1,l),u=Vx(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=Vx(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(E8(c,i));else r.push(sf(c,i));return o&&(a?c.forEach(d=>{r.push($U(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:_r};break;case"fillPath":o={d:this.opsToPath(s),stroke:_r,strokeWidth:0,fill:i.fill||_r};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||_r,strokeWidth:i,fill:_r}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Gre{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new D0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const Qp="http://www.w3.org/2000/svg";class Xre{constructor(t,n){this.svg=t,this.gen=new D0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(Qp,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(Qp,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(Qp,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(Qp,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const Bc={canvas(e,t){return new Gre(e,t)},svg(e,t){return new Xre(e,t)},generator(e){return new D0(e)},newSeed(){return D0.newSeed()}};let tF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const In=e=>!!e&&e.type==="image"&&!!e.fileId,ot=e=>!!e&&e.type==="image",lr=e=>!!e&&e.type==="embeddable",Rl=e=>!!e&&e.type==="iframe",rs=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),fe=e=>e!=null&&e.type==="text",nF=e=>e!=null&&e.type==="frame",XU=e=>e!=null&&e.type==="magicframe",Ie=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),Js=e=>e!=null&&jre(e.type),jre=e=>e==="freedraw",ke=e=>e!=null&&Ew(e.type),Le=e=>e!=null&&e.type==="arrow",me=e=>Le(e)&&e.elbowed,Ew=e=>e==="arrow"||e==="line",_a=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&iF(e.type),iF=e=>e==="arrow",eo=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Yre=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Ou=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Le(e)),rF=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return wc(t,null),!1}},Yb=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",br=e=>{var t;return Ou(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Ht=e=>e!==null&&"containerId"in e&&e.containerId!==null&&fe(e),Qh=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",sF=e=>e==="line"||e==="arrow"||e==="diamond",Wre=(e,t)=>!!((e===Nn.ADAPTIVE_RADIUS||e===Nn.LEGACY)&&Qh(t.type)||e===Nn.PROPORTIONAL_RADIUS&&sF(t.type)),Kre=e=>sF(e.type)?{type:Nn.PROPORTIONAL_RADIUS}:Qh(e.type)?{type:Nn.ADAPTIVE_RADIUS}:null,f6=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null;function oF(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const Zre=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=Vl(se(e),Rt(se(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,b=o*d,E=(s*s-o*o)*u**3/s,y=(o*o-s*s)*d**3/o,v=p-E,w=b-y,S=l-E,R=c-y,_=Math.hypot(w,v),T=Math.hypot(R,S);u=Math.min(1,Math.max(0,(S*_/T+E)/s)),d=Math.min(1,Math.max(0,(R*_/T+y)/o));const x=Math.hypot(d,u);u/=x,d/=x}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return wt(De(a),A(f,h))};function qre({center:e,halfWidth:t,halfHeight:n},[i,r]){const[s,o]=e,a=i[0]-s,l=i[1]-o,c=r[0]-s,u=r[1]-o,d=Math.pow(c-a,2)/Math.pow(t,2)+Math.pow(u-l,2)/Math.pow(n,2),f=2*(a*(c-a)/Math.pow(t,2)+l*(u-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,m=(-f+Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),p=(-f-Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),b=[A(a+m*(c-a)+s,l+m*(u-l)+o),A(a+p*(c-a)+s,l+p*(u-l)+o)].filter(E=>!isNaN(E[0])&&!isNaN(E[1]));return b.length===2&&Qs(b[0],b[1])?[b[0]]:b}function vw(e,t=0){const n=js(Math.min(e.width,e.height),e);if(n<=0){const f=iE(A(e.x-t,e.y-t),A(e.x+e.width+t,e.y+e.height+t)),h=_e(A(f[0][0]+n,f[0][1]),A(f[1][0]-n,f[0][1])),m=_e(A(f[1][0],f[0][1]+n),A(f[1][0],f[1][1]-n)),p=_e(A(f[0][0]+n,f[1][1]),A(f[1][0]-n,f[1][1])),b=_e(A(f[0][0],f[1][1]-n),A(f[0][0],f[0][1]+n));return[[h,m,p,b],[]]}const i=fi(e),r=iE(A(e.x,e.y),A(e.x+e.width,e.y+e.height)),s=_e(A(r[0][0]+n,r[0][1]),A(r[1][0]-n,r[0][1])),o=_e(A(r[1][0],r[0][1]+n),A(r[1][0],r[1][1]-n)),a=_e(A(r[0][0]+n,r[1][1]),A(r[1][0]-n,r[1][1])),l=_e(A(r[0][0],r[1][1]-n),A(r[0][0],r[0][1]+n)),c=[Rt(ci(se(A(r[0][0]-t,r[0][1]-t),i)),t),Rt(ci(se(A(r[1][0]+t,r[0][1]-t),i)),t),Rt(ci(se(A(r[1][0]+t,r[1][1]+t),i)),t),Rt(ci(se(A(r[0][0]-t,r[1][1]+t),i)),t)],u=[Ma(De(c[0],l[1]),De(c[0],A(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1]))),De(c[0],A(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1]))),De(c[0],s[0])),Ma(De(c[1],s[1]),De(c[1],A(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1]))),De(c[1],A(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1]))),De(c[1],o[0])),Ma(De(c[2],o[1]),De(c[2],A(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1]))),De(c[2],A(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1]))),De(c[2],a[1])),Ma(De(c[3],a[0]),De(c[3],A(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1]))),De(c[3],A(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1]))),De(c[3],l[0]))];return[[_e(u[0][3],u[1][0]),_e(u[1][3],u[2][0]),_e(u[2][3],u[3][0]),_e(u[3][3],u[0][0])],u]}function ww(e,t=0){var w;const[n,i,r,s,o,a,l,c]=sB(e),u=js(Math.abs(n-l),e),d=js(Math.abs(s-i),e);if(((w=e.roundness)==null?void 0:w.type)==null){const[S,R,_,T]=[A(e.x+n,e.y+i-t),A(e.x+r+t,e.y+s),A(e.x+o,e.y+a+t),A(e.x+l-t,e.y+c)],x=_e(A(S[0]+u,S[1]+d),A(R[0]-u,R[1]-d)),I=_e(A(R[0]-u,R[1]+d),A(_[0]+u,_[1]-d)),M=_e(A(_[0]-u,_[1]-d),A(T[0]+u,T[1]+d)),D=_e(A(T[0]+u,T[1]-d),A(S[0]-u,S[1]+d));return[[x,I,M,D],[]]}const f=fi(e),[h,m,p,b]=[A(e.x+n,e.y+i),A(e.x+r,e.y+s),A(e.x+o,e.y+a),A(e.x+l,e.y+c)],E=[Rt(ci(se(m,f)),t),Rt(ci(se(p,f)),t),Rt(ci(se(b,f)),t),Rt(ci(se(h,f)),t)],y=[Ma(De(E[0],A(m[0]-u,m[1]-d)),De(E[0],m),De(E[0],m),De(E[0],A(m[0]-u,m[1]+d))),Ma(De(E[1],A(p[0]+u,p[1]-d)),De(E[1],p),De(E[1],p),De(E[1],A(p[0]-u,p[1]-d))),Ma(De(E[2],A(b[0]+u,b[1]+d)),De(E[2],b),De(E[2],b),De(E[2],A(b[0]+u,b[1]-d))),Ma(De(E[3],A(h[0]-u,h[1]+d)),De(E[3],h),De(E[3],h),De(E[3],A(h[0]+u,h[1]+d)))];return[[_e(y[0][3],y[1][0]),_e(y[1][3],y[2][0]),_e(y[2][3],y[3][0]),_e(y[3][3],y[0][0])],y]}const h6=e=>{if(e.type==="arrow")return!1;const t=!zs(e.backgroundColor)||br(e)||rs(e)||fe(e);return e.type==="line"||e.type==="freedraw"?t&&qa(e.points):t||ot(e)},of=({x:e,y:t,element:n,shape:i,threshold:r=10,frameNameBound:s=null})=>{let o=h6(n)&&P0(A(e,t),i)||TE(A(e,t),i,r);return!o&&s&&(o=P0(A(e,t),{type:"polygon",data:aB(s).data})),o},_w=(e,t,n,i,r=0)=>{let[s,o,a,l]=io(n,i);return s-=r,o-=r,a+=r,l+=r,CP(A(s,o),A(e,t),A(a,l))},Qre=(e,t)=>!of(e)&&!aF(e.x,e.y,GF(e.element,t))&&_w(e.x,e.y,e.element,t),aF=(e,t,n)=>!!n&&P0(A(e,t),n),dE=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Jre(e,t,n);case"diamond":return ese(e,t,n);case"ellipse":return tse(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},Jre=(e,t,n=0)=>{const i=fi(e),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle),[o,a]=vw(e,n);return o.map(l=>td(_e(r,s),l)).filter(l=>l!=null).map(l=>q(l,i,e.angle)).concat(a.flatMap(l=>AP(l,_e(r,s))).filter(l=>l!=null).map(l=>q(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Qs(l,d))===c)},ese=(e,t,n=0)=>{const i=fi(e),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle),[o,a]=ww(e,n);return o.map(l=>td(_e(r,s),l)).filter(l=>l!=null).map(l=>q(l,i,e.angle)).concat(a.flatMap(l=>AP(l,_e(r,s))).filter(l=>l!=null).map(l=>q(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Qs(l,d))===c)},tse=(e,t,n=0)=>{const i=fi(e),r=q(t[0],i,-e.angle),s=q(t[1],i,-e.angle);return qre(oF(i,e.width/2+n,e.height/2+n),nE(r,s)).map(o=>q(o,i,e.angle))},Wb=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return nse(e,t);case"diamond":return ise(e,t);case"ellipse":return rse(e,t)}},nse=(e,t)=>{const n=fi(e),i=q(t,n,-e.angle),[r,s]=vw(e);return Math.min(...r.map(o=>gw(i,o)),...s.map(o=>RP(o,i)).filter(o=>o!==null))},ise=(e,t)=>{const n=fi(e),i=q(t,n,-e.angle),[r,s]=ww(e);return Math.min(...r.map(o=>gw(i,o)),...s.map(o=>RP(o,i)).filter(o=>o!==null))},rse=(e,t)=>{const n=fi(e);return Zre(q(t,n,-e.angle),oF(n,e.width/2,e.height/2))},Dn=[1,0],Zi=[0,1],ss=[-1,0],Ns=[0,-1],mh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?Dn:t<=-r?ss:n>i?Zi:Ns},xr=(e,t)=>mh(se(e,t)),Ta=(e,t)=>Oo(xr(e,t)),Pn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Oo=e=>Pn(e,Dn)||Pn(e,ss),sse=(e,t,n)=>{const i=Yw(t),r=.95,s=De(Rt(se(q(A(e.x+e.width/2,e.y),i,e.angle),i),r),i),o=De(Rt(se(q(A(e.x+e.width,e.y+e.height/2),i,e.angle),i),r),i),a=De(Rt(se(q(A(e.x+e.width/2,e.y+e.height),i,e.angle),i),r),i),l=De(Rt(se(q(A(e.x,e.y+e.height/2),i,e.angle),i),r),i);if(mt(se(n,s),se(s,o))<=0&&mt(se(n,s),se(s,l))>0)return xr(s,i);if(mt(se(n,o),se(o,a))<=0&&mt(se(n,o),se(o,s))>0)return xr(o,i);if(mt(se(n,a),se(a,l))<=0&&mt(se(n,a),se(a,o))>0)return xr(a,i);if(mt(se(n,l),se(l,s))<=0&&mt(se(n,l),se(l,a))>0)return xr(l,i);if(mt(se(n,i),se(s,i))<=0&&mt(se(n,i),se(o,i))>0){const u=e.width>e.height?s:o;return xr(u,i)}else if(mt(se(n,i),se(o,i))<=0&&mt(se(n,i),se(a,i))>0){const u=e.width>e.height?a:o;return xr(u,i)}else if(mt(se(n,i),se(a,i))<=0&&mt(se(n,i),se(l,i))>0){const u=e.width>e.height?a:l;return xr(u,i)}const c=e.width>e.height?s:l;return xr(c,i)},Tw=(e,t,n)=>{const r=Yw(t);if(e.type==="diamond")return sse(e,t,n);const s=c1(A(t[0],t[1]),r,2),o=c1(A(t[2],t[1]),r,2),a=c1(A(t[0],t[3]),r,2),l=c1(A(t[2],t[3]),r,2);return m8([s,o,r],n)?Ns:m8([o,l,r],n)?Dn:m8([l,a,r],n)?Zi:ss},lF=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],ph={},g6=(e,t)=>{const n=ph[e]||(ph[e]={height:t});return n.height=t,n},cF=e=>{ph[e]&&delete ph[e]},ose=e=>{var t;return((t=ph[e])==null?void 0:t.height)??null},Vi=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=use(i,r,n);return{width:xw(i,t),height:s}},uF="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),dF=(e,t)=>{const n=dse(e);return n===0?Vi(uF.split("").join(`
`),e,t).width+On*2:n+On*2},Sw=(e,t)=>Vi("",e,t).width+On*2,ase=()=>xw(uF,Ct({fontSize:fl,fontFamily:Fc}))>0,Uh=e=>VP(e).replace(/\t/g,"        "),Iw=e=>Uh(e).split(`
`),lse=e=>{const t=Iw(e.text).length;return e.height/t/e.fontSize},Bm=(e,t)=>e*t,fF=(e,t)=>Bm(e,t)+On*2;let v8;class cse{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const nd=(e,t)=>(v8||(v8=new cse),v8.getLineWidth(e,t)),xw=(e,t)=>{const n=Iw(e);let i=0;return n.forEach(r=>{i=Math.max(i,nd(r,t))}),i},use=(e,t,n)=>{const i=Iw(e).length;return Bm(t,n)*i},zm=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=nd(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),dse=e=>{const t=zm.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let w8,Jp,_8;const fse=e=>(w8||(w8=Et.class(...Object.values(ma))),w8.test(e)),hse=()=>{if(!Jp)try{Jp=mse()}catch{Jp=gse()}return Jp},Cw=()=>(_8||(_8=pse()),_8),Wr={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},ma={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},Kc={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},gse=()=>Et.or(Cw(),bn.On(Wr.HYPHEN,Wr.WHITESPACE,ma.CHAR)),mse=()=>Et.or(Cw(),bn.Before(Wr.WHITESPACE).Build(),bn.After(Wr.WHITESPACE,Wr.HYPHEN).Build(),bn.Before(ma.CHAR,ma.CURRENCY).NotPrecededBy(Wr.OPENING,ma.OPENING).Build(),bn.After(ma.CHAR).NotFollowedBy(Wr.HYPHEN,Wr.CLOSING,ma.CLOSING).Build(),bn.BeforeMany(ma.OPENING).NotPrecededBy(Wr.OPENING).Build(),bn.AfterMany(ma.CLOSING).NotFollowedBy(Wr.CLOSING).Build(),bn.AfterMany(Wr.CLOSING).FollowedBy(Wr.OPENING).Build()),pse=()=>Et.group(Et.or(Kc.FLAG,Et.and(Kc.MOST,Kc.JOINER,Et.build(`(?:${Kc.ZWJ.source}(?:${Kc.FLAG.source}|${Kc.ANY.source}${Kc.JOINER.source}))*`)))),Et={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>Et.build(Et.join(...e)),or:(...e)=>Et.build(e.map(t=>t.source).join("|")),group:(...e)=>Et.build(`(${Et.join(...e)})`),class:(...e)=>Et.build(`[${Et.join(...e)}]`)},bn={On:(...e)=>{const t=Et.join(...e);return Et.build(`([${t}])`)},Before:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?=[${t}])`);return bn.Chain(n)},After:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<=[${t}])`);return bn.Chain(n)},BeforeMany:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<![${t}])(?=[${t}])`);return bn.Chain(n)},AfterMany:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<=[${t}])(?![${t}])`);return bn.Chain(n)},NotBefore:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?![${t}])`);return bn.Chain(n)},NotAfter:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<![${t}])`);return bn.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=bn.After(...t).Build(),r=()=>Et.and(i,n);return bn.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=bn.Before(...t).Build(),r=()=>Et.and(n,i);return bn.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=bn.NotAfter(...t).Build(),r=()=>Et.and(i,n);return bn.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=bn.NotBefore(...t).Build(),r=()=>Et.and(n,i);return bn.Chain(r)}})},Use=e=>{const t=hse();return e.normalize("NFC").split(t).filter(Boolean)},xd=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(nd(s,t)<=n){i.push(s);continue}const a=bse(s,t,n);i.push(...a)}return i.join(`
`)},bse=(e,t,n)=>{const i=[],s=Use(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=vse(c)?a+zm.calculate(c,t):nd(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=yse(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=nd(h,t),l=s.next()}}if(o){const c=Ese(o,t,n);i.push(c)}return i},yse=(e,t,n)=>{if(Cw().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=zm.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},Ese=(e,t,n)=>{if(!(nd(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=nd(r,t);for(const a of Array.from(s)){const l=zm.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},vse=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Ji=(e,t,n,i=!0)=>{let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?Le(t)?0:t.angle:e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?Ka(t,e):e.width,s.text=xd(e.originalText,Ct(e),r));const o=Vi(s.text,Ct(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=Zb(t,e),l=Ka(t,e);if(!Le(t)&&o.height>a){const f=id(o.height,t.type);ee(t,{height:f},i),g6(t.id,f)}if(o.width>l){const f=id(o.width,t.type);ee(t,{width:f},i)}const c={...e,...s},{x:u,y:d}=Kb(t,c,n);s.x=u,s.y=d}ee(e,s,i)},Hm=(e,t,n,i=!1)=>{if(!jo(e))return;cF(e.id);const s=ze(e,t);if(s&&s.text){if(!e)return;let o=s.text,a=s.height,l=s.width;const c=Ka(e,s),u=Zb(e,s);let d=e.height;if(i||n!=="n"&&n!=="s"){o&&(o=xd(s.originalText,Ct(s),c));const f=Vi(o,Ct(s),s.lineHeight);a=f.height,l=f.width}if(a>u){d=id(a,e.type);const f=d-e.height,h=!Le(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-f:e.y;ee(e,{height:d,y:h})}ee(s,{text:o,width:l,height:a}),Le(e)||ee(s,Kb(e,s,t))}},Kb=(e,t,n)=>{if(Le(e))return ue.getBoundTextElementPosition(e,t,n);const i=wse(e),r=Zb(e,t),s=Ka(e,t);let o,a;return t.verticalAlign===Lr.TOP?a=i.y:t.verticalAlign===Lr.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===M0.LEFT?o=i.x:t.textAlign===M0.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2),{x:o,y:a}},jo=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(r=>r.type==="text"))==null?void 0:i.id)||null},ze=(e,t)=>{if(!e)return null;const n=jo(e);return n&&t.get(n)||null},Bn=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,T8=(e,t,n)=>{if(!Le(e))return{x:e.x+e.width/2,y:e.y+e.height/2};const i=ue.getPointsGlobalCoordinates(e,n);if(i.length%2===1){const o=Math.floor(e.points.length/2),a=ue.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=ue.getEditorMidPoints(e,n,t)[r];return s||(s=ue.getSegmentMidPoint(e,i[r],i[r+1],r+1,n)),{x:s[0],y:s[1]}},wse=e=>{let t=On,n=On;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},_se=(e,t)=>Le(t)?0:t?t.angle:e.angle,Tse=(e,t)=>e.some(n=>{if(Ht(n)){const i=Bn(n,t);return!Le(i)}return!1}),Sse=(e,t)=>e.some(n=>{if(Ht(n)){const i=Bn(n,t);return!Le(i)}return fe(n)}),Ise=new Set(["rectangle","ellipse","diamond","arrow"]),xse=e=>Ise.has(e.type),id=(e,t)=>{e=Math.ceil(e);const n=On*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Ka=(e,t)=>{const{width:n}=e;if(Le(e)){const i=((t==null?void 0:t.fontSize)??fl)*tie;return Math.max(eie*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-On*2:e.type==="diamond"?Math.round(n/2)-On*2:n-On*2},Zb=(e,t)=>{const{height:n}=e;return Le(e)?n-On*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-On*2:e.type==="diamond"?Math.round(n/2)-On*2:n-On*2},hF=(e,t=`

`)=>e.reduce((i,r)=>(fe(r)&&i.push(r.text),i),[]).join(t),Cse=e=>!e[z.CTRL_OR_CMD],Uu=e=>e.isBindingEnabled,qt=5,Aw=10,Rw=4,Ase=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},qb=(e,t,n,i,r)=>{const s=new Set,o=new Set;Yx(e,t,n,"start",s,o,i),Yx(e,n,t,"end",s,o,i);const a=Array.from(o).filter(l=>!s.has(l));Ase(r,a).forEach(l=>{var c;ee(l,{boundElements:(c=l.boundElements)==null?void 0:c.filter(u=>u.type!=="arrow"||u.id!==e.id)})})},Yx=(e,t,n,i,r,s,o)=>{if(t!=="keep"){if(t===null){const a=Dse(e,i);a!=null&&s.add(a);return}UF(e)?(n==null||(n==="keep"?!mF(e,t,i):i==="start"||n.id!==t.id))&&(cs(e,t,i,o),r.add(t.id)):(cs(e,t,i,o),r.add(t.id))}},Rse=(e,t,n,i)=>{var o,a;const r=bF(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){const l=n.get(s);if(eo(l)&&jU(l,r,n,i))return l}return null},gF=(e,t,n)=>["start","end"].map(i=>Rse(e,i,t,n)),Mse=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?If(e,"start",i,r,s):null:me(e)?"keep":If(e,"start",i,r,s),d=c?t?If(e,"end",i,r,s):null:me(e)?"keep":If(e,"end",i,r,s);return[u,d]},kse=(e,t,n,i,r)=>{if(me(e))return["keep","keep"];const[s,o]=gF(e,t,r),a=s&&i?If(e,"start",t,n,r):null,l=o&&i?If(e,"end",t,n,r):null;return[a,l]},m6=(e,t,n,i,r,s,o)=>{e.forEach(a=>{const[l,c]=s!=null&&s.length?Mse(a,r,s??[],t,n,o):kse(a,t,n,r,o);qb(a,l,c,t,i)})},S8=(e,t,n)=>e.length>50?[]:e.filter(ke).flatMap(i=>gF(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===(i==null?void 0:i.id)).length===0),fE=(e,t,n,i,r)=>{t.startBoundElement!=null&&cs(e,t.startBoundElement,"start",i);const s=Hs(n,r,i,t.zoom,me(e),me(e));s!==null&&(mF(e,s,"end")||cs(e,s,"end",i))},Lse=(e,t)=>{let n=e.gap;const i=Vm(t,t.width,t.height);return n>i&&(n=Aw+Rw),{...e,gap:n}},cs=(e,t,n,i)=>{if(!Le(e))return;let r={elementId:t.id,...Lse(Pse(e,t,n,i),t)};me(e)&&(r={...r,...p6(e,t,n)}),ee(e,{[n==="start"?"startBinding":"endBinding"]:r}),Se(t.boundElements||[]).has(e.id)||ee(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},mF=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return pF(e,i==null?void 0:i.elementId,t)},pF=(e,t,n)=>t===n.id&&UF(e),UF=e=>e.points.length<3,Dse=(e,t)=>{const n=t==="start"?"startBinding":"endBinding",i=e[n];return i==null?null:(ee(e,{[n]:null}),i.elementId)},Hs=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=Nse(t,u=>eo(u,!1)&&jU(u,e,n,i,(r||!p8(u))&&!Ie(u))).filter(u=>a?!1:(p8(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>jU(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return Ose(t,a=>eo(a,!1)&&jU(a,e,n,i,(r||!p8(a))&&!Ie(a)))},Ose=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},Nse=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},Pse=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=ue.getPointAtIndexGlobalCoordinates(e,s,i),l=ue.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:jse(t,l,a),gap:Math.max(1,Wb(t,a))}},mr=(e,t,n)=>{const{newSize:i,simultaneouslyUpdated:r}=n??{},s=Bse(r);eo(e)&&U6(t,e,o=>{var m,p;if(!ke(o)||o.isDeleted||!Fse(o,e))return;const a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null;let c=null,u=null;a&&l&&(c=io(a,t),u=io(l,t));const d={startBinding:Wx(e,o.startBinding,i),endBinding:Wx(e,o.endBinding,i)};if(s.has(o.id)){ee(o,d,!0);return}const f=b6(t,o,(b,E)=>{var y,v;if(b&&eo(b)&&(E==="startBinding"||E==="endBinding")&&(e.id===((y=o[E])==null?void 0:y.elementId)||e.id===((v=o[E==="startBinding"?"endBinding":"startBinding"])==null?void 0:v.elementId)&&!Tae(c,u))){const w=Gse(o,E,d[E],b,t);if(w)return{index:E==="startBinding"?0:o.points.length-1,point:w}}return null}).filter(b=>b!==null);ue.movePoints(o,f,{...e.id===((m=o.startBinding)==null?void 0:m.elementId)?{startBinding:d.startBinding}:{},...e.id===((p=o.endBinding)==null?void 0:p.elementId)?{endBinding:d.endBinding}:{}},t);const h=ze(o,t);h&&!h.isDeleted&&Hm(o,t,!1)})},Fse=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},Bse=e=>new Set((e||[]).map(t=>t.id)),zse=(e,t,n,i,r,s,o)=>{const a=mh(se(t,e));return!n||!i?a:Hse(s,n,r,o)?Tw(n,i,e):mh(se(e,fi(n)))},Hse=(e,t,n,i)=>{const r=Wb(t,e),s=Vm(t,t.width,t.height,i);return r>s?null:r},O0=(e,t,n)=>{const i=Co(t),r=e.points[n==="start"?0:e.points.length-1],s=A(e.x+r[0],e.y+r[1]),o=Yre(t)?Vse(t,s):s,a=me(e),l=Yw(i),c=n==="start"?1:e.points.length-2,u=q(A(e.x+e.points[c][0],e.y+e.points[c][1]),l,e.angle??0);let d=null;if(a){const f=Oo(Tw(t,i,s)),h=A(f?l[0]:o[0],f?o[1]:l[1]);d=dE(t,_e(h,De(Rt(ci(se(o,h)),Math.max(t.width,t.height)*2),h)))[0]}else d=dE(t,_e(u,De(Rt(ci(se(o,u)),wt(o,u)+Math.max(t.width,t.height)*2),u)),qt).sort((f,h)=>wa(f,u)-wa(h,u))[0];if(!d||wa(o,d)<vc)return o;if(a){const f=wa(o,l)-wa(d,l)>0?qt:-5;return De(Rt(ci(se(o,d)),f),d)}return o},Vse=(e,t)=>{const n=fi(e),i=q(t,n,-e.angle);return i[0]<e.x&&i[1]<e.y?i[1]-e.y>-5?q(A(e.x-qt,e.y),n,e.angle):q(A(e.x,e.y-qt),n,e.angle):i[0]<e.x&&i[1]>e.y+e.height?i[0]-e.x>-5?q(A(e.x,e.y+e.height+qt),n,e.angle):q(A(e.x-qt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]>e.y+e.height?i[0]-e.x<e.width+qt?q(A(e.x+e.width,e.y+e.height+qt),n,e.angle):q(A(e.x+e.width+qt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]<e.y?i[0]-e.x<e.width+qt?q(A(e.x+e.width,e.y-qt),n,e.angle):q(A(e.x+e.width+qt,e.y),n,e.angle):t},$se=(e,t,n=.05)=>{const{x:i,y:r,width:s,height:o,angle:a}=e,l=fi(e,-.1,-.1),c=q(t,l,-a),u=Xe(n*o,5,80),d=Xe(n*s,5,80);return c[0]<=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u?q(A(i-qt,l[1]),l,a):c[1]<=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d?q(A(l[0],r-qt),l,a):c[0]>=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u?q(A(i+s+qt,l[1]),l,a):c[1]>=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d?q(A(l[0],r+o+qt),l,a):t},Gse=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(me(e)&&f6(n)){const d=Qb(n.fixedPoint)??p6(e,i,t==="startBinding"?"start":"end").fixedPoint,f=fi(i),h=A(i.x+d[0]*i.width,i.y+d[1]*i.height),m=q(h,f,i.angle);return ue.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=ue.getPointAtIndexGlobalCoordinates(e,a,r),c=Yse(i,n.focus,l);let u;if(n.gap===0)u=c;else{const d=ue.getPointAtIndexGlobalCoordinates(e,o,r),f=fi(i),h=wt(l,d)+wt(l,f)+Math.max(i.width,i.height)*2,m=[...dE(i,_e(l,De(Rt(ci(se(c,l)),h),l)),n.gap).sort((p,b)=>wa(p,l)-wa(b,l)),De(Rt(ci(se(c,l)),wt(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return ue.pointFromAbsoluteCoords(e,u,r)},p6=(e,t,n,i)=>{const r=[t.x,t.y,t.x+t.width,t.y+t.height],s=O0(e,t,n),o=A(r[0]+(r[2]-r[0])/2,r[1]+(r[3]-r[1])/2),a=q(s,o,-t.angle);return{fixedPoint:Qb([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},Wx=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(Vm(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},If=(e,t,n,i,r)=>Hs(bF(e,t,n),i,n,r,me(e),me(e)),bF=(e,t,n)=>{const i=t==="start"?0:-1;return Bs(ue.getPointAtIndexGlobalCoordinates(e,i,n))},Xse=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}me(i)&&Object.assign(i,Jh(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},yF=(e,t)=>{const n=Se(e);for(const i of t)xf.unbindAffected(n,i,ee),Cf.unbindAffected(n,i,ee)},X1=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},jU=(e,{x:t,y:n},i,r,s)=>{const o=Vm(e,e.width,e.height,r),a=Ds(e,i);return TE(A(t,n),a,o)||s===!0&&Eh(A(t,n),Co(e))},Vm=(e,t,n,i)=>{const r=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),Aw/r+Rw)},jse=(e,t,n)=>{const i=fi(e);if(Qs(t,n))return 0;const r=q(t,i,-e.angle),s=q(n,i,-e.angle),o=Math.sign(mt(se(s,t),se(s,i)))*-1,a=_e(s,De(Rt(ci(se(s,r)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[_e(A(e.x+e.width/2,e.y),A(e.x+e.width/2,e.y+e.height)),_e(A(e.x,e.y+e.height/2),A(e.x+e.width,e.y+e.height/2))]:[_e(A(e.x,e.y),A(e.x+e.width,e.y+e.height)),_e(A(e.x+e.width,e.y),A(e.x,e.y+e.height))],c=e.type==="diamond"?[_e(A(e.x+e.width/2,e.y-e.height),A(e.x+e.width/2,e.y+e.height*2)),_e(A(e.x-e.width,e.y+e.height/2),A(e.x+e.width*2,e.y+e.height/2))]:[_e(A(e.x-e.width,e.y-e.height),A(e.x+e.width*2,e.y+e.height*2)),_e(A(e.x+e.width*2,e.y-e.height),A(e.x-e.width,e.y+e.height*2))];return[td(a,c[0]),td(a,c[1])].filter(f=>f!==null).sort((f,h)=>wa(f,n)-wa(h,n)).map((f,h)=>o*wt(i,f)/(e.type==="diamond"?wt(l[h][0],l[h][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((f,h)=>Math.abs(f)-Math.abs(h))[0]??0},Yse=(e,t,n)=>{const i=fi(e);if(t===0)return i;const r=(e.type==="diamond"?[A(e.x,e.y+e.height/2),A(e.x+e.width/2,e.y),A(e.x+e.width,e.y+e.height/2),A(e.x+e.width/2,e.y+e.height)]:[A(e.x,e.y),A(e.x+e.width,e.y),A(e.x+e.width,e.y+e.height),A(e.x,e.y+e.height)]).map(a=>De(Rt(se(a,i),Math.abs(t)),i)).map(a=>q(a,i,e.angle)),s=[mt(se(n,r[0]),se(r[1],r[0]))>0&&(t>0?mt(se(n,r[1]),se(r[2],r[1]))<0:mt(se(n,r[3]),se(r[0],r[3]))<0),mt(se(n,r[1]),se(r[2],r[1]))>0&&(t>0?mt(se(n,r[2]),se(r[3],r[2]))<0:mt(se(n,r[0]),se(r[1],r[0]))<0),mt(se(n,r[2]),se(r[3],r[2]))>0&&(t>0?mt(se(n,r[3]),se(r[0],r[3]))<0:mt(se(n,r[1]),se(r[2],r[1]))<0),mt(se(n,r[3]),se(r[0],r[3]))>0&&(t>0?mt(se(n,r[0]),se(r[1],r[0]))<0:mt(se(n,r[2]),se(r[3],r[2]))<0)];return s[0]?t>0?r[1]:r[0]:s[1]?t>0?r[2]:r[1]:s[2]?t>0?r[3]:r[2]:t>0?r[0]:r[3]},Wse=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),U6=(e,t,n)=>{var i;eo(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:s})=>{n(e.get(s),"boundElements",s)})},b6=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(Ht(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(Le(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class xf{static unbindAffected(t,n,i){n&&b6(t,n,r=>{!r||r.isDeleted||U6(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:X1(r.boundElements,new Set([a]))})})})}}F(xf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||b6(t,n,(r,s)=>{var o,a;if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&((o=r.boundElements)!=null&&o.find(l=>l.id===n.id)||(Le(n)&&i(r,{boundElements:X1(r.boundElements,new Set,new Array(n))}),fe(n)&&((a=r.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[s]:null}):i(r,{boundElements:X1(r.boundElements,new Set,new Array(n))}))))})});class Cf{static unbindAffected(t,n,i){n&&U6(t,n,r=>{!r||r.isDeleted||b6(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}}F(Cf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||U6(t,n,(r,s,o)=>{var a,l;if(!r||r.isDeleted){i(n,{boundElements:X1(n.boundElements,new Set([o]))});return}fe(r)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:X1(n.boundElements,new Set([r.id]))})))})});const hE=(e,t)=>{const[n,i]=Qb(e);return q(A(t.x+t.width*n,t.y+t.height*i),fi(t),t.angle)},Kse=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?hE(e.startBinding.fixedPoint,n):A(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?hE(e.endBinding.fixedPoint,i):A(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Zse=(e,t)=>{const[n,i]=Kse(e,t);return[ue.pointFromAbsoluteCoords(e,n,t),ue.pointFromAbsoluteCoords(e,i,t)]},Qb=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,Mw=1,Tn=40,qse=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>A(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=xr(o,l[a-1]),u=xr(l[a-1],l[a-2]);if(Pn(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=A(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(wt(l[a-2],l[a-1])<Mw){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=Ta(o,l[a-1]);return r.push(A(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?Ba(Dw(Ow(Lw(e,kw(e,t,r.map(o=>A(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):Ba(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},Qse=(e,t,n)=>{var x,I;const i=t.map(M=>M.index),s=(((x=e.fixedSegments)==null?void 0:x.map(M=>M.index))??[]).findIndex(M=>!i.includes(M));if(s===-1||!((I=e.fixedSegments)!=null&&I[s]))return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:b,hoveredStartElement:E,hoveredEndElement:y,...v}=kw({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[A(0,0),A(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:w}=Ba(Dw(Ow(Lw(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:b,hoveredEndElement:y,...v})??[])),t,null,null),S=[];if(a)for(let M=0;M<a.index;M++)S.push(A(e.x+e.points[M][0],e.y+e.points[M][1]));if(w.forEach(M=>{S.push(A(e.x+(a?a.end[0]:0)+M[0],e.y+(a?a.end[1]:0)+M[1]))}),l)for(let M=l.index;M<e.points.length;M++)S.push(A(e.x+e.points[M][0],e.y+e.points[M][1]));const R=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,_=t.map(M=>M.index>o?{...M,index:M.index-R+(w.length-1)}:M),T=S.flatMap((M,D)=>{const L=S[D-1],G=S[D+1];if(L&&G){const H=xr(M,L),V=xr(G,M);if(Pn(H,V))return _.forEach($=>{$.index>D&&($.index-=1)}),[];if(Pn(H,lF(V)))return _.forEach($=>{$.index>D&&($.index+=1)}),[M,M]}return[M]});return Ba(T,_,!1,!1)},Jse=(e,t,n,i,r,s)=>{var S,R;const o=t.map((_,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==_.index||(_.start[0]!==e.fixedSegments[T].start[0]&&_.end[0]!==e.fixedSegments[T].end[0])!=(_.start[1]!==e.fixedSegments[T].start[1]&&_.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(_=>_!==null).shift();if(o==null)return{points:e.points};const a=((S=e.fixedSegments)==null?void 0:S.findIndex(_=>_.index===1))??-1,l=((R=e.fixedSegments)==null?void 0:R.findIndex(_=>_.index===e.points.length-1))??-1,c=wt(t[o].start,t[o].end),u=c<Tn+5;if(a===-1&&t[o].index===1&&r){const _=Oo(n),x=(_?Pn(n,Dn):Pn(n,Zi))?u?c/2:Tn:u?-c/2:-40;t[o].start=A(t[o].start[0]+(_?x:0),t[o].start[1]+(_?0:x))}if(l===-1&&t[o].index===e.points.length-1&&s){const _=Oo(i),x=(_?Pn(i,Dn):Pn(i,Zi))?u?c/2:Tn:u?-c/2:-40;t[o].end=A(t[o].end[0]+(_?x:0),t[o].end[1]+(_?0:x))}const d=t.map(_=>({..._,start:A(e.x+_.start[0],e.y+_.start[1]),end:A(e.x+_.end[0],e.y+_.end[1])})),f=e.points.map((_,T)=>A(e.x+_[0],e.y+_[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,b=d[o].end,E=f[h-1]&&!Qs(f[h],f[h-1])?Ta(f[h-1],f[h]):void 0,y=f[m+1]&&!Qs(f[m],f[m+1])?Ta(f[m+1],f[m]):void 0;if(E!==void 0){const _=E?1:0;f[h-1][_]=p[_]}if(f[h]=p,f[m]=b,y!==void 0){const _=y?1:0;f[m+1][_]=b[_]}const v=d.findIndex(_=>_.index===h);if(v!==-1){const _=Ta(d[v].end,d[v].start)?1:0;d[v].start[_]=p[_],d[v].end=p}const w=d.findIndex(_=>_.index===m+1);if(w!==-1){const _=Ta(d[w].end,d[w].start)?1:0;d[w].end[_]=b[_],d[w].start=b}if(a===-1&&h===0){const _=r?Oo(n):Ta(f[1],f[0]);f.unshift(A(_?p[0]:e.x+e.points[0][0],_?e.y+e.points[0][1]:p[1])),r&&f.unshift(A(e.x+e.points[0][0],e.y+e.points[0][1]));for(const T of d)T.index+=r?2:1}if(l===-1&&m===e.points.length-1){const _=Oo(i);f.push(A(_?b[0]:e.x+e.points[e.points.length-1][0],_?e.y+e.points[e.points.length-1][1]:b[1])),s&&f.push(A(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Ba(f,d.map(_=>({..._,start:A(_.start[0]-e.x,_.start[1]-e.y),end:A(_.end[0]-e.x,_.end[1]-e.y)})),!1,!1)},eoe=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((b,E)=>E===0||E===t.length-1?A(e.x+b[0],e.y+b[1]):A(e.x+e.points[E][0],e.y+e.points[E][1])),f=n.map(b=>({...b,start:A(e.x+(b.start[0]-t[0][0]),e.y+(b.start[1]-t[0][1])),end:A(e.x+(b.end[0]-t[0][0]),e.y+(b.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const b=d[c?2:1],E=d[c?3:2],y=Oo(i),v=Oo(mh(se(b,E)));if(a&&y===v){const w=y?Pn(i,Dn):Pn(i,Zi);if(h.unshift(A(v?s[0]+(w?Tn:-40):E[0],v?E[1]:s[1]+(w?Tn:-40))),h.unshift(A(y?s[0]+(w?Tn:-40):s[0],y?s[1]:s[1]+(w?Tn:-40))),!c){c=!0;for(const S of f)S.index>1&&(S.index+=1)}}else if(h.unshift(A(v?s[0]:b[0],v?b[1]:s[1])),c){c=!1;for(const w of f)w.index>1&&(w.index-=1)}h.unshift(s)}{const b=d[d.length-(u?3:2)],E=d[d.length-(u?4:3)],y=Oo(r),v=Ta(E,b);if(l&&y===v){const w=y?Pn(r,Dn):Pn(r,Zi);h.push(A(v?o[0]+(w?Tn:-40):E[0],v?E[1]:o[1]+(w?Tn:-40))),h.push(A(y?o[0]+(w?Tn:-40):o[0],y?o[1]:o[1]+(w?Tn:-40))),u||(u=!0)}else h.push(A(v?o[0]:b[0],v?b[1]:o[1])),u&&(u=!1)}return h.push(o),Ba(h,f.map(({index:b})=>({index:b,start:h[b-1],end:h[b]})).map(b=>({...b,start:A(b.start[0]-s[0],b.start[1]-s[1]),end:A(b.end[0]-s[0],b.end[1]-s[1])})),c,u)},or=1e6,Jh=(e,t,n,i)=>{var S,R,_,T,x,I,M,D,L,G,H,V,$,j,X,Z,ge,ce,le,Be,$e,Tt,at,$t,tn;if(e.points.length<2)return{points:n.points??e.points};(e.x<-1e6||e.x>or||e.y<-1e6||e.y>or||e.x+(((_=(R=n==null?void 0:n.points)==null?void 0:R[((S=n==null?void 0:n.points)==null?void 0:S.length)-1])==null?void 0:_[0])??0)<-1e6||e.x+(((I=(x=n==null?void 0:n.points)==null?void 0:x[((T=n==null?void 0:n.points)==null?void 0:T.length)-1])==null?void 0:I[0])??0)>or||e.y+(((L=(D=n==null?void 0:n.points)==null?void 0:D[((M=n==null?void 0:n.points)==null?void 0:M.length)-1])==null?void 0:L[1])??0)<-1e6||e.y+(((V=(H=n==null?void 0:n.points)==null?void 0:H[((G=n==null?void 0:n.points)==null?void 0:G.length)-1])==null?void 0:V[1])??0)>or||e.x+(((X=(j=e==null?void 0:e.points)==null?void 0:j[(($=e==null?void 0:e.points)==null?void 0:$.length)-1])==null?void 0:X[0])??0)<-1e6||e.x+(((ce=(ge=e==null?void 0:e.points)==null?void 0:ge[((Z=e==null?void 0:e.points)==null?void 0:Z.length)-1])==null?void 0:ce[0])??0)>or||e.y+((($e=(Be=e==null?void 0:e.points)==null?void 0:Be[((le=e==null?void 0:e.points)==null?void 0:le.length)-1])==null?void 0:$e[1])??0)<-1e6||e.y+((($t=(at=e==null?void 0:e.points)==null?void 0:at[((Tt=e==null?void 0:e.points)==null?void 0:Tt.length)-1])==null?void 0:$t[1])??0)>or)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Xe(e.x,-1e6,or),e.y=Xe(e.y,-1e6,or),n.points&&(n.points=n.points.map(([Ae,Ge])=>A(Xe(Ae,-1e6,or),Xe(Ge,-1e6,or))));const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((Ae,Ge)=>Ge===0?n.points[0]:Ge===e.points.length-1?n.points[1]:Ae):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&y6(c.elementId,t),f=u&&y6(u.elementId,t),h=vF(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return Ba(s.map(Ae=>A(e.x+Ae[0],e.y+Ae[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:b,endGlobalPoint:E,hoveredStartElement:y,hoveredEndElement:v,...w}=kw({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?Ba(s.map(Ae=>A(e.x+Ae[0],e.y+Ae[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?qse(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((Ae,Ge)=>Qs(Ae,e.points[Ge]??A(1/0,1/0)))&&h?{}:r.length===0?Ba(Dw(Ow(Lw(e,{startHeading:m,endHeading:p,startGlobalPoint:b,endGlobalPoint:E,hoveredEndElement:v,...w})??[])),r,null,null):(((tn=e.fixedSegments)==null?void 0:tn.length)??0)>r.length?Qse(e,r,t):n.points?n.points&&n.fixedSegments?n:eoe(e,s,r,m,p,b,E,y,v):Jse(e,r,m,p,y,v)},kw=(e,t,n,i)=>{var S,R;const r=r6(n[0],Ui(e.x,e.y)),s=r6(n[n.length-1],Ui(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const _=Array.from(t.values());o=Qx(r,t,_,i==null?void 0:i.zoom)||null,a=Qx(s,t,_,i==null?void 0:i.zoom)||null}else o=e.startBinding&&y6(e.startBinding.elementId,t)||null,a=e.endBinding&&y6(e.endBinding.elementId,t)||null;const l=Zx({...e,type:"arrow",elbowed:!0,points:n},"start",(S=e.startBinding)==null?void 0:S.fixedPoint,r,o,i==null?void 0:i.isDragging),c=Zx({...e,type:"arrow",elbowed:!0,points:n},"end",(R=e.endBinding)==null?void 0:R.fixedPoint,s,a,i==null?void 0:i.isDragging),u=qx(l,c,t,o,r),d=qx(c,l,t,a,s),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?Co(o,yl(u,e.startArrowhead?qt*6:qt*2,1)):f,p=a?Co(a,yl(d,e.endArrowhead?qt*6:qt*2,1)):h,b=Eh(l,a?Co(a,yl(d,Tn,Tn)):h)||Eh(c,o?Co(o,yl(u,Tn,Tn)):f),E=EF(b?[f,h]:[m,p]),y=ioe(b?f:m,b?h:p,E,b?yl(u,!o&&!a?0:Tn,0):yl(u,!o&&!a?0:Tn-(e.startArrowhead?qt*6:qt*2),Tn),b?yl(d,!o&&!a?0:Tn,0):yl(d,!o&&!a?0:Tn-(e.endArrowhead?qt*6:qt*2),Tn),b,o&&Co(o),a&&Co(a)),v=Kx(y[0],u,l),w=Kx(y[1],d,c);return{dynamicAABBs:y,startDonglePosition:v,startGlobalPoint:l,startHeading:u,endDonglePosition:w,endGlobalPoint:c,endHeading:d,commonBounds:E,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:b,startElementBounds:m,endElementBounds:p}},Lw=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=roe(n,i||r,s,o||a,l,c),f=i&&eU(i,d),h=o&&eU(o,d),m=eU(a,d);m&&u&&(m.closed=!0);const p=eU(r,d);p&&e.startBinding&&(p.closed=!0);const b=f&&h&&(Eh(f.pos,n[1])||Eh(h.pos,n[0])),E=toe(f||p,h||m,d,s||Dn,l||Dn,b?[]:n);if(E){const y=E.map(v=>[v.pos[0],v.pos[1]]);return f&&y.unshift(r),h&&y.push(a),y}return null},yl=(e,t,n)=>{switch(e){case Ns:return[t,n,n,n];case Dn:return[n,t,n,n];case Zi:return[n,n,t,n]}return[n,n,n,t]},toe=(e,t,n,i,r,s)=>{const o=I8(e.pos,t.pos),a=new sne(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return noe(e,l);l.closed=!0;const c=ooe(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=c1(d.pos,l.pos,.5);if(zie(...s.map(w=>Eh(f,w))))continue;const h=aoe(u),m=l.parent?mh(se(l.pos,l.parent.pos)):i,p=lF(m);if(Pn(p,h)||Jx(e.addr,d.addr)&&Pn(h,i)||Jx(t.addr,d.addr)&&Pn(h,r))continue;const E=m!==h,y=l.g+I8(d.pos,l.pos)+(E?Math.pow(o,3):0),v=d.visited;if(!v||y<d.g){const w=soe(d,t,h,r);d.visited=!0,d.parent=l,d.h=I8(t.pos,d.pos)+w*Math.pow(o,2),d.g=y,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},noe=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},I8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),ioe=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,b,E]=r??[0,0,0,0],y=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],v=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-E):(c[0]+l[2])/2:t[0]>e[0]?t[0]-E:n[0]-E,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+b):(c[3]+l[1])/2:t[3]<e[3]?t[3]+b:n[3]+b],w=EF([y,v]);if(!s&&y[2]-y[0]+v[2]-v[0]>w[2]-w[0]+1e-11&&y[3]-y[1]+v[3]-v[1]>w[3]-w[1]+1e-11){const[S,R]=[(v[0]+v[2])/2,(v[1]+v[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const _=y[2]+(v[0]-y[2])/2,T=v[3]+(y[1]-v[3])/2;return mt(Ui(e[2]-S,e[1]-R),Ui(e[0]-S,e[3]-R))>0?[[y[0],y[1],_,y[3]],[_,v[1],v[2],v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const _=y[2]+(v[0]-y[2])/2,T=y[3]+(v[1]-y[3])/2;return mt(Ui(e[0]-S,e[1]-R),Ui(e[2]-S,e[3]-R))>0?[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]:[[y[0],y[1],_,y[3]],[_,v[1],v[2],v[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const _=v[2]+(y[0]-v[2])/2,T=y[3]+(v[1]-y[3])/2;return mt(Ui(e[2]-S,e[1]-R),Ui(e[0]-S,e[3]-R))>0?[[_,y[1],y[2],y[3]],[v[0],v[1],_,v[3]]]:[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const _=v[2]+(y[0]-v[2])/2,T=v[3]+(y[1]-v[3])/2;return mt(Ui(e[0]-S,e[1]-R),Ui(e[2]-S,e[3]-R))>0?[[_,y[1],y[2],y[3]],[v[0],v[1],_,v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}}return[y,v]},roe=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===ss||n===Dn?a.add(t[1]):o.add(t[0]),r===ss||r===Dn?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},Kx=(e,t,n)=>{switch(t){case Ns:return A(n[0],e[1]);case Dn:return A(e[2],n[1]);case Zi:return A(n[0],e[3])}return A(e[0],n[1])},soe=(e,t,n,i)=>{if(i===Dn)switch(n){case Dn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Ns:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Zi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ss:return e.pos[1]===t.pos[1]?4:2}else if(i===ss)switch(n){case Dn:return e.pos[1]===t.pos[1]?4:2;case Ns:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case Zi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case ss:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===Ns)switch(n){case Dn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ns:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case Zi:return e.pos[0]===t.pos[0]?4:2;case ss:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===Zi)switch(n){case Dn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ns:return e.pos[0]===t.pos[0]?4:2;case Zi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case ss:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},ooe=([e,t],n)=>[u1([e,t-1],n),u1([e+1,t],n),u1([e,t+1],n),u1([e-1,t],n)],u1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,eU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=u1([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},EF=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],y6=(e,t)=>{const n=t.get(e);return n&&eo(n)?n:null},Ba=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>r6(a,Rt(se(e[0]),-1)));return(r<-1e6||r>or||s<-1e6||s>or||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>or||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>or)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,...gh(o)}),o=o.map(([a,l])=>A(Xe(a,-1e6,1e6),Xe(l,-1e6,1e6))),{points:o,x:Xe(r,-1e6,1e6),y:Xe(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...gh(o),startIsSpecial:n,endIsSpecial:i}},Dw=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},Ow=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return wt(i,t)>Mw}):e,aoe=e=>{switch(e){case 0:return Ns;case 1:return Dn;case 2:return Zi}return ss},Zx=(e,t,n,i,r,s)=>{if(s){if(r){const o=O0(e,r,t);return $se(r,o)}return i}if(r){const o=hE(n||[0,0],r);return Math.abs(Wb(r,o)-qt)>.01?O0(e,r,t):o}return i},qx=(e,t,n,i,r)=>zse(e,t,i,i&&Co(i,Array(4).fill(Wb(i,e))),n,r),Qx=(e,t,n,i)=>Hs(Bs(e),n,t,i,!0,!0),Jx=(e,t)=>e[0]===t[0]&&e[1]===t[1],vF=(e,t=Mw)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),ee=(e,t,n=!0,i)=>{var u,d;let r=!1;const{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:c}=t;if(me(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof c<"u")){const f=ys(((u=Yo.getScene(e))==null?void 0:u.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...Jh({...e,x:t.x||e.x,y:t.y||e.y},f,{fixedSegments:o,points:s,startBinding:l,endBinding:c},{isDragging:i==null?void 0:i.isDragging})}}else typeof s<"u"&&(t={...gh(s),...t});for(const f in t){const h=t[f];if(typeof h<"u"){if(e[f]===h&&(typeof h!="object"||h===null||f==="groupIds"||f==="scale"))continue;if(f==="scale"){const m=e[f],p=h;if(m[0]===p[0]&&m[1]===p[1])continue}else if(f==="points"){const m=e[f],p=h;if(m.length===p.length){let b=!1,E=m.length;for(;--E;){const y=m[E],v=p[E];if(y[0]!==v[0]||y[1]!==v[1]){b=!0;break}}if(!b)continue}}e[f]=h,r=!0}}return r&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&Yt.delete(e),e.version++,e.versionNonce=Xo(),e.updated=qh(),n&&((d=Yo.getScene(e))==null||d.triggerUpdate())),e},Ce=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,updated:qh(),version:e.version+1,versionNonce:Xo()}},$m=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Xo(),e.updated=qh(),e),rd=e=>ke(e)||Js(e)?e.points.length<2:e.width===0&&e.height===0,E6=(e,t,n,i,r)=>{const[s,o,a,l]=io(e,r),c=Mt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=Mt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},YU=(e,t,n,i,r,s)=>{const[o,a,l,c]=_t(e,r),u=Mt({clientX:i.offsetLeft+((s==null?void 0:s.left)||0),clientY:i.offsetTop+((s==null?void 0:s.top)||0)},i),d=Mt({clientX:i.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:i.offsetTop+n-((s==null?void 0:s.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},eC=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/Ec)*Ec;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},gE=(e,t,n,i)=>{let r=n-e,s=i-t;const o=Math.round(Math.atan(s/r)/Ec)*Ec;if(o===0)s=0;else if(o===Math.PI/2)r=0;else{const a=Math.tan(o),l=-1,c=t-a*e,u=-1/a,d=-1,f=i-u*n,h=(l*f-d*c)/(a*d-u*l),m=(c*u-f*a)/(a*d-u*l);r=h-e,s=m-t}return{width:r,height:s}},wF=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},Pl=e=>e.reduce((t,n)=>t+n.version,0),loe=e=>{let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e[n].versionNonce;return t>>>0},_F=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},coe=e=>e.filter(t=>!t.isDeleted&&!rd(t)),Pt=e=>e.filter(t=>!t.isDeleted),mE=e=>!e.isDeleted,Nw=e=>Pt(e).map(t=>Ew(t.type)?{...t,lastCommittedPoint:null}:t),uoe=e=>Nw(e),TF=e=>Nw(e),SF=e=>Nw(e);function tC(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function doe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const foe=1e-6;function nC(e,t){const n=se(e[1],e[0]),i=se(t,e[0]),r=mt(n,i);return Math.abs(r)<foe}function x8(e,t){const n=se(e[1],e[0]),i=se(t,e[0]);return mt(n,i)<0}function iC(e,t){return nC(e,t[0])||nC(e,t[1])||(x8(e,t[0])?!x8(e,t[1]):x8(e,t[1]))}function hoe(e,t){return doe(tC(e),tC(t))&&iC(e,t)&&iC(t,e)}const goe=e=>e.type==="diamond"?[A(e.width/2,0),A(e.width,e.height/2),A(e.width/2,e.height),A(0,e.height/2)]:[A(0,0),A(0+e.width,0),A(0+e.width,e.height),A(0,e.height)],moe=e=>ke(e)||Js(e)?e.points:goe(e),rC=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},poe=e=>{const t=moe(e),{cx:n,cy:i}=rC(t),r=A(n,i),s=t.map(u=>q(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=rC(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},Uoe=(e,t)=>{const n=poe(e);return(Kp(n[0],Di(t[0],t[2]))||Kp(t[0],Di(n[0],n[2])))&&(Kp(n[1],Di(t[1],t[3]))||Kp(t[1],Di(n[1],n[3])))},boe=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;rF(t)&&(t=io(t,Se(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const a of e){if(s.has(a.id))continue;if(Uoe(a,r)){if(s.add(a.id),a.boundElements)for(const c of a.boundElements)s.add(c.id);fe(a)&&a.containerId&&s.add(a.containerId),Le(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>s.has(a.id))},yoe=(e,t,n)=>{const i=Se(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId),a=s&&i.get(s);a&&ee(a,{frameId:o??null},!1)}};function Pw(e,t,n){const i=_6(t,n),r=_6(e,n);return i.some(o=>r.some(a=>hoe(o,a)))}const IF=(e,t,n)=>e5($w(e,t,n,!1)).filter(i=>!Ie(i)&&!i.frameId||i.frameId===t.id),Fw=(e,t,n)=>$w([t],e,n).some(i=>i.id===t.id),Gm=(e,t,n)=>{const[i,r,s,o]=Pe(t,n),[a,l,c,u]=_t(e);return i<=a&&r<=l&&s>=c&&o>=u},Tc=(e,t,n)=>Gm([e],t,n)||Pw(e,t,n)||Fw(e,t,n),sC=(e,t,n)=>{const[i,r,s,o]=Pe(t,n);return CP(A(i,r),A(e.x,e.y),A(s,o))},Eoe=e=>{const t=new Map;for(const n of e){const i=Ie(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,to(e,i))}return t},to=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},Bw=e=>e.filter(t=>Ie(t)),zw=e=>{const t=Se(Bw(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},WU=(e,t,n,i)=>{const r=to(e,t.id),s=new Set(r),o=new Set([...IF(e,t,i),...r.filter(f=>Fw(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!Pw(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=PF(u,n);for(const[f,h]of Object.entries(d))if(h){const m=zt(e,f);if(Gm(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(fe(f)&&f.containerId))},voe=(e,t,n)=>woe(e5(e,IF(e,t,n)),t,n),woe=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>zt(n,l)));o=!Gm(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},pr=(e,t)=>e.frameId&&t.get(e.frameId)||null,_oe=(e,t)=>{const n=new Set,i=Se(e);e=e5(e);for(const o of e)Ie(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(Ie(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=zt(e,a);if(l.some(c=>Tc(c,t,i)))for(const c of l)s.push(c)}}else Tc(o,t,i)&&s.push(o);return s},j1=(e,t,n,i)=>{const r=Se(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)Ie(c)&&c.id!==n.id&&l.add(c.id);for(const c of e5(e,t)){if(Ie(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=ze(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)ee(c,{frameId:n.id},!1);return e},Jb=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=ze(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)ee(r,{frameId:null},!1)},xF=(e,t)=>{const n=to(e,t.id);return Jb(n,Se(e)),e},CF=(e,t,n,i)=>j1(xF(e,n),t,n,i.state).slice(),bh=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>zt(e,l)).forEach(l=>r.add(l));const s=new Set,o=Se(e);return r.forEach(a=>{a.frameId&&!Ie(a)&&!v6(a,o,t)&&s.add(a)}),s.size>0&&Jb(s,o),e},e5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)zt(e,o).some(a=>Ie(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},pE=(e,t,n)=>{const i=fe(e)&&Bn(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?pr(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:pr(i,t)},v6=(e,t,n,i)=>{var l;const r=(i==null?void 0:i.targetFrame)??pE(e,t,n);if(!r)return!1;const s=fe(e)&&Bn(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&s.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return Tc(s,r,t);for(const c of s.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(s.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>zt(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(Ve(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(Ie(c))return o(!1),!1;for(const c of a)if(Tc(c,r,t))return o(!0),!0;return!1},oC=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=Pw(e,t,i)||Fw(e,t,i);if(s){for(const o of e.groupIds)r==null||r.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Gm([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=v6(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r==null||r.set(a,o)}for(const a of e.groupIds)r==null||r.set(a,o);return o}return!1},AF=e=>e.name===null?nF(e)?"Frame":"AI Frame":e.name,Hw=(e,t)=>boe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),RF=e=>{const t=Se(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},Vw=e=>{const t=new Set;return e.forEach(n=>{Ie(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},$w=(e,t,n,i=!0)=>{const[r,s,o,a]=Pe(t,n);let l=e.filter(c=>{let[u,d,f,h]=io(c,n);const m=pr(c,n);if(m){const[p,b,E,y]=io(m,n);u=Math.max(p,u),d=Math.max(b,d),f=Math.min(E,f),h=Math.min(y,h)}return c.locked===!1&&c.type!=="selection"&&!Ht(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?Vw(l):l,l=l.filter(c=>{const u=pr(c,n);return u?Tc(c,u,n):!0}),l},MF=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=E6(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},zn=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),Toe=(e,t,n)=>{const i=Array.from(new Set(Ve(e,t).map(r=>n(r))));return i.length===1?i[0]:null},Ve=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Ht(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){r.push(s),i.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){const s=[];return r.forEach(o=>{Ie(o)&&to(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},kF=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Ve(e,t,{includeBoundTextElement:!0}),nt=(e,t)=>vi(t.selectedElementIds,e)?t.selectedElementIds:e,Soe=e=>{var n;const t=e.filter(ke);if(t.length===1){const i=t[0],r=((n=i.boundElements)==null?void 0:n.map(o=>o.id))??[];if(e.every(o=>o.id===i.id||r.includes(o.id)))return new ue(i)}return null},LF=(e,t,n)=>({selectedLinearElement:Soe(e),...Li({editingGroupId:n.editingGroupId,selectedElementIds:Vw(e).reduce((i,r)=>(Ht(r)||(i[r.id]=!0),i),{})},t,n,null)}),DF=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Li=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:nt({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Ve(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:nt(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),OF=(e,t)=>NF(e,t)!=null,NF=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Nu=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),PF=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...DF(s,n,e)}}}return n.selectedGroupIds},Ioe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),N0=(e,t)=>e.groupIds.includes(t),zt=(e,t)=>{const n=[];for(const i of e.values())N0(i,t)&&n.push(i);return n},xoe=(e,t)=>e.groupIds.find(n=>t[n]),Coe=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},Aoe=(e,t)=>e.filter(n=>!t[n]),t5=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=ze(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},Roe=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},FF=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},yh=e=>e.groupIds.length>0,Moe=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},BF="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Af(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Af(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+Af(e.slice(1),null,n)}function zF(e){if(e.length!==HF(e[0]))throw new Error("invalid integer part of order key: "+e)}function HF(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function d1(e){const t=HF(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function aC(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=d1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function lC(e,t){zF(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function koe(e,t){zF(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function Vd(e,t,n=BF){if(e!=null&&aC(e,n),t!=null&&aC(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=d1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Af("",c,n);if(l<t)return l;const u=koe(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=d1(e),c=e.slice(l.length),u=lC(l,n);return u??l+Af(c,null,n)}const i=d1(e),r=e.slice(i.length),s=d1(t),o=t.slice(s.length);if(i===s)return i+Af(r,o,n);const a=lC(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Af(r,null,n)}function UE(e,t,n,i=BF){if(n===0)return[];if(n===1)return[Vd(e,t,i)];if(t==null){let o=Vd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Vd(o,t,i),a.push(o);return a}if(e==null){let o=Vd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Vd(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=Vd(e,t,i);return[...UE(e,s,r,i),s,...UE(s,t,n-r-1,i)]}class Loe extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const Gw=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(bE(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&br(e[l])){const f=e[l],h=ze(f,Se(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new Loe,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},VF=e=>e.sort((t,n)=>cC(t)&&cC(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),no=(e,t)=>{try{const n=Doe(e,t),i=$F(e,n),r=e.map(s=>i.has(s)?{...s,...i.get(s)}:s);Gw(r,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[s,o]of i)ee(s,o,!1)}catch{Za(e)}return e},Za=e=>{const t=Ooe(e),n=$F(e,t);for(const[i,r]of n)ee(i,r,!1);return e},Doe=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},Ooe=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{var f;const u=e[r]?e[r].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{var f;const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),bE(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(bE(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},bE=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,$F=(e,t)=>{var i,r;const n=new Map;for(const s of t){const o=s.shift(),a=s.pop(),l=UE((i=e[o])==null?void 0:i.index,(r=e[a])==null?void 0:r.index,s.length);for(let c=0;c<s.length;c++){const u=e[s[c]];n.set(u,{index:l[c]})}}return n},cC=e=>!!e.index,uC=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Noe=Do(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&Gw(e,{shouldThrow:Oie(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Poe=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n},dC=e=>typeof e=="string",du=class du{constructor(){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",ys(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",ys(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:zt(n,t)})}static mapElementToScene(t,n){dC(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return dC(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=Poe(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const r=Ve(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&mE(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=t instanceof Array?t:Array.from(t.values()),i=[];Noe(n),this.elements=Za(n),this.elementsMap.clear(),this.elements.forEach(s=>{Ie(s)&&i.push(s),this.elementsMap.set(s.id,s),du.mapElementToScene(s,this)});const r=uC(this.elements);this.nonDeletedElements=r.elements,this.nonDeletedElementsMap=r.elementsMap,this.frames=i,this.nonDeletedFramesLikes=uC(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Xo();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),du.sceneMapById.forEach((t,n)=>{t===this&&du.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];no(i,Se([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];no(i,Se(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};F(du,"sceneMapByElement",new WeakMap),F(du,"sceneMapById",new Map);let Yo=du;const ua={version:null,points:[],zoom:null},ve=class ve{constructor(t){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");this.elementId=t.id,Qs(t.points[0],A(0,0))||(console.error("Linear element is not normalized",Error().stack),ve.normalizePoints(t)),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=me(t)&&t.elbowed}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=ve.getElement(a,r);if(!l)return!1;const[c,u,d,f]=Pe(n.selectionElement,r),m=ve.getPointsGlobalCoordinates(l,r).reduce((p,b,E)=>((b[0]>=c&&b[0]<=d&&b[1]>=u&&b[1]<=f||t.shiftKey&&(o!=null&&o.includes(E)))&&p.push(E),p),[]).filter(p=>!(me(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s,o,a){var m,p;if(!o)return null;const{elementId:l}=o,c=a.getNonDeletedElementsMap(),u=ve.getElement(l,c);if(!u||me(u)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return null;const d=me(u)?[(m=o.selectedPointsIndices)!=null&&m.includes(0)?0:void 0,(p=o.selectedPointsIndices)!=null&&p.find(b=>b>0)?u.points.length-1:void 0].filter(b=>b!==void 0):o.selectedPointsIndices,f=me(u)?o.pointerDownState.lastClickedPoint>0?u.points.length-1:0:o.pointerDownState.lastClickedPoint,h=u.points[f];if(d&&h){if(H1(t)&&d.length===1&&u.points.length>1){const E=d[0],y=u.points[E===0?1:E-1],[v,w]=ve._getShiftLockedDelta(u,c,y,A(i,r),t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize());ve.movePoints(u,[{index:E,point:A(v+y[0],w+y[1]),isDragging:E===f}])}else{const E=ve.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),y=E[0]-h[0],v=E[1]-h[1];ve.movePoints(u,d.map(w=>{const S=w===f?ve.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):A(u.points[w][0]+y,u.points[w][1]+v);return{index:w,point:S,isDragging:w===f}}))}if(ze(u,c)&&Hm(u,c,!1),_a(u,!1)){const E=[];d[0]===0&&E.push(Bs(ve.getPointGlobalCoordinates(u,u.points[0],c)));const v=d[d.length-1];v===u.points.length-1&&E.push(Bs(ve.getPointGlobalCoordinates(u,u.points[v],c))),E.length&&s(u,E)}return{...o,selectedPointsIndices:d,segmentMidPointHoveredCoords:f!==0&&f!==u.points.length-1?this.getPointGlobalCoordinates(u,h,c):null,hoverPointIndex:f===0||f===u.points.length-1?f:-1,isDragging:!0}}return null}static handlePointerUp(t,n,i,r){var h;const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:c,pointerDownState:u}=n,d=ve.getElement(a,s);if(!d)return n;const f={};if(c&&l){for(const m of l)if(m===0||m===d.points.length-1){qa(d.points,i.zoom.value)&&ve.movePoints(d,[{index:m,point:m===0?d.points[d.points.length-1]:d.points[0]}]);const p=Uu(i)?Hs(Bs(ve.getPointAtIndexGlobalCoordinates(d,m,s)),o,s,i.zoom,me(d),me(d)):null;f[m===0?"startBindingElement":"endBindingElement"]=p}}return{...n,...f,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&((h=u.prevSelectedPointsIndices)!=null&&h.includes(u.lastClickedPoint))?l&&l.filter(m=>m!==u.lastClickedPoint):l:l!=null&&l.includes(u.lastClickedPoint)?[u.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,i,r,s){if(me(t))return r>=0&&r<t.points.length?wt(n,i)*s.value<ve.POINT_HANDLE_SIZE/2:!1;let o=wt(n,i);return t.points.length>2&&t.roundness&&(o=zoe(t,i)),o*s.value<ve.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,i,r,s){let o=k0(n,i);if(t.points.length>2&&t.roundness){const a=XF(t,t.points[r]);if(a){const l=Hoe(t,t.points[r],.5);o=ve.getPointGlobalCoordinates(t,jF(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,i,r){const s=ve.getElement(t.elementId,r);if(!s)return-1;const o=ve.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(ve.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){var T;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=ve.getElement(d,l);if(!f)return u;const h=ve.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=ve.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(ee(f,{points:[...f.points,ve.createPointAt(f,l,r.x,r.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.shouldCaptureIncrement(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:Hs(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=ve.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:x,endBindingElement:I}=s;Uu(a)&&_a(f)&&qb(f,x,I,l,o)}const[b,E,y,v]=Pe(f,l),w=(b+y)/2,S=(E+v)/2,R=p>-1&&q(A(f.x+f.points[p][0],f.y+f.points[p][1]),A(w,S),f.angle),_=p>-1||t.shiftKey?t.shiftKey||(T=s.selectedPointsIndices)!=null&&T.includes(p)?Foe([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:_,pointerOffset:R?{x:r.x-R[0],y:r.y-R[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:Qs(t,n)}static handlePointerMove(t,n,i,r,s){const o=r.state;if(!o.editingLinearElement)return null;const{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,c=ve.getElement(a,s);if(!c)return o.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===l&&ve.deletePoints(c,[u.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let f;if(H1(t)&&u.length>=2){const h=u[u.length-2],[m,p]=ve._getShiftLockedDelta(c,s,h,A(n,i),t[z.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=A(m+h[0],p+h[1])}else f=ve.createPointAt(c,s,n-o.editingLinearElement.pointerOffset.x,i-o.editingLinearElement.pointerOffset.y,t[z.CTRL_OR_CMD]||me(c)?null:r.getEffectiveGridSize());return d===l?ve.movePoints(c,[{index:c.points.length-1,point:f}]):ve.addPoints(c,[{point:f}]),{...o.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=Pe(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return q(A(u+n[0],d+n[1]),A(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=Pe(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return q(A(u+c[0],d+c[1]),A(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=Pe(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return q(d?A(f+d[0],h+d[1]):A(f,h),A(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(me(t))return A(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=Pe(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=q(A(n[0],n[1]),A(l,c),-t.angle);return A(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=ve.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(wt(A(r,s),A(l[0],l[1]))*i.value<ve.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=Rn(i,r,s),[a,l,c,u]=Pe(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=q(A(o[0],o[1]),A(d,f),-t.angle);return A(h-t.x,m-t.y)}static getNormalizedPoints(t){const{points:n}=t,i=n[0][0],r=n[0][1];return{points:n.map(s=>A(s[0]-i,s[1]-r)),x:t.x+i,y:t.y+r}}static normalizePoints(t){ee(t,ve.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){gr(t.editingLinearElement,"Not currently editing a linear element");const{selectedPointsIndices:i,elementId:r}=t.editingLinearElement,s=ve.getElement(r,n);gr(s,"The linear element does not exist in the provided Scene"),gr(i!=null,"There are no selected points to duplicate");const{points:o}=s,a=[];let l=!1,c=-1;const u=o.reduce((d,f,h)=>{if(++c,d.push(f),i.includes(h)){const p=o[h+1];p||(l=!0),d.push(p?A((f[0]+p[0])/2,(f[1]+p[1])/2):A(f[0],f[1])),a.push(c+1),++c}return d},[]);if(ee(s,{points:u}),l){const d=s.points[s.points.length-1];ve.movePoints(s,[{index:s.points.length-1,point:A(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let i=0,r=0;if(n.includes(0)){const a=t.points.find((l,c)=>!n.includes(c));a&&(i=a[0],r=a[1])}const o=t.points.reduce((a,l,c)=>(n.includes(c)||a.push(a.length?A(l[0]-i,l[1]-r):A(0,0)),a),[]);ve._updatePoints(t,o,i,r)}static addPoints(t,n){const s=[...t.points,...n.map(o=>o.point)];ve._updatePoints(t,s,0,0)}static movePoints(t,n,i,r){var d,f,h;const{points:s}=t,[o,a]=((d=n.find(({index:m})=>m===0))==null?void 0:d.point)??A(0,0),[l,c]=A(o-s[0][0],a-s[0][1]),u=me(t)?[((f=n.find(m=>m.index===0))==null?void 0:f.point)??s[0],((h=n.find(m=>m.index===s.length-1))==null?void 0:h.point)??s[s.length-1]]:s.map((m,p)=>{var E;const b=((E=n.find(y=>y.index===p))==null?void 0:E.point)??m;return A(b[0]-l,b[1]-c)});ve._updatePoints(t,u,l,c,i,{isDragging:n.reduce((m,p)=>m||p.isDragging===!0,!1),sceneElementsMap:r})}static shouldAddMidpoint(t,n,i,r){const s=ve.getElement(t.elementId,r);if(s&&me(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=wt(A(a.x,a.y),A(n.x,n.y));return!(!i.editingLinearElement&&l<tu/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=ve.getElement(t.elementId,s);if(!o)return;const{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},c=ve.createPointAt(o,s,n.x,n.y,r&&!me(o)?i.getEffectiveGridSize():null),u=[...o.points.slice(0,a.index),c,...o.points.slice(a.index)];return ee(o,{points:u}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,i,r,s,o){if(me(t)){const a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&f6(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&f6(s.endBinding)?s.endBinding:null),a.points=Array.from(n),!(o!=null&&o.sceneElementsMap)||Yo.getScene(t)?ee(t,a,!0,{isDragging:o==null?void 0:o.isDragging}):Object.assign(t,{...a,angle:0,...Jh(t,o.sceneElementsMap,a,{isDragging:o==null?void 0:o.isDragging})}),$m(t)}else{const a=AC(t,n),l=AC(t,t.points),c=(a[0]+a[2])/2,u=(a[1]+a[3])/2,d=(l[0]+l[2])/2,f=(l[1]+l[3])/2,h=d-c,m=f-u,p=q(A(i,r),A(h,m),t.angle);ee(t,{...s,points:n,x:t.x+p[0],y:t.y+p[1]})}}static _getShiftLockedDelta(t,n,i,r,s){const o=ve.getPointGlobalCoordinates(t,i,n);if(me(t))return[r[0]-o[0],r[1]-o[1]];const[a,l]=Rn(r[0],r[1],s),{width:c,height:u}=gE(o[0],o[1],a,l);return q(A(c,u),A(0,0),-t.angle)}static moveFixedSegment(t,n,i,r,s){const o=ve.getElement(t.elementId,s);if(!o||!me(o))return t;if(n&&n>0&&n<o.points.length){const a=Oo(mh(se(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((f,h)=>(f[h.index]=h,f),{});l[n]={index:n,start:A(a?o.points[n-1][0]:i-o.x,a?r-o.y:o.points[n-1][1]),end:A(a?o.points[n][0]:i-o.x,a?r-o.y:o.points[n][1])};const c=Object.values(l).sort((f,h)=>f.index-h.index),u=c.map(f=>f.index).reduce((f,h)=>h<n?f+1:f,0);ee(o,{fixedSegments:c});const d=A(o.x+(o.fixedSegments[u].start[0]+o.fixedSegments[u].end[0])/2,o.y+(o.fixedSegments[u].start[1]+o.fixedSegments[u].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[u].index,value:d}}}}return t}static deleteFixedSegment(t,n){var i;ee(t,{fixedSegments:(i=t.fixedSegments)==null?void 0:i.filter(r=>r.index!==n)}),ee(t,{},!0)}};F(ve,"POINT_HANDLE_SIZE",10),F(ve,"getEditorMidPoints",(t,n,i)=>{const r=ze(t,n);return!me(t)&&!i.editingLinearElement&&t.points.length>2&&!r?[]:(ua.version===t.version&&ua.zoom===i.zoom.value||ve.updateEditorMidPointsCache(t,n,i),ua.points)}),F(ve,"updateEditorMidPointsCache",(t,n,i)=>{const r=ve.getPointsGlobalCoordinates(t,n);let s=0;const o=[];for(;s<r.length-1;){if(ve.isSegmentTooShort(t,t.points[s],t.points[s+1],s,i.zoom)){o.push(null),s++;continue}const a=ve.getSegmentMidPoint(t,r[s],r[s+1],s+1,n);o.push(a),s++}ua.points=o,ua.version=t.version,ua.zoom=i.zoom.value}),F(ve,"getSegmentMidpointHitCoords",(t,n,i,r)=>{const{elementId:s}=t,o=ve.getElement(s,r);if(!o)return null;const a=ve.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!me(o)&&a>=0||ve.getPointsGlobalCoordinates(o,r).length>=3&&!i.editingLinearElement&&!me(o))return null;const c=(ve.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&wt(A(u[0],u[1]),A(n.x,n.y))<=c)return u;let d=0;const f=ve.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&wt(f[d],A(n.x,n.y))<=c)return f[d];d++}return null}),F(ve,"getBoundTextElementPosition",(t,n,i)=>{const r=ve.getPointsGlobalCoordinates(t,i);r.length<2&&ee(n,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=ve.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1;let l=ua.points[a];t.points.length===2&&(l=k0(r[0],r[1])),(!l||ua.version!==t.version)&&(l=ve.getSegmentMidPoint(t,r[a],r[a+1],a+1,i)),s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}}),F(ve,"getMinMaxXYWithBoundText",(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=ve.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=A(c,u),b=q(A(s,o),p,t.angle),E=q(A(a,o),p,t.angle),y=q(A(d,f),p,-t.angle),v=q(A(h,f),p,-t.angle),w=q(A(d,m),p,-t.angle),S=q(A(h,m),p,-t.angle);return b[0]<E[0]&&b[1]>=E[1]?(s=Math.min(s,w[0]),a=Math.max(a,Math.max(v[0],S[0])),o=Math.min(o,y[1]),l=Math.max(l,S[1])):b[0]>=E[0]&&b[1]>E[1]?(s=Math.min(s,S[0]),a=Math.max(a,Math.max(y[0],v[0])),o=Math.min(o,w[1]),l=Math.max(l,v[1])):b[0]>=E[0]?(s=Math.min(s,v[0]),a=Math.max(a,w[0]),o=Math.min(o,S[1]),l=Math.max(l,y[1])):b[1]<=E[1]&&(s=Math.min(s,Math.min(v[0],y[0])),a=Math.max(a,S[0]),o=Math.min(o,v[1]),l=Math.max(l,w[1])),[s,o,a,l,c,u]}),F(ve,"getElementAbsoluteCoords",(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!Yt.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((b,[E,y])=>(b.minY=Math.min(b.minY,y),b.minX=Math.min(b.minX,E),b.maxX=Math.max(b.maxX,E),b.maxY=Math.max(b.maxY,y),b),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=Yt.generateElementShape(t,null),h=zc(f[0]),[m,p,b,E]=i5(h);s=m+t.x,o=p+t.y,a=b+t.x,l=E+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=ze(t,n);return d&&(r=ve.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r});let ue=ve;const Foe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null},Ds=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return aB(e);case"arrow":case"line":{const i=((n=Yt.get(e))==null?void 0:n[0])??Yt.generateElementShape(e,null)[0],[,,,,r,s]=Pe(e,t);return h6(e)?Rae(e,i,A(e.x,e.y),e.angle,A(r,s)):xae(i,A(e.x,e.y),e.angle,A(r,s))}case"ellipse":return Iae(e);case"freedraw":{const[,,,,i,r]=Pe(e,t);return Aae(e,A(i,r),h6(e))}}},GF=(e,t)=>{const n=ze(e,t);return n?e.type==="arrow"?Ds({...n,...ue.getBoundTextElementPosition(e,n,t)},t):Ds(n,t):null},XF=(e,t)=>{const n=Yt.generateElementShape(e,null);if(!n)return null;const i=zc(n[0]);let r=A(0,0),s=0,o=1/0,a=null;for(;s<i.length;){const{op:l,data:c}=i[s];if(l==="move"&&(gr(pu(c),"The returned ops is not compatible with a point"),r=c),l==="bcurveTo"){const u=r,d=A(c[0],c[1]),f=A(c[2],c[3]),h=A(c[4],c[5]),m=wt(h,t);m<o&&(o=m,a=[u,d,f,h]),r=h}s++}return a},jF=(e,t,n,i,r)=>{const s=(l,c)=>Math.pow(1-l,3)*i[c]+3*l*Math.pow(1-l,2)*n[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),o=s(r,0),a=s(r,1);return A(o,a)},Boe=(e,t)=>{const n=XF(e,t);if(!n)return[];const i=[];let r=1;for(;r>0;){const s=jF(n[0],n[1],n[2],n[3],r);i.push(A(s[0],s[1])),r-=.05}return i.length&&Qs(i.at(-1),t)&&i.push(A(t[0],t[1])),i},YF=(e,t)=>{const n=[];n[0]=0;const i=Boe(e,t);let r=0,s=0;for(;r<i.length-1;){const o=wt(i[r],i[r+1]);s+=o,n.push(s),r++}return n},zoe=(e,t)=>YF(e,t).at(-1),Hoe=(e,t,n)=>{const i=YF(e,t),r=i.length-1,s=i.at(-1),o=n*s;let a=0,l=r,c=0;for(;a<l;)c=Math.floor(a+(l-a)/2),i[c]<o?a=c+1:l=c;return i[c]>o&&c--,i[c]===o?c/r:1-(c+(o-i[c])/(i[c+1]-i[c]))/r},Co=(e,t)=>{const n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},i=fi(e),[r,s]=q(A(n.minX,n.minY),i,e.angle),[o,a]=q(A(n.maxX,n.minY),i,e.angle),[l,c]=q(A(n.maxX,n.maxY),i,e.angle),[u,d]=q(A(n.minX,n.maxY),i,e.angle),f=[Math.min(r,o,l,u),Math.min(s,a,c,d),Math.max(r,o,l,u),Math.max(s,a,c,d)];if(t){const[h,m,p,b]=t;return[f[0]-b,f[1]-h,f[2]+m,f[3]+p]}return f},Eh=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],js=(e,t)=>{var n,i,r,s;if(((n=t.roundness)==null?void 0:n.type)===Nn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===Nn.LEGACY)return e*h8;if(((r=t.roundness)==null?void 0:r.type)===Nn.ADAPTIVE_RADIUS){const o=((s=t.roundness)==null?void 0:s.value)??iie,a=o/h8;return e<=a?e*h8:o}return 0},qa=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return wt(n,i)<=zU/t}return!1},vh=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",yE=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",fC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",hC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",EE=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",gC=e=>e==="arrow",w6=e=>e==="arrow";function mC(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function Voe(e){return[-e[0],-e[1]]}function As(e,t){return[e[0]+t[0],e[1]+t[1]]}function Zr(e,t){return[e[0]-t[0],e[1]-t[1]]}function Is(e,t){return[e[0]*t,e[1]*t]}function $oe(e,t){return[e[0]/t,e[1]/t]}function Fg(e){return[e[1],-e[0]]}function pC(e,t){return e[0]*t[0]+e[1]*t[1]}function Goe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Xoe(e){return Math.hypot(e[0],e[1])}function joe(e){return e[0]*e[0]+e[1]*e[1]}function UC(e,t){return joe(Zr(e,t))}function WF(e){return $oe(e,Xoe(e))}function Yoe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Bg(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function vE(e,t,n){return As(e,Is(Zr(t,e),n))}function bC(e,t,n){return As(e,Is(t,n))}var{min:$d,PI:Woe}=Math,yC=.275,zg=Woe+1e-4;function Koe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=$=>$,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=$=>$*(2-$)}=a,{cap:f=!0,easing:h=$=>--$*$*$+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,b=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,E=Math.pow(n*i,2),y=[],v=[],w=e.slice(0,10).reduce(($,j)=>{let X=j.pressure;if(s){let Z=$d(1,j.distance/n),ge=$d(1,1-Z);X=$d(1,$+(ge-$)*(Z*yC))}return($+X)/2},e[0].pressure),S=mC(n,r,e[e.length-1].pressure,o),R,_=e[0].vector,T=e[0].point,x=T,I=T,M=x,D=!1;for(let $=0;$<e.length;$++){let{pressure:j}=e[$],{point:X,vector:Z,distance:ge,runningLength:ce}=e[$];if($<e.length-1&&m-ce<3)continue;if(r){if(s){let Ae=$d(1,ge/n),Ge=$d(1,1-Ae);j=$d(1,w+(Ge-w)*(Ae*yC))}S=mC(n,r,j,o)}else S=n/2;R===void 0&&(R=S);let le=ce<p?d(ce/p):1,Be=m-ce<b?h((m-ce)/b):1;S=Math.max(.01,S*Math.min(le,Be));let $e=($<e.length-1?e[$+1]:e[$]).vector,Tt=$<e.length-1?pC(Z,$e):1,at=pC(Z,_)<0&&!D,$t=Tt!==null&&Tt<0;if(at||$t){let Ae=Is(Fg(_),S);for(let Ge=1/13,Gt=0;Gt<=1;Gt+=Ge)I=Bg(Zr(X,Ae),X,zg*Gt),y.push(I),M=Bg(As(X,Ae),X,zg*-Gt),v.push(M);T=I,x=M,$t&&(D=!0);continue}if(D=!1,$===e.length-1){let Ae=Is(Fg(Z),S);y.push(Zr(X,Ae)),v.push(As(X,Ae));continue}let tn=Is(Fg(vE($e,Z,Tt)),S);I=Zr(X,tn),($<=1||UC(T,I)>E)&&(y.push(I),T=I),M=As(X,tn),($<=1||UC(x,M)>E)&&(v.push(M),x=M),w=j,_=Z}let L=e[0].point.slice(0,2),G=e.length>1?e[e.length-1].point.slice(0,2):As(e[0].point,[1,1]),H=[],V=[];if(e.length===1){if(!(p||b)||c){let $=bC(L,WF(Fg(Zr(L,G))),-(R||S)),j=[];for(let X=1/13,Z=X;Z<=1;Z+=X)j.push(Bg($,L,zg*2*Z));return j}}else{if(!(p||b&&e.length===1))if(u)for(let j=1/13,X=j;X<=1;X+=j){let Z=Bg(v[0],L,zg*X);H.push(Z)}else{let j=Zr(y[0],v[0]),X=Is(j,.5),Z=Is(j,.51);H.push(Zr(L,X),Zr(L,Z),As(L,Z),As(L,X))}let $=Fg(Voe(e[e.length-1].vector));if(b||p&&e.length===1)V.push(G);else if(f){let j=bC(G,$,S);for(let X=1/29,Z=X;Z<1;Z+=X)V.push(Bg(j,G,zg*3*Z))}else V.push(As(G,Is($,S)),As(G,Is($,S*.99)),Zr(G,Is($,S*.99)),Zr(G,Is($,S)))}return y.concat(V,v.reverse(),H)}function Zoe(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(vE(a[0],h,m/4))}a.length===1&&(a=[...a,[...As(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):vE(d.point,a[h],o);if(Goe(d.point,m))continue;let p=Yoe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:WF(Zr(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function qoe(e,t={}){return Koe(Zoe(e,t),t)}const ei=10,Qoe=(e,t,n,i,r,s,o)=>{var I,M;const{width:a,height:l}=Qa(e),c=n/a,u=i/l,d=(((I=e.crop)==null?void 0:I.x)??0)/c,f=(((M=e.crop)==null?void 0:M.y)??0)/u,h=q(A(r,s),fi(e),-e.angle);r=h[0],s=h[1];let m=e.width,p=e.height,b=e.crop??{x:0,y:0,width:n,height:i,naturalWidth:n,naturalHeight:i};const E=b.height,y=b.width,v=e.scale[0]===-1,w=e.scale[1]===-1;let S=s-e.y,R=r-e.x;t.includes("n")&&(p=Xe(e.height-S,ei,w?l-f:e.height+f)),t.includes("s")&&(S=s-e.y-e.height,p=Xe(e.height+S,ei,w?e.height+f:l-f)),t.includes("e")&&(R=r-e.x-e.width,m=Xe(e.width+R,ei,v?e.width+d:a-d)),t.includes("w")&&(m=Xe(e.width-R,ei,v?a-d:e.width+d));const _=D=>{D.height=p*u,D.width=m*c};_(b);const T=(D,L)=>{_(L),D.includes("n")&&(w||(L.y+=E-L.height)),D.includes("s")&&w&&(L.y+=E-L.height),D.includes("e")&&v&&(L.x+=y-L.width),D.includes("w")&&(v||(L.x+=y-L.width))};switch(t){case"n":{if(o){const D=d+e.width/2,L=a-d-e.width/2,G=Math.min(D,L)*2;m=Xe(p*o,ei,G),p=m/o}T(t,b),o&&(b.x+=(y-b.width)/2);break}case"s":{if(o){const D=d+e.width/2,L=a-d-e.width/2,G=Math.min(D,L)*2;m=Xe(p*o,ei,G),p=m/o}T(t,b),o&&(b.x+=(y-b.width)/2);break}case"w":{if(o){const D=f+e.height/2,L=l-f-e.height/2,G=Math.min(D,L)*2;p=Xe(m/o,ei,G),m=p*o}T(t,b),o&&(b.y+=(E-b.height)/2);break}case"e":{if(o){const D=f+e.height/2,L=l-f-e.height/2,G=Math.min(D,L)*2;p=Xe(m/o,ei,G),m=p*o}T(t,b),o&&(b.y+=(E-b.height)/2);break}case"ne":{if(o)if(R>-S){const D=w?l-f:f+e.height;p=Xe(m/o,ei,D),m=p*o}else{const D=v?d+e.width:a-d;m=Xe(p*o,ei,D),p=m/o}T(t,b);break}case"nw":{if(o)if(R<S){const D=w?l-f:f+e.height;p=Xe(m/o,ei,D),m=p*o}else{const D=v?a-d:d+e.width;m=Xe(p*o,ei,D),p=m/o}T(t,b);break}case"se":{if(o)if(R>S){const D=w?f+e.height:l-f;p=Xe(m/o,ei,D),m=p*o}else{const D=v?d+e.width:a-d;m=Xe(p*o,ei,D),p=m/o}T(t,b);break}case"sw":{if(o)if(-R>S){const D=w?f+e.height:l-f;p=Xe(m/o,ei,D),m=p*o}else{const D=v?a-d:d+e.width;m=Xe(p*o,ei,D),p=m/o}T(t,b);break}}const x=Joe(e,t,m,p,!!o);return Cx(b.width,b.naturalWidth)&&Cx(b.height,b.naturalHeight)&&(b=null),{x:x[0],y:x[1],width:m,height:p,crop:b}},Joe=(e,t,n,i,r)=>{const[s,o,a,l]=rc(e,e.width,e.height,!0),c=A(s,o),u=A(a,l),d=k0(c,u),[f,h,m,p]=rc(e,n,i,!0),b=m-f,E=p-h;let y=[...c];if(["n","w","nw"].includes(t)&&(y=[u[0]-Math.abs(b),u[1]-Math.abs(E)]),t==="ne"){const T=[c[0],u[1]];y=[T[0],T[1]-Math.abs(E)]}if(t==="sw"){const T=[u[0],c[1]];y=[T[0]-Math.abs(b),T[1]]}r&&(["s","n"].includes(t)&&(y[0]=d[0]-b/2),["e","w"].includes(t)&&(y[1]=d[1]-E/2));const v=e.angle,w=q(y,d,v),S=[y[0]+Math.abs(b)/2,y[1]+Math.abs(E)/2],R=q(S,d,v);y=q(w,R,-v);const _=[...y];return _[0]+=e.x-f,_[1]+=e.y-h,_},eae=(e,t)=>{if(e.crop){const{width:n,height:i}=Qa(e),[r,s,o,a,l,c]=Pe(e,t),u=se(q(A(r,s),A(l,c),e.angle)),d=se(q(A(o,s),A(l,c),e.angle)),f=ci(i6(d,u)),h=se(q(A(r,a),A(l,c),e.angle)),m=i6(h,u),p=ci(m),{cropX:b,cropY:E}=tae(e.crop,e.scale),y=Vl(Vl(u,Rt(f,-b*n/e.crop.naturalWidth)),Rt(p,-E*i/e.crop.naturalHeight)),v=De(Vl(Vl(y,Rt(f,n/2)),Rt(p,i/2))),w=q(De(y),v,-e.angle);return{...e,x:w[0],y:w[1],width:n,height:i,crop:null}}return e},Qa=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},tae=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},nae=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=Qa(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},KF="invert(100%) hue-rotate(180deg) saturate(1.25)",ZF=(e,t)=>In(e)&&!t.imageCache.has(e.fileId),qF=(e,t,n)=>{var i;return n.theme===xe.DARK&&In(e)&&!ZF(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==Ee.svg},n5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},QF=(e,t,n,i,r=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=nie/100),s},iae=(e,t,n)=>{const s=n5(e),[o,a,l,c]=Pe(e,t),u=ke(e)||Js(e)?Ni(o,l):e.width,d=ke(e)||Js(e)?Ni(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},JF=(e,t,n,i,r)=>{var E,y;const s=document.createElement("canvas"),o=s.getContext("2d"),a=n5(e),{width:l,height:c,scale:u}=iae(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(ke(e)||Js(e)){const[v,w]=Pe(e,t);d=e.x>v?Ni(e.x,v)*window.devicePixelRatio*u:0,f=e.y>w?Ni(e.y,w)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=Bc.canvas(s);qF(e,i,r)&&(o.filter=KF),KU(e,h,o,i),o.restore();const m=ze(e,t),p=document.createElement("canvas"),b=p.getContext("2d");if(Le(e)&&m){const[v,w,S,R]=Pe(e,t),_=Math.max(Ni(v,S),Ni(w,R));p.width=_*window.devicePixelRatio*u+a*u*10,p.height=_*window.devicePixelRatio*u+a*u*10,b.translate(p.width/2,p.height/2),b.rotate(e.angle),b.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,T,x]=Pe(m,t);b.rotate(-e.angle);const I=(p.width-s.width)/2,M=(p.height-s.height)/2,D=p.width/2-(T-v)*window.devicePixelRatio*u-I-a*u,L=p.height/2-(x-w)*window.devicePixelRatio*u-M-a*u;b.translate(-D,-L),b.clearRect(-(m.width/2+On)*window.devicePixelRatio*u,-(m.height/2+On)*window.devicePixelRatio*u,(m.width+On*2)*window.devicePixelRatio*u,(m.height+On*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((E=ze(e,t))==null?void 0:E.version)||null,containingFrameOpacity:((y=pr(e,t))==null?void 0:y.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:ot(e)?e.crop:null}},rae=14,eB=document.createElement("img");eB.src=`data:${Ee.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const tB=document.createElement("img");tB.src=`data:${Ee.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const sae=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?tB:eB,e.width/2-i/2,e.height/2-i/2,i,i)},KU=(e,t,n,i,r)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Yt.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Yt.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=lae(e),a=Yt.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=In(e)?(s=i.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,js(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else sae(e,n);break}default:if(fe(e)){const o=OP(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=Ct(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=Bm(e.fontSize,e.lineHeight),d=xP(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},wE=new WeakMap,EC=(e,t,n,i)=>{var d;const r=n?i.zoom:{value:1},s=wE.get(e),o=s&&s.zoomValue!==r.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=ze(e,t),l=(a==null?void 0:a.version)||null,c=ot(e)?e.crop:null,u=((d=pr(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||Le(e)&&a&&e.angle!==s.angle){const f=JF(e,t,r,n,i);return f?(wE.set(e,f),f):null}return s},C8=(e,t,n,i,r)=>{const s=e.element,o=n5(s),a=e.scale,[l,c,u,d]=Pe(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=ze(s,r);if(Le(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,b=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-b/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!ZF(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},oae=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},ru=(e,t,n,i,r,s,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=QF(e,pr(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?IP:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=on.strokeWidth/o.zoom.value,r.strokeStyle=on.strokeColor,XU(e)&&(r.strokeStyle=o.theme===xe.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,on.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if(Yt.generateElementShape(e,null),s.isExporting){const[c,u,d,f]=Pe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),b=(f-u)/2-(e.y-u);r.save(),r.translate(h,m),r.rotate(e.angle),r.translate(-p,-b),KU(e,i,r,s),r.restore()}else{const c=EC(e,n,s,o);if(!c)return;C8(c,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Yt.generateElementShape(e,s),s.isExporting){const[c,u,d,f]=Pe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),b=(f-u)/2-(e.y-u);if(fe(e)){const y=Bn(e,t);if(Le(y)){const v=ue.getBoundTextElementPosition(y,e,t);p=(d-c)/2-(v.x-c),b=(f-u)/2-(v.y-u)}}r.save(),r.translate(h,m),qF(e,s,o)&&(r.filter="none");const E=ze(e,t);if(Le(e)&&E){const y=document.createElement("canvas"),v=y.getContext("2d"),w=Math.max(Ni(c,d),Ni(u,f)),S=n5(e);y.width=w*o.exportScale+S*10*o.exportScale,y.height=w*o.exportScale+S*10*o.exportScale,v.translate(y.width/2,y.height/2),v.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),b=e.height/2-(e.y-u),v.rotate(e.angle);const R=Bc.canvas(y);v.translate(-p,-b),KU(e,R,v,s),v.translate(p,b),v.rotate(-e.angle);const[,,,,_,T]=Pe(E,t),x=(c+d)/2-_,I=(u+f)/2-T;v.translate(-x,-I),v.clearRect(-E.width/2,-E.height/2,E.width,E.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(y,-y.width/2,-y.height/2,y.width,y.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-p,-b),KU(e,i,r,s);r.restore()}else{const c=EC(e,n,s,o);if(!c)return;const u=r.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||lie(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&ot(c.element)&&c.element.crop!==null){r.save(),r.globalAlpha=.1;const d=JF(eae(c.element,t),n,o.zoom,s,o);d&&C8(d,r,s,o,n),r.restore()}C8(c,r,s,o,n),r.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},nB=new WeakMap([]);function aae(e){const t=iB(e),n=new Path2D(t);return nB.set(e,n),n}function lae(e){return nB.get(e)}function iB(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return uae(qoe(t,n))}function vC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const cae=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function uae(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,vC(i,s[0]),"L",s[0],"Z"):n.push(i,vC(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(cae,"$1")}const dae=e=>[8,8+e],rB=e=>[1.5,6+e];function fae(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&EE(e.type)||ke(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Cr=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?dae(e.strokeWidth):e.strokeStyle==="dotted"?rB(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:fae(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<_P.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=zs(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return qa(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},wC=(e,t,n)=>rs(e)&&(t||lr(e)&&(n==null?void 0:n.get(e.id))!==!0)&&zs(e.backgroundColor)&&zs(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Rl(e)?{...e,strokeColor:zs(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:zs(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,_C=(e,t,n,i,r,s,o)=>{const a=CC(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,b]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,b],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=rB(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(CC(e,t,n,"crowfoot_one"),s):[]]}}},hae=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=js(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Cr(wC(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,Cr(wC(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=sB(e);if(e.roundness){const m=js(Math.abs(o-f),e),p=js(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,Cr(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],Cr(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Cr(e));case"line":case"arrow":{let s;const o=Cr(e),a=e.points.length?e.points:[A(0,0)];if(me(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(gae(a,16),Cr(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=_C(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=_C(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(aae(e),qa(e.points)){const o=eF(e.points,.75);s=t.curve(o,{...Cr(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return wc(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},gae=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=Ta(a,s),c=Ta(o,a),u=Math.min(t,wt(e[r],o)/2,wt(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},Mi=class Mi{};F(Mi,"rg",new D0),F(Mi,"cache",new WeakMap),F(Mi,"get",t=>Mi.cache.get(t)),F(Mi,"set",(t,n)=>Mi.cache.set(t,n)),F(Mi,"delete",t=>Mi.cache.delete(t)),F(Mi,"destroy",()=>{Mi.cache=new WeakMap}),F(Mi,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:Mi.get(t);if(i!==void 0)return i;wE.delete(t);const r=hae(t,Mi.rg,n||{isExporting:!1,canvasBackgroundColor:je.white,embedsValidationStatus:null});return Mi.cache.set(t,r),r});let Yt=Mi;const Lf=class Lf{static getBounds(t,n){const i=Lf.boundsCache.get(t);if(i!=null&&i.version&&i.version===t.version&&!Ht(t))return i.bounds;const r=Lf.calculateBounds(t,n);return Lf.boundsCache.set(t,{version:t.version,bounds:r}),r}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=Pe(t,n);if(Js(t)){const[u,d,f,h]=Xw(t.points.map(([m,p])=>q(A(m,p),A(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(ke(t))i=wae(t,l,c,n);else if(t.type==="diamond"){const[u,d]=q(A(l,s),A(l,c),t.angle),[f,h]=q(A(l,a),A(l,c),t.angle),[m,p]=q(A(r,c),A(l,c),t.angle),[b,E]=q(A(o,c),A(l,c),t.angle),y=Math.min(u,f,m,b),v=Math.min(d,h,p,E),w=Math.max(u,f,m,b),S=Math.max(d,h,p,E);i=[y,v,w,S]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=q(A(r,s),A(l,c),t.angle),[f,h]=q(A(r,a),A(l,c),t.angle),[m,p]=q(A(o,a),A(l,c),t.angle),[b,E]=q(A(o,s),A(l,c),t.angle),y=Math.min(u,f,m,b),v=Math.min(d,h,p,E),w=Math.max(u,f,m,b),S=Math.max(d,h,p,E);i=[y,v,w,S]}return i}};F(Lf,"boundsCache",new WeakMap);let _E=Lf;const Pe=(e,t,n=!1)=>{if(Js(e))return bae(e);if(ke(e))return ue.getElementAbsoluteCoords(e,t,n);if(fe(e)){const i=t?Bn(e,t):null;if(Le(i)){const{x:r,y:s}=ue.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},_6=(e,t)=>{const n=Ds(e,t),[i,r,s,o,a,l]=Pe(e,t),c=A(a,l);if(n.type==="polycurve"){const E=n.data.map(w=>Fm(w,10)).flat();let y=0;const v=[];for(;y<E.length-1;)v.push(_e(A(E[y][0],E[y][1]),A(E[y+1][0],E[y+1][1]))),y++;return v}else{if(n.type==="polyline")return n.data;if(mae(e)){const[b,E]=vw(e),y=E.map(w=>SC(w,c,e.angle)).flat();return[...TC(b,c,e.angle),...y]}else if(e.type==="diamond"){const[b,E]=ww(e),y=E.map(w=>SC(w,c,e.angle)).flat();return[...TC(b,c,e.angle),...y]}else if(n.type==="polygon"){if(fe(e)){const y=Bn(e,t);if(y&&ke(y))return[_e(A(i,r),A(s,r)),_e(A(s,r),A(s,o)),_e(A(s,o),A(i,o)),_e(A(i,o),A(i,r))]}const b=n.data,E=[];for(let y=0;y<b.length-1;y++)E.push(_e(b[y],b[y+1]));return E}else if(n.type==="ellipse")return pae(e)}const[u,d,f,h,,,m,p]=[[i,r],[s,r],[i,o],[s,o],[a,r],[a,o],[i,l],[s,l]].map(b=>q(b,c,e.angle));return[_e(u,d),_e(f,h),_e(u,f),_e(d,h),_e(u,p),_e(f,p),_e(d,m),_e(h,m)]},mae=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),TC=(e,t,n)=>e.map(i=>_e(q(i[0],t,n),q(i[1],t,n))),SC=(e,t,n)=>{const i=Fm(e,10);let r=0;const s=[];for(;r<i.length-1;)s.push(_e(q(A(i[r][0],i[r][1]),t,n),q(A(i[r+1][0],i[r+1][1]),t,n))),r++;return s},pae=e=>{const t=A(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,r=[],s=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);s.push(q(A(u,d),t,e.angle))}for(let l=0;l<s.length-1;l++)r.push(_e(s[l],s[l+1]));return r.push(_e(s[s.length-1],s[0])),r},sB=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},IC=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},xC=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=IC(m,e,t,n,i)),p>=0&&p<=1&&(h=IC(p,e,t,n,i)),[f,h]},Uae=(e,t,n,i)=>{const r=xC(e[0],t[0],n[0],i[0]),s=xC(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},i5=(e,t)=>{let n=A(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=hw(c);gr(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=A(c[0],c[1]),d=A(c[2],c[3]),f=A(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,b=t?t(n):n;n=f;const[E,y,v,w]=Uae(b,h,m,p);a.minX=Math.min(a.minX,E),a.minY=Math.min(a.minY,y),a.maxX=Math.max(a.maxX,v),a.maxY=Math.max(a.maxY,w)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},Xw=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},bae=e=>{const[t,n,i,r]=Xw(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},yae=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},Eae=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},CC=(e,t,n,i)=>{if(t.length<1)return null;const r=zc(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;gr(o.length===6,"Op data length is not 6");const a=A(o[4],o[5]),l=A(o[2],o[3]),c=A(o[0],o[1]),u=r[s-1];let d=A(0,0);if(u.op==="move"){const H=hw(u.data);gr(H!=null,"Op data is not a point"),d=H}else u.op==="bcurveTo"&&(d=A(u.data[4],u.data[5]));const f=(H,V)=>Math.pow(1-H,3)*a[V]+3*H*Math.pow(1-H,2)*l[V]+3*Math.pow(H,2)*(1-H)*c[V]+d[V]*Math.pow(H,3),[h,m]=n==="start"?d:a,[p,b]=[f(.3,0),f(.3,1)],E=Math.hypot(h-p,m-b),y=(h-p)/E,v=(m-b)/E,w=yae(i);let S=0;{const[H,V]=n==="end"?e.points[e.points.length-1]:e.points[0],[$,j]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];S=Math.hypot(H-$,V-j)}const _=Math.min(w,S*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-y*_,x=m-v*_;if(i==="dot"||i==="circle"||i==="circle_outline"){const H=Math.hypot(x-m,T-h)+e.strokeWidth-2;return[h,m,H]}const I=Eae(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[H,V]=q(A(h,m),A(T,x),Du(-I)),[$,j]=q(A(h,m),A(T,x),Du(I));return[T,x,H,V,$,j]}const[M,D]=q(A(T,x),A(h,m),-I*Math.PI/180),[L,G]=q(A(T,x),A(h,m),Du(I));if(i==="diamond"||i==="diamond_outline"){let H,V;if(n==="start"){const[$,j]=e.points.length>1?e.points[1]:[0,0];[H,V]=q(A(h+_*2,m),A(h,m),Math.atan2(j-m,$-h))}else{const[$,j]=e.points.length>1?e.points[e.points.length-2]:[0,0];[H,V]=q(A(h-_*2,m),A(h,m),Math.atan2(m-j,h-$))}return[h,m,M,D,H,V,L,G]}return[h,m,M,D,L,G]},vae=e=>{const t=Bc.generator(),n=Cr(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},wae=(e,t,n,i)=>{var d;const r=ze(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=q(A(e.x+f,e.y+h),A(t,n),e.angle);let b=[m,p,m,p];if(r){const E=ue.getMinMaxXYWithBoundText(e,i,[m,p,m,p],r);b=[E[0],E[1],E[2],E[3]]}return b}const o=((d=Yt.get(e))==null?void 0:d[0])??vae(e),a=zc(o),c=i5(a,([f,h])=>q(A(e.x+f,e.y+h),A(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const f=ue.getMinMaxXYWithBoundText(e,i,u,r);u=[f[0],f[1],f[2],f[3]]}return u},io=(e,t)=>_E.getBounds(e,t),_t=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||Se(e);return e.forEach(a=>{const[l,c,u,d]=io(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},jw=(e,t)=>{const[n,i,r,s]=_t(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},rc=(e,t,n,i)=>{if(!(ke(e)||Js(e)))return[e.x,e.y,e.x+t,e.y+n];const r=a6(0,t,a6(1,n,e.points,i),i);let s;if(Js(e))s=Xw(r);else{const u=Bc.generator(),d=e.roundness?u.curve(r,Cr(e)):u.linearPath(r,Cr(e)),f=zc(d);s=i5(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},AC=(e,t)=>{const n=Bc.generator(),i=e.roundness==null?n.linearPath(t,Cr(e)):n.curve(t,Cr(e)),r=zc(i),[s,o,a,l]=i5(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},_ae=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=Se(e);return e.forEach(s=>{const[o,a,l,c]=io(s,r),u=wt(A((o+l)/2,(a+c)/2),A(t.x,t.y));u<n&&(n=u,i=s)}),io(i,r)},Ys=e=>{const[t,n,i,r]=_t(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},oB=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],Yw=e=>A(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),Tae=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},aB=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=A(o,a);let c;return e.type==="diamond"?c=Mx(q(A(o,s),l,t),q(A(r+n,a),l,t),q(A(o,s+i),l,t),q(A(r,a),l,t)):c=Mx(q(A(r,s),l,t),q(A(r+n,s),l,t),q(A(r+n,s+i),l,t),q(A(r,s+i),l,t)),{type:"polygon",data:c}},Sae=(e,t,n=10)=>{let[i,r,s,o,a,l]=Pe(e,t,!0);i-=n,s+=n,r-=n,o+=n;const c=A(a,l),u=q(A(i,r),c,e.angle),d=q(A(s,r),c,e.angle),f=q(A(i,o),c,e.angle),h=q(A(s,o),c,e.angle);return{type:"polygon",data:[u,d,h,f]}},Iae=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:A(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},zc=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},xae=(e,t=A(0,0),n,i)=>{const r=l=>q(A(l[0]+t[0],l[1]+t[1]),i,n),s=zc(e),o=[];let a=A(0,0);for(const l of s){if(l.op==="move"){const c=hw(l.data);gr(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(A(l.data[0],l.data[1])),u=r(A(l.data[2],l.data[3])),d=r(A(l.data[4],l.data[5]));o.push(Ma(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},Cae=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(_e(t,r)),t=r}return n},Aae=(e,t,n=!1)=>{const i=s=>q(De(Vl(se(s),Ui(e.x,e.y))),t,e.angle),r=Cae(e.points.map(s=>i(s)));return n?{type:"polygon",data:L0(r.flat())}:{type:"polyline",data:r}},Rae=(e,t,n=A(0,0),i,r)=>{const s=u=>q(A(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:L0(e.points.map(u=>s(u)))};const o=zc(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(A(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(A(u.data[0],u.data[1])),a.push(A(u.data[2],u.data[3])),a.push(A(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(A(u.data[0],u.data[1]));const c=Fm(a,10,5).map(u=>s(u));return{type:"polygon",data:L0(c)}},Mae=(e,t)=>{const{angle:n,halfWidth:i,halfHeight:r,center:s}=t,o=i,a=r,l=Vl(se(e),Rt(se(s),-1)),[c,u]=q(De(l),A(0,0),-n),d=Math.abs(c),f=Math.abs(u);let h=.707,m=.707;for(let E=0;E<3;E++){const y=o*h,v=a*m,w=(o*o-a*a)*h**3/o,S=(a*a-o*o)*m**3/a,R=y-w,_=v-S,T=d-w,x=f-S,I=Math.hypot(_,R),M=Math.hypot(x,T);h=Math.min(1,Math.max(0,(T*I/M+w)/o)),m=Math.min(1,Math.max(0,(x*I/M+S)/a));const D=Math.hypot(m,h);h/=D,m/=D}const[p,b]=[o*h*Math.sign(c),a*m*Math.sign(u)];return wt(A(c,u),A(p,b))},kae=(e,t,n=vc)=>Mae(e,t)<=n,Lae=(e,t)=>{const{center:n,angle:i,halfWidth:r,halfHeight:s}=t,o=Vl(se(e),Rt(se(n),-1)),[a,l]=q(De(o),A(0,0),-i);return a/r*(a/r)+l/s*(l/s)<=1},TE=(e,t,n=0)=>{switch(t.type){case"polygon":return yie(e,t.data,n);case"ellipse":return kae(e,t.data,n);case"line":return ed(e,t.data,n);case"polyline":return cB(e,t.data,n);case"curve":return lB(e,t.data,n);case"polycurve":return Dae(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},P0=(e,t)=>{switch(t.type){case"polygon":return kx(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return Lae(e,t.data);case"polyline":{const n=L0(t.data.flat());return kx(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},Dae=(e,t,n)=>t.some(i=>lB(e,i,n)),Oae=e=>{const[t,n,i,r]=e;return(s,o)=>Math.pow(1-s,3)*r[o]+3*s*Math.pow(1-s,2)*i[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},Nae=(e,t=10)=>{const n=Oae(e);let i=[n(0,0),n(0,1)];const r=[];let s=0;const o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){const l=A(n(s,0),n(s,1));r.push(_e(i,l)),i=l}return r},lB=(e,t,n)=>cB(e,Nae(t),n),cB=(e,t,n=1e-4)=>t.some(i=>ed(e,i,n)),ro=(e,{x:t,y:n,strokeColor:i=fn.strokeColor,backgroundColor:r=fn.backgroundColor,fillStyle:s=fn.fillStyle,strokeWidth:o=fn.strokeWidth,strokeStyle:a=fn.strokeStyle,roughness:l=fn.roughness,opacity:c=fn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:b=null,boundElements:E=null,link:y=null,locked:v=fn.locked,...w})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:w.points}),{id:w.id||Hr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:b,seed:w.seed??Xo(),version:w.version||1,versionNonce:w.versionNonce??0,isDeleted:!1,boundElements:E,updated:qh(),link:y,locked:v,customData:w.customData}),Ja=e=>ro(e.type,e),RC=e=>ro("embeddable",e),Pae=e=>({...ro("iframe",e)}),Ww=e=>Ce({...ro("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),SE=e=>Ce({...ro("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),uB=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Vr=e=>{const t=e.fontFamily||Fc,n=e.fontSize||fl,i=e.lineHeight||Ju(t),r=Uh(e.text),s=Vi(r,Ct({fontFamily:t,fontSize:n}),i),o=e.textAlign||Lm,a=e.verticalAlign||q2,l=uB({textAlign:o,verticalAlign:a},s),c={...ro("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Ce(c,{})},Fae=(e,t,n)=>{let{width:i,height:r}=Vi(n,Ct(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===Lr.MIDDLE&&!e.containerId&&e.autoResize){const c=Vi(e.text,Ct(e),e.lineHeight),u=uB(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Pe(e,t),[h,m,p,b]=rc(e,i,r,!1),E=(c-h)/2,y=(u-m)/2,v=(d-p)/2,w=(f-b)/2;[a,l]=Bae({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,E,y,v,w)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},Bae=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},dB=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=xd(i,Ct(e),t?Ka(t,e):e.width));const r=Fae(e,n,i);return{text:i,...r}},zae=e=>({...ro(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Pu=e=>({...ro(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),Kw=e=>e.elbowed?{...ro(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...ro(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},fB=e=>({...ro("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),Hae=e=>{const t=e.slice(),n=new Set,i=s=>{var c,u,d;const o=(u=(c=s[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[s[0]],l=[];for(const f of s.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{var a;if(!r.has(s.id))if((a=s.groupIds)!=null&&a.length){const l=s.groupIds[s.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&r.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},Vae=e=>{const t=Lie(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{var o,a;if(r)if((o=r.boundElements)!=null&&o.length)i.add(r),n[s]=null,r.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(r.type==="text"&&r.containerId){const l=t.get(r.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===r.id)||(i.add(r),n[s]=null)}else i.add(r),n[s]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},$ae=e=>Vae(Hae(e)),Gae=(e,t,n,i)=>{const r=Sc(n);return r.id=Hr(),r.updated=qh(),i&&(r.seed=Xo(),$m(r)),r.groupIds=Moe(r.groupIds,e,s=>(t.has(s)||t.set(s,Hr()),t.get(s))),r},T6=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,r=new Map,s=[],o=[],a=new Map,l=new Map,c=new Map,u=Se(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(b=>[b.id,b]));if(e.type==="in-place")for(const b of Object.keys(e.appState.selectedGroupIds))t.filter(E=>{var y;return(y=E.groupIds)==null?void 0:y.includes(b)}).forEach(E=>d.set(E.id,E));t=$ae(t);const f=t.slice(),h=b=>{const y=U8(b).reduce((v,w)=>{if(i.has(w.id))return v;i.set(w.id,!0);const S=Gae(n.editingGroupId,r,w,e.randomizeSeed);return i.set(S.id,!0),c.set(S.id,S),a.set(w.id,S.id),l.set(S.id,w),o.push(w),s.push(S),v.push(S),v},[]);return Array.isArray(b)?y:y[0]||null},m=(b,E)=>{if(E){if(b>f.length-1){f.push(...U8(E));return}f.splice(b+1,0,...U8(E))}},p=new Set(t.filter(b=>d.has(b.id)&&Ie(b)).map(b=>b.id));for(const b of t){if(i.has(b.id)||!d.has(b.id))continue;const E=NF(n,b);if(E){const y=zt(t,E).flatMap(w=>Ie(w)?[...to(t,w.id),w]:[w]),v=cu(f,w=>{var S;return(S=w.groupIds)==null?void 0:S.includes(E)});m(v,h(y));continue}if(!(b.frameId&&p.has(b.frameId))){if(Ie(b)){const y=b.id,v=to(t,y),w=cu(f,S=>S.frameId===y||S.id===y);m(w,h([...v,b]));continue}if(br(b)){const y=ze(b,u),v=cu(f,w=>w.id===b.id||"containerId"in w&&w.containerId===b.id);y?m(v,h([b,y])):m(v,h(b));continue}if(Ht(b)){const y=Bn(b,u),v=cu(f,w=>w.id===b.id||w.id===(y==null?void 0:y.id));y?m(v,h([y,b])):m(v,h(b));continue}m(cu(f,y=>y.id===b.id),h(b))}}if(Xse(s,a,c),yoe(f,o,a),e.overrides)for(const b of s){const E=l.get(b.id);E&&Object.assign(b,e.overrides({duplicateElement:b,origElement:E,origIdToDuplicateId:a}))}return{duplicatedElements:s,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},IE=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=IE(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=IE(e[i],t+1);return r}return e},Sc=e=>IE(e),po=new Map,Xae=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,jae=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,Yae=/^https:\/\/(?:www\.)?figma\.com/,MC=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,Wae=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,kC=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,Kae=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,Zae=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,qae=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,LC=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,DC=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,Qae=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,xE=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),OC=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),Y1=e=>`<html><body>${e}</body></html>`,Rf=e=>{if(!e)return null;if(po.has(e))return po.get(e);const t=e,n=OC.has(CE(e,OC)||"");let i="generic",r={w:560,h:840};const s=e.match(Xae);if(s!=null&&s[2]){const c=s[3]?`&start=${s[3]}`:"",u=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break}return r=u?{w:315,h:560}:{w:560,h:315},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(jae);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(Yae))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(Zae);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(kC.test(e)){const c=e.match(kC)[1],u=VU(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>Y1(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return po.set(t,d),d}if(DC.test(e)){const[,c,u,d]=e.match(DC),f=VU(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>Y1(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return po.set(t,h),h}if(MC.test(e)){const[,c,u]=e.match(MC),d=VU(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>Y1(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return po.set(e,f),f}return po.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},hB=e=>{let t;Rl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=xt.Helvetica,r=Ct({fontSize:n,fontFamily:i});return Vr({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:xd(t,r,e.width-20),textAlign:"center",verticalAlign:Lr.MIDDLE,angle:e.angle??0})},CE=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(xE.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return xE.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},Jae=e=>{const t=e.match(Kae);if(t&&t.length===2)return t[1];const n=e.match(Qae);if(n&&n.length===2)return n[1];const i=e.match(Wae);if(i&&i.length===2)return i[1];if(LC.test(e))return`https://giphy.com/embed/${LC.exec(e)[1]}`;const r=e.match(qae);return r&&r.length===2?r[1]:e},ZU=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(CE(e,n))return!0;return!1}}return!!CE(e,xE)},gB=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),mB=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===Ee.binary)throw new Error("Only images can be added to ImageCache");const l=gB(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},pB=e=>e.filter(t=>In(t)),ele=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",NC=e=>{const t=new DOMParser().parseFromString(e,Ee.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!ele(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",it);let r=n.getAttribute("width"),s=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(s!=null&&s.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},PC={mouse:8,pen:16,touch:28},tle=16,UB={e:!0,s:!0,n:!0,w:!0},FC={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},A8={e:!0,s:!0,n:!0,w:!0},da=(e,t,n,i,r,s,o)=>{const[a,l]=q(A(e+n/2,t+i/2),A(r,s),o);return[a-n/2,l-i/2,n,i]},Zw=e=>!(e.viewport.isMobile||e.isTouchScreen&&(Cne||UP)),W1=e=>Zw(e)?UB:{},qw=([e,t,n,i,r,s],o,a,l,c={},u=4,d=Qu)=>{const f=PC[l],h=f/a.value,m=f/a.value,p=f/a.value,b=f/a.value,E=n-e,y=i-t,v=u/a.value,w=(f-d*2)/(2*a.value),S={nw:c.nw?void 0:da(e-v-p+w,t-v-b+w,h,m,r,s,o),ne:c.ne?void 0:da(n+v-w,t-v-b+w,h,m,r,s,o),sw:c.sw?void 0:da(e-v-p+w,i+v-w,h,m,r,s,o),se:c.se?void 0:da(n+v-w,i+v-w,h,m,r,s,o),rotation:c.rotation?void 0:da(e+E/2-h/2,t-v-b+w-tle/a.value,h,m,r,s,o)},R=5*PC.mouse/a.value;return Math.abs(E)>R&&(c.n||(S.n=da(e+E/2-h/2,t-v-b+w,h,m,r,s,o)),c.s||(S.s=da(e+E/2-h/2,i+v-w,h,m,r,s,o))),Math.abs(y)>R&&(c.w||(S.w=da(e-v-p+w,t+y/2-m/2,h,m,r,s,o)),c.e||(S.e=da(n+v-w,t+y/2-m/2,h,m,r,s,o))),S},bB=(e,t,n,i="mouse",r=UB)=>{if(e.locked||me(e))return{};if(e.type==="freedraw"||ke(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=A8:o[0]>0&&o[1]<0?r=FC:o[0]>0&&o[1]>0?r=A8:o[0]<0&&o[1]>0?r=FC:o[0]<0&&o[1]<0&&(r=A8)}}else Ie(e)&&(r={...r,rotation:!0});const s=ke(e)?Qu+8:ot(e)?0:Qu;return qw(Pe(e,n,!0),e.angle,t,i,r,s,ot(e)?0:void 0)},yB=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return me(n)?!1:ke(n)?n.points.length>2:!0},Gf=100,bu=100,BC=e=>{switch(e){case z.ARROW_UP:return"up";case z.ARROW_DOWN:return"down";case z.ARROW_RIGHT:return"right";case z.ARROW_LEFT:return"left";default:return"right"}},EB=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{var l;let a;if(me(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return s;gr(eo(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=Tw(t,Co(t),[u[0]+o.x,u[1]+o.y]);s.push({relative:c,heading:d})}return s},[]);switch(i){case"up":return r.filter(s=>Pn(s.heading,Ns)).map(s=>s.relative);case"down":return r.filter(s=>Pn(s.heading,Zi)).map(s=>s.relative);case"right":return r.filter(s=>Pn(s.heading,Dn)).map(s=>s.relative);case"left":return r.filter(s=>Pn(s.heading,ss)).map(s=>s.relative)}},AE=(e,t,n)=>EB("successors",e,t,n),RE=(e,t,n)=>EB("predecessors",e,t,n),nle=(e,t,n)=>{const i=bu+e.width;if(n==="up"||n==="down"){const a=Gf+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(bu+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=Gf+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=Gf+e.height,s=(t.length===0,bu+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},ile=(e,t,n,i)=>{const r=AE(e,t,i),s=RE(e,t,i),o=nle(e,[...r,...s],i),a=Ja({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});gr(Yb(a),"not an ExcalidrawFlowchartNodeElement");const l=vB(e,a,t,i,n);return{nextNode:a,bindingArrow:l}},rle=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(i==="left"||i==="right"){const d=Gf*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=bu+e.width;i==="left"&&(h*=-1),a=e.x+h;const m=(Gf+e.height)*o;l=f+m}else{const d=bu*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=Gf+e.height;i==="up"&&(h*=-1),l=e.y+h;const m=(bu+e.width)*o;a=f+m}const c=Ja({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});gr(Yb(c),"not an ExcalidrawFlowchartNodeElement");const u=vB(e,c,t,i,n);s.push(c),s.push(u)}return s},vB=(e,t,n,i,r)=>{let s,o;switch(i){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(i){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=Kw({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:r.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[A(0,0),A(l,c)],elbowed:!0});cs(u,e,"start",n),cs(u,t,"end",n);const d=new Map;d.set(e.id,e),d.set(t.id,t),d.set(u.id,u),ue.movePoints(u,[{index:1,point:u.points[1]}]);const f=Jh(u,ys(new Map([...n.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...f}};class sle{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!eo(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...AE(t,n,i),...RE(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...AE(t,n,a),...RE(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class ole{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,r){if(r!==this.direction){const{nextNode:s,bindingArrow:o}=ile(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[s,o]}else{this.numberOfNodes+=1;const s=rle(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=s}if(t.frameId){const s=n.get(t.frameId);gr(s&&nF(s),"not an ExcalidrawFrameElement"),s&&this.pendingNodes.every(o=>Gm([o],s,n)||Tc(o,s,n))&&(this.pendingNodes=this.pendingNodes.map(o=>ee(o,{frameId:t.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const ale=(e,t)=>{var n,i;for(const[,r]of t)if(r.type==="arrow"&&(((n=r.startBinding)==null?void 0:n.elementId)===e.id||((i=r.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},wB=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(t6,e),Fr(i.toString())}catch(i){console.error(i)}return Fr(n)},_B=(e,t)=>{if(e.length>0&&S6(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},S6=e=>!!(e.length===1||e.length>1&&FF(e)),K1=e=>{try{const t=new URL(e);return t.searchParams.has(t6)&&t.host===window.location.host}catch{return!1}},lle=e=>{try{const{searchParams:t}=new URL(e);if(t.has(t6))return t.get(t6)}catch{}return null},cle=(e,t,n,i,r,s,o,a,l,c,u,d)=>{if(n.length===1){const[f]=n;if(t==="rotation")me(f)||(ule(f,i,r,l,c,s),mr(f,i));else{if(fe(f)&&t)return dle(e,f,i,t,o,l,c),mr(f,i),!0;if(t){const h=n[0].id,m=i.get(h),p=e.get(h);if(m&&p){const{nextWidth:b,nextHeight:E}=Ule(m,p,i,e,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});F0(b,E,m,p,i,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return fle(e,n,i,r,l,c,s,u,d),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:b}=ble(n,e,i,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return TB(n,i,t,r,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:b}),!0}}return!1},ule=(e,t,n,i,r,s)=>{const[o,a,l,c]=Pe(e,t),u=(o+l)/2,d=(a+c)/2;let f;Ie(e)?f=0:(f=5*Math.PI/2+Math.atan2(r-d,i-u),s&&(f=f+Ec/2,f=f-f%Ec),f=n6(f));const h=jo(e);if(ee(e,{angle:f}),h){const m=n.getElement(h);m&&!Le(e)&&ee(m,{angle:f})}},Qw=(e,t,n,i)=>ke(e)||Js(e)?{points:a6(0,t,a6(1,n,e.points,i),i)}:{},Jw=(e,t,n)=>{let i=e.width;if(Ht(e)){const o=Bn(e,t);o&&(i=Ka(o,e))}const s=e.fontSize*(n/i);return s<ow?null:{size:s}},dle=(e,t,n,i,r,s,o)=>{const[a,l,c,u,d,f]=Pe(t,n),[h,m]=q(A(s,o),A(d,f),-t.angle);let p=0,b=0;i!=="e"&&i!=="w"&&(i.includes("e")&&(p=(h-a)/(c-a)),i.includes("w")&&(p=(c-h)/(c-a)),i.includes("n")&&(b=(u-m)/(u-l)),i.includes("s")&&(b=(m-l)/(u-l)));const E=Math.max(p,b);if(E>0){const y=t.width*E,v=t.height*E,w=Jw(t,n,y);if(w===null)return;const S=[a,l],R=[c,u],_=[d,f];let T=A(a,l);if(["n","w","nw"].includes(i)&&(T=A(R[0]-Math.abs(y),R[1]-Math.abs(v))),i==="ne"){const H=[S[0],R[1]];T=A(H[0],H[1]-Math.abs(v))}if(i==="sw"){const H=[R[0],S[1]];T=A(H[0]-Math.abs(y),H[1])}["s","n"].includes(i)&&(T[0]=_[0]-y/2),["e","w"].includes(i)&&(T[1]=_[1]-v/2),r&&(T[0]=_[0]-Math.abs(y)/2,T[1]=_[1]-Math.abs(v)/2);const x=t.angle,I=q(T,A(d,f),x),M=A(T[0]+Math.abs(y)/2,T[1]+Math.abs(v)/2),D=q(M,A(d,f),x);T=q(I,D,-x);const[L,G]=T;ee(t,{fontSize:w.size,width:y,height:v,x:L,y:G})}if(i==="e"||i==="w"){const y=e.get(t.id),[v,w,S,R]=rc(y,y.width,y.height,!0),_=A(v,w),T=A(S,R),x=k0(_,T),I=q(A(s,o),x,-y.angle),[M,,D]=rc(t,t.width,t.height,!0),L=D-M,G=T[0]-_[0],H=Sw(Ct({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight);let V=G/L;i.includes("e")&&(V=(I[0]-_[0])/L),i.includes("w")&&(V=(T[0]-I[0])/L);const $=t.width*V<H?H:t.width*V,j=xd(t.originalText,Ct(t),Math.abs($)),X=Vi(j,Ct(t),t.lineHeight),Z=X.height,[ge,ce,le,Be]=rc(y,$,Z,!0),$e=le-ge,Tt=Be-ce;let at=[..._];["n","w","nw"].includes(i)&&(at=[T[0]-Math.abs($e),_[1]]);const $t=y.angle,tn=q(at,x,$t),Ae=A(at[0]+Math.abs($e)/2,at[1]+Math.abs(Tt)/2),Ge=q(Ae,x,$t);at=q(tn,Ge,-$t);const Gt={width:Math.abs($),height:Math.abs(X.height),x:at[0],y:at[1],text:j,autoResize:!1};ee(t,Gt)}},fle=(e,t,n,i,r,s,o,a,l)=>{var u;let c=5*Math.PI/2+Math.atan2(s-l,r-a);o&&(c+=Ec/2,c-=c%Ec);for(const d of t)if(!Ie(d)){const[f,h,m,p]=Pe(d,n),b=(f+m)/2,E=(h+p)/2,y=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[v,w]=q(A(b,E),A(a,l),c+y-d.angle);me(d)?ee(d,{points:Zse(d,n)}):ee(d,{x:d.x+(v-b),y:d.y+(w-E),angle:n6(c+y)},!1),mr(d,n,{simultaneouslyUpdated:t});const S=ze(d,n);S&&!Le(d)&&ee(S,{x:S.x+(v-b),y:S.y+(w-E),angle:n6(c+y)},!1)}i.triggerUpdate()},hle=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?Pe(t[0],n):_t(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=q(A(i,r),A(c,u),-d),e){case"n":return q(A(i-(s+a)/2,r-o),A(0,0),d);case"s":return q(A(i-(s+a)/2,r-l),A(0,0),d);case"w":return q(A(i-s,r-(o+l)/2),A(0,0),d);case"e":return q(A(i-a,r-(o+l)/2),A(0,0),d);case"nw":return q(A(i-s,r-o),A(0,0),d);case"ne":return q(A(i-a,r-o),A(0,0),d);case"sw":return q(A(i-s,r-l),A(0,0),d);case"se":return q(A(i-a,r-l),A(0,0),d);default:return[0,0]}},gle=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},mle=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},ple=(e,t,n,i,r,s,o,a,l)=>{const c=mle(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},F0=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let u={};const d=ze(n,r);if(d){const p=s.get(d.id);if(p&&(u={fontSize:p.fontSize}),l){const b={...n,width:e},E=Jw(d,r,Ka(b,d));if(E===null)return;u={fontSize:E.size}}else{const b=dF(Ct(d),d.lineHeight),E=fF(d.fontSize,d.lineHeight);e=Math.max(e,b),t=Math.max(t,E)}}const f=Qw(i,e,t,!0);let h=A(i.x,i.y);if(ke(i)){const[p,b]=io(i,s);h=A(p,b)}const m=ple(h,i.width,i.height,e,t,i.angle,o,l,c);if(ke(i)&&f.points){const p=i.x-h[0],b=i.y-h[1];m.x+=p,m.y+=b;const E=f.points[0][0],y=f.points[0][1];m.x+=E,m.y+=y,f.points=f.points.map(v=>A(v[0]-E,v[1]-y))}if(e<0&&(m.x=m.x+e),t<0&&(m.y=m.y+t),"scale"in n&&"scale"in i&&ee(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),Le(n)&&d&&l){const p=e/n.width*d.fontSize;if(p<ow)return;u.fontSize=p}if(e!==0&&t!==0&&Number.isFinite(m.x)&&Number.isFinite(m.y)){const p={...m,width:Math.abs(e),height:Math.abs(t),...f};ee(n,p,a),mr(n,r,{newSize:{width:e,height:t}}),d&&u!=null&&ee(d,{fontSize:u.fontSize}),Hm(n,r,o,l)}},Ule=(e,t,n,i,r,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{const[c,u,d,f]=rc(t,t.width,t.height,!0),h=A(c,u),m=A(d,f),p=k0(h,m),b=q(A(s,o),p,-t.angle),[E,y,v,w]=rc(e,e.width,e.height,!0),S=v-E,R=w-y,_=m[0]-h[0],T=m[1]-h[1];let x=_/S,I=T/R;r.includes("e")&&(x=(b[0]-h[0])/S),r.includes("s")&&(I=(b[1]-h[1])/R),r.includes("w")&&(x=(m[0]-b[0])/S),r.includes("n")&&(I=(m[1]-b[1])/R);let M=e.width*x,D=e.height*I;if(l&&(M=2*M-t.width,D=2*D-t.height),a){const L=Math.abs(M)/t.width,G=Math.abs(D)/t.height;if(r.length===1&&(D*=L,M*=G),r.length===2){const H=Math.max(L,G);M=t.width*H*Math.sign(M),D=t.height*H*Math.sign(D)}}return{nextWidth:M,nextHeight:D}},ble=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(L=>t.get(L.id)),c=l.reduce((L,G)=>{if(!ke(G))return L;const H=jo(G);if(!H)return L;const V=t.get(H)??null;return Ht(V)?[...L,{...V,...ue.getBoundTextElementPosition(G,V,n)}]:L},[]),u=Ys(l.map(L=>L).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:b}=u,E=h-d,y=m-f,v={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+y/2],w:[h,f+y/2],n:[d+E/2,m],s:[d+E/2,f]},[w,S]=a?[p,b]:v[i],R=a?2:1,_=Math.max(Math.abs(r-w)/E||0,Math.abs(s-S)/y||0)*R;let T=i.includes("e")||i.includes("w")?Math.abs(r-w)*R:E,x=i.includes("n")||i.includes("s")?Math.abs(s-S)*R:y;o&&(T=E*_*Math.sign(r-w),x=y*_*Math.sign(s-S));const I={ne:[r<w,s>S],se:[r<w,s<S],sw:[r>w,s<S],nw:[r>w,s>S],e:[r<w,!1],w:[r>w,!1],n:[!1,s>S],s:[!1,s<S]},[M,D]=I[i].map(L=>L);return{originalBoundingBox:u,nextWidth:T,nextHeight:x,flipByX:M,flipByY:D}},TB=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((R,_)=>{const T=r.get(_.id);return T&&R.push({orig:T,latest:_}),R},[]);let h;if(d)h=d;else{const R=f.reduce((_,{orig:T})=>{if(!ke(T))return _;const x=jo(T);if(!x)return _;const I=r.get(x)??null;return Ht(I)?[..._,{...I,...ue.getBoundTextElementPosition(T,I,t)}]:_},[]);h=Ys(f.map(({orig:_})=>_).concat(R))}const{minX:m,minY:p,maxX:b,maxY:E,midX:y,midY:v}=h,w=b-m,S=E-p;if(u===void 0&&c===void 0&&(u=w,c=S),s&&(u===void 0?u=c*(w/S):c===void 0?c=u*(S/w):Math.abs(u/c-w/S)>.001&&(u=c*(w/S))),u&&c){let R=n.includes("e")||n.includes("w")?Math.abs(u)/w:1,_=n.includes("n")||n.includes("s")?Math.abs(c)/S:1,T;n.length===1?T=n.includes("e")||n.includes("w")?R:_:T=Math.max(Math.abs(u)/w||0,Math.abs(c)/S||0);const x={ne:[m,E],se:[m,p],sw:[b,p],nw:[b,E],e:[m,p+S/2],w:[b,p+S/2],n:[m+w/2,E],s:[m+w/2,p]},[I,M]=o?[y,v]:x[n],D=s||f.some($=>$.latest.angle!==0||fe($.latest)||yh($.latest));D&&(R=T,_=T);const[L,G]=[a?-1:1,l?-1:1],H=[];for(const{orig:$,latest:j}of f){if(fe($)&&Ht($))continue;const X=$.width*R,Z=$.height*_,ge=n6($.angle*L*G),ce=ke($)||Js($),le=$.x-I,Be=$.y-M,$e=a&&!ce?X:0,Tt=l&&!ce?Z:0,at=I+L*(le*R+$e),$t=M+G*(Be*_+Tt),tn=Qw($,X*L,Z*G,!1),Ae={x:at,y:$t,width:X,height:Z,angle:ge,...tn};if(me($)&&($.startBinding&&(Ae.startBinding={...$.startBinding,fixedPoint:[a?-$.startBinding.fixedPoint[0]+1:$.startBinding.fixedPoint[0],l?-$.startBinding.fixedPoint[1]+1:$.startBinding.fixedPoint[1]]}),$.endBinding&&(Ae.endBinding={...$.endBinding,fixedPoint:[a?-$.endBinding.fixedPoint[0]+1:$.endBinding.fixedPoint[0],l?-$.endBinding.fixedPoint[1]+1:$.endBinding.fixedPoint[1]]}),$.fixedSegments&&tn.points&&(Ae.fixedSegments=$.fixedSegments.map(Gt=>({...Gt,start:tn.points[Gt.index-1],end:tn.points[Gt.index]})))),ot($)&&(Ae.scale=[$.scale[0]*L,$.scale[1]*G]),fe($)){const Gt=Jw($,t,X);if(!Gt)return;Ae.fontSize=Gt.size}const Ge=r.get(jo($)??"");if(Ge)if(D){const Gt=Ge.fontSize*T;if(Gt<ow)return;Ae.boundTextFontSize=Gt}else Ae.boundTextFontSize=Ge.fontSize;H.push({element:j,update:Ae})}const V=H.map(({element:$})=>$);for(const{element:$,update:{boundTextFontSize:j,...X}}of H){const{width:Z,height:ge,angle:ce}=X;ee($,X,!1,{isDragging:!0}),mr($,t,{simultaneouslyUpdated:V,newSize:{width:Z,height:ge}});const le=ze($,t);le&&j&&(ee(le,{fontSize:j,angle:ke($)?void 0:ce},!1),Hm($,t,n,!0))}i.triggerUpdate()}},ME=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],yle=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=bB(e,s,t,o,W1(a));if(l&&ME(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?ME(f,i,r):!1});if(u.length>0)return u[0];if(Zw(a)){const[d,f,h,m,p,b]=Pe(e,t);if(!(ke(e)&&e.points.length<=2)){const E=ot(e)?0:Q2/s.value,y=Q2/s.value,v=SB(A(d-E,f-E),A(h+E,m+E),A(p,b),e.angle);for(const[w,S]of Object.entries(v))if(ed(A(i,r),S,y))return w}}return!1},zC=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=yle(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),HC=([e,t,n,i],r,s,o,a,l)=>{const c=qw([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,W1(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&ME(f,r,s)});if(u)return u;if(Zw(l)){const d=(e+n)/2,f=(t+i)/2,h=Q2/o.value,m=SB(A(e-h,t-h),A(n+h,i+h),A(d,f),0);for(const[p,b]of Object.entries(m))if(ed(A(r,s),b,h))return p}return!1},R8=["ns","nesw","ew","nwse"],Ele=(e,t)=>{const n=R8.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=R8[(n+i)%R8.length]}return e},VC=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=Ele(r,t.angle)),r?`${r}-resize`:""},SB=([e,t],[n,i],r,s)=>{const o=q(A(e,t),r,s),a=q(A(n,t),r,s),l=q(A(e,i),r,s),c=q(A(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},vle=(e,t,n,i,r,s)=>{if(t.length===1&&me(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(me(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>Ie(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=wle(_t(c),n,r,s);a.forEach(d=>{if($C(e,d,u),!Le(d)){const f=ze(d,i.getNonDeletedElementsMap());f&&$C(e,f,u),mr(d,i.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},wle=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Rn(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},$C=(e,t,n)=>{const i=e.originalElements.get(t.id)??t,r=i.x+n.x,s=i.y+n.y;ee(t,{x:r,y:s})},_le=(e,t,n)=>{const[i,r]=_t(e);return[t-i,n-r]},GC=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,widthAspectRatio:d=null,originOffset:f=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=eC(t,a,r<n?-o:o):{width:o,height:a}=eC(t,o,s<i?-a:a),a<0&&(a=-a)));let m=r<n?n-o:n,p=s<i?i-a:i;c&&(o+=o,a+=a,m=n-o/2,p=i-a/2);let b=null;if(fe(e)){a=e.height;const E=Sw(Ct({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,E),Math.abs(r-n)>kne/u&&(b={autoResize:!1}),p=i,c&&(m=n-o/2)}if(o!==0&&a!==0){let E=null;ot(e)&&(E={initialWidth:o,initialHeight:a}),ee(e,{x:m+((f==null?void 0:f.x)??0),y:p+((f==null?void 0:f.y)??0),width:o,height:a,...b,...E},h)}},Tle=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var el={};let Sle=0;function en(e,t){const n=`atom${++Sle}`,i={toString(){return(el?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Ile,i.write=xle),i}function Ile(e){return e(this)}function xle(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const XC=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,kE=e=>"init"in e,M8=e=>!!e.write,I6=new WeakMap,LE=e=>{var t;return DE(e)&&!((t=I6.get(e))!=null&&t[1])},Cle=(e,t)=>{const n=I6.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((el?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Ale=e=>{if(I6.has(e))return;const t=[new Set,!1];I6.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},DE=e=>typeof(e==null?void 0:e.then)=="function",jC=e=>"v"in e||"e"in e,tU=e=>{if("e"in e)throw e.e;if((el?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},IB=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},YC=(e,t,n,i,r)=>{var s;if((el?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),LE(n.v)&&IB(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&Rle(e,i,t)},Hg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),Z1=(e,t,n)=>{e[t].add(n)},WC=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),Z1(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>Z1(e,"M",r))}))},Rle=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Mle=(e,t)=>e.D.get(t),Zc=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},xB=(...[e,t,n,i])=>{const r=(E,y,v)=>{const w="v"in y,S=y.v,R=LE(y.v)?y.v:null;if(DE(v)){Ale(v);for(const _ of y.d.keys())IB(E,v,e(_));y.v=v}else y.v=v;delete y.e,delete y.x,(!w||!Object.is(S,y.v))&&(++y.n,R&&Cle(R,v))},s=(E,y)=>{var v;const w=e(y);if(jC(w)&&(w.m&&!w.x||Array.from(w.d).every(([I,M])=>s(E,I).n===M)))return w;w.d.clear();let S=!0;const R=I=>{if(XC(y,I)){const D=e(I);if(!jC(D))if(kE(I))r(I,D,I.init);else throw new Error("no atom init");return tU(D)}const M=s(E,I);try{return tU(M)}finally{if(S)YC(E,y,w,I,M);else{const D=Hg();YC(D,y,w,I,M),d(D,y,w),Zc(D)}}};let _,T;const x={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(el?"production":void 0)!=="production"&&!M8(y)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&M8(y)&&(T=(...I)=>{if((el?"production":void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return u(y,...I)}),T}};try{const I=t(y,R,x);if(r(y,w,I),DE(I)){(v=I.onCancel)==null||v.call(I,()=>_==null?void 0:_.abort());const M=()=>{if(w.m){const D=Hg();d(D,y,w),Zc(D)}};I.then(M,M)}return w}catch(I){return delete w.v,w.e=I,delete w.x,++w.n,w}finally{S=!1}},o=E=>tU(s(void 0,E)),a=(E,y,v)=>{var w,S;const R=new Map;for(const _ of((w=v.m)==null?void 0:w.t)||[]){const T=e(_);T.m&&R.set(_,T)}for(const _ of v.p)R.set(_,e(_));return(S=Mle(E,y))==null||S.forEach(_=>{R.set(_,e(_))}),R},l=(E,y,v)=>{const w=[],S=new Set,R=new Set,_=[[y,v]];for(;_.length>0;){const[T,x]=_[_.length-1];if(R.has(T)){_.pop();continue}if(S.has(T)){w.push([T,x,x.n]),R.add(T),x.x=!0,_.pop();continue}S.add(T);for(const[I,M]of a(E,T,x))T!==I&&!S.has(I)&&_.push([I,M])}Z1(E,"H",()=>{const T=new Set([y]);for(let x=w.length-1;x>=0;--x){const[I,M,D]=w[x];let L=!1;for(const G of M.d.keys())if(G!==I&&T.has(G)){L=!0;break}L&&(s(E,I),d(E,I,M),D!==M.n&&(WC(E,I,M),T.add(I))),delete M.x}})},c=(E,y,...v)=>{let w=!0;const S=_=>tU(s(E,_)),R=(_,...T)=>{const x=e(_);try{if(XC(y,_)){if(!kE(_))throw new Error("atom not writable");const I=x.n,M=T[0];r(_,x,M),d(E,_,x),I!==x.n&&(WC(E,_,x),l(E,_,x));return}else return c(E,_,...T)}finally{w||Zc(E)}};try{return n(y,S,R,...v)}finally{w=!1}},u=(E,...y)=>{const v=Hg();try{return c(v,E,...y)}finally{Zc(v)}},d=(E,y,v)=>{if(v.m&&!LE(v.v)){for(const w of v.d.keys())v.m.d.has(w)||(f(E,w,e(w)).t.add(y),v.m.d.add(w));for(const w of v.m.d||[])if(!v.d.has(w)){v.m.d.delete(w);const S=h(E,w,e(w));S==null||S.t.delete(y)}}},f=(E,y,v)=>{if(!v.m){s(E,y);for(const w of v.d.keys())f(E,w,e(w)).t.add(y);if(v.m={l:new Set,d:new Set(v.d.keys()),t:new Set},M8(y)){const w=v.m;let S;const R=(_,T)=>{let x=!0;S=(...I)=>{try{return c(_,y,...I)}finally{x||Zc(_)}};try{return T()}finally{x=!1}};Z1(E,"L",()=>{const _=R(E,()=>i(y,(...T)=>S(...T)));_&&(w.u=T=>R(T,_))})}}return v.m},h=(E,y,v)=>{if(v.m&&!v.m.l.size&&!Array.from(v.m.t).some(w=>{var S;return(S=e(w).m)==null?void 0:S.d.has(y)})){const w=v.m.u;w&&Z1(E,"L",()=>w(E)),delete v.m;for(const S of v.d.keys()){const R=h(E,S,e(S));R==null||R.t.delete(y)}return}return v.m};return{get:o,set:u,sub:(E,y)=>{const v=Hg(),w=e(E),R=f(v,E,w).l;return R.add(y),Zc(v),()=>{R.delete(y);const _=Hg();h(_,E,w),Zc(_)}},unstable_derive:E=>xB(...E(e,t,n,i))}},kle=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,b,E){return b==="m"&&n.add(f),Reflect.set(p,b,E)},deleteProperty(p,b){return b==="m"&&n.delete(f),Reflect.deleteProperty(p,b)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)kE(f)&&d(f,h)}finally{--r}}})}})},Xm=()=>{const e=new WeakMap,n=xB(i=>{if((el?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(el?"production":void 0)!=="production"?kle(n):n};let Vg;const Lle=()=>(Vg||(Vg=Xm(),(el?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Vg),globalThis.__JOTAI_DEFAULT_STORE__!==Vg&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Vg);var CB={};const AB=O.createContext(void 0),r5=e=>{const t=O.useContext(AB);return(e==null?void 0:e.store)||t||Lle()},Dle=({children:e,store:t})=>{const n=O.useRef(void 0);return!t&&!n.current&&(n.current=Xm()),O.createElement(AB.Provider,{value:t||n.current},e)},OE=e=>typeof(e==null?void 0:e.then)=="function",RB=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},Ole=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(RB(e),e)}),k8=new WeakMap,KC=e=>{let t=k8.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((CB?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");OE(c)?(k8.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),k8.set(e,t)),t};function s5(e,t){const n=r5(t),[[i,r,s],o]=O.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(O.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);OE(u)&&RB(KC(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),O.useDebugValue(a),OE(a)){const c=KC(a);return Ole(c)}return a}function e9(e,t){const n=r5(t);return O.useCallback((...r)=>{if((CB?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function wh(e,t){return[s5(e,t),e9(e,t)]}const ZC=new WeakMap;function Nle(e,t){const n=r5(t),i=Ple(n);for(const[r,s]of e)(!i.has(r)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const Ple=e=>{let t=ZC.get(e);return t||(t=new WeakSet,ZC.set(e,t)),t};function Mf(){return Mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mf.apply(this,arguments)}function MB(){const e=O.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=O.useRef(o);return c.current||(c.current=Xm()),Nle(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=O.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return r5(Mf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return wh(o,Mf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return s5(o,Mf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return e9(o,Mf({store:l},a))}}}const{read:vIe,write:wIe}=en(null);O.createContext({scope:void 0,baseStore:void 0});const kB=MB(),{useAtom:mn,useSetAtom:o5,useAtomValue:LB,useStore:_Ie}=kB,Fle=kB.Provider,Vs=Xm(),DB={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},OB={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},NB={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},PB={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},FB={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},BB={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},zB={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},HB={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},VB={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},$B={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},GB={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},XB={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},jB={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},YB={or:"Or"},WB={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},KB={title:"Error"},ZB={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},qB={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},QB={title:"Clear canvas"},JB={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},ez={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},tz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},nz={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},iz={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},rz={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},sz={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},oz={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},az={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},lz={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},cz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},uz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},dz={placeholder:"Quick search"},fz={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},hz={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},gz={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},t9={labels:DB,elementLink:OB,library:NB,search:PB,buttons:FB,alerts:BB,errors:zB,toolBar:HB,element:VB,headings:$B,hints:GB,canvasError:XB,errorSplash:jB,shareDialog:YB,roomDialog:WB,errorDialog:KB,exportDialog:ZB,helpDialog:qB,clearCanvasDialog:QB,publishDialog:JB,publishSuccessDialog:ez,confirmDialog:tz,imageExportDialog:nz,encrypted:iz,stats:rz,toast:sz,colors:oz,welcomeScreen:az,colorPicker:lz,overwriteConfirm:cz,mermaid:uz,quickSearch:dz,fontList:fz,userList:hz,commandPalette:gz},Ble=Object.freeze(Object.defineProperty({__proto__:null,alerts:BB,buttons:FB,canvasError:XB,clearCanvasDialog:QB,colorPicker:lz,colors:oz,commandPalette:gz,confirmDialog:tz,default:t9,element:VB,elementLink:OB,encrypted:iz,errorDialog:KB,errorSplash:jB,errors:zB,exportDialog:ZB,fontList:fz,headings:$B,helpDialog:qB,hints:GB,imageExportDialog:nz,labels:DB,library:NB,mermaid:uz,overwriteConfirm:cz,publishDialog:JB,publishSuccessDialog:ez,quickSearch:dz,roomDialog:WB,search:PB,shareDialog:YB,stats:rz,toast:sz,toolBar:HB,userList:hz,welcomeScreen:az},Symbol.toStringTag,{value:"Module"})),mz=100,pz=36,Uz={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:mz,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:pz,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},zle=Object.freeze(Object.defineProperty({__proto__:null,default:Uz,en:mz,kaa:pz},Symbol.toStringTag,{value:"Module"})),Hle=85,Cd={code:"en",label:"English"},a5=[Cd,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>Uz[e.code]>=Hle).sort((e,t)=>e.label>t.label?1:-1)],bz="__test__";let kf=Cd,qU={};const yz=async e=>{if(kf=e,document.documentElement.dir=kf.rtl?"rtl":"ltr",document.documentElement.lang=kf.code,e.code.startsWith(bz))qU={};else try{qU=await Tle(Object.assign({"./locales/ar-SA.json":()=>ye(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([]),import.meta.url),"./locales/az-AZ.json":()=>ye(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([]),import.meta.url),"./locales/bg-BG.json":()=>ye(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([]),import.meta.url),"./locales/bn-BD.json":()=>ye(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([]),import.meta.url),"./locales/ca-ES.json":()=>ye(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([]),import.meta.url),"./locales/cs-CZ.json":()=>ye(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([]),import.meta.url),"./locales/da-DK.json":()=>ye(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([]),import.meta.url),"./locales/de-DE.json":()=>ye(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([]),import.meta.url),"./locales/el-GR.json":()=>ye(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([]),import.meta.url),"./locales/en.json":()=>ye(()=>Promise.resolve().then(()=>Ble),void 0,import.meta.url),"./locales/es-ES.json":()=>ye(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([]),import.meta.url),"./locales/eu-ES.json":()=>ye(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([]),import.meta.url),"./locales/fa-IR.json":()=>ye(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([]),import.meta.url),"./locales/fi-FI.json":()=>ye(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([]),import.meta.url),"./locales/fr-FR.json":()=>ye(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([]),import.meta.url),"./locales/gl-ES.json":()=>ye(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([]),import.meta.url),"./locales/he-IL.json":()=>ye(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([]),import.meta.url),"./locales/hi-IN.json":()=>ye(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([]),import.meta.url),"./locales/hu-HU.json":()=>ye(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([]),import.meta.url),"./locales/id-ID.json":()=>ye(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([]),import.meta.url),"./locales/it-IT.json":()=>ye(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([]),import.meta.url),"./locales/ja-JP.json":()=>ye(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([]),import.meta.url),"./locales/kaa.json":()=>ye(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([]),import.meta.url),"./locales/kab-KAB.json":()=>ye(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([]),import.meta.url),"./locales/kk-KZ.json":()=>ye(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([]),import.meta.url),"./locales/km-KH.json":()=>ye(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([]),import.meta.url),"./locales/ko-KR.json":()=>ye(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([]),import.meta.url),"./locales/ku-TR.json":()=>ye(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([]),import.meta.url),"./locales/lt-LT.json":()=>ye(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([]),import.meta.url),"./locales/lv-LV.json":()=>ye(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([]),import.meta.url),"./locales/mr-IN.json":()=>ye(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([]),import.meta.url),"./locales/my-MM.json":()=>ye(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([]),import.meta.url),"./locales/nb-NO.json":()=>ye(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([]),import.meta.url),"./locales/nl-NL.json":()=>ye(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([]),import.meta.url),"./locales/nn-NO.json":()=>ye(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([]),import.meta.url),"./locales/oc-FR.json":()=>ye(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([]),import.meta.url),"./locales/pa-IN.json":()=>ye(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([]),import.meta.url),"./locales/percentages.json":()=>ye(()=>Promise.resolve().then(()=>zle),void 0,import.meta.url),"./locales/pl-PL.json":()=>ye(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-BR.json":()=>ye(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-PT.json":()=>ye(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([]),import.meta.url),"./locales/ro-RO.json":()=>ye(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([]),import.meta.url),"./locales/ru-RU.json":()=>ye(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([]),import.meta.url),"./locales/si-LK.json":()=>ye(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([]),import.meta.url),"./locales/sk-SK.json":()=>ye(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([]),import.meta.url),"./locales/sl-SI.json":()=>ye(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([]),import.meta.url),"./locales/sv-SE.json":()=>ye(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([]),import.meta.url),"./locales/ta-IN.json":()=>ye(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([]),import.meta.url),"./locales/th-TH.json":()=>ye(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([]),import.meta.url),"./locales/tr-TR.json":()=>ye(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([]),import.meta.url),"./locales/uk-UA.json":()=>ye(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([]),import.meta.url),"./locales/vi-VN.json":()=>ye(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-CN.json":()=>ye(()=>import("./locales/zh-CN.json-CXAz8QMA.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-HK.json":()=>ye(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-TW.json":()=>ye(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]),import.meta.url)}),`./locales/${kf.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),qU=t9}Vs.set(Ez,e.code)},B0=()=>kf,qC=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},k=(e,t,n)=>{if(kf.code.startsWith(bz))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let r=qC(qU,i)||qC(t9,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},Ez=en(Cd.code),wn=()=>{const e=LB(Ez);return{t:k,langCode:e}},Vle=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Fs({sceneX:n,sceneY:i},e),{x:l,y:c}=Fs({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},vz=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;r+=((i==null?void 0:i.left)??0)/2/n.value;let s=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return s+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:r,scrollY:s}},z0=(e,t)=>{if(e=coe(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=_t(e);Vle(t,[n,i,r,s])&&([n,i,r,s]=_ae(e,Mt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return vz({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},ka=e=>Xe(Pa(e,6),lw,cw),$le=e=>Xe(Math.round(e),1,100),wz=e=>Xe(Math.round(e),1,100),Gle=dw.includes(devicePixelRatio)?devicePixelRatio:1,so=()=>({showWelcomeScreen:!1,theme:xe.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:fn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:fn.fillStyle,currentItemFontFamily:Fc,currentItemFontSize:fl,currentItemOpacity:fn.opacity,currentItemRoughness:fn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:fn.strokeColor,currentItemRoundness:"round",currentItemArrowType:ni.round,currentItemStrokeStyle:fn.strokeStyle,currentItemStrokeWidth:fn.strokeWidth,currentItemTextAlign:Lm,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:fn.locked,fromSelection:!1,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:Gle,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:J2,gridStep:vP,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Sf.generalStats|Sf.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:je.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),Xle=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),n9=(e,t)=>{const n={};for(const i of Object.keys(e)){const r=Xle[i];if(r!=null&&r[t]){const s=e[i];n[i]=s}}return n},_z=e=>n9(e,"browser"),Tz=e=>n9(e,"export"),jle=e=>n9(e,"server"),To=({activeTool:e})=>e.type==="eraser",_h=({activeTool:e})=>e.type==="hand";class It{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t):t,o=i&&r!=="deleted"?i(n):n;return new It(s,o)}static calculate(t,n,i,r){if(t===n)return It.empty();const s={},o={};for(const c of this.distinctKeysIterator("full",t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return It.create(a,l,i)}static empty(){return new It({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(It.mergeObjects(ca(t??[],r),ca(n??[],r),ca(i??[],r)))}static diffObjects(t,n,i,r){if(!(!t[i]&&!n[i])&&(typeof t[i]=="object"||typeof n[i]=="object")){const s=t[i]??{},o=n[i]??{},a=It.getLeftDifferences(s,o).reduce((c,u)=>(c[u]=r(s[u]),c),{}),l=It.getRightDifferences(s,o).reduce((c,u)=>(c[u]=r(o[u]),c),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,i,a),Reflect.set(n,i,l)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=ca(It.getLeftDifferences(ca(s,r),ca(o,r))),l=ca(It.getRightDifferences(ca(s,r),ca(o,r)));if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i))}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i))}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):wc(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&vi(a,l))continue;yield o}}}}class ki{constructor(t){this.delta=t}static calculate(t,n){const i=It.calculate(t,n,void 0,ki.postProcess);return new ki(i)}static empty(){return new ki(It.create({},{}))}inverse(){const t=It.create(this.delta.inserted,this.delta.deleted);return new ki(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=It.mergeObjects(t.selectedElementIds,s,i),d=It.mergeObjects(t.selectedGroupIds,o,r),f=a&&n.has(a)?new ue(n.get(a)):null,h=l&&n.has(l)?new ue(n.get(l)):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return It.isEmpty(this.delta)}static postProcess(t,n){try{It.diffObjects(t,n,"selectedElementIds",i=>!0),It.diffObjects(t,n,"selectedGroupIds",i=>i??!1)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}filterInvisibleChanges(t,n,i){const r=C6(t),s=C6(n),o=It.isRightDifferent(ki.stripElementsProps(r),ki.stripElementsProps(s)),a=It.isRightDifferent(ki.stripStandaloneProps(r),ki.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=It.getRightDifferences(ki.stripStandaloneProps(r),ki.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=Roe(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=ki.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=ki.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d],b=p&&i.get(p);b&&!b.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=ki.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;default:wc(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}}const At=class At{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o=new Map,a=new Map,l=new Map,c=[...t,...n,...i];for(const[u,d]of c)this.satisfiesAddition(d)?o.set(u,d):this.satisfiesRemoval(d)?a.set(u,d):l.set(u,d);s=new At(o,a,l)}else s=new At(t,n,i);return s}static validate(t,n,i){for(const[r,s]of t[n].entries())if(!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsChange invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return At.empty();const i=new Map,r=new Map,s=new Map;for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0},u=It.create(l,c,At.stripIrrelevantProps);r.set(o.id,u)}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0},c={...o,isDeleted:!1},u=It.create(l,c,At.stripIrrelevantProps);i.set(o.id,u);continue}if(a.versionNonce!==o.versionNonce){const l=It.calculate(a,o,At.stripIrrelevantProps,At.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i.set(o.id,l):r.set(o.id,l);continue}It.isEmpty(l)||s.set(o.id,l)}}return At.create(i,r,s)}static empty(){return At.create(new Map,new Map,new Map)}inverse(){const t=s=>{const o=new Map;for(const[a,l]of s.entries())o.set(a,It.create(l.inserted,l.deleted));return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return At.create(i,n,r)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){const n=a=>l=>{const c={};for(const u of Object.keys(l))switch(u){case"boundElements":c[u]=l[u];break;default:c[u]=a[u]}return c},i=a=>{const l=new Map;for(const[c,u]of a.entries()){const d=t.get(c);if(d){const f=It.create(u.deleted,u.inserted,n(d),"inserted");l.set(c,f)}else l.set(c,u)}return l},r=i(this.added),s=i(this.removed),o=i(this.updated);return At.create(r,s,o,{shouldRedistribute:!0})}applyTo(t,n){let i=ys(new Map(t)),r;const s={containsVisibleDifference:!1,containsZindexDifference:!1};try{const o=At.createApplier(i,n,s),a=o(this.added),l=o(this.removed),c=o(this.updated),u=this.resolveConflicts(t,i);r=new Map([...a,...l,...c,...u])}catch(o){return console.error("Couldn't apply elements change",o),[t,!0]}try{At.redrawTextBoundingBoxes(i,r),i=At.reorderElements(i,r,s),At.redrawBoundArrows(i,r)}catch(o){console.error("Couldn't mutate elements after applying elements change",o)}finally{return[i,s.containsVisibleDifference]}}static applyDelta(t,n,i={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;const{boundElements:r,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){const l=It.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(s,{boundElements:l})}if(ot(t)){const l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!i.containsVisibleDifference){const{index:l,...c}=s,u=At.checkForVisibleDifference(t,c);i.containsVisibleDifference=u}return i.containsZindexDifference||(i.containsZindexDifference=n.deleted.index!==n.inserted.index),Ce(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:It.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,r=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Ce(d,u):f=ee(d,u),i.set(f.id,f),n.set(f.id,f)};for(const[c]of this.removed)At.unbindAffected(t,n,c,r);for(const[c]of this.added)At.rebindAffected(t,n,c,r);for(const[c]of Array.from(this.updated).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>Wse.has(f)))){const u=n.get(c);!u||u.isDeleted||At.rebindAffected(t,n,c,r)}const s=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=At.calculate(s,i);for(const[c,u]of o)this.added.set(c,u);for(const[c,u]of a)this.removed.set(c,u);for(const[c,u]of l)this.updated.set(c,u);return i}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);xf.unbindAffected(n,s(),r),xf.unbindAffected(n,o(),r),Cf.unbindAffected(n,s(),r),Cf.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);xf.unbindAffected(n,s(),r),xf.rebindAffected(n,o(),r),Cf.unbindAffected(n,s(),(a,l)=>{fe(a)&&r(a,l)}),Cf.rebindAffected(n,o(),r)}static redrawTextBoundingBoxes(t,n){const i=new Map;for(const r of n.values()){if(Ht(r)){const{containerId:s}=r,o=s?t.get(s):void 0;o&&i.set(o.id,{container:o,boundText:r})}if(br(r)){const s=jo(r),o=s?t.get(s):void 0;o&&i.set(r.id,{container:r,boundText:o})}}for(const{container:r,boundText:s}of i.values())r.isDeleted||s.isDeleted||Ji(s,r,t,!1)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&eo(i)&&mr(i,t,{})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=VF([...r]),o=It.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),Se(no(s,o))}static postProcess(t,n){try{It.diffArrays(t,n,"boundElements",i=>i.id)}catch{console.error("Couldn't postprocess elements change deltas.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,version:r,versionNonce:s,seed:o,...a}=t;return a}};F(At,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(At,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(At,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(At,"createApplier",(t,n,i)=>{const r=At.createGetter(t,n,i);return s=>Array.from(s.entries()).reduce((o,[a,l])=>{const c=r(a,l.inserted);if(c){const u=At.applyDelta(c,l,i);t.set(u.id,u),o.set(u.id,u)}return o},new Map)}),F(At,"createGetter",(t,n,i)=>(r,s)=>{let o=t.get(r);return o||(o=n.get(r),o&&(i.containsZindexDifference=!0,(s.isDeleted===!1||s.isDeleted!==!0&&o.isDeleted===!1)&&(i.containsVisibleDifference=!0))),o});let x6=At;class So{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}const Sz="__observedAppState",C6=e=>{var n,i;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((i=e.selectedLinearElement)==null?void 0:i.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,Sz,{value:!0,enumerable:!1}),t},Yle=e=>!!Reflect.get(e,Sz),K={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class Wle{constructor(t,n){this.elementsChange=t,this.appStateChange=n}}class Kle{constructor(){F(this,"onStoreIncrementEmitter",new So);F(this,"scheduledActions",new Set);F(this,"_snapshot",H0.empty());F(this,"shouldCaptureIncrement",()=>{this.scheduleAction(K.IMMEDIATELY)});F(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(K.NEVER)});F(this,"scheduleAction",t=>{this.scheduledActions.add(t),this.satisfiesScheduledActionsInvariant()});F(this,"commit",(t,n)=>{try{this.scheduledActions.has(K.IMMEDIATELY)?this.captureIncrement(t,n):this.scheduledActions.has(K.NEVER)&&this.updateSnapshot(t,n)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}});F(this,"captureIncrement",(t,n)=>{const i=this.snapshot,r=this.snapshot.maybeClone(t,n);if(i!==r){const s=r.meta.didElementsChange?x6.calculate(i.elements,r.elements):x6.empty(),o=r.meta.didAppStateChange?ki.calculate(i.appState,r.appState):ki.empty();(!s.isEmpty()||!o.isEmpty())&&this.onStoreIncrementEmitter.trigger(new Wle(s,o)),this.snapshot=r}});F(this,"updateSnapshot",(t,n)=>{const i=this.snapshot.maybeClone(t,n);this.snapshot!==i&&(this.snapshot=i)});F(this,"filterUncomittedElements",(t,n)=>{for(const[i,r]of t.entries()){if(!n.get(i))continue;const o=this.snapshot.elements.get(i);o?o.version<r.version&&n.set(i,o):n.delete(i)}return n});F(this,"clear",()=>{this.snapshot=H0.empty(),this.scheduledActions=new Set});F(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;console.error(t,this.scheduledActions.values())}})}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}}class H0{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=i}static empty(){return new H0(new Map,C6(so()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){const i=this.maybeCreateElementsSnapshot(t),r=this.maybeCreateAppStateSnapshot(n);let s=!1,o=!1;return this.elements!==i&&(s=!0),this.appState!==r&&(o=!0),!s&&!o?this:new H0(i,r,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;const n=Yle(t)?t:C6(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!vi(this.appState,t,{selectedElementIds:vi,selectedGroupIds:vi})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;const n=Array.from(t.keys());for(let i=n.length-1;i>=0;i--){const r=this.elements.get(n[i]),s=t.get(n[i]);if(!r||!s||r.id!==s.id||r.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){const n=new Map;for(const[i,r]of this.elements.entries())t.get(i)?n.set(i,r):n.set(i,Ce(r,{isDeleted:!0}));for(const[i,r]of t.entries()){const s=n.get(i);(!s||s&&s.versionNonce!==r.versionNonce)&&n.set(i,Sc(r))}return n}}const Ps=e=>"var(--icon-fill-color)",Iz=e=>e===xe.LIGHT?li.white:"#1e1e1e",Y=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:be({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},de={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Fe={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),de);const i9=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),de),Zle=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),de),qle=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),de),Qle=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),de),l5=Y(P("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Fe),r9=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Fe),Jle=Y(P(pe,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),ece=Y(P(pe,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),tce=Y(P(pe,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),QC=Y(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),nce=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),NE=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),ice=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),de),rce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),de),sce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),de),oce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),de),ace=Y(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Fe),lce=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),de),c5=Y(P("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Fe),xz=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),de),cce=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Fe),uce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),de),JC=Y(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Fe),eA=Y(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Fe),dce=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),de),sd=Y(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Fe),tA=Y(P("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Fe),PE=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Fe),FE=Y(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Fe),BE=Y(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Fe,strokeWidth:1.5}),Cz=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),de),u5=Y(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Fe),s9=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),de),fce=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),de),nA=Y(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Fe),o9=Y(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Fe),Az=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Fe),Rz=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),de),hce=Y(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),A6=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Fe),gce=Y("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),mce=Y("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),a9=Y(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Fe);Y("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const pce=Y("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),L8=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),de),Mz=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),de),Uce=Y("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Y("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Y("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const bce=Y("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Y("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const iA=Y(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Fe),rA=Y(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Fe),yce=Y("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),kz=Y(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Fe);Y("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");const Ece=Y("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),vce=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),de),wce=Y(P(pe,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});Y(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const Lz=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),Dz=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),sA=Y(Dz,de),oA=Y(Dz,{...de,style:{transform:"rotate(180deg)"}}),aA=Y(Lz,de),lA=Y(Lz,{...de,style:{transform:"rotate(180deg)"}}),cA=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),uA=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),dA=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),fA=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),_ce=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Tce=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),hA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Fe),gA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Fe),l9=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),de);Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const eg=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe);Y("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});Y("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Y("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const mA=ae.memo(({theme:e})=>Y(P(pe,{children:[g("path",{d:"M25 26H111V111H25",fill:Ps()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ps(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ps()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ps(),strokeWidth:"2"}),P("g",{fill:Iz(e),stroke:Ps(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),pA=ae.memo(({theme:e})=>Y(P(pe,{children:[g("path",{d:"M25 26H111V111H25",fill:Ps()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ps(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ps()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ps(),strokeWidth:"2"}),P("g",{fill:Iz(e),stroke:Ps(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Sce=Y(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Fe),Ice=Y(P(pe,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Fe),xce=Y(P(pe,{children:[P("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Cce=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Fe,fill:"currentColor"}),Oz=Y(g(pe,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),Ace=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Fe),Rce=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Fe);ae.memo(({theme:e})=>Y(g("path",{d:"M6 10H34",stroke:Ps(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Mce=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),de),kce=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),de),Lce=Y(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Fe),Dce=Y(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Fe),Oce=Y(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Fe),Nce=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Fe),Pce=Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),de),Fce=Y(P("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),de),Bce=ae.memo(({flip:e=!1})=>Y(P("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),zce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Hce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Vce=ae.memo(({flip:e=!1})=>Y(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),$ce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Gce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Xce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),jce=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Yce=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Wce=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Kce=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Zce=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),qce=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Qce=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Jce=Y(g(pe,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),d5=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),de),eue=Y(g(pe,{children:P("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),de),zE=Y(g(pe,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Fe),Nz=Y(P(pe,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),tue=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),de),nue=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),de),iue=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),de),rue=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),de)),sue=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),de)),oue=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),de)),Pz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),de),aue=Y(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Y(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const Fz=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),de),UA=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),de),jm=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),de),lue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),de),cue=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),de),uue=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),de),due=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),de),fue=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),de),hue=Y(P(pe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),de),gue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),de),mue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),de),HE=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),de),Bz=Y(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),QU=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Fe),VE=Y(P("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),zz=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),de);Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),de);Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),de);const pue=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),de),c9=Y(P("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),de),Uue=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),de),bue=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),de),yue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),de),od=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),de),Eue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),de),vue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),de),wue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),de),Hz=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),de),_ue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),de),Tue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),de),Sue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),de),Iue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),de),Vz=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),de),u9=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),de),xue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),de),Cue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),de),Aue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),de),Rue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),de),Mue=Y(P("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...de,strokeWidth:1.5});Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),de);const $z=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),de),kue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),de),Lue=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),de),Due=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),de),Oue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),de),Nue=Y(P("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),de),Gz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),de),Pue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),de),Fue=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),de),bA=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),de),Xz=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),de);class Bue extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class Th extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class yu extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class jz extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class Yz extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class $s extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const tl=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(ae.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Ze=ae.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=ta(),o=ae.useRef(null);ae.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=O.useState(!1),u=O.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(Nm(m))try{c(!0),await m}catch(b){if(b instanceof Th)console.warn(b);else throw b}finally{u.current&&c(!1)}};O.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=O.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return P("button",{className:be("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&P("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(tl,{})]}),i.showAriaLabel&&P("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(tl,{})]}),i.children]})}return P("label",{className:be("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),P("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Ze.displayName="ToolButton";let $E=[];const oe=e=>($E=$E.concat(e),e),zue=(e,t,n)=>{const i=new Set(Ve(e.filter(u=>Ie(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=to(e,u);for(const f of d)if(!o.has(f.id)){if(Ht(f)){const h=Bn(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Ht(u)?Bn(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&me(h)&&(ee(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding}),ee(h,{points:h.points}))}),Ce(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Ht(u)||(r[u.id]=!0),Ce(u,{frameId:null})):Ht(u)&&t.selectedElementIds[u.containerId]?Ce(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=zt(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=zt(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Li({selectedElementIds:r,editingGroupId:c},l,t,null)}}},yA=(e,t)=>{if(e.editingGroupId){const n=zt(Pt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},Wz=oe({name:"deleteSelectedElements",label:"labels.delete",icon:sd,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=ue.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Ce(p,{isDeleted:!0}):p),m=yA(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return ue.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:K.IMMEDIATELY}}let{elements:r,appState:s}=zue(e,t,i);return yF(r,r.filter(o=>o.isDeleted)),s=yA(s,r),{elements:r,appState:{...s,activeTool:dn(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:zn(Pt(e),t)?K.IMMEDIATELY:K.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===z.BACKSPACE||e.key===z.DELETE)&&!e[z.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",icon:sd,title:k("labels.delete"),"aria-label":k("labels.delete"),onClick:()=>n(null),visible:zn(Pt(e),t)})}),GE=(e,t)=>e.frameId===t||e.id===t,Kz=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=Se(n||Ve(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},Hue=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},EA=(e,t,n,i)=>{var r,s;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(s=(r=e.boundElements)==null?void 0:r.find(a=>a.type!=="arrow"))==null?void 0:s.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},Vue=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{GE(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},$ue=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?cu(t,f=>a(f),Math.max(0,n-1)):PP(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return EA(c,t,i,s)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!r&&(c.frameId||Ie(c))){const f=Vue(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return EA(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=zt(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},Zz=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),qz=(e,t,n,i)=>{const r=Kz(e,t),s=Zz(e,r);let o=Hue(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>Ie(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var v;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(w=>{const S=e[w];return S.frameId&&a.has(S.frameId)})?null:(v=e[f])==null?void 0:v.frameId,m=$ue(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),b=e.slice(u,d+1),E=n==="left"?e.slice(m,u):e.slice(d+1,m+1),y=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...b,...E,...y]:[...p,...E,...b,...y]}),no(e,s),e},Qz=(e,t,n,i,r)=>{const s=Kz(e,t,r),o=Zz(e,s),a=[];let l,c;if(n==="left"){if(i)l=PP(e,m=>GE(m,i));else if(t.editingGroupId){const m=zt(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=cu(e,m=>GE(m,i));else if(t.editingGroupId){const m=zt(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return no(h,o),h};function Jz(e,t,n,i){const r=Se(Ve(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&Ie(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(Ie(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const Gue=(e,t,n)=>qz(e,t,"left",n),Xue=(e,t,n)=>qz(e,t,"right",n),jue=(e,t)=>Jz(e,t,"left",Qz),Yue=(e,t)=>Jz(e,t,"right",Qz),Wue=oe({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:oA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Gue(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendBackward")} — ${Q("CtrlOrCmd+[")}`,children:oA})}),Kue=oe({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:sA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Xue(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.bringForward")} — ${Q("CtrlOrCmd+]")}`,children:sA})}),Zue=oe({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:lA,trackEvent:{category:"element"},perform:(e,t)=>({elements:jue(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Go?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_LEFT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendToBack")} — ${Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:lA})}),que=oe({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:aA,trackEvent:{category:"element"},perform:(e,t)=>({elements:Yue(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Go?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_RIGHT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${k("labels.bringToFront")} — ${Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:aA})}),Que=oe({name:"selectAll",label:"labels.selectAll",icon:_ue,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const r=e.filter(s=>!s.isDeleted&&!(fe(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Li({editingGroupId:null,selectedElementIds:r},Pt(e),t,i),selectedLinearElement:Object.keys(r).length===1&&ke(e[0])?new ue(e[0]):null},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.A}),Jue=oe({name:"duplicateSelection",label:"labels.duplicateSelection",icon:PE,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=ue.duplicateSelectedPoints(t,i.scene.getNonDeletedElementsMap());return{elements:e,appState:o,captureUpdate:K.IMMEDIATELY}}catch{return!1}let{duplicatedElements:r,elementsWithDuplicates:s}=T6({type:"in-place",elements:e,idsOfElementsToDuplicate:Se(Ve(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:o,origIdToDuplicateId:a})=>{const l=o.frameId&&a.get(o.frameId);return{x:o.x+J2/2,y:o.y+J2/2,frameId:l??o.frameId}}});if(i.props.onDuplicate&&s){const o=i.props.onDuplicate(s,e);o&&(s=o)}return{elements:no(s,Se(r)),appState:{...t,...LF(r,Pt(s),t)},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",icon:PE,title:`${k("labels.duplicateSelection")} — ${Q("CtrlOrCmd+D")}`,"aria-label":k("labels.duplicateSelection"),onClick:()=>n(null),visible:zn(Pt(e),t)})});var ede={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const tde=new Set(["command_palette","export"]),ut=(e,t,n,i)=>{try{if(typeof window>"u"||ede.VITE_WORKER_ID||!tde.has(e))return;BP(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},eH=O.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:be(i,{standalone:o,active:s}),onClick:l,children:a},n)}),Jo=e=>g("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?g(eH,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):P("label",{className:be({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function _i(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function vA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tH(...e){return t=>{let n=!1;const i=e.map(r=>{const s=vA(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():vA(e[r],null)}}}}function oo(...e){return O.useCallback(tH(...e),e)}function Ym(e,t=[]){let n=[];function i(s,o){const a=O.createContext(o),l=n.length;n=[...n,o];const c=d=>{var E;const{scope:f,children:h,...m}=d,p=((E=f==null?void 0:f[e])==null?void 0:E[l])||a,b=O.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:b,children:h})};c.displayName=s+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=O.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>O.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return O.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,nde(r,...t)]}function nde(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return O.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var V0=O.forwardRef((e,t)=>{const{children:n,...i}=e,r=O.Children.toArray(n),s=r.find(rde);if(s){const o=s.props.children,a=r.map(l=>l===s?O.Children.count(o)>1?O.Children.only(null):O.isValidElement(o)?o.props.children:null:l);return g(XE,{...i,ref:t,children:O.isValidElement(o)?O.cloneElement(o,void 0,a):null})}return g(XE,{...i,ref:t,children:n})});V0.displayName="Slot";var XE=O.forwardRef((e,t)=>{const{children:n,...i}=e;if(O.isValidElement(n)){const r=ode(n),s=sde(i,n.props);return n.type!==O.Fragment&&(s.ref=t?tH(t,r):r),O.cloneElement(n,s)}return O.Children.count(n)>1?O.Children.only(null):null});XE.displayName="SlotClone";var ide=({children:e})=>g(pe,{children:e});function rde(e){return O.isValidElement(e)&&e.type===ide}function sde(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function ode(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ade=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ir=ade.reduce((e,t)=>{const n=O.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?V0:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function lde(e,t){e&&jn.flushSync(()=>e.dispatchEvent(t))}function nl(e){const t=O.useRef(e);return O.useEffect(()=>{t.current=e}),O.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function cde(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e);O.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var ude="DismissableLayer",jE="dismissableLayer.update",dde="dismissableLayer.pointerDownOutside",fde="dismissableLayer.focusOutside",wA,nH=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iH=O.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=O.useContext(nH),[u,d]=O.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=O.useState({}),m=oo(t,_=>d(_)),p=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=p.indexOf(b),y=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,w=y>=E,S=mde(_=>{const T=_.target,x=[...c.branches].some(I=>I.contains(T));!w||x||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),R=pde(_=>{const T=_.target;[...c.branches].some(I=>I.contains(T))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return cde(_=>{y===c.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),O.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),_A(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=wA)}},[u,f,n,c]),O.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),_A())},[u,c]),O.useEffect(()=>{const _=()=>h({});return document.addEventListener(jE,_),()=>document.removeEventListener(jE,_)},[]),g(ir.div,{...l,ref:m,style:{pointerEvents:v?w?"auto":"none":void 0,...e.style},onFocusCapture:_i(e.onFocusCapture,R.onFocusCapture),onBlurCapture:_i(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:_i(e.onPointerDownCapture,S.onPointerDownCapture)})});iH.displayName=ude;var hde="DismissableLayerBranch",gde=O.forwardRef((e,t)=>{const n=O.useContext(nH),i=O.useRef(null),r=oo(t,i);return O.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(ir.div,{...e,ref:r})});gde.displayName=hde;function mde(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e),i=O.useRef(!1),r=O.useRef(()=>{});return O.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){rH(dde,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function pde(e,t=globalThis==null?void 0:globalThis.document){const n=nl(e),i=O.useRef(!1);return O.useEffect(()=>{const r=s=>{s.target&&!i.current&&rH(fde,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function _A(){const e=new CustomEvent(jE);document.dispatchEvent(e)}function rH(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?lde(r,s):r.dispatchEvent(s)}var D8=0;function Ude(){O.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??TA()),document.body.insertAdjacentElement("beforeend",e[1]??TA()),D8++,()=>{D8===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),D8--}},[])}function TA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var O8="focusScope.autoFocusOnMount",N8="focusScope.autoFocusOnUnmount",SA={bubbles:!1,cancelable:!0},bde="FocusScope",sH=O.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=O.useState(null),c=nl(r),u=nl(s),d=O.useRef(null),f=oo(t,p=>l(p)),h=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(i){let p=function(v){if(h.paused||!a)return;const w=v.target;a.contains(w)?d.current=w:Tl(d.current,{select:!0})},b=function(v){if(h.paused||!a)return;const w=v.relatedTarget;w!==null&&(a.contains(w)||Tl(d.current,{select:!0}))},E=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&Tl(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,h.paused]),O.useEffect(()=>{if(a){xA.add(h);const p=document.activeElement;if(!a.contains(p)){const E=new CustomEvent(O8,SA);a.addEventListener(O8,c),a.dispatchEvent(E),E.defaultPrevented||(yde(Tde(oH(a)),{select:!0}),document.activeElement===p&&Tl(a))}return()=>{a.removeEventListener(O8,c),setTimeout(()=>{const E=new CustomEvent(N8,SA);a.addEventListener(N8,u),a.dispatchEvent(E),E.defaultPrevented||Tl(p??document.body,{select:!0}),a.removeEventListener(N8,u),xA.remove(h)},0)}}},[a,c,u,h]);const m=O.useCallback(p=>{if(!n&&!i||h.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,E=document.activeElement;if(b&&E){const y=p.currentTarget,[v,w]=Ede(y);v&&w?!p.shiftKey&&E===w?(p.preventDefault(),n&&Tl(v,{select:!0})):p.shiftKey&&E===v&&(p.preventDefault(),n&&Tl(w,{select:!0})):E===y&&p.preventDefault()}},[n,i,h.paused]);return g(ir.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});sH.displayName=bde;function yde(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Tl(i,{select:t}),document.activeElement!==n)return}function Ede(e){const t=oH(e),n=IA(t,e),i=IA(t.reverse(),e);return[n,i]}function oH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function IA(e,t){for(const n of e)if(!vde(n,{upTo:t}))return n}function vde(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wde(e){return e instanceof HTMLInputElement&&"select"in e}function Tl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&wde(e)&&t&&e.select()}}var xA=_de();function _de(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=CA(e,t),e.unshift(t)},remove(t){var n;e=CA(e,t),(n=e[0])==null||n.resume()}}}function CA(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function Tde(e){return e.filter(t=>t.tagName!=="A")}var ad=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},Sde=tK.useId||(()=>{}),Ide=0;function d9(e){const[t,n]=O.useState(Sde());return ad(()=>{n(i=>i??String(Ide++))},[e]),e||(t?`radix-${t}`:"")}const xde=["top","right","bottom","left"],Ic=Math.min,Ar=Math.max,R6=Math.round,nU=Math.floor,zo=e=>({x:e,y:e}),Cde={left:"right",right:"left",bottom:"top",top:"bottom"},Ade={start:"end",end:"start"};function YE(e,t,n){return Ar(e,Ic(t,n))}function il(e,t){return typeof e=="function"?e(t):e}function rl(e){return e.split("-")[0]}function tg(e){return e.split("-")[1]}function f9(e){return e==="x"?"y":"x"}function h9(e){return e==="y"?"height":"width"}function xc(e){return["top","bottom"].includes(rl(e))?"y":"x"}function g9(e){return f9(xc(e))}function Rde(e,t,n){n===void 0&&(n=!1);const i=tg(e),r=g9(e),s=h9(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=M6(o)),[o,M6(o)]}function Mde(e){const t=M6(e);return[WE(e),t,WE(t)]}function WE(e){return e.replace(/start|end/g,t=>Ade[t])}function kde(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function Lde(e,t,n,i){const r=tg(e);let s=kde(rl(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(WE)))),s}function M6(e){return e.replace(/left|right|bottom|top/g,t=>Cde[t])}function Dde(e){return{top:0,right:0,bottom:0,left:0,...e}}function aH(e){return typeof e!="number"?Dde(e):{top:e,right:e,bottom:e,left:e}}function k6(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function AA(e,t,n){let{reference:i,floating:r}=e;const s=xc(t),o=g9(t),a=h9(o),l=rl(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(tg(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Ode=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=AA(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:b,fn:E}=a[p],{x:y,y:v,data:w,reset:S}=await E({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=v??d,h={...h,[b]:{...h[b],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:u,y:d}=AA(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function $0(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=il(t,e),m=aH(h),b=a[f?d==="floating"?"reference":"floating":d],E=k6(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=k6(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(E.top-S.top+m.top)/w.y,bottom:(S.bottom-E.bottom+m.bottom)/w.y,left:(E.left-S.left+m.left)/w.x,right:(S.right-E.right+m.right)/w.x}}const Nde=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=il(e,t)||{};if(c==null)return{};const d=aH(u),f={x:n,y:i},h=g9(r),m=h9(h),p=await o.getDimensions(c),b=h==="y",E=b?"top":"left",y=b?"bottom":"right",v=b?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-f[h]-s.floating[m],S=f[h]-s.reference[h],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=R?R[v]:0;(!_||!await(o.isElement==null?void 0:o.isElement(R)))&&(_=a.floating[v]||s.floating[m]);const T=w/2-S/2,x=_/2-p[m]/2-1,I=Ic(d[E],x),M=Ic(d[y],x),D=I,L=_-p[m]-M,G=_/2-p[m]/2+T,H=YE(D,G,L),V=!l.arrow&&tg(r)!=null&&G!==H&&s.reference[m]/2-(G<D?I:M)-p[m]/2<0,$=V?G<D?G-D:G-L:0;return{[h]:f[h]+$,data:{[h]:H,centerOffset:G-H-$,...V&&{alignmentOffset:$}},reset:V}}}),Pde=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...b}=il(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=rl(r),y=xc(a),v=rl(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(v||!p?[M6(a)]:Mde(a)),R=m!=="none";!f&&R&&S.push(...Lde(a,p,m,w));const _=[a,...S],T=await $0(t,b),x=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&x.push(T[E]),d){const G=Rde(r,o,w);x.push(T[G[0]],T[G[1]])}if(I=[...I,{placement:r,overflows:x}],!x.every(G=>G<=0)){var M,D;const G=(((M=s.flip)==null?void 0:M.index)||0)+1,H=_[G];if(H)return{data:{index:G,overflows:I},reset:{placement:H}};let V=(D=I.filter($=>$.overflows[0]<=0).sort(($,j)=>$.overflows[1]-j.overflows[1])[0])==null?void 0:D.placement;if(!V)switch(h){case"bestFit":{var L;const $=(L=I.filter(j=>{if(R){const X=xc(j.placement);return X===y||X==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(X=>X>0).reduce((X,Z)=>X+Z,0)]).sort((j,X)=>j[1]-X[1])[0])==null?void 0:L[0];$&&(V=$);break}case"initialPlacement":V=a;break}if(r!==V)return{reset:{placement:V}}}return{}}}};function RA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function MA(e){return xde.some(t=>e[t]>=0)}const Fde=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=il(e,t);switch(i){case"referenceHidden":{const s=await $0(t,{...r,elementContext:"reference"}),o=RA(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MA(o)}}}case"escaped":{const s=await $0(t,{...r,altBoundary:!0}),o=RA(s,n.floating);return{data:{escapedOffsets:o,escaped:MA(o)}}}default:return{}}}}};async function Bde(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=rl(n),a=tg(n),l=xc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=il(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const zde=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await Bde(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Hde=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y}=b;return{x:E,y}}},...l}=il(e,t),c={x:n,y:i},u=await $0(t,l),d=xc(rl(r)),f=f9(d);let h=c[f],m=c[d];if(s){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=h+u[b],v=h-u[E];h=YE(y,h,v)}if(o){const b=d==="y"?"top":"left",E=d==="y"?"bottom":"right",y=m+u[b],v=m-u[E];m=YE(y,m,v)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},Vde=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=il(e,t),u={x:n,y:i},d=xc(r),f=f9(d);let h=u[f],m=u[d];const p=il(a,t),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=f==="y"?"height":"width",w=s.reference[f]-s.floating[v]+b.mainAxis,S=s.reference[f]+s.reference[v]-b.mainAxis;h<w?h=w:h>S&&(h=S)}if(c){var E,y;const v=f==="y"?"width":"height",w=["top","left"].includes(rl(r)),S=s.reference[d]-s.floating[v]+(w&&((E=o.offset)==null?void 0:E[d])||0)+(w?0:b.crossAxis),R=s.reference[d]+s.reference[v]+(w?0:((y=o.offset)==null?void 0:y[d])||0)-(w?b.crossAxis:0);m<S?m=S:m>R&&(m=R)}return{[f]:h,[d]:m}}}},$de=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=il(e,t),u=await $0(t,c),d=rl(r),f=tg(r),h=xc(r)==="y",{width:m,height:p}=s.floating;let b,E;d==="top"||d==="bottom"?(b=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,b=f==="end"?"top":"bottom");const y=p-u.top-u.bottom,v=m-u.left-u.right,w=Ic(p-u[b],y),S=Ic(m-u[E],v),R=!t.middlewareData.shift;let _=w,T=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(_=y),R&&!f){const I=Ar(u.left,0),M=Ar(u.right,0),D=Ar(u.top,0),L=Ar(u.bottom,0);h?T=m-2*(I!==0||M!==0?I+M:Ar(u.left,u.right)):_=p-2*(D!==0||L!==0?D+L:Ar(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:_});const x=await o.getDimensions(a.floating);return m!==x.width||p!==x.height?{reset:{rects:!0}}:{}}}};function f5(){return typeof window<"u"}function ng(e){return lH(e)?(e.nodeName||"").toLowerCase():"#document"}function Br(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ea(e){var t;return(t=(lH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lH(e){return f5()?e instanceof Node||e instanceof Br(e).Node:!1}function ao(e){return f5()?e instanceof Element||e instanceof Br(e).Element:!1}function Wo(e){return f5()?e instanceof HTMLElement||e instanceof Br(e).HTMLElement:!1}function kA(e){return!f5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Br(e).ShadowRoot}function Wm(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=lo(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function Gde(e){return["table","td","th"].includes(ng(e))}function h5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function m9(e){const t=p9(),n=ao(e)?lo(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Xde(e){let t=Cc(e);for(;Wo(t)&&!Sh(t);){if(m9(t))return t;if(h5(t))return null;t=Cc(t)}return null}function p9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Sh(e){return["html","body","#document"].includes(ng(e))}function lo(e){return Br(e).getComputedStyle(e)}function g5(e){return ao(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Cc(e){if(ng(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kA(e)&&e.host||ea(e);return kA(t)?t.host:t}function cH(e){const t=Cc(e);return Sh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wo(t)&&Wm(t)?t:cH(t)}function G0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=cH(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=Br(r);if(s){const a=KE(o);return t.concat(o,o.visualViewport||[],Wm(r)?r:[],a&&n?G0(a):[])}return t.concat(r,G0(r,[],n))}function KE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function uH(e){const t=lo(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Wo(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=R6(n)!==s||R6(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function U9(e){return ao(e)?e:e.contextElement}function Xf(e){const t=U9(e);if(!Wo(t))return zo(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=uH(t);let o=(s?R6(n.width):n.width)/i,a=(s?R6(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jde=zo(0);function dH(e){const t=Br(e);return!p9()||!t.visualViewport?jde:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Yde(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Br(e)?!1:t}function ld(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=U9(e);let o=zo(1);t&&(i?ao(i)&&(o=Xf(i)):o=Xf(e));const a=Yde(s,n,i)?dH(s):zo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Br(s),h=i&&ao(i)?Br(i):i;let m=f,p=KE(m);for(;p&&i&&h!==m;){const b=Xf(p),E=p.getBoundingClientRect(),y=lo(p),v=E.left+(p.clientLeft+parseFloat(y.paddingLeft))*b.x,w=E.top+(p.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=v,c+=w,m=Br(p),p=KE(m)}}return k6({width:u,height:d,x:l,y:c})}function b9(e,t){const n=g5(e).scrollLeft;return t?t.left+n:ld(ea(e)).left+n}function fH(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:b9(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function Wde(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=ea(i),a=t?h5(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=zo(1);const u=zo(0),d=Wo(i);if((d||!d&&!s)&&((ng(i)!=="body"||Wm(o))&&(l=g5(i)),Wo(i))){const h=ld(i);c=Xf(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?fH(o,l,!0):zo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Kde(e){return Array.from(e.getClientRects())}function Zde(e){const t=ea(e),n=g5(e),i=e.ownerDocument.body,r=Ar(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Ar(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+b9(e);const a=-n.scrollTop;return lo(i).direction==="rtl"&&(o+=Ar(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function qde(e,t){const n=Br(e),i=ea(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=p9();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function Qde(e,t){const n=ld(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=Wo(e)?Xf(e):zo(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function LA(e,t,n){let i;if(t==="viewport")i=qde(e,n);else if(t==="document")i=Zde(ea(e));else if(ao(t))i=Qde(t,n);else{const r=dH(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return k6(i)}function hH(e,t){const n=Cc(e);return n===t||!ao(n)||Sh(n)?!1:lo(n).position==="fixed"||hH(n,t)}function Jde(e,t){const n=t.get(e);if(n)return n;let i=G0(e,[],!1).filter(a=>ao(a)&&ng(a)!=="body"),r=null;const s=lo(e).position==="fixed";let o=s?Cc(e):e;for(;ao(o)&&!Sh(o);){const a=lo(o),l=m9(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Wm(o)&&!l&&hH(e,o))?i=i.filter(u=>u!==o):r=a,o=Cc(o)}return t.set(e,i),i}function efe(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?h5(t)?[]:Jde(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=LA(t,u,r);return c.top=Ar(d.top,c.top),c.right=Ic(d.right,c.right),c.bottom=Ic(d.bottom,c.bottom),c.left=Ar(d.left,c.left),c},LA(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tfe(e){const{width:t,height:n}=uH(e);return{width:t,height:n}}function nfe(e,t,n){const i=Wo(t),r=ea(t),s=n==="fixed",o=ld(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=zo(0);if(i||!i&&!s)if((ng(t)!=="body"||Wm(r))&&(a=g5(t)),i){const f=ld(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=b9(r));const c=r&&!i&&!s?fH(r,a):zo(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function P8(e){return lo(e).position==="static"}function DA(e,t){if(!Wo(e)||lo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ea(e)===n&&(n=n.ownerDocument.body),n}function gH(e,t){const n=Br(e);if(h5(e))return n;if(!Wo(e)){let r=Cc(e);for(;r&&!Sh(r);){if(ao(r)&&!P8(r))return r;r=Cc(r)}return n}let i=DA(e,t);for(;i&&Gde(i)&&P8(i);)i=DA(i,t);return i&&Sh(i)&&P8(i)&&!m9(i)?n:i||Xde(e)||n}const ife=async function(e){const t=this.getOffsetParent||gH,n=this.getDimensions,i=await n(e.floating);return{reference:nfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function rfe(e){return lo(e).direction==="rtl"}const sfe={convertOffsetParentRelativeRectToViewportRelativeRect:Wde,getDocumentElement:ea,getClippingRect:efe,getOffsetParent:gH,getElementRects:ife,getClientRects:Kde,getDimensions:tfe,getScale:Xf,isElement:ao,isRTL:rfe};function mH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ofe(e,t){let n=null,i;const r=ea(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=nU(d),p=nU(r.clientWidth-(u+f)),b=nU(r.clientHeight-(d+h)),E=nU(u),v={rootMargin:-m+"px "+-p+"px "+-b+"px "+-E+"px",threshold:Ar(0,Ic(1,l))||1};let w=!0;function S(R){const _=R[0].intersectionRatio;if(_!==l){if(!w)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!mH(c,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return o(!0),s}function afe(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=U9(e),u=r||s?[...c?G0(c):[],...G0(t)]:[];u.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const d=c&&a?ofe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?ld(e):null;l&&b();function b(){const E=ld(e);p&&!mH(p,E)&&n(),p=E,m=requestAnimationFrame(b)}return n(),()=>{var E;u.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(E=h)==null||E.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const lfe=zde,cfe=Hde,ufe=Pde,dfe=$de,ffe=Fde,OA=Nde,hfe=Vde,gfe=(e,t,n)=>{const i=new Map,r={platform:sfe,...n},s={...r.platform,_c:i};return Ode(e,t,{...r,platform:s})};var JU=typeof document<"u"?O.useLayoutEffect:O.useEffect;function L6(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!L6(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!L6(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function pH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NA(e,t){const n=pH(e);return Math.round(t*n)/n}function F8(e){const t=O.useRef(e);return JU(()=>{t.current=e}),t}function mfe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=O.useState(i);L6(f,i)||h(i);const[m,p]=O.useState(null),[b,E]=O.useState(null),y=O.useCallback(j=>{j!==R.current&&(R.current=j,p(j))},[]),v=O.useCallback(j=>{j!==_.current&&(_.current=j,E(j))},[]),w=s||m,S=o||b,R=O.useRef(null),_=O.useRef(null),T=O.useRef(u),x=l!=null,I=F8(l),M=F8(r),D=F8(c),L=O.useCallback(()=>{if(!R.current||!_.current)return;const j={placement:t,strategy:n,middleware:f};M.current&&(j.platform=M.current),gfe(R.current,_.current,j).then(X=>{const Z={...X,isPositioned:D.current!==!1};G.current&&!L6(T.current,Z)&&(T.current=Z,jn.flushSync(()=>{d(Z)}))})},[f,t,n,M,D]);JU(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const G=O.useRef(!1);JU(()=>(G.current=!0,()=>{G.current=!1}),[]),JU(()=>{if(w&&(R.current=w),S&&(_.current=S),w&&S){if(I.current)return I.current(w,S,L);L()}},[w,S,L,I,x]);const H=O.useMemo(()=>({reference:R,floating:_,setReference:y,setFloating:v}),[y,v]),V=O.useMemo(()=>({reference:w,floating:S}),[w,S]),$=O.useMemo(()=>{const j={position:n,left:0,top:0};if(!V.floating)return j;const X=NA(V.floating,u.x),Z=NA(V.floating,u.y);return a?{...j,transform:"translate("+X+"px, "+Z+"px)",...pH(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:Z}},[n,a,V.floating,u.x,u.y]);return O.useMemo(()=>({...u,update:L,refs:H,elements:V,floatingStyles:$}),[u,L,H,V,$])}const pfe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?OA({element:i.current,padding:r}).fn(n):{}:i?OA({element:i,padding:r}).fn(n):{}}}},Ufe=(e,t)=>({...lfe(e),options:[e,t]}),bfe=(e,t)=>({...cfe(e),options:[e,t]}),yfe=(e,t)=>({...hfe(e),options:[e,t]}),Efe=(e,t)=>({...ufe(e),options:[e,t]}),vfe=(e,t)=>({...dfe(e),options:[e,t]}),wfe=(e,t)=>({...ffe(e),options:[e,t]}),_fe=(e,t)=>({...pfe(e),options:[e,t]});var Tfe="Arrow",UH=O.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(ir.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});UH.displayName=Tfe;var Sfe=UH;function Ife(e){const[t,n]=O.useState(void 0);return ad(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var y9="Popper",[bH,yH]=Ym(y9),[xfe,EH]=bH(y9),vH=e=>{const{__scopePopper:t,children:n}=e,[i,r]=O.useState(null);return g(xfe,{scope:t,anchor:i,onAnchorChange:r,children:n})};vH.displayName=y9;var wH="PopperAnchor",_H=O.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=EH(wH,n),o=O.useRef(null),a=oo(t,o);return O.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(ir.div,{...r,ref:a})});_H.displayName=wH;var E9="PopperContent",[Cfe,Afe]=bH(E9),TH=O.forwardRef((e,t)=>{var at,$t,tn,Ae,Ge,Gt;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,b=EH(E9,n),[E,y]=O.useState(null),v=oo(t,vs=>y(vs)),[w,S]=O.useState(null),R=Ife(w),_=(R==null?void 0:R.width)??0,T=(R==null?void 0:R.height)??0,x=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(c)?c:[c],D=M.length>0,L={padding:I,boundary:M.filter(Mfe),altBoundary:D},{refs:G,floatingStyles:H,placement:V,isPositioned:$,middlewareData:j}=mfe({strategy:"fixed",placement:x,whileElementsMounted:(...vs)=>afe(...vs,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[Ufe({mainAxis:r+T,alignmentAxis:o}),l&&bfe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?yfe():void 0,...L}),l&&Efe({...L}),vfe({...L,apply:({elements:vs,rects:na,availableWidth:go,availableHeight:mo})=>{const{width:Xr,height:sy}=na.reference,$c=vs.floating.style;$c.setProperty("--radix-popper-available-width",`${go}px`),$c.setProperty("--radix-popper-available-height",`${mo}px`),$c.setProperty("--radix-popper-anchor-width",`${Xr}px`),$c.setProperty("--radix-popper-anchor-height",`${sy}px`)}}),w&&_fe({element:w,padding:a}),kfe({arrowWidth:_,arrowHeight:T}),f&&wfe({strategy:"referenceHidden",...L})]}),[X,Z]=xH(V),ge=nl(m);ad(()=>{$&&(ge==null||ge())},[$,ge]);const ce=(at=j.arrow)==null?void 0:at.x,le=($t=j.arrow)==null?void 0:$t.y,Be=((tn=j.arrow)==null?void 0:tn.centerOffset)!==0,[$e,Tt]=O.useState();return ad(()=>{E&&Tt(window.getComputedStyle(E).zIndex)},[E]),g("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:$?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(Ae=j.transformOrigin)==null?void 0:Ae.x,(Ge=j.transformOrigin)==null?void 0:Ge.y].join(" "),...((Gt=j.hide)==null?void 0:Gt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(Cfe,{scope:n,placedSide:X,onArrowChange:S,arrowX:ce,arrowY:le,shouldHideArrow:Be,children:g(ir.div,{"data-side":X,"data-align":Z,...p,ref:v,style:{...p.style,animation:$?void 0:"none"}})})})});TH.displayName=E9;var SH="PopperArrow",Rfe={top:"bottom",right:"left",bottom:"top",left:"right"},IH=O.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=Afe(SH,i),o=Rfe[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(Sfe,{...r,ref:n,style:{...r.style,display:"block"}})})});IH.displayName=SH;function Mfe(e){return e!==null}var kfe=e=>({name:"transformOrigin",options:e,fn(t){var b,E,y;const{placement:n,rects:i,middlewareData:r}=t,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=xH(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=r.arrow)==null?void 0:E.x)??0)+a/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function xH(e){const[t,n="center"]=e.split("-");return[t,n]}var Lfe=vH,CH=_H,Dfe=TH,Ofe=IH,Nfe="Portal",AH=O.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[r,s]=O.useState(!1);ad(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?oK.createPortal(g(ir.div,{...i,ref:t}),o):null});AH.displayName=Nfe;function Pfe(e,t){return O.useReducer((n,i)=>t[n][i]??n,e)}var m5=e=>{const{present:t,children:n}=e,i=Ffe(t),r=typeof n=="function"?n({present:i.isPresent}):O.Children.only(n),s=oo(i.ref,Bfe(r));return typeof n=="function"||i.isPresent?O.cloneElement(r,{ref:s}):null};m5.displayName="Presence";function Ffe(e){const[t,n]=O.useState(),i=O.useRef({}),r=O.useRef(e),s=O.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Pfe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const c=iU(i.current);s.current=a==="mounted"?c:"none"},[a]),ad(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=iU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),ad(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=iU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=h=>{h.target===t&&(s.current=iU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:O.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function iU(e){return(e==null?void 0:e.animationName)||"none"}function Bfe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function v9({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=zfe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=nl(n),l=O.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function zfe({defaultProp:e,onChange:t}){const n=O.useState(e),[i]=n,r=O.useRef(i),s=nl(t);return O.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var Hfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gd=new WeakMap,rU=new WeakMap,sU={},B8=0,RH=function(e){return e&&(e.host||RH(e.parentNode))},Vfe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=RH(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},$fe=function(e,t,n,i){var r=Vfe(t,Array.isArray(e)?e:[e]);sU[n]||(sU[n]=new WeakMap);var s=sU[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(Gd.get(f)||0)+1,b=(s.get(f)||0)+1;Gd.set(f,p),s.set(f,b),o.push(f),p===1&&m&&rU.set(f,!0),b===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(t),a.clear(),B8++,function(){o.forEach(function(d){var f=Gd.get(d)-1,h=s.get(d)-1;Gd.set(d,f),s.set(d,h),f||(rU.has(d)||d.removeAttribute(i),rU.delete(d)),h||d.removeAttribute(n)}),B8--,B8||(Gd=new WeakMap,Gd=new WeakMap,rU=new WeakMap,sU={})}},Gfe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=Hfe(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),$fe(i,r,n,"aria-hidden")):function(){return null}},Mo=function(){return Mo=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Mo.apply(this,arguments)};function MH(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Xfe(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var e2="right-scroll-bar-position",t2="width-before-scroll-bar",jfe="with-scroll-bars-hidden",Yfe="--removed-body-scroll-bar-size";function z8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Wfe(e,t){var n=O.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var Kfe=typeof window<"u"?O.useLayoutEffect:O.useEffect,PA=new WeakMap;function Zfe(e,t){var n=Wfe(null,function(i){return e.forEach(function(r){return z8(r,i)})});return Kfe(function(){var i=PA.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||z8(a,null)}),s.forEach(function(a){r.has(a)||z8(a,o)})}PA.set(n,e)},[e]),n}function qfe(e){return e}function Qfe(e,t){t===void 0&&(t=qfe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Jfe(e){e===void 0&&(e={});var t=Qfe(null);return t.options=Mo({async:!0,ssr:!1},e),t}var kH=function(e){var t=e.sideCar,n=MH(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return O.createElement(i,Mo({},n))};kH.isSideCarExport=!0;function ehe(e,t){return e.useMedium(t),kH}var LH=Jfe(),H8=function(){},p5=O.forwardRef(function(e,t){var n=O.useRef(null),i=O.useState({onScrollCapture:H8,onWheelCapture:H8,onTouchMoveCapture:H8}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,b=e.as,E=b===void 0?"div":b,y=e.gapMode,v=MH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,S=Zfe([n,t]),R=Mo(Mo({},v),r);return O.createElement(O.Fragment,null,u&&O.createElement(w,{sideCar:LH,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?O.cloneElement(O.Children.only(a),Mo(Mo({},R),{ref:S})):O.createElement(E,Mo({},R,{className:l,ref:S}),a))});p5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};p5.classNames={fullWidth:t2,zeroRight:e2};var the=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=the();return t&&e.setAttribute("nonce",t),e}function ihe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function rhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var she=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nhe())&&(ihe(t,n),rhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ohe=function(){var e=she();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},DH=function(){var e=ohe(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},ahe={left:0,top:0,right:0,gap:0},V8=function(e){return parseInt(e||"",10)||0},lhe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[V8(n),V8(i),V8(r)]},che=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ahe;var t=lhe(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},uhe=DH(),jf="data-scroll-locked",dhe=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(jfe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(jf,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(e2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(t2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(e2," .").concat(e2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(t2," .").concat(t2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(jf,`] {
    `).concat(Yfe,": ").concat(a,`px;
  }
`)},FA=function(){var e=parseInt(document.body.getAttribute(jf)||"0",10);return isFinite(e)?e:0},fhe=function(){O.useEffect(function(){return document.body.setAttribute(jf,(FA()+1).toString()),function(){var e=FA()-1;e<=0?document.body.removeAttribute(jf):document.body.setAttribute(jf,e.toString())}},[])},hhe=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;fhe();var s=O.useMemo(function(){return che(r)},[r]);return O.createElement(uhe,{styles:dhe(s,!t,r,n?"":"!important")})},ZE=!1;if(typeof window<"u")try{var oU=Object.defineProperty({},"passive",{get:function(){return ZE=!0,!0}});window.addEventListener("test",oU,oU),window.removeEventListener("test",oU,oU)}catch{ZE=!1}var Xd=ZE?{passive:!1}:!1,ghe=function(e){return e.tagName==="TEXTAREA"},OH=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ghe(e)&&n[t]==="visible")},mhe=function(e){return OH(e,"overflowY")},phe=function(e){return OH(e,"overflowX")},BA=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=NH(e,i);if(r){var s=PH(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Uhe=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},bhe=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},NH=function(e,t){return e==="v"?mhe(t):phe(t)},PH=function(e,t){return e==="v"?Uhe(t):bhe(t)},yhe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ehe=function(e,t,n,i,r){var s=yhe(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=PH(e,a),m=h[0],p=h[1],b=h[2],E=p-b-s*m;(m||E)&&NH(e,a)&&(d+=E,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},aU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zA=function(e){return[e.deltaX,e.deltaY]},HA=function(e){return e&&"current"in e?e.current:e},vhe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},whe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_he=0,jd=[];function The(e){var t=O.useRef([]),n=O.useRef([0,0]),i=O.useRef(),r=O.useState(_he++)[0],s=O.useState(DH)[0],o=O.useRef(e);O.useEffect(function(){o.current=e},[e]),O.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=Xfe([e.lockRef.current],(e.shards||[]).map(HA),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=O.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var E=aU(p),y=n.current,v="deltaX"in p?p.deltaX:y[0]-E[0],w="deltaY"in p?p.deltaY:y[1]-E[1],S,R=p.target,_=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in p&&_==="h"&&R.type==="range")return!1;var T=BA(_,R);if(!T)return!0;if(T?S=_:(S=_==="v"?"h":"v",T=BA(_,R)),!T)return!1;if(!i.current&&"changedTouches"in p&&(v||w)&&(i.current=S),!S)return!0;var x=i.current||S;return Ehe(x,b,p,x==="h"?v:w)},[]),l=O.useCallback(function(p){var b=p;if(!(!jd.length||jd[jd.length-1]!==s)){var E="deltaY"in b?zA(b):aU(b),y=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&vhe(S.delta,E)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var v=(o.current.shards||[]).map(HA).filter(Boolean).filter(function(S){return S.contains(b.target)}),w=v.length>0?a(b,v[0]):!o.current.noIsolation;w&&b.cancelable&&b.preventDefault()}}},[]),c=O.useCallback(function(p,b,E,y){var v={name:p,delta:b,target:E,should:y,shadowParent:She(E)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(w){return w!==v})},1)},[]),u=O.useCallback(function(p){n.current=aU(p),i.current=void 0},[]),d=O.useCallback(function(p){c(p.type,zA(p),p.target,a(p,e.lockRef.current))},[]),f=O.useCallback(function(p){c(p.type,aU(p),p.target,a(p,e.lockRef.current))},[]);O.useEffect(function(){return jd.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Xd),document.addEventListener("touchmove",l,Xd),document.addEventListener("touchstart",u,Xd),function(){jd=jd.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Xd),document.removeEventListener("touchmove",l,Xd),document.removeEventListener("touchstart",u,Xd)}},[]);var h=e.removeScrollBar,m=e.inert;return O.createElement(O.Fragment,null,m?O.createElement(s,{styles:whe(r)}):null,h?O.createElement(hhe,{gapMode:e.gapMode}):null)}function She(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ihe=ehe(LH,The);var FH=O.forwardRef(function(e,t){return O.createElement(p5,Mo({},e,{ref:t,sideCar:Ihe}))});FH.classNames=p5.classNames;var w9="Popover",[BH,TIe]=Ym(w9,[yH]),Km=yH(),[xhe,Hc]=BH(w9),zH=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=Km(t),l=O.useRef(null),[c,u]=O.useState(!1),[d=!1,f]=v9({prop:i,defaultProp:r,onChange:s});return g(Lfe,{...a,children:g(xhe,{scope:t,contentId:d9(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:O.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:O.useCallback(()=>u(!0),[]),onCustomAnchorRemove:O.useCallback(()=>u(!1),[]),modal:o,children:n})})};zH.displayName=w9;var HH="PopoverAnchor",Che=O.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Hc(HH,n),s=Km(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return O.useEffect(()=>(o(),()=>a()),[o,a]),g(CH,{...s,...i,ref:t})});Che.displayName=HH;var VH="PopoverTrigger",$H=O.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Hc(VH,n),s=Km(n),o=oo(t,r.triggerRef),a=g(ir.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":KH(r.open),...i,ref:o,onClick:_i(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(CH,{asChild:!0,...s,children:a})});$H.displayName=VH;var _9="PopoverPortal",[Ahe,Rhe]=BH(_9,{forceMount:void 0}),GH=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=Hc(_9,t);return g(Ahe,{scope:t,forceMount:n,children:g(m5,{present:n||s.open,children:g(AH,{asChild:!0,container:r,children:i})})})};GH.displayName=_9;var Ih="PopoverContent",XH=O.forwardRef((e,t)=>{const n=Rhe(Ih,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=Hc(Ih,e.__scopePopover);return g(m5,{present:i||s.open,children:s.modal?g(Mhe,{...r,ref:t}):g(khe,{...r,ref:t})})});XH.displayName=Ih;var Mhe=O.forwardRef((e,t)=>{const n=Hc(Ih,e.__scopePopover),i=O.useRef(null),r=oo(t,i),s=O.useRef(!1);return O.useEffect(()=>{const o=i.current;if(o)return Gfe(o)},[]),g(FH,{as:V0,allowPinchZoom:!0,children:g(jH,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_i(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:_i(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:_i(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),khe=O.forwardRef((e,t)=>{const n=Hc(Ih,e.__scopePopover),i=O.useRef(!1),r=O.useRef(!1);return g(jH,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),jH=O.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Hc(Ih,n),h=Km(n);return Ude(),g(sH,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(iH,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Dfe,{"data-state":KH(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),YH="PopoverClose",Lhe=O.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Hc(YH,n);return g(ir.button,{type:"button",...i,ref:t,onClick:_i(e.onClick,()=>r.onOpenChange(!1))})});Lhe.displayName=YH;var Dhe="PopoverArrow",WH=O.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Km(n);return g(Ofe,{...r,...i,ref:t})});WH.displayName=Dhe;function KH(e){return e?"open":"closed"}var U5=zH,b5=$H,Ohe=GH,T9=XH,ZH=WH;const qH=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),QH=ae.createContext(null),Si=()=>ae.useContext(QH),JH=e=>{const[t,n]=O.useState(null),i=Jn(),{theme:r}=Si(),{container:s}=ta();return O.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",r===xe.DARK))},[t,r,i.editor.isMobile,e==null?void 0:e.className]),O.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function S9(e,t,n){O.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n==null?void 0:n(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(te.POINTER_DOWN,i),document.addEventListener(te.TOUCH_START,i),()=>{document.removeEventListener(te.POINTER_DOWN,i),document.removeEventListener(te.TOUCH_START,i)}},[e,t,n])}const y5=e=>{const t=O.useRef(e);return Object.assign(t.current,e),t.current},E5=en(null),Nhe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=JH({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=Si(),o=G5(),a=fo(),l=Ve(o,s),c=y5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=ta();O.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:R,clientY:_})=>{const T=m.getImageData((R-s.offsetLeft)*window.devicePixelRatio,(_-s.offsetTop)*window.devicePixelRatio,1,1).data;return xne(T[0],T[1],T[2])},b=({clientX:R,clientY:_,altKey:T})=>{f.style.top=`${_+20}px`,f.style.left=`${R+20}px`;const x=p({clientX:R,clientY:_});h&&c.onChange(i,x,c.selectedElements,{altKey:T}),f.style.background=x},E=()=>{c.onCancel()},y=(R,_)=>{c.onSelect(R,_)},v=R=>{h=!0,R.stopImmediatePropagation()},w=R=>{h=!1,u==null||u.focus(),R.stopImmediatePropagation(),R.preventDefault(),y(p(R),R)},S=R=>{R.key===z.ESCAPE&&(R.preventDefault(),R.stopImmediatePropagation(),E())};return r.tabIndex=-1,r.focus(),b({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(te.KEYDOWN,S),r.addEventListener(te.POINTER_DOWN,v),r.addEventListener(te.POINTER_UP,w),window.addEventListener("pointermove",b,{passive:!0}),window.addEventListener(te.BLUR,E),()=>{h=!1,r.removeEventListener(te.KEYDOWN,S),r.removeEventListener(te.POINTER_DOWN,v),r.removeEventListener(te.POINTER_UP,w),window.removeEventListener("pointermove",b),window.removeEventListener(te.BLUR,E)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=O.useRef(null);return S9(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?jn.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},Ws=ae.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:be("Island",n),style:{"--padding":t,...i},ref:r,children:e})),eV=ae.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=Jn();return g(Ohe,{container:t,children:P(T9,{ref:c,className:be("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!Sie(document.activeElement)&&t.focus(),r()},children:[g(Ws,{padding:3,style:i,children:n}),g(ZH,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),v5=({palette:e,color:t})=>{for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},qE=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),tV=({color:e,palette:t})=>!Object.values(t).flat().includes(e),Phe=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return tV({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,wne)},ig=en(null),VA=(e,t,n)=>(e*299+t*587+n*114)/1e3,I9=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return VA(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return VA(n,i,r)<t},Fhe=({color:e,onChange:t,label:n,colorPickerType:i})=>{const r=Jn(),[s,o]=O.useState(e),[a,l]=mn(ig);O.useEffect(()=>{o(e)},[e]);const c=O.useCallback(m=>{const p=m.toLowerCase(),b=jhe(p);b&&t(b),o(p)},[t]),u=O.useRef(null),d=O.useRef(null);O.useEffect(()=>{u.current&&u.current.focus()},[a]);const[f,h]=mn(E5);return O.useEffect(()=>()=>{h(null)},[h]),P("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:a==="hex"?u:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:m=>{c(m.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:m=>{var p;m.key!==z.TAB&&(m.key===z.ESCAPE&&((p=d.current)==null||p.focus()),m.stopPropagation())}}),!r.editor.isMobile&&P(pe,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:d,className:be("excalidraw-eye-dropper-trigger",{selected:f}),onClick:()=>h(m=>m?null:{keepOpenOnAlt:!1,onSelect:p=>t(p),colorPickerType:i}),title:`${k("labels.eyeDropper")} — ${z.I.toLocaleUpperCase()} or ${Q("Alt")} `,children:gue})]})]})},x9=({color:e,keyLabel:t,isShade:n=!1})=>P("div",{className:"color-picker__button__hotkey-label",style:{color:I9(e)?"#fff":"#000"},children:[n&&"⇧",t]}),Bhe=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=mn(ig),o=O.useRef(null);return O.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>P("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:be("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(x9,{color:a,keyLabel:l+1})]},l))})},zhe=({palette:e,color:t,onChange:n,label:i,activeShade:r})=>{const s=v5({color:t||"transparent",palette:e}),[o,a]=mn(ig),l=O.useRef(null);return O.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([c,u],d)=>{const f=(Array.isArray(u)?u[r]:u)||"transparent",h=qE[d],m=k(`colors.${c.replace(/\d+/,"")}`,null,"");return P("button",{ref:(s==null?void 0:s.colorName)===c?l:void 0,tabIndex:-1,type:"button",className:be("color-picker__button color-picker__button--large has-outline",{active:(s==null?void 0:s.colorName)===c,"is-transparent":f==="transparent"||!1}),onClick:()=>{n(f),a("baseColors")},title:`${m}${f.startsWith("#")?` ${f}`:""} — ${h}`,"aria-label":`${m} — ${h}`,style:{"--swatch-color":f},"data-testid":`color-${c}`,children:[g("div",{className:"color-picker__button-outline"}),g(x9,{color:f,keyLabel:h})]},c)})})},n2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Hhe=({hex:e,onChange:t,palette:n})=>{const i=v5({color:e||"transparent",palette:n}),[r,s]=mn(ig),o=O.useRef(null);if(O.useEffect(()=>{o.current&&r==="shades"&&o.current.focus()},[i,r]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>P("button",{ref:d===l&&r==="shades"?o:void 0,tabIndex:-1,type:"button",className:be("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),s("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(x9,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return P("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:k("colorPicker.noShades")})]})},$8=(e,t,n)=>{const i=Math.ceil(n/rf);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+rf;return r>=n?t%rf:r}case"ArrowUp":{const r=t-rf,s=r<0?rf*i+r:r;return s>=n?void 0:s}}},Vhe=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(qE.includes(e.key)){const a=qE.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},$he=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[z.CTRL_OR_CMD])return!1;if(e.key===z.ESCAPE)return u(e),!0;if(e.key===z.ALT)return c(!0),!0;if(e.key===z.I)return c(),!0;const d=v5({color:i,palette:n});if(e.key===z.TAB){const f={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((y,[v,w])=>(w&&y.push(v),y),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,b=m+p>h.length-1?0:m+p<0?h.length-1:m+p,E=h[b];return E&&o(E),E==="custom"?r(s[0]):E==="baseColors"&&(Object.entries(n).find(([v,w])=>Array.isArray(w)?w.includes(i):w===i?v:null)||r(je.black)),e.preventDefault(),e.stopPropagation(),!0}if(Vhe({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=$8(e.key,f,rf);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=$8(e.key,m,h.length);if(p!==void 0){const b=h[p],E=n[b];return r(Array.isArray(E)?E[l]:E),!0}}if(t==="custom"){const f=s.indexOf(i),h=$8(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},Ghe=({color:e,onChange:t,label:n,type:i,elements:r,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:c})=>{const[u]=ae.useState(()=>i==="canvasBackground"?[]:Phe(r,i,s)),[d,f]=mn(ig),h=v5({color:e,palette:s});O.useEffect(()=>{if(!d){const E=tV({color:e,palette:s}),y=E&&!u.includes(e);f(y?"hex":E?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,f,h,u]);const[m,p]=O.useState((h==null?void 0:h.shade)??(i==="elementBackground"?a1:o1));O.useEffect(()=>{(h==null?void 0:h.shade)!=null&&p(h.shade);const E=y=>{y.key===z.ALT&&l(!1)};return document.addEventListener(te.KEYUP,E,{capture:!0}),()=>{document.removeEventListener(te.KEYUP,E,{capture:!0})}},[h,l]);const b=ae.useRef(null);return g("div",{role:"dialog","aria-modal":"true","aria-label":k("labels.colorPicker"),children:P("div",{ref:b,onKeyDown:E=>{$he({event:E,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:u,setActiveColorPickerSection:f,updateData:o,activeShade:m,onEscape:c})&&(E.preventDefault(),E.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&P("div",{children:[g(n2,{children:k("colorPicker.mostUsedCustomColors")}),g(Bhe,{colors:u,color:e,label:k("colorPicker.mostUsedCustomColors"),onChange:t})]}),P("div",{children:[g(n2,{children:k("colorPicker.colors")}),g(zhe,{color:e,label:n,palette:s,onChange:t,activeShade:m})]}),P("div",{children:[g(n2,{children:k("colorPicker.shades")}),g(Hhe,{hex:e,onChange:t,palette:s})]}),a]})})},Xhe=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=hP),t==="elementBackground"&&(r=gP),t==="canvasBackground"&&(r=mP),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:be("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!I9(s,dP)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},$A=e=>{const t=new Option().style;return t.color=e,!!t.color},jhe=e=>zs(e)?e:$A(`#${e}`)?`#${e}`:$A(e)?e:null,Yhe=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=je,updateData:o})=>{const{container:a}=ta(),[,l]=mn(ig),[c,u]=mn(E5),d=P("div",{children:[g(n2,{children:k("colorPicker.hexCode")}),g(Fhe,{color:t,label:i,onChange:m=>{n(m)},colorPickerType:e})]}),f=O.useRef(null),h=()=>{var m,p;(p=(m=f.current)==null?void 0:m.querySelector(".color-picker-content"))==null||p.focus()};return g(eV,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?g(Ghe,{palette:s,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},label:i,type:e,elements:r,updateData:o,children:d}):d})},Whe=({label:e,color:t,type:n})=>g(b5,{type:"button",className:be("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t,"has-outline":!I9(t,dP)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:k(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline"})}),C9=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=je,topPicks:o,updateData:a,appState:l})=>g("div",{children:P("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Xhe,{activeColor:t,onChange:n,type:e,topPicks:o}),g(qH,{}),P(U5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Whe,{color:t,label:i,type:e}),l.openPopup===e&&g(Yhe,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a})]})]})}),Khe=""+new URL("../fonts/CascadiaCode/CascadiaCode-Regular.woff2",import.meta.url).href,Zhe=[{uri:Khe}],qhe=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",import.meta.url).href,Qhe=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",import.meta.url).href,Jhe=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",import.meta.url).href,ege=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",import.meta.url).href,tge=[{uri:qhe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:ege,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:Jhe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:Qhe,descriptors:{unicodeRange:"U+3bb"}}],nge=[{uri:fw}];class ige{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class A9{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new jz;if(!import.meta.url||t.toString()===import.meta.url)throw new Yz;return new A9(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new ige(this.workerUrl);return t.debounceTerminate=ja(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let GA=typeof Worker<"u";const rge=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await oge();return GA?_c(async()=>{try{const s=await age(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return GA=!1,Nie()&&(s instanceof jz||s instanceof Yz)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let G8=null,X8=null;const sge=async()=>(G8||(G8=ye(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]),import.meta.url)),G8),oge=async()=>(X8||(X8=ye(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]),import.meta.url)),X8);let j8=null;const age=()=>(j8||(j8=_c(async()=>{const{WorkerUrl:e}=await sge();return A9.create(e)})),j8);var Y8={};const Df=class Df{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Df.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${Df.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await rge(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return _c(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(fw))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,Df.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Df,"ASSETS_FALLBACK_URL",`https://esm.sh/${Y8.PKG_NAME?`${Y8.PKG_NAME}@${Y8.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let QE=Df;const lge=""+new URL("../fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",import.meta.url).href,cge=""+new URL("../fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",import.meta.url).href,uge=""+new URL("../fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",import.meta.url).href,dge=""+new URL("../fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",import.meta.url).href,fge=""+new URL("../fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",import.meta.url).href,hge=""+new URL("../fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",import.meta.url).href,gge=""+new URL("../fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",import.meta.url).href,mge=[{uri:fge,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:gge,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:hge,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:uge,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:cge,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:lge,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:dge,descriptors:{unicodeRange:"U+300-301,U+303"}}],pge=[{uri:fw}],Uge=""+new URL("../fonts/LiberationSans/LiberationSans-Regular.woff2",import.meta.url).href,bge=[{uri:Uge}],yge=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",import.meta.url).href,Ege=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",import.meta.url).href,vge=[{uri:yge,descriptors:{unicodeRange:au.LATIN_EXT}},{uri:Ege,descriptors:{unicodeRange:au.LATIN}}],wge=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",import.meta.url).href,_ge=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",import.meta.url).href,Tge=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",import.meta.url).href,Sge=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",import.meta.url).href,Ige=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",import.meta.url).href,xge=[{uri:Tge,descriptors:{unicodeRange:au.CYRILIC_EXT,weight:"500"}},{uri:wge,descriptors:{unicodeRange:au.CYRILIC,weight:"500"}},{uri:Ige,descriptors:{unicodeRange:au.VIETNAMESE,weight:"500"}},{uri:Sge,descriptors:{unicodeRange:au.LATIN_EXT,weight:"500"}},{uri:_ge,descriptors:{unicodeRange:au.LATIN,weight:"500"}}],Cge=""+new URL("../fonts/Virgil/Virgil-Regular.woff2",import.meta.url).href,Age=[{uri:Cge}],Rge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",import.meta.url).href,Mge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",import.meta.url).href,kge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",import.meta.url).href,Lge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",import.meta.url).href,Dge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",import.meta.url).href,Oge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",import.meta.url).href,Nge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",import.meta.url).href,Pge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",import.meta.url).href,Fge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",import.meta.url).href,Bge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",import.meta.url).href,zge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",import.meta.url).href,Hge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",import.meta.url).href,Vge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",import.meta.url).href,$ge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",import.meta.url).href,Gge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",import.meta.url).href,Xge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",import.meta.url).href,jge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",import.meta.url).href,Yge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",import.meta.url).href,Wge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",import.meta.url).href,Kge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",import.meta.url).href,Zge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",import.meta.url).href,qge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",import.meta.url).href,Qge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",import.meta.url).href,Jge=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",import.meta.url).href,e1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",import.meta.url).href,t1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",import.meta.url).href,n1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",import.meta.url).href,i1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",import.meta.url).href,r1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",import.meta.url).href,s1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",import.meta.url).href,o1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",import.meta.url).href,a1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",import.meta.url).href,l1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",import.meta.url).href,c1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",import.meta.url).href,u1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",import.meta.url).href,d1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",import.meta.url).href,f1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",import.meta.url).href,h1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",import.meta.url).href,g1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",import.meta.url).href,m1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",import.meta.url).href,p1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",import.meta.url).href,U1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",import.meta.url).href,b1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",import.meta.url).href,y1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",import.meta.url).href,E1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",import.meta.url).href,v1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",import.meta.url).href,w1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",import.meta.url).href,_1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",import.meta.url).href,T1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",import.meta.url).href,S1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",import.meta.url).href,I1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",import.meta.url).href,x1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",import.meta.url).href,C1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",import.meta.url).href,A1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",import.meta.url).href,R1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",import.meta.url).href,M1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",import.meta.url).href,k1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",import.meta.url).href,L1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",import.meta.url).href,D1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",import.meta.url).href,O1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",import.meta.url).href,N1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",import.meta.url).href,P1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",import.meta.url).href,F1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",import.meta.url).href,B1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",import.meta.url).href,z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",import.meta.url).href,H1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",import.meta.url).href,V1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",import.meta.url).href,$1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",import.meta.url).href,G1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",import.meta.url).href,X1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",import.meta.url).href,j1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",import.meta.url).href,Y1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",import.meta.url).href,W1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",import.meta.url).href,K1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",import.meta.url).href,Z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",import.meta.url).href,q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",import.meta.url).href,Q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",import.meta.url).href,J1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",import.meta.url).href,e0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",import.meta.url).href,t0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",import.meta.url).href,n0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",import.meta.url).href,i0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",import.meta.url).href,r0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",import.meta.url).href,s0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",import.meta.url).href,o0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",import.meta.url).href,a0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",import.meta.url).href,l0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",import.meta.url).href,c0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",import.meta.url).href,u0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",import.meta.url).href,d0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",import.meta.url).href,f0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",import.meta.url).href,h0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",import.meta.url).href,g0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",import.meta.url).href,m0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",import.meta.url).href,p0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",import.meta.url).href,U0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",import.meta.url).href,b0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",import.meta.url).href,y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",import.meta.url).href,E0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",import.meta.url).href,v0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",import.meta.url).href,w0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",import.meta.url).href,_0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",import.meta.url).href,T0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",import.meta.url).href,S0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",import.meta.url).href,I0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",import.meta.url).href,x0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",import.meta.url).href,C0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",import.meta.url).href,A0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",import.meta.url).href,R0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",import.meta.url).href,M0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",import.meta.url).href,k0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",import.meta.url).href,L0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",import.meta.url).href,D0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",import.meta.url).href,O0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",import.meta.url).href,N0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",import.meta.url).href,P0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",import.meta.url).href,F0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",import.meta.url).href,B0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",import.meta.url).href,z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",import.meta.url).href,H0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",import.meta.url).href,V0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",import.meta.url).href,$0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",import.meta.url).href,G0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",import.meta.url).href,X0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",import.meta.url).href,j0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",import.meta.url).href,Y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",import.meta.url).href,W0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",import.meta.url).href,K0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",import.meta.url).href,Z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",import.meta.url).href,q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",import.meta.url).href,Q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",import.meta.url).href,J0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",import.meta.url).href,eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",import.meta.url).href,tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",import.meta.url).href,nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",import.meta.url).href,ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",import.meta.url).href,rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",import.meta.url).href,sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",import.meta.url).href,ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",import.meta.url).href,ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",import.meta.url).href,lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",import.meta.url).href,cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",import.meta.url).href,ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",import.meta.url).href,dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",import.meta.url).href,fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",import.meta.url).href,hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",import.meta.url).href,gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",import.meta.url).href,mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",import.meta.url).href,pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",import.meta.url).href,Ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",import.meta.url).href,bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",import.meta.url).href,yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",import.meta.url).href,Eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",import.meta.url).href,vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",import.meta.url).href,wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",import.meta.url).href,_me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",import.meta.url).href,Tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",import.meta.url).href,Sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",import.meta.url).href,Ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",import.meta.url).href,xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",import.meta.url).href,Cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",import.meta.url).href,Ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",import.meta.url).href,Rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",import.meta.url).href,Mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",import.meta.url).href,kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",import.meta.url).href,Lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",import.meta.url).href,Dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",import.meta.url).href,Ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",import.meta.url).href,Nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",import.meta.url).href,Pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",import.meta.url).href,Fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",import.meta.url).href,Bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",import.meta.url).href,zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",import.meta.url).href,Hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",import.meta.url).href,Vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",import.meta.url).href,$me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",import.meta.url).href,Gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",import.meta.url).href,Xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",import.meta.url).href,jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",import.meta.url).href,Yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",import.meta.url).href,Wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",import.meta.url).href,Kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",import.meta.url).href,Zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",import.meta.url).href,qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",import.meta.url).href,Qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",import.meta.url).href,Jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",import.meta.url).href,epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",import.meta.url).href,tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",import.meta.url).href,npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",import.meta.url).href,ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",import.meta.url).href,rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",import.meta.url).href,spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",import.meta.url).href,ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",import.meta.url).href,ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",import.meta.url).href,lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",import.meta.url).href,cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",import.meta.url).href,upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",import.meta.url).href,dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",import.meta.url).href,fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",import.meta.url).href,hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",import.meta.url).href,gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",import.meta.url).href,mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",import.meta.url).href,ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",import.meta.url).href,Upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",import.meta.url).href,bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",import.meta.url).href,ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",import.meta.url).href,Epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",import.meta.url).href,vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",import.meta.url).href,wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",import.meta.url).href,_pe=[{uri:Pge,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:Hge,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:zge,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:Vge,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:Gge,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:Xge,descriptors:{unicodeRange:"U+d520-d608"}},{uri:$ge,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:jge,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:Wge,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:Kge,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:Bge,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:Zge,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:qge,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:kge,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:Fge,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:Qge,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:Mge,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:Jge,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:e1e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:t1e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:n1e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:i1e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:r1e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:s1e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:o1e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:a1e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:l1e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:c1e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:u1e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:d1e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:Yge,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:f1e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:h1e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:g1e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:m1e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:p1e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:U1e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:b1e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:y1e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:S1e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:I1e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:E1e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:x1e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:C1e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:A1e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:_1e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:R1e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:T1e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:M1e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:k1e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:L1e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:D1e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:O1e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:N1e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:P1e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:F1e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:B1e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:z1e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:H1e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:V1e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:$1e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:G1e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:X1e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:j1e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:Y1e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:W1e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:K1e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:Z1e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:q1e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:Q1e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:J1e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:Dge,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:e0e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:t0e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:n0e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:i0e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:r0e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:s0e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:o0e,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:a0e,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:Rge,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:l0e,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:w1e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:c0e,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:u0e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:d0e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:f0e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:h0e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:g0e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:m0e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:p0e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:U0e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:b0e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:y0e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:E0e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:v0e,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:w0e,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:_0e,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:T0e,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:S0e,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:I0e,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:x0e,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:C0e,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:A0e,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:R0e,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:v1e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:M0e,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:k0e,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:L0e,descriptors:{unicodeRange:"U+487a-4932"}},{uri:D0e,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:O0e,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:N0e,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:P0e,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:F0e,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:B0e,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:z0e,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:H0e,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:V0e,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:$0e,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:G0e,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:X0e,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:j0e,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:Y0e,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:W0e,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:K0e,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:Z0e,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:q0e,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:Q0e,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:J0e,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:eme,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:tme,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:nme,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:ime,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:rme,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:sme,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:ome,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:ame,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:lme,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:cme,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:ume,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:dme,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:fme,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:hme,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:gme,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:mme,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:pme,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:Ume,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:bme,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:yme,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:Eme,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:vme,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:wme,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:_me,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:Tme,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:Sme,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:Ime,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:xme,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:Cme,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:Ame,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Rme,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:Mme,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:Oge,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:kme,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:Lme,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Dme,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Ome,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:Lge,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Nme,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:Pme,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:Fme,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:zme,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Hme,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:Vme,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:$me,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Gme,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Xme,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:jme,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Yme,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Wme,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:Kme,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:Zme,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:qme,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:Qme,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:Nge,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:Jme,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:epe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:tpe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:npe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:ipe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:rpe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:spe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:ope,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:ape,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:lpe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:cpe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:upe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:dpe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:fpe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:hpe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:gpe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:mpe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:ppe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:Bme,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:Upe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:bpe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:ype,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:Epe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:vpe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:wpe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],qe=class qe{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>qe.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;qe.loadedFontsCache.has(o)||(qe.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(fe(s)){i=!0,Yt.delete(s),zm.clearCache(Ct(s));const o=Bn(s,r);o&&Yt.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=qe.getCharsPerFamily(this.scene.getNonDeletedElements());return qe.loadFontFaces(t,n)});this.scene=t}static get registered(){return qe._registered?qe._initialized||(qe._registered=new Map([...qe.init().entries(),...qe._registered.entries()])):qe._registered=qe.init(),qe._registered}get registered(){return qe.registered}static async generateFontFaceDeclarations(t){const n=qe.getUniqueFamilies(t),i=qe.getCharsPerFamily(t),r=n.find(l=>yP(l).includes(_f));if(r){const l=qe.getCharacters(i,r);if(fse(l)){const c=Tf[_f];i[c]=new Set(l),n.unshift(Tf[_f])}}const s=qe.fontFacesStylesGenerator(n,i),o=3,a=await new Lx(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of qe.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=qe.fontFacesLoader(t,n),r=10;return(await new Lx(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=Ct({fontFamily:r,fontSize:16}),o=qe.getCharacters(n,r);window.document.fonts.check(s,o)||(yield _c(async()=>{var a;try{const l=await window.document.fonts.load(s,o);return[i,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=qe.registered.get(r))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=qe.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,qe.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of s.entries())yield _c(async()=>{try{const c=qe.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=xt[t]??Tf[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new QE(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=xt[i]??Tf[i],o=hh[s]??hh[xt.Excalifont];qe.register.call(t,i,o,...r)};return n("Cascadia",...Zhe),n("Comic Shanns",...tge),n("Excalifont",...mge),n("Helvetica",...pge),n("Liberation Sans",...bge),n("Lilita One",...vge),n("Nunito",...xge),n("Virgil",...Age),n(_f,..._pe),n(R0,...nge),qe._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(fe(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(fe(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(qe.registered.keys())}};F(qe,"loadedFontsCache",new Set),F(qe,"_registered"),F(qe,"_initialized",!1),F(qe,"loadElementsFonts",async t=>{const n=qe.getUniqueFamilies(t),i=qe.getCharsPerFamily(t);return qe.loadFontFaces(n,i)});let za=qe;const nV=ae.forwardRef(({className:e,placeholder:t,onChange:n},i)=>P("div",{className:be("QuickSearch__wrapper",e),children:[od,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),iV=({className:e,placeholder:t,children:n})=>{const i=!O.Children.count(n);return g("div",{className:be("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},D6=({children:e,className:t="",style:n,title:i})=>P("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});D6.displayName="DropdownMenuGroup";const rV=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=Jn();return P(pe,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!r.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},sV=ae.createContext({}),oV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),aV=(e,t)=>{const n=O.useContext(sV);return Xb(e,i=>{var s;const r=new CustomEvent(te.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(r),r.defaultPrevented||(s=n.onSelect)==null||s.call(n,r)})},Er=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=aV(u,c),h=O.useRef(null);return O.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:oV(s,a,o),title:d.title??d["aria-label"],children:g(rV,{textStyle:l,icon:e,shortcut:r,children:i})})};Er.displayName="DropdownMenuItem";const f1={GREEN:"green",RED:"red",BLUE:"blue"},R9=({type:e=f1.BLUE,children:t})=>{const{theme:n}=tp(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===xe.LIGHT?"1.5px solid white":"none"};switch(e){case f1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case f1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case f1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};R9.displayName="DropdownMenuItemBadge";Er.Badge=R9;const Tpe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{var a,l,c;if(!e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===z.F)return(a=t.current)==null||a.focus(),!0;if(e.key===z.ESCAPE)return r(),!0;if(e.key===z.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===z.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===z.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},Spe=e=>{switch(e){case xt.Excalifont:case xt.Virgil:return c5;case xt.Nunito:case xt.Helvetica:return zE;case xt["Lilita One"]:return eue;case xt["Comic Shanns"]:case xt.Cascadia:return Nz;default:return zE}},Ipe=ae.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=ta(),{fonts:l}=fo(),{showDeprecatedFonts:c}=ep(),[u,d]=O.useState(""),f=O.useRef(null),h=O.useMemo(()=>Array.from(za.registered.entries()).filter(([T,{metadata:x}])=>!x.serverSide&&!x.fallback).map(([T,{metadata:x,fontFaces:I}])=>{var D,L;const M={value:T,icon:Spe(T),text:((L=(D=I[0])==null?void 0:D.fontFace)==null?void 0:L.family)??"Unknown"};return x.deprecated&&Object.assign(M,{deprecated:x.deprecated,badge:{type:f1.RED,placeholder:k("fontList.badge.old")}}),M}).sort((T,x)=>T.text.toLowerCase()>x.text.toLowerCase()?1:-1),[]),m=O.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=O.useMemo(()=>h.filter(T=>m.has(T.value)),[h,m]),b=O.useMemo(()=>h.filter(T=>!m.has(T.value)&&(c||!T.deprecated)),[h,m,c]),E=O.useMemo(()=>Die([...p,...b].filter(T=>{var x;return(x=T.text)==null?void 0:x.toLowerCase().includes(u)})),[p,b,u]),y=O.useMemo(()=>{var x;let T;return t?T=E.find(I=>I.value===t):e&&(T=E.find(I=>I.value===e)),!T&&u&&((x=E[0])!=null&&x.value?i(E[0].value):r()),T},[t,e,u,E,i,r]),v=O.useCallback(T=>{Tpe({event:T,inputRef:f,hoveredFont:y,filteredFonts:E,onSelect:n,onHover:i,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[y,E,n,i,o]);O.useEffect(()=>(s(),()=>{o()}),[]);const w=O.useMemo(()=>E.filter(T=>m.has(T.value)),[E,m]),S=O.useMemo(()=>E.filter(T=>!m.has(T.value)),[E,m]),R=(T,x)=>P(Er,{icon:T.icon,value:T.value,order:x,textStyle:{fontFamily:Dm({fontFamily:T.value})},hovered:T.value===(y==null?void 0:y.value),selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:I=>{n(Number(I.currentTarget.value))},onMouseMove:()=>{(y==null?void 0:y.value)!==T.value&&i(T.value)},children:[T.text,T.badge&&g(R9,{type:T.badge.type,children:T.badge.placeholder})]},T.value),_=[];return w.length&&_.push(g(D6,{title:k("fontList.sceneFonts"),children:w.map(R)},"group_1")),S.length&&_.push(g(D6,{title:k("fontList.availableFonts"),children:S.map((T,x)=>R(T,x+w.length))},"group_2")),P(eV,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:r,onKeyDown:v,children:[g(nV,{ref:f,placeholder:k("quickSearch.placeholder"),onChange:ja(d,20)}),g(iV,{className:"dropdown-menu fonts manual-hover",placeholder:k("fontList.empty"),children:_.length?_:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),xpe=({selectedFontFamily:e})=>{const t=O.useMemo(()=>!!(e&&!Ape(e)),[e]);return g(b5,{asChild:!0,children:g("div",{children:g(eH,{standalone:!0,icon:xz,title:k("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},lV=[{value:xt.Excalifont,icon:c5,text:k("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:xt.Nunito,icon:zE,text:k("labels.normal"),testId:"font-family-normal"},{value:xt["Comic Shanns"],icon:Nz,text:k("labels.code"),testId:"font-family-code"}],Cpe=new Set(lV.map(e=>e.value)),Ape=e=>e?Cpe.has(e):!1,Rpe=ae.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o})=>{const a=O.useMemo(()=>lV,[]),l=O.useCallback(c=>{c&&i(c)},[i]);return P("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g(Jo,{type:"button",options:a,value:t,onClick:l}),g(qH,{}),P(U5,{open:e,onOpenChange:o,children:[g(xpe,{selectedFontFamily:t}),e&&g(Ipe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),w5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),JE=({label:e,open:t,openTrigger:n,children:i,className:r})=>P(pe,{children:[P("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,g(w5,{icon:t?Pue:Gz})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),Mpe=en(!1);function kpe({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=Jn(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===z.TAB){const p=e.findIndex(E=>E.value===t),b=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[b].value)}else if(l1(h.key)){const p=B0().rtl,b=e.findIndex(E=>E.value===t);if(b!==-1){const E=e.length;let y=b;switch(h.key){case(p?z.ARROW_LEFT:z.ARROW_RIGHT):y=(b+1)%E;break;case(p?z.ARROW_RIGHT:z.ARROW_LEFT):y=(E+b-1)%E;break;case z.ARROW_DOWN:{y=(b+(s??1))%E;break}case z.ARROW_UP:{y=(E+b-(s??1))%E;break}}i(e[y].value)}h.preventDefault()}else(h.key===z.ESCAPE||h.key===z.ENTER)&&(h.preventDefault(),r());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=mn(Mpe),u=ae.useMemo(()=>e.slice(0,s),[e,s]),d=ae.useMemo(()=>e.slice(s),[e,s]);O.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>P("button",{type:"button",className:be("picker-option",{active:t===m.value}),onClick:b=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:b=>{t===m.value&&setTimeout(()=>{b==null||b.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(T9,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:P("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(JE,{label:k("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function XA({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){var c;const[o,a]=ae.useState(!1),l=ae.useRef(null);return g("div",{children:P(U5,{open:o,onOpenChange:u=>a(u),children:[g(b5,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(kpe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const Lpe=({updateData:e,appState:t,elements:n,testId:i})=>{const r=ae.useRef(null),s=ae.useRef(null),o=tr(n,t,a=>a.opacity,!0,t.currentItemOpacity);return O.useEffect(()=>{if(r.current&&s.current){const a=r.current,l=s.current,c=a.offsetWidth,u=15,d=o/100*(c-u)+u/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),P("label",{className:"control-label",children:[k("labels.opacity"),P("div",{className:"range-wrapper",children:[g("input",{ref:r,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":i}),g("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),g("div",{className:"zero-label",children:"0"})]})]})},cV=.1,er=(e,t,n,i=!1)=>{const r=Se(Ve(e,t,{includeBoundTextElement:i}));return e.map(s=>{var o;return r.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},tr=function(e,t,n,i,r){const s=t.editingTextElement,o=Pt(e);let a=null;return s&&(a=n(s)),a||(zn(o,t)?a=Toe(i===!0?o:o.filter(c=>i(c)),t,n)??(typeof r=="function"?r(!0):r):a=typeof r=="function"?r(!1):r),a},Dpe=(e,t)=>Ht(t)||!t.autoResize?t:ee(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),M9=(e,t,n,i,r)=>{const s=new Set,o=er(e,t,l=>{if(fe(l)){const c=i(l);s.add(c);let u=Ce(l,{fontSize:c});return Ji(u,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),u=Dpe(l,u),u}return l},!0),a=Se(o);return Ve(e,t,{includeBoundTextElement:!0}).forEach(l=>{fe(l)&&mr(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:K.IMMEDIATELY}};oe({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:er(e,t,i=>yE(i.type)?Ce(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>P(pe,{children:[g("h3",{"aria-hidden":"true",children:k("labels.stroke")}),g(C9,{topPicks:hP,palette:Tne,type:"elementStroke",label:k("labels.stroke"),color:tr(e,t,r=>r.strokeColor,!0,t.currentItemStrokeColor),onChange:r=>n({currentItemStrokeColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:er(e,t,i=>Ce(i,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>P(pe,{children:[g("h3",{"aria-hidden":"true",children:k("labels.background")}),g(C9,{topPicks:gP,palette:Sne,type:"elementBackground",label:k("labels.background"),color:tr(e,t,r=>r.backgroundColor,!0,t.currentItemBackgroundColor),onChange:r=>n({currentItemBackgroundColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(ut("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:er(e,t,r=>Ce(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Ve(e,t),r=i.length>0&&i.every(s=>s.fillStyle==="zigzag");return P("fieldset",{children:[g("legend",{children:k("labels.fill")}),g(Jo,{type:"button",options:[{value:"hachure",text:`${k(r?"labels.zigzag":"labels.hachure")} (${Q("Alt-Click")})`,icon:r?Sce:Ice,active:r?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:k("labels.crossHatch"),icon:xce,testId:"fill-cross-hatch"},{value:"solid",text:k("labels.solid"),icon:Cce,testId:"fill-solid"}],value:tr(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{const a=o.altKey&&s==="hachure"&&i.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});oe({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeWidth")}),g(Jo,{group:"stroke-width",options:[{value:g8.thin,text:k("labels.thin"),icon:Oz,testId:"strokeWidth-thin"},{value:g8.bold,text:k("labels.bold"),icon:Ace,testId:"strokeWidth-bold"},{value:g8.extraBold,text:k("labels.extraBold"),icon:Rce,testId:"strokeWidth-extraBold"}],value:tr(e,t,i=>i.strokeWidth,i=>i.hasOwnProperty("strokeWidth"),i=>i?null:t.currentItemStrokeWidth),onChange:i=>n(i)})]})});oe({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{seed:Xo(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.sloppiness")}),g(Jo,{group:"sloppiness",options:[{value:0,text:k("labels.architect"),icon:Lce},{value:1,text:k("labels.artist"),icon:Dce},{value:2,text:k("labels.cartoonist"),icon:Oce}],value:tr(e,t,i=>i.roughness,i=>i.hasOwnProperty("roughness"),i=>i?null:t.currentItemRoughness),onChange:i=>n(i)})]})});oe({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeStyle")}),g(Jo,{group:"strokeStyle",options:[{value:"solid",text:k("labels.strokeStyle_solid"),icon:Oz},{value:"dashed",text:k("labels.strokeStyle_dashed"),icon:Mce},{value:"dotted",text:k("labels.strokeStyle_dotted"),icon:kce}],value:tr(e,t,i=>i.strokeStyle,i=>i.hasOwnProperty("strokeStyle"),i=>i?null:t.currentItemStrokeStyle),onChange:i=>n(i)})]})});oe({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>Ce(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Lpe,{updateData:n,elements:e,appState:t,testId:"opacity"})});oe({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>M9(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.fontSize")}),g(Jo,{group:"font-size",options:[{value:16,text:k("labels.small"),icon:Zce,testId:"fontSize-small"},{value:20,text:k("labels.medium"),icon:qce,testId:"fontSize-medium"},{value:28,text:k("labels.large"),icon:Qce,testId:"fontSize-large"},{value:36,text:k("labels.veryLarge"),icon:Jce,testId:"fontSize-veryLarge"}],value:tr(e,t,r=>{if(fe(r))return r.fontSize;const s=ze(r,i.scene.getNonDeletedElementsMap());return s?s.fontSize:null},r=>fe(r)||ze(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:t.currentItemFontSize||fl),onChange:r=>n(r)})]})});const jA=oe({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:d5,trackEvent:!1,perform:(e,t,n,i)=>M9(e,t,i,r=>Math.round(1/(1+cV)*r.fontSize)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_LEFT||e.key===z.COMMA)}),YA=oe({name:"increaseFontSize",label:"labels.increaseFontSize",icon:d5,trackEvent:!1,perform:(e,t,n,i)=>M9(e,t,i,r=>Math.round(r.fontSize*(1+cV))),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_RIGHT||e.key===z.PERIOD)});oe({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:er(e,t,b=>{const E=r==null?void 0:r.get(b.id);return E?Ce(b,{...E}):b},!0),appState:{...t,...a},captureUpdate:K.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=K.EVENTUALLY,d,f=!1;if(l)d=l,u=K.IMMEDIATELY;else if(c){d=c,u=K.EVENTUALLY;const p=Ve(e,t,{includeBoundTextElement:!0}).filter(b=>fe(b));if(p.length>200)f=!0;else{let b=0,E=0;for(;b<p.length&&E<5e3;){const y=p[b];E+=(y==null?void 0:y.originalText.length)||0,b++}E>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let b=new Set,E=!1;const y=Array.from(za.loadedFontsCache.values()),v=(m=Object.entries(xt).find(([R,_])=>_===d))==null?void 0:m[0];c&&v&&y.some(R=>R.startsWith(v))&&(E=!0),Object.assign(h,{elements:er(e,t,R=>{if(fe(R)&&(R.fontFamily!==d||l)){const _=Ce(R,{fontFamily:d,lineHeight:Ju(d)}),T=(r==null?void 0:r.get(R.containerId||""))||{},x=i.scene.getContainerElement(R);return o&&x&&T&&ee(x,{...T},!1),E||(b=new Set([...b,...Array.from(_.originalText)])),p.set(_,x),_}return R},!0)});const w=`10px ${Dm({fontFamily:d})}`,S=Array.from(b.values()).join();if(E||window.document.fonts.check(w,S))for(const[R,_]of p)Ji(R,_,i.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(w,S).then(R=>{for(const[_,T]of p){const x=i.scene.getElement(_.id),I=T?i.scene.getElement(T.id):null;x&&Ji(x,I,i.scene.getNonDeletedElementsMap(),!1)}i.fonts.onLoaded(R)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=O.useRef(new Map),s=O.useRef(null),[o,a]=O.useState({}),l=O.useRef(!0),c=O.useMemo(()=>{var d;const u=(f,h)=>tr(f,t,m=>{if(fe(m))return m.fontFamily;const p=ze(m,h);return p?p.fontFamily:null},m=>fe(m)||ze(m,h)!==null,m=>m?null:t.currentItemFontFamily||Fc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=r.current)==null?void 0:d.values())??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return O.useEffect(()=>{s.current=c},[c]),O.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),O.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),P("fieldset",{children:[g("legend",{children:k("labels.fontFamily")}),g(Rpe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),r.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:u=>{if(u){r.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);r.current.set(d.id,Ce(f||d,{},!0))}else{const f=Ve(e,t,{includeBoundTextElement:!0});for(const h of f)r.current.set(h.id,Ce(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};l.current?i({...o,...d}):a(d),r.current.clear()}}})]})}});oe({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:er(e,t,r=>{if(fe(r)){const s=Ce(r,{textAlign:n});return Ji(s,i.scene.getContainerElement(r),i.scene.getNonDeletedElementsMap()),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=i.scene.getNonDeletedElementsMap();return P("fieldset",{children:[g("legend",{children:k("labels.textAlign")}),g(Jo,{group:"text-align",options:[{value:"left",text:k("labels.left"),icon:tue,testId:"align-left"},{value:"center",text:k("labels.center"),icon:nue,testId:"align-horizontal-center"},{value:"right",text:k("labels.right"),icon:iue,testId:"align-right"}],value:tr(e,t,s=>{if(fe(s))return s.textAlign;const o=ze(s,r);return o?o.textAlign:null},s=>fe(s)||ze(s,r)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});oe({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:er(e,t,r=>{if(fe(r)){const s=Ce(r,{verticalAlign:n});return Ji(s,i.scene.getContainerElement(r),i.scene.getNonDeletedElementsMap()),s}return r},!0),appState:{...t},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g(Jo,{group:"text-align",options:[{value:Lr.TOP,text:k("labels.alignTop"),icon:g(rue,{theme:t.theme}),testId:"align-top"},{value:Lr.MIDDLE,text:k("labels.centerVertically"),icon:g(oue,{theme:t.theme}),testId:"align-middle"},{value:Lr.BOTTOM,text:k("labels.alignBottom"),icon:g(sue,{theme:t.theme}),testId:"align-bottom"}],value:tr(e,t,r=>{if(fe(r)&&r.containerId)return r.verticalAlign;const s=ze(r,i.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},r=>fe(r)||ze(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:Lr.MIDDLE),onChange:r=>n(r)})})});oe({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>me(i)?i:Ce(i,{roundness:n==="round"?{type:Qh(i.type)?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=kF(Pt(e),t).some(s=>{var o;return((o=s.roundness)==null?void 0:o.type)===Nn.LEGACY});return P("fieldset",{children:[g("legend",{children:k("labels.edges")}),g(Jo,{group:"edges",options:[{value:"sharp",text:k("labels.sharp"),icon:Nce},{value:"round",text:k("labels.round"),icon:Pce}],value:tr(e,t,s=>r?null:s.roundness?"round":"sharp",s=>!Le(s)&&s.hasOwnProperty("roundness"),s=>s?null:t.currentItemRoundness),onChange:s=>n(s)})]})}});const WA=e=>[{value:null,text:k("labels.arrowhead_none"),keyBinding:"q",icon:Fce},{value:"arrow",text:k("labels.arrowhead_arrow"),keyBinding:"w",icon:g(Bce,{flip:e})},{value:"triangle",text:k("labels.arrowhead_triangle"),icon:g($ce,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:k("labels.arrowhead_triangle_outline"),icon:g(Gce,{flip:e}),keyBinding:"r"},{value:"circle",text:k("labels.arrowhead_circle"),keyBinding:"a",icon:g(zce,{flip:e})},{value:"circle_outline",text:k("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Hce,{flip:e})},{value:"diamond",text:k("labels.arrowhead_diamond"),icon:g(Xce,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:k("labels.arrowhead_diamond_outline"),icon:g(jce,{flip:e}),keyBinding:"f"},{value:"bar",text:k("labels.arrowhead_bar"),keyBinding:"z",icon:g(Vce,{flip:e})},{value:"crowfoot_one",text:k("labels.arrowhead_crowfoot_one"),icon:g(Wce,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:k("labels.arrowhead_crowfoot_many"),icon:g(Yce,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:k("labels.arrowhead_crowfoot_one_or_many"),icon:g(Kce,{flip:e}),keyBinding:"v"}];oe({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:er(e,t,i=>{if(ke(i)){const{position:r,type:s}=n;if(r==="start")return Ce(i,{startArrowhead:s});if(r==="end")return Ce(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=B0().rtl;return P("fieldset",{children:[g("legend",{children:k("labels.arrowheads")}),P("div",{className:"iconSelectList buttonList",children:[g(XA,{label:"arrowhead_start",options:WA(!i),value:tr(e,t,r=>ke(r)&&w6(r.type)?r.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:r=>n({position:"start",type:r}),numberOfOptionsToAlwaysShow:4}),g(XA,{label:"arrowhead_end",group:"arrowheads",options:WA(!!i),value:tr(e,t,r=>ke(r)&&w6(r.type)?r.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:r=>n({position:"end",type:r}),numberOfOptionsToAlwaysShow:4})]})]})}});oe({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const r=er(e,t,l=>{if(!Le(l))return l;let c=Ce(l,{roundness:n===ni.round?{type:Nn.PROPORTIONAL_RADIUS}:null,elbowed:n===ni.elbow,points:n===ni.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(me(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=ue.getPointAtIndexGlobalCoordinates(c,0,u),f=ue.getPointAtIndexGlobalCoordinates(c,-1,u),h=!c.startBinding&&Hs(Bs(d),e,u,t.zoom,!1,!0),m=!c.endBinding&&Hs(Bs(f),e,u,t.zoom,!1,!0),p=h||c.startBinding&&u.get(c.startBinding.elementId),b=m||c.endBinding&&u.get(c.endBinding.elementId),E=h?O0(c,h,"start"):d,y=m?O0(c,m,"end"):f;h&&cs(c,h,"start",u),m&&cs(c,m,"end",u);const v=p&&c.startBinding?{...c.startBinding,...p6(c,p,"start")}:null,w=b&&c.endBinding?{...c.endBinding,...p6(c,b,"end")}:null;c={...c,startBinding:v,endBinding:w,...Jh(c,u,{points:[E,y].map(S=>A(S[0]-c.x,S[1]-c.y)),startBinding:v,endBinding:w,fixedSegments:null})},ue.updateEditorMidPointsCache(c,u,i.state)}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&cs(c,d,"start",u)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&cs(c,d,"end",u)}}return c}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=r.find(c=>c.id===o);l&&(s.selectedLinearElement=new ue(l))}return{elements:r,appState:s,captureUpdate:K.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>P("fieldset",{children:[g("legend",{children:k("labels.arrowtypes")}),g(Jo,{group:"arrowtypes",options:[{value:ni.sharp,text:k("labels.arrowtype_sharp"),icon:Due,testId:"sharp-arrow"},{value:ni.round,text:k("labels.arrowtype_round"),icon:Nue,testId:"round-arrow"},{value:ni.elbow,text:k("labels.arrowtype_elbowed"),icon:Oue,testId:"elbow-arrow"}],value:tr(e,t,i=>Le(i)?i.elbowed?ni.elbow:i.roundness?ni.round:ni.sharp:null,i=>Le(i),i=>i?null:t.currentItemArrowType),onChange:i=>n(i)})]})});const q1=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},uV=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},Ope=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();uV(t,r)},cd=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(O.useEffect(()=>()=>q1().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>Ope(s.currentTarget,q1(),t,n),onPointerLeave:()=>q1().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),dV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',Npe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',fV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',Ppe=`data:${Ee.svg},${encodeURIComponent(`${dV}${fV}</svg>`)}`,Fpe=`data:${Ee.svg},${encodeURIComponent(`${dV}${Npe}${fV}</svg>`)}`,xs=e=>{e&&(e.style.cursor="")},St=(e,t)=>{e&&(e.style.cursor=t)};let Uo,KA;const hV=(e,t)=>{const i=()=>{const r=t===xe.DARK;Uo=document.createElement("canvas"),Uo.theme=t,Uo.height=20,Uo.width=20;const s=Uo.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(Uo.width/2,Uo.height/2,5,0,2*Math.PI),s.fillStyle=r?li.black:li.white,s.fill(),s.strokeStyle=r?li.white:li.black,s.stroke(),KA=Uo.toDataURL(Ee.svg)};(!Uo||Uo.theme!==t)&&i(),St(e,`url(${KA}) ${20/2} ${20/2}, auto`)},Eo=(e,t)=>{if(e)if(t.activeTool.type==="selection")xs(e);else if(_h(t))e.style.cursor=yt.GRAB;else if(To(t))hV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===xe.LIGHT?Ppe:Fpe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=yt.AUTO):e.style.cursor=yt.CROSSHAIR},Eu=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};oe({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(C9,{palette:null,topPicks:mP,label:k("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:r=>n({viewBackgroundColor:r}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const Q1=oe({name:"clearCanvas",label:"labels.clearCanvas",icon:sd,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var r;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Ce(r,{isDeleted:!0})),appState:{...so(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:K.IMMEDIATELY})}),ZA=oe({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:JC,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Eu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(t.zoom.value+Hb)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ze,{type:"button",className:"zoom-in-button zoom-button",icon:JC,title:`${k("buttons.zoomIn")} — ${Q("CtrlOrCmd++")}`,"aria-label":k("buttons.zoomIn"),disabled:t.zoom.value>=cw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.EQUAL||e.code===et.NUM_ADD)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),qA=oe({name:"zoomOut",label:"buttons.zoomOut",icon:eA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Eu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(t.zoom.value-Hb)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ze,{type:"button",className:"zoom-out-button zoom-button",icon:eA,title:`${k("buttons.zoomOut")} — ${Q("CtrlOrCmd+-")}`,"aria-label":k("buttons.zoomOut"),disabled:t.zoom.value<=lw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.MINUS||e.code===et.NUM_SUBTRACT)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),QA=oe({name:"resetZoom",label:"buttons.resetZoom",icon:dce,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Eu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ka(1)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(cd,{label:k("buttons.resetZoom"),style:{height:"100%"},children:P(Ze,{type:"button",className:"reset-zoom-button zoom-button",title:k("buttons.resetZoom"),"aria-label":k("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===et.ZERO||e.code===et.NUM_ZERO)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),Bpe=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Xe(n,.1,1);return Math.min(f,1)},gV=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Xe(r,lw,cw);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,b=(n==null?void 0:n.bottom)??0,E=t.width-h-p,y=t.height-m-b;let v;if(i){const R=c-a,_=u-l;v=Math.min(E/R,y/_)*r}else v=Bpe(e,{width:E,height:y},r);const w=ka(Xe(aie(v,Hb,"floor"),s,o)),S=vz({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:w}});return{appState:{...t,scrollX:S.scrollX,scrollY:S.scrollY,zoom:{value:w}},captureUpdate:K.EVENTUALLY}},_5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=_t(Pt(t));return gV({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};oe({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:u9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return _5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.TWO&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:u9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return _5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.THREE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:u9,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>_5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===et.ONE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});const O6=oe({name:"toggleTheme",label:(e,t)=>t.theme===xe.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===xe.LIGHT?FE:BE,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===xe.LIGHT?xe.DARK:xe.LIGHT)},captureUpdate:K.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===et.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});oe({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return To(t)?n=dn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=dn(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.key===z.E});oe({name:"toggleLassoTool",label:"toolBar.lasso",icon:NE,trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let r;return t.activeTool.type!=="lasso"?(r=dn(t,{type:"lasso",fromSelection:!1}),St(i.interactiveCanvas,yt.CROSSHAIR)):r=dn(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.NEVER}}});const zpe=oe({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:Fz,viewMode:!1,perform:(e,t,n,i)=>{let r;return _h(t)?r=dn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=dn(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),St(i.interactiveCanvas,yt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[z.CTRL_OR_CMD]&&e.key===z.H});oe({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=dn(t,{type:"embeddable"});return Eo(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:dn(t,{type:"embeddable"})},captureUpdate:K.EVENTUALLY}}});const Ss=oe({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var f;const{interactiveCanvas:r,focusContainer:s,scene:o}=i,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){const{elementId:h,startBindingElement:m,endBindingElement:p}=t.editingLinearElement,b=ue.getElement(h,a);if(b)return _a(b)&&qb(b,m,p,a,o),{elements:b.points.length<2||rd(b)?e.filter(E=>E.id!==b.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}let l=e;const c=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);c&&ee(c,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();const u=t.multiElement?t.multiElement:((f=t.newElement)==null?void 0:f.type)==="freedraw"?t.newElement:null;if(u){if(u.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:m,lastCommittedPoint:p}=u;(!p||m[m.length-1]!==p)&&ee(u,{points:u.points.slice(0,-1)})}rd(u)&&(l=l.filter(m=>m.id!==u.id));const h=qa(u.points,t.zoom.value);if((u.type==="line"||u.type==="freedraw")&&h){const m=u.points,p=m[0];ee(u,{points:m.map((b,E)=>E===m.length-1?A(p[0],p[1]):b)})}if(_a(u)&&!h&&u.points.length>1){const[m,p]=ue.getPointAtIndexGlobalCoordinates(u,-1,Se(e));fE(u,t,{x:m,y:p},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!u)&&xs(r);let d;return t.activeTool.type==="eraser"?d=dn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=dn(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&ke(u)?new ue(u):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t)=>e.key===z.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===z.ESCAPE||e.key===z.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(Ze,{type:"button",icon:bce,title:k("buttons.done"),"aria-label":k("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),k9=({children:e,checked:t,onChange:n,className:i})=>P("div",{className:be("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:hce}),g("div",{className:"Checkbox-label",children:e})]}),Hpe=e=>{const t=e.title||(e.value===xe.DARK?k("buttons.lightMode"):k("buttons.darkMode"));return g(Ze,{type:"icon",icon:e.value===xe.LIGHT?JA.MOON:JA.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===xe.DARK?xe.LIGHT:xe.DARK),"data-testid":"toggle-dark-mode"})},JA={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},Vpe=e=>{const{id:t}=ta(),[n,i]=O.useState(e.value),r=o=>{e.ignoreFocus||kie(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===z.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return P("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const $pe=4,eR=0,tR=1,Gpe=2;function rg(e){let t=e.length;for(;--t>=0;)e[t]=0}const Xpe=0,mV=1,jpe=2,Ype=3,Wpe=258,L9=29,Zm=256,X0=Zm+1+L9,Yf=30,D9=19,pV=2*X0+1,vu=15,W8=16,Kpe=7,O9=256,UV=16,bV=17,yV=18,e4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Zpe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),EV=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qpe=512,pa=new Array((X0+2)*2);rg(pa);const J1=new Array(Yf*2);rg(J1);const j0=new Array(qpe);rg(j0);const Y0=new Array(Wpe-Ype+1);rg(Y0);const N9=new Array(L9);rg(N9);const N6=new Array(Yf);rg(N6);function K8(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let vV,wV,_V;function Z8(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const TV=e=>e<256?j0[e]:j0[256+(e>>>7)],W0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},fr=(e,t,n)=>{e.bi_valid>W8-n?(e.bi_buf|=t<<e.bi_valid&65535,W0(e,e.bi_buf),e.bi_buf=t>>W8-e.bi_valid,e.bi_valid+=n-W8):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ko=(e,t,n)=>{fr(e,n[t*2],n[t*2+1])},SV=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},Qpe=e=>{e.bi_valid===16?(W0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Jpe=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=vu;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<pV;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},IV=(e,t,n)=>{const i=new Array(vu+1);let r=0,s,o;for(s=1;s<=vu;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=SV(i[a]++,a))}},eUe=()=>{let e,t,n,i,r;const s=new Array(vu+1);for(n=0,i=0;i<L9-1;i++)for(N9[i]=n,e=0;e<1<<e4[i];e++)Y0[n++]=i;for(Y0[n-1]=i,r=0,i=0;i<16;i++)for(N6[i]=r,e=0;e<1<<i2[i];e++)j0[r++]=i;for(r>>=7;i<Yf;i++)for(N6[i]=r<<7,e=0;e<1<<i2[i]-7;e++)j0[256+r++]=i;for(t=0;t<=vu;t++)s[t]=0;for(e=0;e<=143;)pa[e*2+1]=8,e++,s[8]++;for(;e<=255;)pa[e*2+1]=9,e++,s[9]++;for(;e<=279;)pa[e*2+1]=7,e++,s[7]++;for(;e<=287;)pa[e*2+1]=8,e++,s[8]++;for(IV(pa,X0+1,s),e=0;e<Yf;e++)J1[e*2+1]=5,J1[e*2]=SV(e,5);vV=new K8(pa,e4,Zm+1,X0,vu),wV=new K8(J1,i2,0,Yf,vu),_V=new K8(new Array(0),Zpe,0,D9,Kpe)},xV=e=>{let t;for(t=0;t<X0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Yf;t++)e.dyn_dtree[t*2]=0;for(t=0;t<D9;t++)e.bl_tree[t*2]=0;e.dyn_ltree[O9*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},CV=e=>{e.bi_valid>8?W0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},tUe=(e,t,n,i)=>{CV(e),W0(e,n),W0(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},nR=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},q8=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&nR(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!nR(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},iR=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?ko(e,r,t):(o=Y0[r],ko(e,o+Zm+1,t),a=e4[o],a!==0&&(r-=N9[o],fr(e,r,a)),i--,o=TV(i),ko(e,o,n),a=i2[o],a!==0&&(i-=N6[o],fr(e,i,a)));while(s<e.last_lit);ko(e,O9,t)},t4=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=pV,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)q8(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q8(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,q8(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Jpe(e,t),IV(n,l,e.bl_count)},rR=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[UV*2]++):a<=10?e.bl_tree[bV*2]++:e.bl_tree[yV*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},sR=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do ko(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(ko(e,s,e.bl_tree),a--),ko(e,UV,e.bl_tree),fr(e,a-3,2)):a<=10?(ko(e,bV,e.bl_tree),fr(e,a-3,3)):(ko(e,yV,e.bl_tree),fr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},nUe=e=>{let t;for(rR(e,e.dyn_ltree,e.l_desc.max_code),rR(e,e.dyn_dtree,e.d_desc.max_code),t4(e,e.bl_desc),t=D9-1;t>=3&&e.bl_tree[EV[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},iUe=(e,t,n,i)=>{let r;for(fr(e,t-257,5),fr(e,n-1,5),fr(e,i-4,4),r=0;r<i;r++)fr(e,e.bl_tree[EV[r]*2+1],3);sR(e,e.dyn_ltree,t-1),sR(e,e.dyn_dtree,n-1)},rUe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return eR;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return tR;for(n=32;n<Zm;n++)if(e.dyn_ltree[n*2]!==0)return tR;return eR};let oR=!1;const sUe=e=>{oR||(eUe(),oR=!0),e.l_desc=new Z8(e.dyn_ltree,vV),e.d_desc=new Z8(e.dyn_dtree,wV),e.bl_desc=new Z8(e.bl_tree,_V),e.bi_buf=0,e.bi_valid=0,xV(e)},AV=(e,t,n,i)=>{fr(e,(Xpe<<1)+(i?1:0),3),tUe(e,t,n)},oUe=e=>{fr(e,mV<<1,3),ko(e,O9,pa),Qpe(e)},aUe=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===Gpe&&(e.strm.data_type=rUe(e)),t4(e,e.l_desc),t4(e,e.d_desc),o=nUe(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?AV(e,t,n,i):e.strategy===$pe||s===r?(fr(e,(mV<<1)+(i?1:0),3),iR(e,pa,J1)):(fr(e,(jpe<<1)+(i?1:0),3),iUe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),iR(e,e.dyn_ltree,e.dyn_dtree)),xV(e),i&&CV(e)},lUe=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Y0[n]+Zm+1)*2]++,e.dyn_dtree[TV(t)*2]++),e.last_lit===e.lit_bufsize-1);var cUe=sUe,uUe=AV,dUe=aUe,fUe=lUe,hUe=oUe,gUe={_tr_init:cUe,_tr_stored_block:uUe,_tr_flush_block:dUe,_tr_tally:fUe,_tr_align:hUe};const mUe=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var K0=mUe;const pUe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},UUe=new Uint32Array(pUe()),bUe=(e,t,n,i)=>{const r=UUe,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var ti=bUe,ud={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},T5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:yUe,_tr_stored_block:EUe,_tr_flush_block:vUe,_tr_tally:sc,_tr_align:wUe}=gUe,{Z_NO_FLUSH:Ad,Z_PARTIAL_FLUSH:_Ue,Z_FULL_FLUSH:TUe,Z_FINISH:oc,Z_BLOCK:aR,Z_OK:Lo,Z_STREAM_END:lR,Z_STREAM_ERROR:ms,Z_DATA_ERROR:SUe,Z_BUF_ERROR:Q8,Z_DEFAULT_COMPRESSION:IUe,Z_FILTERED:xUe,Z_HUFFMAN_ONLY:lU,Z_RLE:CUe,Z_FIXED:AUe,Z_DEFAULT_STRATEGY:RUe,Z_UNKNOWN:MUe,Z_DEFLATED:S5}=T5,kUe=9,LUe=15,DUe=8,OUe=29,NUe=256,n4=NUe+1+OUe,PUe=30,FUe=19,BUe=2*n4+1,zUe=15,st=3,$l=258,Ks=$l+st+1,HUe=32,I5=42,i4=69,r2=73,s2=91,o2=103,wu=113,h1=666,Kn=1,qm=2,dd=3,sg=4,VUe=3,Gl=(e,t)=>(e.msg=ud[t],t),cR=e=>(e<<1)-(e>4?9:0),Fl=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let $Ue=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ac=$Ue;const Sl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},wi=(e,t)=>{vUe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Sl(e.strm)},bt=(e,t)=>{e.pending_buf[e.pending++]=t},$g=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},GUe=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=K0(e.adler,t,r,n):e.state.wrap===2&&(e.adler=ti(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},RV=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Ks?e.strstart-(e.w_size-Ks):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+$l;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=$l-(f-i),i=f-$l,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},fd=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ks)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=GUe(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=st)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ac(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ac(e,e.ins_h,e.window[o+st-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<st)););}while(e.lookahead<Ks&&e.strm.avail_in!==0)},XUe=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fd(e),e.lookahead===0&&t===Ad)return Kn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,wi(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ks&&(wi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===oc?(wi(e,!0),e.strm.avail_out===0?dd:sg):(e.strstart>e.block_start&&(wi(e,!1),e.strm.avail_out===0),Kn)},J8=(e,t)=>{let n,i;for(;;){if(e.lookahead<Ks){if(fd(e),e.lookahead<Ks&&t===Ad)return Kn;if(e.lookahead===0)break}if(n=0,e.lookahead>=st&&(e.ins_h=ac(e,e.ins_h,e.window[e.strstart+st-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Ks&&(e.match_length=RV(e,n)),e.match_length>=st)if(i=sc(e,e.strstart-e.match_start,e.match_length-st),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=st){e.match_length--;do e.strstart++,e.ins_h=ac(e,e.ins_h,e.window[e.strstart+st-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ac(e,e.ins_h,e.window[e.strstart+1]);else i=sc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(wi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=e.strstart<st-1?e.strstart:st-1,t===oc?(wi(e,!0),e.strm.avail_out===0?dd:sg):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Kn:qm},Yd=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Ks){if(fd(e),e.lookahead<Ks&&t===Ad)return Kn;if(e.lookahead===0)break}if(n=0,e.lookahead>=st&&(e.ins_h=ac(e,e.ins_h,e.window[e.strstart+st-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=st-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Ks&&(e.match_length=RV(e,n),e.match_length<=5&&(e.strategy===xUe||e.match_length===st&&e.strstart-e.match_start>4096)&&(e.match_length=st-1)),e.prev_length>=st&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-st,i=sc(e,e.strstart-1-e.prev_match,e.prev_length-st),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=ac(e,e.ins_h,e.window[e.strstart+st-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=st-1,e.strstart++,i&&(wi(e,!1),e.strm.avail_out===0))return Kn}else if(e.match_available){if(i=sc(e,0,e.window[e.strstart-1]),i&&wi(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Kn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=sc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<st-1?e.strstart:st-1,t===oc?(wi(e,!0),e.strm.avail_out===0?dd:sg):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Kn:qm},jUe=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=$l){if(fd(e),e.lookahead<=$l&&t===Ad)return Kn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=st&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+$l;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=$l-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=st?(n=sc(e,1,e.match_length-st),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=sc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===oc?(wi(e,!0),e.strm.avail_out===0?dd:sg):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Kn:qm},YUe=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(fd(e),e.lookahead===0)){if(t===Ad)return Kn;break}if(e.match_length=0,n=sc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wi(e,!1),e.strm.avail_out===0))return Kn}return e.insert=0,t===oc?(wi(e,!0),e.strm.avail_out===0?dd:sg):e.last_lit&&(wi(e,!1),e.strm.avail_out===0)?Kn:qm};function bo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const g1=[new bo(0,0,0,0,XUe),new bo(4,4,8,4,J8),new bo(4,5,16,8,J8),new bo(4,6,32,32,J8),new bo(4,4,16,16,Yd),new bo(8,16,32,32,Yd),new bo(8,16,128,128,Yd),new bo(8,32,128,256,Yd),new bo(32,128,258,1024,Yd),new bo(32,258,258,4096,Yd)],WUe=e=>{e.window_size=2*e.w_size,Fl(e.head),e.max_lazy_match=g1[e.level].max_lazy,e.good_match=g1[e.level].good_length,e.nice_match=g1[e.level].nice_length,e.max_chain_length=g1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=st-1,e.match_available=0,e.ins_h=0};function KUe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(BUe*2),this.dyn_dtree=new Uint16Array((2*PUe+1)*2),this.bl_tree=new Uint16Array((2*FUe+1)*2),Fl(this.dyn_ltree),Fl(this.dyn_dtree),Fl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(zUe+1),this.heap=new Uint16Array(2*n4+1),Fl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*n4+1),Fl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const MV=e=>{if(!e||!e.state)return Gl(e,ms);e.total_in=e.total_out=0,e.data_type=MUe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?I5:wu,e.adler=t.wrap===2?0:1,t.last_flush=Ad,yUe(t),Lo},kV=e=>{const t=MV(e);return t===Lo&&WUe(e.state),t},ZUe=(e,t)=>!e||!e.state||e.state.wrap!==2?ms:(e.state.gzhead=t,Lo),LV=(e,t,n,i,r,s)=>{if(!e)return ms;let o=1;if(t===IUe&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>kUe||n!==S5||i<8||i>15||t<0||t>9||s<0||s>AUe)return Gl(e,ms);i===8&&(i=9);const a=new KUe;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+st-1)/st),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,kV(e)},qUe=(e,t)=>LV(e,t,S5,LUe,DUe,RUe),QUe=(e,t)=>{let n,i;if(!e||!e.state||t>aR||t<0)return e?Gl(e,ms):ms;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===h1&&t!==oc)return Gl(e,e.avail_out===0?Q8:ms);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===I5)if(r.wrap===2)e.adler=0,bt(r,31),bt(r,139),bt(r,8),r.gzhead?(bt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),bt(r,r.gzhead.time&255),bt(r,r.gzhead.time>>8&255),bt(r,r.gzhead.time>>16&255),bt(r,r.gzhead.time>>24&255),bt(r,r.level===9?2:r.strategy>=lU||r.level<2?4:0),bt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(bt(r,r.gzhead.extra.length&255),bt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ti(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=i4):(bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,r.level===9?2:r.strategy>=lU||r.level<2?4:0),bt(r,VUe),r.status=wu);else{let o=S5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=lU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=HUe),o+=31-o%31,r.status=wu,$g(r,o),r.strstart!==0&&($g(r,e.adler>>>16),$g(r,e.adler&65535)),e.adler=1}if(r.status===i4)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),Sl(e),n=r.pending,r.pending===r.pending_buf_size));)bt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=r2)}else r.status=r2;if(r.status===r2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),Sl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=s2)}else r.status=s2;if(r.status===s2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),Sl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ti(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=o2)}else r.status=o2;if(r.status===o2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Sl(e),r.pending+2<=r.pending_buf_size&&(bt(r,e.adler&255),bt(r,e.adler>>8&255),e.adler=0,r.status=wu)):r.status=wu),r.pending!==0){if(Sl(e),e.avail_out===0)return r.last_flush=-1,Lo}else if(e.avail_in===0&&cR(t)<=cR(s)&&t!==oc)return Gl(e,Q8);if(r.status===h1&&e.avail_in!==0)return Gl(e,Q8);if(e.avail_in!==0||r.lookahead!==0||t!==Ad&&r.status!==h1){let o=r.strategy===lU?YUe(r,t):r.strategy===CUe?jUe(r,t):g1[r.level].func(r,t);if((o===dd||o===sg)&&(r.status=h1),o===Kn||o===dd)return e.avail_out===0&&(r.last_flush=-1),Lo;if(o===qm&&(t===_Ue?wUe(r):t!==aR&&(EUe(r,0,0,!1),t===TUe&&(Fl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Sl(e),e.avail_out===0))return r.last_flush=-1,Lo}return t!==oc?Lo:r.wrap<=0?lR:(r.wrap===2?(bt(r,e.adler&255),bt(r,e.adler>>8&255),bt(r,e.adler>>16&255),bt(r,e.adler>>24&255),bt(r,e.total_in&255),bt(r,e.total_in>>8&255),bt(r,e.total_in>>16&255),bt(r,e.total_in>>24&255)):($g(r,e.adler>>>16),$g(r,e.adler&65535)),Sl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Lo:lR)},JUe=e=>{if(!e||!e.state)return ms;const t=e.state.status;return t!==I5&&t!==i4&&t!==r2&&t!==s2&&t!==o2&&t!==wu&&t!==h1?Gl(e,ms):(e.state=null,t===wu?Gl(e,SUe):Lo)},e2e=(e,t)=>{let n=t.length;if(!e||!e.state)return ms;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==I5||i.lookahead)return ms;if(r===1&&(e.adler=K0(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(Fl(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,fd(i);i.lookahead>=st;){let l=i.strstart,c=i.lookahead-(st-1);do i.ins_h=ac(i,i.ins_h,i.window[l+st-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=st-1,fd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=st-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,Lo};var t2e=qUe,n2e=LV,i2e=kV,r2e=MV,s2e=ZUe,o2e=QUe,a2e=JUe,l2e=e2e,c2e="pako deflate (from Nodeca project)",e0={deflateInit:t2e,deflateInit2:n2e,deflateReset:i2e,deflateResetKeep:r2e,deflateSetHeader:s2e,deflate:o2e,deflateEnd:a2e,deflateSetDictionary:l2e,deflateInfo:c2e};const u2e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var d2e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)u2e(n,i)&&(e[i]=n[i])}}return e},f2e=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},x5={assign:d2e,flattenChunks:f2e};let DV=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{DV=!1}const Z0=new Uint8Array(256);for(let e=0;e<256;e++)Z0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Z0[254]=Z0[254]=1;var h2e=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const g2e=(e,t)=>{if(t<65534&&e.subarray&&DV)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var m2e=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=Z0[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return g2e(s,i)},p2e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Z0[e[n]]>t?n:t},q0={string2buf:h2e,buf2string:m2e,utf8border:p2e};function U2e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var OV=U2e;const NV=Object.prototype.toString,{Z_NO_FLUSH:b2e,Z_SYNC_FLUSH:y2e,Z_FULL_FLUSH:E2e,Z_FINISH:v2e,Z_OK:P6,Z_STREAM_END:w2e,Z_DEFAULT_COMPRESSION:_2e,Z_DEFAULT_STRATEGY:T2e,Z_DEFLATED:S2e}=T5;function C5(e){this.options=x5.assign({level:_2e,method:S2e,chunkSize:16384,windowBits:15,memLevel:8,strategy:T2e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OV,this.strm.avail_out=0;let n=e0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==P6)throw new Error(ud[n]);if(t.header&&e0.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=q0.string2buf(t.dictionary):NV.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=e0.deflateSetDictionary(this.strm,i),n!==P6)throw new Error(ud[n]);this._dict_set=!0}}C5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?v2e:b2e,typeof e=="string"?n.input=q0.string2buf(e):NV.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===y2e||s===E2e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=e0.deflate(n,s),r===w2e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=e0.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===P6;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};C5.prototype.onData=function(e){this.chunks.push(e)};C5.prototype.onEnd=function(e){e===P6&&(this.result=x5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function I2e(e,t){const n=new C5(t);if(n.push(e,!0),n.err)throw n.msg||ud[n.err];return n.result}var x2e=I2e,C2e={deflate:x2e};const cU=30,A2e=12;var R2e=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,b,E,y,v,w,S,R,_,T,x,I;const M=t.state;i=t.next_in,x=t.input,r=i+(t.avail_in-5),s=t.next_out,I=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=M.dmax,c=M.wsize,u=M.whave,d=M.wnext,f=M.window,h=M.hold,m=M.bits,p=M.lencode,b=M.distcode,E=(1<<M.lenbits)-1,y=(1<<M.distbits)-1;e:do{m<15&&(h+=x[i++]<<m,m+=8,h+=x[i++]<<m,m+=8),v=p[h&E];t:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w===0)I[s++]=v&65535;else if(w&16){S=v&65535,w&=15,w&&(m<w&&(h+=x[i++]<<m,m+=8),S+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=x[i++]<<m,m+=8,h+=x[i++]<<m,m+=8),v=b[h&y];n:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w&16){if(R=v&65535,w&=15,m<w&&(h+=x[i++]<<m,m+=8,m<w&&(h+=x[i++]<<m,m+=8)),R+=h&(1<<w)-1,R>l){t.msg="invalid distance too far back",M.mode=cU;break e}if(h>>>=w,m-=w,w=s-o,R>w){if(w=R-w,w>u&&M.sane){t.msg="invalid distance too far back",M.mode=cU;break e}if(_=0,T=f,d===0){if(_+=c-w,w<S){S-=w;do I[s++]=f[_++];while(--w);_=s-R,T=I}}else if(d<w){if(_+=c+d-w,w-=d,w<S){S-=w;do I[s++]=f[_++];while(--w);if(_=0,d<S){w=d,S-=w;do I[s++]=f[_++];while(--w);_=s-R,T=I}}}else if(_+=d-w,w<S){S-=w;do I[s++]=f[_++];while(--w);_=s-R,T=I}for(;S>2;)I[s++]=T[_++],I[s++]=T[_++],I[s++]=T[_++],S-=3;S&&(I[s++]=T[_++],S>1&&(I[s++]=T[_++]))}else{_=s-R;do I[s++]=I[_++],I[s++]=I[_++],I[s++]=I[_++],S-=3;while(S>2);S&&(I[s++]=I[_++],S>1&&(I[s++]=I[_++]))}}else if(w&64){t.msg="invalid distance code",M.mode=cU;break e}else{v=b[(v&65535)+(h&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){M.mode=A2e;break e}else{t.msg="invalid literal/length code",M.mode=cU;break e}else{v=p[(v&65535)+(h&(1<<w)-1)];continue t}break}}while(i<r&&s<a);S=m>>3,i-=S,m-=S<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),M.hold=h,M.bits=m};const Wd=15,uR=852,dR=592,fR=0,e7=1,hR=2,M2e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),k2e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),L2e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),D2e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),O2e=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,b=0,E=0,y=0,v,w,S,R,_,T=null,x=0,I;const M=new Uint16Array(Wd+1),D=new Uint16Array(Wd+1);let L=null,G=0,H,V,$;for(c=0;c<=Wd;c++)M[c]=0;for(u=0;u<i;u++)M[t[n+u]]++;for(h=l,f=Wd;f>=1&&M[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&M[d]===0;d++);for(h<d&&(h=d),b=1,c=1;c<=Wd;c++)if(b<<=1,b-=M[c],b<0)return-1;if(b>0&&(e===fR||f!==1))return-1;for(D[1]=0,c=1;c<Wd;c++)D[c+1]=D[c]+M[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[D[t[n+u]]++]=u);if(e===fR?(T=L=o,I=19):e===e7?(T=M2e,x-=257,L=k2e,G-=257,I=256):(T=L2e,L=D2e,I=-1),y=0,u=0,c=d,_=s,m=h,p=0,S=-1,E=1<<h,R=E-1,e===e7&&E>uR||e===hR&&E>dR)return 1;for(;;){H=c-p,o[u]<I?(V=0,$=o[u]):o[u]>I?(V=L[G+o[u]],$=T[x+o[u]]):(V=96,$=0),v=1<<c-p,w=1<<m,d=w;do w-=v,r[_+(y>>p)+w]=H<<24|V<<16|$|0;while(w!==0);for(v=1<<c-1;y&v;)v>>=1;if(v!==0?(y&=v-1,y+=v):y=0,u++,--M[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(y&R)!==S){for(p===0&&(p=h),_+=d,m=c-p,b=1<<m;m+p<f&&(b-=M[m+p],!(b<=0));)m++,b<<=1;if(E+=1<<m,e===e7&&E>uR||e===hR&&E>dR)return 1;S=y&R,r[S]=h<<24|m<<16|_-s|0}}return y!==0&&(r[_+y]=c-p<<24|64<<16|0),a.bits=h,0};var t0=O2e;const N2e=0,PV=1,FV=2,{Z_FINISH:gR,Z_BLOCK:P2e,Z_TREES:uU,Z_OK:hd,Z_STREAM_END:F2e,Z_NEED_DICT:B2e,Z_STREAM_ERROR:Es,Z_DATA_ERROR:BV,Z_MEM_ERROR:zV,Z_BUF_ERROR:z2e,Z_DEFLATED:mR}=T5,HV=1,pR=2,UR=3,bR=4,yR=5,ER=6,vR=7,wR=8,_R=9,TR=10,F6=11,fa=12,t7=13,SR=14,n7=15,IR=16,xR=17,CR=18,AR=19,dU=20,fU=21,RR=22,MR=23,kR=24,LR=25,DR=26,i7=27,OR=28,NR=29,nn=30,VV=31,H2e=32,V2e=852,$2e=592,G2e=15,X2e=G2e,PR=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function j2e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $V=e=>{if(!e||!e.state)return Es;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HV,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(V2e),t.distcode=t.distdyn=new Int32Array($2e),t.sane=1,t.back=-1,hd},GV=e=>{if(!e||!e.state)return Es;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$V(e)},XV=(e,t)=>{let n;if(!e||!e.state)return Es;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Es:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,GV(e))},jV=(e,t)=>{if(!e)return Es;const n=new j2e;e.state=n,n.window=null;const i=XV(e,t);return i!==hd&&(e.state=null),i},Y2e=e=>jV(e,X2e);let FR=!0,r7,s7;const W2e=e=>{if(FR){r7=new Int32Array(512),s7=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(t0(PV,e.lens,0,288,r7,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;t0(FV,e.lens,0,32,s7,0,e.work,{bits:5}),FR=!1}e.lencode=r7,e.lenbits=9,e.distcode=s7,e.distbits=5},YV=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},K2e=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,b=0,E,y,v,w,S,R,_,T;const x=new Uint8Array(4);let I,M;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Es;n=e.state,n.mode===fa&&(n.mode=t7),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=hd;e:for(;;)switch(n.mode){case HV:if(n.wrap===0){n.mode=t7;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=ti(n.check,x,2,0),c=0,u=0,n.mode=pR;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=nn;break}if((c&15)!==mR){e.msg="unknown compression method",n.mode=nn;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=nn;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?TR:fa,c=0,u=0;break;case pR:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==mR){e.msg="unknown compression method",n.mode=nn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=nn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=ti(n.check,x,2,0)),c=0,u=0,n.mode=UR;case UR:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=ti(n.check,x,4,0)),c=0,u=0,n.mode=bR;case bR:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=ti(n.check,x,2,0)),c=0,u=0,n.mode=yR;case yR:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=ti(n.check,x,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=ER;case ER:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),_)),n.flags&512&&(n.check=ti(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=vR;case vR:if(n.flags&2048){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=ti(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=wR;case wR:if(n.flags&4096){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=ti(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.comment=null);n.mode=_R;case _R:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=nn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=fa;break;case TR:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=PR(c),c=0,u=0,n.mode=F6;case F6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,B2e;e.adler=n.check=1,n.mode=fa;case fa:if(t===P2e||t===uU)break e;case t7:if(n.last){c>>>=u&7,u-=u&7,n.mode=i7;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=SR;break;case 1:if(W2e(n),n.mode=dU,t===uU){c>>>=2,u-=2;break e}break;case 2:n.mode=xR;break;case 3:e.msg="invalid block type",n.mode=nn}c>>>=2,u-=2;break;case SR:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=nn;break}if(n.length=c&65535,c=0,u=0,n.mode=n7,t===uU)break e;case n7:n.mode=IR;case IR:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=fa;break;case xR:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=nn;break}n.have=0,n.mode=CR;case CR:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[D[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},T=t0(N2e,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid code lengths set",n.mode=nn;break}n.have=0,n.mode=AR;case AR:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[c&(1<<n.lenbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(v<16)c>>>=E,u-=E,n.lens[n.have++]=v;else{if(v===16){for(M=E+2;u<M;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=E,u-=E,n.have===0){e.msg="invalid bit length repeat",n.mode=nn;break}_=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(M=E+3;u<M;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,_=0,h=3+(c&7),c>>>=3,u-=3}else{for(M=E+7;u<M;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,_=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=nn;break}for(;h--;)n.lens[n.have++]=_}}if(n.mode===nn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=nn;break}if(n.lenbits=9,I={bits:n.lenbits},T=t0(PV,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid literal/lengths set",n.mode=nn;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},T=t0(FV,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,T){e.msg="invalid distances set",n.mode=nn;break}if(n.mode=dU,t===uU)break e;case dU:n.mode=fU;case fU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,R2e(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===fa&&(n.back=-1);break}for(n.back=0;b=n.lencode[c&(1<<n.lenbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&!(y&240)){for(w=E,S=y,R=v;b=n.lencode[R+((c&(1<<w+S)-1)>>w)],E=b>>>24,y=b>>>16&255,v=b&65535,!(w+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=E,u-=E,n.back+=E,n.length=v,y===0){n.mode=DR;break}if(y&32){n.back=-1,n.mode=fa;break}if(y&64){e.msg="invalid literal/length code",n.mode=nn;break}n.extra=y&15,n.mode=RR;case RR:if(n.extra){for(M=n.extra;u<M;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=MR;case MR:for(;b=n.distcode[c&(1<<n.distbits)-1],E=b>>>24,y=b>>>16&255,v=b&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(y&240)){for(w=E,S=y,R=v;b=n.distcode[R+((c&(1<<w+S)-1)>>w)],E=b>>>24,y=b>>>16&255,v=b&65535,!(w+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=E,u-=E,n.back+=E,y&64){e.msg="invalid distance code",n.mode=nn;break}n.offset=v,n.extra=y&15,n.mode=kR;case kR:if(n.extra){for(M=n.extra;u<M;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=nn;break}n.mode=LR;case LR:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=nn;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=fU);break;case DR:if(l===0)break e;r[o++]=n.length,l--,n.mode=fU;break;case i7:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?ti(n.check,r,f,o-f):K0(n.check,r,f,o-f)),f=l,(n.flags?c:PR(c))!==n.check){e.msg="incorrect data check",n.mode=nn;break}c=0,u=0}n.mode=OR;case OR:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=nn;break}c=0,u=0}n.mode=NR;case NR:T=F2e;break e;case nn:T=BV;break e;case VV:return zV;case H2e:default:return Es}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<nn&&(n.mode<i7||t!==gR))&&YV(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?ti(n.check,r,f,e.next_out-f):K0(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===fa?128:0)+(n.mode===dU||n.mode===n7?256:0),(d===0&&f===0||t===gR)&&T===hd&&(T=z2e),T},Z2e=e=>{if(!e||!e.state)return Es;let t=e.state;return t.window&&(t.window=null),e.state=null,hd},q2e=(e,t)=>{if(!e||!e.state)return Es;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,hd):Es},Q2e=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==F6)?Es:i.mode===F6&&(r=1,r=K0(r,t,n,0),r!==i.check)?BV:(s=YV(e,t,n,n),s?(i.mode=VV,zV):(i.havedict=1,hd))};var J2e=GV,e6e=XV,t6e=$V,n6e=Y2e,i6e=jV,r6e=K2e,s6e=Z2e,o6e=q2e,a6e=Q2e,l6e="pako inflate (from Nodeca project)",Ua={inflateReset:J2e,inflateReset2:e6e,inflateResetKeep:t6e,inflateInit:n6e,inflateInit2:i6e,inflate:r6e,inflateEnd:s6e,inflateGetHeader:o6e,inflateSetDictionary:a6e,inflateInfo:l6e};function c6e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var u6e=c6e;const WV=Object.prototype.toString,{Z_NO_FLUSH:d6e,Z_FINISH:f6e,Z_OK:Q0,Z_STREAM_END:o7,Z_NEED_DICT:a7,Z_STREAM_ERROR:h6e,Z_DATA_ERROR:BR,Z_MEM_ERROR:g6e}=T5;function A5(e){this.options=x5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OV,this.strm.avail_out=0;let n=Ua.inflateInit2(this.strm,t.windowBits);if(n!==Q0)throw new Error(ud[n]);if(this.header=new u6e,Ua.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=q0.string2buf(t.dictionary):WV.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ua.inflateSetDictionary(this.strm,t.dictionary),n!==Q0)))throw new Error(ud[n])}A5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?f6e:d6e,WV.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Ua.inflate(n,o),s===a7&&r&&(s=Ua.inflateSetDictionary(n,r),s===Q0?s=Ua.inflate(n,o):s===BR&&(s=a7));n.avail_in>0&&s===o7&&n.state.wrap>0&&e[n.next_in]!==0;)Ua.inflateReset(n),s=Ua.inflate(n,o);switch(s){case h6e:case BR:case a7:case g6e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===o7))if(this.options.to==="string"){let l=q0.utf8border(n.output,n.next_out),c=n.next_out-l,u=q0.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Q0&&a===0)){if(s===o7)return s=Ua.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};A5.prototype.onData=function(e){this.chunks.push(e)};A5.prototype.onEnd=function(e){e===Q0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function m6e(e,t){const n=new A5(t);if(n.push(e),n.err)throw n.msg||ud[n.err];return n.result}var p6e=m6e,U6e={inflate:p6e};const{deflate:b6e}=C2e,{inflate:y6e}=U6e;var KV=b6e,ZV=y6e;const a2=12,E6e=()=>{const e=new Uint8Array(a2);return window.crypto.getRandomValues(e)},P9=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:wP},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},qV=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:wP},!1,[t]),R5=async(e,t)=>{const n=typeof e=="string"?await qV(e,"encrypt"):e,i=E6e(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await Xl(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},J0=async(e,t,n)=>{const i=await qV(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},B6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},QV=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},JV=e=>new TextDecoder("utf-8").decode(QV(e)),e$=(e,t=!1)=>t?window.btoa(e):window.btoa(B6(e)),t$=(e,t=!1)=>t?window.atob(e):JV(window.atob(e)),zR=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),n$=({text:e,compress:t})=>{let n;if(t!==!1)try{n=B6(KV(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||B6(e)}},i$=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:JV(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?ZV(new Uint8Array(QV(t)),{to:"string"}):t},r$=1,l2=4,Wf=4,l7={1:8,2:16,4:32};function z6(e,t,n,i){if(i!=null){if(i>Math.pow(2,l7[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${l7[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${l7[t]}`;return new DataView(e.buffer)[r](n)}const HR=(...e)=>{const t=new Uint8Array(l2+Wf*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;z6(t,l2,n,r$),n+=l2;for(const i of e)z6(t,Wf,n,i.byteLength),n+=Wf,t.set(i,n),n+=i.byteLength;return t},VR=e=>{const t=[];let n=0;const i=z6(e,Wf,n);if(i>r$)throw new Error(`invalid version ${i}`);for(n+=l2;;){const r=z6(e,Wf,n);if(n+=Wf,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},v6e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await R5(t,KV(e));return{iv:i,buffer:new Uint8Array(n)}},s$=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await v6e(HR(r,e),t.encryptionKey);return HR(i,s,o)},w6e=async(e,t,n,i)=>(t=new Uint8Array(await J0(e,t,n)),i?ZV(t):t),o$=async(e,t)=>{const[n,i,r]=VR(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=VR(await w6e(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},Rd=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),_6e=Rd?ye(()=>import("./file-open-002ab408-DIuFHtCF.js"),__vite__mapDeps([]),import.meta.url):ye(()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]),import.meta.url);async function T6e(...e){return(await _6e).default(...e)}Rd?ye(()=>import("./directory-open-4ed118d0-BzWybGaI.js"),__vite__mapDeps([]),import.meta.url):ye(()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]),import.meta.url);const S6e=Rd?ye(()=>import("./file-save-745eba88-Bb9F9Kg7.js"),__vite__mapDeps([]),import.meta.url):ye(()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]),import.meta.url);async function I6e(...e){return(await S6e).default(...e)}const $R=500,F9=e=>{var i,r;const t=(i=e.extensions)==null?void 0:i.reduce((s,o)=>(s.push(Ee[o]),s),[]),n=(r=e.extensions)==null?void 0:r.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return T6e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{const l=ja(o,$R),c=()=>{u(),document.addEventListener(te.KEYUP,l),document.addEventListener(te.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener(te.FOCUS,c)});const d=window.setInterval(()=>{u()},$R);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(te.FOCUS,c),document.removeEventListener(te.KEYUP,l),document.removeEventListener(te.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new Th))}}})},H6=(e,t)=>I6e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),x6e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},og=(e,t,n,i)=>{const r={type:hs.excalidraw,version:Vb.excalidraw,source:aw,elements:i==="local"?TF(e):uoe(e),appState:i==="local"?Tz(t):jle(t),files:i==="local"?x6e(e,n):void 0};return JSON.stringify(r,null,2)},a$=async(e,t,n,i=t.name||SP)=>{const r=og(e,t,n,"local"),s=new Blob([r],{type:Ee.excalidraw});return{fileHandle:await H6(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:V9(t.fileHandle)?null:t.fileHandle})}},C6e=async(e,t)=>{const n=await F9({description:"Excalidraw files"});return $9(await G9(n),e,t,n.handle)},A6e=e=>(e==null?void 0:e.type)===hs.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),l$=e=>typeof e=="object"&&e&&e.type===hs.excalidrawLibrary&&(e.version===1||e.version===2),c$=e=>{const t={type:hs.excalidrawLibrary,version:Vb.excalidrawLibrary,source:aw,libraryItems:e};return JSON.stringify(t,null,2)},R6e=async e=>{const t=c$(e);await H6(new Blob([t],{type:Ee.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},u$=document.createElement("img");u$.src=`data:${Ee.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const d$=document.createElement("img");d$.src=`data:${Ee.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const B9=([e,t,n,i],r,s)=>{const o=rae,a=o/s.zoom.value,l=o/s.zoom.value,c=o/s.zoom.value,u=(e+n)/2,d=(t+i)/2,f=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,m=n+h-f,p=t-h-c+f,[b,E]=q(A(m+a/2,p+l/2),A(u,d),r);return[b-a/2,E-l/2,a,l]},f$=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=Pe(e,t),[u,d,f,h]=B9([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},c7=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&_w(i,r,e,t)?!0:f$(e,t,n,A(i,r)),M5=(e,t,n,i,r=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),e.fill(),r&&e.stroke()},k5=(e,t)=>[e.width/t,e.height/t],L5=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===xe.DARK&&(a.filter=uw),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a},hU={Bold:"#dddddd",Regular:"#e5e5e5"},M6e=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?hU.Bold:hU.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?hU.Bold:hU.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},GR=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,on.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},XR={regularLink:null,elementLink:null},jR=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=Pe(e,i),[l,c,u,d]=B9([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=K1(e.link)?"elementLink":"regularLink";let p=XR[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,XR[m]=p;const b=p.getContext("2d");b.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),b.fillStyle="#fff",b.fillRect(0,0,u,d),m==="elementLink"?b.drawImage(d$,0,0,u,d):b.drawImage(u$,0,0,u,d),b.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},h$=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=k5(e,s),f=L5({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&M6e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(b=>{b.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[b.id]&&(Tc(b,o.frameToHighlight,n)||b.groupIds.find(E=>h.has(E)))&&b.groupIds.forEach(E=>h.add(E))});const m=new Map;r.filter(b=>!rs(b)).forEach(b=>{var E;try{const y=b.frameId||((E=o.frameToHighlight)==null?void 0:E.id);if(fe(b)&&b.containerId&&n.has(b.containerId))return;if(f.save(),y&&o.frameRendering.enabled&&o.frameRendering.clip){const w=pE(b,n,o);w&&oC(b,w,o,n,m)&&GR(w,f,a,o),ru(b,n,i,t,f,a,o)}else ru(b,n,i,t,f,a,o);const v=ze(b,n);v&&ru(v,n,i,t,f,a,o),f.restore(),c||jR(b,f,o,n)}catch(y){console.error(y,b.id,b.x,b.y,b.width,b.height)}}),r.filter(b=>rs(b)).forEach(b=>{var E;try{const y=()=>{if(ru(b,n,i,t,f,a,o),rs(b)&&(c||lr(b)&&a.embedsValidationStatus.get(b.id)!==!0)&&b.width&&b.height){const w=hB(b);ru(w,n,i,t,f,a,o)}c||jR(b,f,o,n)};if((b.frameId||((E=o.frameToHighlight)==null?void 0:E.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const w=pE(b,n,o);w&&oC(b,w,o,n,m)&&GR(w,f,a,o),y(),f.restore()}else y()}catch(y){console.error(y)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(b=>{try{ru(b,n,i,t,f,a,o)}catch(E){console.error(E)}})},g$=Zh(e=>{h$(e)},{trailing:!0}),m$=(e,t)=>{if(t){g$(e);return}h$(e)},Gg=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},Xg=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=pr(e,r);if(s){const o=t.ownerDocument.createElementNS(it,"g");return o.setAttributeNS(it,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},c2=(e,t,n,i,r,s,o,a)=>{var v;const l={x:s,y:o},[c,u,d,f]=Pe(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(fe(e)){const w=Bn(e,t);if(Le(w)){const[S,R,_,T]=Pe(w,t),x=ue.getBoundTextElementPosition(w,e,t);h=(_-S)/2-(x.x-S),m=(T-R)/2-(x.y-R),s=s+x.x-e.x,o=o+x.y-e.y}}const p=180*e.angle/Math.PI;let b=i;if(e.link){const w=i.ownerDocument.createElementNS(it,"a");w.setAttribute("href",Fr(e.link)),b.appendChild(w),b=w}const E=(w,S)=>{b.appendChild(w)},y=(((v=pr(e,t))==null?void 0:v.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const w=Yt.generateElementShape(e,null),S=Gg(n,w,Lg);y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const R=Xg(e,b,[S],a.frameRendering,t);E(R||S);break}case"iframe":case"embeddable":{const w=Yt.generateElementShape(e,a),S=Gg(n,w,Lg),R=e.opacity/100;R!==1&&(S.setAttribute("stroke-opacity",`${R}`),S.setAttribute("fill-opacity",`${R}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),E(S);const _=hB(e);c2(_,t,n,b,r,_.x+l.x-e.x,_.y+l.y-e.y,a);const T=Gg(n,w,Lg);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);T.firstChild;)T.removeChild(T.firstChild);const x=js(Math.min(e.width,e.height),e),I=Rf(Uw(e.link||""));if(a.renderEmbeddables===!1||(I==null?void 0:I.type)==="document"){const M=i.ownerDocument.createElementNS(it,"a");M.setAttribute("href",Fr(e.link||"")),M.setAttribute("target","_blank"),M.setAttribute("rel","noopener noreferrer"),M.style.borderRadius=`${x}px`,T.appendChild(M)}else{const M=i.ownerDocument.createElementNS(it,"foreignObject");M.style.width=`${e.width}px`,M.style.height=`${e.height}px`,M.style.border="none";const D=M.ownerDocument.createElementNS(it,"div");D.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),D.style.width="100%",D.style.height="100%";const L=D.ownerDocument.createElement("iframe");L.src=(I==null?void 0:I.link)??"",L.style.width="100%",L.style.height="100%",L.style.border="none",L.style.borderRadius=`${x}px`,L.style.top="0",L.style.left="0",L.allowFullscreen=!0,D.appendChild(L),M.appendChild(D),T.appendChild(M)}E(T);break}case"line":case"arrow":{const w=ze(e,t),S=i.ownerDocument.createElementNS(it,"mask");if(w){S.setAttribute("id",`mask-${e.id}`);const x=i.ownerDocument.createElementNS(it,"rect");s=s||0,o=o||0,x.setAttribute("x","0"),x.setAttribute("y","0"),x.setAttribute("fill","#fff"),x.setAttribute("width",`${e.width+100+s}`),x.setAttribute("height",`${e.height+100+o}`),S.appendChild(x);const I=i.ownerDocument.createElementNS(it,"rect"),M=ue.getBoundTextElementPosition(e,w,t),D=s+M.x-e.x,L=o+M.y-e.y;I.setAttribute("x",D.toString()),I.setAttribute("y",L.toString()),I.setAttribute("fill","#000"),I.setAttribute("width",`${w.width}`),I.setAttribute("height",`${w.height}`),I.setAttribute("opacity","1"),S.appendChild(I)}const R=i.ownerDocument.createElementNS(it,"g");w&&R.setAttribute("mask",`url(#mask-${e.id})`),R.setAttribute("stroke-linecap","round"),Yt.generateElementShape(e,a).forEach(x=>{const I=Gg(n,x,Lg);y!==1&&(I.setAttribute("stroke-opacity",`${y}`),I.setAttribute("fill-opacity",`${y}`)),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&qa(e.points)&&e.backgroundColor!=="transparent"&&I.setAttribute("fill-rule","evenodd"),R.appendChild(I)});const T=Xg(e,b,[R,S],a.frameRendering,t);T?(E(T),b.appendChild(T)):(E(R),b.append(S));break}case"freedraw":{const w=Yt.generateElementShape(e,a),S=w?Gg(n,w,Lg):i.ownerDocument.createElementNS(it,"g");y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),S.setAttribute("stroke","none");const R=i.ownerDocument.createElementNS(it,"path");R.setAttribute("fill",e.strokeColor),R.setAttribute("d",iB(e)),S.appendChild(R);const _=Xg(e,b,[S],a.frameRendering,t);E(_||S);break}case"image":{const w=Math.round(e.width),S=Math.round(e.height),R=In(e)&&r[e.fileId];if(R){const{reuseImages:_=!0}=a;let T=`image-${R.id}`,x=e.width,I=e.height;e.crop&&({width:x,height:I}=Qa(e),T=`image-crop-${R.id}-${_F(`${x}x${I}`)}`),_||(T=`image-${e.id}`);let M=i.querySelector(`#${T}`);if(!M){M=i.ownerDocument.createElementNS(it,"symbol"),M.id=T;const X=i.ownerDocument.createElementNS(it,"image");X.setAttribute("href",R.dataURL),X.setAttribute("preserveAspectRatio","none"),e.crop||!_?(X.setAttribute("width",`${x}`),X.setAttribute("height",`${I}`)):(X.setAttribute("width","100%"),X.setAttribute("height","100%")),M.appendChild(X),(b.querySelector("defs")||b).prepend(M)}const D=i.ownerDocument.createElementNS(it,"use");D.setAttribute("href",`#${T}`),a.exportWithDarkMode&&R.mimeType!==Ee.svg&&D.setAttribute("filter",KF);let L=0,G=0;if(e.crop){const{width:X,height:Z}=Qa(e);L=e.crop.x/(e.crop.naturalWidth/X),G=e.crop.y/(e.crop.naturalHeight/Z)}const H=h+L,V=m+G;D.setAttribute("width",`${w+L}`),D.setAttribute("height",`${S+G}`),D.setAttribute("opacity",`${y}`),(e.scale[0]!==1||e.scale[1]!==1)&&D.setAttribute("transform",`translate(${H} ${V}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-H} ${-V})`);const $=i.ownerDocument.createElementNS(it,"g");if(e.crop){const X=i.ownerDocument.createElementNS(it,"mask");X.setAttribute("id",`mask-image-crop-${e.id}`),X.setAttribute("fill","#fff");const Z=i.ownerDocument.createElementNS(it,"rect");Z.setAttribute("x",`${L}`),Z.setAttribute("y",`${G}`),Z.setAttribute("width",`${w}`),Z.setAttribute("height",`${S}`),X.appendChild(Z),b.appendChild(X),$.setAttribute("mask",`url(#${X.id})`)}if($.appendChild(D),$.setAttribute("transform",`translate(${s-L} ${o-G}) rotate(${p} ${H} ${V})`),e.roundness){const X=i.ownerDocument.createElementNS(it,"clipPath");X.id=`image-clipPath-${e.id}`;const Z=i.ownerDocument.createElementNS(it,"rect"),ge=js(Math.min(e.width,e.height),e);Z.setAttribute("width",`${e.width}`),Z.setAttribute("height",`${e.height}`),Z.setAttribute("rx",`${ge}`),Z.setAttribute("ry",`${ge}`),X.appendChild(Z),E(X),$.setAttributeNS(it,"clip-path",`url(#${X.id})`)}const j=Xg(e,b,[$],a.frameRendering,t);E(j||$)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const w=document.createElementNS(it,"rect");w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),w.setAttribute("width",`${e.width}px`),w.setAttribute("height",`${e.height}px`),w.setAttribute("rx",on.radius.toString()),w.setAttribute("ry",on.radius.toString()),w.setAttribute("fill","none"),w.setAttribute("stroke",on.strokeColor),w.setAttribute("stroke-width",on.strokeWidth.toString()),E(w)}break}default:if(fe(e)){const w=i.ownerDocument.createElementNS(it,"g");y!==1&&(w.setAttribute("stroke-opacity",`${y}`),w.setAttribute("fill-opacity",`${y}`)),w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const S=e.text.replace(/\r\n?/g,`
`).split(`
`),R=Bm(e.fontSize,e.lineHeight),_=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=xP(e.fontFamily,e.fontSize,R),x=OP(e.text)?"rtl":"ltr",I=e.textAlign==="center"?"middle":e.textAlign==="right"||x==="rtl"?"end":"start";for(let D=0;D<S.length;D++){const L=i.ownerDocument.createElementNS(it,"text");L.textContent=S[D],L.setAttribute("x",`${_}`),L.setAttribute("y",`${D*R+T}`),L.setAttribute("font-family",Dm(e)),L.setAttribute("font-size",`${e.fontSize}px`),L.setAttribute("fill",e.strokeColor),L.setAttribute("text-anchor",I),L.setAttribute("style","white-space: pre;"),L.setAttribute("direction",x),L.setAttribute("dominant-baseline","alphabetic"),w.appendChild(L)}const M=Xg(e,b,[w],a.frameRendering,t);E(M||w)}else throw new Error(`Unimplemented type ${e.type}`)}},k6e=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!rs(o)).forEach(o=>{if(!o.isDeleted){if(fe(o)&&o.containerId&&t.has(o.containerId))return;try{c2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=ze(o,t);a&&c2(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>rs(o)).forEach(o=>{if(!o.isDeleted)try{c2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},L6e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=Ct({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Ce(e,{text:r,width:t})},D6e=(e,t)=>{const n=[];for(const i of e){if(Ie(i)){let r=Vr({x:i.x,y:i.y-on.nameOffsetY,fontFamily:xt.Helvetica,fontSize:on.nameFontSize,lineHeight:on.nameLineHeight,strokeColor:t.exportWithDarkMode?on.nameColorDarkTheme:on.nameColorLightTheme,text:AF(i)});r.y-=r.height,r=L6e(r,i.width),n.push(r)}n.push(i)}return n},p$=(e,t)=>(t=t||so().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),U$=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=Hw(e,t):n.enabled&&n.name?r=D6e(e,{exportWithDarkMode:i}):r=e,r},b$=async(e,t,n,{exportBackground:i,exportPadding:r=Kh,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await za.loadElementsFonts(e)})=>{await l();const c=p$(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=U$({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=H9(o?[o]:zw(u),r),{canvas:p,scale:b=1}=a(h,m),E=so(),{imageCache:y}=await mB({imageCache:new Map,fileIds:pB(u).map(v=>v.fileId),files:n});return m$({canvas:p,rc:Bc.canvas(p),elementsMap:ys(Se(u)),allElementsMap:ys(Se(Za(e))),visibleElements:u,scale:b,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:E.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?xe.DARK:xe.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:y,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},m1=e=>document.createComment(` ${e} `),z9=async(e,t,n,i)=>{const r=p$((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:s=Kh,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=U$({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=H9(u?[u]:zw(d),s),b=-f+s,E=-h+s,y=document.createElementNS(it,"svg");y.setAttribute("version","1.1"),y.setAttribute("xmlns",it),y.setAttribute("viewBox",`0 0 ${m} ${p}`),y.setAttribute("width",`${m*l}`),y.setAttribute("height",`${p*l}`),o&&y.setAttribute("filter",uw);const v=y.ownerDocument.createElementNS(it,"defs"),w=y.ownerDocument.createElementNS(it,"metadata");if(y.appendChild(m1("svg-source:excalidraw")),y.appendChild(w),y.appendChild(v),c)try{O6e({metadataElement:w,payload:og(e,t,n||{},"local")})}catch(M){console.error(M)}const S=Bw(e);if(S.length){const M=Se(e);for(const D of S){const L=y.ownerDocument.createElementNS(it,"clipPath");L.setAttribute("id",D.id);const[G,H,V,$]=Pe(D,M),j=(V-G)/2-(D.x-G),X=($-H)/2-(D.y-H),Z=y.ownerDocument.createElementNS(it,"rect");Z.setAttribute("transform",`translate(${D.x+b} ${D.y+E}) rotate(${D.angle} ${j} ${X})`),Z.setAttribute("width",`${D.width}`),Z.setAttribute("height",`${D.height}`),u||(Z.setAttribute("rx",`${on.radius}`),Z.setAttribute("ry",`${on.radius}`)),L.appendChild(Z),v.appendChild(L)}}const R=i!=null&&i.skipInliningFonts?[]:await za.generateFontFaceDeclarations(e),_=`
      `,T=y.ownerDocument.createElementNS(it,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${_}${R.join(_)}`)),v.appendChild(T),t.exportBackground&&a){const M=y.ownerDocument.createElementNS(it,"rect");M.setAttribute("x","0"),M.setAttribute("y","0"),M.setAttribute("width",`${m}`),M.setAttribute("height",`${p}`),M.setAttribute("fill",a),y.appendChild(M)}const x=Bc.svg(y),I=(i==null?void 0:i.renderEmbeddables)??!1;return k6e(d,ys(Se(d)),x,y,n||{},{offsetX:b,offsetY:E,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:I,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:I?new Map(d.filter(M=>Ie(M)).map(M=>[M.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),y},O6e=({payload:e,metadataElement:t})=>{const n=e$(JSON.stringify(n$({text:e})),!0);t.appendChild(m1(`payload-type:${Ee.excalidraw}`)),t.appendChild(m1("payload-version:2")),t.appendChild(m1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(m1("payload-end"))},N6e=({svg:e})=>{if(e.includes(`payload-type:${Ee.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),r=((n==null?void 0:n[1])||"1")!=="1";try{const s=t$(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===hs.excalidraw)return s;throw new Error("FAILED")}return i$(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},H9=(e,t)=>{const[n,i,r,s]=_t(e),o=Ni(n,r)+t*2,a=Ni(i,s)+t*2;return[n,i,o,a]},P6e=(e,t,n)=>{const[,,i,r]=H9(e,t).map(s=>Math.trunc(s*n));return[i,r]},F6e={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},B6e=e=>Object.keys(xt).includes(e)?xt[e]:Fc,Kd=(e,t)=>{if(!t)return null;const n=t.focus||0;return me(e)?f6(t)?{...t,focus:n,fixedPoint:Qb(t.fixedPoint??[0,0])}:null:{...t,focus:n}},El=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||Hr(),fillStyle:e.fillStyle||fn.fillStyle,strokeWidth:e.strokeWidth||fn.strokeWidth,strokeStyle:e.strokeStyle??fn.strokeStyle,roughness:e.roughness??fn.roughness,opacity:e.opacity==null?fn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||fn.strokeColor,backgroundColor:e.backgroundColor||fn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Qh(e.type)?Nn.LEGACY:Nn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??qh(),link:e.link?Fr(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...wF(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},z6e=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=B6e(d)}const i=typeof e.text=="string"&&e.text||"",r=e.lineHeight||(e.height?lse(e):Ju(e.fontFamily));return e=El(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||Lm,verticalAlign:e.verticalAlign||q2,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:r}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=$m(e)),e;case"freedraw":return El(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return El(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:s=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[A(0,0),A(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=ue.getNormalizedPoints(e)),El(e,{type:e.type==="draw"?"line":e.type,startBinding:Kd(e,e.startBinding),endBinding:Kd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:c,x:a,y:l,...gh(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[A(0,0),A(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=ue.getNormalizedPoints(e));const p={type:e.type,startBinding:Kd(e,e.startBinding),endBinding:Kd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,...gh(m)};return me(e)?El(e,{...p,elbowed:!0,startBinding:Kd(e,e.startBinding),endBinding:Kd(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):El(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return El(e,{});case"magicframe":case"frame":return El(e,{name:e.name??null})}return null},H6e=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),fe(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},V6e=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=Le(n)?0:(n==null?void 0:n.angle)??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},$6e=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},gd=(e,t,n)=>{const i=new Set,r=t?Se(t):null,s=Za((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!rd(l)){let c=z6e(l);if(c){const u=r==null?void 0:r.get(l.id);u&&u.version>c.version&&(c=$m(c,u.version)),i.has(c.id)&&(c={...c,id:Hr()}),i.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;const o=Se(s);for(const a of s)a.frameId&&$6e(a,o),fe(a)&&a.containerId?V6e(a,o):a.boundElements&&H6e(a,o),n.refreshDimensions&&fe(a)&&Object.assign(a,dB(a,Bn(a,o),o)),ke(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Le(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Le(a))&&(a.endBinding=null));return s.map(a=>{if(me(a)&&a.startBinding==null&&a.endBinding==null&&!vF(a.points))return{...a,...Jh(a,o,{points:[A(0,0),a.points[a.points.length-1]]}),index:a.index};if(me(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[A(0,0),A(0,-10),A(l.width/2+5,-10),A(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},G6e=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},YR={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??G6e("defaultSidebarDockedPreference",e,t)]},y$=(e,t)=>{var r;e=e||{};const n=so(),i={};for(const s of Object.keys(YR))if(s in e){const[o,a]=YR[s](e,n);i[o]=a}for(const[s,o]of Object.entries(n)){const a=e[s],l=t?t[s]:void 0;i[s]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...dn(n,i.activeTool.type&&F6e[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:ka(V1(e.zoom)?e.zoom:((r=e.zoom)==null?void 0:r.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:gs.name}:i.openSidebar,gridSize:$le(V1(e.gridSize)?e.gridSize:J2),gridStep:wz(V1(e.gridStep)?e.gridStep:vP),editingFrame:null}},md=(e,t,n,i)=>({elements:gd(e==null?void 0:e.elements,n,i),appState:y$(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),WR=e=>{const t=gd(Pt(e.elements),null);return t.length?{...e,elements:t}:null},D5=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=WR({status:t,elements:i,id:Hr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=WR({...r,id:r.id||Hr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},E$=async e=>{let t;if(e.type===Ee.png)try{return await(await ye(()=>Promise.resolve().then(()=>j$),void 0,import.meta.url)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new yu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new yu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===Ee.svg)try{return N6e({svg:t})}catch(n){throw n.message==="INVALID"?new yu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new yu("Error: cannot restore image")}return t},v$=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},X6e=e=>e==="png"||e==="svg",V9=e=>{const t=v$(e);return t==="png"||t==="svg"},w$=e=>!!e&&Object.values(fh).includes(e),Fu=e=>{const{type:t}=e||{};return w$(t)},_$=async(e,t,n,i)=>{const r=await E$(e);let s;try{try{s=JSON.parse(r)}catch(o){throw Fu(e)?new yu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(A6e(s))return{type:Ee.excalidraw,data:md({elements:TF(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...Tz(s.appState||{}),...t?z0(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(l$(s))return{type:Ee.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof yu?o:new Error("Error: invalid file")}},$9=async(e,t,n,i)=>{const r=await _$(e,t,n,i);if(r.type!==Ee.excalidraw)throw new Error("Error: invalid file");return r.data},T$=(e,t="unpublished")=>{const n=JSON.parse(e);if(!l$(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return D5(i,t)},j6e=async(e,t="unpublished")=>T$(await E$(e),t),em=async e=>new Promise(async(t,n)=>{try{Nm(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new Bue("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),Y6e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await Xl(e));return FP(new Uint8Array(t))}catch(t){return console.error(t),tF(40)}},r4=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),W6e=(e,t)=>`data:${t};base64,${e$(B6(e),!0)}`,K6e=(e,t="")=>{const n=e.indexOf(","),i=atob(e.slice(n+1)),r=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return new File([s],t,{type:r})},Z6e=e=>t$(e.slice(e.indexOf(",")+1)),s4=async(e,t)=>{if(e.type===Ee.svg)return e;const[n,i]=await Promise.all([ye(()=>import("./pica-DagrXVtO.js").then(s=>s.p),__vite__mapDeps([2,3]),import.meta.url).then(s=>s.default),ye(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([]),import.meta.url).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Fu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},KR=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:Ee.svg}),q6e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Fu(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},Q6e=async e=>{const t=e.dataTransfer.files.item(0),n=await J6e(e);return{file:t?await G9(t):null,fileHandle:n}},J6e=async e=>{if(Rd)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},ZR=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=Ee.png:n.startsWith(i.jpg)?t=Ee.jpg:n.startsWith(i.gif)&&(t=Ee.gif),t},p1=(e,t,n)=>new File([e],n||"",{type:t}),G9=async e=>{var t,n;if(e.type){if(Fu(e)){const i=await Xl(e),r=ZR(i);r&&r!==e.type&&(e=p1(i,r,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=p1(await Xl(e),Ee.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=p1(await Xl(e),Ee.excalidraw,e.name);else{const i=await Xl(e),r=ZR(i);r&&(e=p1(i,r,e.name))}return e},Xl=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s;if(!((s=r.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),Os=32,Lt=12,lc=256,S$=50,uu="NOT_SPREADSHEET",tm="VALID_SPREADSHEET",U1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},u7=(e,t)=>e.slice(1).every(n=>U1(n[t])!==null),qR=e=>{const t=e[0].length;if(t>2)return{type:uu,reason:"More than 2 columns"};if(t===1){if(!u7(e,0))return{type:uu,reason:"Value is not numeric"};const l=U1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>U1(u[0]));return c.length<2?{type:uu,reason:"Less than two rows"}:{type:tm,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=u7(e,0),i=u7(e,1);if(!n&&!i)return{type:uu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=U1(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:uu,reason:"Less than 2 rows"}:{type:tm,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>U1(l[s]))}}},ebe=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},tbe=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:uu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:uu,reason:"All rows don't have same number of columns"};const r=qR(t);if(r.type!==tm){const s=qR(ebe(t));if(s.type===tm)return s}return r},V6=Ine(_ne),Zs={fillStyle:"hachure",fontFamily:Fc,fontSize:fl,opacity:100,roughness:1,strokeColor:je.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Lr.MIDDLE,locked:!1},I$=e=>{const t=(Os+Lt)*e.values.length+Lt,n=lc+Lt*2;return{chartWidth:t,chartHeight:n}},nbe=(e,t,n,i,r)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>Vr({groupIds:[i],backgroundColor:r,...Zs,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(Os+Lt)+Lt*2,y:n+Lt/2,width:Os,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},ibe=(e,t,n,i,r)=>{const s=Vr({groupIds:[i],backgroundColor:r,...Zs,x:t-Lt,y:n-Lt,text:"0",textAlign:"right"}),o=Vr({groupIds:[i],backgroundColor:r,...Zs,x:t-Lt,y:n-lc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},rbe=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=I$(e),a=Pu({backgroundColor:r,groupIds:[i],...Zs,type:"line",x:t,y:n,width:s,points:[A(0,0),A(s,0)]}),l=Pu({backgroundColor:r,groupIds:[i],...Zs,type:"line",x:t,y:n,height:o,points:[A(0,0),A(0,-280)]}),c=Pu({backgroundColor:r,groupIds:[i],...Zs,type:"line",x:t,y:n-lc-Lt,strokeStyle:"dotted",width:s,opacity:S$,points:[A(0,0),A(s,0)]});return[a,l,c]},x$=(e,t,n,i,r,s)=>{const{chartWidth:o}=I$(e),a=e.title?Vr({backgroundColor:r,groupIds:[i],...Zs,text:e.title,x:t+o/2,y:n-lc-Lt*2-fl,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...nbe(e,t,n,i,r),...ibe(e,t,n,i,r),...rbe(e,t,n,i,r)]},sbe=(e,t,n)=>{const i=Math.max(...e.values),r=Hr(),s=V6[Math.floor(Math.random()*V6.length)];return[...e.values.map((a,l)=>{const c=a/i*lc;return Ja({backgroundColor:s,groupIds:[r],...Zs,type:"rectangle",x:t+l*(Os+Lt)+Lt,y:n-c-Lt,width:Os,height:c})}),...x$(e,t,n,r,s)]},obe=(e,t,n)=>{const i=Math.max(...e.values),r=Hr(),s=V6[Math.floor(Math.random()*V6.length)];let o=0;const a=[];for(const p of e.values){const b=o*(Os+Lt),E=-(p/i)*lc;a.push([b,E]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=Pu({backgroundColor:s,groupIds:[r],...Zs,type:"line",x:t+Lt+Os/2,y:n-Lt,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,b)=>{const E=b*(Os+Lt)+Lt/2,y=-(p/i)*lc+Lt/2;return Ja({backgroundColor:s,groupIds:[r],...Zs,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+E+Os/2,y:n+y-Lt*2,width:Lt,height:Lt})}),m=e.values.map((p,b)=>{const E=b*(Os+Lt)+Lt/2,y=p/i*lc+Lt/2+Lt;return Pu({backgroundColor:s,groupIds:[r],...Zs,type:"line",x:t+E+Os/2+Lt/2,y:n-y,height:y,strokeStyle:"dotted",opacity:S$,points:[A(0,0),A(0,y)]})});return[...x$(e,t,n,r,s),f,...m,...h]},abe=(e,t,n,i)=>e==="line"?obe(t,n,i):sbe(t,n,i),X9="clipboard"in navigator&&"writeText"in navigator.clipboard,j9="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,lbe=e=>!!([hs.excalidraw,hs.excalidrawClipboard,hs.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),cbe=({types:e,files:t})=>{var i,r,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((i=n.clipboardData)==null||i.setData(a,l),((r=n.clipboardData)==null?void 0:r.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},ube=({elements:e,files:t})=>{const n=Se(e),i=new Set(e.filter(a=>Ie(a)));let r=!1;const s=e.reduce((a,l)=>(In(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:hs.excalidrawClipboard,elements:e.map(a=>{if(pr(a,n)&&!i.has(pr(a,n))){const l=Sc(a);return ee(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},dbe=async(e,t,n)=>{await Vc(ube({elements:e,files:t}),n)},fbe=e=>{const t=tbe(e);return t.type===tm?{spreadsheet:t.spreadsheet}:null};function C$(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const r=(n=i.textContent)==null?void 0:n.trim();r&&t.push({type:"text",value:r})}else if(i instanceof HTMLImageElement){const r=i.getAttribute("src");r&&r.startsWith("http")&&t.push({type:"imageUrl",value:r})}else t=t.concat(C$(i));return t}const hbe=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(Ee.html);if(!t)return null;try{const i=new DOMParser().parseFromString(t,Ee.html),r=C$(i.body);if(r.length)return{type:"mixedContent",value:r}}catch(i){console.error(`error in parseHTMLFromPaste: ${i.message}`)}return null},gbe=async()=>{var n,i,r,s;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((r=navigator.clipboard)==null?void 0:r.readText());if(a)return{[Ee.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(HP(zne,a))try{if(a===Ee.text||a===Ee.html)e[a]=await(await o.getType(a)).text();else if(w$(a)){const l=await o.getType(a),c=p1(l,a,void 0);e[a]=c}else throw new $s(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof $s?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},mbe=async(e,t=!1)=>{var n,i;try{const r=!t&&e&&hbe(e);return r?r.value.every(o=>o.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(Ee.text))||r.value.map(o=>o.value).join(`
`).trim()}:r:{type:"text",value:(((i=e.clipboardData)==null?void 0:i.getData(Ee.text))||"").trim()}}catch{return{type:"text",value:""}}},A$=async(e,t=!1)=>{const n=await mbe(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&fbe(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===hs.excalidrawClipboardWithAPI;if(lbe(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},pbe=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[Ee.png]:e})])}catch(t){if(Nm(e))await navigator.clipboard.write([new window.ClipboardItem({[Ee.png]:await e})]);else throw t}},Vc=async(e,t)=>{var n,i;if(X9)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if((n=t.clipboardData)==null||n.setData(Ee.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(Ee.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!Ube(e))throw new Error("Error copying to clipboard.")},Ube=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},O5=(e,{selectedElementIds:t},n)=>{e=Pt(e);const i=n&&zn(e,{selectedElementIds:t});let r=null,s=i?Ve(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&Ie(s[0])?(r=s[0],s=Hw(e,r)):s.length>1&&(s=Ve(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Fa(s)}},N5=async(e,t,n,i,{exportBackground:r,exportPadding:s=Kh,viewBackgroundColor:o,name:a=n.name||SP,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=z9(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return H6(d.then(f=>new Blob([Jne+f.outerHTML],{type:Ee.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[fh.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await Vc(f)}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return}}const u=b$(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=em(u);return n.exportEmbedScene&&(d=d.then(f=>ye(()=>Promise.resolve().then(()=>j$),void 0,import.meta.url).then(({encodePngMetadata:h})=>h({blob:f,metadata:og(t,n,i,"local")})))),H6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[fh.png],fileHandle:l})}else if(e==="clipboard")try{const d=em(u);await pbe(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):A0&&d.name==="TypeError"?new Error(`${k("alerts.couldNotCopyToClipboard")}

${k("hints.firefox_clipboard_write")}`):new Error(k("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},bbe=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=v$(o);if(!o||!X6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=O5(e,t,!1);return await N5(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},ybe=oe({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(Vpe,{label:k("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),Ebe=oe({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Pt(e),s=zn(i,t)?Ve(i,t):i;return g(pe,{children:dw.map(o=>{const[a,l]=P6e(s,Kh,o),c=`${k("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Ze,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),vbe=oe({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(k9,{checked:e.exportBackground,onChange:n=>t(n),children:k("imageExportDialog.label.withBackground")})}),R$=oe({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>P(k9,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[k("imageExportDialog.label.embedScene"),g(cd,{label:k("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:yce})})]})}),$6=oe({name:"saveToActiveFile",label:"buttons.save",icon:u5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=V9(t.fileHandle)?await bbe(e,t,i.files,i.getName()):await a$(e,t,i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s!=null&&s.name?k("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):k("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e[z.CTRL_OR_CMD]&&!e.shiftKey}),M$=oe({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:u5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await a$(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:k("toast.fileSaved")}}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e.shiftKey&&e[z.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Ze,{type:"button",icon:mce,title:k("buttons.saveAs"),"aria-label":k("buttons.saveAs"),showAriaLabel:Jn().editor.isMobile,hidden:!Rd,onClick:()=>e(null),"data-testid":"save-as-button"})}),o4=oe({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await C6e(t,e);return{elements:r,appState:s,files:o,captureUpdate:K.IMMEDIATELY}}catch(r){return(r==null?void 0:r.name)==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:K.EVENTUALLY}}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.O}),wbe=oe({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(Hpe,{value:e.exportWithDarkMode?xe.DARK:xe.LIGHT,onChange:n=>{t(n===xe.DARK)},title:k("imageExportDialog.label.darkMode")})})});let k$="{}";const _be=oe({name:"copyStyles",label:"labels.copyStyles",icon:Vz,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&br(s)){const o=ze(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(k$=JSON.stringify(r)),{appState:{...t,toast:{message:k("toast.copyStyles")}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.C}),Tbe=oe({name:"pasteStyles",label:"labels.pasteStyles",icon:Vz,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(k$),s=r[0],o=r[1];if(!rF(s))return{elements:e,captureUpdate:K.EVENTUALLY};const a=Ve(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(fe(c)&&c.containerId&&(u=o),!u)return c;let d=Ce(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?Wre(u.roundness.type,c)?u.roundness:Kre(c):null});if(fe(d)){const f=u.fontSize||fl,h=u.fontFamily||Fc;d=Ce(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||Lm,lineHeight:u.lineHeight||Ju(h)});let m=null;d.containerId&&(m=a.find(p=>fe(d)&&p.id===d.containerId)||null),Ji(d,m,i.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&Le(u)&&(d=Ce(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),Ie(c)&&(d=Ce(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.V}),Y9=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Ve(t,e).length))};oe({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(Ze,{type:"button",icon:Cz,"aria-label":k("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});oe({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{visible:Y9(t,Pt(e)),type:"button",icon:pce,"aria-label":k("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const W9=oe({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:fce,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var r,s;return((r=t.openDialog)==null?void 0:r.name)==="help"&&i(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e.key===z.QUESTION_MARK}),Sbe=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&N0(r,n),!0))return!0}return!1},QR=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!Sbe(i)&&!RF(i)},Ibe=oe({name:"group",label:"labels.group",icon:e=>g(mA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=zw(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};const s=Nu(t);if(s.length===1){const b=s[0],E=new Set(zt(e,b).map(w=>w.id)),y=new Set(r.map(w=>w.id));if(new Set([...Array.from(E),...Array.from(y)]).size===E.size)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY}}let o=[...e];new Set(r.map(b=>b.frameId)).size>1&&Eoe(r).forEach((E,y)=>{Jb(E,i.scene.getNonDeletedElementsMap())});const l=Hr(),c=Se(r);o=o.map(b=>c.get(b.id)?Ce(b,{groupIds:Coe(b.groupIds,l,t.editingGroupId)}):b);const u=zt(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(b=>!N0(b,l)),p=no([...m,...u,...h],Se(u));return{appState:{...t,...DF(l,{...t,selectedGroupIds:{}},Pt(o))},elements:p,captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>QR(e,t,i),keyTest:e=>!e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!QR(e,t,i),type:"button",icon:g(mA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.group")} — ${Q("CtrlOrCmd+G")}`,"aria-label":k("labels.group"),visible:zn(Pt(e),t)})}),xbe=oe({name:"ungroup",label:"labels.ungroup",icon:e=>g(pA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=Nu(t),s=Se(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Ht(f)&&a.push(f.id);const h=Aoe(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ce(f,{groupIds:h})});const l=Li(t,Pt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return Bw(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=CF(o,WU(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G.toUpperCase(),predicate:(e,t)=>Nu(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ze,{type:"button",hidden:Nu(t).length===0,icon:g(pA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.ungroup")} — ${Q("CtrlOrCmd+Shift+G")}`,"aria-label":k("labels.ungroup"),visible:zn(Pt(e),t)})}),L$=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function Cbe(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const P5=(e,t)=>`hsl(${Math.abs(Cbe((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,Abe=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},Rbe=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=P5(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===mu.IDLE||m===mu.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const b=n.theme===xe.DARK?"#2f6330":Bne,E=c==null?void 0:c.isSpeaking;E&&(e.fillStyle=b,e.strokeStyle=b,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=Yp,e.strokeStyle=Yp,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const y=t.remotePointerUsernames.get(s)||"";if(!f&&y){e.font="600 12px sans-serif";const v=(E?a+0:a)+u/2,w=(E?l+0:l)+d+2,S=5,R=3,_=e.measureText(y),T=_.actualBoundingBoxDescent+_.actualBoundingBoxAscent,x=Math.max(T,12),I=v-1,M=w-1,D=_.width+2+S*2+2,L=x+2+R*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(I,M,D,L,8),e.fillStyle=h,e.fill(),e.strokeStyle=Yp,e.stroke(),E&&(e.beginPath(),e.roundRect(I-2,M-2,D+4,L+4,8),e.strokeStyle=b,e.stroke())):L$(e,I,M,D,L,8,Yp),e.fillStyle=Fne,e.fillText(y,v+S+1,w+R+_.actualBoundingBoxAscent+Math.floor((x-T)/2)+2),E){e.fillStyle=b;const G=8,H=8,V=5;e.fillRect(I+D+H,M+(L/2-G/2),2,G),e.fillRect(I+D+H+V,M+(L/2-G*2/2),2,G*2),e.fillRect(I+D+H+V*2,M+(L/2-G/2),2,G)}}e.restore(),e.closePath()}},JR=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=Abe(n),[o,a]=O.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:be("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};oe({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:K.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:K.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=P5(i,r),l=be({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?P("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:k("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:k("userList.hint.micMuted"),children:wue}):g("div",{title:k("userList.hint.inCall"),children:vue}):null;return s?P("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(JR,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),P("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:k("userList.hint.followStatus"),children:c9}),c]})]}):P("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(JR,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const Mbe=oe({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of TP)if(r.some(o=>o.type===s))return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:Hr(),status:"unpublished",elements:r.map(Sc),created:Date.now()},...s])).then(()=>({captureUpdate:K.EVENTUALLY,appState:{...t,toast:{message:k("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),kbe=(e,t,n,i)=>{const r=t5(e,t),s=Ys(e);return r.flatMap(o=>{const a=Lbe(o,s,n);return o.map(l=>{const c=ee(l,{x:l.x+a.x,y:l.y+a.y});return mr(l,i.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),c})})},Lbe=(e,t,{axis:n,position:i})=>{const r=Ys(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},$r=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ie(i))},ag=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Se(e),o=kbe(r,s,i,n.scene),a=Se(o);return bh(e.map(l=>a.get(l.id)||l),t,n)};oe({name:"alignTop",label:"labels.alignTop",icon:cA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"start",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:cA,onClick:()=>n(null),title:`${k("labels.alignTop")} — ${Q("CtrlOrCmd+Shift+Up")}`,"aria-label":k("labels.alignTop"),visible:zn(Pt(e),t)})});oe({name:"alignBottom",label:"labels.alignBottom",icon:uA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"end",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:uA,onClick:()=>n(null),title:`${k("labels.alignBottom")} — ${Q("CtrlOrCmd+Shift+Down")}`,"aria-label":k("labels.alignBottom"),visible:zn(Pt(e),t)})});oe({name:"alignLeft",label:"labels.alignLeft",icon:dA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"start",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:dA,onClick:()=>n(null),title:`${k("labels.alignLeft")} — ${Q("CtrlOrCmd+Shift+Left")}`,"aria-label":k("labels.alignLeft"),visible:zn(Pt(e),t)})});oe({name:"alignRight",label:"labels.alignRight",icon:fA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"end",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:fA,onClick:()=>n(null),title:`${k("labels.alignRight")} — ${Q("CtrlOrCmd+Shift+Right")}`,"aria-label":k("labels.alignRight"),visible:zn(Pt(e),t)})});oe({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:hA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"center",axis:"y"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:hA,onClick:()=>n(null),title:k("labels.centerVertically"),"aria-label":k("labels.centerVertically"),visible:zn(Pt(e),t)})});oe({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:gA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>$r(t,i),perform:(e,t,n,i)=>({appState:t,elements:ag(e,t,i,{position:"center",axis:"x"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!$r(t,i),type:"button",icon:gA,onClick:()=>n(null),title:k("labels.centerHorizontally"),"aria-label":k("labels.centerHorizontally"),visible:zn(Pt(e),t)})});const Dbe=(e,t,n)=>{const[i,r,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Ys(e),l=t5(e,t).map(f=>[f,Ys(f)]).sort((f,h)=>f[1][r]-h[1][r]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(b=>b[1][i]===a[i]),h=l.findIndex(b=>b[1][s]===a[s]),m=(l[h][1][r]-l[f][1][r])/(l.length-1);let p=l[f][1][r];return l.flatMap(([b,E],y)=>{const v={x:0,y:0};return y!==f&&y!==h&&(p+=m,v[n.axis]=p-E[r]),b.map(w=>Ce(w,{x:w.x+v.x,y:w.y+v.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Ce(p,{x:p.x+m.x,y:p.y+m.y}))})},D$=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ie(i))},O$=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Dbe(r,n.scene.getNonDeletedElementsMap(),i),o=Se(s);return bh(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:O$(e,t,i,{axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!D$(t,i),type:"button",icon:_ce,onClick:()=>n(null),title:`${k("labels.distributeHorizontally")} — ${Q("Alt+H")}`,"aria-label":k("labels.distributeHorizontally"),visible:zn(Pt(e),t)})});oe({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:O$(e,t,i,{axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ze,{hidden:!D$(t,i),type:"button",icon:Tce,onClick:()=>n(null),title:`${k("labels.distributeVertically")} — ${Q("Alt+V")}`,"aria-label":k("labels.distributeVertically"),visible:zn(Pt(e),t)})});const Obe=oe({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Iue,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:bh(N$(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.H}),Nbe=oe({name:"flipVertical",label:"labels.flipVertical",icon:Sue,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:bh(N$(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.V&&!e[z.CTRL_OR_CMD]}),N$=(e,t,n,i,r)=>{const s=Ve(Pt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=Pbe(s,t,n,i,r),a=Se(o);return e.map(l=>a.get(l.id)||l)},Pbe=(e,t,n,i,r)=>{if(e.every(h=>Le(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ce(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=Ys(e);TB(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,Sc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),m6(e.filter(ke),t,r.scene.getNonDeletedElements(),r.scene,Uu(n),[],n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>me(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Ys(e),[d,f]=[s-c,o-u];return l.forEach(h=>ee(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>ee(h,{x:h.x+d,y:h.y+f})),e},u2=oe({name:"copy",label:"labels.copy",icon:PE,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await dbe(r,i.files,n)}catch(s){return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),eM=oe({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await gbe()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),A0?{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("hints.firefox_clipboard_write")}}:{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(cbe({types:r}))}catch(s){return console.error(s),{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),tM=oe({name:"cut",label:"labels.cut",icon:lue,trackEvent:{category:"element"},perform:(e,t,n,i)=>(u2.perform(e,t,n,i),Wz.perform(e,t,null,i)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.X}),nM=oe({name:"copyAsSvg",label:"labels.copyAsSvg",icon:xue,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=O5(e,t,!0);try{await N5("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:k("toast.copyToClipboardAsSvg",{exportSelection:o.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>X9&&e.length>0,keywords:["svg","clipboard","copy"]}),iM=oe({name:"copyAsPng",label:"labels.copyAsPng",icon:Cue,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=O5(e,t,!0);try{return await N5("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:k("toast.copyToClipboardAsPng",{exportSelection:r.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>j9&&e.length>0,keyTest:e=>e.code===et.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),rM=oe({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Vc(hF(r))}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return{captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>X9&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(fe),keywords:["text","clipboard","copy"]}),sM=oe({name:"gridMode",icon:kue,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.code===et.QUOTE}),a4=oe({name:"zenMode",label:"buttons.zenMode",icon:Rue,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.Z}),Fbe=oe({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:Aue,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.S}),l4=oe({name:"stats",label:"stats.fullTitle",icon:Tue,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:K.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.SLASH}),Bbe=oe({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>br(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{var l;const a=ze(o,s);if(a){const{width:c,height:u}=Vi(a.originalText,Ct(a),a.lineHeight),d=ose(o.id);cF(o.id);const{x:f,y:h}=Kb(o,a,s);ee(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),ee(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:K.IMMEDIATELY}}}),zbe=oe({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=fe(r[0])||fe(r[1]);let o;if(Ou(r[0])?o=r[0]:Ou(r[1])&&(o=r[1]),s&&o&&ze(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;fe(r[0])&&Ou(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),ee(s,{containerId:o.id,verticalAlign:Lr.MIDDLE,textAlign:M0.CENTER,autoResize:!0,angle:Le(o)?0:(o==null?void 0:o.angle)??0}),ee(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return Ji(s,o,i.scene.getNonDeletedElementsMap()),g6(o.id,a),{elements:Hbe(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:K.IMMEDIATELY}}}),Hbe=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),no(i,Se([t,n])),i},Vbe=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),no(i,Se([t,n])),i},$be=oe({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.some(o=>fe(o));return r.length>0&&s},perform:(e,t,n,i)=>{var a;const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const l of r)if(fe(l)){const c=Ja({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Qh("rectangle")?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-On,y:l.y-On,width:id(l.width,"rectangle"),height:id(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);s.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&ee(f,{startBinding:h,endBinding:m},!1)})}ee(l,{containerId:c.id,verticalAlign:Lr.MIDDLE,boundElements:null,textAlign:M0.CENTER,autoResize:!0},!1),Ji(l,c,i.scene.getNonDeletedElementsMap()),s=Vbe([...s,c],c,l),o[c.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:K.IMMEDIATELY}}}),K9=380,Gbe=42,c4=5,P$=85,Xbe=500;let u4=!1;const gU=new Map,jbe=({element:e,elementsMap:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=tp(),a=ep(),l=Jn(),c=e.link||"",[u,d]=O.useState(c),f=O.useRef(null),h=o.showHyperlinkPopup==="editor",m=O.useCallback(()=>{var w;if(!f.current)return;const v=Fr(f.current.value)||null;if(!e.link&&v&&ut("hyperlink","create"),lr(e)){if(((w=o.activeEmbeddable)==null?void 0:w.element)===e&&n({activeEmbeddable:null}),!v){ee(e,{link:null}),s(e,!1);return}if(!ZU(v,a.validateEmbeddable))v&&r({message:k("toast.unableToEmbed"),closable:!0}),e.link&&gU.set(e.id,e.link),ee(e,{link:v}),s(e,!1);else{const{width:S,height:R}=e,_=Rf(v);(_==null?void 0:_.error)instanceof URIError&&r({message:k("toast.unrecognizedLinkFormat"),closable:!0});const T=_?_.intrinsicSize.w/_.intrinsicSize.h:1,x=gU.get(e.id)!==e.link;ee(e,{...x?{width:(_==null?void 0:_.type)==="video"?S>R?S:R*T:S,height:(_==null?void 0:_.type)==="video"&&S>R?S/T:R}:{},link:v}),s(e,!0),gU.has(e.id)&&gU.delete(e.id)}}else ee(e,{link:v})},[e,r,a.validateEmbeddable,o.activeEmbeddable,n,s]);O.useLayoutEffect(()=>()=>{m()},[m]),O.useEffect(()=>{h&&(f!=null&&f.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&f.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),O.useEffect(()=>{let v=null;const w=S=>{if(h)return;v&&clearTimeout(v),Kbe(e,t,o,A(S.clientX,S.clientY))&&(v=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},Xbe))};return window.addEventListener(te.POINTER_MOVE,w,!1),()=>{window.removeEventListener(te.POINTER_MOVE,w,!1),v&&clearTimeout(v)}},[o,e,h,n,t]);const p=O.useCallback(()=>{ut("hyperlink","delete"),ee(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),b=()=>{ut("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:E,y}=F$(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:P("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${y}px`,left:`${E}px`,width:K9,padding:c4},children:[h?g("input",{className:be("excalidraw-hyperlinkContainer-input"),placeholder:k("labels.link.hint"),ref:f,value:u,onChange:v=>d(v.target.value),autoFocus:!0,onKeyDown:v=>{v.stopPropagation(),v[z.CTRL_OR_CMD]&&v.key===z.K&&v.preventDefault(),(v.key===z.ENTER||v.key===z.ESCAPE)&&(m(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:Fr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:GP(e.link)?"_self":"_blank",onClick:v=>{if(e.link&&i){const w=zP(te.EXCALIDRAW_LINK,v.nativeEvent);i({...e,link:Fr(e.link)},w),w.defaultPrevented&&v.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:k("labels.link.empty")}),P("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&g(Ze,{type:"button",title:k("buttons.edit"),"aria-label":k("buttons.edit"),label:k("buttons.edit"),onClick:b,className:"excalidraw-hyperlinkContainer--edit",icon:c5}),g(Ze,{type:"button",title:k("labels.linkToElement"),"aria-label":k("labels.linkToElement"),label:k("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:Xz}),c&&!lr(e)&&g(Ze,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:p,className:"excalidraw-hyperlinkContainer--remove",icon:sd})]})]})},F$=(e,t,n)=>{const[i,r]=Pe(e,n),{x:s,y:o}=Fs({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-K9/2,l=o-t.offsetTop-P$;return{x:a,y:l}},oM=(e,t)=>{var r;const n=Ve(e,t);return lr(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"};let n0=null;const Ybe=(e,t,n)=>{n0&&clearTimeout(n0),n0=window.setTimeout(()=>Wbe(e,t,n),Yne)},Wbe=(e,t,n)=>{if(!e.link)return;const i=q1();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=K1(e.link)?k("labels.link.goToElement"):e.link;const[r,s,o,a]=Pe(e,n),[l,c,u,d]=B9([r,s,o,a],e.angle,t),f=Fs({sceneX:l,sceneY:c},t);uV(i,{left:f.x,top:f.y,width:u,height:d},"top"),ut("hyperlink","tooltip","link-icon"),u4=!0},aM=()=>{n0&&clearTimeout(n0),u4&&(u4=!1,q1().classList.remove("excalidraw-tooltip--visible"))},Kbe=(e,t,n,[i,r])=>{const{x:s,y:o}=Mt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(_w(s,o,e,t))return!1;const[l,c,u]=Pe(e,t);if(s>=l&&s<=u&&o>=c-P$&&o<=c)return!1;const{x:d,y:f}=F$(e,n,t);return!(i>=d-a&&i<=d+K9+c4*2+a&&r>=f-a&&r<=f+a+c4*2+Gbe)},B$=oe({name:"hyperlink",label:(e,t)=>oM(e,t),icon:A6,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:K.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.K,predicate:(e,t)=>Ve(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Ve(e,t);return g(Ze,{type:"button",icon:A6,"aria-label":k(oM(e,t)),title:`${lr(e[0])?k("labels.link.labelEmbed"):k("labels.link.label")} - ${Q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),d7=e=>e.every(t=>!t.locked),Zbe=oe({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return i.length===1&&!Ie(i[0])?i[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":d7(i)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{const n=Ve(t,e);return d7(n)?r9:l5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=d7(r),o=Se(r);return{elements:e.map(a=>o.has(a.id)?Ce(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===z.L&&e[z.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),qbe=oe({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:l5,predicate:(e,t)=>Ve(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(i=>i.locked);return{elements:e.map(i=>i.locked?Ce(i,{locked:!1}):i),appState:{...t,selectedElementIds:Object.fromEntries(n.map(i=>[i.id,!0]))},captureUpdate:K.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var z$={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(z$);var Qbe=z$.exports;const Jbe=cl(Qbe),H$=oe({name:"copyElementLink",label:"labels.copyElementLink",icon:jm,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=Ve(e,t);try{if(window.location){const s=_B(r,t);return s?(await Vc(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):wB(s.id,s.type)),{appState:{toast:{message:k("toast.elementLinkCopied"),closable:!0}},captureUpdate:K.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}},predicate:(e,t)=>S6(Ve(e,t))}),e5e=oe({name:"linkToElement",label:"labels.linkToElement",icon:Xz,perform:(e,t,n,i)=>{const r=Ve(e,t);return r.length!==1||!S6(r)?{elements:e,appState:t,app:i,captureUpdate:K.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Ve(e,t)[0].id}},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{var s;const r=Ve(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&r.length===1&&S6(r)},trackEvent:!1}),t5e={toggleTheme:[Q("Shift+Alt+D")],saveScene:[Q("CtrlOrCmd+S")],loadScene:[Q("CtrlOrCmd+O")],clearCanvas:[Q("CtrlOrCmd+Delete")],imageExport:[Q("CtrlOrCmd+Shift+E")],commandPalette:[Q("CtrlOrCmd+/"),Q("CtrlOrCmd+Shift+P")],cut:[Q("CtrlOrCmd+X")],copy:[Q("CtrlOrCmd+C")],paste:[Q("CtrlOrCmd+V")],copyStyles:[Q("CtrlOrCmd+Alt+C")],pasteStyles:[Q("CtrlOrCmd+Alt+V")],selectAll:[Q("CtrlOrCmd+A")],deleteSelectedElements:[Q("Delete")],duplicateSelection:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)],sendBackward:[Q("CtrlOrCmd+[")],bringForward:[Q("CtrlOrCmd+]")],sendToBack:[Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Q("Shift+Alt+C")],group:[Q("CtrlOrCmd+G")],ungroup:[Q("CtrlOrCmd+Shift+G")],gridMode:[Q("CtrlOrCmd+'")],zenMode:[Q("Alt+Z")],objectsSnapMode:[Q("Alt+S")],stats:[Q("Alt+/")],addToLibrary:[],flipHorizontal:[Q("Shift+H")],flipVertical:[Q("Shift+V")],viewMode:[Q("Alt+R")],hyperlink:[Q("CtrlOrCmd+K")],toggleElementLock:[Q("CtrlOrCmd+Shift+L")],resetZoom:[Q("CtrlOrCmd+0")],zoomOut:[Q("CtrlOrCmd+-")],zoomIn:[Q("CtrlOrCmd++")],zoomToFitSelection:[Q("Shift+3")],zoomToFit:[Q("Shift+1")],zoomToFitSelectionInViewport:[Q("Shift+2")],toggleEraserTool:[Q("E")],toggleHandTool:[Q("H")],setFrameAsActiveTool:[Q("F")],saveFileToDisk:[Q("CtrlOrCmd+S")],saveToActiveFile:[Q("CtrlOrCmd+S")],toggleShortcuts:[Q("?")],searchMenu:[Q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Hi=(e,t=0)=>{const n=t5e[e];return n&&n.length>0?n[t]||n[0]:""},n5e="\\u0300-\\u036f",i5e="\\ufe20-\\ufe2f",r5e="\\u20d0-\\u20ff",s5e=n5e+i5e+r5e,o5e=`[${s5e}]`,a5e=RegExp(o5e,"g"),l5e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,c5e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},lM=e=>e.replace(l5e,t=>c5e[t]||t).replace(a5e,""),V$=()=>{const[e,t]=O.useState(null),n=O.useCallback(i=>t(i),[]);return[e,n]};var F5={},u5e=d5e;function d5e(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var f5e=h5e;function h5e(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}F5.encode=u5e;F5.decode=f5e;var g5e=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},Z9={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(Z9);var m5e=g5e,p5e=Z9,U5e=E5e,vo=new Uint8Array(4),b5e=new Int32Array(vo.buffer),y5e=new Uint32Array(vo.buffer);function E5e(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];y5e[0]=l,r[n++]=vo[3],r[n++]=vo[2],r[n++]=vo[1],r[n++]=vo[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(m5e(a)),f=p5e.buf(d);b5e[0]=f,r[n++]=vo[3],r[n++]=vo[2],r[n++]=vo[1],r[n++]=vo[0]}return r}const v5e=cl(U5e);var w5e=Z9,_5e=I5e,wo=new Uint8Array(4),T5e=new Int32Array(wo.buffer),S5e=new Uint32Array(wo.buffer);function I5e(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){wo[3]=e[i++],wo[2]=e[i++],wo[1]=e[i++],wo[0]=e[i++];var r=S5e[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];wo[3]=e[i++],wo[2]=e[i++],wo[1]=e[i++],wo[0]=e[i++];var l=T5e[0],c=w5e.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const $$=cl(_5e),G$=async e=>{const n=$$(new Uint8Array(await Xl(e))).find(i=>i.name==="tEXt");return n?F5.decode(n.data):null},X$=async({blob:e,metadata:t})=>{const n=$$(new Uint8Array(await Xl(e))),i=F5.encode(Ee.excalidraw,JSON.stringify(n$({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([v5e(n)],{type:Ee.png})},x5e=async e=>{const t=await G$(e);if((t==null?void 0:t.keyword)===Ee.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===hs.excalidraw)return t.text;throw new Error("FAILED")}return i$(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},j$=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:x5e,encodePngMetadata:X$,getTEXtChunk:G$},Symbol.toStringTag,{value:"Module"})),B5=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=md({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return b$(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),b=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*b,h.height=f*b,{canvas:h,scale:b}}const m=(r==null?void 0:r(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},C5e=async e=>{var r;let{mimeType:t=Ee.png,quality:n}=e;t===Ee.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${Ee.png}" mimeType`),t==="image/jpg"&&(t=Ee.jpg),t===Ee.jpg&&!((r=e.appState)!=null&&r.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${Ee.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await B5(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((s,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===Ee.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await X$({blob:a,metadata:og(e.elements,e.appState,e.files||{},"local")})),s(a)},t,n)})},Y$=async({elements:e,appState:t=so(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=md({elements:e,appState:t},null,null),u={...c,exportPadding:i};return z9(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},W$=en(new Map),cM=async e=>await Y$({elements:e,appState:{exportBackground:!1,viewBackgroundColor:je.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),A5e=(e,t,n)=>{const[i,r]=O.useState();return O.useEffect(()=>{if(t)if(e){const s=n.get(e);s?r(s):(async()=>{var a;const o=await cM(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),r(o))})()}else(async()=>{const s=await cM(t);r(s)})()},[e,t,n,r]),i},K$=()=>{const[e]=mn(W$);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},R5e=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],Z$=new So,nm=en({status:"loaded",isInitialized:!1,libraryItems:[]}),jg=e=>Fa(e),M5e=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),k5e=(e,t)=>{const n=[];for(const i of t)M5e(e,i)&&n.push(i);return[...n,...e]},q$=(e,t)=>{const n=Se(t),i={deletedItems:new Map,addedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=Se(e);for(const s of t)r.has(s.id)||i.addedItems.set(s.id,s);return i};class L5e{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=jg(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)Vs.set(nm,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Vs.set(nm,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=jg(this.currLibraryItems);const s=jg(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,s),Z$.trigger(q$(r,s),s)}catch(r){console.error(r)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Vs.set(W$,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(jg(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:gs.name,tab:e6}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await j6e(c,o):u=D5(c,o),!i||window.confirm(k("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?k5e(this.currLibraryItems,u):u)):l(new Th)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=jg(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const Q$=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,b)=>{const{height:E}=Ys(b.elements);return Math.max(p,E)},0),s=h=>{let m=0,p=0,b=0;for(const E of e){if(m%n===0&&(p=0),p===h){const{width:y}=Ys(E.elements);b=Math.max(b,y)}m++,p++}return b};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:b,height:E}=Ys(h.elements),y=(c-b)/2,v=(l-E)/2;i.push(...h.elements.map(w=>({...w,x:w.x+o+y-m,y:w.y+a+v-p}))),o+=c+50,u++,d++}return i},D5e=(e,t=R5e)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},d4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(eE.addLibrary)||new URLSearchParams(window.location.search).get(J3.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},Ml=class Ml{static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(D5((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?Ml.queue.push(r):r()}constructor(t){this.adapter=t}getLibraryItems(t){return Ml.getLibraryItems(this.adapter,t,!1)}};Ml.queue=new rie,Ml.run=async(t,n)=>{const i=new Ml(t);return Ml.queue.push(()=>n(i))};let Kf=Ml,i0=0,G6=0;const f4=e=>_F(e.map(t=>`${t.id}:${loe(t.elements)}`).sort().join()),uM=async(e,t)=>{try{return G6++,await Kf.run(e,async n=>{const i=Se(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);const s=r.concat(Array.from(i.values())),o=f4(s);return o!==i0&&await e.save({libraryItems:s}),i0=o,s})}finally{G6--}},O5e=e=>{const{excalidrawAPI:t}=e,n=O.useRef(e);n.current=e;const i=O.useRef(!1);O.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=Uw(a),D5e(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(eE.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(eE.addLibrary),window.history.replaceState({},Na,`#${d.toString()}`)}else if(window.location.search.includes(J3.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(J3.addLibrary),window.history.replaceState({},Na,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=d4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=d4();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=Gb();l?c.resolve(_c(l.load).then(async u=>{let d=null;try{if(!u)return Kf.getLibraryItems(a,"load");d=D5(u.libraryItems||[],"published");const f=await uM(a,q$([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),Kf.getLibraryItems(a,"load")))):c.resolve(_c(Kf.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return i0=f4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(te.HASHCHANGE,s),()=>{window.removeEventListener(te.HASHCHANGE,s)}},[t]),O.useEffect(()=>{const r=Z$.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&i0!==f4(a)&&await uM(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:k("errors.saveLibraryError")}})}}),s=o=>{G6&&mw(o)};return window.addEventListener(te.BEFORE_UNLOAD,s),()=>{window.removeEventListener(te.BEFORE_UNLOAD,s),r(),i0=0,G6=0}},[])},N5e=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${Vb.excalidrawLibrary}`,target:"_excalidraw_libraries",children:k("labels.libraries")})},J$=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>P("div",{className:be("library-menu-control-buttons",s),style:i,children:[g(N5e,{id:n,libraryReturnUrl:e,theme:t}),r]}),P5e=en(0),F5e=e=>{const[t,n]=mn(P5e);return O.useEffect(()=>{const{current:i}=e;if(!i)return;const r=Do(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},xh=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return P("button",{className:be("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(tl,{})})]})},eG=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=k("buttons.confirm"),cancelText:s=k("buttons.cancel"),className:o="",...a}=e,l=Vn(),c=o5(q9),{container:u}=ta();return P(Gr,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,P("div",{className:"confirm-dialog-buttons",children:[g(xh,{label:s,onClick:()=>{l({openMenu:null}),c(!1),jn.flushSync(()=>{n()}),u==null||u.focus()}}),g(xh,{label:r,onClick:()=>{l({openMenu:null}),c(!1),jn.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class Bu{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(Bu,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(Bu,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const B5e=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,z5e=/{{([\w-]+)}}/,H5e=/<([\w-]+)>/,V5e=/<\/([\w-]+)>/,$5e=(e,t)=>{const n=[{name:"",children:[]}];return e.split(B5e).filter(Boolean).forEach(i=>{const r=i.match(H5e),s=i.match(V5e),o=i.match(z5e);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=ae.createElement(ae.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},hr=({i18nKey:e,children:t,...n})=>{const{t:i}=wn();return ae.createElement(ae.Fragment,{},...$5e(i(e),n))},G5e=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=xie(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=li.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await B5({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=li.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await s4(new File([await em(o)],"preview",{type:Ee.png}),{outputType:Ee.jpg,maxWidthOrHeight:5e3})},X5e=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=O.useRef(null),o=O.useRef(null);return O.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await Y$({elements:e.elements,appState:{...t,viewBackgroundColor:li.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),P("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:k("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(Ze,{"aria-label":k("buttons.remove"),type:"button",icon:eg,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:k("buttons.remove")}),P("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[P("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[P("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:li.gray[6]},children:k("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},j5e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=O.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=O.useState(!1);O.useEffect(()=>{const v=Bu.get(z1.PUBLISH_LIBRARY);v&&l(v)},[]);const[d,f]=O.useState(t.slice());O.useEffect(()=>{f(t.slice())},[t]);const h=v=>{l({...a,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),u(!0);const w=[];let S=!1;if(d.forEach(M=>{let D="";M.name||(D=k("publishDialog.errors.required"),S=!0),w.push({...M,error:D})}),S){f(w),u(!1);return}const R=await G5e(d),_={type:hs.excalidrawLibrary,version:Vb.excalidrawLibrary,source:aw,libraryItems:d},T=JSON.stringify(_,null,2),x=new Blob([T],{type:"application/json"}),I=new FormData;I.append("excalidrawLib",x),I.append("previewImage",R),I.append("previewImageType",R.type),I.append("title",a.name),I.append("authorName",a.authorName),I.append("githubHandle",a.githubHandle),I.append("name",a.name),I.append("description",a.description),I.append("twitterHandle",a.twitterHandle),I.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:I}).then(M=>M.ok?M.json().then(({url:D})=>{Bu.delete(z1.PUBLISH_LIBRARY),i({url:D,authorName:a.authorName,items:d})}):M.json().catch(()=>{throw new Error(M.statusText||"something went wrong")}).then(D=>{throw new Error(D.message||M.statusText||"something went wrong")}),M=>{console.error(M),r(M),u(!1)}).catch(M=>{console.error(M),r(M),u(!1)})},p=()=>{const v=[];return d.forEach((w,S)=>{v.push(g("div",{className:"single-library-item-wrapper",children:g(X5e,{libItem:w,appState:n,index:S,onChange:(R,_)=>{const T=d.slice();T[_].name=R,f(T)},onRemove:o})},S))}),g("div",{className:"selected-library-items",children:v})},b=O.useCallback(()=>{s(d),Bu.set(z1.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),E=!!t.length,y=t.some(v=>v.status==="published");return g(Gr,{onCloseRequest:b,title:k("publishDialog.title"),className:"publish-library",children:E?P("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(hr,{i18nKey:"publishDialog.noteDescription",link:v=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("span",{className:"publish-library-note",children:g(hr,{i18nKey:"publishDialog.noteGuidelines",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("div",{className:"publish-library-note",children:k("publishDialog.noteItems")}),y&&g("span",{className:"publish-library-note publish-library-warning",children:k("publishDialog.republishWarning")}),p(),P("div",{className:"publish-library__fields",children:[P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:k("publishDialog.placeholder.libraryName")})]}),P("label",{style:{alignItems:"flex-start"},children:[P("div",{children:[g("span",{children:k("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:k("publishDialog.placeholder.libraryDesc")})]}),P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:k("publishDialog.placeholder.authorName")})]}),P("label",{children:[g("span",{children:k("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:k("publishDialog.placeholder.githubHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:k("publishDialog.placeholder.twitterHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:k("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:k("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(hr,{i18nKey:"publishDialog.noteLicense",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),P("div",{className:"publish-library__buttons",children:[g(xh,{label:k("buttons.cancel"),onClick:b,"data-testid":"cancel-clear-canvas-button"}),g(xh,{type:"submit",label:k("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:k("publishDialog.atleastOneLibItem")})})},Y5e=O.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:be("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),W5e=O.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:be("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),us={Row:Y5e,Col:W5e},tG=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r})=>{const s=Jn(),o=O.useRef(null),a=y5({onClickOutside:t});S9(o,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),O.useEffect(()=>{const c=d=>{var f;d.key===z.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(te.KEYDOWN,c,u),()=>{document.removeEventListener(te.KEYDOWN,c,u)}},[a]);const l=be(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return g(sV.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:r,"data-testid":"dropdown-menu",children:s.editor.isMobile?g(us.Col,{className:"dropdown-menu-container",children:e}):g(Ws,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};tG.displayName="DropdownMenuContent";const K5e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),r0=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noreferrer",...l})=>{const c=aV(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:oV(s,o),title:l.title??l["aria-label"],onClick:c,children:g(rV,{icon:e,shortcut:t,children:i})})};r0.displayName="DropdownMenuItemLink";const nG=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});nG.displayName="DropdownMenuSeparator";const iG=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=Jn(),o=be(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};iG.displayName="DropdownMenuTrigger";const Z5e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},q5e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},Je=({children:e,open:t})=>{const n=Z5e(e),i=q5e(e);return P(pe,{children:[n,t&&i]})};Je.Trigger=iG;Je.Content=tG;Je.Item=Er;Je.ItemLink=r0;Je.ItemCustom=K5e;Je.Group=D6;Je.Separator=nG;Je.displayName="DropdownMenu";const Q5e=(e,t)=>e.filter(n=>t.includes(n.id)),J5e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=mn(nm),[c,u]=mn(q9),d=()=>{const I=t.length?k("alerts.removeItemsFromsLibrary",{count:t.length}):k("alerts.resetLibrary"),M=t.length?k("confirmDialog.removeItemsFromLib"):k("confirmDialog.resetLibrary");return g(eG,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:M,children:g("p",{children:I})})},[f,h]=O.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(I=>t.includes(I.id)):l.libraryItems,b=k(m?"buttons.remove":"buttons.resetLibrary"),[E,y]=O.useState(!1),[v,w]=O.useState(null),S=O.useCallback(()=>P(Gr,{onCloseRequest:()=>w(null),title:k("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(hr,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:I=>g("a",{href:v==null?void 0:v.url,target:"_blank",rel:"noopener noreferrer",children:I})})}),g(Ze,{type:"button",title:k("buttons.close"),"aria-label":k("buttons.close"),label:k("buttons.close"),onClick:()=>w(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[w,v]),R=(I,M)=>{y(!1),w({url:I.url,authorName:I.authorName});const D=M.slice();D.forEach(L=>{t.includes(L.id)&&(L.status="published")}),n.setLibrary(D)},_=async()=>{try{await n.updateLibrary({libraryItems:F9({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(I){if((I==null?void 0:I.name)==="AbortError"){console.warn(I);return}e({errorMessage:k("errors.importLibraryError")})}},T=async()=>{const I=m?p:await n.getLatestLibrary();R6e(I).catch(NP).catch(M=>{e({errorMessage:M.message})})},x=()=>P(Je,{open:c,children:[g(Je.Trigger,{onToggle:()=>u(!c),children:qle}),P(Je.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(Je.Item,{onSelect:_,icon:a9,"data-testid":"lib-dropdown--load",children:k("buttons.load")}),!!p.length&&g(Je.Item,{onSelect:T,icon:u5,"data-testid":"lib-dropdown--export",children:k("buttons.export")}),!!p.length&&g(Je.Item,{onSelect:()=>h(!0),icon:sd,children:b}),m&&g(Je.Item,{icon:aue,onSelect:()=>y(!0),"data-testid":"lib-dropdown--remove",children:k("buttons.publishLibrary")})]})]});return P("div",{className:be("library-menu-dropdown-container",a),children:[x(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),E&&g(j5e,{onClose:()=>y(!1),libraryItems:Q5e(l.libraryItems,t),appState:o,onSuccess:I=>R(I,l.libraryItems),onError:I=>window.alert(I),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:I=>s(t.filter(M=>M!==I))}),v&&S()]})},dM=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=fo(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=K$(),o=Si(),a=Vn(),[l]=mn(nm),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:k("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(J5e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function eye(){return[!1,O.useCallback(t=>t(),[])]}const tye=ae.useTransition||eye,nye=O.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=O.useRef(null),c=A5e(e,t,a);O.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=O.useState(!1),f=Jn().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:Zle});return P("div",{className:be("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:be("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(k9,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),iye=()=>g("div",{className:"library-unit library-unit--skeleton"}),fM=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),f7=O.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=tye(),[l,c]=O.useState(0);return O.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(pe,{children:e.map((u,d)=>d<l?g(nye,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:r,svgCache:s,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(iye,{},d))})}),rye=17,sye=64;function oye({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=O.useRef(null),d=F5e(u);O.useEffect(()=>{var I;d>0&&((I=u.current)==null||I.scrollTo(0,d))},[]);const{svgCache:f}=K$(),h=O.useMemo(()=>t.filter(I=>I.status!=="published"),[t]),m=O.useMemo(()=>t.filter(I=>I.status==="published"),[t]),p=!t.length&&!r.length,b=!r.length&&!h.length&&!m.length,[E,y]=O.useState(null),v=O.useCallback((I,M)=>{const D=!c.includes(I),L=[...h,...m];if(D){if(M.shiftKey&&E){const G=L.findIndex(j=>j.id===E),H=L.findIndex(j=>j.id===I);if(G===-1||H===-1){l([...c,I]);return}const V=Se(c),$=L.reduce((j,X,Z)=>((Z>=G&&Z<=H||V.has(X.id))&&j.push(X.id),j),[]);l($)}else l([...c,I]);y(I)}else y(null),l(c.filter(G=>G!==I))},[E,l,m,c,h]),w=O.useCallback(I=>{let M;return c.includes(I)?M=t.filter(D=>c.includes(D.id)):M=t.filter(D=>D.id===I),M.map(D=>({...D,elements:T6({type:"everything",elements:D.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),S=O.useCallback((I,M)=>{M.dataTransfer.setData(Ee.excalidrawlib,c$(w(I)))},[w]),R=O.useCallback(I=>I?c.includes(I):!1,[c]),_=O.useCallback(()=>{n(r)},[r,n]),T=O.useCallback(I=>{I&&i(w(I))},[w,i]),x=f.size>=t.length?sye:rye;return P("div",{className:"library-menu-items-container",style:r.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!b&&g(dM,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),P(us.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[P(pe,{children:[!b&&g("div",{className:"library-menu-items-container__header",children:k("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(tl,{})}),!r.length&&!h.length?P("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:k("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?k("library.hint_emptyPrivateLibrary"):k("library.hint_emptyLibrary")})]}):P(fM,{children:[r.length>0&&g(f7,{itemsRenderedPerBatch:x,items:[{id:null,elements:r}],onItemSelectToggle:v,onItemDrag:S,onClick:_,isItemSelected:R,svgCache:f}),g(f7,{itemsRenderedPerBatch:x,items:h,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:R,svgCache:f})]})]}),P(pe,{children:[(m.length>0||r.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:k("labels.excalidrawLib")}),m.length>0?g(fM,{children:g(f7,{itemsRenderedPerBatch:x,items:m,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:R,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:k("library.noItems")}):null]}),p&&g(J$,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:g(dM,{selectedItems:c,onSelectItems:l})})]})]})}const q9=en(!1),hM=({children:e})=>g("div",{className:"layer-ui__library",children:e}),aye=O.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=mn(nm),d=O.useCallback(m=>{(async(b,E)=>{ut("element","addToLibrary","ui");for(const v of TP)if(b.some(w=>w.type===v))return i({errorMessage:k(`errors.libraryElementTypeError.${v}`)});const y=[{status:"unpublished",elements:b,id:Hr(),created:Date.now()},...E];n(),s.setLibrary(y).catch(()=>{i({errorMessage:k("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=O.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(hM,{children:g("div",{className:"layer-ui__library-message",children:P("div",{children:[g(tl,{size:"2em"}),g("span",{children:k("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return P(hM,{children:[g(oye,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(J$,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),h7=(e,t)=>({elements:e,pending:Ve(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),lye=(e,t)=>{const n=G5(),[i,r]=O.useState(()=>h7(n,e.selectedElementIds)),s=O.useRef(new Map);return O.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),O.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{var l;if(!vi(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),h7(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==s.current.get(c))return h7(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},cye=O.memo(()=>{const e=fo(),{onInsertElements:t}=e,n=ep(),i=Si(),r=Vn(),[s,o]=O.useState([]),a=O.useMemo(()=>e.library,[e.library]),l=lye(i,e),c=O.useCallback(d=>{t(Q$(d))},[t]),u=O.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(aye,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),uye=e=>{const{closeOnClickOutside:t=!0}=e,n=JH({className:"excalidraw-modal-container"}),i=O.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===z.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return jn.createPortal(P("div",{className:be("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function dye(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const Gr=e=>{const[t,n]=V$(),[i]=O.useState(document.activeElement),{id:r}=ta(),s=Jn().viewport.isMobile;O.useEffect(()=>{if(!t)return;const c=oE(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===z.TAB){const f=oE(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=Vn(),a=o5(q9),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(uye,{className:be("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:dye(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:P(Ws,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:k("buttons.close"),"aria-label":k("buttons.close"),type:"button",children:eg}),g("div",{className:"Dialog__content",children:e.children})]})})},Ch=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:Xb(s.onClick,o=>{t()}),type:e,className:be("excalidraw-button",r,{selected:n}),...s,children:i}),Ah=O.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=O.useRef(null);O.useImperativeHandle(d,()=>f.current),O.useLayoutEffect(()=>{var p,b;s&&((p=f.current)==null||p.focus(),(b=f.current)==null||b.select())},[s]);const[h,m]=O.useState(!1);return P("div",{className:be("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var p;(p=f.current)==null||p.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),P("div",{className:be("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:be({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:r,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e==null?void 0:e(p.target.value),onKeyDown:o}),a&&g(Ch,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?Uue:c9})]})]})}),Q9=[{icon:nce,value:"selection",key:z.V,numericKey:z[1],fillable:!0},{icon:ice,value:"rectangle",key:z.R,numericKey:z[2],fillable:!0},{icon:rce,value:"diamond",key:z.D,numericKey:z[3],fillable:!0},{icon:sce,value:"ellipse",key:z.O,numericKey:z[4],fillable:!0},{icon:oce,value:"arrow",key:z.A,numericKey:z[5],fillable:!0},{icon:ace,value:"line",key:z.L,numericKey:z[6],fillable:!0},{icon:c5,value:"freedraw",key:[z.P,z.X],numericKey:z[7],fillable:!1},{icon:xz,value:"text",key:z.T,numericKey:z[8],fillable:!1},{icon:cce,value:"image",key:null,numericKey:z[9],fillable:!1},{icon:uce,value:"eraser",key:z.E,numericKey:z[0],fillable:!1}],fye=e=>{const t=Q9.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null};var hye={};const gM=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(hye?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},gye=e=>e?gM(e):gM;var rG={exports:{}},sG={},oG={exports:{}},aG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=O;function mye(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pye=typeof Object.is=="function"?Object.is:mye,Uye=Rh.useState,bye=Rh.useEffect,yye=Rh.useLayoutEffect,Eye=Rh.useDebugValue;function vye(e,t){var n=t(),i=Uye({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return yye(function(){r.value=n,r.getSnapshot=t,g7(r)&&s({inst:r})},[e,n,t]),bye(function(){return g7(r)&&s({inst:r}),e(function(){g7(r)&&s({inst:r})})},[e]),Eye(n),n}function g7(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pye(e,n)}catch{return!0}}function wye(e,t){return t()}var _ye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wye:vye;aG.useSyncExternalStore=Rh.useSyncExternalStore!==void 0?Rh.useSyncExternalStore:_ye;oG.exports=aG;var Tye=oG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5=O,Sye=Tye;function Iye(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xye=typeof Object.is=="function"?Object.is:Iye,Cye=Sye.useSyncExternalStore,Aye=z5.useRef,Rye=z5.useEffect,Mye=z5.useMemo,kye=z5.useDebugValue;sG.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=Aye(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Mye(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,xye(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=Cye(e,s[0],s[1]);return Rye(function(){o.hasValue=!0,o.value=a},[a]),kye(a),a};rG.exports=sG;var Lye=rG.exports;const Dye=cl(Lye);var lG={};const{useDebugValue:Oye}=ae,{useSyncExternalStoreWithSelector:Nye}=Dye;let mM=!1;const Pye=e=>e;function Fye(e,t=Pye,n){(lG?"production":void 0)!=="production"&&n&&!mM&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),mM=!0);const i=Nye(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Oye(i),i}const pM=e=>{(lG?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?gye(e):e,n=(i,r)=>Fye(t,i,r);return Object.assign(n,t),n},Bye=e=>e?pM(e):pM;var UM,bM;const yM=typeof window<"u"&&((UM=window.document)!=null&&UM.createElement||((bM=window.navigator)==null?void 0:bM.product)==="ReactNative")?ae.useLayoutEffect:ae.useEffect;function yo(){const e=Bye(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return yM(()=>{n(r=>({version:r.version+1}))},[]),yM(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return ae.createElement(ae.Fragment,null,t)}}}const cG=ae.createContext(null),rr=()=>ae.useContext(cG),zye=MB(),Hye=()=>ae.useMemo(()=>({MainMenuTunnel:yo(),WelcomeScreenMenuHintTunnel:yo(),WelcomeScreenToolbarHintTunnel:yo(),WelcomeScreenHelpHintTunnel:yo(),WelcomeScreenCenterTunnel:yo(),FooterCenterTunnel:yo(),DefaultSidebarTriggerTunnel:yo(),DefaultSidebarTabTriggersTunnel:yo(),OverwriteConfirmDialogTunnel:yo(),TTDDialogTriggerTunnel:yo(),tunnelsJotai:zye}),[]),uG=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const r of t)if(r.type!==n){n=null;break}return yE(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(r=>yE(r.type))},dG=(e,t)=>vh(e.activeTool.type)||t.some(n=>vh(n.type)),fG=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const r=kF(t,e);let s=!1;r.length===2&&(br(r[0])||br(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=Jn(),l=document.documentElement.getAttribute("dir")==="rtl",c=vh(e.activeTool.type)&&!zs(e.currentItemBackgroundColor)||r.some(m=>vh(m.type)&&!zs(m.backgroundColor)),u=r.length===1||s,d=!e.editingLinearElement&&r.length===1&&ke(r[0])&&!me(r[0]),f=!e.croppingElementId&&r.length===1&&ot(r[0]),h=!s&&$r(e,i);return P("div",{className:"panelColumn",children:[g("div",{children:uG(e,r)&&n("changeStrokeColor")}),dG(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(fC(e.activeTool.type)||r.some(m=>fC(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(hC(e.activeTool.type)||r.some(m=>hC(m.type)))&&P(pe,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(EE(e.activeTool.type)||r.some(m=>EE(m.type)))&&g(pe,{children:n("changeRoundness")}),(gC(e.activeTool.type)||r.some(m=>gC(m.type)))&&g(pe,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(fe))&&P(pe,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||Sse(r,t))&&n("changeTextAlign")]}),Tse(r,t)&&n("changeVerticalAlign"),(w6(e.activeTool.type)||r.some(m=>w6(m.type)))&&g(pe,{children:n("changeArrowhead")}),n("changeOpacity"),P("fieldset",{children:[g("legend",{children:k("labels.layers")}),P("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&P("fieldset",{children:[g("legend",{children:k("labels.align")}),P("div",{className:"buttonList",children:[l?P(pe,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):P(pe,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),P("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&P("fieldset",{children:[g("legend",{children:k("labels.actions")}),P("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},hG=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[r,s]=O.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="lasso",c=e.type==="embeddable",{TTDDialogTriggerTunnel:u}=rr();return P(pe,{children:[Q9.map(({value:d,icon:f,key:h,numericKey:m,fillable:p},b)=>{var w;if(((w=i.tools)==null?void 0:w[d])===!1)return null;const E=k(`toolBar.${d}`),y=h&&G1(typeof h=="string"?h:h[0]),v=y?`${y} ${k("helpDialog.or")} ${m}`:`${m}`;return g(Ze,{className:be("Shape",{fillable:p}),type:"radio",icon:f,checked:e.type===d,name:"editor-current-shape",title:`${G1(E)} — ${v}`,keyBindingLabel:m||y,"aria-label":G1(E),"aria-keyshortcuts":v,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:S})=>{!t.penDetected&&S==="pen"&&n.togglePenMode(!0),d==="selection"&&(t.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:S})=>{t.activeTool.type!==d&&ut("toolbar",d,"ui"),d==="image"?n.setActiveTool({type:d,insertOnCanvasDirectly:S!=="mouse"}):n.setActiveTool({type:d})}},d)}),g("div",{className:"App-toolbar__divider"}),P(Je,{open:r,children:[g(Je.Trigger,{className:be("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!r),title:k("toolBar.extraTools"),children:o?HE:c?tA:a&&!n.props.isCollaborating?VE:l?NE:mue}),P(Je.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(Je.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:HE,shortcut:z.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:k("toolBar.frame")}),g(Je.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:tA,"data-testid":"toolbar-embeddable",selected:c,children:k("toolBar.embeddable")}),g(Je.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:VE,"data-testid":"toolbar-laser",selected:a,shortcut:z.K.toLocaleUpperCase(),children:k("toolBar.laser")}),g(Je.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:NE,"data-testid":"toolbar-lasso",selected:l,children:k("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(u.Out,{}),g(Je.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:Bz,"data-testid":"toolbar-embeddable",children:k("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(pe,{children:P(Je.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:zz,"data-testid":"toolbar-magicframe",children:[k("toolBar.magicframe"),g(Je.Item.Badge,{children:"AI"})]})})]})]})]})},Vye=({renderAction:e,zoom:t})=>g(us.Col,{gap:1,className:dh.ZOOM_ACTIONS,children:P(us.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),$ye=({renderAction:e,className:t})=>P("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(cd,{label:k("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:P(cd,{label:k("buttons.redo"),children:[" ",e("redo")]})})]}),Gye=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:be("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(a4),children:k("buttons.exitZenMode")}),Xye=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),EM=e=>{const t=O.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},H5=en(null),jye=()=>{const[e,t]=mn(H5),n=vr();return e&&e==="clearCanvas"?g(eG,{onConfirm:()=>{n.executeAction(Q1),t(null)},onCancel:()=>t(null),title:k("clearCanvasDialog.title"),children:P("p",{className:"clear-canvas__content",children:[" ",k("alerts.clearReset")]})}):null},Yye={...O6,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(O6,"commandPalette")}},Wye=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:Yye},Symbol.toStringTag,{value:"Module"})),Kye=en(null),gt={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},Zye=e=>{switch(e){case gt.app:return 1;case gt.export:return 2;case gt.editor:return 3;case gt.tools:return 4;case gt.elements:return 5;case gt.links:return 6;default:return 10}},d2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return P("div",{className:be("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},gG=e=>!e.altKey&&e[z.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===z.P||e.key===z.SLASH),vM=Object.assign(e=>{var i;const t=Si(),n=Vn();return O.useEffect(()=>{const r=s=>{gG(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&ut("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(te.KEYDOWN,r,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,r,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(qye,{...e})},{defaultItems:Wye});function qye({customCommandPaletteItems:e}){const t=fo(),n=Si(),i=Vn(),r=ep(),s=vr(),[o,a]=mn(Kye),[l,c]=O.useState(null),u=O.useRef(null),d=y5({uiAppState:n,customCommandPaletteItems:e,appProps:r});O.useEffect(()=>{const{uiAppState:R,customCommandPaletteItems:_,appProps:T}=d,x=L=>{let G="";return L.label&&(typeof L.label=="function"?G=k(L.label(t.scene.getNonDeletedElements(),R,t)):G=k(L.label)),G},I=L=>typeof L.icon=="function"?L.icon(R,t.scene.getNonDeletedElements()):L.icon;let M=[];const D=(L,G,H)=>{const V={label:x(L),icon:I(L),category:G,shortcut:Hi(L.name),keywords:L.keywords,predicate:L.predicate,viewMode:L.viewMode,perform:()=>{s.executeAction(L,"commandPalette")}};return H?H(V,L):V};if(R&&t.scene&&s){const L=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,B$,H$,e5e].map(X=>D(X,gt.elements,(Z,ge)=>({...Z,predicate:ge.predicate?ge.predicate:(ce,le,Be,$e)=>Ve(ce,le).length>0}))),G=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool,s.actions.toggleLassoTool].map(X=>D(X,gt.tools)),H=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(X=>D(X,gt.editor)),V=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(X=>D(X,gt.export));M=[...L,...H,{label:x(Q1),icon:I(Q1),shortcut:Hi(Q1.name),category:gt.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Vs.set(H5,"clearCanvas")}},{label:k("buttons.exportImage"),category:gt.export,icon:Mz,shortcut:Hi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...V];const $=[{label:k("toolBar.library"),category:gt.app,icon:i9,viewMode:!1,perform:()=>{R.openSidebar?i({openSidebar:null}):i({openSidebar:{name:gs.name,tab:gs.defaultTab}})}},{label:k("search.title"),category:gt.app,icon:od,viewMode:!0,perform:()=>{s.executeAction(mG)}},{label:k("labels.changeStroke"),keywords:["color","outline"],category:gt.elements,icon:L8,viewMode:!1,predicate:(X,Z)=>{const ge=Ve(X,Z);return ge.length>0&&uG(Z,ge)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:k("labels.changeBackground"),keywords:["color","fill"],icon:L8,category:gt.elements,viewMode:!1,predicate:(X,Z)=>{const ge=Ve(X,Z);return ge.length>0&&dG(Z,ge)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:k("labels.canvasBackground"),keywords:["color"],icon:L8,category:gt.editor,viewMode:!1,perform:()=>{i(X=>({openMenu:X.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...Q9.reduce((X,Z)=>{var $t;const{value:ge,icon:ce,key:le,numericKey:Be}=Z;if((($t=T.UIOptions.tools)==null?void 0:$t[ge])===!1)return X;const Tt=le&&G1(typeof le=="string"?le:le[0])||Be,at={label:k(`toolBar.${ge}`),category:gt.tools,shortcut:Tt,icon:ce,keywords:["toolbar"],viewMode:!1,perform:({event:tn})=>{ge==="image"?t.setActiveTool({type:ge,insertOnCanvasDirectly:tn.type===te.KEYDOWN}):t.setActiveTool({type:ge})}};return X.push(at),X},[]),...G,{label:k("toolBar.lock"),category:gt.tools,icon:R.activeTool.locked?r9:l5,shortcut:z.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${k("labels.textToDiagram")}...`,category:gt.tools,icon:yue,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${k("toolBar.mermaidToExcalidraw")}...`,category:gt.tools,icon:Bz,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"mermaid"}}))}}],j=[...M,...$,..._||[]].map(X=>{var Z;return{...X,icon:X.icon||Hz,order:X.order??Zye(X.category),haystack:`${lM(X.label.toLocaleLowerCase())} ${((Z=X.keywords)==null?void 0:Z.join(" "))||""}`}});c(j),a(j.find(X=>X.label===(o==null?void 0:o.label))??null)}},[d,t,s,c,o==null?void 0:o.label,a,i]);const[f,h]=O.useState(""),[m,p]=O.useState(null),[b,E]=O.useState({}),y=R=>{i({openDialog:null},R),h("")},v=(R,_)=>{var T;((T=n.openDialog)==null?void 0:T.name)==="commandPalette"&&(_.stopPropagation(),_.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),y(()=>{R.perform({actionManager:s,event:_}),a(R),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},w=EM(R=>R.viewMode===!1&&n.viewModeEnabled?!1:typeof R.predicate=="function"?R.predicate(t.scene.getNonDeletedElements(),n,r,t):R.predicate===void 0||R.predicate),S=EM(R=>{var I;const _=lu(R.target)||gG(R)||R.key===z.ESCAPE;if(_&&R.key!==z.ARROW_UP&&R.key!==z.ARROW_DOWN&&R.key!==z.ENTER)return;const T=Object.values(b).flat(),x=o&&!f&&w(o);if(R.key===z.ARROW_UP){R.preventDefault();const M=T.findIndex(G=>G.label===(m==null?void 0:m.label));if(x){if(M===0){p(o);return}if(m===o){const G=T[T.length-1];G&&p(G);return}}let D;M===-1?D=T.length-1:D=M===0?T.length-1:(M-1)%T.length;const L=T[D];L&&p(L);return}if(R.key===z.ARROW_DOWN){R.preventDefault();const M=T.findIndex(G=>G.label===(m==null?void 0:m.label));if(x){if(!m||M===T.length-1){p(o);return}if(m===o){const G=T[0];G&&p(G);return}}const D=(M+1)%T.length,L=T[D];L&&p(L);return}if(R.key===z.ENTER&&m&&setTimeout(()=>{v(m,R)}),!_){if(R.stopPropagation(),/^[a-zA-Z0-9]$/.test(R.key)){(I=u==null?void 0:u.current)==null||I.focus();return}R.preventDefault()}});return O.useEffect(()=>(window.addEventListener(te.KEYDOWN,S,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,S,{capture:!0})),[S]),O.useEffect(()=>{if(!l)return;const R=I=>{const M={};for(const D of I)M[D.category]?M[D.category].push(D):M[D.category]=[D];return M};let _=l.filter(w).sort((I,M)=>I.order-M.order);const T=!f&&o&&w(o);if(!f){E(R(T?_.filter(I=>I.label!==(o==null?void 0:o.label)):_)),p(T?o:_[0]||null);return}const x=lM(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));_=Jbe.filter(x,_,{extract:I=>I.haystack}).sort((I,M)=>M.score-I.score).map(I=>I.original),E(R(_)),p(_[0]??null)},[f,l,w,o]),P(Gr,{onCloseRequest:()=>y(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Ah,{value:f,placeholder:k("commandPalette.search.placeholder"),onChange:R=>{h(R)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&P("div",{className:"shortcuts-wrapper",children:[g(d2,{shortcut:"↑↓",children:k("commandPalette.shortcuts.select")}),g(d2,{shortcut:"↵",children:k("commandPalette.shortcuts.confirm")}),g(d2,{shortcut:Q("Esc"),children:k("commandPalette.shortcuts.close")})]}),P("div",{className:"commands",children:[o&&!f&&P("div",{className:"command-category",children:[P("div",{className:"command-category-title",children:[k("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:Eue})]}),g(wM,{command:o,isSelected:o.label===(m==null?void 0:m.label),onClick:R=>v(o,R),disabled:!w(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(b).length>0?Object.keys(b).map((R,_)=>P("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:R}),b[R].map(T=>g(wM,{command:T,isSelected:T.label===(m==null?void 0:m.label),onClick:x=>v(T,x),onMouseMove:()=>p(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},R)):l?P("div",{className:"no-match",children:[g("div",{className:"icon",children:od})," ",k("commandPalette.search.noMatch")]}):null]})]})}const wM=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o})=>{const a=()=>{};return P("div",{className:be("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:r,onMouseMove:n?a:i,title:n?k("commandPalette.itemNotAvailable"):"",children:[P("div",{className:"name",children:[e.icon&&g(w5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&g(d2,{shortcut:e.shortcut})]})},Qye=oe({name:"toggleLinearEditor",category:gt.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&r.length===1&&ke(r[0])&&!me(r[0]))},perform(e,t,n,i){var o;const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===r.id?null:new ue(r);return{appState:{...t,editingLinearElement:s},captureUpdate:K.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],r=k(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Ze,{type:"button",icon:Lue,title:r,"aria-label":r,onClick:()=>t(null)})}}),mG=oe({name:"searchMenu",icon:od,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var r,s;if(((r=t.openSidebar)==null?void 0:r.name)===gs.name&&t.openSidebar.tab===Lu){const o=(s=i.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${dh.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:K.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:gs.name,tab:Lu},openDialog:null},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.F}),Jye=oe({name:"cropEditor",label:"helpDialog.cropStart",icon:bA,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&ot(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=k("helpDialog.cropStart");return g(Ze,{type:"button",icon:bA,title:i,"aria-label":i,onClick:()=>t(null)})}}),pG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&Ie(n[0])},e8e=oe({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(Ie(r)){const s=to(Pt(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:K.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>pG(t,i)}),t8e=oe({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return Ie(r)?{elements:xF(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:K.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>pG(t,i)});oe({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:K.EVENTUALLY}),checked:e=>e.frameRendering.enabled});oe({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:HE,viewMode:!1,perform:(e,t,n,i)=>{const r=dn(t,{type:"frame"});return Eo(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:dn(t,{type:"frame"})},captureUpdate:K.EVENTUALLY}},keyTest:e=>!e[z.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===z.F});const n8e=oe({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ve(e,t);return r.length>0&&!r.some(s=>Ie(s))},perform:(e,t,n,i)=>{const r=Ve(e,t),[s,o,a,l]=_t(r,i.scene.getNonDeletedElementsMap()),c=16,u=Ww({x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2});if(t.editingGroupId){const f=zt(r,t.editingGroupId);for(const h of f){const m=h.groupIds.indexOf(t.editingGroupId);ee(h,{groupIds:h.groupIds.slice(0,m)},!1)}}return{elements:j1([...i.scene.getElementsIncludingDeleted(),u],r,u,t),appState:{selectedElementIds:{[u.id]:!0}},captureUpdate:K.IMMEDIATELY}}});class X6{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class _u{constructor(){F(this,"onHistoryChangedEmitter",new So);F(this,"undoStack",[]);F(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){const i=s0.create(n,t);i.isEmpty()||(this.undoStack.push(i.inverse()),i.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new X6(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,i){return this.perform(t,n,i,()=>_u.pop(this.undoStack),r=>_u.push(this.redoStack,r,t))}redo(t,n,i){return this.perform(t,n,i,()=>_u.pop(this.redoStack),r=>_u.push(this.undoStack,r,t))}perform(t,n,i,r,s){try{let o=r();if(o===null)return;let a=t,l=n,c=!1;for(;o;){try{[a,l,c]=o.applyTo(a,l,i)}finally{s(o)}if(c)break;o=r()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new X6(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n,i){const r=n.inverse().applyLatestChanges(i);return t.push(r)}}class s0{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new s0(t,n)}inverse(){return new s0(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,i){const[r,s]=this.elementsChange.applyTo(t,i.elements),[o,a]=this.appStateChange.applyTo(n,r);return[r,o,s||a]}applyLatestChanges(t){const n=this.elementsChange.applyLatestChanges(t);return s0.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}}const UG=(e,t)=>{const[n,i]=O.useState(t);return O.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},bG=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:K.EVENTUALLY};const[r,s]=i,o=Array.from(r.values());return{appState:s,elements:o,captureUpdate:K.NEVER}}return{captureUpdate:K.EVENTUALLY}},i8e=(e,t)=>({name:"undo",label:"buttons.undo",icon:iA,trackEvent:{category:"history"},viewMode:!1,perform:(n,i,r,s)=>bG(s,i,()=>e.undo(Se(n),i,t.snapshot)),keyTest:n=>n[z.CTRL_OR_CMD]&&tE(n,z.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:i})=>{const{isUndoStackEmpty:r}=UG(e.onHistoryChangedEmitter,new X6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ze,{type:"button",icon:iA,"aria-label":k("buttons.undo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:r,"data-testid":"button-undo"})}}),r8e=(e,t)=>({name:"redo",label:"buttons.redo",icon:rA,trackEvent:{category:"history"},viewMode:!1,perform:(n,i,r,s)=>bG(s,i,()=>e.redo(Se(n),i,t.snapshot)),keyTest:n=>n[z.CTRL_OR_CMD]&&n.shiftKey&&tE(n,z.Z)||pP&&n.ctrlKey&&!n.shiftKey&&tE(n,z.Y),PanelComponent:({updateData:n,data:i})=>{const{isRedoStackEmpty:r}=UG(e.onHistoryChangedEmitter,new X6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ze,{type:"button",icon:rA,"aria-label":k("buttons.redo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:r,"data-testid":"button-redo"})}}),s8e=oe({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ve(e,t);return r.length===1&&fe(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=Ve(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&fe(s)){const o=Vi(s.originalText,Ct(s),s.lineHeight);return Ce(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:K.IMMEDIATELY}}}),_M=oe({name:"viewMode",label:"labels.viewMode",icon:c9,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.R}),m7=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&ut(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class o8e{constructor(t,n,i,r){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{m7(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=s=>{if(Nm(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return m7(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();m7(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}}class a8e{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const TM=e=>{const t=Array.from(e.values());return{x:IM(t,n=>n.x)/t.length,y:IM(t,n=>n.y)/t.length}},SM=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),IM=(e,t)=>e.reduce((n,i)=>n+t(i),0),l8e=8,xM=99999,V5=e=>l8e/e,Yi=class Yi{};F(Yi,"referenceSnapPoints",null),F(Yi,"visibleGaps",null),F(Yi,"setReferenceSnapPoints",t=>{Yi.referenceSnapPoints=t}),F(Yi,"getReferenceSnapPoints",()=>Yi.referenceSnapPoints),F(Yi,"setVisibleGaps",t=>{Yi.visibleGaps=t}),F(Yi,"getVisibleGaps",()=>Yi.visibleGaps),F(Yi,"destroy",()=>{Yi.referenceSnapPoints=null,Yi.visibleGaps=null});let Ms=Yi;const im=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Ac=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[z.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[z.CTRL_OR_CMD]&&!im(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,c8e=(e,t,n=.01)=>Math.abs(e-t)<=n,rm=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Pe(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=q(A(a,l+m),A(d,f),o.angle),b=q(A(a+h,l),A(d,f),o.angle),E=q(A(c,l+m),A(d,f),o.angle),y=q(A(a+h,u),A(d,f),o.angle),v=A(d,f);s=n?[p,b,E,y]:[p,b,E,y,v]}else{const p=q(A(a,l),A(d,f),o.angle),b=q(A(c,l),A(d,f),o.angle),E=q(A(a,u),A(d,f),o.angle),y=q(A(c,u),A(d,f),o.angle),v=A(d,f);s=n?[p,b,E,y]:[p,b,E,y,v]}}else if(e.length>1){const[o,a,l,c]=jw(e,r??{x:0,y:0}),u=l-o,d=c-a,f=A(o,a),h=A(l,a),m=A(o,c),p=A(l,c),b=A(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,b]}return s.map(o=>A(an(o[0]),an(o[1])))},yG=(e,t,n,i)=>{const r=t.filter(s=>Ie(s)).map(s=>s.id);return MF(e,t,n,i).filter(s=>!(s.frameId&&r.includes(s.frameId)))},u8e=(e,t,n,i)=>{const r=yG(e,t,n,i),s=t5(r,i).filter(d=>!(d.length===1&&Ht(d[0]))).map(d=>_t(d).map(f=>an(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>xM)break e;const m=o[h],[,p,b,E]=f,[y,v,,w]=m;b<y&&s6(Di(p,E),Di(v,w))&&a.push({startBounds:f,endBounds:m,startSide:[A(b,p),A(b,E)],endSide:[A(y,v),A(y,w)],length:y-b,overlap:o6(Di(p,E),Di(v,w))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>xM)break e;const m=c[h],[p,,b,E]=f,[y,v,w]=m;E<v&&s6(Di(p,b),Di(y,w))&&u.push({startBounds:f,endBounds:m,startSide:[A(p,E),A(b,E)],endSide:[A(y,v),A(w,v)],length:v-E,overlap:o6(Di(p,b),Di(y,w))})}}return{horizontalGaps:a,verticalGaps:u}},CM=(e,t,n,i,r,s,o)=>{if(!Ac({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Ms.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=jw(e,t).map(b=>an(b)),m=(u+f)/2,p=(d+h)/2;for(const b of l){if(!s6(Di(d,h),b.overlap))continue;const E=b.startSide[0][0]+b.length/2,y=an(E-m);if(b.length>f-u&&Math.abs(y)<=o.x){Math.abs(y)<o.x&&(r.length=0),o.x=Math.abs(y);const I={type:"gap",direction:"center_horizontal",gap:b,offset:y};r.push(I);continue}const[,,w]=b.endBounds,S=u-w,R=an(b.length-S);if(Math.abs(R)<=o.x){Math.abs(R)<o.x&&(r.length=0),o.x=Math.abs(R);const I={type:"gap",direction:"side_right",gap:b,offset:R};r.push(I);continue}const[_,,,]=b.startBounds,T=_-f,x=an(T-b.length);if(Math.abs(x)<=o.x){Math.abs(x)<o.x&&(r.length=0),o.x=Math.abs(x);const I={type:"gap",direction:"side_left",gap:b,offset:x};r.push(I);continue}}for(const b of c){if(!s6(Di(u,f),b.overlap))continue;const E=b.startSide[0][1]+b.length/2,y=an(E-p);if(b.length>h-d&&Math.abs(y)<=o.y){Math.abs(y)<o.y&&(s.length=0),o.y=Math.abs(y);const I={type:"gap",direction:"center_vertical",gap:b,offset:y};s.push(I);continue}const[,w,,]=b.startBounds,S=w-h,R=an(S-b.length);if(Math.abs(R)<=o.y){Math.abs(R)<o.y&&(s.length=0),o.y=Math.abs(R);const I={type:"gap",direction:"side_top",gap:b,offset:R};s.push(I);continue}const[,,,_]=b.endBounds,T=an(d-_),x=b.length-T;if(Math.abs(x)<=o.y){Math.abs(x)<o.y&&(s.length=0),o.y=Math.abs(x);const I={type:"gap",direction:"side_bottom",gap:b,offset:x};s.push(I);continue}}}},d8e=(e,t,n,i)=>{const r=yG(e,t,n,i);return t5(r,i).filter(s=>!(s.length===1&&Ht(s[0]))).flatMap(s=>rm(s,i))},Mh=(e,t,n,i,r,s,o)=>{if(!Ac({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Ms.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},f8e=(e,t,n,i,r)=>{var b,E;const s=n.state,o=Ve(e,s);if(!Ac({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=an(t.x),t.y=an(t.y);const a=[],l=[],c=V5(s.zoom.value),u={x:c,y:c},d=rm(o,r,{dragOffset:t});Mh(o,d,n,i,a,l,u),CM(o,t,n,i,a,l,u);const f={x:((b=a[0])==null?void 0:b.offset)??0,y:((E=l[0])==null?void 0:E.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:an(t.x+f.x),y:an(t.y+f.y)};Mh(o,rm(o,r,{dragOffset:h}),n,i,a,l,u),CM(o,h,n,i,a,l,u);const m=J9(a,l),p=g8e(o,h,[...a,...l].filter(y=>y.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},an=e=>Math.round(e*10**6)/10**6,AM=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},J9=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=an(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>A(an(o[0]),an(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=an(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>A(an(o[0]),an(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:AM(s.map(o=>A(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:AM(s.map(o=>A(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},h8e=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[an(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},g8e=(e,t,n)=>{const[i,r,s,o]=jw(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,b]=l.gap.endBounds,E=o6(Di(r,o),l.gap.overlap),y=o6(Di(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[A(l.gap.startSide[0][0],v),A(i,v)]},{type:"gap",direction:"horizontal",points:[A(s,v),A(l.gap.endSide[0][0],v)]})}break}case"center_vertical":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[A(v,l.gap.startSide[0][1]),A(v,r)]},{type:"gap",direction:"vertical",points:[A(v,o),A(v,l.gap.endSide[0][1])]})}break}case"side_right":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[A(d,v),A(h,v)]},{type:"gap",direction:"horizontal",points:[A(p,v),A(i,v)]})}break}case"side_left":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[A(s,v),A(c,v)]},{type:"gap",direction:"horizontal",points:[A(d,v),A(h,v)]})}break}case"side_top":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[A(v,o),A(v,u)]},{type:"gap",direction:"vertical",points:[A(v,f),A(v,m)]})}break}case"side_bottom":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[A(v,f),A(v,m)]},{type:"gap",direction:"vertical",points:[A(v,b),A(v,r)]})}break}}}return h8e(a.map(l=>({...l,points:l.points.map(c=>A(an(c[0]),an(c[1])))})))},RM=(e,t,n,i,r,s)=>{var R,_;if(!Ac({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!c8e(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=_t(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(A(l,a),A(l,c));break}case"w":{u.push(A(o,a),A(o,c));break}case"n":{u.push(A(o,a),A(l,a));break}case"s":{u.push(A(o,c),A(l,c));break}case"ne":{u.push(A(l,a));break}case"nw":{u.push(A(o,a));break}case"se":{u.push(A(l,c));break}case"sw":{u.push(A(o,c));break}}const d=V5(n.state.zoom.value),f={x:d,y:d},h=[],m=[];Mh(t,u,n,i,h,m,f);const p={x:((R=h[0])==null?void 0:R.offset)??0,y:((_=m[0])==null?void 0:_.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[b,E,y,v]=_t(e).map(T=>an(T)),w=[A(b,E),A(b,v),A(y,E),A(y,v)];Mh(e,w,n,i,h,m,f);const S=J9(h,m);return{snapOffset:p,snapLines:S}},m8e=(e,t,n,i,r,s)=>{var m,p;if(!Ac({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[A(i.x+r.x,i.y+r.y)],a=V5(t.state.zoom.value),l={x:a,y:a},c=[],u=[];Mh([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=rm([e],s,{boundingBoxCorners:!0,omitCenter:!0});Mh([e],f,t,n,c,u,l);const h=J9(c,u);return{snapOffset:d,snapLines:h}},p8e=(e,t,n,i,r)=>{if(!Ac({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=MF(e,[],t.state,r),o=V5(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=rm([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,A(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,A(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},U8e=e=>e===Xn.rectangle||e===Xn.ellipse||e===Xn.diamond||e===Xn.frame||e===Xn.magicframe||e===Xn.image||e===Xn.text,mU={width:100,height:0},jl=100,b8e=(e,t,n)=>{const i=Vr({x:0,y:0,textAlign:M0.CENTER,verticalAlign:Lr.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),Ji(i,e,n),[e,i]},MM=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??jl,d=(t==null?void 0:t.height)??jl;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let b="";f&&f.type==="text"?b=f.text:t.type==="text"&&(b=t.text),b||console.error(`No text found for start binding text element for ${e.id}`),s=Vr({x:h,y:m,type:"text",...f,...t,text:b}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=Ja({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:wc(e,`Unhandled element start type "${t.type}"`,!0)}cs(e,s,"start",r)}}if(n){const u=(n==null?void 0:n.height)??jl,d=(n==null?void 0:n.width)??jl;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let b="";f&&f.type==="text"?b=f.text:n.type==="text"&&(b=n.text),b||console.error(`No text found for end binding text element for ${e.id}`),o=Vr({x:h,y:m,type:"text",...f,...n,text:b}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=Ja({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:wc(e,`Unhandled element end type "${p}"`,!0)}cs(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Fa(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,ue.getNormalizedPoints({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class y8e{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>Za(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>ys(Se(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const h4=(e,t)=>{var a,l,c;if(!e)return[];const n=Fa(e),i=new y8e,r=new Map,s=new Map;for(const u of n){let d;const f=u.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(u,{id:Hr()}),u.type){case"rectangle":case"ellipse":case"diamond":{const m=(a=u==null?void 0:u.label)!=null&&a.text&&u.width===void 0?0:(u==null?void 0:u.width)||jl,p=(l=u==null?void 0:u.label)!=null&&l.text&&u.height===void 0?0:(u==null?void 0:u.height)||jl;d=Ja({...u,width:m,height:p});break}case"line":{const m=u.width||mU.width,p=u.height||mU.height;d=Pu({width:m,height:p,points:[A(0,0),A(m,p)],...u});break}case"arrow":{const m=u.width||mU.width,p=u.height||mU.height;d=Kw({width:m,height:p,endArrowhead:"arrow",points:[A(0,0),A(m,p)],...u,type:"arrow"}),Object.assign(d,gh(d.points));break}case"text":{const m=(u==null?void 0:u.fontFamily)||Fc,p=(u==null?void 0:u.fontSize)||fl,b=(u==null?void 0:u.lineHeight)||Ju(m),E=u.text??"",y=Uh(E),v=Vi(y,Ct({fontFamily:m,fontSize:p}),b);d=Vr({width:v.width,height:v.height,fontFamily:m,fontSize:p,...u});break}case"image":{d=fB({width:(u==null?void 0:u.width)||jl,height:(u==null?void 0:u.height)||jl,...u});break}case"frame":{d=Ww({x:0,y:0,...u});break}case"magicframe":{d=SE({x:0,y:0,...u});break}case"freedraw":case"iframe":case"embeddable":{d=u;break}default:d=u,wc(u,`Unhandled element type "${u.type}"`,!0)}i.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(i.add(d),r.set(d.id,u),f&&s.set(f,d.id))}const o=i.getElementsMap();for(const[u,d]of r){const f=i.getElement(u);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((c=d.label)!=null&&c.text){let[h,m]=b8e(f,d==null?void 0:d.label,o);if(i.add(h),i.add(m),Le(h)){const p=d.type==="arrow"?d==null?void 0:d.start:void 0,b=d.type==="arrow"?d==null?void 0:d.end:void 0;if(p&&p.id){const w=s.get(p.id);w&&Object.assign(p,{id:w})}if(b&&b.id){const w=s.get(b.id);w&&Object.assign(b,{id:w})}const{linearElement:E,startBoundElement:y,endBoundElement:v}=MM(h,p,b,i,o);h=E,i.add(E),i.add(y),i.add(v)}}else switch(d.type){case"arrow":{const{start:h,end:m}=d;if(h&&h.id){const y=s.get(h.id);Object.assign(h,{id:y})}if(m&&m.id){const y=s.get(m.id);Object.assign(m,{id:y})}const{linearElement:p,startBoundElement:b,endBoundElement:E}=MM(f,h,m,i,o);i.add(p),i.add(b),i.add(E);break}}break}}}for(const[u,d]of r){if(d.type!=="frame"&&d.type!=="magicframe")continue;const f=i.getElement(u);if(!f)throw new Error(`Excalidraw element with id ${u} doesn't exist`);const h=[];d.children.forEach(_=>{var I;const T=s.get(_);if(!T)throw new Error(`Element with ${_} wasn't mapped correctly`);const x=i.getElement(T);if(!x)throw new Error(`Frame element with id ${T} doesn't exist`);Object.assign(x,{frameId:f.id}),(I=x==null?void 0:x.boundElements)==null||I.forEach(M=>{const D=i.getElement(M.id);if(!D)throw new Error(`Bound element with id ${M.id} doesn't exist`);Object.assign(D,{frameId:f.id}),h.push(D)}),h.push(x)});let[m,p,b,E]=_t(h);const y=10;m=m-y,p=p-y,b=b+y,E=E+y;const v=(f==null?void 0:f.x)||m,w=(f==null?void 0:f.y)||p,S=(f==null?void 0:f.width)||b-m,R=(f==null?void 0:f.height)||E-p;Object.assign(f,{x:v,y:w,width:S,height:R})}return i.getElements()},E8e="#ff6b6b",v8e="#ff0000",kM=1,LM=2,w8e=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===xe.LIGHT||t.zenModeEnabled?E8e:v8e,i=(t.zenModeEnabled?kM*1.5:kM)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,T8e(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,S8e(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,_8e(r,e,t));e.restore()},_8e=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];Kr(i,r,t)}for(const i of e.points)EG(i,n,t)},T8e=(e,t,n)=>{EG(e.points[0],n,t),n.zenModeEnabled||Kr(e.points[0],e.points[1],t)},EG=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?LM*1.5:LM)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},Kr=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},S8e=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||Kr(A(e[0],e[1]-s),A(e[0],e[1]+s),r),Kr(A(l[0]-a,l[1]-o),A(l[0]-a,l[1]+o),r),Kr(A(l[0]+a,l[1]-o),A(l[0]+a,l[1]+o),r),i.zenModeEnabled||(Kr(A(t[0],t[1]-s),A(t[0],t[1]+s),r),Kr(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||Kr(A(e[0]-s,e[1]),A(e[0]+s,e[1]),r),Kr(A(l[0]-o,l[1]-a),A(l[0]+o,l[1]-a),r),Kr(A(l[0]-o,l[1]+a),A(l[0]+o,l[1]+a),r),i.zenModeEnabled||(Kr(A(t[0]-s,t[1]),A(t[0]+s,t[1]),r),Kr(e,t,r))}},Io=4,Yl=6,I8e="rgba(0,0,0,0.3)",x8e=(e,t,n,i)=>{if(!e.length)return{horizontal:null,vertical:null};const[r,s,o,a]=_t(e),l=t/i.zoom.value,c=n/i.zoom.value,u=t-l,d=n-c,f={top:parseInt(Zp("sat"))||0,bottom:parseInt(Zp("sab"))||0,left:parseInt(Zp("sal"))||0,right:parseInt(Zp("sar"))||0},h=B0().rtl,m=-i.scrollX+u/2+f.left,p=-i.scrollY+d/2+f.top,b=m+l-f.right,E=p+c-f.bottom,y=Math.min(r,m),v=Math.min(s,p),w=Math.max(o,b),S=Math.max(a,E);return{horizontal:m===y&&b===w?null:{x:Math.max(f.left,Io)+(m-y)/(w-y)*t,y:n-Yl-Math.max(Io,f.bottom),width:(b-m)/(w-y)*t-Math.max(Io*2,f.left+f.right),height:Yl},vertical:p===v&&E===S?null:{x:h?Math.max(f.left,Io):t-Yl-Math.max(f.right,Io),y:(p-v)/(S-v)*n+Math.max(f.top,Io),width:Yl,height:(E-p)/(S-v)*n-Math.max(Io*2,f.top+f.bottom)}}},DM=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},C8e=(e,t)=>{gr(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;gr(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),vG(n,e,t),e.restore()},A8e=(e,t,n)=>{var a,l;const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(r))return;const s=ue.getElement(i,n);if(!s)return;const o=ue.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),vG(o,e,t),e.restore()},vG=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",M5(t,e[0],e[1],ue.POINT_HANDLE_SIZE/n.zoom.value,!1)},Qm=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},R8e=(e,t,n,i,r,s)=>{e.save(),e.translate(i,r),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},p7=(e,t,n,i,r,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),M5(e,n[0],n[1],i/t.zoom.value,!s)},M8e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},k8e=(e,t,n,i)=>{const[r,s,o,a]=Pe(t,n),l=o-r,c=a-s;e.strokeStyle="rgba(0,0,0,.05)";const u=i.value<1?i.value:1;e.lineWidth=Aw/u;const d=e.lineWidth/2+Rw,f=js(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Qm(e,r-d,s-d,l+d*2,c+d*2,r+l/2,s+c/2,t.angle,void 0,f);break;case"diamond":const h=Math.hypot(l,c),m=d*h/c,p=d*h/l;R8e(e,l+m*2,c+p*2,r+l/2,s+c/2,t.angle);break;case"ellipse":M8e(e,l+d*2,c+d*2,r+l/2,s+c/2,t.angle);break}},L8e=(e,t,n,i)=>{const[r,s,o]=t,a=Vm(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=ue.getPointAtIndexGlobalCoordinates(r,c,n);M5(e,u,d,a)})},wG=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,b=(n.padding??Qu*2)/t.zoom.value,E=8/t.zoom.value,y=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const v=l.length;for(let w=0;w<v;++w)e.strokeStyle=l[w],d&&e.setLineDash([E,y+(E+y)*(v-1)]),e.lineDashOffset=(E+y)*w,Qm(e,r-b,s-b,h+b*2,m+b*2,c,u,i);e.restore()},D8e=(e,t,n,i)=>{const r=Array.isArray(n)?L8e:k8e;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},O8e=(e,t,n,i)=>{const[r,s,o,a]=Pe(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=on.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Qm(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,on.radius/t.zoom.value),e.restore()},N8e=(e,t,n)=>{const i=n.filter(a=>a.groupIds.length===0),r=n.filter(a=>a.groupIds.length>0),s=a=>{const[l,c,u,d]=_t(a);return{angle:0,x1:l,x2:u,y1:c,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(u-l)/2,cy:c+(d-c)/2,activeEmbeddable:!1}},o=a=>{const l=zt(n,a);return s(l)};Object.entries(PF(r,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(i.map(a=>s([a]))).forEach(a=>wG(e,t,a))},U7=(e,t,n,i)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=ue.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=ue,o=t.editingLinearElement?s:s/2;if(r.forEach((l,c)=>{var d,f;if(me(n)&&c!==0&&c!==r.length-1)return;const u=!!((f=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&f.includes(c));p7(e,t,l,o,u)}),me(n)){const l=((a=n.fixedSegments)==null?void 0:a.map(c=>c.index))||[];r.slice(0,-1).forEach((c,u)=>{ue.isSegmentTooShort(n,r[u+1],r[u],u,t.zoom)||p7(e,t,A((c[0]+r[u+1][0])/2,(c[1]+r[u+1][1])/2),s/2,!1,!l.includes(u+1))})}else ue.getEditorMidPoints(n,i,t).filter((c,u,d)=>c!==null&&!(me(n)&&(u===0||u===d.length-1))).forEach(c=>{(t.editingLinearElement||r.length===2)&&p7(e,t,c,s/2,!1,!0)});e.restore()},OM=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?M5(e,a+c/2,l+u/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):Qm(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},P8e=(e,t,n,i,r)=>{const[s,o,,,a,l]=Pe(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),b=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,b]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,b]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-b]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-b]]].forEach(y=>{const[[v,w],[S,R],[_,T],[x,I],[M,D]]=y;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(v+S,w+R),e.lineTo(v+_,w+T),e.stroke(),e.beginPath(),e.moveTo(v+x,w+I),e.lineTo(v+M,w+D),e.stroke(),e.restore()}),e.restore()},F8e=(e,t,n,i)=>{t.save();const r=Qu*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},_G=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,device:l})=>{var p,b,E;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=k5(e,s),d=L5({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(y=>{var v;((v=o.editingLinearElement)==null?void 0:v.elementId)===y.id&&y&&(f=y)}),f&&U7(d,o,f,t),o.selectionElement&&!o.isCropping)try{oae(o.selectionElement,d,o,a.selectionColor)}catch(y){console.error(y)}if(o.editingTextElement&&fe(o.editingTextElement)){const y=r.get(o.editingTextElement.id);y&&!y.autoResize&&F8e(y,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(y=>y!=null).forEach(y=>{D8e(d,o,y,t)}),o.frameToHighlight&&O8e(d,o,o.frameToHighlight,t),o.elementsToHighlight&&N8e(d,o,o.elementsToHighlight);const h=i.some(y=>Ie(y));if(i.length===1&&((p=o.editingLinearElement)==null?void 0:p.elementId)===i[0].id&&U7(d,o,i[0],t),o.selectedLinearElement){const y=o.selectedLinearElement,v=i.find(w=>w.id===y.elementId);y.segmentMidPointHoveredCoords?C8e(d,o):(me(v)?y.hoverPointIndex===0||y.hoverPointIndex===v.points.length-1:y.hoverPointIndex>=0)&&A8e(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const y=yB(i,o),v=i.length===1&&ke(i[0]);v&&((b=o.selectedLinearElement)==null?void 0:b.elementId)===i[0].id&&!i[0].locked&&U7(d,o,i[0],t);const w=a.selectionColor||li.black;if(y){const S=Se(i),R=[];for(const T of t.values()){const x=[],I=a.remoteSelectedElementIds.get(T.id);if(v&&me(T)&&(T.startBinding||T.endBinding)||(S.has(T.id)&&!OF(o,T)&&x.push(w),I&&x.push(...I.map(M=>P5(M,o.collaborators.get(M))))),x.length){const[M,D,L,G,H,V]=Pe(T,t,!0);R.push({angle:T.angle,x1:M,y1:D,x2:L,y2:G,selectionColors:x,dashed:!!I,cx:H,cy:V,activeEmbeddable:((E=o.activeEmbeddable)==null?void 0:E.element)===T&&o.activeEmbeddable.state==="active",padding:T.id===o.croppingElementId||ot(T)?0:void 0})}}const _=T=>{const x=zt(t,T),[I,M,D,L]=_t(x);R.push({angle:0,x1:I,x2:D,y1:M,y2:L,selectionColors:[li.black],dashed:!0,cx:I+(D-I)/2,cy:M+(L-M)/2,activeEmbeddable:!1})};for(const T of Nu(o))_(T);o.editingGroupId&&_(o.editingGroupId),R.forEach(T=>wG(d,o,T))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=li.white;const S=bB(i[0],o.zoom,t,"mouse",W1(l));if(!o.viewModeEnabled&&y&&!fe(o.editingTextElement)&&!o.croppingElementId&&OM(d,a,o,S,i[0].angle),o.croppingElementId&&!o.isCropping){const R=t.get(o.croppingElementId);R&&ot(R)&&P8e(d,a,o,R,t)}}else if(i.length>1&&!o.isRotating){const S=Qu*2/o.zoom.value;d.fillStyle=li.white;const[R,_,T,x]=_t(i,t),I=d.getLineDash();d.setLineDash([2/o.zoom.value]);const M=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=w,Qm(d,R-S,_-S,T-R+S*2,x-_+S*2,(R+T)/2,(_+x)/2,0),d.lineWidth=M,d.setLineDash(I);const D=qw([R,_,T,x,(R+T)/2,(_+x)/2],0,o.zoom,"mouse",h?{...W1(l),rotation:!0}:W1(l));i.some(L=>!L.locked)&&OM(d,a,o,D,0)}d.restore()}o.searchMatches.forEach(({id:y,focus:v,matchedLines:w})=>{const S=t.get(y);if(S&&fe(S)){const[R,_,,,T,x]=Pe(S,t,!0);d.save(),o.theme===xe.LIGHT?v?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":v?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(T,x),d.rotate(S.angle),w.forEach(I=>{d.fillRect(R+I.offsetX-T,_+I.offsetY-x,I.width,I.height)}),d.restore()}}),w8e(d,o),d.restore(),Rbe({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=x8e(n,c,u,o),d.save(),d.fillStyle=I8e,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(y=>{y&&L$(d,y.x,y.y,y.width,y.height,Yl/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},TG=Zh(e=>{var n;const t=_G(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),B8e=(e,t)=>{if(t){TG(e);return}const n=_G(e);return e.callback(n),n};class NM{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())E6(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s,pendingImageElementId:o})=>{const a=ys(new Map);for(const l of i)ot(l)&&o===l.id||s!==l.id&&(!r||r.type!=="text"||l.id!==r.id)&&a.set(l.id,l);return a};return Fie(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,pendingImageElementId:f,sceneNonce:h})=>{const m=this.scene.getNonDeletedElements(),p=n({elements:m,editingTextElement:u,newElementId:d,pendingImageElementId:f}),b=t({elementsMap:p,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:p,visibleElements:b}})})());this.scene=t}destroy(){TG.cancel(),g$.cancel(),this.getRenderableElements.clear()}}const z8e=5,H8e=(e,t,n)=>{const[i,r]=Pe(e,n),{x:s,y:o}=Fs({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},PM=({children:e,element:t,elementsMap:n})=>{const i=tp();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=H8e(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:z8e},children:e})};function V8e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var $8e={};V8e($8e,"LaserPointer",()=>Y6);function Un([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function b1([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function An([e,t,n],i){return[e*i,t*i,n*i]}function Zd([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Ai([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function G8e(e,t,n){return Un(e,An(b1(t,e),n))}function FM(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function BM(e){return Math.atan2(Math.sin(e),Math.cos(e))}function zM([e,t]){return Math.sqrt(e**2+t**2)}function Zf([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function X8e(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Zf(e[n-1],e[n]);return t+=Zf(e[e.length-2],e[e.length-1]),t}const j8e=(e,t,n)=>Math.max(t,Math.min(n,e));function Y8e(e,t,n){const i=Zf(t,n);if(i===0)return Zf(e,t);const r=j8e(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return Zf(s,e)}function j6(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=Y8e(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...j6([n,...e.slice(1,s),o],t).slice(0,-1),o,...j6([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}const kl=class kl{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},kl.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=G8e(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),X8e(this.tailPoints)>kl.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=j6(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const _=n[0],T=this.getSize(t,_[2],0,i,0);if(T<.5)return[];const x=[];for(let I=0;I<=Math.PI*2;I+=Math.PI/16)x.push(Un(_,An(Ai([1,0,0],I),T)));return x.push(Un(_,An([1,0,0],this.getSize(t,_[2],0,i,0)))),x}if(i===2){const _=n[0],T=n[1],x=this.getSize(t,_[2],0,i,0),I=this.getSize(t,T[2],0,i,0);if(x<.5||I<.5)return[];const M=[],D=FM(_,[_[0],_[1]-100,_[2]],T);for(let L=D;L<=Math.PI+D;L+=Math.PI/16)M.push(Un(_,An(Ai([1,0,0],L),x)));for(let L=Math.PI+D;L<=Math.PI*2+D;L+=Math.PI/16)M.push(Un(T,An(Ai([1,0,0],L),I)));return M.push(M[0]),M}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let _=1;_<i-1;_++){const T=n[_-1],x=n[_],I=n[_+1];let M=x[2];const D=Zf(T,x);c+=D,o=a+(D-a)*.2;const L=this.getSize(t,M,_,i,c);if(L===0){l=_+1;continue}const G=Zd(b1(T,x)),H=Zd(b1(I,x)),V=Ai(G,Math.PI/2),$=Ai(G,-Math.PI/2),j=Ai(H,Math.PI/2),X=Ai(H,-Math.PI/2),Z=Un(x,An(V,L)),ge=Un(x,An($,L)),ce=Un(x,An(j,L)),le=Un(x,An(X,L)),Be=Un(V,X),$e=Un($,j),Tt=Un(x,An(zM(Be)===0?G:Zd(Be),L)),at=Un(x,An(zM($e)===0?H:Zd($e),L)),$t=BM(FM(x,T,I)),tn=kl.constants.cornerDetectionMaxAngle/180*Math.PI*kl.constants.cornerDetectionVariance(o);if(Math.abs($t)<tn){const Ae=Math.abs(BM(Math.PI-$t));if(Ae===0)continue;if($t<0){s.push(ge,at);for(let Ge=0;Ge<=Ae;Ge+=Ae/4)r.push(Un(x,Ai(An(V,L),Ge)));for(let Ge=Ae;Ge>=0;Ge-=Ae/4)s.push(Un(x,Ai(An(V,L),Ge)));s.push(at,ce)}else{r.push(Z,Tt);for(let Ge=0;Ge<=Ae;Ge+=Ae/4)s.push(Un(x,Ai(An(V,-L),-Ge)));for(let Ge=Ae;Ge>=0;Ge-=Ae/4)r.push(Un(x,Ai(An(V,-L),-Ge)));r.push(Tt,le)}}else r.push(Tt),s.push(at);a=o}if(l>=i-2)if(this.options.keepHead){const _=n[i-1],T=[];for(let x=0;x<=Math.PI*2;x+=Math.PI/16)T.push(Un(_,An(Ai([1,0,0],x),this.options.size)));return T.push(Un(_,An([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=Zd(b1(d,u)),p=Zd(b1(f,h)),b=Ai(m,-Math.PI/2),E=Ai(p,Math.PI/2),y=this.getSize(t,u[2],0,i,0),v=[],w=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),S=[];if(y>1){for(let _=0;_<=Math.PI;_+=Math.PI/16)v.unshift(Un(u,Ai(An(b,y),-_)));v.unshift(Un(u,An(b,-y)))}else v.push(u);for(let _=0;_<=Math.PI*3;_+=Math.PI/16)S.push(Un(h,Ai(An(E,-w),-_)));const R=[...v,...r,...S.reverse(),...s.reverse()];return v.length>0&&R.push(v[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?j6(R,this.options.simplify):R}};kl.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},kl.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let Y6=kl;class W6{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");F(this,"trailAnimation");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(it,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(it,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new Y6(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.pastTrails=[],this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([s,o])=>{const a=Fs({sceneX:s,sceneY:o},n);return[a.x,a.y]}),r=this.trailAnimation?i.slice(0,i.length/2):i;return Bie(r,!0)}}class W8e{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new W6(t,n,{...this.getTrailOptions(),fill:()=>One})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(Ya(s),Ya(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new W6(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=n.pointer)==null?void 0:r.laserColor)||P5(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const sn=e=>t=>{jn.unstable_batchedUpdates(e,t)},b7=e=>Zh(t=>{jn.unstable_batchedUpdates(e,t)}),e_=(()=>{let e;try{const n=O.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),K8e=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},Z8e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(H,V)=>{if(!V.style.fontFamily||!V.style.fontSize)return!1;const $=V.style.fontFamily.replace(/"/g,"");return Dm({fontFamily:H.fontFamily})!==$||`${H.fontSize}px`!==V.style.fontSize},u=()=>{var Z;const H=a.state,V=(Z=Yo.getScene(r))==null?void 0:Z.getElement(e);if(!V)return;const{textAlign:$,verticalAlign:j}=V,X=a.scene.getNonDeletedElementsMap();if(V&&fe(V)){let ge=V.x,ce=V.y;const le=Bn(V,a.scene.getNonDeletedElementsMap());let Be=V.width,$e=V.height,Tt=V.width,at=V.height;if(le&&V.containerId){if(Le(le)){const Xr=ue.getBoundTextElementPosition(le,V,X);ge=Xr.x,ce=Xr.y}const go=c(V,d);let mo;if(go?mo=g6(le.id,le.height):(mo=ph[le.id],mo||(mo=g6(le.id,le.height))),Tt=Ka(le,V),at=Zb(le,V),!Le(le)&&$e>at){const Xr=id($e,le.type);ee(le,{height:Xr});return}else if(!Le(le)&&le.height>mo.height&&$e<at){const Xr=id($e,le.type);ee(le,{height:Xr})}else{const{y:Xr}=Kb(le,V,X);ce=Xr}}const[$t,tn]=i(ge,ce),Ae=d.selectionStart,Ge=d.selectionEnd,Gt=d.value.length;if(Ae===Ge&&Ge!==Gt){const go=Gt-Ge;d.selectionStart=d.value.length-go,d.selectionEnd=d.value.length-go}le?Be+=.5:(Tt=(H.width-8-$t)/H.zoom.value,Be=Math.min(Be,Tt)),$e*=1.05;const vs=Ct(V),na=(H.height-tn)/H.zoom.value;Object.assign(d.style,{font:vs,lineHeight:V.lineHeight,width:`${Be}px`,height:`${$e}px`,left:`${$t}px`,top:`${tn}px`,transform:K8e(Be,$e,_se(V,le),H,Tt,na),textAlign:$,verticalAlign:j,color:V.strokeColor,opacity:V.opacity/100,filter:"var(--theme-filter)",maxHeight:`${na}px`}),d.scrollTop=0,ee(V,{x:ge,y:ce})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Ht(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async H=>{const V=await A$(H,!0);if(!V.text)return;const $=Uh(V.text);if(!$)return;const j=Bn(r,a.scene.getNonDeletedElementsMap()),X=Ct({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(j){const Z=ze(j,a.scene.getNonDeletedElementsMap()),ge=xd(`${d.value}${$}`,X,Ka(j,Z)),ce=xw(ge,X);d.style.width=`${ce}px`}},d.oninput=()=>{const H=Uh(d.value);if(d.value!==H){const V=d.selectionStart;d.value=H,d.selectionStart=V,d.selectionEnd=V}t(d.value)}),d.onkeydown=H=>{if(!H.shiftKey&&ZA.keyTest(H))H.preventDefault(),a.actionManager.executeAction(ZA),u();else if(!H.shiftKey&&qA.keyTest(H))H.preventDefault(),a.actionManager.executeAction(qA),u();else if(!H.shiftKey&&QA.keyTest(H))H.preventDefault(),a.actionManager.executeAction(QA),u();else if(jA.keyTest(H))a.actionManager.executeAction(jA);else if(YA.keyTest(H))a.actionManager.executeAction(YA);else if(H.key===z.ESCAPE)H.preventDefault(),S=!0,R();else if($6.keyTest(H))H.preventDefault(),R(),a.actionManager.executeAction($6);else if(H.key===z.ENTER&&H[z.CTRL_OR_CMD]){if(H.preventDefault(),H.isComposing||H.keyCode===229)return;S=!0,R()}else if(H.key===z.TAB||H[z.CTRL_OR_CMD]&&(H.code===et.BRACKET_LEFT||H.code===et.BRACKET_RIGHT)){if(H.preventDefault(),H.isComposing)return;H.shiftKey||H.code===et.BRACKET_LEFT?y():E(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),b=new RegExp(`^ {1,${m}}`),E=()=>{const{selectionStart:H,selectionEnd:V}=d,$=v();let j=d.value;$.forEach(X=>{const Z=j.slice(0,X),ge=j.slice(X);j=`${Z}${p}${ge}`}),d.value=j,d.selectionStart=H+m,d.selectionEnd=V+m*$.length},y=()=>{const{selectionStart:H,selectionEnd:V}=d,$=v(),j=[];let X=d.value;$.forEach(Z=>{const ge=X.slice(Z,Z+m).match(b);if(ge){const ce=X.slice(0,Z),le=X.slice(Z+ge[0].length);X=`${ce}${le}`,j.push(Z)}}),d.value=X,j.length&&(H>j[j.length-1]?d.selectionStart=Math.max(H-m,j[j.length-1]):d.selectionStart=H,d.selectionEnd=Math.max(d.selectionStart,V-m*j.length))},v=()=>{let{selectionStart:H,selectionEnd:V,value:$}=d;const j=$.slice(0,H).match(/[^\n]*$/)[0].length;return H=H-j,$.slice(H,V).split(`
`).reduce((Z,ge,ce,le)=>Z.concat(ce?Z[ce-1]+le[ce-1].length+1:H),[]).reverse()},w=H=>{H.target instanceof HTMLCanvasElement&&(H.preventDefault(),H.stopPropagation())};let S=!1;const R=()=>{var $,j;if(L)return;L=!0,_();const H=($=Yo.getScene(r))==null?void 0:$.getElement(r.id);if(!H)return;const V=Bn(H,a.scene.getNonDeletedElementsMap());if(V){if(d.value.trim()){const X=jo(V);!X||X!==r.id?ee(V,{boundElements:(V.boundElements||[]).concat({type:"text",id:r.id})}):Le(V)&&$m(V)}else ee(V,{boundElements:(j=V.boundElements)==null?void 0:j.filter(X=>!fe(X))});Ji(H,V,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:S,nextOriginalText:d.value})},_=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,G&&G.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",w,!0),window.removeEventListener("pointerdown",I),window.removeEventListener("pointerup",T),window.removeEventListener("blur",R),window.removeEventListener("beforeunload",R),M(),D(),d.remove()},T=H=>{window.removeEventListener("pointerup",T);const V=H==null?void 0:H.target,$=V instanceof HTMLElement&&V.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=R,$||d.focus()})},x=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",R)},I=H=>{const V=H==null?void 0:H.target;if(H.button===_l.WHEEL){V instanceof HTMLTextAreaElement&&(H.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(H)),x();return}const $=V instanceof HTMLElement&&V.classList.contains("properties-trigger");(H.target instanceof HTMLElement||H.target instanceof SVGElement)&&H.target.closest(`.${dh.SHAPE_ACTIONS_MENU}, .${dh.ZOOM_ACTIONS}`)&&!lu(H.target)||$?x():H.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{R()})},M=a.scene.onUpdate(()=>{var V;u(),!!((V=document.activeElement)!=null&&V.closest(".properties-content"))||d.focus()}),D=a.onScrollChangeEmitter.on(()=>{u()});let L=!1;l&&d.select(),T();let G=null;s&&"ResizeObserver"in window?(G=new window.ResizeObserver(()=>{u()}),G.observe(s)):window.addEventListener("resize",u),d.onpointerdown=H=>H.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",I,{capture:!0})}),window.addEventListener("beforeunload",R),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},q8e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function y7(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Q8e(e,t,n){const i=y7(t,n);if(i===0)return y7(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),y7(e,J8e(t,n,r))}function J8e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function e7e(e,t){return g4(e,0,e.length,t)}function g4(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Q8e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(g4(e,t,c+1,i,s),g4(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}const t7e=e=>{const{lassoPath:t,elements:n,elementsSegments:i,intersectedElements:r,enclosedElements:s,simplifyDistance:o}=e;let a=t;o&&(a=e7e(t,o)),s.clear();for(const c of n)!r.has(c.id)&&!s.has(c.id)&&(n7e(a,c,i)?s.add(c.id):i7e(a,c,i)&&r.add(c.id));return{selectedElementIds:[...r,...s]}},n7e=(e,t,n)=>{const i=L0(e),r=n.get(t.id);return r?r.some(s=>s.some(o=>bie(o,i))):!1},i7e=(e,t,n)=>{const i=n.get(t.id);return i?e.reduce((s,o,a)=>(a===0||s.push(_e(e[a-1],o)),s),[]).some(s=>i.some(o=>td(s,o,1)!==null)):!1};class r7e extends W6{constructor(n,i){super(n,i,{animateTrail:!0,streamline:.4,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/(1/0)),l=(5e3-Math.min(5e3,r.totalLength-r.currentIndex))/5e3;return Math.min(Ya(l),Ya(a))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"});F(this,"intersectedElements",new Set);F(this,"enclosedElements",new Set);F(this,"elementsSegments",null);F(this,"keepPreviousSelection",!1);F(this,"selectElementsFromIds",n=>{this.app.setState(i=>{const r=n.reduce((l,c)=>(l[c]=!0,l),{});if(this.keepPreviousSelection)for(const l of Object.keys(i.selectedElementIds))r[l]=!0;for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&fe(c)){const u=Bn(c,this.app.scene.getNonDeletedElementsMap());u&&(r[u.id]=!0,delete r[c.id])}}for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&Ie(c)){const u=to(this.app.scene.getNonDeletedElementsMap(),c.id);for(const d of u)delete r[d.id]}}const s=Li({editingGroupId:i.editingGroupId,selectedElementIds:r},this.app.scene.getNonDeletedElements(),i,this.app),o=[...Object.keys(s.selectedElementIds)],a=[...Object.keys(s.selectedGroupIds)];return{selectedElementIds:s.selectedElementIds,selectedGroupIds:s.selectedGroupIds,selectedLinearElement:o.length===1&&!a.length&&ke(this.app.scene.getNonDeletedElement(o[0]))?new ue(this.app.scene.getNonDeletedElement(o[0])):null}})});F(this,"addPointToPath",(n,i,r=!1)=>{super.addPointToPath(n,i),this.keepPreviousSelection=r,this.updateSelection()});F(this,"updateSelection",()=>{var i,r;const n=(r=(i=super.getCurrentTrail())==null?void 0:i.originalPoints)==null?void 0:r.map(s=>A(s[0],s[1]));if(!this.elementsSegments){this.elementsSegments=new Map;const s=Se(this.app.visibleElements);for(const o of this.app.visibleElements){const a=_6(o,s);this.elementsSegments.set(o.id,a)}}if(n){const{selectedElementIds:s}=t7e({lassoPath:n,elements:this.app.visibleElements,elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(s)}})}startPath(n,i,r=!1){this.endPath(),super.startPath(n,i),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=r,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}const s7e=2;class o7e extends W6{constructor(n,i){super(n,i,{streamline:.2,size:5,keepHead:!0,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/200),l=(10-Math.min(10,r.totalLength-r.currentIndex))/10;return Math.min(Ya(l),Ya(a))},fill:()=>i.state.theme===xe.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});F(this,"elementsToErase",new Set);F(this,"groupsToErase",new Set);F(this,"segmentsCache",new Map);F(this,"geometricShapesCache",new Map)}startPath(n,i){this.endPath(),super.startPath(n,i),this.elementsToErase.clear()}addPointToPath(n,i,r=!1){return super.addPointToPath(n,i),this.updateElementsToBeErased(r)}updateElementsToBeErased(n){var a,l;let i=((l=(a=super.getCurrentTrail())==null?void 0:a.originalPoints)==null?void 0:l.map(c=>A(c[0],c[1])))||[];i=i==null?void 0:i.slice(i.length-s7e);const r=this.app.visibleElements.filter(c=>!c.locked),s=Se(r),o=i.reduce((c,u,d)=>(d===0||c.push(_e(i[d-1],u)),c),[]);if(o.length===0)return[];for(const c of r)if(n&&this.elementsToErase.has(c.id)){if(HM(o,c,this.segmentsCache,this.geometricShapesCache,s,this.app)){const d=c.groupIds.at(-1);if(this.groupsToErase.has(d)){const f=zt(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.delete(h.id);this.groupsToErase.delete(d)}if(Ht(c)&&this.elementsToErase.delete(c.containerId),br(c)){const f=jo(c);f&&this.elementsToErase.delete(f)}this.elementsToErase.delete(c.id)}}else if(!n&&!this.elementsToErase.has(c.id)&&HM(o,c,this.segmentsCache,this.geometricShapesCache,s,this.app)){const d=c.groupIds.at(-1);if(!this.groupsToErase.has(d)){const f=zt(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.add(h.id);this.groupsToErase.add(d)}if(br(c)){const f=jo(c);f&&this.elementsToErase.add(f)}Ht(c)&&this.elementsToErase.add(c.containerId),this.elementsToErase.add(c.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear(),this.segmentsCache.clear()}}const HM=(e,t,n,i,r,s)=>{let o=i.get(t.id);o||(o=Ds(t,r),i.set(t.id,o));const a=e[e.length-1][1];if(h6(t)&&P0(a,o))return!0;let l=n.get(t.id);return l||(l=_6(t,r),n.set(t.id,l)),e.some(c=>l==null?void 0:l.some(u=>td(c,u,s.getElementHitThreshold())!==null))},a7e=()=>P("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(hr,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(hr,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(hr,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(hr,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>P("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),l7e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=O.useRef(null);O.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{var m,p,b;if(h.key===z.TAB){const E=oE(d),{activeElement:y}=document,v=E.findIndex(w=>w===y);y===d?(h.shiftKey?(m=E[E.length-1])==null||m.focus():E[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):v===0&&h.shiftKey?((p=E[E.length-1])==null||p.focus(),h.preventDefault(),h.stopImmediatePropagation()):v===E.length-1&&!h.shiftKey&&((b=E[0])==null||b.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=O.useRef(null);return O.useLayoutEffect(()=>{var d,f;if(r&&c.current&&n!=null&&t!=null){const h=c.current,{width:m,height:p}=h.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},m>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+m-s>a?h.style.left=`${a-m-10}px`:h.style.left=`${t}px`,p>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+p-o>l?h.style.top=`${l-p}px`:h.style.top=`${n}px`}},[n,t,r,a,l,s,o]),O.useEffect(()=>{if(i){const d=f=>{var h;(h=c.current)!=null&&h.contains(f.target)||jn.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Gn="separator",c7e=ae.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=tp(),o=G5(),a=t.reduce((l,c)=>(c&&(c===Gn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(l7e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===Gn)return!a[c-1]||a[c-1]===Gn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=k(l.label(o,s,e.app)):d=k(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:P("button",{type:"button",className:be("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?Hi(u):""})]})},c)})})})}),u7e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:P("div",{className:"follow-mode__badge",children:[P("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:eg})]})}),SG=({delay:e,theme:t})=>{const[n,i]=O.useState(!!e);return O.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:P("div",{className:be("LoadingMessage",{"LoadingMessage--dark":t===xe.DARK}),children:[g("div",{children:g(tl,{})}),g("div",{className:"LoadingMessage-text",children:k("labels.loadingScene")})]})},d7e="medium",VM={CHECKED:r9,UNCHECKED:l5},IG=e=>P("label",{className:be("ToolIcon ToolIcon__lock",`ToolIcon_size_${d7e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?VM.CHECKED:VM.UNCHECKED})]}),xG=({children:e,side:t,className:n})=>g("div",{className:be("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),CG=e=>g(Ze,{className:be("Shape",{fillable:!1}),type:"radio",icon:Fz,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:z.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":z.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),f7e=({appState:e,isMobile:t,device:n,app:i})=>{var u,d;const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===gs.name&&e.openSidebar.tab===Lu&&((d=e.searchMatches)!=null&&d.length))return k("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(To(e))return k("hints.eraserRevert");if(r.type==="arrow"||r.type==="line")return l?k("hints.linearElementMulti"):r.type==="arrow"?k("hints.arrowTool",{arrowShortcut:Q("A")}):k("hints.linearElement");if(r.type==="freedraw")return k("hints.freeDraw");if(r.type==="text")return k("hints.text");if(r.type==="embeddable")return k("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return k("hints.placeImage");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const f=c[0];return ke(f)&&f.points.length===2?k("hints.lockAngle"):ot(f)?k("hints.resizeImage"):k("hints.resize")}if(o&&a==="mouse")return k("hints.rotate");if(c.length===1&&fe(c[0]))return k("hints.text_selected");if(e.editingTextElement)return k("hints.text_editing");if(e.croppingElementId)return k("hints.leaveCropEditor");if(c.length===1&&ot(c[0]))return k("hints.enterCropEditor");if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return[k("hints.deepBoxSelect")];if(im(i)&&e.selectedElementsAreBeingDragged)return k("hints.disableSnapping");if(!c.length&&!t)return[k("hints.canvasPanning")];if(c.length===1){if(ke(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?k("hints.lineEditor_pointSelected"):k("hints.lineEditor_nothingSelected"):k("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Ou(c[0]))return Yb(c[0])?ale(c[0],i.scene.getNonDeletedElementsMap())?[k("hints.bindTextToElement"),k("hints.createFlowchart")]:[k("hints.bindTextToElement"),k("hints.createFlowchart")]:k("hints.bindTextToElement")}}return null},AG=({appState:e,isMobile:t,device:n,app:i})=>{const r=f7e({appState:e,isMobile:t,device:n,app:i});if(!r)return null;const s=Array.isArray(r)?r.map(o=>Q(o).replace(/\. ?$/,"")).join(". "):Q(r);return g("div",{className:"HintViewer",children:g("span",{children:s})})},h7e="medium",RG=e=>e.penDetected?P("label",{className:be("ToolIcon ToolIcon__penMode",`ToolIcon_size_${h7e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:lce})]}):null,sm=({heading:e,children:t,...n})=>{const{id:i}=ta(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:k(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):P(pe,{children:[r,t]})})},g7e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:r,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{var v,w;const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:b}=rr(),E=()=>P(xG,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(sm,{heading:"shapes",children:S=>{var R;return g(us.Col,{gap:4,align:"center",children:P(us.Row,{gap:1,className:"App-toolbar-container",children:[P(Ws,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[S,g(us.Row,{gap:1,children:g(hG,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),P("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((R=e.openDialog)==null?void 0:R.name)!=="elementLinkSelector"&&g(b.Out,{}),g(RG,{checked:e.penMode,onChange:()=>o(null),title:k("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(IG,{checked:e.activeTool.locked,onChange:r,title:k("toolBar.lock"),isMobile:!0}),g(CG,{checked:_h(e),onChange:()=>s(),title:k("toolBar.hand"),isMobile:!0})]})]})})}}),g(AG,{appState:e,isMobile:!0,device:u,app:h})]}),y=()=>{var S;return e.viewModeEnabled||((S=e.openDialog)==null?void 0:S.name)==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):P("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),P("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return P(pe,{children:[c(),!e.viewModeEnabled&&((v=e.openDialog)==null?void 0:v.name)!=="elementLinkSelector"&&E(),g("div",{className:"App-bottom-bar",style:{marginBottom:Yl+Io*2,marginLeft:Yl+Io*2,marginRight:Yl+Io*2},children:P(Ws,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((w=e.openDialog)==null?void 0:w.name)!=="elementLinkSelector"&&Y9(e,t)?g(sm,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(fG,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,P("footer",{className:"App-toolbar",children:[y(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(S=>({...z0(t,S)}))},children:k("buttons.scrollBackToContent")})]})]})})]})},$M=e=>{const t=O.useRef(null),[n,i]=O.useState(null);return O.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=abe(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>{var a;s=await z9(r,{exportBackground:!1,viewBackgroundColor:li.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},m7e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=fo(),r=ae.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),ut("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(Gr,{size:"small",onCloseRequest:r,title:k("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:P("div",{className:"container",children:[g($M,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g($M,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},p7e=4,U7e=8,b7e=({shouldWrap:e,children:t,username:n})=>e?g(cd,{label:n||"Unknown user",children:t}):g(pe,{children:t}),E7=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(b7e,{username:t.username,shouldWrap:r,children:a},n)},y7e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],MG=ae.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=vr(),s=new Map;n.forEach((p,b)=>{const E=p.id||b;s.set(E,{...p,socketId:b})});const o=Array.from(s.values()).filter(p=>{var b;return(b=p.username)==null?void 0:b.trim()}),[a,l]=ae.useState(""),c=o.filter(p=>{var b;return(b=p.username)==null?void 0:b.toLowerCase().includes(a)}),u=ae.useRef(null);O.useLayoutEffect(()=>{if(u.current){const p=E=>{const y=Math.max(1,Math.min(8,Math.floor(E/38)));f(y)};if(p(u.current.clientWidth),!Q3)return;const b=new ResizeObserver(E=>{for(const y of E){const{width:v}=y.contentRect;p(v)}});return b.observe(u.current),()=>{b.disconnect()}}},[]);const[d,f]=ae.useState(p7e),m=o.slice(0,d-1).map(p=>E7({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:be("UserList UserList_mobile",e),children:o.map(p=>E7({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:P("div",{className:be("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&P(U5,{children:[P(b5,{className:"UserList__more",children:["+",o.length-d+1]}),g(T9,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:P(Ws,{padding:2,children:[o.length>=U7e&&g(nV,{placeholder:k("quickSearch.placeholder"),onChange:l}),g(iV,{className:"dropdown-menu UserList__collaborators",placeholder:k("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:k("userList.hint.text")}),c.map(p=>E7({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g(ZH,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!vi(r,s,y7e))return!1}return!0}),E7e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${k("helpDialog.title")} — ?`,"aria-label":k("helpDialog.title"),children:s9}),kG=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=rr(),o=Jn(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return P("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:be("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(us.Col,{gap:2,children:P(sm,{heading:"canvasActions",children:[g(Vye,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g($ye,{renderAction:t.renderAction,className:be("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(Xye,{renderAction:t.renderAction,className:be("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:be("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:P("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(E7e,{onClick:()=>t.executeAction(W9)})]})}),g(Gye,{actionManager:t,showExitZenModeBtn:n})]})};kG.displayName="Footer";const LG=ae.createContext({}),DG=({children:e,className:t})=>{const n=Jn(),i=O.useContext(LG),r=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return P("div",{className:be("sidebar__header",t),"data-testid":"sidebar-header",children:[e,P("div",{className:"sidebar__header__buttons",children:[r&&g(cd,{label:k("labels.sidebarLock"),children:g(Ch,{onSelect:()=>{var s;return(s=i.onDock)==null?void 0:s.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":k("labels.sidebarLock"),children:Qle})}),g(Ch,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":k("buttons.close"),children:eg})]})]})};DG.displayName="SidebarHeader";function v7e(e){const t=e+"CollectionProvider",[n,i]=Ym(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,b=ae.useRef(null),E=ae.useRef(new Map).current;return g(r,{scope:m,itemMap:E,collectionRef:b,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=ae.forwardRef((h,m)=>{const{scope:p,children:b}=h,E=s(a,p),y=oo(m,E.collectionRef);return g(V0,{ref:y,children:b})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=ae.forwardRef((h,m)=>{const{scope:p,children:b,...E}=h,y=ae.useRef(null),v=oo(m,y),w=s(c,p);return ae.useEffect(()=>(w.itemMap.set(y,{ref:y,...E}),()=>void w.itemMap.delete(y))),g(V0,{[u]:"",ref:v,children:b})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return ae.useCallback(()=>{const b=m.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,S)=>E.indexOf(w.ref.current)-E.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var w7e=O.createContext(void 0);function OG(e){const t=O.useContext(w7e);return e||t||"ltr"}var v7="rovingFocusGroup.onEntryFocus",_7e={bubbles:!1,cancelable:!0},$5="RovingFocusGroup",[m4,NG,T7e]=v7e($5),[S7e,PG]=Ym($5,[T7e]),[I7e,x7e]=S7e($5),FG=O.forwardRef((e,t)=>g(m4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(m4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(C7e,{...e,ref:t})})}));FG.displayName=$5;var C7e=O.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=O.useRef(null),h=oo(t,f),m=OG(s),[p=null,b]=v9({prop:o,defaultProp:a,onChange:l}),[E,y]=O.useState(!1),v=nl(c),w=NG(n),S=O.useRef(!1),[R,_]=O.useState(0);return O.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(v7,v),()=>T.removeEventListener(v7,v)},[v]),g(I7e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:O.useCallback(T=>b(T),[b]),onItemShiftTab:O.useCallback(()=>y(!0),[]),onFocusableItemAdd:O.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:O.useCallback(()=>_(T=>T-1),[]),children:g(ir.div,{tabIndex:E||R===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:_i(e.onMouseDown,()=>{S.current=!0}),onFocus:_i(e.onFocus,T=>{const x=!S.current;if(T.target===T.currentTarget&&x&&!E){const I=new CustomEvent(v7,_7e);if(T.currentTarget.dispatchEvent(I),!I.defaultPrevented){const M=w().filter(V=>V.focusable),D=M.find(V=>V.active),L=M.find(V=>V.id===p),H=[D,L,...M].filter(Boolean).map(V=>V.ref.current);HG(H,u)}}S.current=!1}),onBlur:_i(e.onBlur,()=>y(!1))})})}),BG="RovingFocusGroupItem",zG=O.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=d9(),l=s||a,c=x7e(BG,n),u=c.currentTabStopId===l,d=NG(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return O.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(m4.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(ir.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:_i(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:_i(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:_i(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=M7e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let E=d().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")E.reverse();else if(p==="prev"||p==="next"){p==="prev"&&E.reverse();const y=E.indexOf(m.currentTarget);E=c.loop?k7e(E,y+1):E.slice(y+1)}setTimeout(()=>HG(E))}})})})});zG.displayName=BG;var A7e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R7e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function M7e(e,t,n){const i=R7e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return A7e[i]}function HG(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function k7e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var L7e=FG,D7e=zG,t_="Tabs",[O7e,SIe]=Ym(t_,[PG]),VG=PG(),[N7e,n_]=O7e(t_),$G=O.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=OG(a),[d,f]=v9({prop:i,onChange:r,defaultProp:s});return g(N7e,{scope:n,baseId:d9(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(ir.div,{dir:u,"data-orientation":o,...c,ref:t})})});$G.displayName=t_;var GG="TabsList",XG=O.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=n_(GG,n),o=VG(n);return g(L7e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(ir.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});XG.displayName=GG;var jG="TabsTrigger",YG=O.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=n_(jG,n),a=VG(n),l=ZG(o.baseId,i),c=qG(o.baseId,i),u=i===o.value;return g(D7e,{asChild:!0,...a,focusable:!r,active:u,children:g(ir.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:_i(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:_i(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:_i(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});YG.displayName=jG;var WG="TabsContent",KG=O.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=n_(WG,n),l=ZG(a.baseId,i),c=qG(a.baseId,i),u=i===a.value,d=O.useRef(u);return O.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(m5,{present:r||u,children:({present:f})=>g(ir.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});KG.displayName=WG;function ZG(e,t){return`${e}-trigger-${t}`}function qG(e,t){return`${e}-content-${t}`}var QG=$G,JG=XG,eX=YG,tX=KG;const nX=({children:e,tab:t,onSelect:n,...i})=>g(eX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});nX.displayName="SidebarTabTrigger";const iX=({children:e,...t})=>g(JG,{className:"sidebar-triggers",...t,children:e});iX.displayName="SidebarTabTriggers";const rX=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{var u;const l=Vn(),c=Si();return P("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),s==null||s(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),P("div",{className:be("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};rX.displayName="SidebarTrigger";const sX=({children:e,...t})=>{const n=Si(),i=Vn();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g(QG,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};sX.displayName="SidebarTabs";const oX=({tab:e,children:t,...n})=>g(tX,{...n,value:e,"data-testid":e,children:t});oX.displayName="SidebarTab";const i_=en(!1),aX=O.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=Vn(),l=o5(i_);O.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=O.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=HU(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=O.useRef(null);O.useImperativeHandle(o,()=>u.current);const d=Jn(),f=O.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return S9(u,O.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),O.useEffect(()=>{const h=m=>{m.key===z.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(te.KEYDOWN,h),()=>{document.removeEventListener(te.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(Ws,{...s,className:be("sidebar",{"sidebar--docked":i},r),ref:u,children:g(LG.Provider,{value:c.current,children:t})})});aX.displayName="SidebarInner";const _o=Object.assign(O.forwardRef((e,t)=>{var l;const n=Si(),{onStateChange:i}=e,r=O.useRef(n.openSidebar);O.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=r==null?void 0:r.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=r==null?void 0:r.current)==null?void 0:d.name)!==e.name||((f=r.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==r.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=O.useState(!1);return O.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((l=n.openSidebar)==null?void 0:l.name)===e.name?O.createElement(aX,{...e,ref:t,key:e.name}):null}),{Header:DG,TabTriggers:iX,TabTrigger:nX,Tabs:sX,Tab:oX,Trigger:rX});_o.displayName="Sidebar";const Jm=(e,t)=>{const n=en(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=rr(),[,o]=s(n),a=O.useRef({preferHost:!1,counter:0});return O.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},lX=en({active:!1});async function p4({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{Vs.set(lX,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const cX=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>P("div",{className:be("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},uX=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=Jn();return P(pe,{children:[P("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(cX,{name:s,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};uX.displayName="DropdownMenuItemContentRadio";const dX=()=>{const{t:e}=wn(),t=vr(),n=G5();return t.isActionEnabled(o4)?g(Er,{icon:a9,onSelect:async()=>{(!n.length||await p4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(hr,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(o4)},"data-testid":"load-button",shortcut:Hi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};dX.displayName="LoadScene";const fX=()=>{const{t:e}=wn(),t=vr();return t.isActionEnabled($6)?g(Er,{shortcut:Hi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction($6),icon:gce,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};fX.displayName="SaveToActiveFile";const hX=()=>{const e=Vn(),{t}=wn();return g(Er,{icon:Mz,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Hi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};hX.displayName="SaveAsImage";const gX=e=>{const t=Vn(),{t:n}=wn();return g(Er,{icon:Hz,"data-testid":"command-palette-button",onSelect:()=>{ut("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Hi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};gX.displayName="CommandPalette";const mX=e=>{const{t}=wn(),n=vr();return g(Er,{icon:od,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(mG)},shortcut:Hi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};mX.displayName="SearchMenu";const pX=()=>{const{t:e}=wn(),t=vr();return g(Er,{"data-testid":"help-menu-item",icon:s9,onSelect:()=>t.executeAction(W9),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};pX.displayName="Help";const UX=()=>{const{t:e}=wn(),t=o5(H5);return vr().isActionEnabled(Q1)?g(Er,{icon:sd,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};UX.displayName="ClearCanvas";const bX=e=>{const{t}=wn(),n=Si(),i=vr(),r=Hi("toggleTheme");return i.isActionEnabled(O6)?e!=null&&e.allowSystemTheme?g(uX,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:xe.LIGHT,label:BE,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:xe.DARK,label:FE,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:Mue,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(Er,{onSelect:s=>{if(s.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===xe.DARK?xe.LIGHT:xe.DARK);else return i.executeAction(O6)},icon:n.theme===xe.DARK?BE:FE,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===xe.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===xe.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};bX.displayName="ToggleTheme";const yX=()=>{const{t:e}=wn(),t=Si(),n=vr(),i=ep();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:P("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};yX.displayName="ChangeCanvasBackground";const EX=()=>{const{t:e}=wn(),t=Vn();return g(Er,{icon:u5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};EX.displayName="Export";const vX=()=>{const{t:e}=wn();return P(pe,{children:[g(r0,{icon:o9,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(r0,{icon:Rz,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(r0,{icon:Az,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};vX.displayName="Socials";const wX=({onSelect:e,isCollaborating:t})=>{const{t:n}=wn();return g(Er,{"data-testid":"collab-button",icon:l9,className:be({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};wX.displayName="LiveCollaborationTrigger";const P7e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:yX,ClearCanvas:UX,CommandPalette:gX,Export:EX,Help:pX,LiveCollaborationTrigger:wX,LoadScene:dX,SaveAsImage:hX,SaveToActiveFile:fX,SearchMenu:mX,Socials:vX,ToggleTheme:bX},Symbol.toStringTag,{value:"Module"})),Zt=Object.assign(Jm("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=rr(),i=Jn(),r=Si(),s=Vn(),o=i.editor.isMobile?void 0:()=>s({openMenu:null});return g(n.In,{children:P(Je,{open:r.openMenu==="canvas",children:[g(Je.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:Cz}),P(Je.Content,{onClickOutside:o,onSelect:Xb(t,()=>{s({openMenu:null})}),children:[e,i.editor.isMobile&&r.collaborators.size>0&&P("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:k("labels.collaborators")}),g(MG,{mobile:!0,collaborators:r.collaborators,userToFollow:((a=r.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Je.Trigger,Item:Je.Item,ItemLink:Je.ItemLink,ItemCustom:Je.ItemCustom,Group:Je.Group,Separator:Je.Separator,DefaultItems:P7e}),qs=O.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=O.useState(!1),h=async p=>{const b=n==null?void 0:n(p);if(Nm(b)){const E=window.setTimeout(()=>{f(!0)},50);try{await b}catch(y){if(y instanceof Th)console.warn(y);else throw y}finally{clearTimeout(E),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:be("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:P("div",{className:"ExcButton__contents",children:[m==="loading"?g(tl,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:fue}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),r_=({title:e,children:t,actionLabel:n,onClick:i})=>P("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(qs,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),F7e=()=>{const{t:e}=wn(),t=vr(),n=Vn();return g(r_,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(R$,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},B7e=()=>{const{t:e}=wn(),t=vr();return g(r_,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(M$,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},GM=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:F7e,SaveToDisk:B7e}),Tu=Object.assign(Jm("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=rr(),[n,i]=mn(lX);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(Gr,{onCloseRequest:r,title:!1,size:916,children:P("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),P("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:hue}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(qs,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(GM,{children:e})]})})})}),{Actions:GM,Action:r_});var z7e="Expected a function",XM=NaN,H7e="[object Symbol]",V7e=/^\s+|\s+$/g,$7e=/^[-+]0x[0-9a-f]+$/i,G7e=/^0b[01]+$/i,X7e=/^0o[0-7]+$/i,j7e=parseInt,Y7e=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,W7e=typeof self=="object"&&self&&self.Object===Object&&self,K7e=Y7e||W7e||Function("return this")(),Z7e=Object.prototype,q7e=Z7e.toString,Q7e=Math.max,J7e=Math.min,w7=function(){return K7e.Date.now()};function e3e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(z7e);t=jM(t)||0,U4(n)&&(u=!!n.leading,d="maxWait"in n,s=d?Q7e(jM(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(R){var _=i,T=r;return i=r=void 0,c=R,o=e.apply(T,_),o}function m(R){return c=R,a=setTimeout(E,t),u?h(R):o}function p(R){var _=R-l,T=R-c,x=t-_;return d?J7e(x,s-T):x}function b(R){var _=R-l,T=R-c;return l===void 0||_>=t||_<0||d&&T>=s}function E(){var R=w7();if(b(R))return y(R);a=setTimeout(E,p(R))}function y(R){return a=void 0,f&&i?h(R):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:y(w7())}function S(){var R=w7(),_=b(R);if(i=arguments,r=this,l=R,_){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=w,S}function U4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function t3e(e){return!!e&&typeof e=="object"}function n3e(e){return typeof e=="symbol"||t3e(e)&&q7e.call(e)==H7e}function jM(e){if(typeof e=="number")return e;if(n3e(e))return XM;if(U4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=U4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(V7e,"");var n=G7e.test(e);return n||X7e.test(e)?j7e(e.slice(2),n?2:8):$7e.test(e)?XM:+e}var i3e=e3e;const r3e=cl(i3e),s3e=en(""),_X=en(null),o3e=350,a3e=()=>{const e=fo(),t=Vn(),n=O.useRef(null),[i,r]=mn(s3e),s=i.trim(),[o,a]=O.useState(!1),[l,c]=O.useState({nonce:null,items:[]}),u=O.useRef(null),d=O.useRef(void 0),[f,h]=mn(_X),m=e.scene.getNonDeletedElementsMap();O.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,YM(s,e,(v,w)=>{c({nonce:Xo(),items:v}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:v.map(S=>({id:S.textElement.id,focus:!1,matchedLines:S.matchedLines}))})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(v=>v===null?0:(v+1)%l.items.length)},b=()=>{l.items.length>0&&h(v=>v===null?0:v-1<0?l.items.length-1:v-1)};O.useEffect(()=>{t(v=>({searchMatches:v.searchMatches.map((w,S)=>S===f?{...w,focus:!0}:{...w,focus:!1})}))},[f,t]),O.useEffect(()=>{var v,w,S,R;if(l.items.length>0&&f!==null){const _=l.items[f];if(_){const T=e.state.zoom.value,x=Vr({text:_.searchQuery,x:_.textElement.x+(((v=_.matchedLines[0])==null?void 0:v.offsetX)??0),y:_.textElement.y+(((w=_.matchedLines[0])==null?void 0:w.offsetY)??0),width:(S=_.matchedLines[0])==null?void 0:S.width,height:(R=_.matchedLines[0])==null?void 0:R.height,fontSize:_.textElement.fontSize,fontFamily:_.textElement.fontFamily}),I=14,M=_.textElement.fontSize,D=M*T<I;if(!YU([x],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||D){let L;D?M>=I?L={fitToContent:!0}:L={fitToViewport:!0,maxZoom:Pa(I/M,1)}:L={fitToContent:!0},e.scrollToContent(x,{animate:!0,duration:300,...L,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),O.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);const E=y5({goToNextItem:p,goToPreviousItem:b,searchMatches:l});O.useEffect(()=>{const v=w=>{var S,R,_;if(w.key===z.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){w.preventDefault(),w.stopPropagation(),t({openSidebar:null});return}w[z.CTRL_OR_CMD]&&w.key===z.F&&(w.preventDefault(),w.stopPropagation(),(S=n.current)!=null&&S.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(R=n.current)==null||R.focus(),(_=n.current)==null||_.select())),w.target instanceof HTMLElement&&w.target.closest(".layer-ui__search")&&E.searchMatches.items.length&&(w.key===z.ENTER&&(w.stopPropagation(),E.goToNextItem()),w.key===z.ARROW_UP?(w.stopPropagation(),E.goToPreviousItem()):w.key===z.ARROW_DOWN&&(w.stopPropagation(),E.goToNextItem()))};return rn(window,te.KEYDOWN,v,{capture:!0,passive:!1})},[t,E,e]);const y=`${l.items.length} ${l.items.length===1?k("search.singleResult"):k("search.multipleResults")}`;return P("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Ah,{className:dh.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:k("search.placeholder"),icon:od,onChange:v=>{r(v),a(!0);const w=v.trim();YM(w,e,(S,R)=>{c({nonce:Xo(),items:S}),h(R),u.current=w,d.current=e.scene.getSceneNonce(),t({searchMatches:S.map(_=>({id:_.textElement.id,focus:!1,matchedLines:_.matchedLines}))}),a(!1)})},selectOnRender:!0})}),P("div",{className:"layer-ui__search-count",children:[l.items.length>0&&P(pe,{children:[f!==null&&f>-1?P("div",{children:[f+1," / ",y]}):g("div",{children:y}),P("div",{className:"result-nav",children:[g(Ch,{onSelect:()=>{p()},className:"result-nav-btn",children:Gz}),g(Ch,{onSelect:()=>{b()},className:"result-nav-btn",children:Fue})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:k("search.noMatch")})]}),g(d3e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},l3e=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:be("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(O.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},c3e=e=>g("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>g(l3e,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),u3e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,d3e=O.memo(c3e,u3e),f3e=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},h3e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},g3e=(e,t,n)=>{const r=h3e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Vi(h,Ct(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const w=Vi(d.line,Ct(e),e.lineHeight),S=e.textAlign==="center"?(e.width-w.width)/2:e.width-w.width;p.width+=S}const{width:b,height:E}=Vi(m,Ct(e),e.lineHeight),y=p.width,v=d.lineNumber*p.height;u.push({offsetX:y,offsetY:v,width:b,height:E}),l+=f}}return u},m3e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),YM=r3e((e,t,n)=>{if(!e||e===""){n([],null);return}const r=t.scene.getNonDeletedElements().filter(c=>fe(c));r.sort((c,u)=>c.y-u.y);const s=[],o=new RegExp(m3e(e),"gi");for(const c of r){let u=null;const d=c.originalText;for(;(u=o.exec(d))!==null;){const f=f3e(d,u.index,e),h=g3e(c,e,u.index);h.length>0&&s.push({textElement:c,searchQuery:e,preview:f,index:u.index,matchedLines:h})}}const a=new Set(t.visibleElements.map(c=>c.id)),l=s.findIndex(c=>a.has(c.textElement.id))??null;n(s,l)},o3e),TX=Jm("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=rr();return g(t.In,{children:g(_o.Trigger,{...e,className:"default-sidebar-trigger",name:gs.name})})});TX.displayName="DefaultSidebarTrigger";const SX=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=rr();return g(t.In,{children:e})};SX.displayName="DefaultTabTriggers";const WM=Object.assign(Jm("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{var c;const s=Si(),o=Vn(),{DefaultSidebarTabTriggersTunnel:a}=rr(),l=((c=s.openSidebar)==null?void 0:c.tab)===Lu;return O.createElement(_o,{...r,name:"default",key:"default",className:be("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:Xb(n,u=>{o({defaultSidebarDockedPreference:u})})},P(_o.Tabs,{children:[g(_o.Header,{children:P(_o.TabTriggers,{children:[g(_o.TabTrigger,{tab:Lu,children:od}),g(_o.TabTrigger,{tab:e6,children:i9}),g(a.Out,{})]})}),g(_o.Tab,{tab:e6,children:g(cye,{})}),g(_o.Tab,{tab:Lu,children:g(a3e,{})}),e]}))}),{Trigger:TX,TabTriggers:SX}),IX=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=O.useRef(null),s=O.useRef(i);return s.current=i,O.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{var c;l[z.CTRL_OR_CMD]&&l.key===z.ENTER&&(l.preventDefault(),(c=s.current)==null||c.call(s))};return o.addEventListener(te.KEYDOWN,a),()=>{o.removeEventListener(te.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:r})},p3e=({error:e})=>P("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),xX=({error:e,canvasRef:t,loaded:n})=>P("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(p3e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(tl,{size:"2rem"})]}),K6=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>P("div",{className:"ttd-dialog-panel",children:[P("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s==null?void 0:s()]}),t,P("div",{className:be("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[P(Ch,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[P("div",{className:be({invisible:r}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),r&&g(tl,{})]}),!i&&!r&&(o==null?void 0:o()),a==null?void 0:a()]})]}),CX=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),AX=()=>P("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("Enter")})]}),U3e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},RX=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){U3e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:h4(c,{regenerateIds:!0}),files:u};const d=await B5({elements:r.current.elements,files:r.current.files,exportPadding:Kh,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await em(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},s_=e=>{Bu.set(z1.MERMAID_TO_EXCALIDRAW,e)},MX=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&s_(n))},b3e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,KM=ja(s_,300),y3e=({mermaidToExcalidrawLib:e})=>{const[t,n]=O.useState(()=>Bu.get(z1.MERMAID_TO_EXCALIDRAW)||b3e),i=O.useDeferredValue(t.trim()),[r,s]=O.useState(null),o=O.useRef(null),a=O.useRef({elements:[],files:null}),l=fo();O.useEffect(()=>{RX({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),KM(i)},[i,e]),O.useEffect(()=>()=>{KM.flush()},[]);const c=()=>{MX({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return P(pe,{children:[g("div",{className:"ttd-dialog-desc",children:g(hr,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),P(CX,{children:[g(K6,{label:k("mermaid.syntax"),children:g(IX,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(K6,{label:k("mermaid.preview"),panelAction:{action:()=>{c()},label:k("mermaid.button"),icon:QU},renderSubmitShortcut:()=>g(AX,{}),children:g(xX,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},kX=e=>{const t=Vn(),n=O.useRef(null),i=O.useRef(0);return g(QG,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{var o;if(!r)return;const s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){const a=s.offsetHeight||0;a>i.current&&(i.current=a,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&HP(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};kX.displayName="TTDDialogTabs";const LX=({children:e,...t})=>g(JG,{className:"ttd-dialog-triggers",...t,children:e});LX.displayName="TTDDialogTabTriggers";const b4=({children:e,tab:t,onSelect:n,...i})=>g(eX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});b4.displayName="TTDDialogTabTrigger";const y4=({tab:e,children:t,...n})=>g(tX,{...n,value:e,children:t});y4.displayName="TTDDialogTab";const _7=3,qd=1e3,E3e=en(null),v3e=en(null),DX=e=>{var n;const t=Si();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(w3e,{...e,tab:t.openDialog.tab})},w3e=Jm("TTDDialogBase",({tab:e,...t})=>{const n=fo(),i=Vn(),r=O.useRef(null),[s,o]=mn(v3e),[a,l]=O.useState((s==null?void 0:s.prompt)??""),c=a.trim(),u=R=>{l(R.target.value),o(_=>({generatedResponse:(_==null?void 0:_.generatedResponse)??null,prompt:R.target.value}))},[d,f]=O.useState(!1),[h,m]=mn(E3e),p=async()=>{if(c.length>qd||c.length<_7||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<_7&&S(new Error(`Prompt is too short (min ${_7} characters)`)),c.length>qd&&S(new Error(`Prompt is too long (max ${qd} characters)`));return}try{f(!0),ut("ai","generate","ttd");const{generatedResponse:R,error:_,rateLimit:T,rateLimitRemaining:x}=await t.onTextSubmit(c);if(typeof R=="string"&&o(I=>({generatedResponse:R,prompt:(I==null?void 0:I.prompt)??null})),V1(T)&&V1(x)&&m({rateLimit:T,rateLimitRemaining:x}),_){S(_);return}if(!R){S(new Error("Generation failed"));return}try{await RX({canvasRef:r,data:v,mermaidToExcalidrawLib:E,setError:S,mermaidDefinition:R}),ut("ai","mermaid parse success","ttd")}catch(I){console.info(`%cTTD mermaid render errror: ${I.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${I.message}`,"color: yellow"),ut("ai","mermaid parse failed","ttd"),S(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(R){let _=R.message;(!_||_==="Failed to fetch")&&(_="Request failed"),S(new Error(_))}finally{f(!1)}},b=O.useRef(p);b.current=p;const[E,y]=O.useState({loaded:!1,api:ye(()=>import("./index-OL5uQT7j.js").then(R=>R.b6),__vite__mapDeps([]),import.meta.url)});O.useEffect(()=>{(async()=>{await E.api,y(_=>({..._,loaded:!0}))})()},[E.api]);const v=O.useRef({elements:[],files:null}),[w,S]=O.useState(null);return g(Gr,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:P(kX,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:k("mermaid.title")}):P(LX,{children:[g(b4,{tab:"text-to-diagram",children:P("div",{style:{display:"flex",alignItems:"center"},children:[k("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(b4,{tab:"mermaid",children:"Mermaid"})]}),g(y4,{className:"ttd-dialog-content",tab:"mermaid",children:g(y3e,{mermaidToExcalidrawLib:E})}),!("__fallback"in t)&&P(y4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),P(CX,{children:[g(K6,{label:k("labels.prompt"),panelAction:{action:p,label:"Generate",icon:QU},onTextSubmitInProgess:d,panelActionDisabled:c.length>qd||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?P("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(AX,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return P("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(s_(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(w5,{icon:QU})]});const R=c.length/qd;return R>.8?P("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:R>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",qd]}):null},children:g(IX,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{b.current()}})}),g(K6,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),MX({app:n,data:v})},label:"Insert",icon:QU},children:g(xX,{canvasRef:r,error:w,loaded:E.loaded})})]})]})]})})}),_3e=.01,sl=(e,t)=>!(t==="height"&&fe(e)||t==="width"&&fe(e)||t==="angle"&&Ie(e)),Pi=(e,t)=>{const n=e+t/2;return n-n%t},Z6=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),om=(e,t,n,i,r,s,o,a=!0)=>{const l=i.get(n.id);if(!l)return;const[c,u]=[n.x+n.width/2,n.y+n.height/2],[d,f]=q(A(n.x,n.y),A(c,u),n.angle),h=e-d,m=t-f,[p,b]=q(A(e,t),A(c+h,u+m),-n.angle);ee(l,{x:p,y:b},a),E4(l,i,r,s);const E=ze(n,o);if(E){const y=i.get(E.id);y&&ee(y,{x:E.x+h,y:E.y+m},a)}},o_=(e,t)=>{const i=Nu(t).map(r=>zt(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!yh(r)).forEach(r=>{i.push({[r.id]:!0})}),i},E4=(e,t,n,i,r)=>{ke(e)?m6([e],t,n,i,!0,[],r==null?void 0:r.zoom):mr(e,t,r)},hl=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1})=>{const d=fo(),f=O.useRef(null),h=O.useRef(null),[m,p]=O.useState(i.toString()),b=O.useRef(null);b.current||(b.current={originalAppState:Fa(c),originalElements:r,lastUpdatedValue:m,updatePending:!1}),O.useEffect(()=>{const v=i.toString();p(v),b.current.lastUpdatedValue=v},[i]);const E=(v,w,S)=>{if(!b.current.updatePending)return!1;b.current.updatePending=!1;const R=Number(v);if(isNaN(R)){p(i.toString());return}const _=Number(R.toFixed(2)),T=Number(i);(isNaN(T)||Math.abs(_-T)>=_3e)&&(b.current.lastUpdatedValue=v,n({accumulatedChange:0,instantChange:0,originalElements:w,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:_,property:a,originalAppState:S,setInputValue:x=>p(String(x))}),d.syncActionResult({captureUpdate:K.IMMEDIATELY}))},y=O.useRef({});return y.current.handleInputValue=E,O.useEffect(()=>{const v=f.current,w=y.current;return()=>{var R;const S=v==null?void 0:v.value;S&&((R=w.handleInputValue)==null||R.call(w,S,b.current.originalElements,b.current.originalAppState)),window.removeEventListener(te.POINTER_MOVE,w.onPointerMove,!1),window.removeEventListener(te.POINTER_UP,w.onPointerUp,!1)}},[s]),s?P("div",{className:be("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:h,onPointerDown:v=>{if(f.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(f.current.value);let w=null,S=d.scene.getNonDeletedElements().reduce((D,L)=>(D.set(L.id,Sc(L)),D),new Map),R=r.map(D=>S.get(D.id));const _=Fa(c);let T=0,x=0;const I=D=>{if(w&&S!==null&&R!==null){const L=D.clientX-w.x;L!==0&&(x+=L,Math.abs(x)>=u&&(x=Math.sign(x)*Math.floor(Math.abs(x)/u),T+=x,n({accumulatedChange:T,instantChange:x,originalElements:R,originalElementsMap:S,shouldKeepAspectRatio:o,shouldChangeByStepSize:D.shiftKey,property:a,scene:l,originalAppState:_,setInputValue:G=>p(String(G))}),x=0))}w={x:D.clientX,y:D.clientY}},M=()=>{window.removeEventListener(te.POINTER_MOVE,I,!1),d.syncActionResult({captureUpdate:K.IMMEDIATELY}),w=null,T=0,x=0,R=null,S=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(te.POINTER_UP,M,!1)};y.current.onPointerMove=I,y.current.onPointerUp=M,window.addEventListener(te.POINTER_MOVE,I,!1),window.addEventListener(te.POINTER_UP,M,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?g(w5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:v=>{if(s){const w=v.target;w instanceof HTMLInputElement&&v.key===z.ENTER&&(E(w.value,r,c),d.focusContainer())}},ref:f,value:m,onChange:v=>{b.current.updatePending=!0,p(v.target.value)},onFocus:v=>{v.target.select(),b.current.originalElements=r,b.current.originalAppState=Fa(c)},onBlur:v=>{m?s&&E(v.target.value,b.current.originalElements,b.current.originalAppState):p(i.toString())},disabled:!s})]}):null},T3e=15,S3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),a=t[0];if(a&&!me(a)){const l=s.get(a.id);if(!l)return;if(i!==void 0){const m=Du(i);ee(l,{angle:m}),E4(l,s,o,r);const p=ze(l,s);p&&!Le(l)&&ee(p,{angle:m});return}const c=Math.round($b(a.angle)*100)/100,u=Math.round(e);let d=(c+u)%360;n&&(d=Pi(d,T3e)),d=d<0?d+360:d;const f=Du(d);ee(l,{angle:f}),E4(l,s,o,r);const h=ze(l,s);h&&!Le(l)&&ee(h,{angle:f})}},I3e=({element:e,scene:t,appState:n,property:i})=>g(hl,{label:"A",icon:Pz,value:Math.round($b(e.angle)%360*100)/100,elements:[e],dragInputCallback:S3e,editable:sl(e,"angle"),scene:t,appState:n,property:i}),ZM=5,x3e=({property:e,scene:t,appState:n,setAppState:i})=>g(hl,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?Pi(l.gridStep+ZM*Math.sign(s),ZM):l.gridStep+s),c?(c=wz(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),qM=10,C3e=e=>e.type==="image",A3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c})=>{const u=c.getNonDeletedElementsMap(),d=t[0],f=u.get(d.id);if(d&&f){const h=i||C3e(d),m=d.width/d.height;if(a.croppingElementId===d.id){const v=u.get(d.id);if(!v||!ot(v)||!v.crop)return;const w=v.crop;let S={...w};const R=v.scale[0]===-1,_=v.scale[1]===-1,{width:T,height:x}=Qa(v),I=w.naturalWidth/T,M=w.naturalHeight/x,D=R?w.width+w.x:w.naturalWidth-w.x,L=_?w.height+w.y:w.naturalHeight-w.y,G=ei*I,H=ei*M;if(s!==void 0){if(o==="width"){const Z=s*I,ge=Xe(Z,G,D);S={...S,width:ge,x:R?w.x+w.width-ge:w.x}}else if(o==="height"){const Z=s*M,ge=Xe(Z,H,L);S={...S,height:ge,y:_?w.y+w.height-ge:w.y}}ee(v,{crop:S,width:S.width/(w.naturalWidth/T),height:S.height/(w.naturalHeight/x)});return}const V=o==="width"?l:0,$=o==="height"?l:0,j=Xe(w.width+V,G,D),X=Xe(w.height+$,G,L);S={...w,x:R?w.x+w.width-j:w.x,y:_?w.y+w.height-X:w.y,width:j,height:X},ee(v,{crop:S,width:S.width/(w.naturalWidth/T),height:S.height/(w.naturalHeight/x)});return}if(s!==void 0){const v=Math.max(o==="width"?s:h?s*m:d.width,Qr),w=Math.max(o==="height"?s:h?s/m:d.height,Qr);F0(v,w,f,d,u,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}const p=o==="width"?e:0,b=o==="height"?e:0;let E=Math.max(0,d.width+p);o==="width"&&(r?E=Pi(E,qM):E=Math.round(E));let y=Math.max(0,d.height+b);o==="height"&&(r?y=Pi(y,qM):y=Math.round(y)),h&&(o==="width"?y=Math.round(E/m*100)/100:E=Math.round(y*m*100)/100),y=Math.max(Qr,y),E=Math.max(Qr,E),F0(E,y,f,d,u,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},QM=({property:e,element:t,scene:n,appState:i})=>{let r=Pa(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&ot(t)&&t.crop){const{width:s,height:o}=Qa(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=Pa(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=Pa(t.crop.height*a,2)}}return g(hl,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:A3e,value:r,editable:sl(t,e),scene:n,appState:i,property:e})},JM=4,R3e=4,M3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!fe(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),JM);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,JM),n&&(l=Pi(l,R3e))}l&&(ee(a,{fontSize:l}),Ji(a,r.getContainerElement(a),r.getNonDeletedElementsMap()))}},k3e=({element:e,scene:t,appState:n,property:i})=>{const r=fe(e)?e:br(e)?ze(e,t.getNonDeletedElementsMap()):null;return r?g(hl,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:M3e,icon:d5,appState:n,scene:t,property:i}):null},L3e=15,D3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!yh(c)&&sl(c,r)),l=t.filter(c=>!yh(c)&&sl(c,r));if(i!==void 0){const c=Du(i);for(const u of a){if(!u)continue;ee(u,{angle:c},!1);const d=ze(u,o);d&&!Le(u)&&ee(d,{angle:c},!1)}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round($b(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Pi(m,L3e)),m=m<0?m+360:m;const p=Du(m);ee(u,{angle:p},!1);const b=ze(u,o);b&&!Le(u)&&ee(b,{angle:p},!1)}s.triggerUpdate()},O3e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!yh(l)&&sl(l,"angle")),s=r.map(l=>Math.round($b(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>sl(l,"angle"));return g(hl,{label:"A",icon:Pz,value:o,elements:e,dragInputCallback:D3e,editable:a,appState:n,scene:t,property:i})},Qd=10,N3e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...Qw(i,o,a,!1),...fe(i)?{fontSize:i.fontSize*n}:{}}},P3e=(e,t,n,i,r,s,o,a)=>{const l=N3e(e,t,i,s);ee(r,l,!1);const c=ze(s,a);if(c){const u=c.fontSize*i;mr(r,o,{newSize:{width:l.width,height:l.height}});const d=o.get(c.id);d&&fe(d)&&(ee(d,{fontSize:u},!1),Hm(r,o,n==="width"?"e":"s",!0))}},ek=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];P3e(r[0],r[1],s,u,h,f,l,c)}},F3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a})=>{const l=o.getNonDeletedElementsMap(),c=o_(t,i);if(s!==void 0){for(const f of c){const h=Z6(f,l,n);if(h.length>1){const m=h.map(x=>x.latest),p=h.map(x=>x.original),[b,E,y,v]=_t(p),w=y-b,S=v-E,R=w/S,_=Math.max(Qr,a==="width"?Math.max(0,s):w),T=Math.max(Qr,a==="height"?Math.max(0,s):S);ek(_,T,S,R,A(b,E),a,m,p,l,n)}else{const[m]=h,p=m==null?void 0:m.latest,b=m==null?void 0:m.original;if(p&&b&&sl(p,a)){let E=a==="width"?Math.max(0,s):p.width;a==="width"&&(r?E=Pi(E,Qd):E=Math.round(E));let y=a==="height"?Math.max(0,s):p.height;a==="height"&&(r?y=Pi(y,Qd):y=Math.round(y)),E=Math.max(Qr,E),y=Math.max(Qr,y),F0(E,y,p,b,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}const u=a==="width"?e:0,d=a==="height"?e:0;for(const f of c){const h=Z6(f,l,n);if(h.length>1){const m=h.map(x=>x.latest),p=h.map(x=>x.original),[b,E,y,v]=_t(p),w=y-b,S=v-E,R=w/S;let _=Math.max(0,w+u);a==="width"&&(r?_=Pi(_,Qd):_=Math.round(_));let T=Math.max(0,S+d);a==="height"&&(r?T=Pi(T,Qd):T=Math.round(T)),_=Math.max(Qr,_),T=Math.max(Qr,T),ek(_,T,S,R,A(b,E),a,m,p,l,n)}else{const[m]=h,p=m==null?void 0:m.latest,b=m==null?void 0:m.original;if(p&&b&&sl(p,a)){let E=Math.max(0,b.width+u);a==="width"&&(r?E=Pi(E,Qd):E=Math.round(E));let y=Math.max(0,b.height+d);a==="height"&&(r?y=Pi(y,Qd):y=Math.round(y)),E=Math.max(Qr,E),y=Math.max(Qr,y),F0(E,y,p,b,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},tk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=O.useMemo(()=>i.map(c=>{const u=Z6(c,n);if(u.length>1){const[f,h,m,p]=_t(u.map(b=>b.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(hl,{label:e==="width"?"W":"H",elements:t,dragInputCallback:F3e,value:a,editable:l,appState:s,property:e,scene:r})},nk=4,B3e=4,z3e=(e,t)=>e.reduce((n,i)=>{if(!i||yh(i))return n;if(fe(i))return n.push(i),n;if(br(i)){const r=ze(i,t);if(r)return n.push(r),n}return n},[]),H3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),nk);for(const l of o)ee(l,{fontSize:a},!1),Ji(l,r.getContainerElement(l),s,!1);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,nk);n&&(m=Pi(m,B3e)),ee(u,{fontSize:m},!1),Ji(u,r.getContainerElement(u),s,!1)}r.triggerUpdate()}},V3e=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=z3e(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(hl,{label:"F",icon:d5,elements:s,dragInputCallback:H3e,value:a,editable:l,scene:t,property:i,appState:n})},$3e=10,G3e=(e,t,n,i,r,s,o,a)=>{for(let l=0;l<i.length;l++){const c=r[l],[u,d]=[c.x+c.width/2,c.y+c.height/2],[f,h]=q(A(c.x,c.y),A(u,d),c.angle),m=e==="x"?Math.round(f+t):f,p=e==="y"?Math.round(h+n):h;om(m,p,c,s,i,a,o,!1)}},X3e=(e,t,n,i,r,s,o)=>{const[a,l,,]=_t(n),c=e-a,u=t-l;for(let d=0;d<n.length;d++){const f=n[d],h=i.get(f.id);if(h&&(!fe(h)||!h.containerId)){const[m,p]=[h.x+h.width/2,h.y+h.height/2],[b,E]=q(A(h.x,h.y),A(m,p),h.angle);om(b+c,E+u,f,i,r,o,s,!1)}}},j3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{var h,m;const l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements();if(r!==void 0){for(const p of o_(t,a)){const b=Z6(p,l,n);if(b.length>1){const[E,y,,]=_t(b.map(S=>S.latest));X3e(s==="x"?r:E,s==="y"?r:y,b.map(S=>S.original),l,c,n,o)}else{const E=(h=b[0])==null?void 0:h.original,y=(m=b[0])==null?void 0:m.latest;if(E&&y&&sl(y,s)){const[v,w]=[E.x+E.width/2,E.y+E.height/2],[S,R]=q(A(E.x,E.y),A(v,w),E.angle);om(s==="x"?r:S,s==="y"?r:R,E,l,c,o,n,!1)}}}o.triggerUpdate();return}const u=i?Pi(e,$3e):e;G3e(s,s==="x"?u:0,s==="y"?u:0,t,t,l,n,o),o.triggerUpdate()},ik=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=O.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,b]=_t(c);return Math.round((e==="x"?p:b)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(A(u.x,u.y),A(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(hl,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:j3e,value:a,property:e,scene:r,appState:s})},rk=10,Y3e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=a.getNonDeletedElements(),d=n[0],[f,h]=[d.x+d.width/2,d.y+d.height/2],[m,p]=q(A(d.x,d.y),A(f,h),d.angle);if(l.croppingElementId===d.id){const w=c.get(d.id);if(!w||!ot(w)||!w.crop)return;const S=w.crop;let R=S;const _=w.scale[0]===-1,T=w.scale[1]===-1,{width:x,height:I}=Qa(w);if(s!==void 0){if(o==="x"){const L=s*(S.naturalWidth/x);_?R={...S,x:Xe(S.naturalWidth-L-S.width,0,S.naturalWidth-S.width)}:R={...S,x:Xe(s*(S.naturalWidth/x),0,S.naturalWidth-S.width)}}o==="y"&&(R={...S,y:Xe(s*(S.naturalHeight/I),0,S.naturalHeight-S.height)}),ee(w,{crop:R});return}const M=(o==="x"?t:0)*(_?-1:1),D=(o==="y"?t:0)*(T?-1:1);R={...S,x:Xe(S.x+M,0,S.naturalWidth-S.width),y:Xe(S.y+D,0,S.naturalHeight-S.height)},ee(w,{crop:R});return}if(s!==void 0){om(o==="x"?s:m,o==="y"?s:p,d,c,u,a,i);return}const b=o==="x"?e:0,E=o==="y"?e:0,y=o==="x"?Math.round(r?Pi(d.x+b,rk):m+b):m,v=o==="y"?Math.round(r?Pi(d.y+E,rk):p+E):p;om(y,v,d,c,u,a,i)},sk=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=q(A(t.x,t.y),A(t.x+t.width/2,t.y+t.height/2),t.angle);let a=Pa(e==="x"?s:o,2);if(r.croppingElementId===t.id&&ot(t)&&t.crop){const l=nae(t);l&&(a=Pa(e==="x"?l.x:l.y,2))}return g(hl,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:Y3e,scene:i,value:a,property:e,appState:r})},W3e=50,ba=e=>{const t=tp(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=im(e.app);return g(K3e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},Xt=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:be("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});Xt.displayName="StatsRow";const q6=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});q6.displayName="StatsRows";ba.StatsRow=Xt;ba.StatsRows=q6;const K3e=O.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=Vn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&ot(d),m=h?Qa(d):null,[p,b]=O.useState({width:0,height:0}),E=O.useMemo(()=>Do(w=>{const S=_t(w);b({width:Math.round(S[2])-Math.round(S[0]),height:Math.round(S[3])-Math.round(S[1])})},W3e),[]);O.useEffect(()=>{E(l)},[s,l,E]),O.useEffect(()=>()=>E.cancel(),[E]);const y=O.useMemo(()=>o_(i,r),[i,r]),v=O.useMemo(()=>RF(i),[i]);return g("div",{className:"exc-stats",children:P(Ws,{padding:3,children:[P("div",{className:"title",children:[g("h2",{children:k("stats.title")}),g("div",{className:"close",onClick:t,children:eg})]}),P(JE,{label:g("h3",{children:k("stats.generalStats")}),open:!!(r.stats.panels&Sf.generalStats),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Sf.generalStats}})),children:[P(q6,{children:[g(Xt,{heading:!0,children:k("stats.scene")}),P(Xt,{columns:2,children:[g("div",{children:k("stats.shapes")}),g("div",{children:l.length})]}),P(Xt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:p.width})]}),P(Xt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:p.height})]}),o&&P(pe,{children:[g(Xt,{heading:!0,children:"Canvas"}),g(Xt,{children:g(x3e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n==null?void 0:n(l,r)]}),!v&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(JE,{label:g("h3",{children:k("stats.elementProperties")}),open:!!(r.stats.panels&Sf.elementProperties),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Sf.elementProperties}})),children:P(q6,{children:[d&&P(pe,{children:[h&&g(Xt,{heading:!0,children:k("labels.unCroppedDimension")}),r.croppingElementId&&ot(d)&&m&&P(Xt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:Pa(m.width,2)})]}),r.croppingElementId&&ot(d)&&m&&P(Xt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:Pa(m.height,2)})]}),g(Xt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?k("labels.imageCropping"):k(`element.${d.type}`)}),g(Xt,{children:g(sk,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(Xt,{children:g(sk,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(Xt,{children:g(QM,{property:"width",element:d,scene:a,appState:r})}),g(Xt,{children:g(QM,{property:"height",element:d,scene:a,appState:r})}),!me(d)&&g(Xt,{children:g(I3e,{property:"angle",element:d,scene:a,appState:r})}),g(Xt,{children:g(k3e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&P(pe,{children:[FF(f)&&g(Xt,{heading:!0,children:k("element.group")}),P(Xt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:k("stats.shapes")}),g("div",{children:i.length})]}),g(Xt,{children:g(ik,{property:"x",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Xt,{children:g(ik,{property:"y",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Xt,{children:g(tk,{property:"width",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Xt,{children:g(tk,{property:"height",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Xt,{children:g(O3e,{property:"angle",elements:f,scene:a,appState:r})}),g(Xt,{children:g(V3e,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),Z3e=({sourceElementId:e,onClose:t,elementsMap:n,appState:i,generateLinkForSelection:r=wB})=>{var d;const s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=O.useState(s),[l,c]=O.useState(!1);O.useEffect(()=>{const f=Ve(n,i);let h=s;if(f.length>0&&r){const m=_B(f,i);m&&(h=Fr(r(m.id,m.type)))}a(h)},[n,i,i.selectedElementIds,s,r]);const u=O.useCallback(()=>{var f;if(o&&o!==((f=n.get(e))==null?void 0:f.link)){const h=n.get(e);h&&ee(h,{link:o})}if(!o&&l&&e){const h=n.get(e);h&&ee(h,{link:null})}t==null||t()},[e,o,n,l,t]);return O.useEffect(()=>{const f=h=>{var m,p;((m=i.openDialog)==null?void 0:m.name)==="elementLinkSelector"&&h.key===z.ENTER&&u(),((p=i.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&h.key===z.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[i,t,u]),P("div",{className:"ElementLinkDialog",children:[P("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:k("elementLink.title")}),g("p",{children:k("elementLink.desc")})]}),P("div",{className:"ElementLinkDialog__input",children:[g(Ah,{value:o??"",onChange:f=>{l||c(!0),a(f)},onKeyDown:f=>{f.key===z.ENTER&&u()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&g(Ze,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:()=>{a(null),c(!0)},className:"ElementLinkDialog__remove",icon:sd})]}),P("div",{className:"ElementLinkDialog__actions",children:[g(xh,{label:k("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g(xh,{label:k("buttons.confirm"),onClick:u,actionType:"primary"})]})]})},a_=({children:e,onClose:t})=>{const[n,i]=O.useState(!!e),{container:r}=ta(),s=ae.useCallback(()=>{i(!1),t&&t(),r==null||r.focus()},[t,r]);return g(pe,{children:n&&g(Gr,{size:"small",onCloseRequest:s,title:k("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},q3e=()=>P("div",{className:"HelpDialog__header",children:[P("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:nA}),k("helpDialog.documentation")]}),P("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:nA}),k("helpDialog.blog")]}),P("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:o9}),k("helpDialog.github")]}),P("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:$z}),"YouTube"]})]}),Q3e=e=>P(pe,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),T7=e=>P("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*J3e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const eEe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),Ue=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(tEe,{children:eEe(o)},o)));return P("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...J3e(i,n?k("helpDialog.or"):null)]})]})},tEe=e=>g("kbd",{className:"HelpDialog__key",...e}),nEe=({onClose:e})=>{const t=ae.useCallback(()=>{e&&e()},[e]);return g(pe,{children:P(Gr,{onCloseRequest:t,title:k("helpDialog.title"),className:"HelpDialog",children:[g(q3e,{}),P(Q3e,{title:k("helpDialog.shortcuts"),children:[P(T7,{className:"HelpDialog__island--tools",caption:k("helpDialog.tools"),children:[g(Ue,{label:k("toolBar.hand"),shortcuts:[z.H]}),g(Ue,{label:k("toolBar.selection"),shortcuts:[z.V,z[1]]}),g(Ue,{label:k("toolBar.rectangle"),shortcuts:[z.R,z[2]]}),g(Ue,{label:k("toolBar.diamond"),shortcuts:[z.D,z[3]]}),g(Ue,{label:k("toolBar.ellipse"),shortcuts:[z.O,z[4]]}),g(Ue,{label:k("toolBar.arrow"),shortcuts:[z.A,z[5]]}),g(Ue,{label:k("toolBar.line"),shortcuts:[z.L,z[6]]}),g(Ue,{label:k("toolBar.freedraw"),shortcuts:[z.P,z[7]]}),g(Ue,{label:k("toolBar.text"),shortcuts:[z.T,z[8]]}),g(Ue,{label:k("toolBar.image"),shortcuts:[z[9]]}),g(Ue,{label:k("toolBar.eraser"),shortcuts:[z.E,z[0]]}),g(Ue,{label:k("toolBar.frame"),shortcuts:[z.F]}),g(Ue,{label:k("toolBar.laser"),shortcuts:[z.K]}),g(Ue,{label:k("labels.eyeDropper"),shortcuts:[z.I,"Shift+S","Shift+G"]}),g(Ue,{label:k("helpDialog.editLineArrowPoints"),shortcuts:[Q("CtrlOrCmd+Enter")]}),g(Ue,{label:k("helpDialog.editText"),shortcuts:[Q("Enter")]}),g(Ue,{label:k("helpDialog.textNewLine"),shortcuts:[Q("Enter"),Q("Shift+Enter")]}),g(Ue,{label:k("helpDialog.textFinish"),shortcuts:[Q("Esc"),Q("CtrlOrCmd+Enter")]}),g(Ue,{label:k("helpDialog.curvedArrow"),shortcuts:["A",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(Ue,{label:k("helpDialog.curvedLine"),shortcuts:["L",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(Ue,{label:k("helpDialog.cropStart"),shortcuts:[k("helpDialog.doubleClick"),Q("Enter")],isOr:!0}),g(Ue,{label:k("helpDialog.cropFinish"),shortcuts:[Q("Enter"),Q("Escape")],isOr:!0}),g(Ue,{label:k("toolBar.lock"),shortcuts:[z.Q]}),g(Ue,{label:k("helpDialog.preventBinding"),shortcuts:[Q("CtrlOrCmd")]}),g(Ue,{label:k("toolBar.link"),shortcuts:[Q("CtrlOrCmd+K")]})]}),P(T7,{className:"HelpDialog__island--view",caption:k("helpDialog.view"),children:[g(Ue,{label:k("buttons.zoomIn"),shortcuts:[Q("CtrlOrCmd++")]}),g(Ue,{label:k("buttons.zoomOut"),shortcuts:[Q("CtrlOrCmd+-")]}),g(Ue,{label:k("buttons.resetZoom"),shortcuts:[Q("CtrlOrCmd+0")]}),g(Ue,{label:k("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(Ue,{label:k("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(Ue,{label:k("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(Ue,{label:k("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(Ue,{label:k("buttons.zenMode"),shortcuts:[Q("Alt+Z")]}),g(Ue,{label:k("buttons.objectsSnapMode"),shortcuts:[Q("Alt+S")]}),g(Ue,{label:k("labels.toggleGrid"),shortcuts:[Q("CtrlOrCmd+'")]}),g(Ue,{label:k("labels.viewMode"),shortcuts:[Q("Alt+R")]}),g(Ue,{label:k("labels.toggleTheme"),shortcuts:[Q("Alt+Shift+D")]}),g(Ue,{label:k("stats.fullTitle"),shortcuts:[Q("Alt+/")]}),g(Ue,{label:k("search.title"),shortcuts:[Hi("searchMenu")]}),g(Ue,{label:k("commandPalette.title"),shortcuts:A0?[Hi("commandPalette")]:[Hi("commandPalette"),Hi("commandPalette",1)]})]}),P(T7,{className:"HelpDialog__island--editor",caption:k("helpDialog.editor"),children:[g(Ue,{label:k("helpDialog.createFlowchart"),shortcuts:[Q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(Ue,{label:k("helpDialog.navigateFlowchart"),shortcuts:[Q("Alt+Arrow Key")],isOr:!0}),g(Ue,{label:k("labels.moveCanvas"),shortcuts:[Q(`Space+${k("helpDialog.drag")}`),Q(`Wheel+${k("helpDialog.drag")}`)],isOr:!0}),g(Ue,{label:k("buttons.clearReset"),shortcuts:[Q("CtrlOrCmd+Delete")]}),g(Ue,{label:k("labels.delete"),shortcuts:[Q("Delete")]}),g(Ue,{label:k("labels.cut"),shortcuts:[Q("CtrlOrCmd+X")]}),g(Ue,{label:k("labels.copy"),shortcuts:[Q("CtrlOrCmd+C")]}),g(Ue,{label:k("labels.paste"),shortcuts:[Q("CtrlOrCmd+V")]}),g(Ue,{label:k("labels.pasteAsPlaintext"),shortcuts:[Q("CtrlOrCmd+Shift+V")]}),g(Ue,{label:k("labels.selectAll"),shortcuts:[Q("CtrlOrCmd+A")]}),g(Ue,{label:k("labels.multiSelect"),shortcuts:[Q(`Shift+${k("helpDialog.click")}`)]}),g(Ue,{label:k("helpDialog.deepSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.click")}`)]}),g(Ue,{label:k("helpDialog.deepBoxSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.drag")}`)]}),(j9||A0)&&g(Ue,{label:k("labels.copyAsPng"),shortcuts:[Q("Shift+Alt+C")]}),g(Ue,{label:k("labels.copyStyles"),shortcuts:[Q("CtrlOrCmd+Alt+C")]}),g(Ue,{label:k("labels.pasteStyles"),shortcuts:[Q("CtrlOrCmd+Alt+V")]}),g(Ue,{label:k("labels.sendToBack"),shortcuts:[Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(Ue,{label:k("labels.bringToFront"),shortcuts:[Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(Ue,{label:k("labels.sendBackward"),shortcuts:[Q("CtrlOrCmd+[")]}),g(Ue,{label:k("labels.bringForward"),shortcuts:[Q("CtrlOrCmd+]")]}),g(Ue,{label:k("labels.alignTop"),shortcuts:[Q("CtrlOrCmd+Shift+Up")]}),g(Ue,{label:k("labels.alignBottom"),shortcuts:[Q("CtrlOrCmd+Shift+Down")]}),g(Ue,{label:k("labels.alignLeft"),shortcuts:[Q("CtrlOrCmd+Shift+Left")]}),g(Ue,{label:k("labels.alignRight"),shortcuts:[Q("CtrlOrCmd+Shift+Right")]}),g(Ue,{label:k("labels.duplicateSelection"),shortcuts:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)]}),g(Ue,{label:k("helpDialog.toggleElementLock"),shortcuts:[Q("CtrlOrCmd+Shift+L")]}),g(Ue,{label:k("buttons.undo"),shortcuts:[Q("CtrlOrCmd+Z")]}),g(Ue,{label:k("buttons.redo"),shortcuts:pP?[Q("CtrlOrCmd+Y"),Q("CtrlOrCmd+Shift+Z")]:[Q("CtrlOrCmd+Shift+Z")]}),g(Ue,{label:k("labels.group"),shortcuts:[Q("CtrlOrCmd+G")]}),g(Ue,{label:k("labels.ungroup"),shortcuts:[Q("CtrlOrCmd+Shift+G")]}),g(Ue,{label:k("labels.flipHorizontal"),shortcuts:[Q("Shift+H")]}),g(Ue,{label:k("labels.flipVertical"),shortcuts:[Q("Shift+V")]}),g(Ue,{label:k("labels.showStroke"),shortcuts:[Q("S")]}),g(Ue,{label:k("labels.showBackground"),shortcuts:[Q("G")]}),g(Ue,{label:k("labels.showFonts"),shortcuts:[Q("Shift+F")]}),g(Ue,{label:k("labels.decreaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+<")]}),g(Ue,{label:k("labels.increaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+>")]})]})]})]})})},iEe=2e3,l_=()=>{const[e,t]=O.useState(null),n=O.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},iEe)},r=O.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},pU=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:be("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),rEe="filter"in document.createElement("canvas").getContext("2d"),sEe=()=>P("div",{children:[g("h3",{children:k("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:k("canvasError.canvasTooBig")})}),P("em",{children:["(",k("canvasError.canvasTooBigTip"),")"]})]}),oEe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=zn(t,e),[a,l]=O.useState(s),[c,u]=O.useState(o),[d,f]=O.useState(e.exportBackground),[h,m]=O.useState(e.exportWithDarkMode),[p,b]=O.useState(e.exportEmbedScene),[E,y]=O.useState(e.exportScale),v=O.useRef(null),[w,S]=O.useState(null),{onCopy:R,copyStatus:_,resetCopyStatus:T}=l_();O.useEffect(()=>{T()},[a,d,h,E,p,T]);const{exportedElements:x,exportingFrame:I}=O5(t,e,c);return O.useEffect(()=>{const M=v.current;if(!M)return;const D=M.offsetWidth,L=M.offsetHeight;D&&B5({elements:x,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:E,exportEmbedScene:p},files:n,exportPadding:Kh,maxWidthOrHeight:Math.max(D,L),exportingFrame:I}).then(G=>(S(null),em(G).then(()=>{M.replaceChildren(G)}).catch(H=>{throw H.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):H}))).catch(G=>{console.error(G),S(G)})},[e,n,x,I,a,d,h,E,p]),P("div",{className:"ImageExportModal",children:[g("h3",{children:k("imageExportDialog.header")}),P("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:v,children:w&&g(sEe,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!Rd&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:M=>{l(M.target.value),i.executeAction(ybe,"ui",M.target.value)}})})]}),P("div",{className:"ImageExportModal__settings",children:[g("h3",{children:k("imageExportDialog.header")}),o&&g(Yg,{label:k("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(pU,{name:"exportOnlySelected",checked:c,onChange:M=>{u(M)}})}),g(Yg,{label:k("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(pU,{name:"exportBackgroundSwitch",checked:d,onChange:M=>{f(M),i.executeAction(vbe,"ui",M)}})}),rEe&&g(Yg,{label:k("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(pU,{name:"exportDarkModeSwitch",checked:h,onChange:M=>{m(M),i.executeAction(wbe,"ui",M)}})}),g(Yg,{label:k("imageExportDialog.label.embedScene"),tooltip:k("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(pU,{name:"exportEmbedSwitch",checked:p,onChange:M=>{b(M),i.executeAction(R$,"ui",M)}})}),g(Yg,{label:k("imageExportDialog.label.scale"),name:"exportScale",children:g(cX,{name:"exportScale",value:E,onChange:M=>{y(M),i.executeAction(Ebe,"ui",M)},choices:dw.map(M=>({value:M,label:`${M}×`}))})}),P("div",{className:"ImageExportModal__settings__buttons",children:[g(qs,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToPng"),onClick:()=>r(f8.png,x,{exportingFrame:I}),icon:UA,children:k("imageExportDialog.button.exportToPng")}),g(qs,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToSvg"),onClick:()=>r(f8.svg,x,{exportingFrame:I}),icon:UA,children:k("imageExportDialog.button.exportToSvg")}),(j9||A0)&&g(qs,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.copyPngToClipboard"),status:_,onClick:async()=>{await r(f8.clipboard,x,{exportingFrame:I}),R()},icon:jm,children:k("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Yg=({label:e,children:t,tooltip:n,name:i})=>P("div",{className:"ImageExportModal__settings__setting",title:e,children:[P("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(cd,{label:n,long:!0,children:cue})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),aEe=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=O.useState(()=>({appStateSnapshot:Fa(t),elementsSnapshot:Fa(e)}));return g(Gr,{onCloseRequest:s,size:"wide",title:!1,children:g(oEe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},v4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":li[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":li[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":li[t][9]},children:e}),lEe=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:P("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&P(v4,{color:"lime",children:[g("div",{className:"Card-icon",children:Uce}),g("h2",{children:k("exportDialog.disk_title")}),P("div",{className:"Card-details",children:[k("exportDialog.disk_details"),!Rd&&r.renderAction("changeProjectName")]}),g(Ze,{className:"Card-button",type:"button",title:k("exportDialog.disk_button"),"aria-label":k("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(M$,"ui")}})]}),l&&P(v4,{color:"pink",children:[g("div",{className:"Card-icon",children:A6}),g("h2",{children:k("exportDialog.link_title")}),g("div",{className:"Card-details",children:k("exportDialog.link_details")}),g(Ze,{className:"Card-button",type:"button",title:k("exportDialog.link_button"),"aria-label":k("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{ut("export","link",`ui (${Om()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},cEe=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{var l;const a=ae.useCallback(()=>{o({openDialog:null})},[o]);return g(pe,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g(Gr,{onCloseRequest:a,title:k("buttons.export"),children:g(lEe,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},uEe="small",dEe=e=>P("label",{className:be("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${uEe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:VE})]}),fEe=({UIOptions:e})=>P(Zt,{__fallback:!0,children:[g(Zt.DefaultItems.LoadScene,{}),g(Zt.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(Zt.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(Zt.DefaultItems.SaveAsImage,{}),g(Zt.DefaultItems.SearchMenu,{}),g(Zt.DefaultItems.Help,{}),g(Zt.DefaultItems.ClearCanvas,{}),g(Zt.Separator,{}),g(Zt.Group,{title:"Excalidraw links",children:g(Zt.DefaultItems.Socials,{})}),g(Zt.Separator,{}),g(Zt.DefaultItems.ToggleTheme,{}),g(Zt.DefaultItems.ChangeCanvasBackground,{})]}),hEe=()=>P(Tu,{__fallback:!0,children:[g(Tu.Actions.SaveToDisk,{}),g(Tu.Actions.ExportToImage,{})]}),gEe=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:b,isCollaborating:E,generateLinkForSelection:y})=>{var V,$,j;const v=Jn(),w=Hye(),S=w.tunnelsJotai.Provider,[R,_]=mn(E5),T=()=>f.canvasActions.export?g(cEe,{elements:r,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:s,setAppState:i}):null,x=()=>{var X;return!f.canvasActions.saveAsImage||((X=t.openDialog)==null?void 0:X.name)!=="imageExport"?null:g(aEe,{elements:r,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:b.getName()})},I=()=>P("div",{style:{position:"relative"},children:[g(w.MainMenuTunnel.Out,{}),m&&g(w.WelcomeScreenMenuHintTunnel.Out,{})]}),M=()=>g(sm,{heading:"selectedShapeActions",className:be("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(Ws,{className:dh.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(fG,{appState:t,elementsMap:b.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:b})})}),D=()=>{var ge,ce,le,Be,$e;const X=Y9(t,r),Z=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((ge=t.openDialog)==null?void 0:ge.name)!=="elementLinkSelector";return g(xG,{side:"top",children:P("div",{className:"App-menu App-menu_top",children:[P(us.Col,{gap:6,className:be("App-menu_top__left"),children:[I(),X&&M()]}),!t.viewModeEnabled&&((ce=t.openDialog)==null?void 0:ce.name)!=="elementLinkSelector"&&g(sm,{heading:"shapes",className:"shapes-section",children:Tt=>P("div",{style:{position:"relative"},children:[m&&g(w.WelcomeScreenToolbarHintTunnel.Out,{}),g(us.Col,{gap:4,align:"start",children:P(us.Row,{gap:1,className:be("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[P(Ws,{padding:1,className:be("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(AG,{appState:t,isMobile:v.editor.isMobile,device:v,app:b}),Tt,P(us.Row,{gap:1,children:[g(RG,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:k("toolBar.penMode"),penDetected:t.penDetected}),g(IG,{checked:t.activeTool.locked,onChange:o,title:k("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(CG,{checked:_h(t),onChange:()=>a(),title:k("toolBar.hand"),isMobile:!0}),g(hG,{appState:t,activeTool:t.activeTool,UIOptions:f,app:b})]})]}),E&&g(Ws,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(dEe,{title:k("toolBar.laser"),checked:t.activeTool.type===Xn.laser,onChange:()=>b.setActiveTool({type:Xn.laser}),isMobile:!0})})]})})]})}),P("div",{className:be("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(MG,{collaborators:t.collaborators,userToFollow:((le=t.userToFollow)==null?void 0:le.socketId)||null}),u==null?void 0:u(v.editor.isMobile,t),!t.viewModeEnabled&&((Be=t.openDialog)==null?void 0:Be.name)!=="elementLinkSelector"&&(!G||(($e=t.openSidebar)==null?void 0:$e.name)!==gs.name)&&g(w.DefaultSidebarTriggerTunnel.Out,{}),Z&&g(ba,{app:b,onClose:()=>{e.executeAction(l4)},renderCustomStats:d})]})]})})},L=()=>g(WM,{__fallback:!0,onDock:X=>{ut("sidebar",`toggleDock (${X?"dock":"undock"})`,`(${v.editor.isMobile?"mobile":"desktop"})`)}}),G=LB(i_),H=P(pe,{children:[p,g(fEe,{UIOptions:f}),g(WM.Trigger,{__fallback:!0,icon:i9,title:G1(k("toolBar.library")),onToggle:X=>{X&&ut("sidebar",`${gs.name} (open)`,`button (${v.editor.isMobile?"mobile":"desktop"})`)},tab:gs.defaultTab,children:k("toolBar.library")}),g(hEe,{}),((V=t.openDialog)==null?void 0:V.name)==="ttd"&&g(DX,{__fallback:!0}),t.isLoading&&g(SG,{delay:250}),t.errorMessage&&g(a_,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),R&&!v.editor.isMobile&&g(Nhe,{colorPickerType:R.colorPickerType,onCancel:()=>{_(null)},onChange:(X,Z,ge,{altKey:ce})=>{var le;if(!(X!=="elementBackground"&&X!=="elementStroke"))if(ge.length){for(const Be of ge)ee(Be,{[ce&&R.swapPreviewOnAlt?X==="elementBackground"?"strokeColor":"backgroundColor":X==="elementBackground"?"backgroundColor":"strokeColor"]:Z},!1),Yt.delete(Be);(le=Yo.getScene(ge[0]))==null||le.triggerUpdate()}else i(X==="elementBackground"?{currentItemBackgroundColor:Z}:{currentItemStrokeColor:Z})},onSelect:(X,Z)=>{var ge;_(ce=>ce!=null&&ce.keepOpenOnAlt&&Z.altKey?ce:null),(ge=R==null?void 0:R.onSelect)==null||ge.call(R,X,Z)}}),(($=t.openDialog)==null?void 0:$.name)==="help"&&g(nEe,{onClose:()=>{i({openDialog:null})}}),g(jye,{}),((j=t.openDialog)==null?void 0:j.name)==="elementLinkSelector"&&g(Z3e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},elementsMap:b.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:y}),g(w.OverwriteConfirmDialogTunnel.Out,{}),x(),T(),t.pasteDialog.shown&&g(m7e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.editor.isMobile&&g(g7e,{app:b,appState:t,elements:r,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:x,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:L,device:v,renderWelcomeScreen:m,UIOptions:f}),!v.editor.isMobile&&P(pe,{children:[P("div",{className:"layer-ui__wrapper",style:t.openSidebar&&G&&v.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(w.WelcomeScreenCenterTunnel.Out,{}),D(),g(kG,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(X=>({...z0(r,X)}))},children:k("buttons.scrollBackToContent")})]}),L()]})]});return g(QH.Provider,{value:t,children:g(S,{children:g(cG.Provider,{value:w,children:H})})})},ok=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},mEe=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return vi(ok(i),ok(o),{selectedElementIds:vi,selectedGroupIds:vi})&&vi(r,a)},pEe=ae.memo(gEe,mEe),UEe="small",S7=e=>P("label",{className:be("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${UEe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),bEe=({trails:e})=>{const t=O.useRef(null);return O.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},yEe=e=>{const t=O.useRef(!1);return O.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,i=new Map,r=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))r.has(d)||r.set(d,[]),r.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&s.set(u,c.username),c.userState&&o.set(u,c.userState),i.set(u,Fs({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";B8e({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:r,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},e_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?yt.GRAB:yt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:k("labels.drawingCanvas")})},ak=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),EEe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:vi(ak(e.appState),ak(t.appState)),vEe=ae.memo(yEe,EEe),wEe=e=>{const t=O.useRef(null),n=O.useRef(!1);return O.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static"));const s=`${e.appState.width}px`,o=`${e.appState.height}px`;r.style.width!==s&&(r.style.width=s),r.style.height!==o&&(r.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;r.width!==a&&(r.width=a),r.height!==l&&(r.height=l),m$({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},e_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},lk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),_Ee=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:vi(lk(e.appState),lk(t.appState))&&vi(e.renderConfig,t.renderConfig),TEe=ae.memo(wEe,_Ee),OX=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{if(e){const[l,c]=k5(e,s),u=L5({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?ru(n,i,r,t,u,a,o):u.clearRect(0,0,l,c)}},SEe=Zh(e=>{OX(e)},{trailing:!0}),IEe=(e,t)=>{if(t){SEe(e);return}OX(e)},xEe=e=>{const t=O.useRef(null);return O.useEffect(()=>{t.current&&IEe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},e_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},CEe=5e3,AEe=({message:e,onClose:t,closable:n=!1,duration:i=CEe,style:r})=>{const s=O.useRef(0),o=i!==1/0,a=O.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return O.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),P("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(Ze,{icon:eg,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},NX=ae.createContext(null),PX=ae.createContext(null),FX={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},c_=ae.createContext(FX);c_.displayName="DeviceContext";const u_=ae.createContext({container:null,id:null});u_.displayName="ExcalidrawContainerContext";const d_=ae.createContext([]);d_.displayName="ExcalidrawElementsContext";const f_=ae.createContext({...so(),width:0,height:0,offsetLeft:0,offsetTop:0});f_.displayName="ExcalidrawAppStateContext";const h_=ae.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});h_.displayName="ExcalidrawSetAppStateContext";const g_=ae.createContext(null);g_.displayName="ExcalidrawActionManagerContext";const fo=()=>O.useContext(NX),ep=()=>O.useContext(PX),Jn=()=>O.useContext(c_),ta=()=>O.useContext(u_),G5=()=>O.useContext(d_),tp=()=>O.useContext(f_),Vn=()=>O.useContext(h_),vr=()=>O.useContext(g_);let Wg=!1,I7=0,qc=!1,Kg=!1,x7=!1,C7={horizontal:null,vertical:null},vl=0,Zg=!1;const A7=new Map;let UU=!1,ck=0,uk=!1,Qc=null;const ht={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class m_ extends ae.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"device",FX);F(this,"excalidrawContainerRef",ae.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new ole);F(this,"flowChartNavigator",new sle);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new a8e);F(this,"laserTrails",new W8e(this.animationFrameHandler,this));F(this,"eraserTrail",new o7e(this.animationFrameHandler,this));F(this,"lassoTrail",new r7e(this.animationFrameHandler,this));F(this,"onChangeEmitter",new So);F(this,"onPointerDownEmitter",new So);F(this,"onPointerUpEmitter",new So);F(this,"onUserFollowEmitter",new So);F(this,"onScrollChangeEmitter",new So);F(this,"missingPointerEventCleanupEmitter",new So);F(this,"onRemoveEventListenersEmitter",new So);F(this,"getEffectiveGridSize",()=>im(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),Yt.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(r=>{if(lr(r)){if(n.add(r.id),!this.embedsValidationStatus.has(r.id)){i=!0;const s=ZU(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,s)}}else Rl(r)&&n.add(r.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((r,s)=>{n.has(s)||this.iFrameRefs.delete(s)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const r=document.getElementById(this.getFrameNameDOMId(n));if(r){const s=r.getBoundingClientRect(),o=Mt({clientX:s.x,clientY:s.y},this.state),a=Mt({clientX:s.right,clientY:s.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&ee(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===xe.DARK;return this.scene.getNonDeletedFramesLikes().map(i=>{if(!E6(i,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===i.id&&this.resetEditingFrame(i),null;const{x:r,y:s}=Fs({sceneX:i.x,sceneY:i.y},this.state),o=6;let a;const l=AF(i);if(i.id===this.state.editingFrame){const c=l;a=g("input",{autoFocus:!0,value:c,onChange:u=>{ee(i,{name:u.target.value})},onFocus:u=>u.target.select(),onBlur:()=>this.resetEditingFrame(i),onKeyDown:u=>{(u.key===z.ESCAPE||u.key===z.ENTER)&&this.resetEditingFrame(i)},style:{background:this.state.viewBackgroundColor,filter:n?uw:"none",zIndex:2,border:"none",display:"block",padding:`${o}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${o}px, ${o}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-r-o}px`},size:c.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else a=l;return g("div",{id:this.getFrameNameDOMId(i),style:{position:"absolute",bottom:`${this.state.height+on.nameOffsetY-s+this.state.offsetTop}px`,left:`${r-this.state.offsetLeft}px`,zIndex:2,fontSize:on.nameFontSize,color:n?on.nameColorDarkTheme:on.nameColorLightTheme,lineHeight:on.nameLineHeight,width:"max-content",maxWidth:`${i.width}px`,overflow:i.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:yt.MOVE,pointerEvents:this.state.viewModeEnabled?nu.disabled:nu.enabled},onPointerDown:c=>this.handleCanvasPointerDown(c),onWheel:c=>this.handleWheel(c),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:i.id})},children:a},i.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,r)=>{ut("export",n,"ui");const s=await N5(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(NP).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&s&&V9(s)&&this.setState({fileHandle:s})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?ee(n,{customData:{generationData:void 0}},!1):ee(n,{customData:{generationData:i}},!1),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Xn.magicframe}),ut("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&XU(n[0])&&n[0];if(!i&&n.some(s=>Ie(s)||s.frameId)){this.setActiveTool({type:Xn.magicframe});return}ut("ai","tool-select (existing selection)","d2c");let r;if(i)r=i;else{const[s,o,a,l]=_t(n),c=50;r=SE({...on,x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(r);for(const u of n)ee(u,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}});F(this,"openEyeDropper",({type:n})=>{Vs.set(E5,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,r)=>{const s=n==="background"&&r.altKey||n==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?s?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:K.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:K.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Ce(a,{[s?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:K.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});F(this,"syncActionResult",sn(n=>{var s,o,a,l,c,u;if(this.unmounted||n===!1)return;n.captureUpdate===K.NEVER?this.store.shouldUpdateSnapshot():n.captureUpdate===K.IMMEDIATELY&&this.store.shouldCaptureIncrement();let i=!1,r=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||r||this.state.contextMenu){let d=((s=n==null?void 0:n.appState)==null?void 0:s.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||xe.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),r=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&r&&n.elements.forEach(b=>{(r==null?void 0:r.id)===b.id&&r!==b&&mE(b)&&fe(b)&&(r=b)}),r!=null&&r.isDeleted&&(r=null),this.setState(b=>{const E=n.appState||{};return{...b,...E,contextMenu:null,editingTextElement:r,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}!i&&n.captureUpdate!==K.EVENTUALLY&&this.scene.triggerUpdate()}));F(this,"onBlur",sn(()=>{qc=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",sn(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...so(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var r;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async s=>{if(!s.files.length)return;const o=s.files[0],a=await o.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),o)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(s=>{console.error(s)})}catch(s){console.error(s),n={appState:{errorMessage:s.message||"Encountered an error during importing or restoring scene data"}}}const i=md(n,null,null,{repairBindings:!0});i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((r=i.appState)==null?void 0:r.openSidebar)||this.state.openSidebar,activeTool:i.appState.activeTool.type==="image"?{...i.appState.activeTool,type:"selection"}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...z0(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:K.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(s=>{this.fonts.onLoaded(s)}),K1(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"isMobileBreakpoint",(n,i)=>n<Wne||i<Zne&&n<Kne);F(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:i,clientHeight:r}=document.body,s=this.device.viewport,o=HU(s,{isLandscape:i>r,isMobile:this.isMobileBreakpoint(i,r)});return s!==o?(this.device={...this.device,viewport:o},!0):!1});F(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:r}=n.getBoundingClientRect(),s=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:qne,o=this.device.editor,a=HU(o,{isMobile:this.isMobileBreakpoint(i,r),canFitSidebar:i>s});return o!==a?(this.device={...this.device,editor:a},!0):!1});F(this,"onResize",sn(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>Yt.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),Q3||this.refreshEditorBreakpoints(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:r})=>{i&&(C7=i);const s=this.state.editingTextElement?!1:!n&&r.size>0;this.state.scrolledOutside!==s&&this.setState({scrolledOutside:s}),this.scheduleImageRefresh()});F(this,"onScroll",ja(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===i&&r.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},jne));F(this,"onCut",sn(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||lu(n.target)||(this.actionManager.executeAction(tM,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",sn(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||lu(n.target)||(this.actionManager.executeAction(u2,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(UP&&n.preventDefault(),!Wg){Wg=!0,clearTimeout(I7),I7=window.setTimeout(m_.resetTapTwice,Vne);return}if(Wg&&n.touches.length===1){const i=n.touches[0];this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY}),Wg=!1,clearTimeout(I7)}n.touches.length===2&&this.setState({selectedElementIds:nt({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:nt(this.state.previousSelectedElementIds,this.state)}):ht.pointers.clear()});F(this,"pasteFromClipboard",sn(async n=>{var d,f;const i=!!UU,r=document.activeElement,s=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(r);if(n&&!s)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||lu(r)))return;const{x:a,y:l}=Mt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await A$(n,i);if(!c&&!i){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:i,sceneX:a,sceneY:l});if(u.text){const h=u.text.trim();h.startsWith("<svg")&&h.endsWith("</svg>")&&(c=KR(h))}}if(Fu(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}const h=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(h,c),this.initializeImageDimensions(h),this.setState({selectedElementIds:nt({[h.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(h){console.error(h)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!i)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const h=u.programmaticAPI?h4(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:h,files:u.files||null,position:"cursor",retainSeed:i})}else if(u.text){if(u.text&&q8e(u.text)){const p=await ye(()=>import("./index-OL5uQT7j.js").then(b=>b.b6),__vite__mapDeps([]),import.meta.url);try{const{elements:b,files:E}=await p.parseMermaidToExcalidraw(u.text),y=h4(b,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:y,files:E,position:"cursor"});return}catch(b){console.warn(`parsing pasted text as mermaid definition failed: ${b.message}`)}}const h=VP(u.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=h.map(p=>Jae(p)).filter(p=>{var b;return ZU(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||((b=Rf(p))==null?void 0:b.type)==="video")});if(!UU&&m.length>0&&m.length===h.length){const p=[];for(const b of m){const E=p[p.length-1],y=this.insertEmbeddableElement({sceneX:E?E.x+E.width+20:a,sceneY:l,link:Fr(b)});y&&p.push(y)}p.length&&this.setState({selectedElementIds:Object.fromEntries(p.map(b=>[b.id,!0]))});return}this.addTextFromPaste(u.text,i)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var T,x;const i=gd(n.elements,null,void 0),[r,s,o,a]=_t(i),l=Ni(r,o)/2,c=Ni(s,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=Mt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[b,E]=Rn(m,p,this.getEffectiveGridSize()),{duplicatedElements:y}=T6({type:"everything",elements:i.map(I=>Ce(I,{x:I.x+b-r,y:I.y+E-s})),randomizeSeed:!n.retainSeed}),v=this.scene.getElementsIncludingDeleted();let w=[...v,...y];w=((x=(T=this.props).onDuplicate)==null?void 0:x.call(T,w,v))||w,no(w,Se(y));const R=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(R){const I=_oe(y,R);j1(w,I,R,this.state)}this.scene.replaceAllElements(w),y.forEach(I=>{if(fe(I)&&Ht(I)){const M=Bn(I,this.scene.getElementsMapIncludingDeleted());Ji(I,M,this.scene.getElementsMapIncludingDeleted())}}),Rne&&za.loadElementsFonts(y).then(I=>{this.fonts.onLoaded(I)}),n.files&&this.addMissingFiles(n.files),this.store.shouldCaptureIncrement();const _=Vw(y);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Vs.get(i_)?this.state.openSidebar:null,...Li({editingGroupId:null,selectedElementIds:_.reduce((I,M)=>(Ht(M)||(I[M.id]=!0),I),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(y,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{vl&&this.resetContextMenuTimer(),ht.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||ut("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...dn(this.state,i.activeTool.locked?{type:"selection"}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const r=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(r==null?void 0:r.enabled)??i.frameRendering.enabled,clip:(r==null?void 0:r.clip)??i.frameRendering.clip,name:(r==null?void 0:r.name)??i.frameRendering.name,outline:(r==null?void 0:r.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(zpe)});F(this,"zoomCanvas",n=>{this.setState({...Eu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:ka(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(K1(n)?c=lle(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):K1(n)&&this.setState({toast:{message:k("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const r=Array.isArray(n)?n:[n];let s=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=_5({canvasOffsets:i.canvasOffsets,targetElements:r,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});s=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=z0(r,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=Iie({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:s.value},interpolateValue:(h,m,p,b)=>{if(b==="zoom")return h*Math.pow(m/h,Ya(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:s})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const r=await i.blob(),s=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(s,null),await n.delete("shared-file"),window.history.replaceState(null,Na,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",sn(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const r=i?{}:{...this.files},s={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!r[a.id]&&(s[a.id]=a,r[a.id]=a,a.mimeType===Ee.svg))try{const l=W6e(NC(Z6e(a.dataURL)),Ee.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=r,{addedFiles:s}});F(this,"updateScene",sn(n=>{const i=Za(n.elements??[]);if(n.captureUpdate&&n.captureUpdate!==K.EVENTUALLY){const r=this.store.snapshot.appState,s=this.store.snapshot.elements,o=n.appState?Object.assign({},r,n.appState):r,a=n.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),Se(i)):s;n.captureUpdate===K.IMMEDIATELY?this.store.captureIncrement(a,o):n.captureUpdate===K.NEVER&&this.store.updateSnapshot(a,o)}n.appState&&this.setState(n.appState),n.elements&&this.scene.replaceAllElements(i),n.collaborators&&this.setState({collaborators:n.collaborators})}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:r})=>{var a,l;let s;r===void 0?s=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:s=r?n:null;const o=s?{name:s}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!s});F(this,"updateCurrentCursorPosition",sn(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),r=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),s=16;return B0().rtl?{top:n+s,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width),0)+s,bottom:s,left:Math.max((i==null?void 0:i.right)??0,0)+s}:{top:n+s,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+s,0),bottom:s,left:Math.max((r==null?void 0:r.right)??0,0)+s}});F(this,"onKeyDown",sn(n=>{var o,a;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(l,c){const u=l[c];return typeof u=="function"?u.bind(l):c==="key"?n.shiftKey?l.key.toUpperCase():l.key.toLowerCase():u}})),!rE(n.target)){if((n.key===z.ESCAPE||n.key===z.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const l=Ve(this.scene.getNonDeletedElementsMap(),this.state);if(l.length===1&&ot(l[0])&&n.key===z.ENTER){this.startImageCropping(l[0]);return}if(n.key===z.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const c=l1(n.key);if(n[z.CTRL_OR_CMD]&&c&&!n.shiftKey){n.preventDefault();const u=Ve(this.scene.getNonDeletedElementsMap(),this.state);u.length===1&&Yb(u[0])&&this.flowChartCreator.createNodes(u[0],this.scene.getNonDeletedElementsMap(),this.state,BC(n.key)),(o=this.flowChartCreator.pendingNodes)!=null&&o.length&&!YU(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const u=Ve(this.scene.getNonDeletedElementsMap(),this.state);if(u.length===1&&c){n.preventDefault();const d=this.flowChartNavigator.exploreByDirection(u[0],this.scene.getNonDeletedElementsMap(),BC(n.key));if(d){this.setState(h=>({selectedElementIds:nt({[d]:!0},h)}));const f=this.scene.getNonDeletedElementsMap().get(d);f&&!YU([f],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(f,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[z.CTRL_OR_CMD]&&n.key===z.P&&!n.shiftKey&&!n.altKey){this.setToast({message:k("commandPalette.shortcutHint",{shortcut:Hi("commandPalette")})}),n.preventDefault();return}if(n[z.CTRL_OR_CMD]&&n.key.toLowerCase()===z.V&&(UU=n.shiftKey,clearTimeout(ck),ck=window.setTimeout(()=>{UU=!1},100)),n[z.CTRL_OR_CMD]&&lu(n.target)&&(n.code===et.MINUS||n.code===et.EQUAL)){n.preventDefault();return}if(lu(n.target)&&n.key!==z.ESCAPE||l1(n.key)&&rE(n.target))return;if(n.key===z.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===z.E&&n.shiftKey&&n[z.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===z.PAGE_UP||n.key===z.PAGE_DOWN){let l=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===z.PAGE_DOWN&&(l=-l),n.shiftKey?this.translateCanvas(c=>({scrollX:c.scrollX+l})):this.translateCanvas(c=>({scrollY:c.scrollY+l}))}if(((a=this.state.openDialog)==null?void 0:a.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[z.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),l1(n.key)){let l=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const c=l.find(me),u=new Set;l.filter(me).filter(m=>{const p=m.startBinding&&!l.some(E=>{var y;return E.id===((y=m.startBinding)==null?void 0:y.elementId)}),b=m.endBinding&&!l.some(E=>{var y;return E.id===((y=m.endBinding)==null?void 0:y.elementId)});return p||b}).forEach(m=>u.add(m.id)),l=l.filter(m=>!u.has(m.id));const d=this.getEffectiveGridSize()&&(n.shiftKey?wx:this.getEffectiveGridSize())||(n.shiftKey?Lne:wx);let f=0,h=0;n.key===z.ARROW_LEFT?f=-d:n.key===z.ARROW_RIGHT?f=d:n.key===z.ARROW_UP?h=-d:n.key===z.ARROW_DOWN&&(h=d),l.forEach(m=>{ee(m,{x:m.x+f,y:m.y+h},!1),mr(m,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:l})}),this.setState({suggestedBindings:S8(l.filter(m=>m.id!==(c==null?void 0:c.id)||d!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===z.ENTER){const l=this.scene.getSelectedElements(this.state);if(l.length===1){const c=l[0];if(n[z.CTRL_OR_CMD])ke(c)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==l[0].id)&&(this.store.shouldCaptureIncrement(),me(c)||this.setState({editingLinearElement:new ue(c)}));else if(fe(c)||xse(c)){let u;fe(c)||(u=c);const d=T8(c,this.state,this.scene.getNonDeletedElementsMap()),f=d.x,h=d.y;this.startTextEditing({sceneX:f,sceneY:h,container:u}),n.preventDefault();return}else Ie(c)&&this.setState({editingFrame:c.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const l=fye(n.key);l?(this.state.activeTool.type!==l&&ut("toolbar",l,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),l==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(c=>({currentItemArrowType:c.currentItemArrowType===ni.sharp?ni.round:c.currentItemArrowType===ni.round?ni.elbow:ni.sharp})),this.setActiveTool({type:l}),n.stopPropagation()):n.key===z.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===z.SPACE&&ht.pointers.size===0&&(qc=!0,St(this.interactiveCanvas,yt.GRAB),n.preventDefault()),(n.key===z.G||n.key===z.S)&&!n.altKey&&!n[z.CTRL_OR_CMD]){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;n.key===z.G&&(vh(this.state.activeTool.type)||l.some(c=>vh(c.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===z.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[z.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===z.F){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;(this.state.activeTool.type==="text"||l.find(c=>fe(c)||ze(c,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===z.K&&!n.altKey&&!n[z.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[z.CTRL_OR_CMD]&&(n.key===z.BACKSPACE||n.key===z.DELETE)&&Vs.set(H5,"clearCanvas");const i=n.key.toLocaleLowerCase(),r=i===z.S&&n.shiftKey,s=n.key===z.I||i===z.G&&n.shiftKey;(r||s)&&this.openEyeDropper({type:r?"stroke":"background"})}));F(this,"onKeyUp",sn(n=>{var i,r,s,o;if(n.key===z.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?St(this.interactiveCanvas,yt.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?xs(this.interactiveCanvas):(Eo(this.interactiveCanvas,this.state),this.setState({selectedElementIds:nt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),qc=!1),!n[z.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),l1(n.key)&&(m6(this.scene.getSelectedElements(this.state).filter(ke),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,Uu(this.state),((r=this.state.selectedLinearElement)==null?void 0:r.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})),!n[z.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:nt({[a.id]:!0},l)})),YU([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",(n,i=!1)=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const r=dn(this.state,n);r.type==="hand"?St(this.interactiveCanvas,yt.GRAB):qc||Eo(this.interactiveCanvas,{...this.state,activeTool:r}),Tie(document.activeElement)&&this.focusContainer(),Ew(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(n.type==="image"&&n.insertOnCanvasDirectly)??!1}),this.setState(s=>{const o={snapLines:s.snapLines.length?[]:s.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.shouldCaptureIncrement(),r.type==="lasso"?{...s,activeTool:r,...i?{}:{selectedElementIds:nt({},s),selectedGroupIds:nt({},s),editingGroupId:null,multiElement:null},...o}:r.type!=="selection"?{...s,activeTool:r,selectedElementIds:nt({},s),selectedGroupIds:nt({},s),editingGroupId:null,multiElement:null,...o}:{...s,activeTool:r,...o}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{St(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{xs(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>ht.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${k("labels.untitled")}-${Dx()}`);F(this,"onGestureStart",sn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:nt({},this.state),activeEmbeddable:null}),ht.initialScale=this.state.zoom.value}));F(this,"onGestureChange",sn(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=ht.initialScale;i&&this.setState(r=>({...Eu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ka(i*n.scale)},r)}))}));F(this,"onGestureEnd",sn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:nt(this.state.previousSelectedElementIds,this.state)}),ht.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:r=!0,container:s,autoEdit:o=!0})=>{let a=!1,l=r&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s);s&&l&&(ze(s,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?fe(u[0])?c=u[0]:s?c=ze(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Ju(d),h=this.state.currentItemFontSize;if(!c&&a&&s&&!Le(s)){const E=dF(Ct({fontSize:h,fontFamily:d}),f),y=fF(h,f),v=Math.max(s.height,y),w=Math.max(s.width,E);ee(s,{height:v,width:w}),n=s.x+w/2,i=s.y+v/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||Vr({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?Lr.MIDDLE:q2,containerId:a?s==null?void 0:s.id:void 0,groupIds:(s==null?void 0:s.groupIds)??[],lineHeight:f,angle:s?Le(s)?0:s.angle:0,frameId:m?m.id:null});if(!c&&a&&s&&ee(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(s&&a){const b=this.scene.getElementIndex(s.id);this.scene.insertElementAtIndex(p,b+1)}else this.scene.insertElement(p);o||c||s?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const i=this.scene.getSelectedElements(this.state);let{x:r,y:s}=Mt(n,this.state);if(i.length===1&&ke(i[0])){if(n[z.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&!me(i[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new ue(i[0])});return}else if(this.state.selectedLinearElement&&me(i[0])){const a=ue.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),l=a?ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.shouldCaptureIncrement(),ue.deleteFixedSegment(i[0],l);const c=ue.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),u=c?ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}}if(i.length===1&&ot(i[0])){this.startImageCropping(i[0]);return}if(xs(this.interactiveCanvas),Nu(this.state).length>0){const a=this.getElementAtPosition(r,s),l=a&&xoe(a,this.state.selectedGroupIds);if(l){this.store.shouldCaptureIncrement(),this.setState(c=>({...c,...Li({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),c,this)}));return}}if(xs(this.interactiveCanvas),!n[z.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const a=this.getElementAtPosition(r,s);if(rs(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}const l=this.getTextBindableContainerAtPosition(r,s);if(l&&(br(l)||!zs(l.backgroundColor)||of({x:r,y:s,element:l,shape:Ds(l,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){const c=T8(l,this.state,this.scene.getNonDeletedElementsMap());r=c.x,s=c.y}this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:l})}});F(this,"getElementLinkAtPosition",(n,i)=>{const r=this.scene.getNonDeletedElements();let s=-1;for(let o=r.length-1;o>=0;o--){const a=r[o];if(i&&a.id===i.id&&(s=o),a.link&&o>=s&&c7(a,this.scene.getNonDeletedElementsMap(),this.state,A(n.x,n.y),this.device.editor.isMobile))return a}});F(this,"redirectToLink",(n,i)=>{const r=wt(A(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),A(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||r>tu)return;const s=Mt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=c7(this.hitLinkElement,o,this.state,A(s.x,s.y),this.device.editor.isMobile),l=Mt(this.lastPointerUpEvent,this.state),c=c7(this.hitLinkElement,o,this.state,A(l.x,l.y),this.device.editor.isMobile);if(a&&c){aM();let u=this.hitLinkElement.link;if(u){u=Fr(u);let d;if(this.props.onLinkOpen&&(d=zP(te.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=GP(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(s=>sC(n,s,i));return r.length?r[r.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var h,m,p,b,E,y;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,ht.pointers.has(n.pointerId)&&ht.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=ht.initialScale;if(ht.pointers.size===2&&ht.lastCenter&&i&&ht.initialDistance){const v=TM(ht.pointers),w=v.x-ht.lastCenter.x,S=v.y-ht.lastCenter.y;ht.lastCenter=v;const R=SM(Array.from(ht.pointers.values())),_=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:R/ht.initialDistance,T=_?ka(i*_):this.state.zoom.value;this.setState(x=>{const I=Eu({viewportX:v.x,viewportY:v.y,nextZoom:T},x);this.translateCanvas({zoom:I.zoom,scrollX:I.scrollX+2*(w/T),scrollY:I.scrollY+2*(S/T),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else ht.lastCenter=ht.initialDistance=ht.initialScale=null;if(qc||Kg||x7||_h(this.state))return;const s=DM(C7,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(s?xs(this.interactiveCanvas):Eo(this.interactiveCanvas,this.state));const o=Mt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&U8e(this.state.activeTool.type)){const{originOffset:v,snapLines:w}=p8e(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(S=>{const R=Og(S.snapLines,w),_=S.originSnapOffset?Og(S.originSnapOffset,v):v;return S.snapLines===R&&S.originSnapOffset===_?null:{snapLines:R,originSnapOffset:_}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(v=>v.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const v=ue.handlePointerMove(n,a,l,this,this.scene.getNonDeletedElementsMap());v&&v!==this.state.editingLinearElement&&jn.flushSync(()=>{this.setState({editingLinearElement:v})}),(v==null?void 0:v.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(o,v.elbowed):jn.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(iF(this.state.activeTool.type)){const{newElement:v}=this.state;_a(v,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(v,[o],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:v}=this.state,{x:w,y:S}=v,{points:R,lastCommittedPoint:_}=v,T=R[R.length-1];if(Eo(this.interactiveCanvas,this.state),T===_)wt(A(a-w,l-S),T)>=zU?ee(v,{points:[...R,A(a-w,l-S)]},!1):St(this.interactiveCanvas,yt.POINTER);else if(R.length>2&&_&&wt(A(a-w,l-S),_)<zU)St(this.interactiveCanvas,yt.POINTER),ee(v,{points:R.slice(0,-1)},!1);else{const[x,I]=Rn(a,l,n[z.CTRL_OR_CMD]||me(v)?null:this.getEffectiveGridSize()),[M,D]=(v==null?void 0:v.lastCommittedPoint)??[0,0];let L=x-w-M,G=I-S-D;H1(n)&&({width:L,height:G}=gE(M+w,D+S,x,I)),qa(R,this.state.zoom.value)&&St(this.interactiveCanvas,yt.POINTER),ee(v,{points:[...R.slice(0,-1),A(M+L,D+G)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!s&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&!(d.length===1&&me(d[0]))){const v=zC(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(v&&v.transformHandleType){St(this.interactiveCanvas,VC(v));return}}}else if(d.length>1&&!s&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"){const v=HC(_t(d),a,l,this.state.zoom,n.pointerType,this.device);if(v){St(this.interactiveCanvas,VC({transformHandleType:v}));return}}const f=this.getElementAtPosition(o.x,o.y);this.hitLinkElement=this.getElementLinkAtPosition(o,f),!To(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(St(this.interactiveCanvas,yt.POINTER),Ybe(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(aM(),f&&(f.link||lr(f))&&this.state.selectedElementIds[f.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?St(this.interactiveCanvas,fe(f)?yt.TEXT:yt.CROSSHAIR):this.state.viewModeEnabled?St(this.interactiveCanvas,yt.GRAB):((p=this.state.openDialog)==null?void 0:p.name)==="elementLinkSelector"?St(this.interactiveCanvas,yt.AUTO):s?St(this.interactiveCanvas,yt.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[z.CTRL_OR_CMD]?St(this.interactiveCanvas,yt.AUTO):(f||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(f!=null&&f.locked)&&(f&&rs(f)&&this.isIframeLikeElementCenter(f,n,a,l)?(St(this.interactiveCanvas,yt.POINTER),this.setState({activeEmbeddable:{element:f,state:"hover"}})):(!f||!me(f)||!(f.startBinding||f.endBinding))&&(St(this.interactiveCanvas,yt.MOVE),((b=this.state.activeEmbeddable)==null?void 0:b.state)==="hover"&&this.setState({activeEmbeddable:null})))),((E=this.state.openDialog)==null?void 0:E.name)==="elementLinkSelector"&&f?this.setState(v=>({hoveredElementIds:Og(v.hoveredElementIds,Li({editingGroupId:v.editingGroupId,selectedElementIds:{[f.id]:!0}},this.scene.getNonDeletedElements(),v,this).selectedElementIds)})):((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&!f&&this.setState(v=>({hoveredElementIds:Og(v.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i)=>{const r=this.eraserTrail.addPointToPath(i.x,i.y,n.altKey);this.elementsPendingErasure=new Set(r),this.triggerRender()});F(this,"handleTouchMove",n=>{Zg=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches.map(p=>({...p,focus:!1}))})),Vs.set(_X,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:nt(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,b)=>(p[b]=this.state.selectedElementIds[b],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?K.EVENTUALLY:K.NEVER});return}const r=document.getSelection();if(r!=null&&r.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=HU(this.device,{isTouchScreen:!0})),Kg||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===_l.ERASER&&this.state.activeTool.type!==Xn.eraser){this.setState({activeTool:dn(this.state,{type:Xn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),b==null||b(),To(this.state)&&this.setState({activeTool:dn(this.state,{...this.state.activeTool.lastActiveTool||{type:Xn.selection},lastActiveToolBeforeEraser:null})})},p=rn(window,te.POINTER_UP,m,{once:!0});let b;requestAnimationFrame(()=>{b=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==_l.MAIN&&n.button!==_l.TOUCH&&n.button!==_l.ERASER||ht.pointers.size>1)return;const s=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,s)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,s))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="lasso")this.lassoTrail.startPath(s.origin.x,s.origin.y,n.shiftKey);else if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(n,s);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,s);else if(this.state.activeTool.type==="image"){St(this.interactiveCanvas,yt.CROSSHAIR);const m=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!m)return;this.setState({newElement:m,pendingImageElementId:null,multiElement:null});const{x:p,y:b}=Mt(n,this.state),E=this.getTopLayerFrameAtSceneCoords({x:p,y:b});ee(m,{x:p,y:b,frameId:E?E.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="custom"?Eo(this.interactiveCanvas,this.state):this.state.activeTool.type===Xn.frame||this.state.activeTool.type===Xn.magicframe?this.createFrameElementOnPointerDown(s,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(s.lastCoords.x,s.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,s);(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,s),this.onPointerDownEmitter.trigger(this.state.activeTool,s,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(s.lastCoords.x,s.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(s),l=this.onPointerUpFromPointerDownHandler(s),c=this.onKeyDownFromPointerDownHandler(s),u=this.onKeyUpFromPointerDownHandler(s);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(te.POINTER_MOVE,a),window.addEventListener(te.POINTER_UP,l),window.addEventListener(te.KEYDOWN,c),window.addEventListener(te.KEYUP,u),s.eventListeners.onMove=a,s.eventListeners.onUp=l,s.eventListeners.onKeyUp=u,s.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var s;this.removePointer(n),this.lastPointerUpEvent=n;const i=Mt({clientX:n.clientX,clientY:n.clientY},this.state),r=n.timeStamp-(((s=this.lastPointerDownEvent)==null?void 0:s.timeStamp)??0);if(this.device.editor.isMobile&&r<300){const o=this.getElementAtPosition(i.x,i.y);if(rs(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.device.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&rs(this.hitLinkElement)&&!f$(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,A(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(Zg=!1,vl?Zg=!0:vl=window.setTimeout(()=>{vl=0,Zg||this.handleCanvasContextMenu(n)},$ne))});F(this,"resetContextMenuTimer",()=>{clearTimeout(vl),vl=0,Zg=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{Qc==null||Qc(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(ht.pointers.size<=1&&(n.button===_l.WHEEL||n.button===_l.MAIN&&qc||_h(this.state)||this.state.viewModeEnabled)))return!1;Kg=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);St(this.interactiveCanvas,yt.GRABBING);let{clientX:s,clientY:o}=n;const a=b7(c=>{const u=s-c.clientX,d=o-c.clientY;if(s=c.clientX,o=c.clientY,r&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(te.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(te.PASTE,f),window.removeEventListener(te.POINTER_UP,h)},100)};document.body.addEventListener(te.PASTE,f),window.addEventListener(te.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=sn(Qc=()=>{Qc=null,Kg=!1,qc||(this.state.viewModeEnabled?St(this.interactiveCanvas,yt.GRAB):Eo(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,a),window.removeEventListener(te.POINTER_UP,l),window.removeEventListener(te.BLUR,l),a.flush()});return window.addEventListener(te.BLUR,l),window.addEventListener(te.POINTER_MOVE,a,{passive:!0}),window.addEventListener(te.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:nt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var r;if(this.state.activeTool.type==="selection"){const s=this.scene.getNonDeletedElements(),o=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!me(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=zC(s,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType))}else a.length>1&&(i.resize.handleType=HC(_t(a),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.device));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=Bs(hle(i.resize.handleType,a,o,i.origin.x,i.origin.y)),a.length===1&&ke(a[0])&&a[0].points.length===2&&(i.resize.arrowDirection=gle(i.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const u=this.state.editingLinearElement||this.state.selectedLinearElement,d=ue.handlePointerDown(n,this,this.store,i.origin,u,this.scene);if(d.hitElement&&(i.hit.element=d.hitElement),d.linearElementEditor&&(this.setState({selectedLinearElement:d.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:d.linearElementEditor})),d.didAddPoint)return!0}if(i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,i.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((r=i.hit.element)==null?void 0:r.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=this.getElementsAtPosition(i.origin.x,i.origin.y);const l=i.hit.element,c=i.hit.allHitElements.some(u=>this.isASelectedElement(u));if((l===null||!c)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(l),this.state.editingLinearElement)this.setState({selectedElementIds:nt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(l!=null){if(n[z.CTRL_OR_CMD])return this.state.selectedElementIds[l.id]||(i.hit.wasAddedToSelection=!0),this.setState(u=>({...Ioe(u,l),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[l.id]||(this.state.editingGroupId&&!N0(l,this.state.editingGroupId)&&this.setState({selectedElementIds:nt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!c&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(u=>{var h;let d={...u.selectedElementIds,[l.id]:!0};const f=[];if(Object.keys(u.selectedElementIds).forEach(m=>{const p=this.scene.getElement(m);p&&f.push(p)}),Ie(l))to(f,l.id).forEach(m=>{delete d[m.id]});else if(l.frameId)d[l.frameId]&&delete d[l.id];else{const m=l.groupIds,p=new Set(m.flatMap(b=>zt(this.scene.getNonDeletedElements(),b)).filter(b=>Ie(b)).map(b=>b.id));p.size>0&&f.forEach(b=>{b.frameId&&p.has(b.frameId)&&(delete d[b.id],b.groupIds.flatMap(E=>zt(this.scene.getNonDeletedElements(),E)).forEach(E=>{delete d[E.id]}))})}return((h=u.openDialog)==null?void 0:h.name)==="elementLinkSelector"&&(l.groupIds.some(m=>u.selectedGroupIds[m])||(d={[l.id]:!0})),{...Li({editingGroupId:u.editingGroupId,selectedElementIds:d},this.scene.getNonDeletedElements(),u,this),showHyperlinkPopup:l.link||lr(l)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let r=i.origin.x,s=i.origin.y;const o=this.getElementAtPosition(r,s,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(r,s);br(o)&&(a=o,r=o.x+o.width/2,s=o.y+o.height/2),this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),xs(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:dn(this.state,{type:"selection"})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,r)=>{const[s,o]=Rn(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),l=n.pressure===.5,c=zae({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[A(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:nt(f,d)}});const u=Hs(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:r,height:s})=>{var c;const[o,a]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=Pae({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:s});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:r})=>{var c;const[s,o]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Rf(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:k("toast.unrecognizedLinkFormat"),closable:!0});const l=RC({type:"embeddable",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.insertElement(l),l});F(this,"createImageElement",({sceneX:n,sceneY:i,addToFrameUnderCursor:r=!0})=>{var c;const[s,o]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=r?this.getTopLayerFrameAtSceneCoords({x:s,y:o}):null;return fB({type:"image",x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})});F(this,"handleLinearElementOnPointerDown",(n,i,r)=>{if(this.state.multiElement){const{multiElement:s}=this.state;if(s.type==="line"&&qa(s.points,this.state.zoom.value)){ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Ss);return}if(me(s)&&s.points.length>1){ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Ss);return}const{x:o,y:a,lastCommittedPoint:l}=s;if(s.points.length>1&&l&&wt(A(r.origin.x-o,r.origin.y-a),l)<zU){this.actionManager.executeAction(Ss);return}this.setState(c=>({selectedElementIds:nt({...c.selectedElementIds,[s.id]:!0},c)})),ee(s,{lastCommittedPoint:s.points[s.points.length-1]}),St(this.interactiveCanvas,yt.POINTER)}else{const[s,o]=Rn(r.origin.x,r.origin.y,n[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?Kw({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ni.round?{type:Nn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===ni.elbow,fixedSegments:this.state.currentItemArrowType===ni.elbow?[]:null}):Pu({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:Nn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:nt(p,m)}}),ee(f,{points:[...f.points,A(0,0)]});const h=Hs(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,me(f),me(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[r,s]=Rn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=RC({type:"embeddable",...a}):l=Ja({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[r,s]=Rn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:r,y:s,opacity:this.state.currentItemOpacity,locked:!1,...on},a=i===Xn.magicframe?SE(o):Ww(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||Ht(r)&&this.elementsPendingErasure.has(r.containerId)?(n=!0,Ce(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,n&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async({imageFile:n,imageElement:i,showCursorImagePreview:r=!1})=>{var u,d,f,h;if(!Fu(n))throw new Error(k("errors.unsupportedFileType"));const s=n.type;if(St(this.interactiveCanvas,"wait"),s===Ee.svg)try{n=KR(NC(await n.text()),n.name)}catch(m){throw console.warn(m),new Error(k("errors.svgImageInsertError"))}const o=await(((d=(u=this.props).generateIdForFile)==null?void 0:d.call(u,n))||Y6e(n));if(!o)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(k("errors.imageInsertError"));const a=this.files[o];if(!(a!=null&&a.dataURL)){try{n=await s4(n,{maxWidthOrHeight:Qne})}catch(m){console.error("Error trying to resizing image file on insertion",m)}if(n.size>Ix)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(Ix/1024/1024)}MB`}))}if(r){const m=(f=this.files[o])==null?void 0:f.dataURL,p=m&&K6e(m);this.setImagePreviewCursor(p||n)}const l=((h=this.files[o])==null?void 0:h.dataURL)||await r4(n),c=ee(i,{fileId:o},!1);return new Promise(async(m,p)=>{var b;try{this.addMissingFiles([{mimeType:s,id:o,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}]);const E=this.imageCache.get(o);E||(this.addNewImagesToImageCache(),await this.updateImageCache([c])),(E==null?void 0:E.image)instanceof Promise&&await E.image,this.state.pendingImageElementId!==c.id&&((b=this.state.newElement)==null?void 0:b.id)!==c.id&&this.initializeImageDimensions(c,!0),m(c)}catch(E){console.error(E),p(new Error(k("errors.imageInsertError")))}finally{r||xs(this.interactiveCanvas)}})});F(this,"insertImageElement",async(n,i,r)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{return await this.initializeImage({imageFile:i,imageElement:n,showCursorImagePreview:r})}catch(s){return ee(n,{isDeleted:!0}),this.actionManager.executeAction(Ss),this.setState({errorMessage:s.message||k("errors.imageInsertError")}),null}});F(this,"setImagePreviewCursor",async n=>{let r;try{r=await s4(n,{maxWidthOrHeight:96})}catch(o){throw o.cause==="UNSUPPORTED"?new Error(k("errors.unsupportedFileType")):o}let s=await r4(r);if(n.type===Ee.svg){const o=await gB(s);let a=Math.min(o.height,96),l=a*(o.width/o.height);l>96&&(l=96,a=l*(o.height/o.width));const c=document.createElement("canvas");c.height=a,c.width=l,c.getContext("2d").drawImage(o,0,0,l,a),s=c.toDataURL(Ee.svg)}this.state.pendingImageElementId&&St(this.interactiveCanvas,`url(${s}) 4 4, auto`)});F(this,"onImageAction",async({insertOnCanvasDirectly:n})=>{try{const i=this.state.width/2+this.state.offsetLeft,r=this.state.height/2+this.state.offsetTop,{x:s,y:o}=Mt({clientX:i,clientY:r},this.state),a=await F9({description:"Image",extensions:Object.keys(fh)}),l=this.createImageElement({sceneX:s,sceneY:o,addToFrameUnderCursor:!1});n?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:nt({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ss)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(i){i.name!=="AbortError"?console.error(i):console.warn(i),this.setState({pendingImageElementId:null,newElement:null,activeTool:dn(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Ss)})}});F(this,"initializeImageDimensions",(n,i=!1)=>{var s;const r=In(n)&&((s=this.imageCache.get(n.fileId))==null?void 0:s.image);if(!r||r instanceof Promise){if(n.width<tu/this.state.zoom.value&&n.height<tu/this.state.zoom.value){const o=100/this.state.zoom.value;ee(n,{x:n.x-o/2,y:n.y-o/2,width:o,height:o})}return}if(i||n.width<tu/this.state.zoom.value&&n.height<tu/this.state.zoom.value){const o=Math.max(this.state.height-120,160),a=Math.min(o,Math.floor(this.state.height*.5)/this.state.zoom.value),l=Math.min(r.naturalHeight,a),c=l*(r.naturalWidth/r.naturalHeight),u=n.x+n.width/2-c/2,d=n.y+n.height/2-l/2;ee(n,{x:u,y:d,width:c,height:l,crop:null})}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:r,erroredFiles:s}=await mB({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});if(r.size||s.size)for(const o of n)r.has(o.fileId)&&Yt.delete(o);return s.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(o=>In(o)&&s.has(o.fileId)?Ce(o,{status:"error"}):o)),{updatedFiles:r,erroredFiles:s}});F(this,"addNewImagesToImageCache",async(n=pB(this.scene.getNonDeletedElements()),i=this.files)=>{const r=n.filter(s=>!s.isDeleted&&!this.imageCache.has(s.fileId));if(r.length){const{updatedFiles:s}=await this.updateImageCache(r,i);s.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",Do(()=>{this.addNewImagesToImageCache()},Hne));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=Cse(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const r=Hs(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:r!=null?[r]:[]})});F(this,"maybeSuggestBindingsForLinearElementAtCoords",(n,i,r)=>{if(!i.length)return;const s=i.reduce((o,a)=>{const l=Hs(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,me(n),me(n));return l!=null&&!pF(n,r==null?void 0:r.id,l)&&o.push(l),o},[]);this.setState({suggestedBindings:s})});F(this,"handleInteractiveCanvasRef",n=>{var i,r;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(te.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(te.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(te.TOUCH_START,this.onTouchStart),(r=this.interactiveCanvas)==null||r.removeEventListener(te.TOUCH_END,this.onTouchEnd))});F(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:i,fileHandle:r}=await Q6e(n),{x:s,y:o}=Mt(n,this.state);try{if(Fu(i)&&this.isToolSupported("image")){if((i==null?void 0:i.type)===Ee.png||(i==null?void 0:i.type)===Ee.svg)try{const h=await $9(i,this.state,this.scene.getElementsIncludingDeleted(),r);this.syncActionResult({...h,appState:{...h.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY});return}catch(h){if(h.name!=="EncodingError")throw new Error(k("alerts.couldNotLoadInvalidFile"))}const f=this.createImageElement({sceneX:s,sceneY:o});this.insertImageElement(f,i),this.initializeImageDimensions(f),this.setState({selectedElementIds:nt({[f.id]:!0},this.state)});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(Ee.excalidrawlib);if(a&&typeof a=="string"){try{const f=T$(a);this.addElementsFromPasteOrLibrary({elements:Q$(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(i&&await this.loadFileToCanvas(i,r),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&ZU(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=Rf(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:s,sceneY:o,link:Fr(f)});h&&this.setState({selectedElementIds:{[h.id]:!0}})}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await G9(n);try{const r=this.scene.getElementsIncludingDeleted();let s;try{s=await _$(n,this.state,r,i)}catch(o){const a=o instanceof yu;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:k("errors.imageToolNotSupported")});return}const l=k(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!s)return;s.type===Ee.excalidraw?(Za(r.concat(s.data.elements)),this.store.updateSnapshot(Se(r),this.state),this.setState({isLoading:!0}),this.syncActionResult({...s.data,appState:{...s.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY})):s.type===Ee.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:k("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==_l.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:i,y:r}=Mt(n,this.state),s=this.getElementAtPosition(i,r,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:r},o),l=s||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;ut("contextMenu","openContextMenu",l),this.setState({...s&&!this.state.selectedElementIds[s.id]?{...this.state,...Li({editingGroupId:this.state.editingGroupId,selectedElementIds:{[s.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:ke(s)?new ue(s):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,r=!0)=>{var m,p,b;const s=this.state.selectionElement,o=n.lastCoords;if(s&&this.state.activeTool.type!=="eraser"){GC({newElement:s,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Ni(n.origin.x,o.x),height:Ni(n.origin.y,o.y),shouldMaintainAspectRatio:Dg(i),shouldResizeFromCenter:!1,zoom:this.state.zoom.value,informMutation:r});return}const a=this.state.newElement;if(!a)return;let[l,c]=Rn(o.x,o.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=In(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=m8e(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((b=this.state.originSnapOffset)==null?void 0:b.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),GC({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Ni(n.originInGrid.x,l),height:Ni(n.originInGrid.y,c),shouldMaintainAspectRatio:ot(a)?!Dg(i):Dg(i),shouldResizeFromCenter:xx(i),zoom:this.state.zoom.value,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:r}),this.setState({newElement:a}),(this.state.activeTool.type===Xn.frame||this.state.activeTool.type===Xn.magicframe)&&this.setState({elementsToHighlight:WU(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const r=n.resize.handleType,s=n.lastCoords,[o,a]=Rn(s.x-n.resize.offset.x,s.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(r&&l&&ot(l)){const u=n.originalElements.get(l.id),d=In(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&ot(u)&&d&&!(d instanceof Promise)){const[f,h]=Rn(s.x,s.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:b}=RM([l],[u],this,i,m,r);ee(l,Qoe(l,r,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),mr(l,this.scene.getNonDeletedElementsMap(),{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:r&&r!=="rotation",snapLines:b})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const r=this.scene.getSelectedElements(this.state),s=r.filter(d=>Ie(d)),o=n.resize.handleType;if(s.length>0&&o==="rotation"||r.length===1&&me(r[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Rn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(s.forEach(d=>{to(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Rn(a.x,a.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,r);const{snapOffset:p,snapLines:b}=RM(r,Ve(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:b})}if(cle(n.originalElements,o,r,this.scene.getElementsMapIncludingDeleted(),this.scene,H1(i),xx(i),r.some(d=>ot(d))?!Dg(i):Dg(i),l,c,n.resize.center.x,n.resize.center.y)){const d=S8(r,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return s.forEach(h=>{WU(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];return i.push(iM,nM),n==="canvas"?this.state.viewModeEnabled?[...i,sM,a4,_M,l4]:[eM,Gn,iM,nM,rM,Gn,Que,qbe,Gn,sM,Fbe,a4,_M,l4]:(i.push(rM),this.state.viewModeEnabled?[u2,...i]:[Gn,tM,u2,eM,Gn,e8e,t8e,n8e,Gn,Jye,Gn,...i,Gn,_be,Tbe,Gn,Ibe,s8e,Bbe,zbe,$be,xbe,Gn,Mbe,Gn,Wue,Kue,Zue,que,Gn,Obe,Nbe,Gn,Qye,Gn,B$,H$,Gn,Jue,Zbe,Gn,Wz])});F(this,"handleWheel",sn(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[z.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),Kg)return;const{deltaX:i,deltaY:r}=n;if(n.metaKey||n.ctrlKey){const s=Math.sign(r),o=Hb*100,a=Math.abs(r);let l=r;a>o&&(l=o*s);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-s*Math.min(1,a/20),this.translateCanvas(u=>({...Eu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ka(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:s,scrollX:o})=>({scrollX:o-(r||i)/s.value}));return}this.translateCanvas(({zoom:s,scrollX:o,scrollY:a})=>({scrollX:o-i/s.value,scrollY:a-r/s.value}))}));F(this,"savePointer",(n,i,r)=>{var l,c;if(!n||!i)return;const{x:s,y:o}=Mt({clientX:n,clientY:i},this.state),a={x:s,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:r,pointersMap:ht.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",ja(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const r=this.excalidrawContainerRef.current,{width:s,height:o,left:a,top:l}=r.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(s===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:s,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=so(),{excalidrawAPI:r,viewModeEnabled:s=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${k("labels.untitled")}-${Dx()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:s,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=tF(),this.library=new L5e(this),this.actionManager=new o8e(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Yo,this.canvas=document.createElement("canvas"),this.rc=Bc.canvas(this.canvas),this.renderer=new NM(this.scene),this.visibleElements=[],this.store=new Kle,this.history=new _u,r){const d={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof r=="function"?r(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new za(this.scene),this.history=new _u,this.actionManager.registerAll($E),this.actionManager.registerAction(i8e(this.history,this.store)),this.actionManager.registerAction(r8e(this.history,this.store))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let r=null;const s=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!s)break;for(const o of s)o.contentWindow===n.source&&(r=o.contentWindow);r==null||r.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const r=i.id,s=i.info.playerState;Object.values(jp).includes(s)&&A7.set(r,s)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var r,s,o,a;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===n&&((s=this.state.activeEmbeddable)==null?void 0:s.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Rl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=A7.get(n.id);switch(l||(A7.set(n.id,jp.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case jp.PLAYING:case jp.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,r,s){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&r>=n.x+n.width/3&&r<=n.x+2*n.width/3&&s>=n.y+n.height/3&&s<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,r=this.state.height,s=this.scene.getNonDeletedElements().filter(o=>lr(o)&&this.embedsValidationStatus.get(o.id)===!0||Rl(o));return g(pe,{children:s.map(o=>{var p,b,E,y,v,w,S,R,_;const{x:a,y:l}=Fs({sceneX:o.x,sceneY:o.y},this.state),c=E6(o,i,r,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Rl(o)){f=null;const T=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(T.status==="done"){const x=T.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>x}}else if(T.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>Y1(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===xe.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let x;T.code==="ERR_GENERATION_INTERRUPTED"?x="Generation was interrupted...":x=T.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>Y1(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${je.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${x}</h3>
                  `)}}}else f=Rf(Uw(o.link||""));const h=((b=this.state.activeEmbeddable)==null?void 0:b.element)===o&&((E=this.state.activeEmbeddable)==null?void 0:E.state)==="active",m=((y=this.state.activeEmbeddable)==null?void 0:y.element)===o&&((v=this.state.activeEmbeddable)==null?void 0:v.state)==="hover";return g("div",{className:be("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:QF(o,pr(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?IP:1),"--embeddable-radius":`${js(Math.min(o.width,o.height),o)}px`},children:P("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?nu.enabled:nu.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:k("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(lr(o)?(R=(S=this.props).renderEmbeddable)==null?void 0:R.call(S,o,this.state):null)??g("iframe",{ref:T=>this.cacheEmbeddableRef(o,T),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(_=f==null?void 0:f.sandbox)!=null&&_.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var d,f,h,m,p,b,E,y;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderCustomStats:r}=this.props,s=this.scene.getSceneNonce(),{elementsMap:o,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:s,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(d=this.state.newElement)==null?void 0:d.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0];return g("div",{className:be("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?nu.disabled:nu.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(NX.Provider,{value:this,children:g(PX.Provider,{value:this.props,children:g(u_.Provider,{value:this.excalidrawContainerValue,children:g(c_.Provider,{value:this.device,children:g(h_.Provider,{value:this.setAppState,children:g(f_.Provider,{value:this.state,children:P(d_.Provider,{value:this.scene.getNonDeletedElements(),children:[P(g_.Provider,{value:this.actionManager,children:[g(pEe,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:B0().code,renderTopRightUI:i,renderCustomStats:r,showExitZenModeBtn:typeof((h=this.props)==null?void 0:h.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(bEe,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),n.length===1&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(jbe,{element:u,elementsMap:l,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&XU(u)&&g(PM,{element:u,elementsMap:o,children:g(S7,{title:k("labels.convertToCode"),icon:zz,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&Rl(u)&&((b=(p=u.customData)==null?void 0:p.generationData)==null?void 0:b.status)==="done"&&P(PM,{element:u,elementsMap:o,children:[g(S7,{title:k("labels.copySource"),icon:jm,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),g(S7,{title:"Enter fullscreen",icon:pue,checked:!1,onChange:()=>{const v=this.getHTMLIFrameElement(u);if(v)try{v.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(w){console.warn(w),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(AEe,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(c7e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:v=>{this.setState({contextMenu:null},()=>{this.focusContainer(),v==null||v()})}}),g(TEe,{canvas:this.canvas,rc:this.rc,elementsMap:o,allElementsMap:l,visibleElements:a,sceneNonce:s,selectionNonce:(E=this.state.selectionElement)==null?void 0:E.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:im(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(xEe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:o,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(vEe,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:o,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:s,selectionNonce:(y=this.state.selectionElement)==null?void 0:y.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(u7e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const r=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}const s=Hw(this.scene.getNonDeletedElements(),n).filter(l=>!XU(l));if(!s.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),ut("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),ut("ai","generate (start)","d2c");try{const{html:l}=await r({frame:n,children:s});if(ut("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){ut("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,r;((r=(i=n.customData)==null?void 0:i.generationData)==null?void 0:r.status)==="done"&&(Vc(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(r=>{In(r)&&i[r.fileId]&&(this.imageCache.delete(r.fileId),Yt.delete(r))})}async componentDidMount(){var i;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onStoreIncrementEmitter.on(r=>{this.history.record(r.elementsChange,r.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),Q3&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(i=this.resizeObserver)==null||i.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),Mne()&&!ase()&&this.setState({errorMessage:g(a7e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Yo,this.fonts=new za(this.scene),this.renderer=new NM(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Yt.destroy(),Ms.destroy(),clearTimeout(vl),zn.clearCache(),Li.clearCache(),vl=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(rn(document,te.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(rn(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),rn(window,te.MESSAGE,this.onWindowMessage,!1),rn(document,te.POINTER_UP,this.removePointer,{passive:!1}),rn(document,te.COPY,this.onCopy,{passive:!1}),rn(document,te.KEYUP,this.onKeyUp,{passive:!0}),rn(document,te.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),rn(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),rn(document,te.GESTURE_START,this.onGestureStart,!1),rn(document,te.GESTURE_CHANGE,this.onGestureChange,!1),rn(document,te.GESTURE_END,this.onGestureEnd,!1),rn(window,te.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(rn(document,te.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),rn(document,te.PASTE,this.pasteFromClipboard,{passive:!1}),rn(document,te.CUT,this.onCut,{passive:!1}),rn(window,te.RESIZE,this.onResize,!1),rn(window,te.UNLOAD,this.onUnload,!1),rn(window,te.BLUR,this.onBlur,!1),rn(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),rn(this.excalidrawContainerRef.current,te.DRAG_OVER,this.disableEvent,!1),rn(this.excalidrawContainerRef.current,te.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(rn(Mie(this.excalidrawContainerRef.current),te.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var c,u,d,f,h,m,p,b,E,y;this.updateEmbeddables();const r=this.scene.getElementsIncludingDeleted(),s=this.scene.getElementsMapIncludingDeleted(),o=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((u=(c=this.props)==null?void 0:c.onScrollChange)==null||u.call(c,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&To(this.state)&&this.setState({activeTool:dn(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&hV(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),To(i)&&!To(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((d=i.openDialog)==null?void 0:d.name)==="elementLinkSelector"||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")&&((h=i.openDialog)==null?void 0:h.name)!==((m=this.state.openDialog)==null?void 0:m.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(p=this.excalidrawContainerRef.current)==null||p.classList.toggle("theme--dark",this.state.theme===xe.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Ss)}),(b=this.state.editingTextElement)!=null&&b.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});const{multiElement:l}=i;i.activeTool!==this.state.activeTool&&l!=null&&Uu(this.state)&&_a(l,!1)&&fE(l,this.state,Bs(ue.getPointAtIndexGlobalCoordinates(l,-1,o)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(s,this.state),this.state.isLoading||((y=(E=this.props).onChange)==null||y.call(E,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){Wg=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:r,sceneY:s}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(o.map(async f=>{try{return{file:await q6e(f)}}catch(h){let m=h.message;return h.cause==="FETCH_ERROR"?m=k("errors.failedToFetchImage"):h.cause==="UNSUPPORTED"&&(m=k("errors.unsupportedFileType")),{errorMessage:m}}}));let l=s,c=!1;const u={};for(const f of a)if(f.file){const h=this.createImageElement({sceneX:r,sceneY:l}),m=await this.insertImageElement(h,f.file);m&&(c||(c=!0,l-=m.height/2),ee(m,{y:l},!1),l=h.y+h.height+25,u[h.id]=!0)}this.setState({selectedElementIds:nt(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:r,y:s}=Mt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Lm,verticalAlign:q2,locked:!1},a=Ct({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Ju(o.fontFamily),[c,,u]=oB(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=s;const m=i?[n]:n.split(`
`),p=m.reduce((b,E,y)=>{var w;const v=Uh(E).trim();if(v.length){const S=this.getTopLayerFrameAtSceneCoords({x:r,y:h});let R=Vi(v,a,l);const _=R.width>d,T=_?xd(v,a,d):v;R=_?Vi(T,a,l):R;const x=r-R.width/2,I=h-R.height/2,M=Vr({...o,x,y:I,text:T,originalText:v,lineHeight:l,autoResize:!_,frameId:S?S.id:null});b.push(M),h+=M.height+f}else((w=m[y-1])==null?void 0:w.trim())&&(h+=Bm(o.fontSize,l)+f);return b},[]);p.length!==0&&(this.scene.insertElements(p),this.setState({selectedElementIds:nt(Object.fromEntries(p.map(b=>[b.id,!0])),this.state)}),!i&&p.length>1&&uk===!1&&!this.device.editor.isMobile&&(this.setToast({message:k("toast.pasteAsSingleElement",{shortcut:Q("CtrlOrCmd+Shift+V")}),duration:5e3}),uk=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(n,{isExistingElement:i=!1}){const r=this.scene.getElementsMapIncludingDeleted(),s=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&fe(l)?Ce(l,{originalText:o,isDeleted:a??l.isDeleted,...dB(l,Bn(l,r),r,o)}):l)])};Z8e({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=Fs({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:sn(o=>{s(o,!1),mE(n)&&mr(n,this.scene.getNonDeletedElementsMap())}),onSubmit:sn(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(s(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;jn.flushSync(()=>{this.setState(u=>({selectedElementIds:nt({...u.selectedElementIds,[c]:!0},u)}))})}l&&yF(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.shouldCaptureIncrement(),jn.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Eo(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),s(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:nt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const r=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return r&&fe(r)&&!r.isDeleted?r:null}getElementAtPosition(n,i,r){const s=this.getElementsAtPosition(n,i,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(s.length>1){if(r!=null&&r.preferSelected){for(let a=s.length-1;a>-1;a--)if(this.state.selectedElementIds[s[a].id])return s[a]}const o=s[s.length-1];return of({x:n,y:i,element:o,shape:Ds(o,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:Ie(o)?this.frameNameBoundsCache.get(o):null})?o:s[s.length-2]}return s.length===1?s[0]:null}getElementsAtPosition(n,i,r=!1,s=!1){const o=[],a=this.scene.getNonDeletedElementsMap();return(r&&s?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(c=>(s||!c.locked)&&(r||!(fe(c)&&c.containerId)))).filter(c=>this.hitElement(n,i,c)).filter(c=>{const u=pr(c,a);return u&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?sC({x:n,y:i},u,a):!0}).filter(c=>Rl(c)?(o.push(c),!1):!0).concat(o)}getElementHitThreshold(){return Pne/this.state.zoom.value}hitElement(n,i,r,s=!0){if(s&&this.state.selectedElementIds[r.id]&&yB([r],this.state)){const a=Sae(r,this.scene.getNonDeletedElementsMap(),ot(r)?0:this.getElementHitThreshold());if(P0(A(n,i),a))return!0}return aF(n,i,GF(r,this.scene.getNonDeletedElementsMap()))?!0:of({x:n,y:i,element:r,shape:Ds(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Ie(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(n,i){const r=this.scene.getNonDeletedElements(),s=this.scene.getSelectedElements(this.state);if(s.length===1)return Ou(s[0],!1)?s[0]:null;let o=null;for(let a=r.length-1;a>=0;--a){if(r[a].isDeleted)continue;const[l,c,u,d]=Pe(r[a],this.scene.getNonDeletedElementsMap());if(Le(r[a])&&of({x:n,y:i,element:r[a],shape:Ds(r[a],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){o=r[a];break}else if(l<n&&n<u&&c<i&&i<d){o=r[a];break}}return Ou(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,r){const s=this.scene.getNonDeletedElementsMap(),o=ue.getElement(n.elementId,s);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;of({x:i,y:r,element:o,shape:Ds(o,this.scene.getNonDeletedElementsMap())})?(a=ue.getPointIndexUnderCursor(o,s,this.state.zoom,i,r),l=ue.getSegmentMidpointHitCoords(n,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),(me(o)?a===0||a===o.points.length-1:a>=0)||l?St(this.interactiveCanvas,yt.POINTER):this.hitElement(i,r,o)&&(!me(o)||!(o.startBinding||o.endBinding))&&St(this.interactiveCanvas,yt.MOVE)):this.hitElement(i,r,o)&&(!me(o)||!(o.startBinding||o.endBinding))&&St(this.interactiveCanvas,yt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),ue.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else St(this.interactiveCanvas,yt.AUTO)}updateGestureOnPointerDown(n){ht.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),ht.pointers.size===2&&(ht.lastCenter=TM(ht.pointers),ht.initialScale=this.state.zoom.value,ht.initialDistance=SM(Array.from(ht.pointers.values())))}initialPointerDownState(n){const i=Mt(n,this.state),r=this.scene.getSelectedElements(this.state),[s,o,a,l]=_t(r),c=r.findIndex(me)===0;return{origin:i,withCmdOrCtrl:n[z.CTRL_OR_CMD],originInGrid:Bs(Rn(i.x,i.y,n[z.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:DM(C7,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,Sc(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+s)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,r)},drag:{hasOccurred:!1,offset:null,origin:{...i}},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;x7=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const r=b7(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),s=sn(()=>{Qc=null,x7=!1,Eo(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,r),window.removeEventListener(te.POINTER_UP,s),r.flush()});return Qc=s,window.addEventListener(te.POINTER_MOVE,r),window.addEventListener(te.POINTER_UP,s),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const r=this.getElementHitThreshold(),[s,o,a,l]=_t(i);return n.x>s-r&&n.x<a+r&&n.y>o-r&&n.y<l+r}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:Qh(n)?Nn.ADAPTIVE_RADIUS:Nn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,r=!1){Ac({event:n,app:this,selectedElements:i})&&(r||!Ms.getReferenceSnapPoints())&&Ms.setReferenceSnapPoints(d8e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,r=!1){Ac({event:n,app:this,selectedElements:i})&&(r||!Ms.getVisibleGaps())&&Ms.setVisibleGaps(u8e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return sn(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return sn(i=>{i.key===z.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return b7(i=>{var f,h,m,p,b,E;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const r=Mt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[y,v]=Rn(r.x,r.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let w=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(w<0){const R=ue.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:y,y:v},this.state,this.scene.getNonDeletedElementsMap());w=R?ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,R,this.scene.getNonDeletedElementsMap()):-1}const S=ue.moveFixedSegment(this.state.selectedLinearElement,w,y,v,this.scene.getNonDeletedElementsMap());jn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:S.segmentMidPointHoveredCoords,pointerDownState:S.pointerDownState}})});return}const s=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=r,n.drag.offset===null&&(n.drag.offset=Bs(_le(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(To(this.state)){this.handleEraser(i,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);const[a,l]=Rn(r.x,r.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&wt(A(r.x,r.y),A(n.origin.x,n.origin.y))<tu)return;if(n.resize.isResizing&&(n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const y=this.state.editingLinearElement||this.state.selectedLinearElement;if(ue.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,c)){const w=ue.addMidpoint(this.state.selectedLinearElement,r,this,!i[z.CTRL_OR_CMD],c);if(!w)return;jn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(y.pointerDownState.segmentMidpoint.value!==null&&!y.pointerDownState.segmentMidpoint.added)return;const v=ue.handlePointDragging(i,this,r.x,r.y,(w,S)=>{this.maybeSuggestBindingsForLinearElementAtCoords(w,S)},y,this.scene);if(v){n.lastCoords.x=r.x,n.lastCoords.y=r.y,n.drag.hasOccurred=!0,this.setState({editingLinearElement:this.state.editingLinearElement?v:null,selectedLinearElement:v});return}}const u=n.hit.allHitElements.some(y=>this.isASelectedElement(y)),d=this.state.editingLinearElement&&i.shiftKey&&this.state.editingLinearElement.elementId===((h=n.hit.element)==null?void 0:h.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d&&this.state.activeTool.type!=="lasso"){const y=this.scene.getSelectedElements(this.state);if(y.every(R=>R.locked))return;const v=y.find(R=>Ie(R)),w=this.getTopLayerFrameAtSceneCoords(r),S=w&&!v?w:null;if(this.state.frameToHighlight!==S&&jn.flushSync(()=>{this.setState({frameToHighlight:S})}),n.drag.hasOccurred=!0,y.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((m=this.state.activeEmbeddable)==null?void 0:m.state)!=="active"){const R={x:r.x-n.drag.origin.x,y:r.y-n.drag.origin.y},_=[...n.originalElements.values()],T=i.shiftKey;if(T){const M=Math.abs(R.x),D=Math.abs(R.y),L=T&&M<D,G=T&&M>D;L&&(R.x=0),G&&(R.y=0)}if(this.state.croppingElementId){const M=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(M&&ot(M)&&M.crop!==null&&n.hit.element===M){const D=M.crop,L=In(M)&&((p=this.imageCache.get(M.fileId))==null?void 0:p.image);if(L&&!(L instanceof Promise)){const G=Rt(Ui(r.x-s.x,r.y-s.y),Math.max(this.state.zoom.value,2)),[H,V,$,j,X,Z]=Pe(M,c),ge=se(q(A(H,V),A(X,Z),M.angle)),ce=se(q(A($,V),A(X,Z),M.angle)),le=se(q(A(H,j),A(X,Z),M.angle)),Be=ci(i6(ce,ge)),$e=ci(i6(le,ge)),Tt=Ui(Ax(G,Be),Ax(G,$e)),at={...D,x:Xe(D.x-Tt[0]*Math.sign(M.scale[0]),0,L.naturalWidth-D.width),y:Xe(D.y-Tt[1]*Math.sign(M.scale[1]),0,L.naturalHeight-D.height)};ee(M,{crop:at});return}}}this.maybeCacheVisibleGaps(i,y),this.maybeCacheReferenceSnapPoints(i,y);const{snapOffset:x,snapLines:I}=f8e(_,R,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:I}),this.state.editingFrame||vle(n,y,R,this.scene,x,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(y.length!==1||!me(y[0]))&&this.setState({suggestedBindings:S8(y,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const M=this.scene.getElementsIncludingDeleted(),D=n.hit.element,L=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});D&&n.hit.wasAddedToSelection&&!L.find(ce=>ce.id===D.id)&&L.push(D);const G=new Map(L.map(ce=>[ce.id,ce])),{duplicatedElements:H,duplicateElementsMap:V,elementsWithDuplicates:$,origIdToDuplicateId:j}=T6({type:"in-place",elements:M,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:G,overrides:({duplicateElement:ce,origElement:le})=>({frameId:ce.frameId??le.frameId,seed:Xo()})});H.forEach(ce=>{n.originalElements.set(ce.id,Sc(ce))});const X=$.map(ce=>{if(G.has(ce.id)){const le=n.originalElements.get(ce.id);if(le)return Ce(ce,{x:le.x,y:le.y})}return ce}),Z=(E=(b=this.props).onDuplicate)==null?void 0:E.call(b,X,M),ge=no(Z||X,Se(H));jn.flushSync(()=>{if(n.hit.element){const ce=j.get(n.hit.element.id),le=ce&&V.get(ce);n.hit.element=le||null}n.hit.allHitElements=n.hit.allHitElements.reduce((ce,le)=>{const Be=j.get(le.id),$e=Be&&V.get(Be);return $e&&ce.push($e),ce},[]),n.drag.origin=Mt(i,this.state),this.setState(ce=>({...LF(H,this.scene.getNonDeletedElements(),ce)})),this.scene.replaceAllElements(ge),this.maybeCacheVisibleGaps(i,L,!0),this.maybeCacheReferenceSnapPoints(i,L,!0)})}return}}if(this.state.selectionElement)n.lastCoords.x=r.x,n.lastCoords.y=r.y,i.altKey?(this.setActiveTool({type:"lasso",fromSelection:!0},i.shiftKey),this.lassoTrail.startPath(n.origin.x,n.origin.y,i.shiftKey),this.setAppState({selectionElement:null})):this.maybeDragNewGenericElement(n,i);else if(this.state.activeTool.type==="lasso")!i.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",n),n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(r.x,r.y,i.shiftKey);else{const y=this.state.newElement;if(!y)return;if(y.type==="freedraw"){const v=y.points,w=r.x-y.x,S=r.y-y.y,R=v.length>0&&v[v.length-1];if(!(R&&R[0]===w&&R[1]===S)){const T=y.simulatePressure?y.pressures:[...y.pressures,i.pressure];ee(y,{points:[...v,A(w,S)],pressures:T},!1),this.setState({newElement:y})}}else if(ke(y)){n.drag.hasOccurred=!0;const v=y.points;let w=a-y.x,S=l-y.y;H1(i)&&v.length===2&&({width:w,height:S}=gE(y.x,y.y,r.x,r.y)),v.length===1?ee(y,{points:[...v,A(w,S)]},!1):(v.length===2||v.length>1&&me(y))&&ee(y,{points:[...v.slice(0,-1),A(w,S)]},!1,{isDragging:!0}),this.setState({newElement:y}),_a(y,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(y,[r],this.state.startBoundElement)}else n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const y=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)ue.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let v=!0;!i.shiftKey&&zn(y,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(S=>Li({...S,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),S,this)):v=!1);const w=this.state.selectionElement?$w(y,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(S=>{const R={...v&&S.selectedElementIds,...w.reduce((_,T)=>(_[T.id]=!0,_),{})};return n.hit.element&&(w.length?delete R[n.hit.element.id]:R[n.hit.element.id]=!0),S=v?S:{...S,selectedGroupIds:{},editingGroupId:null},{...Li({editingGroupId:S.editingGroupId,selectedElementIds:R},this.scene.getNonDeletedElements(),S,this),selectedLinearElement:w.length===1&&ke(w[0])?new ue(w[0]):null,showHyperlinkPopup:w.length===1&&(w[0].link||lr(w[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){if(i.scrollbars.isOverHorizontal){const r=n.clientX,s=r-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-s/this.state.zoom.value}),i.lastCoords.x=r,!0}if(i.scrollbars.isOverVertical){const r=n.clientY,s=r-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-s/this.state.zoom.value}),i.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(n){return sn(i=>{var b,E,y,v,w,S,R,_,T,x,I,M;this.removePointer(i),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:r,resizingElement:s,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState(D=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Og(D.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Ms.setReferenceSnapPoints(null),Ms.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});const f=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((E=(b=n.hit)==null?void 0:b.element)!=null&&E.id)){const D=f.get(n.hit.element.id);eo(D)&&((y=D.boundElements)==null||y.filter(L=>L.type==="arrow").map(L=>f.get(L.id)).filter(L=>me(L)).forEach(L=>{L&&ee(L,{},!0)}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((w=(v=n.hit)==null?void 0:v.element)==null?void 0:w.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Ss);else{const D=ue.handlePointerUp(i,this.state.editingLinearElement,this.state,this.scene);D!==this.state.editingLinearElement&&this.setState({editingLinearElement:D,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const D=ue.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());D&&ee(D,{},!0)}if(((R=(S=n.hit)==null?void 0:S.element)==null?void 0:R.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{const D=ue.handlePointerUp(i,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:L,endBindingElement:G}=D,H=this.scene.getElement(D.elementId);_a(H)&&qb(H,L,G,f,this.scene),D!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...D,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(te.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(te.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(te.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(te.KEYUP,n.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(T=(_=this.props)==null?void 0:_.onPointerUp)==null||T.call(_,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(r==null?void 0:r.type)==="freedraw"){const D=Mt(i,this.state),L=r.points;let G=D.x-r.x,H=D.y-r.y;G===L[0][0]&&H===L[0][1]&&(H+=1e-4,G+=1e-4);const V=r.simulatePressure?[]:[...r.pressures,i.pressure];ee(r,{points:[...L,A(G,H)],pressures:V,lastCommittedPoint:A(G,H)}),this.actionManager.executeAction(Ss);return}if(ot(r)){const D=r;try{this.initializeImageDimensions(D),this.setState({selectedElementIds:nt({[D.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ss)})}catch(L){console.error(L),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(G=>G.id!==D.id)),this.actionManager.executeAction(Ss)}return}if(ke(r)){r.points.length>1&&this.store.shouldCaptureIncrement();const D=Mt(i,this.state);!n.drag.hasOccurred&&r&&!a?(ee(r,{points:[...r.points,A(D.x-r.x,D.y-r.y)]}),this.setState({multiElement:r,newElement:r})):n.drag.hasOccurred&&!a&&(Uu(this.state)&&_a(r,!1)&&fE(r,this.state,D,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(L=>({newElement:null})):(xs(this.interactiveCanvas),this.setState(L=>({newElement:null,activeTool:dn(this.state,{type:"selection"}),selectedElementIds:nt({...L.selectedElementIds,[r.id]:!0},L),selectedLinearElement:new ue(r)}))),this.scene.triggerUpdate());return}if(fe(r)){const D=Sw(Ct({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<D&&ee(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(l.type!=="selection"&&r&&rd(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(D=>D.id!==r.id),appState:{newElement:null},captureUpdate:K.NEVER});return}if(Ie(r)){const D=voe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(j1(this.scene.getElementsMapIncludingDeleted(),D,r,this.state))}if(r&&(ee(r,wF(r)),this.scene.triggerUpdate()),n.drag.hasOccurred){const D=Mt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const L=this.scene.getElement(this.state.selectedLinearElement.elementId);if(L!=null&&L.frameId){const G=pr(L,f);G&&L&&(Tc(L,G,this.scene.getNonDeletedElementsMap())||(ee(L,{groupIds:[]}),Jb([L],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const L=this.getTopLayerFrameAtSceneCoords(D),G=this.scene.getSelectedElements(this.state);let H=this.scene.getElementsMapIncludingDeleted();const V=$=>{if($.length>0){for(const j of $){const X=j.groupIds.indexOf(this.state.editingGroupId);ee(j,{groupIds:j.groupIds.slice(0,X)},!1)}H.forEach(j=>{j.groupIds.length&&zt(H,j.groupIds[j.groupIds.length-1]).length<2&&ee(j,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(L&&!this.state.selectedElementIds[L.id]){const $=G.filter(j=>j.frameId!==L.id&&v6(j,H,this.state));this.state.editingGroupId&&V($),H=j1(H,$,L,this.state)}else if(!L&&this.state.editingGroupId){const $=G.filter(j=>j.frameId&&!v6(j,H,this.state));V($)}H=bh(H,this.state,this),this.scene.replaceAllElements(H)}}if(s&&this.store.shouldCaptureIncrement(),s&&rd(s)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(D=>D.id!==s.id),captureUpdate:K.NEVER}),n.resize.isResizing){let D=bh(this.scene.getElementsIncludingDeleted(),this.state,this);const L=this.scene.getSelectedElements(this.state).filter(G=>Ie(G));for(const G of L)D=CF(D,WU(this.scene.getElementsIncludingDeleted(),G,this.state,f),G,this);this.scene.replaceAllElements(D)}const h=n.hit.element;((x=this.state.selectedLinearElement)==null?void 0:x.elementId)!==(h==null?void 0:h.id)&&ke(h)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new ue(h)}),(!o||o&&(!h&&!d||h&&h.id!==o))&&this.finishImageCropping();const m=this.lastPointerDownEvent,p=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(To(this.state)&&m&&p){if(this.eraserTrail.endPath(),wt(A(m.clientX,m.clientY),A(p.clientX,p.clientY))===0){const L=Mt({clientX:p.clientX,clientY:p.clientY},this.state);this.getElementsAtPosition(L.x,L.y).forEach(H=>this.elementsPendingErasure.add(H.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(h&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&(i.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[h.id]?OF(this.state,h)?this.setState(D=>{const L={...D.selectedElementIds};for(const G of h.groupIds.flatMap(H=>zt(this.scene.getNonDeletedElements(),H)))delete L[G.id];return{selectedGroupIds:{...D.selectedElementIds,...h.groupIds.map(G=>({[G]:!1})).reduce((G,H)=>({...G,...H}),{})},selectedElementIds:nt(L,D)}}):(I=this.state.selectedLinearElement)!=null&&I.isDragging||this.setState(D=>{const L={...D.selectedElementIds};delete L[h.id];const G=Ve(this.scene.getNonDeletedElements(),{selectedElementIds:L});return{...Li({editingGroupId:D.editingGroupId,selectedElementIds:L},this.scene.getNonDeletedElements(),D,this),selectedLinearElement:G.length===1&&ke(G[0])?new ue(G[0]):D.selectedLinearElement}}):h.frameId&&this.state.selectedElementIds[h.frameId]?this.setState(D=>{var G;const L={...D.selectedElementIds,[h.id]:!0};return delete L[h.frameId],(((G=this.scene.getElement(h.frameId))==null?void 0:G.groupIds)??[]).flatMap(H=>zt(this.scene.getNonDeletedElements(),H)).forEach(H=>{delete L[H.id]}),{...Li({editingGroupId:D.editingGroupId,selectedElementIds:L},this.scene.getNonDeletedElements(),D,this),showHyperlinkPopup:h.link||lr(h)?"info":!1}}):this.setState(D=>({selectedElementIds:nt({...D.selectedElementIds,[h.id]:!0},D)})):this.setState(D=>{var L;return{...Li({editingGroupId:D.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),D,this),selectedLinearElement:ke(h)&&((L=D.selectedLinearElement)==null?void 0:L.elementId)!==h.id?new ue(h):D.selectedLinearElement}})),this.state.activeTool.type!=="lasso"&&!(h&&me(h))&&!n.drag.hasOccurred&&!this.state.isResizing&&(h&&Qre({x:n.origin.x,y:n.origin.y,element:h,shape:Ds(h,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Ie(h)?this.frameNameBoundsCache.get(h):null},f)||!h&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:nt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),St(this.interactiveCanvas,yt.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&r&&this.setState(D=>({selectedElementIds:nt({...D.selectedElementIds,[r.id]:!0},D),showHyperlinkPopup:lr(r)&&!r.link?"editor":D.showHyperlinkPopup})),(l.type!=="selection"||zn(this.scene.getNonDeletedElements(),this.state)||!vi(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),n.drag.hasOccurred||c||u||d){const D=this.scene.getSelectedElements(this.state).filter(ke);m6(D,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,Uu(this.state),((M=this.state.selectedLinearElement)==null?void 0:M.selectedPointsIndices)??[],this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"&&(l.type!=="lasso"||l.type==="lasso"&&l.fromSelection)?(xs(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:dn(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),h&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&ht.pointers.size<=1&&rs(h)&&this.isIframeLikeElementCenter(h,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(h)})}clearSelection(n){this.setState(i=>({selectedElementIds:nt({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&N0(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:nt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,r,s){if(s){let o=s.x+s.width/2,a=s.y+s.height/2;const l=T8(s,r,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<Dne){const{x:d,y:f}=Fs({sceneX:o,sceneY:a},r);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:r,top:s}=i.getBoundingClientRect();return{offsetLeft:r,offsetTop:s}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=a5.find(i=>i.code===this.props.langCode)||Cd;await yz(n),this.setAppState({})}}const REe=e=>{const[t,n]=O.useState(!0);return O.useEffect(()=>{const i=async()=>{await yz(r),n(!1)},r=a5.find(s=>s.code===e.langCode)||Cd;i()},[e.langCode]),t?g(SG,{theme:e.theme}):e.children},BX=({children:e})=>{const{FooterCenterTunnel:t}=rr(),n=Si();return g(t.In,{children:g("div",{className:be("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};BX.displayName="FooterCenter";const MEe=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),kEe=()=>P("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),zX=({style:e,size:t="small",withText:n})=>P("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(MEe,{}),n&&g(kEe,{})]}),p_=({icon:e,shortcut:t,children:n})=>{const i=Jn();return P(pe,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};p_.displayName="WelcomeScreenMenuItemContent";const np=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(p_,{icon:n,shortcut:i,children:t})});np.displayName="WelcomeScreenMenuItem";const HX=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noreferrer",children:g(p_,{icon:n,shortcut:i,children:e})});HX.displayName="WelcomeScreenMenuItemLink";const ho=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=rr();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||P(pe,{children:[g(U_,{}),g(b_,{children:k("welcomeScreen.defaults.center_heading")}),P(y_,{children:[g(v_,{}),g(E_,{})]})]})})})};ho.displayName="Center";const U_=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(zX,{withText:!0})});U_.displayName="Logo";const b_=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});b_.displayName="Heading";const y_=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});y_.displayName="Menu";const E_=()=>{const e=vr();return g(np,{onSelect:()=>e.executeAction(W9),shortcut:"?",icon:s9,children:k("helpDialog.title")})};E_.displayName="MenuItemHelp";const v_=()=>{const e=Si(),t=vr();return e.viewModeEnabled?null:g(np,{onSelect:()=>t.executeAction(o4),shortcut:Hi("loadScene"),icon:a9,children:k("buttons.load")})};v_.displayName="MenuItemLoadScene";const VX=({onSelect:e})=>{const{t}=wn();return g(np,{shortcut:null,onSelect:e,icon:l9,children:t("labels.liveCollaboration")})};VX.displayName="MenuItemLiveCollaborationTrigger";ho.Logo=U_;ho.Heading=b_;ho.Menu=y_;ho.MenuItem=np;ho.MenuItemLink=HX;ho.MenuItemHelp=E_;ho.MenuItemLoadScene=v_;ho.MenuItemLiveCollaborationTrigger=VX;const w_=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Jle,g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.menuHint")})]})})};w_.displayName="MenuHint";const __=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.toolbarHint")}),tce]})})};__.displayName="ToolbarHint";const T_=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=rr();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||k("welcomeScreen.defaults.helpHint")}),ece]})})};T_.displayName="HelpHint";const Tr=e=>g(pe,{children:e.children||P(pe,{children:[g(ho,{}),g(w_,{}),g(__,{}),g(T_,{})]})});Tr.displayName="WelcomeScreen";Tr.Center=ho;Tr.Hints={MenuHint:w_,ToolbarHint:__,HelpHint:T_};const $X=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},LEe=(e,t,n)=>{var i,r,s;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((r=e.resizingElement)==null?void 0:r.id)||t.id===((s=e.newElement)==null?void 0:s.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},DEe=Do((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const i=Za(e.map(r=>({...r})));Gw(i,{shouldThrow:BP(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),S_=(e,t,n)=>{const i=Se(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=LEe(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=VF(r);return DEe(o,e,t),Za(o),o},GX=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=rr(),i=Vn();return g(n.In,{children:P(Je.Item,{onSelect:()=>{ut("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??bue,children:[e??k("labels.textToDiagram"),g(Je.Item.Badge,{children:"AI"})]})})};GX.displayName="TTDDialogTrigger";const OEe=e=>{const t=fo();return O.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};$X();const NEe=e=>{var j,X,Z,ge;const{onChange:t,initialData:n,excalidrawAPI:i,isCollaborating:r=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=Cd.code,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:h,renderCustomStats:m,onPaste:p,detectScroll:b=!0,handleKeyboardGlobally:E=!1,onLibraryChange:y,autoFocus:v=!1,generateIdForFile:w,onLinkOpen:S,generateLinkForSelection:R,onPointerDown:_,onPointerUp:T,onScrollChange:x,onDuplicate:I,children:M,validateEmbeddable:D,renderEmbeddable:L,aiEnabled:G,showDeprecatedFonts:H}=e,V=(j=e.UIOptions)==null?void 0:j.canvasActions,$={...e.UIOptions,canvasActions:{...Sx.canvasActions,...V},tools:{image:((Z=(X=e.UIOptions)==null?void 0:X.tools)==null?void 0:Z.image)??!0}};return V!=null&&V.export&&($.canvasActions.export.saveFileToDisk=((ge=V.export)==null?void 0:ge.saveFileToDisk)??Sx.canvasActions.export.saveFileToDisk),$.canvasActions.toggleTheme===null&&typeof f>"u"&&($.canvasActions.toggleTheme=!0),O.useEffect(()=>{(async()=>{await ye(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]),import.meta.url)})();const le=Be=>{typeof Be.scale=="number"&&Be.scale!==1&&Be.preventDefault()};return document.addEventListener("touchmove",le,{passive:!1}),()=>{document.removeEventListener("touchmove",le)}},[]),g(Fle,{store:Vs,children:g(REe,{langCode:a,theme:f,children:g(m_,{onChange:t,initialData:n,excalidrawAPI:i,isCollaborating:r,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:h,renderCustomStats:m,UIOptions:$,onPaste:p,detectScroll:b,handleKeyboardGlobally:E,onLibraryChange:y,autoFocus:v,generateIdForFile:w,onLinkOpen:S,generateLinkForSelection:R,onPointerDown:_,onPointerUp:T,onScrollChange:x,onDuplicate:I,validateEmbeddable:D,renderEmbeddable:L,aiEnabled:G!==!1,showDeprecatedFonts:H,children:M})})})},PEe=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,b,E;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((b=i==null?void 0:i.canvasActions)==null?void 0:b[h])===((E=o==null?void 0:o.canvasActions)==null?void 0:E[h])}):i[d]===o[d])&&vi(r,a)},XX=ae.memo(NEe,PEe);XX.displayName="Excalidraw";const FEe=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=wn(),[,r]=O.useState(!1),s=O.useRef(0),o=O.useRef(null),a=async()=>{var u;try{await Vc(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=l_();return g(Gr,{onCloseRequest:t,title:!1,size:"small",children:P("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),P("div",{className:"ShareableLinkDialog__linkRow",children:[g(Ah,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(qs,{size:"large",label:i("buttons.copyLink"),icon:jm,status:c,onClick:()=>{l(),a()}})]}),P("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},BEe=300,zEe=5e3,HEe=300,VEe=500,dk=2e4,$Ee=50,GEe=33,XEe=24*60*60*1e3,I_=3*1024*1024,jEe=31536e3,f2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Wi=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Wi||{});const jX={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},YEe=10,vn={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},WEe={AUTH_STATE_COOKIE:"excplus-auth"},x_=document.cookie.includes(WEe.AUTH_STATE_COOKIE),KEe=e=>{try{localStorage.setItem(vn.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},YX=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},WX=()=>{let e=null,t=null;try{e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=SF(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...so(),..._z(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},KX=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},ZEe=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+KX()}catch(e){return console.error(e),0}},qEe=500,fk=ja(e=>{e({scene:KX(),total:ZEe()})},qEe),QEe=e=>{const[t,n]=O.useState({scene:0,total:0});O.useEffect(()=>{fk(o=>{n(o)})},[e.elements,e.appState]),O.useEffect(()=>()=>fk.cancel(),[]);const i=sE();let r,s;return i!==EP?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=k("stats.versionNotAvailable"),P(ba.StatsRows,{order:-1,children:[g(ba.StatsRow,{heading:!0,children:k("stats.version")}),P(ba.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await Vc(sE()),e.setToast(k("toast.copyToClipboard"))}catch{}},title:k("stats.versionCopy"),children:[s,g("br",{}),r]}),g(ba.StatsRow,{heading:!0,children:k("stats.storage")}),P(ba.StatsRow,{columns:2,children:[g("div",{children:k("stats.scene")}),g("div",{children:Nx(t.scene,1)})]}),P(ba.StatsRow,{columns:2,children:[g("div",{children:k("stats.total")}),g("div",{children:Nx(t.total,1)})]})]})},Il=Xm(),JEe=(e,t)=>{const[n,i]=wh(e);return O.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class ZX{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=In(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>In(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>In(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const C_=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await s$(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},y1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>In(t)&&e.erroredFiles.has(t.fileId)?Ce(t,{status:"error"}):t),captureUpdate:K.NEVER})};var hk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},e4e=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},QX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qX(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):e4e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new t4e;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class t4e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n4e=function(e){const t=qX(e);return QX.encodeByteArray(t,!0)},Q6=function(e){return n4e(e).replace(/\./g,"")},i4e=function(e){try{return QX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4e=()=>r4e().__FIREBASE_DEFAULTS__,o4e=()=>{if(typeof process>"u"||typeof hk>"u")return;const e=hk.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},a4e=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&i4e(e[1]);return t&&JSON.parse(t)},A_=()=>{try{return s4e()||o4e()||a4e()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},l4e=e=>{var t,n;return(n=(t=A_())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},JX=e=>{const t=l4e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},ej=()=>{var e;return(e=A_())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Q6(JSON.stringify(n)),Q6(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d4e(){var e;const t=(e=A_())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f4e(){return!d4e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h4e(){try{return typeof indexedDB=="object"}catch{return!1}}function g4e(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4e="FirebaseError";class Md extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=m4e,Object.setPrototypeOf(this,Md.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nj.prototype.create)}}class nj{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?p4e(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Md(r,a,i)}}function p4e(e,t){return e.replace(U4e,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const U4e=/\{\$([^}]+)}/g;function w4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(gk(s)&&gk(o)){if(!w4(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function gk(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e){return e&&e._delegate?e._delegate:e}class kh{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4e{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new c4e;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(E4e(t))try{this.getOrInitializeService({instanceIdentifier:su})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=su){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=su){return this.instances.has(t)}getOptions(t=su){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:y4e(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=su){return this.component?this.component.multipleInstances?t:su:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y4e(e){return e===su?void 0:e}function E4e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new b4e(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ct||(ct={}));const w4e={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},_4e=ct.INFO,T4e={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},S4e=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=T4e[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ij{constructor(t){this.name=t,this._logLevel=_4e,this._logHandler=S4e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?w4e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const I4e=(e,t)=>t.some(n=>e instanceof n);let mk,pk;function x4e(){return mk||(mk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C4e(){return pk||(pk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rj=new WeakMap,_4=new WeakMap,sj=new WeakMap,R7=new WeakMap,R_=new WeakMap;function A4e(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(cc(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&rj.set(n,e)}).catch(()=>{}),R_.set(t,e),t}function R4e(e){if(_4.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});_4.set(e,t)}let T4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||sj.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function M4e(e){T4=e(T4)}function k4e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(M7(this),t,...n);return sj.set(i,t.sort?t.sort():[t]),cc(i)}:C4e().includes(e)?function(...t){return e.apply(M7(this),t),cc(rj.get(this))}:function(...t){return cc(e.apply(M7(this),t))}}function L4e(e){return typeof e=="function"?k4e(e):(e instanceof IDBTransaction&&R4e(e),I4e(e,x4e())?new Proxy(e,T4):e)}function cc(e){if(e instanceof IDBRequest)return A4e(e);if(R7.has(e))return R7.get(e);const t=L4e(e);return t!==e&&(R7.set(e,t),R_.set(t,e)),t}const M7=e=>R_.get(e);function D4e(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=cc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(cc(o.result),l.oldVersion,l.newVersion,cc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const O4e=["get","getKey","getAll","getAllKeys","count"],N4e=["put","add","delete","clear"],k7=new Map;function Uk(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(k7.get(t))return k7.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=N4e.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||O4e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return k7.set(t,s),s}M4e(e=>({...e,get:(t,n,i)=>Uk(t,n)||e.get(t,n,i),has:(t,n)=>!!Uk(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F4e(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function F4e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const S4="@firebase/app",bk="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new ij("@firebase/app"),B4e="@firebase/app-compat",z4e="@firebase/analytics-compat",H4e="@firebase/analytics",V4e="@firebase/app-check-compat",$4e="@firebase/app-check",G4e="@firebase/auth",X4e="@firebase/auth-compat",j4e="@firebase/database",Y4e="@firebase/data-connect",W4e="@firebase/database-compat",K4e="@firebase/functions",Z4e="@firebase/functions-compat",q4e="@firebase/installations",Q4e="@firebase/installations-compat",J4e="@firebase/messaging",eve="@firebase/messaging-compat",tve="@firebase/performance",nve="@firebase/performance-compat",ive="@firebase/remote-config",rve="@firebase/remote-config-compat",sve="@firebase/storage",ove="@firebase/storage-compat",ave="@firebase/firestore",lve="@firebase/vertexai",cve="@firebase/firestore-compat",uve="firebase",dve="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="[DEFAULT]",fve={[S4]:"fire-core",[B4e]:"fire-core-compat",[H4e]:"fire-analytics",[z4e]:"fire-analytics-compat",[$4e]:"fire-app-check",[V4e]:"fire-app-check-compat",[G4e]:"fire-auth",[X4e]:"fire-auth-compat",[j4e]:"fire-rtdb",[Y4e]:"fire-data-connect",[W4e]:"fire-rtdb-compat",[K4e]:"fire-fn",[Z4e]:"fire-fn-compat",[q4e]:"fire-iid",[Q4e]:"fire-iid-compat",[J4e]:"fire-fcm",[eve]:"fire-fcm-compat",[tve]:"fire-perf",[nve]:"fire-perf-compat",[ive]:"fire-rc",[rve]:"fire-rc-compat",[sve]:"fire-gcs",[ove]:"fire-gcs-compat",[ave]:"fire-fst",[cve]:"fire-fst-compat",[lve]:"fire-vertex","fire-js":"fire-js",[uve]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=new Map,hve=new Map,x4=new Map;function yk(e,t){try{e.container.addComponent(t)}catch(n){ol.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function am(e){const t=e.name;if(x4.has(t))return ol.debug(`There were multiple attempts to register component ${t}.`),!1;x4.set(t,e);for(const n of J6.values())yk(n,e);for(const n of hve.values())yk(n,e);return!0}function oj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function aj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gve={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uc=new nj("app","Firebase",gve);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw uc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=dve;function cj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:I4,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw uc.create("bad-app-name",{appName:String(r)});if(n||(n=ej()),!n)throw uc.create("no-options");const s=J6.get(r);if(s){if(w4(n,s.options)&&w4(i,s.config))return s;throw uc.create("duplicate-app",{appName:r})}const o=new v4e(r);for(const l of x4.values())o.addComponent(l);const a=new mve(n,i,o);return J6.set(r,a),a}function uj(e=I4){const t=J6.get(e);if(!t&&e===I4&&ej())return cj();if(!t)throw uc.create("no-app",{appName:e});return t}function dc(e,t,n){var i;let r=(i=fve[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ol.warn(a.join(" "));return}am(new kh(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pve="firebase-heartbeat-database",Uve=1,lm="firebase-heartbeat-store";let L7=null;function dj(){return L7||(L7=D4e(pve,Uve,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(lm)}catch(n){console.warn(n)}}}}).catch(e=>{throw uc.create("idb-open",{originalErrorMessage:e.message})})),L7}async function bve(e){try{const n=(await dj()).transaction(lm),i=await n.objectStore(lm).get(fj(e));return await n.done,i}catch(t){if(t instanceof Md)ol.warn(t.message);else{const n=uc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ol.warn(n.message)}}}async function Ek(e,t){try{const i=(await dj()).transaction(lm,"readwrite");await i.objectStore(lm).put(t,fj(e)),await i.done}catch(n){if(n instanceof Md)ol.warn(n.message);else{const i=uc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ol.warn(i.message)}}}function fj(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yve=1024,Eve=30;class vve{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _ve(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vk();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Eve){const o=Tve(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ol.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vk(),{heartbeatsToSend:i,unsentEntries:r}=wve(this._heartbeatsCache.heartbeats),s=Q6(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ol.warn(n),""}}}function vk(){return new Date().toISOString().substring(0,10)}function wve(e,t=yve){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),wk(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),wk(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class _ve{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h4e()?g4e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bve(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ek(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ek(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function wk(e){return Q6(JSON.stringify({version:2,heartbeats:e})).length}function Tve(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sve(e){am(new kh("platform-logger",t=>new P4e(t),"PRIVATE")),am(new kh("heartbeat",t=>new vve(t),"PRIVATE")),dc(S4,bk,e),dc(S4,bk,"esm2017"),dc("fire-js","")}Sve("");var Ive="firebase",xve="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dc(Ive,xve,"app");var _k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fc,hj;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,T){function x(){}x.prototype=T.prototype,_.D=T.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(I,M,D){for(var L=Array(arguments.length-2),G=2;G<arguments.length;G++)L[G-2]=arguments[G];return T.prototype[M].apply(I,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,x){x||(x=0);var I=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)I[M]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(M=0;16>M;++M)I[M]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=_.g[0],x=_.g[1],M=_.g[2];var D=_.g[3],L=T+(D^x&(M^D))+I[0]+3614090360&4294967295;T=x+(L<<7&4294967295|L>>>25),L=D+(M^T&(x^M))+I[1]+3905402710&4294967295,D=T+(L<<12&4294967295|L>>>20),L=M+(x^D&(T^x))+I[2]+606105819&4294967295,M=D+(L<<17&4294967295|L>>>15),L=x+(T^M&(D^T))+I[3]+3250441966&4294967295,x=M+(L<<22&4294967295|L>>>10),L=T+(D^x&(M^D))+I[4]+4118548399&4294967295,T=x+(L<<7&4294967295|L>>>25),L=D+(M^T&(x^M))+I[5]+1200080426&4294967295,D=T+(L<<12&4294967295|L>>>20),L=M+(x^D&(T^x))+I[6]+2821735955&4294967295,M=D+(L<<17&4294967295|L>>>15),L=x+(T^M&(D^T))+I[7]+4249261313&4294967295,x=M+(L<<22&4294967295|L>>>10),L=T+(D^x&(M^D))+I[8]+1770035416&4294967295,T=x+(L<<7&4294967295|L>>>25),L=D+(M^T&(x^M))+I[9]+2336552879&4294967295,D=T+(L<<12&4294967295|L>>>20),L=M+(x^D&(T^x))+I[10]+4294925233&4294967295,M=D+(L<<17&4294967295|L>>>15),L=x+(T^M&(D^T))+I[11]+2304563134&4294967295,x=M+(L<<22&4294967295|L>>>10),L=T+(D^x&(M^D))+I[12]+1804603682&4294967295,T=x+(L<<7&4294967295|L>>>25),L=D+(M^T&(x^M))+I[13]+4254626195&4294967295,D=T+(L<<12&4294967295|L>>>20),L=M+(x^D&(T^x))+I[14]+2792965006&4294967295,M=D+(L<<17&4294967295|L>>>15),L=x+(T^M&(D^T))+I[15]+1236535329&4294967295,x=M+(L<<22&4294967295|L>>>10),L=T+(M^D&(x^M))+I[1]+4129170786&4294967295,T=x+(L<<5&4294967295|L>>>27),L=D+(x^M&(T^x))+I[6]+3225465664&4294967295,D=T+(L<<9&4294967295|L>>>23),L=M+(T^x&(D^T))+I[11]+643717713&4294967295,M=D+(L<<14&4294967295|L>>>18),L=x+(D^T&(M^D))+I[0]+3921069994&4294967295,x=M+(L<<20&4294967295|L>>>12),L=T+(M^D&(x^M))+I[5]+3593408605&4294967295,T=x+(L<<5&4294967295|L>>>27),L=D+(x^M&(T^x))+I[10]+38016083&4294967295,D=T+(L<<9&4294967295|L>>>23),L=M+(T^x&(D^T))+I[15]+3634488961&4294967295,M=D+(L<<14&4294967295|L>>>18),L=x+(D^T&(M^D))+I[4]+3889429448&4294967295,x=M+(L<<20&4294967295|L>>>12),L=T+(M^D&(x^M))+I[9]+568446438&4294967295,T=x+(L<<5&4294967295|L>>>27),L=D+(x^M&(T^x))+I[14]+3275163606&4294967295,D=T+(L<<9&4294967295|L>>>23),L=M+(T^x&(D^T))+I[3]+4107603335&4294967295,M=D+(L<<14&4294967295|L>>>18),L=x+(D^T&(M^D))+I[8]+1163531501&4294967295,x=M+(L<<20&4294967295|L>>>12),L=T+(M^D&(x^M))+I[13]+2850285829&4294967295,T=x+(L<<5&4294967295|L>>>27),L=D+(x^M&(T^x))+I[2]+4243563512&4294967295,D=T+(L<<9&4294967295|L>>>23),L=M+(T^x&(D^T))+I[7]+1735328473&4294967295,M=D+(L<<14&4294967295|L>>>18),L=x+(D^T&(M^D))+I[12]+2368359562&4294967295,x=M+(L<<20&4294967295|L>>>12),L=T+(x^M^D)+I[5]+4294588738&4294967295,T=x+(L<<4&4294967295|L>>>28),L=D+(T^x^M)+I[8]+2272392833&4294967295,D=T+(L<<11&4294967295|L>>>21),L=M+(D^T^x)+I[11]+1839030562&4294967295,M=D+(L<<16&4294967295|L>>>16),L=x+(M^D^T)+I[14]+4259657740&4294967295,x=M+(L<<23&4294967295|L>>>9),L=T+(x^M^D)+I[1]+2763975236&4294967295,T=x+(L<<4&4294967295|L>>>28),L=D+(T^x^M)+I[4]+1272893353&4294967295,D=T+(L<<11&4294967295|L>>>21),L=M+(D^T^x)+I[7]+4139469664&4294967295,M=D+(L<<16&4294967295|L>>>16),L=x+(M^D^T)+I[10]+3200236656&4294967295,x=M+(L<<23&4294967295|L>>>9),L=T+(x^M^D)+I[13]+681279174&4294967295,T=x+(L<<4&4294967295|L>>>28),L=D+(T^x^M)+I[0]+3936430074&4294967295,D=T+(L<<11&4294967295|L>>>21),L=M+(D^T^x)+I[3]+3572445317&4294967295,M=D+(L<<16&4294967295|L>>>16),L=x+(M^D^T)+I[6]+76029189&4294967295,x=M+(L<<23&4294967295|L>>>9),L=T+(x^M^D)+I[9]+3654602809&4294967295,T=x+(L<<4&4294967295|L>>>28),L=D+(T^x^M)+I[12]+3873151461&4294967295,D=T+(L<<11&4294967295|L>>>21),L=M+(D^T^x)+I[15]+530742520&4294967295,M=D+(L<<16&4294967295|L>>>16),L=x+(M^D^T)+I[2]+3299628645&4294967295,x=M+(L<<23&4294967295|L>>>9),L=T+(M^(x|~D))+I[0]+4096336452&4294967295,T=x+(L<<6&4294967295|L>>>26),L=D+(x^(T|~M))+I[7]+1126891415&4294967295,D=T+(L<<10&4294967295|L>>>22),L=M+(T^(D|~x))+I[14]+2878612391&4294967295,M=D+(L<<15&4294967295|L>>>17),L=x+(D^(M|~T))+I[5]+4237533241&4294967295,x=M+(L<<21&4294967295|L>>>11),L=T+(M^(x|~D))+I[12]+1700485571&4294967295,T=x+(L<<6&4294967295|L>>>26),L=D+(x^(T|~M))+I[3]+2399980690&4294967295,D=T+(L<<10&4294967295|L>>>22),L=M+(T^(D|~x))+I[10]+4293915773&4294967295,M=D+(L<<15&4294967295|L>>>17),L=x+(D^(M|~T))+I[1]+2240044497&4294967295,x=M+(L<<21&4294967295|L>>>11),L=T+(M^(x|~D))+I[8]+1873313359&4294967295,T=x+(L<<6&4294967295|L>>>26),L=D+(x^(T|~M))+I[15]+4264355552&4294967295,D=T+(L<<10&4294967295|L>>>22),L=M+(T^(D|~x))+I[6]+2734768916&4294967295,M=D+(L<<15&4294967295|L>>>17),L=x+(D^(M|~T))+I[13]+1309151649&4294967295,x=M+(L<<21&4294967295|L>>>11),L=T+(M^(x|~D))+I[4]+4149444226&4294967295,T=x+(L<<6&4294967295|L>>>26),L=D+(x^(T|~M))+I[11]+3174756917&4294967295,D=T+(L<<10&4294967295|L>>>22),L=M+(T^(D|~x))+I[2]+718787259&4294967295,M=D+(L<<15&4294967295|L>>>17),L=x+(D^(M|~T))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,_.g[2]=_.g[2]+M&4294967295,_.g[3]=_.g[3]+D&4294967295}i.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var x=T-this.blockSize,I=this.B,M=this.h,D=0;D<T;){if(M==0)for(;D<=x;)r(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<T;)if(I[M++]=_.charCodeAt(D++),M==this.blockSize){r(this,I),M=0;break}}else for(;D<T;)if(I[M++]=_[D++],M==this.blockSize){r(this,I),M=0;break}}this.h=M,this.o+=T},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var x=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=x&255,x/=256;for(this.u(_),_=Array(16),T=x=0;4>T;++T)for(var I=0;32>I;I+=8)_[x++]=this.g[T]>>>I&255;return _};function s(_,T){var x=a;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=T(_)}function o(_,T){this.h=T;for(var x=[],I=!0,M=_.length-1;0<=M;M--){var D=_[M]|0;I&&D==T||(x[M]=D,I=!1)}this.g=x}var a={};function l(_){return-128<=_&&128>_?s(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return b(c(-_));for(var T=[],x=1,I=0;_>=x;I++)T[I]=_/x|0,x*=4294967296;return new o(T,0)}function u(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return b(u(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(T,8)),I=d,M=0;M<_.length;M+=8){var D=Math.min(8,_.length-M),L=parseInt(_.substring(M,M+D),T);8>D?(D=c(Math.pow(T,D)),I=I.j(D).add(c(L))):(I=I.j(x),I=I.add(c(L)))}return I}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-b(this).m();for(var _=0,T=1,x=0;x<this.g.length;x++){var I=this.i(x);_+=(0<=I?I:4294967296+I)*T,T*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+b(this).toString(_);for(var T=c(Math.pow(_,6)),x=this,I="";;){var M=w(x,T).g;x=E(x,M.j(T));var D=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=M,m(x))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function p(_){return _.h==-1}e.l=function(_){return _=E(this,_),p(_)?-1:m(_)?0:1};function b(_){for(var T=_.g.length,x=[],I=0;I<T;I++)x[I]=~_.g[I];return new o(x,~_.h).add(f)}e.abs=function(){return p(this)?b(this):this},e.add=function(_){for(var T=Math.max(this.g.length,_.g.length),x=[],I=0,M=0;M<=T;M++){var D=I+(this.i(M)&65535)+(_.i(M)&65535),L=(D>>>16)+(this.i(M)>>>16)+(_.i(M)>>>16);I=L>>>16,D&=65535,L&=65535,x[M]=L<<16|D}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(_,T){return _.add(b(T))}e.j=function(_){if(m(this)||m(_))return d;if(p(this))return p(_)?b(this).j(b(_)):b(b(this).j(_));if(p(_))return b(this.j(b(_)));if(0>this.l(h)&&0>_.l(h))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,x=[],I=0;I<2*T;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(var M=0;M<_.g.length;M++){var D=this.i(I)>>>16,L=this.i(I)&65535,G=_.i(M)>>>16,H=_.i(M)&65535;x[2*I+2*M]+=L*H,y(x,2*I+2*M),x[2*I+2*M+1]+=D*H,y(x,2*I+2*M+1),x[2*I+2*M+1]+=L*G,y(x,2*I+2*M+1),x[2*I+2*M+2]+=D*G,y(x,2*I+2*M+2)}for(I=0;I<T;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=T;I<2*T;I++)x[I]=0;return new o(x,0)};function y(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function v(_,T){this.g=_,this.h=T}function w(_,T){if(m(T))throw Error("division by zero");if(m(_))return new v(d,d);if(p(_))return T=w(b(_),T),new v(b(T.g),b(T.h));if(p(T))return T=w(_,b(T)),new v(b(T.g),T.h);if(30<_.g.length){if(p(_)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var x=f,I=T;0>=I.l(_);)x=S(x),I=S(I);var M=R(x,1),D=R(I,1);for(I=R(I,2),x=R(x,2);!m(I);){var L=D.add(I);0>=L.l(_)&&(M=M.add(x),D=L),I=R(I,1),x=R(x,1)}return T=E(_,M.j(T)),new v(M,T)}for(M=d;0<=_.l(T);){for(x=Math.max(1,Math.floor(_.m()/T.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=c(x),L=D.j(T);p(L)||0<L.l(_);)x-=I,D=c(x),L=D.j(T);m(D)&&(D=f),M=M.add(D),_=E(_,L)}return new v(M,_)}e.A=function(_){return w(this,_).h},e.and=function(_){for(var T=Math.max(this.g.length,_.g.length),x=[],I=0;I<T;I++)x[I]=this.i(I)&_.i(I);return new o(x,this.h&_.h)},e.or=function(_){for(var T=Math.max(this.g.length,_.g.length),x=[],I=0;I<T;I++)x[I]=this.i(I)|_.i(I);return new o(x,this.h|_.h)},e.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),x=[],I=0;I<T;I++)x[I]=this.i(I)^_.i(I);return new o(x,this.h^_.h)};function S(_){for(var T=_.g.length+1,x=[],I=0;I<T;I++)x[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(x,_.h)}function R(_,T){var x=T>>5;T%=32;for(var I=_.g.length-x,M=[],D=0;D<I;D++)M[D]=0<T?_.i(D+x)>>>T|_.i(D+x+1)<<32-T:_.i(D+x);return new o(M,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,hj=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,fc=o}).apply(typeof _k<"u"?_k:typeof self<"u"?self:typeof window<"u"?window:{});var bU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gj,E1,mj,h2,C4,pj,Uj,bj;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,C,N){return U==Array.prototype||U==Object.prototype||(U[C]=N.value),U};function n(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof bU=="object"&&bU];for(var C=0;C<U.length;++C){var N=U[C];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var i=n(this);function r(U,C){if(C)e:{var N=i;U=U.split(".");for(var B=0;B<U.length-1;B++){var W=U[B];if(!(W in N))break e;N=N[W]}U=U[U.length-1],B=N[U],C=C(B),C!=B&&C!=null&&t(N,U,{configurable:!0,writable:!0,value:C})}}function s(U,C){U instanceof String&&(U+="");var N=0,B=!1,W={next:function(){if(!B&&N<U.length){var J=N++;return{value:C(J,U[J]),done:!1}}return B=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(U){return U||function(){return s(this,function(C,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(U){var C=typeof U;return C=C!="object"?C:U?Array.isArray(U)?"array":C:"null",C=="array"||C=="object"&&typeof U.length=="number"}function c(U){var C=typeof U;return C=="object"&&U!=null||C=="function"}function u(U,C,N){return U.call.apply(U.bind,arguments)}function d(U,C,N){if(!U)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,B),U.apply(C,W)}}return function(){return U.apply(C,arguments)}}function f(U,C,N){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(U,C){var N=Array.prototype.slice.call(arguments,1);return function(){var B=N.slice();return B.push.apply(B,arguments),U.apply(this,B)}}function m(U,C){function N(){}N.prototype=C.prototype,U.aa=C.prototype,U.prototype=new N,U.prototype.constructor=U,U.Qb=function(B,W,J){for(var he=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)he[Ft-2]=arguments[Ft];return C.prototype[W].apply(B,he)}}function p(U){const C=U.length;if(0<C){const N=Array(C);for(let B=0;B<C;B++)N[B]=U[B];return N}return[]}function b(U,C){for(let N=1;N<arguments.length;N++){const B=arguments[N];if(l(B)){const W=U.length||0,J=B.length||0;U.length=W+J;for(let he=0;he<J;he++)U[W+he]=B[he]}else U.push(B)}}class E{constructor(C,N){this.i=C,this.j=N,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(U){return/^[\s\xa0]*$/.test(U)}function v(){var U=a.navigator;return U&&(U=U.userAgent)?U:""}function w(U){return w[" "](U),U}w[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function R(U,C,N){for(const B in U)C.call(N,U[B],B,U)}function _(U,C){for(const N in U)C.call(void 0,U[N],N,U)}function T(U){const C={};for(const N in U)C[N]=U[N];return C}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(U,C){let N,B;for(let W=1;W<arguments.length;W++){B=arguments[W];for(N in B)U[N]=B[N];for(let J=0;J<x.length;J++)N=x[J],Object.prototype.hasOwnProperty.call(B,N)&&(U[N]=B[N])}}function M(U){var C=1;U=U.split(":");const N=[];for(;0<C&&U.length;)N.push(U.shift()),C--;return U.length&&N.push(U.join(":")),N}function D(U){a.setTimeout(()=>{throw U},0)}function L(){var U=X;let C=null;return U.g&&(C=U.g,U.g=U.g.next,U.g||(U.h=null),C.next=null),C}class G{constructor(){this.h=this.g=null}add(C,N){const B=H.get();B.set(C,N),this.h?this.h.next=B:this.g=B,this.h=B}}var H=new E(()=>new V,U=>U.reset());class V{constructor(){this.next=this.g=this.h=null}set(C,N){this.h=C,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let $,j=!1,X=new G,Z=()=>{const U=a.Promise.resolve(void 0);$=()=>{U.then(ge)}};var ge=()=>{for(var U;U=L();){try{U.h.call(U.g)}catch(N){D(N)}var C=H;C.j(U),100>C.h&&(C.h++,U.next=C.g,C.g=U)}j=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(U,C){this.type=U,this.g=this.target=C,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var U=!1,C=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const N=()=>{};a.addEventListener("test",N,C),a.removeEventListener("test",N,C)}catch{}return U}();function $e(U,C){if(le.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var N=this.type=U.type,B=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=C,C=U.relatedTarget){if(S){e:{try{w(C.nodeName);var W=!0;break e}catch{}W=!1}W||(C=null)}}else N=="mouseover"?C=U.fromElement:N=="mouseout"&&(C=U.toElement);this.relatedTarget=C,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:Tt[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&$e.aa.h.call(this)}}m($e,le);var Tt={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),$t=0;function tn(U,C,N,B,W){this.listener=U,this.proxy=null,this.src=C,this.type=N,this.capture=!!B,this.ha=W,this.key=++$t,this.da=this.fa=!1}function Ae(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function Ge(U){this.src=U,this.g={},this.h=0}Ge.prototype.add=function(U,C,N,B,W){var J=U.toString();U=this.g[J],U||(U=this.g[J]=[],this.h++);var he=vs(U,C,B,W);return-1<he?(C=U[he],N||(C.fa=!1)):(C=new tn(C,this.src,J,!!B,W),C.fa=N,U.push(C)),C};function Gt(U,C){var N=C.type;if(N in U.g){var B=U.g[N],W=Array.prototype.indexOf.call(B,C,void 0),J;(J=0<=W)&&Array.prototype.splice.call(B,W,1),J&&(Ae(C),U.g[N].length==0&&(delete U.g[N],U.h--))}}function vs(U,C,N,B){for(var W=0;W<U.length;++W){var J=U[W];if(!J.da&&J.listener==C&&J.capture==!!N&&J.ha==B)return W}return-1}var na="closure_lm_"+(1e6*Math.random()|0),go={};function mo(U,C,N,B,W){if(Array.isArray(C)){for(var J=0;J<C.length;J++)mo(U,C[J],N,B,W);return null}return N=bT(N),U&&U[at]?U.K(C,N,c(B)?!!B.capture:!1,W):Xr(U,C,N,!1,B,W)}function Xr(U,C,N,B,W,J){if(!C)throw Error("Invalid event type");var he=c(W)?!!W.capture:!!W,Ft=ay(U);if(Ft||(U[na]=Ft=new Ge(U)),N=Ft.add(C,N,B,he,J),N.proxy)return N;if(B=sy(),N.proxy=B,B.src=U,B.listener=N,U.addEventListener)Be||(W=he),W===void 0&&(W=!1),U.addEventListener(C.toString(),B,W);else if(U.attachEvent)U.attachEvent(UT(C.toString()),B);else if(U.addListener&&U.removeListener)U.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return N}function sy(){function U(N){return C.call(U.src,U.listener,N)}const C=lW;return U}function $c(U,C,N,B,W){if(Array.isArray(C))for(var J=0;J<C.length;J++)$c(U,C[J],N,B,W);else B=c(B)?!!B.capture:!!B,N=bT(N),U&&U[at]?(U=U.i,C=String(C).toString(),C in U.g&&(J=U.g[C],N=vs(J,N,B,W),-1<N&&(Ae(J[N]),Array.prototype.splice.call(J,N,1),J.length==0&&(delete U.g[C],U.h--)))):U&&(U=ay(U))&&(C=U.g[C.toString()],U=-1,C&&(U=vs(C,N,B,W)),(N=-1<U?C[U]:null)&&oy(N))}function oy(U){if(typeof U!="number"&&U&&!U.da){var C=U.src;if(C&&C[at])Gt(C.i,U);else{var N=U.type,B=U.proxy;C.removeEventListener?C.removeEventListener(N,B,U.capture):C.detachEvent?C.detachEvent(UT(N),B):C.addListener&&C.removeListener&&C.removeListener(B),(N=ay(C))?(Gt(N,U),N.h==0&&(N.src=null,C[na]=null)):Ae(U)}}}function UT(U){return U in go?go[U]:go[U]="on"+U}function lW(U,C){if(U.da)U=!0;else{C=new $e(C,this);var N=U.listener,B=U.ha||U.src;U.fa&&oy(U),U=N.call(B,C)}return U}function ay(U){return U=U[na],U instanceof Ge?U:null}var ly="__closure_events_fn_"+(1e9*Math.random()>>>0);function bT(U){return typeof U=="function"?U:(U[ly]||(U[ly]=function(C){return U.handleEvent(C)}),U[ly])}function Ii(){ce.call(this),this.i=new Ge(this),this.M=this,this.F=null}m(Ii,ce),Ii.prototype[at]=!0,Ii.prototype.removeEventListener=function(U,C,N,B){$c(this,U,C,N,B)};function Gi(U,C){var N,B=U.F;if(B)for(N=[];B;B=B.F)N.push(B);if(U=U.M,B=C.type||C,typeof C=="string")C=new le(C,U);else if(C instanceof le)C.target=C.target||U;else{var W=C;C=new le(B,U),I(C,W)}if(W=!0,N)for(var J=N.length-1;0<=J;J--){var he=C.g=N[J];W=lp(he,B,!0,C)&&W}if(he=C.g=U,W=lp(he,B,!0,C)&&W,W=lp(he,B,!1,C)&&W,N)for(J=0;J<N.length;J++)he=C.g=N[J],W=lp(he,B,!1,C)&&W}Ii.prototype.N=function(){if(Ii.aa.N.call(this),this.i){var U=this.i,C;for(C in U.g){for(var N=U.g[C],B=0;B<N.length;B++)Ae(N[B]);delete U.g[C],U.h--}}this.F=null},Ii.prototype.K=function(U,C,N,B){return this.i.add(String(U),C,!1,N,B)},Ii.prototype.L=function(U,C,N,B){return this.i.add(String(U),C,!0,N,B)};function lp(U,C,N,B){if(C=U.i.g[String(C)],!C)return!0;C=C.concat();for(var W=!0,J=0;J<C.length;++J){var he=C[J];if(he&&!he.da&&he.capture==N){var Ft=he.listener,hi=he.ha||he.src;he.fa&&Gt(U.i,he),W=Ft.call(hi,B)!==!1&&W}}return W&&!B.defaultPrevented}function yT(U,C,N){if(typeof U=="function")N&&(U=f(U,N));else if(U&&typeof U.handleEvent=="function")U=f(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:a.setTimeout(U,C||0)}function ET(U){U.g=yT(()=>{U.g=null,U.i&&(U.i=!1,ET(U))},U.l);const C=U.h;U.h=null,U.m.apply(null,C)}class cW extends ce{constructor(C,N){super(),this.m=C,this.l=N,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ET(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fg(U){ce.call(this),this.h=U,this.g={}}m(fg,ce);var vT=[];function wT(U){R(U.g,function(C,N){this.g.hasOwnProperty(N)&&oy(C)},U),U.g={}}fg.prototype.N=function(){fg.aa.N.call(this),wT(this)},fg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cy=a.JSON.stringify,uW=a.JSON.parse,dW=class{stringify(U){return a.JSON.stringify(U,void 0)}parse(U){return a.JSON.parse(U,void 0)}};function uy(){}uy.prototype.h=null;function _T(U){return U.h||(U.h=U.i())}function TT(){}var hg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dy(){le.call(this,"d")}m(dy,le);function fy(){le.call(this,"c")}m(fy,le);var Gc={},ST=null;function cp(){return ST=ST||new Ii}Gc.La="serverreachability";function IT(U){le.call(this,Gc.La,U)}m(IT,le);function gg(U){const C=cp();Gi(C,new IT(C))}Gc.STAT_EVENT="statevent";function xT(U,C){le.call(this,Gc.STAT_EVENT,U),this.stat=C}m(xT,le);function Xi(U){const C=cp();Gi(C,new xT(C,U))}Gc.Ma="timingevent";function CT(U,C){le.call(this,Gc.Ma,U),this.size=C}m(CT,le);function mg(U,C){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){U()},C)}function pg(){this.g=!0}pg.prototype.xa=function(){this.g=!1};function fW(U,C,N,B,W,J){U.info(function(){if(U.g)if(J)for(var he="",Ft=J.split("&"),hi=0;hi<Ft.length;hi++){var Ut=Ft[hi].split("=");if(1<Ut.length){var xi=Ut[0];Ut=Ut[1];var Ci=xi.split("_");he=2<=Ci.length&&Ci[1]=="type"?he+(xi+"="+Ut+"&"):he+(xi+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+B+") [attempt "+W+"]: "+C+`
`+N+`
`+he})}function hW(U,C,N,B,W,J,he){U.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+W+"]: "+C+`
`+N+`
`+J+" "+he})}function Nd(U,C,N,B){U.info(function(){return"XMLHTTP TEXT ("+C+"): "+mW(U,N)+(B?" "+B:"")})}function gW(U,C){U.info(function(){return"TIMEOUT: "+C})}pg.prototype.info=function(){};function mW(U,C){if(!U.g)return C;if(!C)return null;try{var N=JSON.parse(C);if(N){for(U=0;U<N.length;U++)if(Array.isArray(N[U])){var B=N[U];if(!(2>B.length)){var W=B[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<W.length;he++)W[he]=""}}}}return cy(N)}catch{return C}}var up={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},AT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hy;function dp(){}m(dp,uy),dp.prototype.g=function(){return new XMLHttpRequest},dp.prototype.i=function(){return{}},hy=new dp;function gl(U,C,N,B){this.j=U,this.i=C,this.l=N,this.R=B||1,this.U=new fg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RT}function RT(){this.i=null,this.g="",this.h=!1}var MT={},gy={};function my(U,C,N){U.L=1,U.v=mp(ia(C)),U.m=N,U.P=!0,kT(U,null)}function kT(U,C){U.F=Date.now(),fp(U),U.A=ia(U.v);var N=U.A,B=U.R;Array.isArray(B)||(B=[String(B)]),jT(N.i,"t",B),U.C=0,N=U.j.J,U.h=new RT,U.g=uS(U.j,N?C:null,!U.m),0<U.O&&(U.M=new cW(f(U.Y,U,U.g),U.O)),C=U.U,N=U.g,B=U.ca;var W="readystatechange";Array.isArray(W)||(W&&(vT[0]=W.toString()),W=vT);for(var J=0;J<W.length;J++){var he=mo(N,W[J],B||C.handleEvent,!1,C.h||C);if(!he)break;C.g[he.key]=he}C=U.H?T(U.H):{},U.m?(U.u||(U.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,C)):(U.u="GET",U.g.ea(U.A,U.u,null,C)),gg(),fW(U.i,U.u,U.A,U.l,U.R,U.m)}gl.prototype.ca=function(U){U=U.target;const C=this.M;C&&ra(U)==3?C.j():this.Y(U)},gl.prototype.Y=function(U){try{if(U==this.g)e:{const Ci=ra(this.g);var C=this.g.Ba();const Bd=this.g.Z();if(!(3>Ci)&&(Ci!=3||this.g&&(this.h.h||this.g.oa()||JT(this.g)))){this.J||Ci!=4||C==7||(C==8||0>=Bd?gg(3):gg(2)),py(this);var N=this.g.Z();this.X=N;t:if(LT(this)){var B=JT(this.g);U="";var W=B.length,J=ra(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xc(this),Ug(this);var he="";break t}this.h.i=new a.TextDecoder}for(C=0;C<W;C++)this.h.h=!0,U+=this.h.i.decode(B[C],{stream:!(J&&C==W-1)});B.length=0,this.h.g+=U,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=N==200,hW(this.i,this.u,this.A,this.l,this.R,Ci,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Ft,hi=this.g;if((Ft=hi.g?hi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ft)){var Ut=Ft;break t}}Ut=null}if(N=Ut)Nd(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uy(this,N);else{this.o=!1,this.s=3,Xi(12),Xc(this),Ug(this);break e}}if(this.P){N=!0;let ws;for(;!this.J&&this.C<he.length;)if(ws=pW(this,he),ws==gy){Ci==4&&(this.s=4,Xi(14),N=!1),Nd(this.i,this.l,null,"[Incomplete Response]");break}else if(ws==MT){this.s=4,Xi(15),Nd(this.i,this.l,he,"[Invalid Chunk]"),N=!1;break}else Nd(this.i,this.l,ws,null),Uy(this,ws);if(LT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ci!=4||he.length!=0||this.h.h||(this.s=1,Xi(16),N=!1),this.o=this.o&&N,!N)Nd(this.i,this.l,he,"[Invalid Chunked Response]"),Xc(this),Ug(this);else if(0<he.length&&!this.W){this.W=!0;var xi=this.j;xi.g==this&&xi.ba&&!xi.M&&(xi.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),_y(xi),xi.M=!0,Xi(11))}}else Nd(this.i,this.l,he,null),Uy(this,he);Ci==4&&Xc(this),this.o&&!this.J&&(Ci==4?oS(this.j,this):(this.o=!1,fp(this)))}else LW(this.g),N==400&&0<he.indexOf("Unknown SID")?(this.s=3,Xi(12)):(this.s=0,Xi(13)),Xc(this),Ug(this)}}}catch{}finally{}};function LT(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function pW(U,C){var N=U.C,B=C.indexOf(`
`,N);return B==-1?gy:(N=Number(C.substring(N,B)),isNaN(N)?MT:(B+=1,B+N>C.length?gy:(C=C.slice(B,B+N),U.C=B+N,C)))}gl.prototype.cancel=function(){this.J=!0,Xc(this)};function fp(U){U.S=Date.now()+U.I,DT(U,U.I)}function DT(U,C){if(U.B!=null)throw Error("WatchDog timer not null");U.B=mg(f(U.ba,U),C)}function py(U){U.B&&(a.clearTimeout(U.B),U.B=null)}gl.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(gW(this.i,this.A),this.L!=2&&(gg(),Xi(17)),Xc(this),this.s=2,Ug(this)):DT(this,this.S-U)};function Ug(U){U.j.G==0||U.J||oS(U.j,U)}function Xc(U){py(U);var C=U.M;C&&typeof C.ma=="function"&&C.ma(),U.M=null,wT(U.U),U.g&&(C=U.g,U.g=null,C.abort(),C.ma())}function Uy(U,C){try{var N=U.j;if(N.G!=0&&(N.g==U||by(N.h,U))){if(!U.K&&by(N.h,U)&&N.G==3){try{var B=N.Da.g.parse(C)}catch{B=null}if(Array.isArray(B)&&B.length==3){var W=B;if(W[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<U.F)vp(N),yp(N);else break e;wy(N),Xi(18)}}else N.za=W[1],0<N.za-N.T&&37500>W[2]&&N.F&&N.v==0&&!N.C&&(N.C=mg(f(N.Za,N),6e3));if(1>=PT(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Yc(N,11)}else if((U.K||N.g==U)&&vp(N),!y(C))for(W=N.Da.g.parse(C),C=0;C<W.length;C++){let Ut=W[C];if(N.T=Ut[0],Ut=Ut[1],N.G==2)if(Ut[0]=="c"){N.K=Ut[1],N.ia=Ut[2];const xi=Ut[3];xi!=null&&(N.la=xi,N.j.info("VER="+N.la));const Ci=Ut[4];Ci!=null&&(N.Aa=Ci,N.j.info("SVER="+N.Aa));const Bd=Ut[5];Bd!=null&&typeof Bd=="number"&&0<Bd&&(B=1.5*Bd,N.L=B,N.j.info("backChannelRequestTimeoutMs_="+B)),B=N;const ws=U.g;if(ws){const _p=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_p){var J=B.h;J.g||_p.indexOf("spdy")==-1&&_p.indexOf("quic")==-1&&_p.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(yy(J,J.h),J.h=null))}if(B.D){const Ty=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;Ty&&(B.ya=Ty,Kt(B.I,B.D,Ty))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-U.F,N.j.info("Handshake RTT: "+N.R+"ms")),B=N;var he=U;if(B.qa=cS(B,B.J?B.ia:null,B.W),he.K){FT(B.h,he);var Ft=he,hi=B.L;hi&&(Ft.I=hi),Ft.B&&(py(Ft),fp(Ft)),B.g=he}else rS(B);0<N.i.length&&Ep(N)}else Ut[0]!="stop"&&Ut[0]!="close"||Yc(N,7);else N.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Yc(N,7):vy(N):Ut[0]!="noop"&&N.l&&N.l.ta(Ut),N.v=0)}}gg(4)}catch{}}var UW=class{constructor(U,C){this.g=U,this.map=C}};function OT(U){this.l=U||10,a.PerformanceNavigationTiming?(U=a.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NT(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function PT(U){return U.h?1:U.g?U.g.size:0}function by(U,C){return U.h?U.h==C:U.g?U.g.has(C):!1}function yy(U,C){U.g?U.g.add(C):U.h=C}function FT(U,C){U.h&&U.h==C?U.h=null:U.g&&U.g.has(C)&&U.g.delete(C)}OT.prototype.cancel=function(){if(this.i=BT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function BT(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let C=U.i;for(const N of U.g.values())C=C.concat(N.D);return C}return p(U.i)}function bW(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(l(U)){for(var C=[],N=U.length,B=0;B<N;B++)C.push(U[B]);return C}C=[],N=0;for(B in U)C[N++]=U[B];return C}function yW(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(l(U)||typeof U=="string"){var C=[];U=U.length;for(var N=0;N<U;N++)C.push(N);return C}C=[],N=0;for(const B in U)C[N++]=B;return C}}}function zT(U,C){if(U.forEach&&typeof U.forEach=="function")U.forEach(C,void 0);else if(l(U)||typeof U=="string")Array.prototype.forEach.call(U,C,void 0);else for(var N=yW(U),B=bW(U),W=B.length,J=0;J<W;J++)C.call(void 0,B[J],N&&N[J],U)}var HT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EW(U,C){if(U){U=U.split("&");for(var N=0;N<U.length;N++){var B=U[N].indexOf("="),W=null;if(0<=B){var J=U[N].substring(0,B);W=U[N].substring(B+1)}else J=U[N];C(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function jc(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof jc){this.h=U.h,hp(this,U.j),this.o=U.o,this.g=U.g,gp(this,U.s),this.l=U.l;var C=U.i,N=new Eg;N.i=C.i,C.g&&(N.g=new Map(C.g),N.h=C.h),VT(this,N),this.m=U.m}else U&&(C=String(U).match(HT))?(this.h=!1,hp(this,C[1]||"",!0),this.o=bg(C[2]||""),this.g=bg(C[3]||"",!0),gp(this,C[4]),this.l=bg(C[5]||"",!0),VT(this,C[6]||"",!0),this.m=bg(C[7]||"")):(this.h=!1,this.i=new Eg(null,this.h))}jc.prototype.toString=function(){var U=[],C=this.j;C&&U.push(yg(C,$T,!0),":");var N=this.g;return(N||C=="file")&&(U.push("//"),(C=this.o)&&U.push(yg(C,$T,!0),"@"),U.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&U.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&U.push("/"),U.push(yg(N,N.charAt(0)=="/"?_W:wW,!0))),(N=this.i.toString())&&U.push("?",N),(N=this.m)&&U.push("#",yg(N,SW)),U.join("")};function ia(U){return new jc(U)}function hp(U,C,N){U.j=N?bg(C,!0):C,U.j&&(U.j=U.j.replace(/:$/,""))}function gp(U,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);U.s=C}else U.s=null}function VT(U,C,N){C instanceof Eg?(U.i=C,IW(U.i,U.h)):(N||(C=yg(C,TW)),U.i=new Eg(C,U.h))}function Kt(U,C,N){U.i.set(C,N)}function mp(U){return Kt(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function bg(U,C){return U?C?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function yg(U,C,N){return typeof U=="string"?(U=encodeURI(U).replace(C,vW),N&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function vW(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var $T=/[#\/\?@]/g,wW=/[#\?:]/g,_W=/[#\?]/g,TW=/[#\?@]/g,SW=/#/g;function Eg(U,C){this.h=this.g=null,this.i=U||null,this.j=!!C}function ml(U){U.g||(U.g=new Map,U.h=0,U.i&&EW(U.i,function(C,N){U.add(decodeURIComponent(C.replace(/\+/g," ")),N)}))}e=Eg.prototype,e.add=function(U,C){ml(this),this.i=null,U=Pd(this,U);var N=this.g.get(U);return N||this.g.set(U,N=[]),N.push(C),this.h+=1,this};function GT(U,C){ml(U),C=Pd(U,C),U.g.has(C)&&(U.i=null,U.h-=U.g.get(C).length,U.g.delete(C))}function XT(U,C){return ml(U),C=Pd(U,C),U.g.has(C)}e.forEach=function(U,C){ml(this),this.g.forEach(function(N,B){N.forEach(function(W){U.call(C,W,B,this)},this)},this)},e.na=function(){ml(this);const U=Array.from(this.g.values()),C=Array.from(this.g.keys()),N=[];for(let B=0;B<C.length;B++){const W=U[B];for(let J=0;J<W.length;J++)N.push(C[B])}return N},e.V=function(U){ml(this);let C=[];if(typeof U=="string")XT(this,U)&&(C=C.concat(this.g.get(Pd(this,U))));else{U=Array.from(this.g.values());for(let N=0;N<U.length;N++)C=C.concat(U[N])}return C},e.set=function(U,C){return ml(this),this.i=null,U=Pd(this,U),XT(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[C]),this.h+=1,this},e.get=function(U,C){return U?(U=this.V(U),0<U.length?String(U[0]):C):C};function jT(U,C,N){GT(U,C),0<N.length&&(U.i=null,U.g.set(Pd(U,C),p(N)),U.h+=N.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],C=Array.from(this.g.keys());for(var N=0;N<C.length;N++){var B=C[N];const J=encodeURIComponent(String(B)),he=this.V(B);for(B=0;B<he.length;B++){var W=J;he[B]!==""&&(W+="="+encodeURIComponent(String(he[B]))),U.push(W)}}return this.i=U.join("&")};function Pd(U,C){return C=String(C),U.j&&(C=C.toLowerCase()),C}function IW(U,C){C&&!U.j&&(ml(U),U.i=null,U.g.forEach(function(N,B){var W=B.toLowerCase();B!=W&&(GT(this,B),jT(this,W,N))},U)),U.j=C}function xW(U,C){const N=new pg;if(a.Image){const B=new Image;B.onload=h(pl,N,"TestLoadImage: loaded",!0,C,B),B.onerror=h(pl,N,"TestLoadImage: error",!1,C,B),B.onabort=h(pl,N,"TestLoadImage: abort",!1,C,B),B.ontimeout=h(pl,N,"TestLoadImage: timeout",!1,C,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=U}else C(!1)}function CW(U,C){const N=new pg,B=new AbortController,W=setTimeout(()=>{B.abort(),pl(N,"TestPingServer: timeout",!1,C)},1e4);fetch(U,{signal:B.signal}).then(J=>{clearTimeout(W),J.ok?pl(N,"TestPingServer: ok",!0,C):pl(N,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(W),pl(N,"TestPingServer: error",!1,C)})}function pl(U,C,N,B,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),B(N)}catch{}}function AW(){this.g=new dW}function RW(U,C,N){const B=N||"";try{zT(U,function(W,J){let he=W;c(W)&&(he=cy(W)),C.push(B+J+"="+encodeURIComponent(he))})}catch(W){throw C.push(B+"type="+encodeURIComponent("_badmap")),W}}function pp(U){this.l=U.Ub||null,this.j=U.eb||!1}m(pp,uy),pp.prototype.g=function(){return new Up(this.l,this.j)},pp.prototype.i=function(U){return function(){return U}}({});function Up(U,C){Ii.call(this),this.D=U,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Up,Ii),e=Up.prototype,e.open=function(U,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=C,this.readyState=1,wg(this)},e.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(C.body=U),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vg(this)),this.readyState=0},e.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,wg(this)),this.g&&(this.readyState=3,wg(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YT(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function YT(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}e.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var C=U.value?U.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!U.done}))&&(this.response=this.responseText+=C)}U.done?vg(this):wg(this),this.readyState==3&&YT(this)}},e.Ra=function(U){this.g&&(this.response=this.responseText=U,vg(this))},e.Qa=function(U){this.g&&(this.response=U,vg(this))},e.ga=function(){this.g&&vg(this)};function vg(U){U.readyState=4,U.l=null,U.j=null,U.v=null,wg(U)}e.setRequestHeader=function(U,C){this.u.append(U,C)},e.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],C=this.h.entries();for(var N=C.next();!N.done;)N=N.value,U.push(N[0]+": "+N[1]),N=C.next();return U.join(`\r
`)};function wg(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(Up.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function WT(U){let C="";return R(U,function(N,B){C+=B,C+=":",C+=N,C+=`\r
`}),C}function Ey(U,C,N){e:{for(B in N){var B=!1;break e}B=!0}B||(N=WT(N),typeof U=="string"?N!=null&&encodeURIComponent(String(N)):Kt(U,C,N))}function pn(U){Ii.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(pn,Ii);var MW=/^https?$/i,kW=["POST","PUT"];e=pn.prototype,e.Ha=function(U){this.J=U},e.ea=function(U,C,N,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);C=C?C.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hy.g(),this.v=this.o?_T(this.o):_T(hy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(C,String(U),!0),this.B=!1}catch(J){KT(this,J);return}if(U=N||"",N=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var W in B)N.set(W,B[W]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const J of B.keys())N.set(J,B.get(J));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(N.keys()).find(J=>J.toLowerCase()=="content-type"),W=a.FormData&&U instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kW,C,void 0))||B||W||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of N)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QT(this),this.u=!0,this.g.send(U),this.u=!1}catch(J){KT(this,J)}};function KT(U,C){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=C,U.m=5,ZT(U),bp(U)}function ZT(U){U.A||(U.A=!0,Gi(U,"complete"),Gi(U,"error"))}e.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,Gi(this,"complete"),Gi(this,"abort"),bp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bp(this,!0)),pn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qT(this):this.bb())},e.bb=function(){qT(this)};function qT(U){if(U.h&&typeof o<"u"&&(!U.v[1]||ra(U)!=4||U.Z()!=2)){if(U.u&&ra(U)==4)yT(U.Ea,0,U);else if(Gi(U,"readystatechange"),ra(U)==4){U.h=!1;try{const he=U.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var N;if(!(N=C)){var B;if(B=he===0){var W=String(U.D).match(HT)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),B=!MW.test(W?W.toLowerCase():"")}N=B}if(N)Gi(U,"complete"),Gi(U,"success");else{U.m=6;try{var J=2<ra(U)?U.g.statusText:""}catch{J=""}U.l=J+" ["+U.Z()+"]",ZT(U)}}finally{bp(U)}}}}function bp(U,C){if(U.g){QT(U);const N=U.g,B=U.v[0]?()=>{}:null;U.g=null,U.v=null,C||Gi(U,"ready");try{N.onreadystatechange=B}catch{}}}function QT(U){U.I&&(a.clearTimeout(U.I),U.I=null)}e.isActive=function(){return!!this.g};function ra(U){return U.g?U.g.readyState:0}e.Z=function(){try{return 2<ra(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(U){if(this.g){var C=this.g.responseText;return U&&C.indexOf(U)==0&&(C=C.substring(U.length)),uW(C)}};function JT(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function LW(U){const C={};U=(U.g&&2<=ra(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<U.length;B++){if(y(U[B]))continue;var N=M(U[B]);const W=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const J=C[W]||[];C[W]=J,J.push(N)}_(C,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _g(U,C,N){return N&&N.internalChannelParams&&N.internalChannelParams[U]||C}function eS(U){this.Aa=0,this.i=[],this.j=new pg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_g("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_g("baseRetryDelayMs",5e3,U),this.cb=_g("retryDelaySeedMs",1e4,U),this.Wa=_g("forwardChannelMaxRetries",2,U),this.wa=_g("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new OT(U&&U.concurrentRequestLimit),this.Da=new AW,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=eS.prototype,e.la=8,e.G=1,e.connect=function(U,C,N,B){Xi(0),this.W=U,this.H=C||{},N&&B!==void 0&&(this.H.OSID=N,this.H.OAID=B),this.F=this.X,this.I=cS(this,null,this.W),Ep(this)};function vy(U){if(tS(U),U.G==3){var C=U.U++,N=ia(U.I);if(Kt(N,"SID",U.K),Kt(N,"RID",C),Kt(N,"TYPE","terminate"),Tg(U,N),C=new gl(U,U.j,C),C.L=2,C.v=mp(ia(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=C.v,N=!0),N||(C.g=uS(C.j,null),C.g.ea(C.v)),C.F=Date.now(),fp(C)}lS(U)}function yp(U){U.g&&(_y(U),U.g.cancel(),U.g=null)}function tS(U){yp(U),U.u&&(a.clearTimeout(U.u),U.u=null),vp(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&a.clearTimeout(U.s),U.s=null)}function Ep(U){if(!NT(U.h)&&!U.s){U.s=!0;var C=U.Ga;$||Z(),j||($(),j=!0),X.add(C,U),U.B=0}}function DW(U,C){return PT(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=C.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=mg(f(U.Ga,U,C),aS(U,U.B)),U.B++,!0)}e.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const W=new gl(this,this.j,U);let J=this.o;if(this.S&&(J?(J=T(J),I(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var C=0,N=0;N<this.i.length;N++){t:{var B=this.i[N];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(C+=B,4096<C){C=N;break e}if(C===4096||N===this.i.length-1){C=N+1;break e}}C=1e3}else C=1e3;C=iS(this,W,C),N=ia(this.I),Kt(N,"RID",U),Kt(N,"CVER",22),this.D&&Kt(N,"X-HTTP-Session-Id",this.D),Tg(this,N),J&&(this.O?C="headers="+encodeURIComponent(String(WT(J)))+"&"+C:this.m&&Ey(N,this.m,J)),yy(this.h,W),this.Ua&&Kt(N,"TYPE","init"),this.P?(Kt(N,"$req",C),Kt(N,"SID","null"),W.T=!0,my(W,N,null)):my(W,N,C),this.G=2}}else this.G==3&&(U?nS(this,U):this.i.length==0||NT(this.h)||nS(this))};function nS(U,C){var N;C?N=C.l:N=U.U++;const B=ia(U.I);Kt(B,"SID",U.K),Kt(B,"RID",N),Kt(B,"AID",U.T),Tg(U,B),U.m&&U.o&&Ey(B,U.m,U.o),N=new gl(U,U.j,N,U.B+1),U.m===null&&(N.H=U.o),C&&(U.i=C.D.concat(U.i)),C=iS(U,N,1e3),N.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),yy(U.h,N),my(N,B,C)}function Tg(U,C){U.H&&R(U.H,function(N,B){Kt(C,B,N)}),U.l&&zT({},function(N,B){Kt(C,B,N)})}function iS(U,C,N){N=Math.min(U.i.length,N);var B=U.l?f(U.l.Na,U.l,U):null;e:{var W=U.i;let J=-1;for(;;){const he=["count="+N];J==-1?0<N?(J=W[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let Ft=!0;for(let hi=0;hi<N;hi++){let Ut=W[hi].g;const xi=W[hi].map;if(Ut-=J,0>Ut)J=Math.max(0,W[hi].g-100),Ft=!1;else try{RW(xi,he,"req"+Ut+"_")}catch{B&&B(xi)}}if(Ft){B=he.join("&");break e}}}return U=U.i.splice(0,N),C.D=U,B}function rS(U){if(!U.g&&!U.u){U.Y=1;var C=U.Fa;$||Z(),j||($(),j=!0),X.add(C,U),U.v=0}}function wy(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=mg(f(U.Fa,U),aS(U,U.v)),U.v++,!0)}e.Fa=function(){if(this.u=null,sS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=mg(f(this.ab,this),U)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xi(10),yp(this),sS(this))};function _y(U){U.A!=null&&(a.clearTimeout(U.A),U.A=null)}function sS(U){U.g=new gl(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var C=ia(U.qa);Kt(C,"RID","rpc"),Kt(C,"SID",U.K),Kt(C,"AID",U.T),Kt(C,"CI",U.F?"0":"1"),!U.F&&U.ja&&Kt(C,"TO",U.ja),Kt(C,"TYPE","xmlhttp"),Tg(U,C),U.m&&U.o&&Ey(C,U.m,U.o),U.L&&(U.g.I=U.L);var N=U.g;U=U.ia,N.L=1,N.v=mp(ia(C)),N.m=null,N.P=!0,kT(N,U)}e.Za=function(){this.C!=null&&(this.C=null,yp(this),wy(this),Xi(19))};function vp(U){U.C!=null&&(a.clearTimeout(U.C),U.C=null)}function oS(U,C){var N=null;if(U.g==C){vp(U),_y(U),U.g=null;var B=2}else if(by(U.h,C))N=C.D,FT(U.h,C),B=1;else return;if(U.G!=0){if(C.o)if(B==1){N=C.m?C.m.length:0,C=Date.now()-C.F;var W=U.B;B=cp(),Gi(B,new CT(B,N)),Ep(U)}else rS(U);else if(W=C.s,W==3||W==0&&0<C.X||!(B==1&&DW(U,C)||B==2&&wy(U)))switch(N&&0<N.length&&(C=U.h,C.i=C.i.concat(N)),W){case 1:Yc(U,5);break;case 4:Yc(U,10);break;case 3:Yc(U,6);break;default:Yc(U,2)}}}function aS(U,C){let N=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(N*=2),N*C}function Yc(U,C){if(U.j.info("Error code "+C),C==2){var N=f(U.fb,U),B=U.Xa;const W=!B;B=new jc(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hp(B,"https"),mp(B),W?xW(B.toString(),N):CW(B.toString(),N)}else Xi(2);U.G=0,U.l&&U.l.sa(C),lS(U),tS(U)}e.fb=function(U){U?(this.j.info("Successfully pinged google.com"),Xi(2)):(this.j.info("Failed to ping google.com"),Xi(1))};function lS(U){if(U.G=0,U.ka=[],U.l){const C=BT(U.h);(C.length!=0||U.i.length!=0)&&(b(U.ka,C),b(U.ka,U.i),U.h.i.length=0,p(U.i),U.i.length=0),U.l.ra()}}function cS(U,C,N){var B=N instanceof jc?ia(N):new jc(N);if(B.g!="")C&&(B.g=C+"."+B.g),gp(B,B.s);else{var W=a.location;B=W.protocol,C=C?C+"."+W.hostname:W.hostname,W=+W.port;var J=new jc(null);B&&hp(J,B),C&&(J.g=C),W&&gp(J,W),N&&(J.l=N),B=J}return N=U.D,C=U.ya,N&&C&&Kt(B,N,C),Kt(B,"VER",U.la),Tg(U,B),B}function uS(U,C,N){if(C&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=U.Ca&&!U.pa?new pn(new pp({eb:N})):new pn(U.pa),C.Ha(U.J),C}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function dS(){}e=dS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function wp(){}wp.prototype.g=function(U,C){return new wr(U,C)};function wr(U,C){Ii.call(this),this.g=new eS(C),this.l=U,this.h=C&&C.messageUrlParams||null,U=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(U?U["X-WebChannel-Content-Type"]=C.messageContentType:U={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(U?U["X-WebChannel-Client-Profile"]=C.va:U={"X-WebChannel-Client-Profile":C.va}),this.g.S=U,(U=C&&C.Sb)&&!y(U)&&(this.g.m=U),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,U=this.h,U!==null&&C in U&&(U=this.h,C in U&&delete U[C])),this.j=new Fd(this)}m(wr,Ii),wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){vy(this.g)},wr.prototype.o=function(U){var C=this.g;if(typeof U=="string"){var N={};N.__data__=U,U=N}else this.u&&(N={},N.__data__=cy(U),U=N);C.i.push(new UW(C.Ya++,U)),C.G==3&&Ep(C)},wr.prototype.N=function(){this.g.l=null,delete this.j,vy(this.g),delete this.g,wr.aa.N.call(this)};function fS(U){dy.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var C=U.__sm__;if(C){e:{for(const N in C){U=N;break e}U=void 0}(this.i=U)&&(U=this.i,C=C!==null&&U in C?C[U]:void 0),this.data=C}else this.data=U}m(fS,dy);function hS(){fy.call(this),this.status=1}m(hS,fy);function Fd(U){this.g=U}m(Fd,dS),Fd.prototype.ua=function(){Gi(this.g,"a")},Fd.prototype.ta=function(U){Gi(this.g,new fS(U))},Fd.prototype.sa=function(U){Gi(this.g,new hS)},Fd.prototype.ra=function(){Gi(this.g,"b")},wp.prototype.createWebChannel=wp.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,bj=function(){return new wp},Uj=function(){return cp()},pj=Gc,C4={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},up.NO_ERROR=0,up.TIMEOUT=8,up.HTTP_ERROR=6,h2=up,AT.COMPLETE="complete",mj=AT,TT.EventType=hg,hg.OPEN="a",hg.CLOSE="b",hg.ERROR="c",hg.MESSAGE="d",Ii.prototype.listen=Ii.prototype.K,E1=TT,pn.prototype.listenOnce=pn.prototype.L,pn.prototype.getLastError=pn.prototype.Ka,pn.prototype.getLastErrorCode=pn.prototype.Ba,pn.prototype.getStatus=pn.prototype.Z,pn.prototype.getResponseJson=pn.prototype.Oa,pn.prototype.getResponseText=pn.prototype.oa,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Ha,gj=pn}).apply(typeof bU<"u"?bU:typeof self<"u"?self:typeof window<"u"?window:{});const Tk="@firebase/firestore",Sk="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new ij("@firebase/firestore");function af(){return pd.logLevel}function we(e,...t){if(pd.logLevel<=ct.DEBUG){const n=t.map(M_);pd.debug(`Firestore (${lg}): ${e}`,...n)}}function al(e,...t){if(pd.logLevel<=ct.ERROR){const n=t.map(M_);pd.error(`Firestore (${lg}): ${e}`,...n)}}function Lh(e,...t){if(pd.logLevel<=ct.WARN){const n=t.map(M_);pd.warn(`Firestore (${lg}): ${e}`,...n)}}function M_(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e="Unexpected state"){const t=`FIRESTORE (${lg}) INTERNAL ASSERTION FAILED: `+e;throw al(t),new Error(t)}function Vt(e,t){e||Re()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Md{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Cve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Oi.UNAUTHENTICATED))}shutdown(){}}class Ave{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Rve{constructor(t){this.t=t,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Vt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new hc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hc,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Vt(typeof i.accessToken=="string"),new yj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Vt(t===null||typeof t=="string"),new Oi(t)}}class Mve{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kve{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new Mve(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ik{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lve{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,aj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Vt(this.o===void 0);const i=s=>{s.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ik(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vt(typeof n.token=="string"),this.R=n.token,new Ik(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dve(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Dve(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function dt(e,t){return e<t?-1:e>t?1:0}function Dh(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=-62135596800,Ck=1e6;class di{static now(){return di.fromMillis(Date.now())}static fromDate(t){return di.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Ck);return new di(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<xk)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ck}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-xk;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(t){return new Ne(t)}static min(){return new Ne(new di(0,0))}static max(){return new Ne(new di(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="__name__";class xo{constructor(t,n,i){n===void 0?n=0:n>t.length&&Re(),i===void 0?i=t.length-n:i>t.length-n&&Re(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return xo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=xo.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=xo.isNumericId(t),r=xo.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?xo.extractNumericId(t).compare(xo.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fc.fromString(t.substring(4,t.length-2))}}class ln extends xo{construct(t,n,i){return new ln(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Te(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ln(n)}static emptyPath(){return new ln([])}}const Ove=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fi extends xo{construct(t,n,i){return new Fi(t,n,i)}static isValidIdentifier(t){return Ove.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ak}static keyField(){return new Fi([Ak])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Te(re.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Te(re.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Te(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Te(re.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fi(n)}static emptyPath(){return new Fi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.path=t}static fromPath(t){return new Me(ln.fromString(t))}static fromName(t){return new Me(ln.fromString(t).popFirst(5))}static empty(){return new Me(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ln.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ln.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Me(new ln(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-1;function Nve(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(i===1e9?new di(n+1,0):new di(n,i));return new Rc(r,Me.empty(),t)}function Pve(e){return new Rc(e.readTime,e.key,cm)}class Rc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Rc(Ne.min(),Me.empty(),cm)}static max(){return new Rc(Ne.max(),Me.empty(),cm)}}function Fve(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Me.comparator(e.documentKey,t.documentKey),n!==0?n:dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(e){if(e.code!==re.FAILED_PRECONDITION||e.message!==Bve)throw e;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ie((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ie.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ie.reject(n)}static resolve(t){return new ie((n,i)=>{n(t)})}static reject(t){return new ie((n,i)=>{i(t)})}static waitFor(t){return new ie((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=ie.resolve(!1);for(const i of t)n=n.next(r=>r?ie.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new ie((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new ie((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function Hve(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cg(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}j5.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vve=-1;function ip(e){return e==null}function eb(e){return e===0&&1/e==-1/0}function $ve(e){return typeof e=="number"&&Number.isInteger(e)&&!eb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj="";function Gve(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rk(t)),t=Xve(e.get(n),t);return Rk(t)}function Xve(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case vj:n+="";break;default:n+=s}}return n}function Rk(e){return e+vj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){this.comparator=t,this.root=n||bi.EMPTY}insert(t,n){return new Cn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yU(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yU(this.root,t,this.comparator,!1)}getReverseIterator(){return new yU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yU(this.root,t,this.comparator,!0)}}class yU{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bi{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??bi.RED,this.left=r??bi.EMPTY,this.right=s??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new bi(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return bi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const t=this.left.check();if(t!==this.right.check())throw Re();return t+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1;bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(t,n,i,r,s){return this}insert(t,n,i){return new bi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new kk(this.data.getIterator())}getIteratorFrom(t){return new kk(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new qn(this.comparator);return n.data=t,n}}class kk{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t){this.fields=t,t.sort(Fi.comparator)}static empty(){return new ds([])}unionWith(t){let n=new qn(Fi.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ds(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _j("Invalid base64 string: "+s):s}}(t);return new Ti(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Ti(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ti.EMPTY_BYTE_STRING=new Ti("");const jve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(e){if(Vt(!!e),typeof e=="string"){let t=0;const n=jve.exec(e);if(Vt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sn(e.seconds),nanos:Sn(e.nanos)}}function Sn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function kc(e){return typeof e=="string"?Ti.fromBase64String(e):Ti.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="server_timestamp",Sj="__type__",Ij="__previous_value__",xj="__local_write_time__";function k_(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Sj])===null||n===void 0?void 0:n.stringValue)===Tj}function Y5(e){const t=e.mapValue.fields[Ij];return k_(t)?Y5(t):t}function um(e){const t=Mc(e.mapValue.fields[xj].timestampValue);return new di(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yve{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const tb="(default)";class dm{constructor(t,n){this.projectId=t,this.database=n||tb}static empty(){return new dm("","")}get isDefaultDatabase(){return this.database===tb}isEqual(t){return t instanceof dm&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="__type__",Wve="__max__",EU={mapValue:{}},Aj="__vector__",nb="value";function Lc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?k_(e)?4:Zve(e)?9007199254740991:Kve(e)?10:11:Re()}function Ko(e,t){if(e===t)return!0;const n=Lc(e);if(n!==Lc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return um(e).isEqual(um(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Mc(r.timestampValue),a=Mc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return kc(r.bytesValue).isEqual(kc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Sn(r.geoPointValue.latitude)===Sn(s.geoPointValue.latitude)&&Sn(r.geoPointValue.longitude)===Sn(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Sn(r.integerValue)===Sn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Sn(r.doubleValue),a=Sn(s.doubleValue);return o===a?eb(o)===eb(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Dh(e.arrayValue.values||[],t.arrayValue.values||[],Ko);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Mk(o)!==Mk(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ko(o[l],a[l])))return!1;return!0}(e,t);default:return Re()}}function fm(e,t){return(e.values||[]).find(n=>Ko(n,t))!==void 0}function Oh(e,t){if(e===t)return 0;const n=Lc(e),i=Lc(t);if(n!==i)return dt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Sn(s.integerValue||s.doubleValue),l=Sn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Lk(e.timestampValue,t.timestampValue);case 4:return Lk(um(e),um(t));case 5:return dt(e.stringValue,t.stringValue);case 6:return function(s,o){const a=kc(s),l=kc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=dt(a[c],l[c]);if(u!==0)return u}return dt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=dt(Sn(s.latitude),Sn(o.latitude));return a!==0?a:dt(Sn(s.longitude),Sn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Dk(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[nb])===null||a===void 0?void 0:a.arrayValue,m=(l=f[nb])===null||l===void 0?void 0:l.arrayValue,p=dt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:Dk(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===EU.mapValue&&o===EU.mapValue)return 0;if(s===EU.mapValue)return 1;if(o===EU.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=dt(l[d],u[d]);if(f!==0)return f;const h=Oh(a[l[d]],c[u[d]]);if(h!==0)return h}return dt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Re()}}function Lk(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return dt(e,t);const n=Mc(e),i=Mc(t),r=dt(n.seconds,i.seconds);return r!==0?r:dt(n.nanos,i.nanos)}function Dk(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Oh(n[r],i[r]);if(s)return s}return dt(n.length,i.length)}function Nh(e){return A4(e)}function A4(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Mc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return kc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Me.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=A4(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${A4(n.fields[o])}`;return r+"}"}(e.mapValue):Re()}function g2(e){switch(Lc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Y5(e);return t?16+g2(t):16;case 5:return 2*e.stringValue.length;case 6:return kc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+g2(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return kd(i.fields,(s,o)=>{r+=s.length+g2(o)}),r}(e.mapValue);default:throw Re()}}function R4(e){return!!e&&"integerValue"in e}function L_(e){return!!e&&"arrayValue"in e}function Ok(e){return!!e&&"nullValue"in e}function Nk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function D7(e){return!!e&&"mapValue"in e}function Kve(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Cj])===null||n===void 0?void 0:n.stringValue)===Aj}function o0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return kd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=o0(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=o0(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zve(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Wve}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t){this.value=t}static empty(){return new ur({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!D7(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=o0(n)}setAll(t){let n=Fi.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=o0(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());D7(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ko(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];D7(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){kd(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new ur(o0(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new oi(t,0,Ne.min(),Ne.min(),Ne.min(),ur.empty(),0)}static newFoundDocument(t,n,i,r){return new oi(t,1,n,Ne.min(),i,r,0)}static newNoDocument(t,n){return new oi(t,2,n,Ne.min(),Ne.min(),ur.empty(),0)}static newUnknownDocument(t,n){return new oi(t,3,n,Ne.min(),Ne.min(),ur.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof oi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,n){this.position=t,this.inclusive=n}}function Pk(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=Me.comparator(Me.fromName(o.referenceValue),n.key):i=Oh(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fk(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ko(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t,n="asc"){this.field=t,this.dir=n}}function qve(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{}class Zn extends Rj{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new Jve(t,n,i):n==="array-contains"?new nwe(t,i):n==="in"?new iwe(t,i):n==="not-in"?new rwe(t,i):n==="array-contains-any"?new swe(t,i):new Zn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new ewe(t,i):new twe(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oh(n,this.value)):n!==null&&Lc(this.value)===Lc(n)&&this.matchesComparison(Oh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zo extends Rj{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Zo(t,n)}matches(t){return Mj(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Mj(e){return e.op==="and"}function kj(e){return Qve(e)&&Mj(e)}function Qve(e){for(const t of e.filters)if(t instanceof Zo)return!1;return!0}function M4(e){if(e instanceof Zn)return e.field.canonicalString()+e.op.toString()+Nh(e.value);if(kj(e))return e.filters.map(t=>M4(t)).join(",");{const t=e.filters.map(n=>M4(n)).join(",");return`${e.op}(${t})`}}function Lj(e,t){return e instanceof Zn?function(i,r){return r instanceof Zn&&i.op===r.op&&i.field.isEqual(r.field)&&Ko(i.value,r.value)}(e,t):e instanceof Zo?function(i,r){return r instanceof Zo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Lj(o,r.filters[a]),!0):!1}(e,t):void Re()}function Dj(e){return e instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${Nh(n.value)}`}(e):e instanceof Zo?function(n){return n.op.toString()+" {"+n.getFilters().map(Dj).join(" ,")+"}"}(e):"Filter"}class Jve extends Zn{constructor(t,n,i){super(t,n,i),this.key=Me.fromName(i.referenceValue)}matches(t){const n=Me.comparator(t.key,this.key);return this.matchesComparison(n)}}class ewe extends Zn{constructor(t,n){super(t,"in",n),this.keys=Oj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class twe extends Zn{constructor(t,n){super(t,"not-in",n),this.keys=Oj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Oj(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Me.fromName(i.referenceValue))}class nwe extends Zn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return L_(n)&&fm(n.arrayValue,this.value)}}class iwe extends Zn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&fm(this.value.arrayValue,n)}}class rwe extends Zn{constructor(t,n){super(t,"not-in",n)}matches(t){if(fm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!fm(this.value.arrayValue,n)}}class swe extends Zn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!L_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>fm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class owe{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function Bk(e,t=null,n=[],i=[],r=null,s=null,o=null){return new owe(e,t,n,i,r,s,o)}function D_(e){const t=tt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>M4(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ip(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Nh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Nh(i)).join(",")),t.le=n}return t.le}function O_(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qve(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Lj(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fk(e.startAt,t.startAt)&&Fk(e.endAt,t.endAt)}function k4(e){return Me.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function awe(e,t,n,i,r,s,o,a){return new W5(e,t,n,i,r,s,o,a)}function N_(e){return new W5(e)}function zk(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function lwe(e){return e.collectionGroup!==null}function a0(e){const t=tt(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qn(Fi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new rb(s,i))}),n.has(Fi.keyField().canonicalString())||t.he.push(new rb(Fi.keyField(),i))}return t.he}function Ho(e){const t=tt(e);return t.Pe||(t.Pe=cwe(t,a0(e))),t.Pe}function cwe(e,t){if(e.limitType==="F")return Bk(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new rb(r.field,s)});const n=e.endAt?new ib(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ib(e.startAt.position,e.startAt.inclusive):null;return Bk(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function L4(e,t,n){return new W5(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function K5(e,t){return O_(Ho(e),Ho(t))&&e.limitType===t.limitType}function Nj(e){return`${D_(Ho(e))}|lt:${e.limitType}`}function lf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Dj(r)).join(", ")}]`),ip(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Nh(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Nh(r)).join(",")),`Target(${i})`}(Ho(e))}; limitType=${e.limitType})`}function Z5(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Me.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of a0(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=Pk(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,a0(i),r)||i.endAt&&!function(o,a,l){const c=Pk(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,a0(i),r))}(e,t)}function uwe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pj(e){return(t,n)=>{let i=!1;for(const r of a0(e)){const s=dwe(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function dwe(e,t,n){const i=e.field.isKeyField()?Me.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Oh(l,c):Re()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){kd(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return wj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fwe=new Cn(Me.comparator);function Dc(){return fwe}const Fj=new Cn(Me.comparator);function v1(...e){let t=Fj;for(const n of e)t=t.insert(n.key,n);return t}function hwe(e){let t=Fj;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Su(){return l0()}function Bj(){return l0()}function l0(){return new Ld(e=>e.toString(),(e,t)=>e.isEqual(t))}const gwe=new qn(Me.comparator);function pt(...e){let t=gwe;for(const n of e)t=t.add(n);return t}const mwe=new qn(dt);function pwe(){return mwe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eb(t)?"-0":t}}function zj(e){return{integerValue:""+e}}function Uwe(e,t){return $ve(t)?zj(t):P_(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this._=void 0}}function bwe(e,t,n){return e instanceof sb?function(r,s){const o={fields:{[Sj]:{stringValue:Tj},[xj]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&k_(s)&&(s=Y5(s)),s&&(o.fields[Ij]=s),{mapValue:o}}(n,t):e instanceof hm?Hj(e,t):e instanceof gm?Vj(e,t):function(r,s){const o=Ewe(r,s),a=Hk(o)+Hk(r.Ie);return R4(o)&&R4(r.Ie)?zj(a):P_(r.serializer,a)}(e,t)}function ywe(e,t,n){return e instanceof hm?Hj(e,t):e instanceof gm?Vj(e,t):n}function Ewe(e,t){return e instanceof ob?function(i){return R4(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class sb extends q5{}class hm extends q5{constructor(t){super(),this.elements=t}}function Hj(e,t){const n=$j(t);for(const i of e.elements)n.some(r=>Ko(r,i))||n.push(i);return{arrayValue:{values:n}}}class gm extends q5{constructor(t){super(),this.elements=t}}function Vj(e,t){let n=$j(t);for(const i of e.elements)n=n.filter(r=>!Ko(r,i));return{arrayValue:{values:n}}}class ob extends q5{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Hk(e){return Sn(e.integerValue||e.doubleValue)}function $j(e){return L_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function vwe(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof hm&&r instanceof hm||i instanceof gm&&r instanceof gm?Dh(i.elements,r.elements,Ko):i instanceof ob&&r instanceof ob?Ko(i.Ie,r.Ie):i instanceof sb&&r instanceof sb}(e.transform,t.transform)}class os{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new os}static exists(t){return new os(void 0,t)}static updateTime(t){return new os(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function m2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Q5{}function Gj(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new F_(e.key,os.none()):new rp(e.key,e.data,os.none());{const n=e.data,i=ur.empty();let r=new qn(Fi.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Dd(e.key,i,new ds(r.toArray()),os.none())}}function wwe(e,t,n){e instanceof rp?function(r,s,o){const a=r.value.clone(),l=$k(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Dd?function(r,s,o){if(!m2(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$k(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Xj(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function c0(e,t,n,i){return e instanceof rp?function(s,o,a,l){if(!m2(s.precondition,o))return a;const c=s.value.clone(),u=Gk(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Dd?function(s,o,a,l){if(!m2(s.precondition,o))return a;const c=Gk(s.fieldTransforms,l,o),u=o.data;return u.setAll(Xj(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return m2(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Vk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Dh(i,r,(s,o)=>vwe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rp extends Q5{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dd extends Q5{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Xj(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function $k(e,t,n){const i=new Map;Vt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,ywe(o,a,n[r]))}return i}function Gk(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,bwe(s,o,t))}return i}class F_ extends Q5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jj extends Q5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _we{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&wwe(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=c0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=c0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Bj();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=Gj(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pt())}isEqual(t){return this.batchId===t.batchId&&Dh(this.mutations,t.mutations,(n,i)=>Vk(n,i))&&Dh(this.baseMutations,t.baseMutations,(n,i)=>Vk(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Twe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Swe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,lt;function Iwe(e){switch(e){case re.OK:return Re();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Re()}}function Yj(e){if(e===void 0)return al("GRPC error has no .code"),re.UNKNOWN;switch(e){case Mn.OK:return re.OK;case Mn.CANCELLED:return re.CANCELLED;case Mn.UNKNOWN:return re.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return re.INTERNAL;case Mn.UNAVAILABLE:return re.UNAVAILABLE;case Mn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mn.NOT_FOUND:return re.NOT_FOUND;case Mn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mn.ABORTED:return re.ABORTED;case Mn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mn.DATA_LOSS:return re.DATA_LOSS;default:return Re()}}(lt=Mn||(Mn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xwe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cwe=new fc([4294967295,4294967295],0);function Xk(e){const t=xwe().encode(e),n=new hj;return n.update(t),new Uint8Array(n.digest())}function jk(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new fc([n,i],0),new fc([r,s],0)]}class B_{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new w1(`Invalid padding: ${n}`);if(i<0)throw new w1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new w1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new w1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=fc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(fc.fromNumber(i)));return r.compare(Cwe)===1&&(r=new fc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=Xk(t),[i,r]=jk(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new B_(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=Xk(t),[i,r]=jk(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class w1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,sp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new J5(Ne.min(),r,new Cn(dt),Dc(),pt())}}class sp{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new sp(i,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class Wj{constructor(t,n){this.targetId=t,this.ge=n}}class Kj{constructor(t,n,i=Ti.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Yk{constructor(){this.pe=0,this.ye=Wk(),this.we=Ti.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=pt(),n=pt(),i=pt();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Re()}}),new sp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=Wk()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Vt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Awe{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Dc(),this.$e=vU(),this.Ke=vU(),this.Ue=new Cn(dt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Re()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(k4(s))if(i===0){const o=new Me(s.path);this.ze(n,o,oi.newNoDocument(o,Ne.min()))}else Vt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=kc(i).toUint8Array()}catch(l){if(l instanceof _j)return Lh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new B_(o,r,s)}catch(l){return Lh(l instanceof w1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&k4(a.target)){const l=new Me(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,oi.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=pt();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new J5(t,n,this.Ue,this.Qe,i);return this.Qe=Dc(),this.$e=vU(),this.Ke=vU(),this.Ue=new Cn(dt),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new Yk,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new qn(dt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new qn(dt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||we("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Yk),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function vU(){return new Cn(Me.comparator)}function Wk(){return new Cn(Me.comparator)}const Rwe={asc:"ASCENDING",desc:"DESCENDING"},Mwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kwe={and:"AND",or:"OR"};class Lwe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function D4(e,t){return e.useProto3Json||ip(t)?t:{value:t}}function ab(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zj(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Dwe(e,t){return ab(e,t.toTimestamp())}function Ha(e){return Vt(!!e),Ne.fromTimestamp(function(n){const i=Mc(n);return new di(i.seconds,i.nanos)}(e))}function z_(e,t){return O4(e,t).canonicalString()}function O4(e,t){const n=function(r){return new ln(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function qj(e){const t=ln.fromString(e);return Vt(nY(t)),t}function lb(e,t){return z_(e.databaseId,t.path)}function u0(e,t){const n=qj(t);if(n.get(1)!==e.databaseId.projectId)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Me(Jj(n))}function Qj(e,t){return z_(e.databaseId,t)}function Owe(e){const t=qj(e);return t.length===4?ln.emptyPath():Jj(t)}function Kk(e){return new ln(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jj(e){return Vt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Zk(e,t,n){return{name:lb(e,t),fields:n.value.mapValue.fields}}function Nwe(e,t){return"found"in t?function(i,r){Vt(!!r.found),r.found.name,r.found.updateTime;const s=u0(i,r.found.name),o=Ha(r.found.updateTime),a=r.found.createTime?Ha(r.found.createTime):Ne.min(),l=new ur({mapValue:{fields:r.found.fields}});return oi.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){Vt(!!r.missing),Vt(!!r.readTime);const s=u0(i,r.missing),o=Ha(r.readTime);return oi.newNoDocument(s,o)}(e,t):Re()}function Pwe(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Re()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Vt(u===void 0||typeof u=="string"),Ti.fromBase64String(u||"")):(Vt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ti.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?re.UNKNOWN:Yj(c.code);return new Te(u,c.message||"")}(o);n=new Kj(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=u0(e,i.document.name),s=Ha(i.document.updateTime),o=i.document.createTime?Ha(i.document.createTime):Ne.min(),a=new ur({mapValue:{fields:i.document.fields}}),l=oi.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new p2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=u0(e,i.document),s=i.readTime?Ha(i.readTime):Ne.min(),o=oi.newNoDocument(r,s),a=i.removedTargetIds||[];n=new p2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=u0(e,i.document),s=i.removedTargetIds||[];n=new p2([],s,r,null)}else{if(!("filter"in t))return Re();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new Swe(r,s),a=i.targetId;n=new Wj(a,o)}}return n}function Fwe(e,t){let n;if(t instanceof rp)n={update:Zk(e,t.key,t.value)};else if(t instanceof F_)n={delete:lb(e,t.key)};else if(t instanceof Dd)n={update:Zk(e,t.key,t.data),updateMask:jwe(t.fieldMask)};else{if(!(t instanceof jj))return Re();n={verify:lb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof sb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ob)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Re()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Dwe(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Re()}(e,t.precondition)),n}function Bwe(e,t){return{documents:[Qj(e,t.path)]}}function zwe(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Qj(e,r);const s=function(c){if(c.length!==0)return tY(Zo.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:cf(f.field),direction:$we(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=D4(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function Hwe(e){let t=Owe(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Vt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=eY(d);return f instanceof Zo&&kj(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new rb(uf(m.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,ip(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new ib(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new ib(h,f)}(n.endAt)),awe(t,r,o,s,a,"F",l,c)}function Vwe(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function eY(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=uf(n.unaryFilter.field);return Zn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=uf(n.unaryFilter.field);return Zn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=uf(n.unaryFilter.field);return Zn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=uf(n.unaryFilter.field);return Zn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(e):e.fieldFilter!==void 0?function(n){return Zn.create(uf(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Zo.create(n.compositeFilter.filters.map(i=>eY(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re()}}(n.compositeFilter.op))}(e):Re()}function $we(e){return Rwe[e]}function Gwe(e){return Mwe[e]}function Xwe(e){return kwe[e]}function cf(e){return{fieldPath:e.canonicalString()}}function uf(e){return Fi.fromServerFormat(e.fieldPath)}function tY(e){return e instanceof Zn?function(n){if(n.op==="=="){if(Nk(n.value))return{unaryFilter:{field:cf(n.field),op:"IS_NAN"}};if(Ok(n.value))return{unaryFilter:{field:cf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nk(n.value))return{unaryFilter:{field:cf(n.field),op:"IS_NOT_NAN"}};if(Ok(n.value))return{unaryFilter:{field:cf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cf(n.field),op:Gwe(n.op),value:n.value}}}(e):e instanceof Zo?function(n){const i=n.getFilters().map(r=>tY(r));return i.length===1?i[0]:{compositeFilter:{op:Xwe(n.op),filters:i}}}(e):Re()}function jwe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function nY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n,i,r,s=Ne.min(),o=Ne.min(),a=Ti.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Wl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ywe{constructor(t){this.Tt=t}}function Wwe(e){const t=Hwe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?L4(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kwe{constructor(){this.Tn=new Zwe}addToCollectionParentIndex(t,n){return this.Tn.add(n),ie.resolve()}getCollectionParents(t,n){return ie.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ie.resolve()}deleteFieldIndex(t,n){return ie.resolve()}deleteAllFieldIndexes(t){return ie.resolve()}createTargetIndexes(t,n){return ie.resolve()}getDocumentsMatchingTarget(t,n){return ie.resolve(null)}getIndexType(t,n){return ie.resolve(0)}getFieldIndexes(t,n){return ie.resolve([])}getNextCollectionGroupToUpdate(t){return ie.resolve(null)}getMinOffset(t,n){return ie.resolve(Rc.min())}getMinOffsetFromCollectionGroup(t,n){return ie.resolve(Rc.min())}updateCollectionGroup(t,n,i){return ie.resolve()}updateIndexEntries(t,n){return ie.resolve()}}class Zwe{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new qn(ln.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new qn(ln.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iY=41943040;class cr{static withCacheSize(t){return new cr(t,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(iY,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Ph(0)}static Un(){return new Ph(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="LruGarbageCollector",qwe=1048576;function Jk([e,t],[n,i]){const r=dt(e,n);return r===0?dt(t,i):r}class Qwe{constructor(t){this.Hn=t,this.buffer=new qn(Jk),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Jk(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Jwe{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){we(Qk,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cg(n)?we(Qk,"Ignoring IndexedDB error during garbage collection: ",n):await X5(n)}await this.er(3e5)})}}class e9e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ie.resolve(j5.ae);const i=new Qwe(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(qk)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qk):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),af()<=ct.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function t9e(e,t){return new e9e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9e{constructor(){this.changes=new Ld(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,oi.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ie.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9e{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&c0(i.mutation,r,ds.empty(),di.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,pt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=pt()){const r=Su();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=v1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Su();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,pt()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Dc();const o=l0(),a=function(){return l0()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Dd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),c0(u.mutation,c,u.mutation.getFieldMask(),di.now())):o.set(c.key,ds.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new i9e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=l0();let r=new Cn((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||ds.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||pt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Bj();u.forEach(f=>{if(!s.has(f)){const h=Gj(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ie.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):lwe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):ie.resolve(Su());let a=cm,l=s;return o.next(c=>ie.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ie.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,pt())).next(u=>({batchId:a,changes:hwe(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Me(n)).next(i=>{let r=v1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=v1();return this.indexManager.getCollectionParents(t,s).next(a=>ie.forEach(a,l=>{const c=function(d,f){return new W5(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,oi.newInvalidDocument(u)))});let a=v1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&c0(u.mutation,c,ds.empty(),di.now()),Z5(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ie.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ha(r.createTime)}}(n)),ie.resolve()}getNamedQuery(t,n){return ie.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:Wwe(r.bundledQuery),readTime:Ha(r.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9e{constructor(){this.overlays=new Cn(Me.comparator),this.Rr=new Map}getOverlay(t,n){return ie.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Su();return ie.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),ie.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),ie.resolve()}getOverlaysForCollection(t,n,i){const r=Su(),s=n.length+1,o=new Me(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ie.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Cn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Su(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Su(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ie.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Twe(n,i));let s=this.Rr.get(n);s===void 0&&(s=pt(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9e{constructor(){this.sessionToken=Ti.EMPTY_BYTE_STRING}getSessionToken(t){return ie.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.Vr=new qn(ii.mr),this.gr=new qn(ii.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new ii(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new ii(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Me(new ln([])),i=new ii(n,t),r=new ii(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Me(new ln([])),i=new ii(n,t),r=new ii(n,t+1);let s=pt();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ii(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ii{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Me.comparator(t.key,n.key)||dt(t.Cr,n.Cr)}static pr(t,n){return dt(t.Cr,n.Cr)||Me.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new qn(ii.mr)}checkEmpty(t){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _we(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ii(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(t,n){return ie.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Vve:this.Fr-1)}getAllMutationBatches(t){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ii(n,0),r=new ii(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new qn(dt);return n.forEach(r=>{const s=new ii(r,0),o=new ii(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),ie.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Me.isDocumentKey(s)||(s=s.child(""));const o=new ii(new Me(s),0);let a=new qn(dt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),ie.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Vt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ie.forEach(n.mutations,r=>{const s=new ii(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new ii(n,0),r=this.Mr.firstAfterOrEqual(i);return ie.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ie.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9e{constructor(t){this.kr=t,this.docs=function(){return new Cn(Me.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ie.resolve(i?i.document.mutableCopy():oi.newInvalidDocument(n))}getEntries(t,n){let i=Dc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():oi.newInvalidDocument(r))}),ie.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Dc();const o=n.path,a=new Me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Fve(Pve(u),i)<=0||(r.has(u.key)||Z5(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Re()}qr(t,n){return ie.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new u9e(this)}getSize(t){return ie.resolve(this.size)}}class u9e extends n9e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),ie.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9e{constructor(t){this.persistence=t,this.Qr=new Ld(n=>D_(n),O_),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Kr=new H_,this.targetCount=0,this.Ur=Ph.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),ie.resolve()}getLastRemoteSnapshotVersion(t){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ie.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ie.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Ph(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ie.resolve()}updateTargetData(t,n){return this.zn(n),ie.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ie.waitFor(s).next(()=>r)}getTargetCount(t){return ie.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ie.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ie.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ie.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ie.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ie.resolve(i)}containsKey(t,n){return ie.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new j5(0),this.zr=!1,this.zr=!0,this.jr=new a9e,this.referenceDelegate=t(this),this.Hr=new d9e(this),this.indexManager=new Kwe,this.remoteDocumentCache=function(r){return new c9e(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new Ywe(n),this.Yr=new s9e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new o9e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new l9e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){we("MemoryPersistence","Starting transaction:",t);const r=new f9e(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return ie.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class f9e extends zve{constructor(t){super(),this.currentSequenceNumber=t}}class V_{constructor(t){this.persistence=t,this.ti=new H_,this.ni=null}static ri(t){return new V_(t)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ie.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ie.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,i=>{const r=Me.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,Ne.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ie.or([()=>ie.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class cb{constructor(t,n){this.persistence=t,this.oi=new Ld(i=>Gve(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=t9e(this,n)}static ri(t,n){return new cb(t,n)}Zr(){}Xr(t){return ie.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ie.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?ie.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,Ne.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ie.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ie.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ie.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ie.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=g2(t.data.value)),n}ar(t,n,i){return ie.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return ie.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=pt(),r=pt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $_(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return f4e()?8:Hve(u4e())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new h9e;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(af()<=ct.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",lf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(af()<=ct.DEBUG&&we("QueryEngine","Query:",lf(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(af()<=ct.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",lf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ho(n))):ie.resolve())}rs(t,n){if(zk(n))return ie.resolve(null);let i=Ho(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=L4(n,null,"F"),i=Ho(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=pt(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,L4(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return zk(n)||r.isEqual(Ne.min())?ie.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?ie.resolve(null):(af()<=ct.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lf(n)),this.hs(t,o,n,Nve(r,cm)).next(a=>a))})}cs(t,n){let i=new qn(Pj(t));return n.forEach((r,s)=>{Z5(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return af()<=ct.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",lf(n)),this.ns.getDocumentsMatchingQuery(t,n,Rc.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LocalStore",m9e=3e8;class p9e{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new Cn(dt),this.Is=new Ld(s=>D_(s),O_),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new r9e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function U9e(e,t,n,i){return new p9e(e,t,n,i)}async function sY(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=pt();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function oY(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function b9e(e,t){const n=tt(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Ti.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,b,E){return p.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=m9e?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Dc(),c=pt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(y9e(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Ne.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ie.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function y9e(e,t,n){let i=pt(),r=pt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Dc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):we(G_,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function E9e(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,ie.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new Wl(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function N4(e,t,n){const i=tt(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!cg(o))throw o;we(G_,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function eL(e,t,n){const i=tt(e);let r=Ne.min(),s=pt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=tt(l),f=d.Is.get(u);return f!==void 0?ie.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Ho(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:Ne.min(),n?s:pt())).next(a=>(v9e(i,uwe(t),a),{documents:a,gs:s})))}function v9e(e,t,n){let i=e.Es.get(t)||Ne.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class tL{constructor(){this.activeTargetIds=pwe()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class w9e{constructor(){this.ho=new tL,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new tL,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="ConnectivityMonitor";class iL{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){we(nL,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){we(nL,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wU=null;function P4(){return wU===null?wU=function(){return 268435456+Math.round(2147483648*Math.random())}():wU++,"0x"+wU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7="RestConnection",T9e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S9e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===tb?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=P4(),a=this.bo(t,n.toUriEncodedString());we(O7,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(we(O7,`Received RPC '${t}' ${o}: `,c),c),c=>{throw Lh(O7,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=T9e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="WebChannelConnection";class x9e extends S9e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=P4();return new Promise((o,a)=>{const l=new gj;l.setWithCredentials(!0),l.listenOnce(mj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case h2.NO_ERROR:const u=l.getResponseJson();we(Ri,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case h2.TIMEOUT:we(Ri,`RPC '${t}' ${s} timed out`),a(new Te(re.DEADLINE_EXCEEDED,"Request time out"));break;case h2.HTTP_ERROR:const d=l.getStatus();if(we(Ri,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(E)>=0?E:re.UNKNOWN}(h.status);a(new Te(m,h.message))}else a(new Te(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Te(re.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{we(Ri,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);we(Ri,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=P4(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=bj(),a=Uj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");we(Ri,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new I9e({Fo:b=>{h?we(Ri,`Not sending because RPC '${t}' stream ${r} is closed:`,b):(f||(we(Ri,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),we(Ri,`RPC '${t}' stream ${r} sending:`,b),d.send(b))},Mo:()=>d.close()}),p=(b,E,y)=>{b.listen(E,v=>{try{y(v)}catch(w){setTimeout(()=>{throw w},0)}})};return p(d,E1.EventType.OPEN,()=>{h||(we(Ri,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,E1.EventType.CLOSE,()=>{h||(h=!0,we(Ri,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,E1.EventType.ERROR,b=>{h||(h=!0,Lh(Ri,`RPC '${t}' stream ${r} transport errored:`,b),m.Ko(new Te(re.UNAVAILABLE,"The operation could not be completed")))}),p(d,E1.EventType.MESSAGE,b=>{var E;if(!h){const y=b.data[0];Vt(!!y);const v=y,w=(v==null?void 0:v.error)||((E=v[0])===null||E===void 0?void 0:E.error);if(w){we(Ri,`RPC '${t}' stream ${r} received error:`,w);const S=w.status;let R=function(x){const I=Mn[x];if(I!==void 0)return Yj(I)}(S),_=w.message;R===void 0&&(R=re.INTERNAL,_="Unknown error status: "+S+" with message "+w.message),h=!0,m.Ko(new Te(R,_)),d.close()}else we(Ri,`RPC '${t}' stream ${r} received:`,y),m.Uo(y)}}),p(a,pj.STAT_EVENT,b=>{b.stat===C4.PROXY?we(Ri,`RPC '${t}' stream ${r} detected buffering proxy`):b.stat===C4.NOPROXY&&we(Ri,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function N7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(e){return new Lwe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&we("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="PersistentStream";class C9e{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new X_(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(al(n.toString()),al("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new Te(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return we(rL,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(we(rL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A9e extends C9e{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=Pwe(this.serializer,t),i=function(s){if(!("targetChange"in s))return Ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?Ha(o.readTime):Ne.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=Kk(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=k4(l)?{documents:Bwe(s,l)}:{query:zwe(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Zj(s,o.resumeToken);const c=D4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=ab(s,o.snapshotVersion.toTimestamp());const c=D4(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=Vwe(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=Kk(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9e{}class M9e extends R9e{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,O4(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(re.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,O4(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(re.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class k9e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(al(n),this.N_=!1):we("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="RemoteStore";class L9e{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{ap(this)&&(we(Fh,"Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.W_.add(4),await op(c),c.j_.set("Unknown"),c.W_.delete(4),await ty(c)}(this))})}),this.j_=new k9e(i,r)}}async function ty(e){if(ap(e))for(const t of e.G_)await t(!0)}async function op(e){for(const t of e.G_)await t(!1)}function aY(e,t){const n=tt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),K_(n)?W_(n):ug(n).c_()&&Y_(n,t))}function j_(e,t){const n=tt(e),i=ug(n);n.U_.delete(t),i.c_()&&lY(n,t),n.U_.size===0&&(i.c_()?i.P_():ap(n)&&n.j_.set("Unknown"))}function Y_(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ne.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ug(e).y_(t)}function lY(e,t){e.H_.Ne(t),ug(e).w_(t)}function W_(e){e.H_=new Awe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),ug(e).start(),e.j_.B_()}function K_(e){return ap(e)&&!ug(e).u_()&&e.U_.size>0}function ap(e){return tt(e).W_.size===0}function cY(e){e.H_=void 0}async function D9e(e){e.j_.set("Online")}async function O9e(e){e.U_.forEach((t,n)=>{Y_(e,t)})}async function N9e(e,t){cY(e),K_(e)?(e.j_.q_(t),W_(e)):e.j_.set("Unknown")}async function P9e(e,t,n){if(e.j_.set("Online"),t instanceof Kj&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){we(Fh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await sL(e,i)}else if(t instanceof p2?e.H_.We(t):t instanceof Wj?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Ne.min()))try{const i=await oY(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Ti.EMPTY_BYTE_STRING,u.snapshotVersion)),lY(s,l);const d=new Wl(u.target,l,c,u.sequenceNumber);Y_(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){we(Fh,"Failed to raise snapshot:",i),await sL(e,i)}}async function sL(e,t,n){if(!cg(t))throw t;e.W_.add(1),await op(e),e.j_.set("Offline"),n||(n=()=>oY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{we(Fh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await ty(e)})}async function oL(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),we(Fh,"RemoteStore received new credentials");const i=ap(n);n.W_.add(3),await op(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await ty(n)}async function F9e(e,t){const n=tt(e);t?(n.W_.delete(2),await ty(n)):t||(n.W_.add(2),await op(n),n.j_.set("Unknown"))}function ug(e){return e.J_||(e.J_=function(n,i,r){const s=tt(n);return s.M_(),new A9e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:D9e.bind(null,e),No:O9e.bind(null,e),Lo:N9e.bind(null,e),p_:P9e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),K_(e)?W_(e):e.j_.set("Unknown")):(await e.J_.stop(),cY(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new hc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new Z_(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(re.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uY(e,t){if(al("AsyncQueue",`${t}: ${e}`),cg(e))return new Te(re.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{static emptySet(t){return new qf(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Me.comparator(n.key,i.key):(n,i)=>Me.comparator(n.key,i.key),this.keyedMap=v1(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof qf)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new qf;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.Z_=new Cn(Me.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Re():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Bh{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bh(t,n,qf.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&K5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class z9e{constructor(){this.queries=lL(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=tt(n),s=r.queries;r.queries=lL(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Te(re.ABORTED,"Firestore shutting down"))}}function lL(){return new Ld(e=>Nj(e),K5)}async function H9e(e,t){const n=tt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new B9e,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=uY(o,`Initialization of query '${lf(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&q_(n)}async function V9e(e,t){const n=tt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function $9e(e,t){const n=tt(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&q_(n)}function G9e(e,t,n){const i=tt(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function q_(e){e.ia.forEach(t=>{t.next()})}var F4,cL;(cL=F4||(F4={}))._a="default",cL.Cache="cache";class X9e{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Bh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Bh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==F4.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(t){this.key=t}}class fY{constructor(t){this.key=t}}class j9e{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=pt(),this.mutatedKeys=pt(),this.ya=Pj(t),this.wa=new qf(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new aL,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=Z5(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let b=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),b=!0):this.va(f,h)||(i.track({type:2,doc:h}),b=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),b=!0):f&&!h&&(i.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Bh(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new aL,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=pt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new fY(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new dY(i))}),n}Oa(t){this.fa=t.gs,this.pa=pt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Bh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Q_="SyncEngine";class Y9e{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class W9e{constructor(t){this.key=t,this.Ba=!1}}class K9e{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ld(a=>Nj(a),K5),this.qa=new Map,this.Qa=new Set,this.$a=new Cn(Me.comparator),this.Ka=new Map,this.Ua=new H_,this.Wa={},this.Ga=new Map,this.za=Ph.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Z9e(e,t,n=!0){const i=UY(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await hY(i,t,n,!0),r}async function q9e(e,t){const n=UY(e);await hY(n,t,!0,!1)}async function hY(e,t,n,i){const r=await E9e(e.localStore,Ho(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await Q9e(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&aY(e.remoteStore,r),a}async function Q9e(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,b,E,y){let v=b.view.ba(E);v.ls&&(v=await eL(p.localStore,b.query,!1).then(({documents:_})=>b.view.ba(_,v)));const w=y&&y.targetChanges.get(b.targetId),S=y&&y.targetMismatches.get(b.targetId)!=null,R=b.view.applyChanges(v,p.isPrimaryClient,w,S);return dL(p,b.targetId,R.Ma),R.snapshot}(e,d,f,h);const s=await eL(e.localStore,t,!0),o=new j9e(t,s.gs),a=o.ba(s.documents),l=sp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);dL(e,n,c.Ma);const u=new Y9e(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function J9e(e,t,n){const i=tt(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!K5(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await N4(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&j_(i.remoteStore,r.targetId),B4(i,r.targetId)}).catch(X5)):(B4(i,r.targetId),await N4(i.localStore,r.targetId,!0))}async function e_e(e,t){const n=tt(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),j_(n.remoteStore,i.targetId))}async function gY(e,t){const n=tt(e);try{const i=await b9e(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(Vt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?Vt(o.Ba):r.removedDocuments.size>0&&(Vt(o.Ba),o.Ba=!1))}),await pY(n,i,t)}catch(i){await X5(i)}}function uL(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&q_(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function t_e(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new Cn(Me.comparator);o=o.insert(s,oi.newNoDocument(s,Ne.min()));const a=pt().add(s),l=new J5(Ne.min(),new Map,new Cn(dt),o,a);await gY(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),J_(i)}else await N4(i.localStore,t,!1).then(()=>B4(i,t,n)).catch(X5)}function B4(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||mY(e,i)})}function mY(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(j_(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),J_(e))}function dL(e,t,n){for(const i of n)i instanceof dY?(e.Ua.addReference(i.key,t),n_e(e,i)):i instanceof fY?(we(Q_,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||mY(e,i.key)):Re()}function n_e(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(we(Q_,"New document in limbo: "+n),e.Qa.add(i),J_(e))}function J_(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Me(ln.fromString(t)),i=e.za.next();e.Ka.set(i,new W9e(n)),e.$a=e.$a.insert(n,i),aY(e.remoteStore,new Wl(Ho(N_(n.path)),i,"TargetPurposeLimboResolution",j5.ae))}}async function pY(e,t,n){const i=tt(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=$_.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ie.forEach(c,f=>ie.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ie.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!cg(d))throw d;we(G_,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function i_e(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){we(Q_,"User change. New user:",t.toKey());const i=await sY(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Te(re.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await pY(n,i.Rs)}}function r_e(e,t){const n=tt(e),i=n.Ka.get(t);if(i&&i.Ba)return pt().add(i.key);{let r=pt();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function UY(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gY.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=r_e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=t_e.bind(null,t),t.La.p_=$9e.bind(null,t.eventManager),t.La.Ja=G9e.bind(null,t.eventManager),t}class ub{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ey(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return U9e(this.persistence,new g9e,t.initialUser,this.serializer)}Xa(t){return new rY(V_.ri,this.serializer)}Za(t){return new w9e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ub.provider={build:()=>new ub};class s_e extends ub{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Vt(this.persistence.referenceDelegate instanceof cb);const i=this.persistence.referenceDelegate.garbageCollector;return new Jwe(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new rY(i=>cb.ri(i,n),this.serializer)}}class z4{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i_e.bind(null,this.syncEngine),await F9e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new z9e}()}createDatastore(t){const n=ey(t.databaseInfo.databaseId),i=function(s){return new x9e(s)}(t.databaseInfo);return function(s,o,a,l){return new M9e(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new L9e(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>uL(this.syncEngine,n,0),function(){return iL.D()?new iL:new _9e}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new K9e(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=tt(r);we(Fh,"RemoteStore shutting down."),s.W_.add(5),await op(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}z4.provider={build:()=>new z4};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):al("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_e{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Te(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=tt(r),a={documents:s.map(d=>lb(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,ln.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=Nwe(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());Vt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new F_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Me.fromPath(i);this.mutations.push(new jj(r,this.precondition(r)))}),await async function(i,r){const s=tt(i),o={writes:r.map(a=>Fwe(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,ln.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Re();n=Ne.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Te(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Ne.min())?os.exists(!1):os.updateTime(n):os.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Ne.min()))throw new Te(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return os.updateTime(n)}return os.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_e{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new X_(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new a_e(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!ip(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Iwe(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="FirestoreClient";class c_e{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Oi.UNAUTHENTICATED,this.clientId=Ej.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{we(Oc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(we(Oc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=uY(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function P7(e,t){e.asyncQueue.verifyOperationInProgress(),we(Oc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await sY(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function fL(e,t){e.asyncQueue.verifyOperationInProgress();const n=await u_e(e);we(Oc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>oL(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>oL(t.remoteStore,r)),e._onlineComponents=t}async function u_e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){we(Oc,"Using user provided OfflineComponentProvider");try{await P7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Lh("Error using user provided cache. Falling back to memory cache: "+n),await P7(e,new ub)}}else we(Oc,"Using default OfflineComponentProvider"),await P7(e,new s_e(void 0));return e._offlineComponents}async function bY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(we(Oc,"Using user provided OnlineComponentProvider"),await fL(e,e._uninitializedComponentsProvider._online)):(we(Oc,"Using default OnlineComponentProvider"),await fL(e,new z4))),e._onlineComponents}function d_e(e){return bY(e).then(t=>t.datastore)}async function f_e(e){const t=await bY(e),n=t.eventManager;return n.onListen=Z9e.bind(null,t.syncEngine),n.onUnlisten=J9e.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=q9e.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=e_e.bind(null,t.syncEngine),n}function h_e(e,t,n={}){const i=new hc;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new o_e({next:f=>{u.su(),o.enqueueAndForget(()=>V9e(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Te(re.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Te(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new X9e(N_(a.path),u,{includeMetadataChanges:!0,Ta:!0});return H9e(s,d)}(await f_e(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_e(e,t,n){if(!n)throw new Te(re.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function m_e(e,t,n,i){if(t===!0&&i===!0)throw new Te(re.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function gL(e){if(!Me.isDocumentKey(e))throw new Te(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function eT(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Re()}function db(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Te(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eT(e);throw new Te(re.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY="firestore.googleapis.com",mL=!0;class pL{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Te(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EY,this.ssl=mL}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:mL;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=iY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qwe)throw new Te(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m_e("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yY((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tT{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Te(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pL(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Cve;switch(i.type){case"firstParty":return new kve(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=hL.get(n);i&&(we("ComponentProvider","Removing Datastore"),hL.delete(n),i.terminate())}(this),Promise.resolve()}}function p_e(e,t,n,i={}){var r;const s=(e=db(e,tT))._getSettings(),o=`${t}:${n}`;if(s.host!==EY&&s.host!==o&&Lh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Oi.MOCK_USER;else{a=tj(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Te(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Oi(c)}e._authCredentials=new Ave(new yj(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new nT(this.firestore,t,this._query)}}class ps{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ps(this.firestore,t,this._key)}}class mm extends nT{constructor(t,n,i){super(t,n,N_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ps(this.firestore,null,new Me(t))}withConverter(t){return new mm(this.firestore,t,this._path)}}function vY(e,t,...n){if(e=co(e),arguments.length===1&&(t=Ej.newId()),g_e("doc","path",t),e instanceof tT){const i=ln.fromString(t,...n);return gL(i),new ps(e,null,new Me(i))}{if(!(e instanceof ps||e instanceof mm))throw new Te(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ln.fromString(t,...n));return gL(i),new ps(e.firestore,e instanceof mm?e.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="AsyncQueue";class bL{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new X_(this,"async_queue_retry"),this.Su=()=>{const i=N7();i&&we(UL,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=N7();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=N7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new hc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!cg(t))throw t;we(UL,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw al("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=Z_.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class iT extends tT{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new bL,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bL(t),this._firestoreClient=void 0,await t}}}function U_e(e,t){const n=typeof e=="object"?e:uj(),i=typeof e=="string"?e:tb,r=oj(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=JX("firestore");s&&p_e(r,...s)}return r}function wY(e){if(e._terminated)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||b_e(e),e._firestoreClient}function b_e(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new Yve(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yY(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new c_e(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ll(Ti.fromBase64String(t))}catch(n){throw new Te(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ll(Ti.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Te(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Te(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Te(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_e=/^__.*__$/;class E_e{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Dd(t,this.data,this.fieldMask,n,this.fieldTransforms):new rp(t,this.data,n,this.fieldTransforms)}}class _Y{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Dd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function TY(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class aT{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new aT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return fb(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(TY(this.Lu)&&y_e.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class v_e{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||ey(t)}ju(t,n,i,r=!1){return new aT({Lu:t,methodName:n,zu:i,path:Fi.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function w_e(e){const t=e._freezeSettings(),n=ey(e._databaseId);return new v_e(e._databaseId,!!t.ignoreUndefinedProperties,n)}function __e(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);lT("Data must be an object, but it was:",o,i);const a=SY(i,o);let l,c;if(s.merge)l=new ds(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=H4(t,d,n);if(!o.contains(f))throw new Te(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);xY(u,f)||u.push(f)}l=new ds(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new E_e(new ur(a),l,c)}class iy extends rT{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof iy}}function T_e(e,t,n,i){const r=e.ju(1,t,n);lT("Data must be an object, but it was:",r,i);const s=[],o=ur.empty();kd(i,(l,c)=>{const u=cT(t,l,n);c=co(c);const d=r.Ku(u);if(c instanceof iy)s.push(u);else{const f=ry(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new ds(s);return new _Y(o,a,r.fieldTransforms)}function S_e(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[H4(t,i,n)],l=[r];if(s.length%2!=0)throw new Te(re.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(H4(t,s[f])),l.push(s[f+1]);const c=[],u=ur.empty();for(let f=a.length-1;f>=0;--f)if(!xY(c,a[f])){const h=a[f];let m=l[f];m=co(m);const p=o.Ku(h);if(m instanceof iy)c.push(h);else{const b=ry(m,p);b!=null&&(c.push(h),u.set(h,b))}}const d=new ds(c);return new _Y(u,d,o.fieldTransforms)}function ry(e,t){if(IY(e=co(e)))return lT("Unsupported field value:",t,e),SY(e,t);if(e instanceof rT)return function(i,r){if(!TY(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=ry(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=co(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Uwe(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=di.fromDate(i);return{timestampValue:ab(r.serializer,s)}}if(i instanceof di){const s=new di(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ab(r.serializer,s)}}if(i instanceof sT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ll)return{bytesValue:Zj(r.serializer,i._byteString)};if(i instanceof ps){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:z_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof oT)return function(o,a){return{mapValue:{fields:{[Cj]:{stringValue:Aj},[nb]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return P_(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${eT(i)}`)}(e,t)}function SY(e,t){const n={};return wj(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kd(e,(i,r)=>{const s=ry(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function IY(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof di||e instanceof sT||e instanceof ll||e instanceof ps||e instanceof rT||e instanceof oT)}function lT(e,t,n){if(!IY(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=eT(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function H4(e,t,n){if((t=co(t))instanceof ny)return t._internalPath;if(typeof t=="string")return cT(e,t);throw fb("Field path arguments must be of type string or ",e,!1,void 0,n)}const I_e=new RegExp("[~\\*/\\[\\]]");function cT(e,t,n){if(t.search(I_e)>=0)throw fb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ny(...t.split("."))._internalPath}catch{throw fb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fb(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Te(re.INVALID_ARGUMENT,a+e+l)}function xY(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new x_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(CY("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x_e extends hb{data(){return super.data()}}function CY(e,t){return typeof t=="string"?cT(e,t):t instanceof ny?t._internalPath:t._delegate._internalPath}class AY{convertValue(t,n="none"){switch(Lc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(kc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Re()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return kd(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[nb].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Sn(o.doubleValue));return new oT(s)}convertGeoPoint(t){return new sT(Sn(t.latitude),Sn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Y5(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(um(t));default:return null}}convertTimestamp(t){const n=Mc(t);return new di(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ln.fromString(t);Vt(nY(i));const r=new dm(i.get(1),i.get(3)),s=new Me(i.popFirst(5));return r.isEqual(n)||al(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_e(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class A_e extends AY{constructor(t){super(),this.firestore=t}convertBytes(t){return new ll(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ps(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class uT extends hb{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new R_e(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(CY("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class R_e extends uT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_e(e){e=db(e,ps);const t=db(e.firestore,iT);return h_e(wY(t),e._key).then(n=>k_e(t,e,n))}class MY extends AY{constructor(t){super(),this.firestore=t}convertBytes(t){return new ll(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ps(this.firestore,null,n)}}function k_e(e,t,n){const i=n.docs.get(t._key),r=new MY(e);return new uT(e,r,t._key,i,new RY(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_e={maxAttempts:5};function _1(e,t){if((e=co(e)).firestore!==t)throw new Te(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_e{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=w_e(t)}get(t){const n=_1(t,this._firestore),i=new A_e(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Re();const s=r[0];if(s.isFoundDocument())return new hb(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new hb(this._firestore,i,n._key,null,n.converter);throw Re()})}set(t,n,i){const r=_1(t,this._firestore),s=C_e(r.converter,n,i),o=__e(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=_1(t,this._firestore);let o;return o=typeof(n=co(n))=="string"||n instanceof ny?S_e(this._dataReader,"Transaction.update",s._key,n,i,r):T_e(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=_1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_e extends D_e{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=_1(t,this._firestore),i=new MY(this._firestore);return super.get(t).then(r=>new uT(this._firestore,i,n._key,r._document,new RY(!1,!1),n.converter))}}function N_e(e,t,n){e=db(e,iT);const i=Object.assign(Object.assign({},L_e),n);return function(s){if(s.maxAttempts<1)throw new Te(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new hc;return s.asyncQueue.enqueueAndForget(async()=>{const c=await d_e(s);new l_e(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(wY(e),r=>t(new O_e(e,r)),i)}(function(t,n=!0){(function(r){lg=r})(lj),am(new kh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new iT(new Rve(i.getProvider("auth-internal")),new Lve(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dm(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),dc(Tk,Sk,t),dc(Tk,Sk,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY="firebasestorage.googleapis.com",LY="storageBucket",P_e=2*60*1e3,F_e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Md{constructor(t,n,i=0){super(F7(t),`Firebase Storage: ${n} (${F7(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return F7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hn||(Hn={}));function F7(e){return"storage/"+e}function dT(){const e="An unknown error occurred, please check the error payload for server response.";return new $n(Hn.UNKNOWN,e)}function B_e(e){return new $n(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function z_e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $n(Hn.UNAUTHENTICATED,e)}function H_e(){return new $n(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V_e(e){return new $n(Hn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function $_e(){return new $n(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G_e(){return new $n(Hn.CANCELED,"User canceled the upload/download.")}function X_e(e){return new $n(Hn.INVALID_URL,"Invalid URL '"+e+"'.")}function j_e(e){return new $n(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Y_e(){return new $n(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LY+"' property when initializing the app?")}function W_e(){return new $n(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function K_e(e){return new $n(Hn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function V4(e){return new $n(Hn.INVALID_ARGUMENT,e)}function DY(){return new $n(Hn.APP_DELETED,"The Firebase app was deleted.")}function Z_e(e){return new $n(Hn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function d0(e,t){return new $n(Hn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function qg(e){throw new $n(Hn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Dr.makeFromUrl(t,n)}catch{return new Dr(t,"")}if(i.path==="")return i;throw j_e(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===kY?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",E=new RegExp(`^https?://${p}/${r}/${b}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<v.length;w++){const S=v[w],R=S.regex.exec(t);if(R){const _=R[S.indices.bucket];let T=R[S.indices.path];T||(T=""),i=new Dr(_,T),S.postModify(i);break}}if(i==null)throw X_e(t);return i}}class q_e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_e(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,t.apply(null,b))}function d(b){r=setTimeout(()=>{r=null,e(h,l())},b)}function f(){s&&clearTimeout(s)}function h(b,...E){if(c){f();return}if(b){f(),u.call(null,b,...E);return}if(l()||o){f(),u.call(null,b,...E);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,d(v)}let m=!1;function p(b){m||(m=!0,f(),!c&&(r!==null?(b||(a=2),clearTimeout(r),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function J_e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eTe(e){return e!==void 0}function tTe(e){return typeof e=="object"&&!Array.isArray(e)}function OY(e){return typeof e=="string"||e instanceof String}function yL(e){return fT()&&e instanceof Blob}function fT(){return typeof Blob<"u"}function EL(e,t,n,i){if(i<t)throw V4(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw V4(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nTe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function iTe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var zu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(zu||(zu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rTe(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sTe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new _U(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zu.NO_ERROR,l=s.getStatus();if(!a||rTe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===zu.ABORT;i(!1,new _U(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new _U(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());eTe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=dT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?DY():G_e();o(l)}else{const l=$_e();o(l)}};this.canceled_?n(!1,new _U(!1,null,!0)):this.backoffId_=Q_e(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&J_e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _U{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function oTe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function aTe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function lTe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function cTe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uTe(e,t,n,i,r,s,o=!0){const a=iTe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return lTe(c,t),oTe(c,n),aTe(c,s),cTe(c,i),new sTe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dTe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fTe(...e){const t=dTe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(fT())return new Blob(e);throw new $n(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hTe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gTe(e){if(typeof atob>"u")throw K_e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B7{constructor(t,n){this.data=t,this.contentType=n||null}}function mTe(e,t){switch(e){case No.RAW:return new B7(NY(t));case No.BASE64:case No.BASE64URL:return new B7(PY(e,t));case No.DATA_URL:return new B7(UTe(t),bTe(t))}throw dT()}function NY(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function pTe(e){let t;try{t=decodeURIComponent(e)}catch{throw d0(No.DATA_URL,"Malformed data URL.")}return NY(t)}function PY(e,t){switch(e){case No.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw d0(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw d0(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gTe(t)}catch(r){throw r.message.includes("polyfill")?r:d0(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class FY{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw d0(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=yTe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function UTe(e){const t=new FY(e);return t.base64?PY(No.BASE64,t.rest):pTe(t.rest)}function bTe(e){return new FY(e).contentType}function yTe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,n){let i=0,r="";yL(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(yL(this.data_)){const i=this.data_,r=hTe(i,t,n);return r===null?null:new Bl(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Bl(i,!0)}}static getBlob(...t){if(fT()){const n=t.map(i=>i instanceof Bl?i.data_:i);return new Bl(fTe.apply(null,n))}else{const n=t.map(o=>OY(o)?mTe(No.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Bl(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ETe(e){let t;try{t=JSON.parse(e)}catch{return null}return tTe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vTe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function wTe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function BY(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Te(e,t){return t}class ji{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||_Te}}let TU=null;function TTe(e){return!OY(e)||e.length<2?e:BY(e)}function STe(){if(TU)return TU;const e=[];e.push(new ji("bucket")),e.push(new ji("generation")),e.push(new ji("metageneration")),e.push(new ji("name","fullPath",!0));function t(s,o){return TTe(o)}const n=new ji("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new ji("size");return r.xform=i,e.push(r),e.push(new ji("timeCreated")),e.push(new ji("updated")),e.push(new ji("md5Hash",null,!0)),e.push(new ji("cacheControl",null,!0)),e.push(new ji("contentDisposition",null,!0)),e.push(new ji("contentEncoding",null,!0)),e.push(new ji("contentLanguage",null,!0)),e.push(new ji("contentType",null,!0)),e.push(new ji("metadata","customMetadata",!0)),TU=e,TU}function ITe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new Dr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function xTe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return ITe(i,e),i}function CTe(e,t,n){const i=ETe(t);return i===null?null:xTe(e,i,n)}function ATe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class RTe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MTe(e){if(!e)throw dT()}function kTe(e,t){function n(i,r){const s=CTe(e,r,t);return MTe(s!==null),s}return n}function LTe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=H_e():r=z_e():n.getStatus()===402?r=B_e(e.bucket):n.getStatus()===403?r=V_e(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function DTe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function OTe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=DTe(null,t)),i}function NTe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=OTe(t,i,r),u=ATe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Bl.getBlob(d,i,f);if(h===null)throw W_e();const m={name:c.fullPath},p=nTe(s,e.host,e._protocol),b="POST",E=e.maxUploadRetryTime,y=new RTe(p,b,kTe(e,n),E);return y.urlParams=m,y.headers=o,y.body=h.uploadData(),y.errorHandler=LTe(t),y}class PTe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw qg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class FTe extends PTe{initXhr(){this.xhr_.responseType="text"}}function BTe(){return new FTe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n){this._service=t,n instanceof Dr?this._location=n:this._location=Dr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Ud(t,n)}get root(){const t=new Dr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BY(this._location.path)}get storage(){return this._service}get parent(){const t=vTe(this._location.path);if(t===null)return null;const n=new Dr(this._location.bucket,t);return new Ud(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Z_e(t)}}function zTe(e,t,n){e._throwIfRoot("uploadBytes");const i=NTe(e.storage,e._location,STe(),new Bl(t,!0),n);return e.storage.makeRequestWithTokens(i,BTe).then(r=>({metadata:r,ref:e}))}function HTe(e,t){const n=wTe(e._location.path,t),i=new Dr(e._location.bucket,n);return new Ud(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VTe(e){return/^[A-Za-z]+:\/\//.test(e)}function $Te(e,t){return new Ud(e,t)}function zY(e,t){if(e instanceof hT){const n=e;if(n._bucket==null)throw Y_e();const i=new Ud(n,n._bucket);return t!=null?zY(i,t):i}else return t!==void 0?HTe(e,t):e}function GTe(e,t){if(t&&VTe(t)){if(e instanceof hT)return $Te(e,t);throw V4("To use ref(service, url), the first argument must be a Storage instance.")}else return zY(e,t)}function vL(e,t){const n=t==null?void 0:t[LY];return n==null?null:Dr.makeFromBucketSpec(n,e)}function XTe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:tj(r,e.app.options.projectId))}class hT{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=kY,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P_e,this._maxUploadRetryTime=F_e,this._requests=new Set,r!=null?this._bucket=Dr.makeFromBucketSpec(r,this._host):this._bucket=vL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Dr.makeFromBucketSpec(this._url,t):this._bucket=vL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){EL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){EL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(aj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ud(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new q_e(DY());{const o=uTe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const wL="@firebase/storage",_L="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY="storage";function VY(e,t,n){return e=co(e),zTe(e,t,n)}function $Y(e,t){return e=co(e),GTe(e,t)}function jTe(e=uj(),t){e=co(e);const i=oj(e,HY).getImmediate({identifier:t}),r=JX("storage");return r&&YTe(i,...r),i}function YTe(e,t,n,i={}){XTe(e,t,n,i)}function WTe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new hT(n,i,r,t,lj)}function KTe(){am(new kh(HY,WTe,"PUBLIC").setMultipleInstances(!0)),dc(wL,_L,""),dc(wL,_L,"esm2017")}KTe();let gb;try{gb=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),gb={}}let z7=null,H7=null,V7=null;const GY=()=>(z7||(z7=cj(gb)),z7),XY=()=>(H7||(H7=U_e(GY())),H7),ZTe=()=>(V7||(V7=jTe(GY())),V7),jY=async()=>ZTe(),qTe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await R5(e,i);return{ciphertext:r,iv:s}},$4=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await J0(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)},fu=class fu{};F(fu,"cache",new WeakMap),F(fu,"get",t=>fu.cache.get(t)),F(fu,"set",(t,n)=>{fu.cache.set(t,Pl(n))});let pm=fu;const YY=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=Pl(t);return pm.get(e.socket)===n}return!0},gT=async({prefix:e,files:t})=>{const n=await jY(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=$Y(n,`${e}/${s}`);await VY(a,o,{cacheControl:`public, max-age=${jEe}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},TL=async(e,t)=>{const n=Pl(e),{ciphertext:i,iv:r}=await qTe(t,e);return{sceneVersion:n,ciphertext:ll.fromUint8Array(new Uint8Array(i)),iv:ll.fromUint8Array(r)}},QTe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||YY(e,t))return null;const o=XY(),a=vY(o,"scenes",i),l=await N_e(o,async u=>{const d=await u.get(a);if(!d.exists()){const b=await TL(t,r);return u.set(a,b),b}const f=d.data(),h=Kl(gd(await $4(f,r),null)),m=Kl(S_(t,h,n)),p=await TL(m,r);return u.update(a,p),p}),c=Kl(gd(await $4(l,r),null));return pm.set(s,c),c},JTe=async(e,t,n)=>{const i=XY(),r=vY(i,"scenes",e),s=await M_e(r);if(!s.exists())return null;const o=s.data(),a=Kl(gd(await $4(o,t),null));return n&&pm.set(n,a),a},WY=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${gb.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await o$(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||Ee.binary,id:s,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},KY=e=>e.isDeleted?e.updated>Date.now()-XEe:!rd(e),Kl=e=>e.filter(t=>KY(t)),eSe="https://json.excalidraw.com/api/v2/",tSe="https://json.excalidraw.com/api/v2/post/",nSe=async()=>{const e=new Uint8Array(YEe);return window.crypto.getRandomValues(e),FP(e)},ZY=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,SL=e=>{const t=new URL(e).hash;return ZY.test(t)},iSe=e=>{const n=new URL(e).hash.match(ZY);return n&&n[2].length!==22?(window.alert(k("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},rSe=async()=>{const e=await nSe(),t=await P9();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},sSe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,oSe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,a2),o=e.slice(a2,e.byteLength);n=await J0(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(a2);n=await J0(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},aSe=async(e,t)=>{try{const n=await fetch(`${eSe}${e}`);if(!n.ok)return window.alert(k("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await o$(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),oSe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(k("alerts.importBackendFailed")),console.error(n),{}}},IL=async(e,t,n)=>{let i;return e!=null&&t!=null?i=md(await aSe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):i=md(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},lSe=async(e,t,n)=>{const i=await P9("string"),r=await s$(new TextEncoder().encode(og(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)In(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await C_({files:s,encryptionKey:i,maxBytes:I_}),l=await(await fetch(tSe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await gT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:k("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}};function cSe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Od(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function mT(e,t){const n=cSe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Od(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let $7;function dg(){return $7||($7=mT("keyval-store","keyval")),$7}function uSe(e,t=dg()){return t("readonly",n=>Od(n.get(e)))}function qY(e,t,n=dg()){return n("readwrite",i=>(i.put(t,e),Od(i.transaction)))}function dSe(e,t=dg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Od(n.transaction)))}function fSe(e,t=dg()){return t("readonly",n=>Promise.all(e.map(i=>Od(n.get(i)))))}function hSe(e,t=dg()){return t("readwrite",n=>(n.delete(e),Od(n.transaction)))}function gSe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Od(n.transaction)))}function mSe(e=dg()){const t=[];return gSe(e,n=>t.push([n.key,n.value])).then(()=>t)}class pSe{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const mb={[vn.VERSION_DATA_STATE]:-1,[vn.VERSION_FILES]:-1},xL=e=>JSON.parse(localStorage.getItem(e)||"-1")>mb[e],QY=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),mb[e]=t}catch(n){console.error("error while updating browser state verison",n)}},USe=()=>{try{for(const e of Object.keys(mb))localStorage.setItem(e,JSON.stringify(-1)),mb[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},f0=mT("files-db","files-store");class bSe extends ZX{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await mSe(f0).then(i=>{for(const[r,s]of i)(!s.lastRetrieved||Date.now()-s.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(r)&&hSe(r,f0)})})}}const ySe=(e,t)=>{var n;try{const i=_z(t);((n=i.openSidebar)==null?void 0:n.name)===gs.name&&i.openSidebar.tab===Lu&&(i.openSidebar=null),localStorage.setItem(vn.LOCAL_STORAGE_ELEMENTS,JSON.stringify(SF(e))),localStorage.setItem(vn.LOCAL_STORAGE_APP_STATE,JSON.stringify(i)),QY(vn.VERSION_DATA_STATE)}catch(i){console.error(i)}},gi=class gi{};F(gi,"_save",ja(async(t,n,i,r)=>{ySe(t,n),await gi.fileStorage.saveFiles({elements:t,files:i}),r()},BEe)),F(gi,"save",(t,n,i,r)=>{gi.isSavePaused()||gi._save(t,n,i,r)}),F(gi,"flushSave",()=>{gi._save.flush()}),F(gi,"locker",new pSe),F(gi,"pauseSave",t=>{gi.locker.lock(t)}),F(gi,"resumeSave",t=>{gi.locker.unlock(t)}),F(gi,"isSavePaused",()=>document.hidden||gi.locker.isLocked()),F(gi,"fileStorage",new bSe({getFiles(t){return fSe(t,f0).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{dSe(s,f0)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return QY(vn.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await qY(r,s,f0),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}}));let pi=gi;const Cs=class Cs{static async load(){return await uSe(Cs.key,Cs.store)||null}static save(t){return qY(Cs.key,t,Cs.store)}};F(Cs,"idb_name",vn.IDB_LIBRARY),F(Cs,"key","libraryData"),F(Cs,"store",mT(`${Cs.idb_name}-db`,`${Cs.idb_name}-store`));let pb=Cs;class ESe{static load(){const t=localStorage.getItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const CL=en({message:null,nonce:0});class vSe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",Do(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ce(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER})},HEe));F(this,"broadcastScene",async(t,n,i)=>{if(t===Wi.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&KY(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Wi.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Wi.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const r={type:Wi.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(r,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(f2.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),ut("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(Wi.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var r;if(this.isOpen()){const s=JSON.stringify(t),o=new TextEncoder().encode(s),{encryptedBuffer:a,iv:l}=await R5(this.roomKey,o);(r=this.socket)==null||r.emit(n?f2.SERVER_VOLATILE:f2.SERVER,i??this.roomId,a,l)}}}var wSe={};const JY=en(null),G4=en(!1),eW=en(!1),tW=en(null);class _Se extends O.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{Il.set(eW,!window.navigator.onLine)});F(this,"isCollaborating",()=>Il.get(G4));F(this,"setIsCollaborating",n=>{Il.set(G4,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",sn(n=>{const i=Kl(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!YY(this.portal,i))&&(this.saveCollabRoomToFirebase(i),wSe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?mw(n):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await QTe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const r=/is longer than.*?bytes/.test(i.message)?k("errors.collabSaveFailed_sizeExceeded"):k("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[r]||!this.isCollaborating())&&(this.setErrorDialog(r),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[r]:!0}})),this.isCollaborating()&&this.setErrorIndicator(r),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(Kl(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)pi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(k("alerts.collabStopOverridePrompt"))){USe(),window.history.pushState({},Na,window.location.origin),this.destroySocketClient(),pi.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>ot(r)&&r.status==="saved"?Ce(r,{status:"pending"}):r);this.excalidrawAPI.updateScene({elements:i,captureUpdate:K.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),pi.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(r=>In(r)&&!this.fileManager.isFileTracked(r.fileId)&&!r.isDeleted&&(n.forceFetchFiles?r.status!=="pending"||Date.now()-r.updated>1e4:r.status==="saved")).map(r=>r.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,r)=>{try{const s=await J0(n,i,r),o=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(o)}catch(s){return window.alert(k("alerts.decryptFailed")),console.error(s),{type:Wi.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||ye(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([]),import.meta.url).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,r;n?{roomId:i,roomKey:r}=n:({roomId:i,roomKey:r}=await rSe(),window.history.pushState({},Na,sSe({roomId:i,roomKey:r})));const s=Gb();this.setIsCollaborating(!0),pi.pauseSave("collaboration");const{default:o}=await ye(()=>import("./index-ChGp7972.js"),__vite__mapDeps([]),import.meta.url),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{s.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),i,r),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>ot(c)&&c.status==="saved"?Ce(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:K.NEVER}),this.saveCollabRoomToFirebase(Kl(l))}return this.socketInitializationTimer=window.setTimeout(a,zEe),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Wi.INVALID_RESPONSE:return;case Wi.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),s.resolve({elements:h,scrollToContent:!0})}break}case Wi.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Wi.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,b=u.payload.socketId||u.payload.socketID;this.updateCollaborator(b,{pointer:f,button:h,selectedElementIds:p,username:m});break}case Wi.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:gV({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Wi.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:wc(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});s.resolve(l)}),this.portal.socket.on(f2.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),s});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const r=await JTe(i.roomId,i.roomKey,this.portal.socket);if(r)return this.setLastBroadcastedOrReceivedSceneVersion(Pl(r)),{elements:r,scrollToContent:!0}}catch(r){console.error(r)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),r=this.excalidrawAPI.getAppState(),s=gd(n,null),o=S_(i,s,r);return this.setLastBroadcastedOrReceivedSceneVersion(Pl(o)),o});F(this,"loadImageFiles",Do(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),y1({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},VEe));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,_x),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,Tx))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(mu.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,_x),this.activeIntervalId=window.setInterval(this.reportActive,Tx),this.onIdleStateChange(mu.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(mu.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(mu.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(te.POINTER_MOVE,this.onPointerMove),document.addEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const r=new Map(this.collaborators),s=Object.assign({},r.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});r.set(n,s),this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",Do(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},GEe));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:oB(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{Pl(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Wi.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=Pl(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",Do(()=>{this.portal.broadcastScene(Wi.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,Pl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},dk));F(this,"queueSaveToFirebase",Do(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(Kl(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},dk,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),KEe(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),Il.set(tW,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{Il.set(CL,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{Il.set(CL,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:YX()||"",activeRoomLink:null},this.portal=new vSe(this),this.fileManager=new ZX({getFiles:async i=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new Th;return WY(`files/rooms/${r}`,s,i)},saveFiles:async({addedFiles:i})=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new Th;const{savedFiles:o,erroredFiles:a}=await gT({prefix:`${jX.collabFiles}/${r}`,files:await C_({files:i,encryptionKey:s,maxBytes:I_})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(te.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=Zh(this.relayVisibleSceneBounds),r=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),r()},this.onOfflineStatusToggle();const s={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Il.set(JY,s)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(te.UNLOAD,this.onUnload),window.removeEventListener(te.POINTER_MOVE,this.onPointerMove),window.removeEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var r;const i=new Map;for(const s of n)i.set(s,Object.assign({},this.collaborators.get(s),{isCurrentUser:s===((r=this.portal.socket)==null?void 0:r.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(pe,{children:n!=null&&g(a_,{onClose:()=>this.setErrorDialog(null),children:n})})}}const TSe=()=>x_?g("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noreferrer",className:"plus-button",children:"Go to Excalidraw+"}):null,SSe=ae.memo(({onChange:e})=>g(BX,{children:g("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:g(TSe,{})})}));function ISe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function xSe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Um(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CSe(e){var t=xSe(e,"string");return Um(t)=="symbol"?t:t+""}function ASe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,CSe(i.key),i)}}function RSe(e,t,n){return t&&ASe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var nW=[],MSe=nW.forEach,kSe=nW.slice;function LSe(e){return MSe.call(kSe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var AL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,DSe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!AL.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!AL.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},RL={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=DSe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},OSe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=RL.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&RL.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},NSe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},Qg=null,ML=function(){if(Qg!==null)return Qg;try{Qg=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Qg=!1}return Qg},PSe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&ML()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&ML()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},Jg=null,kL=function(){if(Jg!==null)return Jg;try{Jg=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Jg=!1}return Jg},FSe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&kL()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&kL()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},BSe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},zSe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},HSe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},VSe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function $Se(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var iW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ISe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return RSe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=LSe(i,this.options||{},$Se()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(OSe),this.addDetector(NSe),this.addDetector(PSe),this.addDetector(FSe),this.addDetector(BSe),this.addDetector(zSe),this.addDetector(HSe),this.addDetector(VSe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();iW.type="languageDetector";const pT=new iW;pT.init({languageUtils:{}});const rW=()=>{var i;const e=pT.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=a5.find(r=>r.code.startsWith(t)))==null?void 0:i.code:null)||Cd.code},sW=en(rW()),GSe=()=>{const[e,t]=wh(sW);return O.useEffect(()=>{pT.cacheUserLanguage(e)},[e]),[e,t]},XSe=({style:e})=>{const{t,langCode:n}=wn(),i=e9(sW);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:a5.map(r=>g("option",{value:r.code,children:r.label},r.code))})},jSe=ae.memo(e=>P(Zt,{children:[g(Zt.DefaultItems.LoadScene,{}),g(Zt.DefaultItems.SaveToActiveFile,{}),g(Zt.DefaultItems.Export,{}),g(Zt.DefaultItems.SaveAsImage,{}),g(Zt.DefaultItems.Help,{}),g(Zt.DefaultItems.ClearCanvas,{}),g(Zt.Separator,{}),g(Zt.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(Zt.ItemCustom,{children:g(XSe,{style:{width:"100%"}})}),g(Zt.DefaultItems.ChangeCanvasBackground,{})]})),YSe=ae.memo(e=>{const{t}=wn();let n;return x_?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:nu.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),P(Tr,{children:[g(Tr.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(Tr.Hints.ToolbarHint,{}),g(Tr.Hints.HelpHint,{}),P(Tr.Center,{children:[g(Tr.Center.Logo,{}),g(Tr.Center.Heading,{children:n}),P(Tr.Center.Menu,{children:[g(Tr.Center.MenuItemLoadScene,{}),g(Tr.Center.MenuItemHelp,{})]})]})]})}),X4=async(e,t,n,i)=>{const r=await jY(),s=`${LP(12)}`,o=await P9(),a=await R5(o,og(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:Ee.binary}),c=$Y(r,`/migrations/scenes/${s}`);await VY(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)In(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await C_({files:u,encryptionKey:o,maxBytes:I_});await gT({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},WSe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=wn();return P(v4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(zX,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Ze,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{ut("export","eplus",`ui (${Om()})`),await X4(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class KSe extends ae.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const r={};for(const[s,o]of Object.entries({...localStorage}))try{r[s]=JSON.parse(o)}catch{r[s]=o}Qv(s=>{s.setExtras(i);const o=nw(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(r)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await ye(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]),import.meta.url)).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:P("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(hr,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),P("div",{className:"ErrorSplash-paragraph align-center",children:[g(hr,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),P("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),k("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),P("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:k("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(hr,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:P("div",{className:"ErrorSplash-details",children:[g("label",{children:k("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const oW=en({isOpen:!1}),ZSe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?Ece:n?wce:kz},qSe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=wn(),[,r]=O.useState(!1),s=O.useRef(0),o=O.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=l_(),u=async()=>{var f;try{await Vc(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return P(pe,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Ah,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===z.ENTER&&n()}),P("div",{className:"ShareDialog__active__linkRow",children:[g(Ah,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(qs,{size:"large",variant:"icon",label:"Share",icon:ZSe(),className:"ShareDialog__active__share",onClick:d}),g(qs,{size:"large",label:i("buttons.copyLink"),icon:jm,status:c,onClick:()=>{u(),l()}})]}),P("div",{className:"ShareDialog__active__description",children:[P("p",{children:[P("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(qs,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:due,onClick:()=>{ut("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},QSe=e=>{const{t}=wn(),{collabAPI:n}=e,i=n?P(pe,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),P("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(qs,{size:"large",label:t("roomDialog.button_startSession"),icon:uue,onClick:()=>{ut("share","room creation",`ui (${Om()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return P(pe,{children:[i,e.type==="share"&&P(pe,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(qs,{size:"large",label:t("exportDialog.link_button"),icon:A6,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},JSe=e=>{const t=s5(tW);return g(Gr,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(qSe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(QSe,{...e})})})},eIe=e=>{const[t,n]=wh(oW),{openDialog:i}=Si();return O.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(JSe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},LL=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},tIe=()=>{const[e,t]=O.useState(()=>localStorage.getItem(vn.LOCAL_STORAGE_THEME)||xe.LIGHT),[n,i]=O.useState(xe.LIGHT);return O.useEffect(()=>{const r=LL(),s=a=>{i(a.matches?xe.DARK:xe.LIGHT)};e==="system"&&(r==null||r.addEventListener("change",s));const o=a=>{!a[z.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===et.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===xe.DARK?xe.LIGHT:xe.DARK))};return document.addEventListener(te.KEYDOWN,o,{capture:!0}),()=>{r==null||r.removeEventListener("change",s),document.removeEventListener(te.KEYDOWN,o,{capture:!0})}},[e,n,t]),O.useLayoutEffect(()=>{var r;localStorage.setItem(vn.LOCAL_STORAGE_THEME,e),i(e==="system"?(r=LL())!=null&&r.matches?xe.DARK:xe.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},nIe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},iIe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},rIe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},DL=(e,t,n)=>{e.forEach(i=>{switch(!0){case fie(i.data):nIe(t,n.zoom.value,i.data,i.color);break;case pie(i.data):iIe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},sIe=(e,t,n,i)=>{var a,l,c,u;const[r,s]=k5(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=L5({canvas:e,scale:n,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),rIe(o,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=oIe();DL(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{DL(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},oIe=()=>{var n,i,r;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((r=window.visualDebug)==null?void 0:r.currentFrame)??0]:[0,0]},aIe=Zh((e,t,n,i)=>{sIe(e,t,n,i)},{trailing:!0}),lIe=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},cIe=({appState:e,scale:t,ref:n})=>{const{width:i,height:r}=e,s=O.useRef(null);return O.useImperativeHandle(n,()=>s.current,[s]),g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:s,children:"Debug Canvas"})},uIe=({excalidrawAPI:e})=>P(pe,{children:[g(OEe,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await C5e({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:Ee.jpg}),s=await r4(r),o=hF(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Hie(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noreferrer noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(DX,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),dIe="REQUEST_SCENE",SU="https://app.excalidraw.com",fIe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new $s("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new $s("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await pi.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof $s?n:new $s("Failed to parse scene data.")}},hIe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new $s("Invalid JWT format");const s=zR(i),o=zR(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},gIe=()=>{const e=O.useRef(!1);return O.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==SU)throw new $s("Invalid origin");if(n.data.type===dIe){if(!n.data.jwt)throw new $s("JWT is missing");try{try{await hIe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new $s("Failed to verify JWT")}const i=await fIe({rawAppStateString:localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:SU})}catch(i){const r={type:"ERROR",message:i instanceof $s?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:SU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,SU)}return()=>{window.removeEventListener("message",t)}},[]),null};var mIe={};$X();window.EXCALIDRAW_THROTTLE_RENDER=!0;let df=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),df=e});let aW=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(aW=!0)}catch{}const OL={title:k("overwriteConfirm.modal.shareableLink.title"),description:g(hr,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:k("overwriteConfirm.modal.shareableLink.button"),color:"danger"},j4=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=WX();let o=await IL(null,null,s),a=iSe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await p4(OL))i&&(o=await IL(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},Na,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>j4(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},Na,window.location.origin)}else if(r){window.history.replaceState({},Na,window.location.origin);const d=r[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await $9(await f.blob(),null,null);if(!o.elements.length||await p4(OL))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:k("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...y$({...f==null?void 0:f.appState,theme:((c=s==null?void 0:s.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:S_((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},pIe=()=>{const[e,t]=O.useState(""),n=Pie(),{editorTheme:i,appTheme:r,setAppTheme:s}=tIe(),[o,a]=GSe(),l=O.useRef({promise:null});l.current.promise||(l.current.promise=Gb());const c=O.useRef(null);O.useEffect(()=>{ut("load","frame",Om()),setTimeout(()=>{ut("load","version",sE())},Xne)},[]);const[u,d]=V$(),[,f]=wh(oW),[h]=wh(JY),[m]=JEe(G4,()=>SL(window.location.href));O5e({excalidrawAPI:u,adapter:pb,migrationAdapter:ESe});const[,p]=O.useState(!1);O.useEffect(()=>{},[u]),O.useEffect(()=>{if(!u||!n&&!h)return;const x=(H,V=!1)=>{var $;if(H.scene)if(h!=null&&h.isCollaborating())H.scene.elements&&h.fetchImageFilesFromFirebase({elements:H.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:j,erroredFiles:X})=>{u.addFiles(j),y1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})});else{const j=(($=H.scene.elements)==null?void 0:$.reduce((X,Z)=>In(Z)?X.concat(Z.fileId):X,[]))||[];H.isExternalScene?WY(`${jX.shareLinkFiles}/${H.id}`,H.key,j).then(({loadedFiles:X,erroredFiles:Z})=>{u.addFiles(X),y1({excalidrawAPI:u,erroredFiles:Z,elements:u.getSceneElementsIncludingDeleted()})}):V&&(j.length&&pi.fileStorage.getFiles(j).then(({loadedFiles:X,erroredFiles:Z})=>{X.length&&u.addFiles(X),y1({excalidrawAPI:u,erroredFiles:Z,elements:u.getSceneElementsIncludingDeleted()})}),pi.fileStorage.clearObsoleteFiles({currentFileIds:j}))}};j4({collabAPI:h,excalidrawAPI:u}).then(async H=>{x(H,!0),l.current.promise.resolve(H.scene)});const I=async H=>{H.preventDefault(),d4()||(h!=null&&h.isCollaborating()&&!SL(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),j4({collabAPI:h,excalidrawAPI:u}).then($=>{x($),$.scene&&u.updateScene({...$.scene,...md($.scene,null,null,{repairBindings:!0}),captureUpdate:K.IMMEDIATELY})}))},M=setTimeout(()=>document.title=Na,Gne),D=ja(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(xL(vn.VERSION_DATA_STATE)){const H=WX(),V=YX();a(rW()),u.updateScene({...H,captureUpdate:K.NEVER}),pb.load().then($=>{$&&u.updateLibrary({libraryItems:$.libraryItems})}),h==null||h.setUsername(V||"")}if(xL(vn.VERSION_FILES)){const H=u.getSceneElementsIncludingDeleted(),V=u.getFiles(),$=(H==null?void 0:H.reduce((j,X)=>In(X)&&!V[X.fileId]?j.concat(X.fileId):j,[]))||[];$.length&&pi.fileStorage.getFiles($).then(({loadedFiles:j,erroredFiles:X})=>{j.length&&u.addFiles(j),y1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})})}}},$Ee),L=()=>{pi.flushSave()},G=H=>{(H.type===te.BLUR||document.hidden)&&pi.flushSave(),(H.type===te.VISIBILITY_CHANGE||H.type===te.FOCUS)&&D()};return window.addEventListener(te.HASHCHANGE,I,!1),window.addEventListener(te.UNLOAD,L,!1),window.addEventListener(te.BLUR,G,!1),document.addEventListener(te.VISIBILITY_CHANGE,G,!1),window.addEventListener(te.FOCUS,G,!1),()=>{window.removeEventListener(te.HASHCHANGE,I,!1),window.removeEventListener(te.UNLOAD,L,!1),window.removeEventListener(te.BLUR,G,!1),window.removeEventListener(te.FOCUS,G,!1),document.removeEventListener(te.VISIBILITY_CHANGE,G,!1),clearTimeout(M)}},[n,h,u,a]),O.useEffect(()=>{const x=I=>{pi.flushSave(),u&&pi.fileStorage.shouldPreventUnload(u.getSceneElements())&&(mIe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?mw(I):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(te.BEFORE_UNLOAD,x),()=>{window.removeEventListener(te.BEFORE_UNLOAD,x)}},[u]);const b=(x,I,M)=>{h!=null&&h.isCollaborating()&&h.syncElements(x),pi.isSavePaused()||pi.save(x,I,M,()=>{if(u){let D=!1;const L=u.getSceneElementsIncludingDeleted().map(G=>{if(pi.fileStorage.shouldUpdateImageElementStatus(G)){const H=Ce(G,{status:"saved"});return H!==G&&(D=!0),H}return G});D&&u.updateScene({elements:L,captureUpdate:K.NEVER})}}),c.current&&u&&aIe(c.current,I,window.devicePixelRatio,()=>p(D=>!D))},[E,y]=O.useState(null),v=async(x,I,M)=>{if(x.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));try{const{url:D,errorMessage:L}=await lSe(x,{...I,viewBackgroundColor:I.exportBackground?I.viewBackgroundColor:so().viewBackgroundColor},M);if(L)throw new Error(L);D&&y(D)}catch(D){if(D.name!=="AbortError"){const{width:L,height:G}=I;throw console.error(D,{width:L,height:G,devicePixelRatio:window.devicePixelRatio}),new Error(D.message)}}},w=(x,I)=>g(QEe,{setToast:M=>u.setToast({message:M}),appState:I,elements:x}),S=s5(eW),R=O.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(aW)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const _={label:"Excalidraw+",category:gt.links,predicate:!0,icon:g("div",{style:{width:14},children:QC}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},T={label:"Sign up",category:gt.links,predicate:!0,icon:g("div",{style:{width:14},children:QC}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return g("div",{style:{height:"100%"},className:be("excalidraw-app",{"is-collaborating":m}),children:P(XX,{excalidrawAPI:d,onChange:b,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h==null?void 0:h.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:v,renderCustomUI:u?(x,I,M)=>g(WSe,{elements:x,appState:I,files:M,name:u.getName(),onError:D=>{u==null||u.updateScene({appState:{errorMessage:D.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:w,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:x=>null,children:[g(jSe,{onCollabDialogOpen:R,isCollaborating:m,isCollabEnabled:!n,theme:r,setTheme:x=>s(x),refresh:()=>p(x=>!x)}),g(YSe,{onCollabDialogOpen:R,isCollabEnabled:!n}),P(Tu,{children:[g(Tu.Actions.ExportToImage,{}),g(Tu.Actions.SaveToDisk,{}),u&&g(Tu.Action,{title:k("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:k("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{X4(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:k("overwriteConfirm.action.excalidrawPlus.description")})]}),g(SSe,{onChange:()=>u==null?void 0:u.refresh()}),u&&g(uIe,{excalidrawAPI:u}),g(GX,{}),m&&S&&g("div",{className:"collab-offline-warning",children:k("alerts.collabOfflineWarning")}),E&&g(FEe,{link:E,onCloseRequest:()=>y(null),setErrorMessage:t}),u&&!n&&g(_Se,{excalidrawAPI:u}),g(eIe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await v(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(x){t(x.message)}}}),e&&g(a_,{onClose:()=>t(""),children:e}),g(vM,{customCommandPaletteItems:[{label:k("labels.liveCollaboration"),category:gt.app,keywords:["team","multiplayer","share","public","session","invite"],icon:l9,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:k("roomDialog.button_stopSession"),category:gt.app,predicate:()=>!!(h!=null&&h.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:k("labels.share"),category:gt.app,predicate:!0,icon:kz,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:o9,category:gt.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.followUs"),icon:Rz,category:gt.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.discordChat"),category:gt.links,predicate:!0,icon:Az,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:$z,category:gt.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...x_?[{...T,label:"Sign in / Go to Excalidraw+"}]:[_,T],{label:k("overwriteConfirm.action.excalidrawPlus.button"),category:gt.export,icon:vce,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&X4(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...vM.defaultItems.toggleTheme,perform:()=>{s(i===xe.DARK?xe.LIGHT:xe.DARK)}},{label:k("labels.installPWA"),category:gt.app,predicate:()=>!!df,perform:()=>{df&&(df.prompt(),df.userChoice.then(()=>{df=null}))}}]}),lIe()&&u&&g(cIe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},UIe=()=>window.location.pathname==="/excalidraw-plus-export"?g(gIe,{}):g(KSe,{children:g(Dle,{store:Il,children:g(pIe,{})})});window.__EXCALIDRAW_SHA__="";const bIe=document.getElementById("root"),yIe=Oq.createRoot(bIe);Fq();yIe.render(g(O.StrictMode,{children:g(UIe,{})}));export{ye as _,Sa as c,cl as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./subset-worker.chunk-CVR6pt27.js","./subset-shared.chunk-D3ioWSie.js","./pica-DagrXVtO.js","./_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-orvkteAo.js.map
