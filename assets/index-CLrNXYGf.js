var OK=Object.defineProperty;var PK=(e,t,n)=>t in e?OK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(PK(e,typeof t!="symbol"?t+"":t,n),n);function FK(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xD={exports:{}},G6={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BK=Symbol.for("react.transitional.element"),zK=Symbol.for("react.fragment");function CD(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:BK,type:e,key:i,ref:t!==void 0?t:null,props:n}}G6.Fragment=zK;G6.jsx=CD;G6.jsxs=CD;xD.exports=G6;var wv=xD.exports;const he=wv.Fragment,g=wv.jsx,O=wv.jsxs;var AD={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v=Symbol.for("react.transitional.element"),HK=Symbol.for("react.portal"),VK=Symbol.for("react.fragment"),$K=Symbol.for("react.strict_mode"),GK=Symbol.for("react.profiler"),XK=Symbol.for("react.consumer"),YK=Symbol.for("react.context"),jK=Symbol.for("react.forward_ref"),WK=Symbol.for("react.suspense"),KK=Symbol.for("react.memo"),MD=Symbol.for("react.lazy"),JS=Symbol.iterator;function ZK(e){return e===null||typeof e!="object"?null:(e=JS&&e[JS]||e["@@iterator"],typeof e=="function"?e:null)}var RD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kD=Object.assign,LD={};function Zh(e,t,n){this.props=e,this.context=t,this.refs=LD,this.updater=n||RD}Zh.prototype.isReactComponent={};Zh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DD(){}DD.prototype=Zh.prototype;function Tv(e,t,n){this.props=e,this.context=t,this.refs=LD,this.updater=n||RD}var Sv=Tv.prototype=new DD;Sv.constructor=Tv;kD(Sv,Zh.prototype);Sv.isPureReactComponent=!0;var eI=Array.isArray,cn={H:null,A:null,T:null,S:null},ND=Object.prototype.hasOwnProperty;function Iv(e,t,n,i,r,s){return n=s.ref,{$$typeof:_v,type:e,key:t,ref:n!==void 0?n:null,props:s}}function qK(e,t){return Iv(e.type,t,void 0,void 0,void 0,e.props)}function xv(e){return typeof e=="object"&&e!==null&&e.$$typeof===_v}function QK(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tI=/\/+/g;function e8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QK(""+e.key):t.toString(36)}function nI(){}function JK(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(nI,nI):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function nf(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _v:case HK:o=!0;break;case MD:return o=e._init,nf(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+e8(e,0):i,eI(r)?(n="",o!=null&&(n=o.replace(tI,"$&/")+"/"),nf(r,t,n,"",function(c){return c})):r!=null&&(xv(r)&&(r=qK(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(tI,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(eI(e))for(var l=0;l<e.length;l++)i=e[l],s=a+e8(i,l),o+=nf(i,t,n,s,r);else if(l=ZK(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+e8(i,l++),o+=nf(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return nf(JK(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Hp(e,t,n){if(e==null)return e;var i=[],r=0;return nf(e,i,"","",function(s){return t.call(n,s,r++)}),i}function eZ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var iI=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function tZ(){}Ve.Children={map:Hp,forEach:function(e,t,n){Hp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hp(e,function(){t++}),t},toArray:function(e){return Hp(e,function(t){return t})||[]},only:function(e){if(!xv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=Zh;Ve.Fragment=VK;Ve.Profiler=GK;Ve.PureComponent=Tv;Ve.StrictMode=$K;Ve.Suspense=WK;Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cn;Ve.act=function(){throw Error("act(...) is not supported in production builds of React.")};Ve.cache=function(e){return function(){return e.apply(null,arguments)}};Ve.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=kD({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!ND.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return Iv(e.type,r,void 0,void 0,s,i)};Ve.createContext=function(e){return e={$$typeof:YK,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:XK,_context:e},e};Ve.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)ND.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return Iv(e,s,void 0,void 0,null,r)};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:jK,render:e}};Ve.isValidElement=xv;Ve.lazy=function(e){return{$$typeof:MD,_payload:{_status:-1,_result:e},_init:eZ}};Ve.memo=function(e,t){return{$$typeof:KK,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=cn.T,n={};cn.T=n;try{var i=e(),r=cn.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(tZ,iI)}catch(s){iI(s)}finally{cn.T=t}};Ve.unstable_useCacheRefresh=function(){return cn.H.useCacheRefresh()};Ve.use=function(e){return cn.H.use(e)};Ve.useActionState=function(e,t,n){return cn.H.useActionState(e,t,n)};Ve.useCallback=function(e,t){return cn.H.useCallback(e,t)};Ve.useContext=function(e){return cn.H.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e,t){return cn.H.useDeferredValue(e,t)};Ve.useEffect=function(e,t){return cn.H.useEffect(e,t)};Ve.useId=function(){return cn.H.useId()};Ve.useImperativeHandle=function(e,t,n){return cn.H.useImperativeHandle(e,t,n)};Ve.useInsertionEffect=function(e,t){return cn.H.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return cn.H.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return cn.H.useMemo(e,t)};Ve.useOptimistic=function(e,t){return cn.H.useOptimistic(e,t)};Ve.useReducer=function(e,t,n){return cn.H.useReducer(e,t,n)};Ve.useRef=function(e){return cn.H.useRef(e)};Ve.useState=function(e){return cn.H.useState(e)};Ve.useSyncExternalStore=function(e,t,n){return cn.H.useSyncExternalStore(e,t,n)};Ve.useTransition=function(){return cn.H.useTransition()};Ve.version="19.0.0";AD.exports=Ve;var L=AD.exports;const oe=gl(L),nZ=FK({__proto__:null,default:oe},[L]);var OD={exports:{}},X6={},PD={exports:{}},FD={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,G){var Y=V.length;V.push(G);e:for(;0<Y;){var X=Y-1>>>1,Z=V[X];if(0<r(Z,G))V[X]=G,V[Y]=Z,Y=X;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var G=V[0],Y=V.pop();if(Y!==G){V[0]=Y;e:for(var X=0,Z=V.length,Ue=Z>>>1;X<Ue;){var re=2*(X+1)-1,be=V[re],Ye=re+1,je=V[Ye];if(0>r(be,Y))Ye<Z&&0>r(je,be)?(V[X]=je,V[Ye]=Y,X=Ye):(V[X]=be,V[re]=Y,X=re);else if(Ye<Z&&0>r(je,Y))V[X]=je,V[Ye]=Y,X=Ye;else break e}}return G}function r(V,G){var Y=V.sortIndex-G.sortIndex;return Y!==0?Y:V.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,U=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function v(V){for(var G=n(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=V)i(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function w(V){if(p=!1,v(V),!m)if(n(l)!==null)m=!0,$();else{var G=n(c);G!==null&&z(w,G.startTime-V)}}var S=!1,M=-1,_=5,T=-1;function C(){return!(e.unstable_now()-T<_)}function x(){if(S){var V=e.unstable_now();T=V;var G=!0;try{e:{m=!1,p&&(p=!1,E(M),M=-1),h=!0;var Y=f;try{t:{for(v(V),d=n(l);d!==null&&!(d.expirationTime>V&&C());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var Z=X(d.expirationTime<=V);if(V=e.unstable_now(),typeof Z=="function"){d.callback=Z,v(V),G=!0;break t}d===n(l)&&i(l),v(V)}else i(l);d=n(l)}if(d!==null)G=!0;else{var Ue=n(c);Ue!==null&&z(w,Ue.startTime-V),G=!1}}break e}finally{d=null,f=Y,h=!1}G=void 0}}finally{G?R():S=!1}}}var R;if(typeof y=="function")R=function(){y(x)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,D=P.port2;P.port1.onmessage=x,R=function(){D.postMessage(null)}}else R=function(){U(x,0)};function $(){S||(S=!0,R())}function z(V,G){M=U(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,$())},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var Y=f;f=G;try{return V()}finally{f=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=f;f=V;try{return G()}finally{f=Y}},e.unstable_scheduleCallback=function(V,G,Y){var X=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Y+Z,V={id:u++,callback:G,priorityLevel:V,startTime:Y,expirationTime:Z,sortIndex:-1},Y>X?(V.sortIndex=Y,t(c,V),n(l)===null&&V===n(c)&&(p?(E(M),M=-1):p=!0,z(w,Y-X))):(V.sortIndex=Z,t(l,V),m||h||(m=!0,$())),V},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(V){var G=f;return function(){var Y=f;f=G;try{return V.apply(this,arguments)}finally{f=Y}}}})(FD);PD.exports=FD;var iZ=PD.exports,BD={exports:{}},ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rZ=L;function zD(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wl(){}var tr={d:{f:wl,r:function(){throw Error(zD(522))},D:wl,C:wl,L:wl,m:wl,X:wl,S:wl,M:wl},p:0,findDOMNode:null},sZ=Symbol.for("react.portal");function oZ(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sZ,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var H1=rZ.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Y6(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tr;ar.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(zD(299));return oZ(e,t,null,n)};ar.flushSync=function(e){var t=H1.T,n=tr.p;try{if(H1.T=null,tr.p=2,e)return e()}finally{H1.T=t,tr.p=n,tr.d.f()}};ar.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,tr.d.C(e,t))};ar.prefetchDNS=function(e){typeof e=="string"&&tr.d.D(e)};ar.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Y6(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?tr.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&tr.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ar.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Y6(t.as,t.crossOrigin);tr.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&tr.d.M(e)};ar.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Y6(n,t.crossOrigin);tr.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ar.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Y6(t.as,t.crossOrigin);tr.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else tr.d.m(e)};ar.requestFormReset=function(e){tr.d.r(e)};ar.unstable_batchedUpdates=function(e,t){return e(t)};ar.useFormState=function(e,t,n){return H1.H.useFormState(e,t,n)};ar.useFormStatus=function(){return H1.H.useHostTransitionStatus()};ar.version="19.0.0";function HD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HD)}catch(e){console.error(e)}}HD(),BD.exports=ar;var _n=BD.exports;const aZ=gl(_n);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ti=iZ,VD=L,lZ=_n;function te(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function $D(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var cZ=Symbol.for("react.element"),Vp=Symbol.for("react.transitional.element"),m1=Symbol.for("react.portal"),pf=Symbol.for("react.fragment"),GD=Symbol.for("react.strict_mode"),y3=Symbol.for("react.profiler"),uZ=Symbol.for("react.provider"),XD=Symbol.for("react.consumer"),Ra=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),E3=Symbol.for("react.suspense"),v3=Symbol.for("react.suspense_list"),Av=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),YD=Symbol.for("react.offscreen"),dZ=Symbol.for("react.memo_cache_sentinel"),rI=Symbol.iterator;function Bg(e){return e===null||typeof e!="object"?null:(e=rI&&e[rI]||e["@@iterator"],typeof e=="function"?e:null)}var fZ=Symbol.for("react.client.reference");function w3(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fZ?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pf:return"Fragment";case m1:return"Portal";case y3:return"Profiler";case GD:return"StrictMode";case E3:return"Suspense";case v3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ra:return(e.displayName||"Context")+".Provider";case XD:return(e._context.displayName||"Context")+".Consumer";case Cv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Av:return t=e.displayName||null,t!==null?t:w3(e.type)||"Memo";case Nl:t=e._payload,e=e._init;try{return w3(e(t))}catch{}}return null}var ze=VD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zt=Object.assign,t8,sI;function p1(e){if(t8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);t8=t&&t[1]||"",sI=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+t8+e+sI}var n8=!1;function i8(e,t){if(!e||n8)return"";n8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{n8=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?p1(n):""}function hZ(e){switch(e.tag){case 26:case 27:case 5:return p1(e.type);case 16:return p1("Lazy");case 13:return p1("Suspense");case 19:return p1("SuspenseList");case 0:case 15:return e=i8(e.type,!1),e;case 11:return e=i8(e.type.render,!1),e;case 1:return e=i8(e.type,!0),e;default:return""}}function oI(e){try{var t="";do t+=hZ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function qh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function aI(e){if(qh(e)!==e)throw Error(te(188))}function gZ(e){var t=e.alternate;if(!t){if(t=qh(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return aI(r),e;if(s===i)return aI(r),t;s=s.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function WD(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=WD(e),t!==null)return t;e=e.sibling}return null}var U1=Array.isArray,Kt=lZ.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ru={pending:!1,data:null,method:null,action:null},_3=[],Uf=-1;function ia(e){return{current:e}}function hi(e){0>Uf||(e.current=_3[Uf],_3[Uf]=null,Uf--)}function nn(e,t){Uf++,_3[Uf]=e.current,e.current=t}var Po=ia(null),A0=ia(null),rc=ia(null),P2=ia(null);function F2(e,t){switch(nn(rc,t),nn(A0,e),nn(Po,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?lx(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=lx(e),t=oP(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}hi(Po),nn(Po,t)}function lh(){hi(Po),hi(A0),hi(rc)}function T3(e){e.memoizedState!==null&&nn(P2,e);var t=Po.current,n=oP(t,e.type);t!==n&&(nn(A0,e),nn(Po,n))}function B2(e){A0.current===e&&(hi(Po),hi(A0)),P2.current===e&&(hi(P2),z0._currentValue=Ru)}var S3=Object.prototype.hasOwnProperty,Mv=ti.unstable_scheduleCallback,r8=ti.unstable_cancelCallback,mZ=ti.unstable_shouldYield,pZ=ti.unstable_requestPaint,Fo=ti.unstable_now,UZ=ti.unstable_getCurrentPriorityLevel,KD=ti.unstable_ImmediatePriority,ZD=ti.unstable_UserBlockingPriority,z2=ti.unstable_NormalPriority,bZ=ti.unstable_LowPriority,qD=ti.unstable_IdlePriority,yZ=ti.log,EZ=ti.unstable_setDisableYieldValue,Dm=null,$r=null;function vZ(e){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Dm,e,void 0,(e.current.flags&128)===128)}catch{}}function Kl(e){if(typeof yZ=="function"&&EZ(e),$r&&typeof $r.setStrictMode=="function")try{$r.setStrictMode(Dm,e)}catch{}}var Gr=Math.clz32?Math.clz32:TZ,wZ=Math.log,_Z=Math.LN2;function TZ(e){return e>>>=0,e===0?32:31-(wZ(e)/_Z|0)|0}var $p=128,Gp=4194304;function lu(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function j6(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=lu(n):(s&=a,s!==0?i=lu(s):e||(o=a&~o,o!==0&&(i=lu(o))))):(a=n&~r,a!==0?i=lu(a):s!==0?i=lu(s):e||(o=n&~o,o!==0&&(i=lu(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function Nm(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function SZ(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QD(){var e=$p;return $p<<=1,!($p&4194176)&&($p=128),e}function JD(){var e=Gp;return Gp<<=1,!(Gp&62914560)&&(Gp=4194304),e}function s8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Om(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function IZ(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Gr(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&eN(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function eN(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Gr(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function tN(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Gr(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function nN(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function iN(){var e=Kt.p;return e!==0?e:(e=window.event,e===void 0?32:pP(e.type))}function xZ(e,t){var n=Kt.p;try{return Kt.p=e,t()}finally{Kt.p=n}}var Gc=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Gc,Er="__reactProps$"+Gc,Qh="__reactContainer$"+Gc,I3="__reactEvents$"+Gc,CZ="__reactListeners$"+Gc,AZ="__reactHandles$"+Gc,lI="__reactResources$"+Gc,M0="__reactMarker$"+Gc;function Rv(e){delete e[Vi],delete e[Er],delete e[I3],delete e[CZ],delete e[AZ]}function Eu(e){var t=e[Vi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qh]||n[Vi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ux(e);e!==null;){if(n=e[Vi])return n;e=ux(e)}return t}e=n,n=e.parentNode}return null}function Jh(e){if(e=e[Vi]||e[Qh]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function b1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(te(33))}function zf(e){var t=e[lI];return t||(t=e[lI]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ci(e){e[M0]=!0}var rN=new Set,sN={};function Ed(e,t){ch(e,t),ch(e+"Capture",t)}function ch(e,t){for(sN[e]=t,e=0;e<t.length;e++)rN.add(t[e])}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MZ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cI={},uI={};function RZ(e){return S3.call(uI,e)?!0:S3.call(cI,e)?!1:MZ.test(e)?uI[e]=!0:(cI[e]=!0,!1)}function YU(e,t,n){if(RZ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Xp(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ua(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function as(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kZ(e){var t=oN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function H2(e){e._valueTracker||(e._valueTracker=kZ(e))}function aN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oN(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function V2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var LZ=/[\n"\\]/g;function us(e){return e.replace(LZ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function x3(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+as(t)):e.value!==""+as(t)&&(e.value=""+as(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?C3(e,o,as(t)):n!=null?C3(e,o,as(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+as(a):e.removeAttribute("name")}function lN(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+as(n):"",t=t!=null?""+as(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function C3(e,t,n){t==="number"&&V2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Hf(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+as(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function cN(e,t,n){if(t!=null&&(t=""+as(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+as(n):""}function uN(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(te(92));if(U1(i)){if(1<i.length)throw Error(te(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=as(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function uh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var DZ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dI(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||DZ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dN(e,t,n){if(t!=null&&typeof t!="object")throw Error(te(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&dI(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&dI(e,s,t[s])}function kv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NZ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OZ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jU(e){return OZ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var A3=null;function Lv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bf=null,Vf=null;function fI(e){var t=Jh(e);if(t&&(e=t.stateNode)){var n=e[Er]||null;e:switch(e=t.stateNode,t.type){case"input":if(x3(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+us(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Er]||null;if(!r)throw Error(te(90));x3(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&aN(i)}break e;case"textarea":cN(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Hf(e,!!n.multiple,t,!1)}}}var o8=!1;function fN(e,t,n){if(o8)return e(t,n);o8=!0;try{var i=e(t);return i}finally{if(o8=!1,(bf!==null||Vf!==null)&&(i5(),bf&&(t=bf,e=Vf,Vf=bf=null,fI(t),e)))for(t=0;t<e.length;t++)fI(e[t])}}function R0(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Er]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var M3=!1;if(Za)try{var zg={};Object.defineProperty(zg,"passive",{get:function(){M3=!0}}),window.addEventListener("test",zg,zg),window.removeEventListener("test",zg,zg)}catch{M3=!1}var Zl=null,Dv=null,WU=null;function hN(){if(WU)return WU;var e,t=Dv,n=t.length,i,r="value"in Zl?Zl.value:Zl.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return WU=r.slice(e,1<i?1-i:void 0)}function KU(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Yp(){return!0}function hI(){return!1}function _r(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yp:hI,this.isPropagationStopped=hI,this}return Zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yp)},persist:function(){},isPersistent:Yp}),t}var vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},W6=_r(vd),Pm=Zt({},vd,{view:0,detail:0}),PZ=_r(Pm),a8,l8,Hg,K6=Zt({},Pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hg&&(Hg&&e.type==="mousemove"?(a8=e.screenX-Hg.screenX,l8=e.screenY-Hg.screenY):l8=a8=0,Hg=e),a8)},movementY:function(e){return"movementY"in e?e.movementY:l8}}),gI=_r(K6),FZ=Zt({},K6,{dataTransfer:0}),BZ=_r(FZ),zZ=Zt({},Pm,{relatedTarget:0}),c8=_r(zZ),HZ=Zt({},vd,{animationName:0,elapsedTime:0,pseudoElement:0}),VZ=_r(HZ),$Z=Zt({},vd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),GZ=_r($Z),XZ=Zt({},vd,{data:0}),mI=_r(XZ),YZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=WZ[e])?!!t[e]:!1}function Nv(){return KZ}var ZZ=Zt({},Pm,{key:function(e){if(e.key){var t=YZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=KU(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nv,charCode:function(e){return e.type==="keypress"?KU(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?KU(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qZ=_r(ZZ),QZ=Zt({},K6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pI=_r(QZ),JZ=Zt({},Pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nv}),eq=_r(JZ),tq=Zt({},vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),nq=_r(tq),iq=Zt({},K6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rq=_r(iq),sq=Zt({},vd,{newState:0,oldState:0}),oq=_r(sq),aq=[9,13,27,32],Ov=Za&&"CompositionEvent"in window,V1=null;Za&&"documentMode"in document&&(V1=document.documentMode);var lq=Za&&"TextEvent"in window&&!V1,gN=Za&&(!Ov||V1&&8<V1&&11>=V1),UI=" ",bI=!1;function mN(e,t){switch(e){case"keyup":return aq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yf=!1;function cq(e,t){switch(e){case"compositionend":return pN(t);case"keypress":return t.which!==32?null:(bI=!0,UI);case"textInput":return e=t.data,e===UI&&bI?null:e;default:return null}}function uq(e,t){if(yf)return e==="compositionend"||!Ov&&mN(e,t)?(e=hN(),WU=Dv=Zl=null,yf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gN&&t.locale!=="ko"?null:t.data;default:return null}}var dq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dq[e.type]:t==="textarea"}function UN(e,t,n,i){bf?Vf?Vf.push(i):Vf=[i]:bf=i,t=rb(t,"onChange"),0<t.length&&(n=new W6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var $1=null,k0=null;function fq(e){iP(e,0)}function Z6(e){var t=b1(e);if(aN(t))return e}function EI(e,t){if(e==="change")return t}var bN=!1;if(Za){var u8;if(Za){var d8="oninput"in document;if(!d8){var vI=document.createElement("div");vI.setAttribute("oninput","return;"),d8=typeof vI.oninput=="function"}u8=d8}else u8=!1;bN=u8&&(!document.documentMode||9<document.documentMode)}function wI(){$1&&($1.detachEvent("onpropertychange",yN),k0=$1=null)}function yN(e){if(e.propertyName==="value"&&Z6(k0)){var t=[];UN(t,k0,e,Lv(e)),fN(fq,t)}}function hq(e,t,n){e==="focusin"?(wI(),$1=t,k0=n,$1.attachEvent("onpropertychange",yN)):e==="focusout"&&wI()}function gq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Z6(k0)}function mq(e,t){if(e==="click")return Z6(t)}function pq(e,t){if(e==="input"||e==="change")return Z6(t)}function Uq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wr=typeof Object.is=="function"?Object.is:Uq;function L0(e,t){if(Wr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!S3.call(t,r)||!Wr(e[r],t[r]))return!1}return!0}function _I(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TI(e,t){var n=_I(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_I(n)}}function EN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vN(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=V2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=V2(e.document)}return t}function Pv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bq(e,t){var n=vN(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&EN(t.ownerDocument.documentElement,t)){if(i!==null&&Pv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=TI(t,s);var o=TI(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yq=Za&&"documentMode"in document&&11>=document.documentMode,Ef=null,R3=null,G1=null,k3=!1;function SI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;k3||Ef==null||Ef!==V2(i)||(i=Ef,"selectionStart"in i&&Pv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),G1&&L0(G1,i)||(G1=i,i=rb(R3,"onSelect"),0<i.length&&(t=new W6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ef)))}function iu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vf={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionrun:iu("Transition","TransitionRun"),transitionstart:iu("Transition","TransitionStart"),transitioncancel:iu("Transition","TransitionCancel"),transitionend:iu("Transition","TransitionEnd")},f8={},wN={};Za&&(wN=document.createElement("div").style,"AnimationEvent"in window||(delete vf.animationend.animation,delete vf.animationiteration.animation,delete vf.animationstart.animation),"TransitionEvent"in window||delete vf.transitionend.transition);function wd(e){if(f8[e])return f8[e];if(!vf[e])return e;var t=vf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wN)return f8[e]=t[n];return e}var _N=wd("animationend"),TN=wd("animationiteration"),SN=wd("animationstart"),Eq=wd("transitionrun"),vq=wd("transitionstart"),wq=wd("transitioncancel"),IN=wd("transitionend"),xN=new Map,II="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function fo(e,t){xN.set(e,t),Ed(t,[e])}var rs=[],wf=0,Fv=0;function q6(){for(var e=wf,t=Fv=wf=0;t<e;){var n=rs[t];rs[t++]=null;var i=rs[t];rs[t++]=null;var r=rs[t];rs[t++]=null;var s=rs[t];if(rs[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&CN(n,r,s)}}function Q6(e,t,n,i){rs[wf++]=e,rs[wf++]=t,rs[wf++]=n,rs[wf++]=i,Fv|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Bv(e,t,n,i){return Q6(e,t,n,i),$2(e)}function _c(e,t){return Q6(e,null,null,t),$2(e)}function CN(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Gr(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function $2(e){if(50<n0)throw n0=0,e7=null,Error(te(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _f={},xI=new WeakMap;function ds(e,t){if(typeof e=="object"&&e!==null){var n=xI.get(e);return n!==void 0?n:(t={value:e,source:t,stack:oI(t)},xI.set(e,t),t)}return{value:e,source:t,stack:oI(t)}}var Tf=[],Sf=0,G2=null,X2=0,ls=[],cs=0,ku=null,ka=1,La="";function cu(e,t){Tf[Sf++]=X2,Tf[Sf++]=G2,G2=e,X2=t}function AN(e,t,n){ls[cs++]=ka,ls[cs++]=La,ls[cs++]=ku,ku=e;var i=ka;e=La;var r=32-Gr(i)-1;i&=~(1<<r),n+=1;var s=32-Gr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ka=1<<32-Gr(t)+r|n<<r|i,La=s+e}else ka=1<<s|n<<r|i,La=e}function zv(e){e.return!==null&&(cu(e,1),AN(e,1,0))}function Hv(e){for(;e===G2;)G2=Tf[--Sf],Tf[Sf]=null,X2=Tf[--Sf],Tf[Sf]=null;for(;e===ku;)ku=ls[--cs],ls[cs]=null,La=ls[--cs],ls[cs]=null,ka=ls[--cs],ls[cs]=null}var Ji=null,wi=null,vt=!1,Xs=null,Ao=!1,L3=Error(te(519));function ju(e){var t=Error(te(418,""));throw D0(ds(t,e)),L3}function CI(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Vi]=e,t[Er]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<P0.length;n++)it(P0[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),lN(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),H2(t);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),uN(t,i.value,i.defaultValue,i.children),H2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||sP(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=s5),t=!0):t=!1,t||ju(e)}function AI(e){for(Ji=e.return;Ji;)switch(Ji.tag){case 3:case 27:Ao=!0;return;case 5:case 13:Ao=!1;return;default:Ji=Ji.return}}function Vg(e){if(e!==Ji)return!1;if(!vt)return AI(e),vt=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||a7(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&wi&&ju(e),AI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){wi=qs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}wi=null}}else wi=Ji?qs(e.stateNode.nextSibling):null;return!0}function Fm(){wi=Ji=null,vt=!1}function D0(e){Xs===null?Xs=[e]:Xs.push(e)}var X1=Error(te(460)),MN=Error(te(474)),D3={then:function(){}};function MI(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jp(){}function RN(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(jp,jp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===X1?Error(te(483)):e;default:if(typeof t.status=="string")t.then(jp,jp);else{if(e=Gt,e!==null&&100<e.shellSuspendCounter)throw Error(te(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===X1?Error(te(483)):e}throw Y1=t,X1}}var Y1=null;function RI(){if(Y1===null)throw Error(te(459));var e=Y1;return Y1=null,e}var $f=null,N0=0;function Wp(e){var t=N0;return N0+=1,$f===null&&($f=[]),RN($f,e,t)}function $g(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kp(e,t){throw t.$$typeof===cZ?Error(te(525)):(e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function kI(e){var t=e._init;return t(e._payload)}function kN(e){function t(E,y){if(e){var v=E.deletions;v===null?(E.deletions=[y],E.flags|=16):v.push(y)}}function n(E,y){if(!e)return null;for(;y!==null;)t(E,y),y=y.sibling;return null}function i(E){for(var y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function r(E,y){return E=ac(E,y),E.index=0,E.sibling=null,E}function s(E,y,v){return E.index=v,e?(v=E.alternate,v!==null?(v=v.index,v<y?(E.flags|=33554434,y):v):(E.flags|=33554434,y)):(E.flags|=1048576,y)}function o(E){return e&&E.alternate===null&&(E.flags|=33554434),E}function a(E,y,v,w){return y===null||y.tag!==6?(y=T8(v,E.mode,w),y.return=E,y):(y=r(y,v),y.return=E,y)}function l(E,y,v,w){var S=v.type;return S===pf?u(E,y,v.props.children,w,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nl&&kI(S)===y.type)?(y=r(y,v.props),$g(y,v),y.return=E,y):(y=e2(v.type,v.key,v.props,null,E.mode,w),$g(y,v),y.return=E,y)}function c(E,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=S8(v,E.mode,w),y.return=E,y):(y=r(y,v.children||[]),y.return=E,y)}function u(E,y,v,w,S){return y===null||y.tag!==7?(y=Du(v,E.mode,w,S),y.return=E,y):(y=r(y,v),y.return=E,y)}function d(E,y,v){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=T8(""+y,E.mode,v),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vp:return v=e2(y.type,y.key,y.props,null,E.mode,v),$g(v,y),v.return=E,v;case m1:return y=S8(y,E.mode,v),y.return=E,y;case Nl:var w=y._init;return y=w(y._payload),d(E,y,v)}if(U1(y)||Bg(y))return y=Du(y,E.mode,v,null),y.return=E,y;if(typeof y.then=="function")return d(E,Wp(y),v);if(y.$$typeof===Ra)return d(E,Zp(E,y),v);Kp(E,y)}return null}function f(E,y,v,w){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return S!==null?null:a(E,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vp:return v.key===S?l(E,y,v,w):null;case m1:return v.key===S?c(E,y,v,w):null;case Nl:return S=v._init,v=S(v._payload),f(E,y,v,w)}if(U1(v)||Bg(v))return S!==null?null:u(E,y,v,w,null);if(typeof v.then=="function")return f(E,y,Wp(v),w);if(v.$$typeof===Ra)return f(E,y,Zp(E,v),w);Kp(E,v)}return null}function h(E,y,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return E=E.get(v)||null,a(y,E,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vp:return E=E.get(w.key===null?v:w.key)||null,l(y,E,w,S);case m1:return E=E.get(w.key===null?v:w.key)||null,c(y,E,w,S);case Nl:var M=w._init;return w=M(w._payload),h(E,y,v,w,S)}if(U1(w)||Bg(w))return E=E.get(v)||null,u(y,E,w,S,null);if(typeof w.then=="function")return h(E,y,v,Wp(w),S);if(w.$$typeof===Ra)return h(E,y,v,Zp(y,w),S);Kp(y,w)}return null}function m(E,y,v,w){for(var S=null,M=null,_=y,T=y=0,C=null;_!==null&&T<v.length;T++){_.index>T?(C=_,_=null):C=_.sibling;var x=f(E,_,v[T],w);if(x===null){_===null&&(_=C);break}e&&_&&x.alternate===null&&t(E,_),y=s(x,y,T),M===null?S=x:M.sibling=x,M=x,_=C}if(T===v.length)return n(E,_),vt&&cu(E,T),S;if(_===null){for(;T<v.length;T++)_=d(E,v[T],w),_!==null&&(y=s(_,y,T),M===null?S=_:M.sibling=_,M=_);return vt&&cu(E,T),S}for(_=i(_);T<v.length;T++)C=h(_,E,T,v[T],w),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?T:C.key),y=s(C,y,T),M===null?S=C:M.sibling=C,M=C);return e&&_.forEach(function(R){return t(E,R)}),vt&&cu(E,T),S}function p(E,y,v,w){if(v==null)throw Error(te(151));for(var S=null,M=null,_=y,T=y=0,C=null,x=v.next();_!==null&&!x.done;T++,x=v.next()){_.index>T?(C=_,_=null):C=_.sibling;var R=f(E,_,x.value,w);if(R===null){_===null&&(_=C);break}e&&_&&R.alternate===null&&t(E,_),y=s(R,y,T),M===null?S=R:M.sibling=R,M=R,_=C}if(x.done)return n(E,_),vt&&cu(E,T),S;if(_===null){for(;!x.done;T++,x=v.next())x=d(E,x.value,w),x!==null&&(y=s(x,y,T),M===null?S=x:M.sibling=x,M=x);return vt&&cu(E,T),S}for(_=i(_);!x.done;T++,x=v.next())x=h(_,E,T,x.value,w),x!==null&&(e&&x.alternate!==null&&_.delete(x.key===null?T:x.key),y=s(x,y,T),M===null?S=x:M.sibling=x,M=x);return e&&_.forEach(function(P){return t(E,P)}),vt&&cu(E,T),S}function U(E,y,v,w){if(typeof v=="object"&&v!==null&&v.type===pf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Vp:e:{for(var S=v.key;y!==null;){if(y.key===S){if(S=v.type,S===pf){if(y.tag===7){n(E,y.sibling),w=r(y,v.props.children),w.return=E,E=w;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nl&&kI(S)===y.type){n(E,y.sibling),w=r(y,v.props),$g(w,v),w.return=E,E=w;break e}n(E,y);break}else t(E,y);y=y.sibling}v.type===pf?(w=Du(v.props.children,E.mode,w,v.key),w.return=E,E=w):(w=e2(v.type,v.key,v.props,null,E.mode,w),$g(w,v),w.return=E,E=w)}return o(E);case m1:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(E,y.sibling),w=r(y,v.children||[]),w.return=E,E=w;break e}else{n(E,y);break}else t(E,y);y=y.sibling}w=S8(v,E.mode,w),w.return=E,E=w}return o(E);case Nl:return S=v._init,v=S(v._payload),U(E,y,v,w)}if(U1(v))return m(E,y,v,w);if(Bg(v)){if(S=Bg(v),typeof S!="function")throw Error(te(150));return v=S.call(v),p(E,y,v,w)}if(typeof v.then=="function")return U(E,y,Wp(v),w);if(v.$$typeof===Ra)return U(E,y,Zp(E,v),w);Kp(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,y!==null&&y.tag===6?(n(E,y.sibling),w=r(y,v),w.return=E,E=w):(n(E,y),w=T8(v,E.mode,w),w.return=E,E=w),o(E)):n(E,y)}return function(E,y,v,w){try{N0=0;var S=U(E,y,v,w);return $f=null,S}catch(_){if(_===X1)throw _;var M=ms(29,_,null,E.mode);return M.lanes=w,M.return=E,M}finally{}}}var Wu=kN(!0),LN=kN(!1),dh=ia(null),Y2=ia(0);function LI(e,t){e=Ja,nn(Y2,e),nn(dh,t),Ja=e|t.baseLanes}function N3(){nn(Y2,Ja),nn(dh,dh.current)}function Vv(){Ja=Y2.current,hi(dh),hi(Y2)}var Is=ia(null),Bo=null;function Vl(e){var t=e.alternate;nn(qn,qn.current&1),nn(Is,e),Bo===null&&(t===null||dh.current!==null||t.memoizedState!==null)&&(Bo=e)}function DN(e){if(e.tag===22){if(nn(qn,qn.current),nn(Is,e),Bo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bo=e)}}else $l()}function $l(){nn(qn,qn.current),nn(Is,Is.current)}function Da(e){hi(Is),Bo===e&&(Bo=null),hi(qn)}var qn=ia(0);function j2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _q=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Tq=ti.unstable_scheduleCallback,Sq=ti.unstable_NormalPriority,Zn={$$typeof:Ra,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $v(){return{controller:new _q,data:new Map,refCount:0}}function Bm(e){e.refCount--,e.refCount===0&&Tq(Sq,function(){e.controller.abort()})}var j1=null,O3=0,fh=0,Gf=null;function Iq(e,t){if(j1===null){var n=j1=[];O3=0,fh=fw(),Gf={status:"pending",value:void 0,then:function(i){n.push(i)}}}return O3++,t.then(DI,DI),t}function DI(){if(--O3===0&&j1!==null){Gf!==null&&(Gf.status="fulfilled");var e=j1;j1=null,fh=0,Gf=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xq(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var NI=ze.S;ze.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Iq(e,t),NI!==null&&NI(e,t)};var Lu=ia(null);function Gv(){var e=Lu.current;return e!==null?e:Gt.pooledCache}function ZU(e,t){t===null?nn(Lu,Lu.current):nn(Lu,t.pool)}function NN(){var e=Gv();return e===null?null:{parent:Zn._currentValue,pool:e}}var Tc=0,Xe=null,Lt=null,Nn=null,W2=!1,Xf=!1,Ku=!1,K2=0,O0=0,Yf=null,Cq=0;function vn(){throw Error(te(321))}function Xv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wr(e[n],t[n]))return!1;return!0}function Yv(e,t,n,i,r,s){return Tc=s,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ze.H=e===null||e.memoizedState===null?_d:Xc,Ku=!1,s=n(i,r),Ku=!1,Xf&&(s=PN(t,n,i,r)),ON(e),s}function ON(e){ze.H=$o;var t=Lt!==null&&Lt.next!==null;if(Tc=0,Nn=Lt=Xe=null,W2=!1,O0=0,Yf=null,t)throw Error(te(300));e===null||di||(e=e.dependencies,e!==null&&Q2(e)&&(di=!0))}function PN(e,t,n,i){Xe=e;var r=0;do{if(Xf&&(Yf=null),O0=0,Xf=!1,25<=r)throw Error(te(301));if(r+=1,Nn=Lt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ze.H=Td,s=t(n,i)}while(Xf);return s}function Aq(){var e=ze.H,t=e.useState()[0];return t=typeof t.then=="function"?zm(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(Xe.flags|=1024),t}function jv(){var e=K2!==0;return K2=0,e}function Wv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Kv(e){if(W2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}W2=!1}Tc=0,Nn=Lt=Xe=null,Xf=!1,O0=K2=0,Yf=null}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Xe.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function zn(){if(Lt===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Nn===null?Xe.memoizedState:Nn.next;if(t!==null)Nn=t,Lt=e;else{if(e===null)throw Xe.alternate===null?Error(te(467)):Error(te(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Nn===null?Xe.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}var J6;J6=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function zm(e){var t=O0;return O0+=1,Yf===null&&(Yf=[]),e=RN(Yf,e,t),t=Xe,(Nn===null?t.memoizedState:Nn.next)===null&&(t=t.alternate,ze.H=t===null||t.memoizedState===null?_d:Xc),e}function e5(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zm(e);if(e.$$typeof===Ra)return $i(e)}throw Error(te(438,String(e)))}function Zv(e){var t=null,n=Xe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Xe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=J6(),Xe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=dZ;return t.index++,n}function qa(e,t){return typeof t=="function"?t(e):t}function qU(e){var t=zn();return qv(t,Lt,e)}function qv(e,t,n){var i=e.queue;if(i===null)throw Error(te(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ut&d)===d:(Tc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===fh&&(u=!0);else if((Tc&f)===f){c=c.next,f===fh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,Xe.lanes|=f,Ic|=f;d=c.action,Ku&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,Xe.lanes|=d,Ic|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!Wr(s,e.memoizedState)&&(di=!0,u&&(n=Gf,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function h8(e){var t=zn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);Wr(s,t.memoizedState)||(di=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function FN(e,t,n){var i=Xe,r=zn(),s=vt;if(s){if(n===void 0)throw Error(te(407));n=n()}else n=t();var o=!Wr((Lt||r).memoizedState,n);if(o&&(r.memoizedState=n,di=!0),r=r.queue,Qv(HN.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||Nn!==null&&Nn.memoizedState.tag&1){if(i.flags|=2048,hh(9,zN.bind(null,i,r,n,t),{destroy:void 0},null),Gt===null)throw Error(te(349));s||Tc&60||BN(i,t,n)}return n}function BN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t=J6(),Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zN(e,t,n,i){t.value=n,t.getSnapshot=i,VN(t)&&$N(e)}function HN(e,t,n){return n(function(){VN(t)&&$N(e)})}function VN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wr(e,n)}catch{return!0}}function $N(e){var t=_c(e,2);t!==null&&ir(t,e,2)}function P3(e){var t=dr();if(typeof e=="function"){var n=e;if(e=n(),Ku){Kl(!0);try{n()}finally{Kl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},t}function GN(e,t,n,i){return e.baseState=n,qv(e,Lt,typeof i=="function"?i:qa)}function Mq(e,t,n,i,r){if(n5(e))throw Error(te(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};ze.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,XN(t,s)):(s.next=n.next,t.pending=n.next=s)}}function XN(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=ze.T,o={};ze.T=o;try{var a=n(r,i),l=ze.S;l!==null&&l(o,a),OI(e,t,a)}catch(c){F3(e,t,c)}finally{ze.T=s}}else try{s=n(r,i),OI(e,t,s)}catch(c){F3(e,t,c)}}function OI(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){PI(e,t,i)},function(i){return F3(e,t,i)}):PI(e,t,n)}function PI(e,t,n){t.status="fulfilled",t.value=n,YN(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,XN(e,n)))}function F3(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,YN(t),t=t.next;while(t!==i)}e.action=null}function YN(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function jN(e,t){return t}function WN(e,t){if(vt){var n=Gt.formState;if(n!==null){e:{var i=Xe;if(vt){if(wi){t:{for(var r=wi,s=Ao;r.nodeType!==8;){if(!s){r=null;break t}if(r=qs(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){wi=qs(r.nextSibling),i=r.data==="F!";break e}}ju(i)}i=!1}i&&(t=n[0])}}return n=dr(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jN,lastRenderedState:t},n.queue=i,n=dO.bind(null,Xe,i),i.dispatch=n,i=P3(!1),s=nw.bind(null,Xe,!1,i.queue),i=dr(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Mq.bind(null,Xe,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function KN(e){var t=zn();return ZN(t,Lt,e)}function ZN(e,t,n){t=qv(e,t,jN)[0],e=qU(qa)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?zm(t):t;var i=zn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(Xe.flags|=2048,hh(9,Rq.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function Rq(e,t){e.action=t}function qN(e){var t=zn(),n=Lt;if(n!==null)return ZN(t,n,e);zn(),t=t.memoizedState,n=zn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function hh(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=Xe.updateQueue,t===null&&(t=J6(),Xe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function QN(){return zn().memoizedState}function QU(e,t,n,i){var r=dr();Xe.flags|=e,r.memoizedState=hh(1|t,n,{destroy:void 0},i===void 0?null:i)}function t5(e,t,n,i){var r=zn();i=i===void 0?null:i;var s=r.memoizedState.inst;Lt!==null&&i!==null&&Xv(i,Lt.memoizedState.deps)?r.memoizedState=hh(t,n,s,i):(Xe.flags|=e,r.memoizedState=hh(1|t,n,s,i))}function FI(e,t){QU(8390656,8,e,t)}function Qv(e,t){t5(2048,8,e,t)}function JN(e,t){return t5(4,2,e,t)}function eO(e,t){return t5(4,4,e,t)}function tO(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nO(e,t,n){n=n!=null?n.concat([e]):null,t5(4,4,tO.bind(null,t,e),n)}function Jv(){}function iO(e,t){var n=zn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Xv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rO(e,t){var n=zn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Xv(t,i[1]))return i[0];if(i=e(),Ku){Kl(!0);try{e()}finally{Kl(!1)}}return n.memoizedState=[i,t],i}function ew(e,t,n){return n===void 0||Tc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=YO(),Xe.lanes|=e,Ic|=e,n)}function sO(e,t,n,i){return Wr(n,t)?n:dh.current!==null?(e=ew(e,n,i),Wr(e,t)||(di=!0),e):Tc&42?(e=YO(),Xe.lanes|=e,Ic|=e,t):(di=!0,e.memoizedState=n)}function oO(e,t,n,i,r){var s=Kt.p;Kt.p=s!==0&&8>s?s:8;var o=ze.T,a={};ze.T=a,nw(e,!1,t,n);try{var l=r(),c=ze.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=xq(l,i);W1(e,t,u,Xr(e))}else W1(e,t,i,Xr(e))}catch(d){W1(e,t,{then:function(){},status:"rejected",reason:d},Xr())}finally{Kt.p=s,ze.T=o}}function kq(){}function B3(e,t,n,i){if(e.tag!==5)throw Error(te(476));var r=aO(e).queue;oO(e,r,t,Ru,n===null?kq:function(){return lO(e),n(i)})}function aO(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ru,baseState:Ru,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:Ru},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lO(e){var t=aO(e).next.queue;W1(e,t,{},Xr())}function tw(){return $i(z0)}function cO(){return zn().memoizedState}function uO(){return zn().memoizedState}function Lq(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Xr();e=sc(n);var i=oc(t,e,n);i!==null&&(ir(i,t,n),Z1(i,t,n)),t={cache:$v()},e.payload=t;return}t=t.return}}function Dq(e,t,n){var i=Xr();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},n5(e)?fO(t,n):(n=Bv(e,t,n,i),n!==null&&(ir(n,e,i),hO(n,t,i)))}function dO(e,t,n){var i=Xr();W1(e,t,n,i)}function W1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(n5(e))fO(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Wr(a,o))return Q6(e,t,r,0),Gt===null&&q6(),!1}catch{}finally{}if(n=Bv(e,t,r,i),n!==null)return ir(n,e,i),hO(n,t,i),!0}return!1}function nw(e,t,n,i){if(i={lane:2,revertLane:fw(),action:i,hasEagerState:!1,eagerState:null,next:null},n5(e)){if(t)throw Error(te(479))}else t=Bv(e,n,i,2),t!==null&&ir(t,e,2)}function n5(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function fO(e,t){Xf=W2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hO(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tN(e,n)}}var $o={readContext:$i,use:e5,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn};$o.useCacheRefresh=vn;$o.useMemoCache=vn;$o.useHostTransitionStatus=vn;$o.useFormState=vn;$o.useActionState=vn;$o.useOptimistic=vn;var _d={readContext:$i,use:e5,useCallback:function(e,t){return dr().memoizedState=[e,t===void 0?null:t],e},useContext:$i,useEffect:FI,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,QU(4194308,4,tO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return QU(4194308,4,e,t)},useInsertionEffect:function(e,t){QU(4,2,e,t)},useMemo:function(e,t){var n=dr();t=t===void 0?null:t;var i=e();if(Ku){Kl(!0);try{e()}finally{Kl(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=dr();if(n!==void 0){var r=n(t);if(Ku){Kl(!0);try{n(t)}finally{Kl(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Dq.bind(null,Xe,e),[i.memoizedState,e]},useRef:function(e){var t=dr();return e={current:e},t.memoizedState=e},useState:function(e){e=P3(e);var t=e.queue,n=dO.bind(null,Xe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Jv,useDeferredValue:function(e,t){var n=dr();return ew(n,e,t)},useTransition:function(){var e=P3(!1);return e=oO.bind(null,Xe,e.queue,!0,!1),dr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Xe,r=dr();if(vt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Gt===null)throw Error(te(349));ut&60||BN(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,FI(HN.bind(null,i,s,e),[e]),i.flags|=2048,hh(9,zN.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=dr(),t=Gt.identifierPrefix;if(vt){var n=La,i=ka;n=(i&~(1<<32-Gr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=K2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return dr().memoizedState=Lq.bind(null,Xe)}};_d.useMemoCache=Zv;_d.useHostTransitionStatus=tw;_d.useFormState=WN;_d.useActionState=WN;_d.useOptimistic=function(e){var t=dr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=nw.bind(null,Xe,!0,n),n.dispatch=t,[e,t]};var Xc={readContext:$i,use:e5,useCallback:iO,useContext:$i,useEffect:Qv,useImperativeHandle:nO,useInsertionEffect:JN,useLayoutEffect:eO,useMemo:rO,useReducer:qU,useRef:QN,useState:function(){return qU(qa)},useDebugValue:Jv,useDeferredValue:function(e,t){var n=zn();return sO(n,Lt.memoizedState,e,t)},useTransition:function(){var e=qU(qa)[0],t=zn().memoizedState;return[typeof e=="boolean"?e:zm(e),t]},useSyncExternalStore:FN,useId:cO};Xc.useCacheRefresh=uO;Xc.useMemoCache=Zv;Xc.useHostTransitionStatus=tw;Xc.useFormState=KN;Xc.useActionState=KN;Xc.useOptimistic=function(e,t){var n=zn();return GN(n,Lt,e,t)};var Td={readContext:$i,use:e5,useCallback:iO,useContext:$i,useEffect:Qv,useImperativeHandle:nO,useInsertionEffect:JN,useLayoutEffect:eO,useMemo:rO,useReducer:h8,useRef:QN,useState:function(){return h8(qa)},useDebugValue:Jv,useDeferredValue:function(e,t){var n=zn();return Lt===null?ew(n,e,t):sO(n,Lt.memoizedState,e,t)},useTransition:function(){var e=h8(qa)[0],t=zn().memoizedState;return[typeof e=="boolean"?e:zm(e),t]},useSyncExternalStore:FN,useId:cO};Td.useCacheRefresh=uO;Td.useMemoCache=Zv;Td.useHostTransitionStatus=tw;Td.useFormState=qN;Td.useActionState=qN;Td.useOptimistic=function(e,t){var n=zn();return Lt!==null?GN(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])};function g8(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Zt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var z3={isMounted:function(e){return(e=e._reactInternals)?qh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Xr(),r=sc(i);r.payload=t,n!=null&&(r.callback=n),t=oc(e,r,i),t!==null&&(ir(t,e,i),Z1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Xr(),r=sc(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=oc(e,r,i),t!==null&&(ir(t,e,i),Z1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xr(),i=sc(n);i.tag=2,t!=null&&(i.callback=t),t=oc(e,i,n),t!==null&&(ir(t,e,n),Z1(t,e,n))}};function BI(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!L0(n,i)||!L0(r,s):!0}function zI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&z3.enqueueReplaceState(t,t.state,null)}function Zu(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Zt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Z2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function gO(e){Z2(e)}function mO(e){console.error(e)}function pO(e){Z2(e)}function q2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function HI(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function H3(e,t,n){return n=sc(n),n.tag=3,n.payload={element:null},n.callback=function(){q2(e,t)},n}function UO(e){return e=sc(e),e.tag=3,e}function bO(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){HI(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){HI(t,n,i),typeof r!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Nq(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Hm(t,n,r,!0),n=Is.current,n!==null){switch(n.tag){case 13:return Bo===null?n7():n.alternate===null&&bn===0&&(bn=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===D3?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),x8(e,i,r)),!1;case 22:return n.flags|=65536,i===D3?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),x8(e,i,r)),!1}throw Error(te(435,n.tag))}return x8(e,i,r),n7(),!1}if(vt)return t=Is.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==L3&&(e=Error(te(422),{cause:i}),D0(ds(e,n)))):(i!==L3&&(t=Error(te(423),{cause:i}),D0(ds(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=ds(i,n),r=H3(e.stateNode,i,r),E8(e,r),bn!==4&&(bn=2)),!1;var s=Error(te(520),{cause:i});if(s=ds(s,n),e0===null?e0=[s]:e0.push(s),bn!==4&&(bn=2),t===null)return!0;i=ds(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=H3(n.stateNode,i,e),E8(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(lc===null||!lc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=UO(r),bO(r,e,n,i),E8(n,r),!1}n=n.return}while(n!==null);return!1}var yO=Error(te(461)),di=!1;function yi(e,t,n,i){t.child=e===null?LN(t,null,n,i):Wu(t,e.child,n,i)}function VI(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return qu(t),i=Yv(e,t,n,o,s,r),a=jv(),e!==null&&!di?(Wv(e,t,r),Qa(e,t,r)):(vt&&a&&zv(t),t.flags|=1,yi(e,t,i,r),t.child)}function $I(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!aw(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,EO(e,t,s,i,r)):(e=e2(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!iw(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:L0,n(o,i)&&e.ref===t.ref)return Qa(e,t,r)}return t.flags|=1,e=ac(s,i),e.ref=t.ref,e.return=t,t.child=e}function EO(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(L0(s,i)&&e.ref===t.ref)if(di=!1,t.pendingProps=i=s,iw(e,r))e.flags&131072&&(di=!0);else return t.lanes=e.lanes,Qa(e,t,r)}return V3(e,t,n,i,r)}function vO(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(K1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return GI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ZU(t,o!==null?o.cachePool:null),o!==null?LI(t,o):N3(),DN(t);else return t.lanes=t.childLanes=536870912,GI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(ZU(t,o.cachePool),LI(t,o),$l(),t.memoizedState=null):(e!==null&&ZU(t,null),N3(),$l());return yi(e,t,r,n),t.child}function GI(e,t,n,i){var r=Gv();return r=r===null?null:{parent:Zn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&ZU(t,null),N3(),DN(t),e!==null&&Hm(e,t,i,!0),null}function K1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function V3(e,t,n,i,r){return qu(t),n=Yv(e,t,n,i,void 0,r),i=jv(),e!==null&&!di?(Wv(e,t,r),Qa(e,t,r)):(vt&&i&&zv(t),t.flags|=1,yi(e,t,n,r),t.child)}function XI(e,t,n,i,r,s){return qu(t),t.updateQueue=null,n=PN(t,i,n,r),ON(e),i=jv(),e!==null&&!di?(Wv(e,t,s),Qa(e,t,s)):(vt&&i&&zv(t),t.flags|=1,yi(e,t,n,s),t.child)}function YI(e,t,n,i,r){if(qu(t),t.stateNode===null){var s=_f,o=n.contextType;typeof o=="object"&&o!==null&&(s=$i(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=z3,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},rw(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?$i(o):_f,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(g8(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&z3.enqueueReplaceState(s,s.state,null),Q1(t,i,s,r),q1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=Zu(n,a);s.props=l;var c=s.context,u=n.contextType;o=_f,typeof u=="object"&&u!==null&&(o=$i(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&zI(t,s,i,o),Ol=!1;var f=t.memoizedState;s.state=f,Q1(t,i,s,r),q1(),c=t.memoizedState,a||f!==c||Ol?(typeof d=="function"&&(g8(t,n,d,i),c=t.memoizedState),(l=Ol||BI(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,W3(e,t),o=t.memoizedProps,u=Zu(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=_f,typeof c=="object"&&c!==null&&(l=$i(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&zI(t,s,i,l),Ol=!1,f=t.memoizedState,s.state=f,Q1(t,i,s,r),q1();var h=t.memoizedState;o!==d||f!==h||Ol||e!==null&&e.dependencies!==null&&Q2(e.dependencies)?(typeof a=="function"&&(g8(t,n,a,i),h=t.memoizedState),(u=Ol||BI(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&Q2(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,K1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Wu(t,e.child,null,r),t.child=Wu(t,null,n,r)):yi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Qa(e,t,r),e}function jI(e,t,n,i){return Fm(),t.flags|=256,yi(e,t,n,i),t.child}var m8={dehydrated:null,treeContext:null,retryLane:0};function p8(e){return{baseLanes:e,cachePool:NN()}}function U8(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ps),e}function wO(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(qn.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(vt){if(r?Vl(t):$l(),vt){var a=wi,l;if(l=a){e:{for(l=a,a=Ao;l.nodeType!==8;){if(!a){a=null;break e}if(l=qs(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:ku!==null?{id:ka,overflow:La}:null,retryLane:536870912},l=ms(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Ji=t,wi=null,l=!0):l=!1}l||ju(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;Da(t)}return a=i.children,i=i.fallback,r?($l(),r=t.mode,a=G3({mode:"hidden",children:a},r),i=Du(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=p8(n),r.childLanes=U8(e,o,n),t.memoizedState=m8,i):(Vl(t),$3(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(Vl(t),t.flags&=-257,t=b8(e,t,n)):t.memoizedState!==null?($l(),t.child=e.child,t.flags|=128,t=null):($l(),r=i.fallback,a=t.mode,i=G3({mode:"visible",children:i.children},a),r=Du(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Wu(t,e.child,null,n),i=t.child,i.memoizedState=p8(n),i.childLanes=U8(e,o,n),t.memoizedState=m8,t=r);else if(Vl(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(te(419)),i.stack="",i.digest=o,D0({value:i,source:null,stack:null}),t=b8(e,t,n)}else if(di||Hm(e,t,n,!1),o=(n&e.childLanes)!==0,di||o){if(o=Gt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,_c(e,i),ir(o,e,i),yO}a.data==="$?"||n7(),t=b8(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=Zq.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,wi=qs(a.nextSibling),Ji=t,vt=!0,Xs=null,Ao=!1,e!==null&&(ls[cs++]=ka,ls[cs++]=La,ls[cs++]=ku,ka=e.id,La=e.overflow,ku=t),t=$3(t,i.children),t.flags|=4096);return t}return r?($l(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=ac(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=ac(c,r):(r=Du(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=p8(n):(l=a.cachePool,l!==null?(c=Zn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=NN(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=U8(e,o,n),t.memoizedState=m8,i):(Vl(t),n=e.child,e=n.sibling,n=ac(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function $3(e,t){return t=G3({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function G3(e,t){return GO(e,t,0,null)}function b8(e,t,n){return Wu(t,e.child,null,n),e=$3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function WI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Y3(e.return,t,n)}function y8(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function _O(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(yi(e,t,i.children,n),i=qn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&WI(e,n,t);else if(e.tag===19)WI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(nn(qn,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&j2(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),y8(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&j2(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}y8(t,!0,n,null,s);break;case"together":y8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ic|=t.lanes,!(n&t.childLanes))if(e!==null){if(Hm(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=ac(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ac(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iw(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Q2(e)))}function Oq(e,t,n){switch(t.tag){case 3:F2(t,t.stateNode.containerInfo),Gl(t,Zn,e.memoizedState.cache),Fm();break;case 27:case 5:T3(t);break;case 4:F2(t,t.stateNode.containerInfo);break;case 10:Gl(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Vl(t),t.flags|=128,null):n&t.child.childLanes?wO(e,t,n):(Vl(t),e=Qa(e,t,n),e!==null?e.sibling:null);Vl(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Hm(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return _O(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nn(qn,qn.current),i)break;return null;case 22:case 23:return t.lanes=0,vO(e,t,n);case 24:Gl(t,Zn,e.memoizedState.cache)}return Qa(e,t,n)}function TO(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)di=!0;else{if(!iw(e,n)&&!(t.flags&128))return di=!1,Oq(e,t,n);di=!!(e.flags&131072)}else di=!1,vt&&t.flags&1048576&&AN(t,X2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")aw(i)?(e=Zu(i,e),t.tag=1,t=YI(null,t,i,e,n)):(t.tag=0,t=V3(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Cv){t.tag=11,t=VI(null,t,i,e,n);break e}else if(r===Av){t.tag=14,t=$I(null,t,i,e,n);break e}}throw t=w3(i)||i,Error(te(306,t,""))}}return t;case 0:return V3(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Zu(i,t.pendingProps),YI(e,t,i,r,n);case 3:e:{if(F2(t,t.stateNode.containerInfo),e===null)throw Error(te(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,W3(e,t),Q1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Gl(t,Zn,s),s!==r.cache&&j3(t,[Zn],n,!0),q1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=jI(e,t,s,n);break e}else if(s!==i){i=ds(Error(te(424)),t),D0(i),t=jI(e,t,s,n);break e}else for(wi=qs(t.stateNode.containerInfo.firstChild),Ji=t,vt=!0,Xs=null,Ao=!0,n=LN(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fm(),s===i){t=Qa(e,t,n);break e}yi(e,t,s,n)}t=t.child}return t;case 26:return K1(e,t),e===null?(n=fx(t.type,null,t.pendingProps,null))?t.memoizedState=n:vt||(n=t.type,e=t.pendingProps,i=sb(rc.current).createElement(n),i[Vi]=t,i[Er]=e,_i(i,n,e),ci(i),t.stateNode=i):t.memoizedState=fx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return T3(t),e===null&&vt&&(i=t.stateNode=lP(t.type,t.pendingProps,rc.current),Ji=t,Ao=!0,wi=qs(i.firstChild)),i=t.pendingProps.children,e!==null||vt?yi(e,t,i,n):t.child=Wu(t,null,i,n),K1(e,t),t.child;case 5:return e===null&&vt&&((r=i=wi)&&(i=fQ(i,t.type,t.pendingProps,Ao),i!==null?(t.stateNode=i,Ji=t,wi=qs(i.firstChild),Ao=!1,r=!0):r=!1),r||ju(t)),T3(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,a7(r,s)?i=null:o!==null&&a7(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=Yv(e,t,Aq,null,null,n),z0._currentValue=r),K1(e,t),yi(e,t,i,n),t.child;case 6:return e===null&&vt&&((e=n=wi)&&(n=hQ(n,t.pendingProps,Ao),n!==null?(t.stateNode=n,Ji=t,wi=null,e=!0):e=!1),e||ju(t)),null;case 13:return wO(e,t,n);case 4:return F2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Wu(t,null,i,n):yi(e,t,i,n),t.child;case 11:return VI(e,t,t.type,t.pendingProps,n);case 7:return yi(e,t,t.pendingProps,n),t.child;case 8:return yi(e,t,t.pendingProps.children,n),t.child;case 12:return yi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Gl(t,t.type,i.value),yi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,qu(t),r=$i(r),i=i(r),t.flags|=1,yi(e,t,i,n),t.child;case 14:return $I(e,t,t.type,t.pendingProps,n);case 15:return EO(e,t,t.type,t.pendingProps,n);case 19:return _O(e,t,n);case 22:return vO(e,t,n);case 24:return qu(t),i=$i(Zn),e===null?(r=Gv(),r===null&&(r=Gt,s=$v(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},rw(t),Gl(t,Zn,r)):(e.lanes&n&&(W3(e,t),Q1(t,null,null,n),q1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Gl(t,Zn,i)):(i=s.cache,Gl(t,Zn,i),i!==r.cache&&j3(t,[Zn],n,!0))),yi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(te(156,t.tag))}var X3=ia(null),Sd=null,Na=null;function Gl(e,t,n){nn(X3,t._currentValue),t._currentValue=n}function Ba(e){e._currentValue=X3.current,hi(X3)}function Y3(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function j3(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Y3(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Y3(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function Hm(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(te(387));if(o=o.memoizedProps,o!==null){var a=r.type;Wr(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===P2.current){if(o=r.alternate,o===null)throw Error(te(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(z0):e=[z0])}r=r.return}e!==null&&j3(t,e,n,i),t.flags|=262144}function Q2(e){for(e=e.firstContext;e!==null;){if(!Wr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qu(e){Sd=e,Na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $i(e){return SO(Sd,e)}function Zp(e,t){return Sd===null&&qu(e),SO(e,t)}function SO(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Na===null){if(e===null)throw Error(te(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return n}var Ol=!1;function rw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function W3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sc(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,un&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=$2(e),CN(e,null,n),t}return Q6(e,i,t,n),$2(e)}function Z1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,tN(e,n)}}function E8(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var K3=!1;function q1(){if(K3){var e=Gf;if(e!==null)throw e}}function Q1(e,t,n,i){K3=!1;var r=e.updateQueue;Ol=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(ut&f)===f:(i&f)===f){f!==0&&f===fh&&(K3=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var U=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(U,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(U,d,f):m,f==null)break e;d=Zt({},d,f);break e;case 2:Ol=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Ic|=o,e.lanes=o,e.memoizedState=d}}function IO(e,t){if(typeof e!="function")throw Error(te(191,e));e.call(t)}function xO(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)IO(n[e],t)}function Vm(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Ft(t,t.return,a)}}function Sc(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Ft(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Ft(t,t.return,c)}}function CO(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{xO(t,n)}catch(i){Ft(e,e.return,i)}}}function AO(e,t,n){n.props=Zu(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ft(e,t,i)}}function vu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Ft(e,t,s)}}function Or(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ft(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ft(e,t,r)}else n.current=null}function MO(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ft(e,e.return,r)}}function KI(e,t,n){try{var i=e.stateNode;aQ(i,e.type,n,t),i[Er]=t}catch(r){Ft(e,e.return,r)}}function RO(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function v8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||RO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Z3(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=s5));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(Z3(e,t,n),e=e.sibling;e!==null;)Z3(e,t,n),e=e.sibling}function J2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(J2(e,t,n),e=e.sibling;e!==null;)J2(e,t,n),e=e.sibling}var Sa=!1,Un=!1,w8=!1,ZI=typeof WeakSet=="function"?WeakSet:Set,li=null,qI=!1;function Pq(e,t){if(e=e.containerInfo,s7=cb,e=vN(e),Pv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(o7={focusedElem:e,selectionRange:n},cb=!1,li=t;li!==null;)if(t=li,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,li=e;else for(;li!==null;){switch(t=li,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=Zu(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Ft(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)l7(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":l7(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(te(163))}if(e=t.sibling,e!==null){e.return=t.return,li=e;break}li=t.return}return m=qI,qI=!1,m}function kO(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:fa(e,n),i&4&&Vm(5,n);break;case 1:if(fa(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Ft(n,n.return,a)}else{var r=Zu(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ft(n,n.return,a)}}i&64&&CO(n),i&512&&vu(n,n.return);break;case 3:if(fa(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{xO(i,e)}catch(a){Ft(n,n.return,a)}}break;case 26:fa(e,n),i&512&&vu(n,n.return);break;case 27:case 5:fa(e,n),t===null&&i&4&&MO(n),i&512&&vu(n,n.return);break;case 12:fa(e,n);break;case 13:fa(e,n),i&4&&NO(e,n);break;case 22:if(r=n.memoizedState!==null||Sa,!r){t=t!==null&&t.memoizedState!==null||Un;var s=Sa,o=Un;Sa=r,(Un=t)&&!o?Ml(e,n,(n.subtreeFlags&8772)!==0):fa(e,n),Sa=s,Un=o}i&512&&(n.memoizedProps.mode==="manual"?vu(n,n.return):Or(n,n.return));break;default:fa(e,n)}}function LO(e){var t=e.alternate;t!==null&&(e.alternate=null,LO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ln=null,Mr=!1;function da(e,t,n){for(n=n.child;n!==null;)DO(e,t,n),n=n.sibling}function DO(e,t,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Dm,n)}catch{}switch(n.tag){case 26:Un||Or(n,t),da(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Un||Or(n,t);var i=Ln,r=Mr;for(Ln=n.stateNode,da(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Rv(n),Ln=i,Mr=r;break;case 5:Un||Or(n,t);case 6:r=Ln;var s=Mr;if(Ln=null,da(e,t,n),Ln=r,Mr=s,Ln!==null)if(Mr)try{e=Ln,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Ft(n,t,o)}else try{Ln.removeChild(n.stateNode)}catch(o){Ft(n,t,o)}break;case 18:Ln!==null&&(Mr?(t=Ln,n=n.stateNode,t.nodeType===8?D8(t.parentNode,n):t.nodeType===1&&D8(t,n),$0(t)):D8(Ln,n.stateNode));break;case 4:i=Ln,r=Mr,Ln=n.stateNode.containerInfo,Mr=!0,da(e,t,n),Ln=i,Mr=r;break;case 0:case 11:case 14:case 15:Un||Sc(2,n,t),Un||Sc(4,n,t),da(e,t,n);break;case 1:Un||(Or(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&AO(n,t,i)),da(e,t,n);break;case 21:da(e,t,n);break;case 22:Un||Or(n,t),Un=(i=Un)||n.memoizedState!==null,da(e,t,n),Un=i;break;default:da(e,t,n)}}function NO(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$0(e)}catch(n){Ft(t,t.return,n)}}function Fq(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ZI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ZI),t;default:throw Error(te(435,e.tag))}}function _8(e,t){var n=Fq(e);t.forEach(function(i){var r=qq.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Jr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:Ln=a.stateNode,Mr=!1;break e;case 3:Ln=a.stateNode.containerInfo,Mr=!0;break e;case 4:Ln=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(Ln===null)throw Error(te(160));DO(s,o,r),Ln=null,Mr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)OO(t,e),t=t.sibling}var Vs=null;function OO(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Jr(t,e),es(e),i&4&&(Sc(3,e,e.return),Vm(3,e),Sc(5,e,e.return));break;case 1:Jr(t,e),es(e),i&512&&(Un||n===null||Or(n,n.return)),i&64&&Sa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Vs;if(Jr(t,e),es(e),i&512&&(Un||n===null||Or(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[M0]||s[Vi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),_i(s,i,n),s[Vi]=e,ci(s),i=s;break e;case"link":var o=gx("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),_i(s,i,n),r.head.appendChild(s);break;case"meta":if(o=gx("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),_i(s,i,n),r.head.appendChild(s);break;default:throw Error(te(468,i))}s[Vi]=e,ci(s),i=s}e.stateNode=i}else mx(r,e.type,e.stateNode);else e.stateNode=hx(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?mx(r,e.type,e.stateNode):hx(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&KI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[M0]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);_i(r,d,s),r[Vi]=e,r[Er]=s}catch(m){Ft(e,e.return,m)}}case 5:if(Jr(t,e),es(e),i&512&&(Un||n===null||Or(n,n.return)),e.flags&32){r=e.stateNode;try{uh(r,"")}catch(m){Ft(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,KI(e,r,n!==null?n.memoizedProps:r)),i&1024&&(w8=!0);break;case 6:if(Jr(t,e),es(e),i&4){if(e.stateNode===null)throw Error(te(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Ft(e,e.return,m)}}break;case 3:if(n2=null,r=Vs,Vs=ob(t.containerInfo),Jr(t,e),Vs=r,es(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$0(t.containerInfo)}catch(m){Ft(e,e.return,m)}w8&&(w8=!1,PO(e));break;case 4:i=Vs,Vs=ob(e.stateNode.containerInfo),Jr(t,e),es(e),Vs=i;break;case 12:Jr(t,e),es(e);break;case 13:Jr(t,e),es(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(uw=Fo()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_8(e,i)));break;case 22:if(i&512&&(Un||n===null||Or(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=Sa,d=Un,Sa=u||l,Un=d||c,Jr(t,e),Un=d,Sa=u,es(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=Sa||Un,n===null||c||t||rf(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Ft(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Ft(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,_8(e,n))));break;case 19:Jr(t,e),es(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_8(e,i)));break;case 21:break;default:Jr(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(RO(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 27:var r=i.stateNode,s=v8(e);J2(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(uh(o,""),i.flags&=-33);var a=v8(e);J2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=v8(e);Z3(e,c,l);break;default:throw Error(te(161))}}}catch(u){Ft(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PO(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;PO(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kO(e,t.alternate,t),t=t.sibling}function rf(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Sc(4,t,t.return),rf(t);break;case 1:Or(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&AO(t,t.return,n),rf(t);break;case 26:case 27:case 5:Or(t,t.return),rf(t);break;case 22:Or(t,t.return),t.memoizedState===null&&rf(t);break;default:rf(t)}e=e.sibling}}function Ml(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Ml(r,s,n),Vm(4,s);break;case 1:if(Ml(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ft(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)IO(l[r],a)}catch(c){Ft(i,i.return,c)}}n&&o&64&&CO(s),vu(s,s.return);break;case 26:case 27:case 5:Ml(r,s,n),n&&i===null&&o&4&&MO(s),vu(s,s.return);break;case 12:Ml(r,s,n);break;case 13:Ml(r,s,n),n&&o&4&&NO(r,s);break;case 22:s.memoizedState===null&&Ml(r,s,n),vu(s,s.return);break;default:Ml(r,s,n)}t=t.sibling}}function sw(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Bm(n))}function ow(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bm(e))}function _l(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)FO(e,t,n,i),t=t.sibling}function FO(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:_l(e,t,n,i),r&2048&&Vm(9,t);break;case 3:_l(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bm(e)));break;case 12:if(r&2048){_l(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Ft(t,t.return,l)}}else _l(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?_l(e,t,n,i):J1(e,t):s._visibility&4?_l(e,t,n,i):(s._visibility|=4,sf(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&sw(t.alternate,t);break;case 24:_l(e,t,n,i),r&2048&&ow(t.alternate,t);break;default:_l(e,t,n,i)}}function sf(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:sf(s,o,a,l,r),Vm(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?sf(s,o,a,l,r):J1(s,o):(u._visibility|=4,sf(s,o,a,l,r)),r&&c&2048&&sw(o.alternate,o);break;case 24:sf(s,o,a,l,r),r&&c&2048&&ow(o.alternate,o);break;default:sf(s,o,a,l,r)}t=t.sibling}}function J1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:J1(n,i),r&2048&&sw(i.alternate,i);break;case 24:J1(n,i),r&2048&&ow(i.alternate,i);break;default:J1(n,i)}t=t.sibling}}var y1=8192;function $d(e){if(e.subtreeFlags&y1)for(e=e.child;e!==null;)BO(e),e=e.sibling}function BO(e){switch(e.tag){case 26:$d(e),e.flags&y1&&e.memoizedState!==null&&IQ(Vs,e.memoizedState,e.memoizedProps);break;case 5:$d(e);break;case 3:case 4:var t=Vs;Vs=ob(e.stateNode.containerInfo),$d(e),Vs=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=y1,y1=16777216,$d(e),y1=t):$d(e));break;default:$d(e)}}function zO(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gg(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];li=i,VO(i,e)}zO(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)HO(e),e=e.sibling}function HO(e){switch(e.tag){case 0:case 11:case 15:Gg(e),e.flags&2048&&Sc(9,e,e.return);break;case 3:Gg(e);break;case 12:Gg(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,JU(e)):Gg(e);break;default:Gg(e)}}function JU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];li=i,VO(i,e)}zO(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Sc(8,t,t.return),JU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,JU(t));break;default:JU(t)}e=e.sibling}}function VO(e,t){for(;li!==null;){var n=li;switch(n.tag){case 0:case 11:case 15:Sc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Bm(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,li=i;else e:for(n=e;li!==null;){i=li;var r=i.sibling,s=i.return;if(LO(i),i===n){li=null;break e}if(r!==null){r.return=s,li=r;break e}li=s}}}function Bq(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(e,t,n,i){return new Bq(e,t,n,i)}function aw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ac(e,t){var n=e.alternate;return n===null?(n=ms(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $O(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function e2(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")aw(e)&&(o=1);else if(typeof e=="string")o=TQ(e,n,Po.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pf:return Du(n.children,r,s,t);case GD:o=8,r|=24;break;case y3:return e=ms(12,n,t,r|2),e.elementType=y3,e.lanes=s,e;case E3:return e=ms(13,n,t,r),e.elementType=E3,e.lanes=s,e;case v3:return e=ms(19,n,t,r),e.elementType=v3,e.lanes=s,e;case YD:return GO(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uZ:case Ra:o=10;break e;case XD:o=9;break e;case Cv:o=11;break e;case Av:o=14;break e;case Nl:o=16,i=null;break e}o=29,n=Error(te(130,e===null?"null":typeof e,"")),i=null}return t=ms(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Du(e,t,n,i){return e=ms(7,e,i,t),e.lanes=n,e}function GO(e,t,n,i){e=ms(22,e,i,t),e.elementType=YD,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(te(456));if(!(r._pendingVisibility&2)){var o=_c(s,2);o!==null&&(r._pendingVisibility|=2,ir(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(te(456));if(r._pendingVisibility&2){var o=_c(s,2);o!==null&&(r._pendingVisibility&=-3,ir(o,s,2))}}};return e.stateNode=r,e}function T8(e,t,n){return e=ms(6,e,null,t),e.lanes=n,e}function S8(e,t,n){return t=ms(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ha(e){e.flags|=4}function QI(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!dP(t)){if(t=Is.current,t!==null&&((ut&4194176)===ut?Bo!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==Bo))throw Y1=D3,MN;e.flags|=8192}}function qp(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?JD():536870912,e.lanes|=t,gh|=t)}function Xg(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function zq(e,t,n){var i=t.pendingProps;switch(Hv(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(t),null;case 1:return sn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ba(Zn),lh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Vg(t)?ha(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xs!==null&&(t7(Xs),Xs=null))),sn(t),null;case 26:return n=t.memoizedState,e===null?(ha(t),n!==null?(sn(t),QI(t,n)):(sn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ha(t),sn(t),QI(t,n)):(sn(t),t.flags&=-16777217):(e.memoizedProps!==i&&ha(t),sn(t),t.flags&=-16777217),null;case 27:B2(t),n=rc.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ha(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return sn(t),null}e=Po.current,Vg(t)?CI(t):(e=lP(r,i,n),t.stateNode=e,ha(t))}return sn(t),null;case 5:if(B2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ha(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return sn(t),null}if(e=Po.current,Vg(t))CI(t);else{switch(r=sb(rc.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Vi]=t,e[Er]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(_i(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ha(t)}}return sn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ha(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(e=rc.current,Vg(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ji,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Vi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||sP(e.nodeValue,n)),e||ju(t)}else e=sb(e).createTextNode(i),e[Vi]=t,t.stateNode=e}return sn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Vg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(te(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[Vi]=t}else Fm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sn(t),r=!1}else Xs!==null&&(t7(Xs),Xs=null),r=!0;if(!r)return t.flags&256?(Da(t),t):(Da(t),null)}if(Da(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),qp(t,t.updateQueue),sn(t),null;case 4:return lh(),e===null&&hw(t.stateNode.containerInfo),sn(t),null;case 10:return Ba(t.type),sn(t),null;case 19:if(hi(qn),r=t.memoizedState,r===null)return sn(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Xg(r,!1);else{if(bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=j2(e),s!==null){for(t.flags|=128,Xg(r,!1),e=s.updateQueue,t.updateQueue=e,qp(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)$O(n,e),n=n.sibling;return nn(qn,qn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Fo()>eb&&(t.flags|=128,i=!0,Xg(r,!1),t.lanes=4194304)}else{if(!i)if(e=j2(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,qp(t,e),Xg(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!vt)return sn(t),null}else 2*Fo()-r.renderingStartTime>eb&&n!==536870912&&(t.flags|=128,i=!0,Xg(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Fo(),t.sibling=null,e=qn.current,nn(qn,i?e&1|2:e&1),t):(sn(t),null);case 22:case 23:return Da(t),Vv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(sn(t),t.subtreeFlags&6&&(t.flags|=8192)):sn(t),n=t.updateQueue,n!==null&&qp(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&hi(Lu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ba(Zn),sn(t),null;case 25:return null}throw Error(te(156,t.tag))}function Hq(e,t){switch(Hv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ba(Zn),lh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return B2(t),null;case 13:if(Da(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Fm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(qn),null;case 4:return lh(),null;case 10:return Ba(t.type),null;case 22:case 23:return Da(t),Vv(),e!==null&&hi(Lu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ba(Zn),null;case 25:return null;default:return null}}function XO(e,t){switch(Hv(t),t.tag){case 3:Ba(Zn),lh();break;case 26:case 27:case 5:B2(t);break;case 4:lh();break;case 13:Da(t);break;case 19:hi(qn);break;case 10:Ba(t.type);break;case 22:case 23:Da(t),Vv(),e!==null&&hi(Lu);break;case 24:Ba(Zn)}}var Vq={getCacheForType:function(e){var t=$i(Zn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},$q=typeof WeakMap=="function"?WeakMap:Map,un=0,Gt=null,Ze=null,ut=0,Vt=0,Rr=null,Ia=!1,eg=!1,lw=!1,Ja=0,bn=0,Ic=0,Nu=0,cw=0,ps=0,gh=0,e0=null,Mo=null,q3=!1,uw=0,eb=1/0,tb=null,lc=null,Qp=!1,gu=null,t0=0,Q3=0,J3=null,n0=0,e7=null;function Xr(){if(un&2&&ut!==0)return ut&-ut;if(ze.T!==null){var e=fh;return e!==0?e:fw()}return iN()}function YO(){ps===0&&(ps=!(ut&536870912)||vt?QD():536870912);var e=Is.current;return e!==null&&(e.flags|=32),ps}function ir(e,t,n){(e===Gt&&Vt===2||e.cancelPendingCommit!==null)&&(mh(e,0),xa(e,ut,ps,!1)),Om(e,n),(!(un&2)||e!==Gt)&&(e===Gt&&(!(un&2)&&(Nu|=n),bn===4&&xa(e,ut,ps,!1)),ra(e))}function jO(e,t,n){if(un&6)throw Error(te(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||Nm(e,t),r=i?Yq(e,t):I8(e,t,!0),s=i;do{if(r===0){eg&&!i&&xa(e,t,0,!1);break}else if(r===6)xa(e,t,0,!Ia);else{if(n=e.current.alternate,s&&!Gq(n)){r=I8(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=e0;var l=a.current.memoizedState.isDehydrated;if(l&&(mh(a,o).flags|=256),o=I8(a,o,!1),o!==2){if(lw&&!l){a.errorRecoveryDisabledLanes|=s,Nu|=s,r=4;break e}s=Mo,Mo=r,s!==null&&t7(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){mh(e,0),xa(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(te(345));case 4:if((t&4194176)===t){xa(i,t,ps,!Ia);break e}break;case 2:Mo=null;break;case 3:case 5:break;default:throw Error(te(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=uw+300-Fo(),10<s)){if(xa(i,t,ps,!Ia),j6(i,0)!==0)break e;i.timeoutHandle=aP(JI.bind(null,i,n,Mo,tb,q3,t,ps,Nu,gh,Ia,2,-0,0),s);break e}JI(i,n,Mo,tb,q3,t,ps,Nu,gh,Ia,0,-0,0)}}break}while(!0);ra(e)}function t7(e){Mo===null?Mo=e:Mo.push.apply(Mo,e)}function JI(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(B0={stylesheets:null,count:0,unsuspend:SQ},BO(t),t=xQ(),t!==null)){e.cancelPendingCommit=t(tx.bind(null,e,n,i,r,o,a,l,1,d,f)),xa(e,s,o,!c);return}tx(e,n,i,r,o,a,l,u,d,f)}function Gq(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Wr(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xa(e,t,n,i){t&=~cw,t&=~Nu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Gr(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&eN(e,n,t)}function i5(){return un&6?!0:($m(0),!1)}function dw(){if(Ze!==null){if(Vt===0)var e=Ze.return;else e=Ze,Na=Sd=null,Kv(e),$f=null,N0=0,e=Ze;for(;e!==null;)XO(e.alternate,e),e=e.return;Ze=null}}function mh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cQ(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),dw(),Gt=e,Ze=n=ac(e.current,null),ut=t,Vt=0,Rr=null,Ia=!1,eg=Nm(e,t),lw=!1,gh=ps=cw=Nu=Ic=bn=0,Mo=e0=null,q3=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Gr(i),s=1<<r;t|=e[r],i&=~s}return Ja=t,q6(),n}function WO(e,t){Xe=null,ze.H=$o,t===X1?(t=RI(),Vt=3):t===MN?(t=RI(),Vt=4):Vt=t===yO?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rr=t,Ze===null&&(bn=1,q2(e,ds(t,e.current)))}function KO(){var e=ze.H;return ze.H=$o,e===null?$o:e}function ZO(){var e=ze.A;return ze.A=Vq,e}function n7(){bn=4,Ia||(ut&4194176)!==ut&&Is.current!==null||(eg=!0),!(Ic&134217727)&&!(Nu&134217727)||Gt===null||xa(Gt,ut,ps,!1)}function I8(e,t,n){var i=un;un|=2;var r=KO(),s=ZO();(Gt!==e||ut!==t)&&(tb=null,mh(e,t)),t=!1;var o=bn;e:do try{if(Vt!==0&&Ze!==null){var a=Ze,l=Rr;switch(Vt){case 8:dw(),o=6;break e;case 3:case 2:case 6:Is.current===null&&(t=!0);var c=Vt;if(Vt=0,Rr=null,If(e,a,l,c),n&&eg){o=0;break e}break;default:c=Vt,Vt=0,Rr=null,If(e,a,l,c)}}Xq(),o=bn;break}catch(u){WO(e,u)}while(!0);return t&&e.shellSuspendCounter++,Na=Sd=null,un=i,ze.H=r,ze.A=s,Ze===null&&(Gt=null,ut=0,q6()),o}function Xq(){for(;Ze!==null;)qO(Ze)}function Yq(e,t){var n=un;un|=2;var i=KO(),r=ZO();Gt!==e||ut!==t?(tb=null,eb=Fo()+500,mh(e,t)):eg=Nm(e,t);e:do try{if(Vt!==0&&Ze!==null){t=Ze;var s=Rr;t:switch(Vt){case 1:Vt=0,Rr=null,If(e,t,s,1);break;case 2:if(MI(s)){Vt=0,Rr=null,ex(t);break}t=function(){Vt===2&&Gt===e&&(Vt=7),ra(e)},s.then(t,t);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:MI(s)?(Vt=0,Rr=null,ex(t)):(Vt=0,Rr=null,If(e,t,s,7));break;case 5:var o=null;switch(Ze.tag){case 26:o=Ze.memoizedState;case 5:case 27:var a=Ze;if(!o||dP(o)){Vt=0,Rr=null;var l=a.sibling;if(l!==null)Ze=l;else{var c=a.return;c!==null?(Ze=c,r5(c)):Ze=null}break t}}Vt=0,Rr=null,If(e,t,s,5);break;case 6:Vt=0,Rr=null,If(e,t,s,6);break;case 8:dw(),bn=6;break e;default:throw Error(te(462))}}jq();break}catch(u){WO(e,u)}while(!0);return Na=Sd=null,ze.H=i,ze.A=r,un=n,Ze!==null?0:(Gt=null,ut=0,q6(),bn)}function jq(){for(;Ze!==null&&!mZ();)qO(Ze)}function qO(e){var t=TO(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,t===null?r5(e):Ze=t}function ex(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=XI(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=XI(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:Kv(t);default:XO(n,t),t=Ze=$O(t,Ja),t=TO(n,t,Ja)}e.memoizedProps=e.pendingProps,t===null?r5(e):Ze=t}function If(e,t,n,i){Na=Sd=null,Kv(t),$f=null,N0=0;var r=t.return;try{if(Nq(e,r,t,n,ut)){bn=1,q2(e,ds(n,e.current)),Ze=null;return}}catch(s){if(r!==null)throw Ze=r,s;bn=1,q2(e,ds(n,e.current)),Ze=null;return}t.flags&32768?(vt||i===1?e=!0:eg||ut&536870912?e=!1:(Ia=e=!0,(i===2||i===3||i===6)&&(i=Is.current,i!==null&&i.tag===13&&(i.flags|=16384))),QO(t,e)):r5(t)}function r5(e){var t=e;do{if(t.flags&32768){QO(t,Ia);return}e=t.return;var n=zq(t.alternate,t,Ja);if(n!==null){Ze=n;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);bn===0&&(bn=5)}function QO(e,t){do{var n=Hq(e.alternate,e);if(n!==null){n.flags&=32767,Ze=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ze=e;return}Ze=e=n}while(e!==null);bn=6,Ze=null}function tx(e,t,n,i,r,s,o,a,l,c){var u=ze.T,d=Kt.p;try{Kt.p=2,ze.T=null,Wq(e,t,n,i,d,r,s,o,a,l,c)}finally{ze.T=u,Kt.p=d}}function Wq(e,t,n,i,r,s,o,a){do jf();while(gu!==null);if(un&6)throw Error(te(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=Fv,IZ(e,i,c,s,o,a),e===Gt&&(Ze=Gt=null,ut=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Qp||(Qp=!0,Q3=c,J3=n,Qq(z2,function(){return jf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=ze.T,ze.T=null,s=Kt.p,Kt.p=2,o=un,un|=4,Pq(e,l),OO(l,e),bq(o7,e.containerInfo),cb=!!s7,o7=s7=null,e.current=l,kO(e,l.alternate,l),pZ(),un=o,Kt.p=s,ze.T=n):e.current=l,Qp?(Qp=!1,gu=e,t0=i):JO(e,c),c=e.pendingLanes,c===0&&(lc=null),vZ(l.stateNode),ra(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return t0&3&&jf(),c=e.pendingLanes,i&4194218&&c&42?e===e7?n0++:(n0=0,e7=e):n0=0,$m(0),null}function JO(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bm(t)))}function jf(){if(gu!==null){var e=gu,t=Q3;Q3=0;var n=nN(t0),i=ze.T,r=Kt.p;try{if(Kt.p=32>n?32:n,ze.T=null,gu===null)var s=!1;else{n=J3,J3=null;var o=gu,a=t0;if(gu=null,t0=0,un&6)throw Error(te(331));var l=un;if(un|=4,HO(o.current),FO(o,o.current,a,n),un=l,$m(0,!1),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Dm,o)}catch{}s=!0}return s}finally{Kt.p=r,ze.T=i,JO(e,t)}}return!1}function nx(e,t,n){t=ds(n,t),t=H3(e.stateNode,t,2),e=oc(e,t,2),e!==null&&(Om(e,2),ra(e))}function Ft(e,t,n){if(e.tag===3)nx(e,e,n);else for(;t!==null;){if(t.tag===3){nx(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lc===null||!lc.has(i))){e=ds(n,e),n=UO(2),i=oc(t,n,2),i!==null&&(bO(n,i,t,e),Om(i,2),ra(i));break}}t=t.return}}function x8(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new $q;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(lw=!0,r.add(n),e=Kq.bind(null,e,t,n),t.then(e,e))}function Kq(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Gt===e&&(ut&n)===n&&(bn===4||bn===3&&(ut&62914560)===ut&&300>Fo()-uw?!(un&2)&&mh(e,0):cw|=n,gh===ut&&(gh=0)),ra(e)}function eP(e,t){t===0&&(t=JD()),e=_c(e,t),e!==null&&(Om(e,t),ra(e))}function Zq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eP(e,n)}function qq(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(te(314))}i!==null&&i.delete(t),eP(e,n)}function Qq(e,t){return Mv(e,t)}var nb=null,of=null,i7=!1,ib=!1,C8=!1,Ou=0;function ra(e){e!==of&&e.next===null&&(of===null?nb=of=e:of=of.next=e),ib=!0,i7||(i7=!0,eQ(Jq))}function $m(e,t){if(!C8&&ib){C8=!0;do for(var n=!1,i=nb;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Gr(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,ix(i,s))}else s=ut,s=j6(i,i===Gt?s:0),!(s&3)||Nm(i,s)||(n=!0,ix(i,s));i=i.next}while(n);C8=!1}}function Jq(){ib=i7=!1;var e=0;Ou!==0&&(lQ()&&(e=Ou),Ou=0);for(var t=Fo(),n=null,i=nb;i!==null;){var r=i.next,s=tP(i,t);s===0?(i.next=null,n===null?nb=r:n.next=r,r===null&&(of=n)):(n=i,(e!==0||s&3)&&(ib=!0)),i=r}$m(e)}function tP(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Gr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=SZ(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Gt,n=ut,n=j6(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&Vt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&r8(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Nm(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&r8(i),nN(n)){case 2:case 8:n=ZD;break;case 32:n=z2;break;case 268435456:n=qD;break;default:n=z2}return i=nP.bind(null,e),n=Mv(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&r8(i),e.callbackPriority=2,e.callbackNode=null,2}function nP(e,t){var n=e.callbackNode;if(jf()&&e.callbackNode!==n)return null;var i=ut;return i=j6(e,e===Gt?i:0),i===0?null:(jO(e,i,t),tP(e,Fo()),e.callbackNode!=null&&e.callbackNode===n?nP.bind(null,e):null)}function ix(e,t){if(jf())return null;jO(e,t,!0)}function eQ(e){uQ(function(){un&6?Mv(KD,e):e()})}function fw(){return Ou===0&&(Ou=QD()),Ou}function rx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jU(""+e)}function sx(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function tQ(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=rx((r[Er]||null).action),o=i.submitter;o&&(t=(t=o[Er]||null)?rx(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new W6("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ou!==0){var l=o?sx(r,o):new FormData(r);B3(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?sx(r,o):new FormData(r),B3(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var A8=0;A8<II.length;A8++){var M8=II[A8],nQ=M8.toLowerCase(),iQ=M8[0].toUpperCase()+M8.slice(1);fo(nQ,"on"+iQ)}fo(_N,"onAnimationEnd");fo(TN,"onAnimationIteration");fo(SN,"onAnimationStart");fo("dblclick","onDoubleClick");fo("focusin","onFocus");fo("focusout","onBlur");fo(Eq,"onTransitionRun");fo(vq,"onTransitionStart");fo(wq,"onTransitionCancel");fo(IN,"onTransitionEnd");ch("onMouseEnter",["mouseout","mouseover"]);ch("onMouseLeave",["mouseout","mouseover"]);ch("onPointerEnter",["pointerout","pointerover"]);ch("onPointerLeave",["pointerout","pointerover"]);Ed("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ed("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ed("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ed("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ed("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ed("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var P0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(P0));function iP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Z2(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Z2(u)}r.currentTarget=null,s=l}}}}function it(e,t){var n=t[I3];n===void 0&&(n=t[I3]=new Set);var i=e+"__bubble";n.has(i)||(rP(t,e,2,!1),n.add(i))}function R8(e,t,n){var i=0;t&&(i|=4),rP(n,e,i,t)}var Jp="_reactListening"+Math.random().toString(36).slice(2);function hw(e){if(!e[Jp]){e[Jp]=!0,rN.forEach(function(n){n!=="selectionchange"&&(rQ.has(n)||R8(n,!1,e),R8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jp]||(t[Jp]=!0,R8("selectionchange",!1,t))}}function rP(e,t,n,i){switch(pP(t)){case 2:var r=MQ;break;case 8:r=RQ;break;default:r=Uw}n=r.bind(null,t,n,e),r=void 0,!M3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function k8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Eu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}fN(function(){var c=s,u=Lv(n),d=[];e:{var f=xN.get(e);if(f!==void 0){var h=W6,m=e;switch(e){case"keypress":if(KU(n)===0)break e;case"keydown":case"keyup":h=qZ;break;case"focusin":m="focus",h=c8;break;case"focusout":m="blur",h=c8;break;case"beforeblur":case"afterblur":h=c8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=gI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=BZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=eq;break;case _N:case TN:case SN:h=VZ;break;case IN:h=nq;break;case"scroll":case"scrollend":h=PZ;break;case"wheel":h=rq;break;case"copy":case"cut":case"paste":h=GZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=pI;break;case"toggle":case"beforetoggle":h=oq}var p=(t&4)!==0,U=!p&&(e==="scroll"||e==="scrollend"),E=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,v;y!==null;){var w=y;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||E===null||(w=R0(y,E),w!=null&&p.push(F0(y,w,v))),U)break;y=y.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==A3&&(m=n.relatedTarget||n.fromElement)&&(Eu(m)||m[Qh]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Eu(m):null,m!==null&&(U=qh(m),p=m.tag,m!==U||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=gI,w="onMouseLeave",E="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=pI,w="onPointerLeave",E="onPointerEnter",y="pointer"),U=h==null?f:b1(h),v=m==null?f:b1(m),f=new p(w,y+"leave",h,n,u),f.target=U,f.relatedTarget=v,w=null,Eu(u)===c&&(p=new p(E,y+"enter",m,n,u),p.target=v,p.relatedTarget=U,w=p),U=w,h&&m)t:{for(p=h,E=m,y=0,v=p;v;v=Gd(v))y++;for(v=0,w=E;w;w=Gd(w))v++;for(;0<y-v;)p=Gd(p),y--;for(;0<v-y;)E=Gd(E),v--;for(;y--;){if(p===E||E!==null&&p===E.alternate)break t;p=Gd(p),E=Gd(E)}p=null}else p=null;h!==null&&ox(d,f,h,p,!1),m!==null&&U!==null&&ox(d,U,m,p,!0)}}e:{if(f=c?b1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=EI;else if(yI(f))if(bN)S=pq;else{S=gq;var M=hq}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&kv(c.elementType)&&(S=EI):S=mq;if(S&&(S=S(e,c))){UN(d,S,n,u);break e}M&&M(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&C3(f,"number",f.value)}switch(M=c?b1(c):window,e){case"focusin":(yI(M)||M.contentEditable==="true")&&(Ef=M,R3=c,G1=null);break;case"focusout":G1=R3=Ef=null;break;case"mousedown":k3=!0;break;case"contextmenu":case"mouseup":case"dragend":k3=!1,SI(d,n,u);break;case"selectionchange":if(yq)break;case"keydown":case"keyup":SI(d,n,u)}var _;if(Ov)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else yf?mN(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(gN&&n.locale!=="ko"&&(yf||T!=="onCompositionStart"?T==="onCompositionEnd"&&yf&&(_=hN()):(Zl=u,Dv="value"in Zl?Zl.value:Zl.textContent,yf=!0)),M=rb(c,T),0<M.length&&(T=new mI(T,e,null,n,u),d.push({event:T,listeners:M}),_?T.data=_:(_=pN(n),_!==null&&(T.data=_)))),(_=lq?cq(e,n):uq(e,n))&&(T=rb(c,"onBeforeInput"),0<T.length&&(M=new mI("onBeforeInput","beforeinput",null,n,u),d.push({event:M,listeners:T}),M.data=_)),tQ(d,e,c,n,u)}iP(d,t)})}function F0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rb(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=R0(e,n),r!=null&&i.unshift(F0(e,r,s)),r=R0(e,t),r!=null&&i.push(F0(e,r,s))),e=e.return}return i}function Gd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ox(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=R0(n,s),c!=null&&o.unshift(F0(n,c,l))):r||(c=R0(n,s),c!=null&&o.push(F0(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var sQ=/\r\n?/g,oQ=/\u0000|\uFFFD/g;function ax(e){return(typeof e=="string"?e:""+e).replace(sQ,`
`).replace(oQ,"")}function sP(e,t){return t=ax(t),ax(e)===t}function s5(){}function kt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||uh(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&uh(e,""+i);break;case"className":Xp(e,"class",i);break;case"tabIndex":Xp(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Xp(e,n,i);break;case"style":dN(e,i,s);break;case"data":if(t!=="object"){Xp(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=jU(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&kt(e,t,"name",r.name,r,null),kt(e,t,"formEncType",r.formEncType,r,null),kt(e,t,"formMethod",r.formMethod,r,null),kt(e,t,"formTarget",r.formTarget,r,null)):(kt(e,t,"encType",r.encType,r,null),kt(e,t,"method",r.method,r,null),kt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=jU(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=s5);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=jU(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),YU(e,"popover",i);break;case"xlinkActuate":ua(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ua(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ua(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ua(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ua(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ua(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ua(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ua(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ua(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":YU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=NZ.get(n)||n,YU(e,n,i))}}function r7(e,t,n,i,r,s){switch(n){case"style":dN(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"children":typeof i=="string"?uh(e,i):(typeof i=="number"||typeof i=="bigint")&&uh(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=s5);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sN.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Er]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):YU(e,n,i)}}}function _i(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:kt(e,t,s,o,n,null)}}r&&kt(e,t,"srcSet",n.srcSet,n,null),i&&kt(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(te(137,t));break;default:kt(e,t,i,u,n,null)}}lN(e,s,a,l,c,o,r,!1),H2(e);return;case"select":it("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:kt(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?Hf(e,!!i,t,!1):n!=null&&Hf(e,!!i,n,!0);return;case"textarea":it("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(te(91));break;default:kt(e,t,o,a,n,null)}uN(e,i,r,s),H2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:kt(e,t,l,i,n,null)}return;case"dialog":it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<P0.length;i++)it(P0[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:kt(e,t,c,i,n,null)}return;default:if(kv(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&r7(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&kt(e,t,a,i,n,null))}function aQ(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||kt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(te(137,t));break;default:h!==d&&kt(e,t,f,h,i,d)}}x3(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||kt(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&kt(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?Hf(e,!!n,f,!1):!!i!=!!n&&(t!=null?Hf(e,!!n,t,!0):Hf(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:kt(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(te(91));break;default:r!==s&&kt(e,t,o,r,i,s)}cN(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:kt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&kt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(te(137,t));break;default:kt(e,t,c,f,i,h)}return;default:if(kv(t)){for(var U in n)f=n[U],n.hasOwnProperty(U)&&f!==void 0&&!i.hasOwnProperty(U)&&r7(e,t,U,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||r7(e,t,u,f,i,h);return}}for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&kt(e,t,E,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||kt(e,t,d,f,i,h)}var s7=null,o7=null;function sb(e){return e.nodeType===9?e:e.ownerDocument}function lx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oP(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function a7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var L8=null;function lQ(){var e=window.event;return e&&e.type==="popstate"?e===L8?!1:(L8=e,!0):(L8=null,!1)}var aP=typeof setTimeout=="function"?setTimeout:void 0,cQ=typeof clearTimeout=="function"?clearTimeout:void 0,cx=typeof Promise=="function"?Promise:void 0,uQ=typeof queueMicrotask=="function"?queueMicrotask:typeof cx<"u"?function(e){return cx.resolve(null).then(e).catch(dQ)}:aP;function dQ(e){setTimeout(function(){throw e})}function D8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),$0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$0(t)}function l7(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":l7(n),Rv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function fQ(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[M0])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=qs(e.nextSibling),e===null)break}return null}function hQ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qs(e.nextSibling),e===null))return null;return e}function qs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function ux(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function lP(e,t,n){switch(t=sb(n),e){case"html":if(e=t.documentElement,!e)throw Error(te(452));return e;case"head":if(e=t.head,!e)throw Error(te(453));return e;case"body":if(e=t.body,!e)throw Error(te(454));return e;default:throw Error(te(451))}}var xs=new Map,dx=new Set;function ob(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var ml=Kt.d;Kt.d={f:gQ,r:mQ,D:pQ,C:UQ,L:bQ,m:yQ,X:vQ,S:EQ,M:wQ};function gQ(){var e=ml.f(),t=i5();return e||t}function mQ(e){var t=Jh(e);t!==null&&t.tag===5&&t.type==="form"?lO(t):ml.r(e)}var tg=typeof document>"u"?null:document;function cP(e,t,n){var i=tg;if(i&&typeof t=="string"&&t){var r=us(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),dx.has(r)||(dx.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),_i(t,"link",e),ci(t),i.head.appendChild(t)))}}function pQ(e){ml.D(e),cP("dns-prefetch",e,null)}function UQ(e,t){ml.C(e,t),cP("preconnect",e,t)}function bQ(e,t,n){ml.L(e,t,n);var i=tg;if(i&&e&&t){var r='link[rel="preload"][as="'+us(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+us(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+us(n.imageSizes)+'"]')):r+='[href="'+us(e)+'"]';var s=r;switch(t){case"style":s=ph(e);break;case"script":s=ng(e)}xs.has(s)||(e=Zt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),xs.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Gm(s))||t==="script"&&i.querySelector(Xm(s))||(t=i.createElement("link"),_i(t,"link",e),ci(t),i.head.appendChild(t)))}}function yQ(e,t){ml.m(e,t);var n=tg;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+us(i)+'"][href="'+us(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ng(e)}if(!xs.has(s)&&(e=Zt({rel:"modulepreload",href:e},t),xs.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xm(s)))return}i=n.createElement("link"),_i(i,"link",e),ci(i),n.head.appendChild(i)}}}function EQ(e,t,n){ml.S(e,t,n);var i=tg;if(i&&e){var r=zf(i).hoistableStyles,s=ph(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Gm(s)))a.loading=5;else{e=Zt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xs.get(s))&&gw(e,n);var l=o=i.createElement("link");ci(l),_i(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,t2(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function vQ(e,t){ml.X(e,t);var n=tg;if(n&&e){var i=zf(n).hoistableScripts,r=ng(e),s=i.get(r);s||(s=n.querySelector(Xm(r)),s||(e=Zt({src:e,async:!0},t),(t=xs.get(r))&&mw(e,t),s=n.createElement("script"),ci(s),_i(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function wQ(e,t){ml.M(e,t);var n=tg;if(n&&e){var i=zf(n).hoistableScripts,r=ng(e),s=i.get(r);s||(s=n.querySelector(Xm(r)),s||(e=Zt({src:e,async:!0,type:"module"},t),(t=xs.get(r))&&mw(e,t),s=n.createElement("script"),ci(s),_i(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function fx(e,t,n,i){var r=(r=rc.current)?ob(r):null;if(!r)throw Error(te(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ph(n.href),n=zf(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ph(n.href);var s=zf(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(Gm(e)))&&!s._p&&(o.instance=s,o.state.loading=5),xs.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xs.set(e,n),s||_Q(r,e,n,o.state))),t&&i===null)throw Error(te(528,""));return o}if(t&&i!==null)throw Error(te(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ng(n),n=zf(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,e))}}function ph(e){return'href="'+us(e)+'"'}function Gm(e){return'link[rel="stylesheet"]['+e+"]"}function uP(e){return Zt({},e,{"data-precedence":e.precedence,precedence:null})}function _Q(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),_i(t,"link",n),ci(t),e.head.appendChild(t))}function ng(e){return'[src="'+us(e)+'"]'}function Xm(e){return"script[async]"+e}function hx(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+us(n.href)+'"]');if(i)return t.instance=i,ci(i),i;var r=Zt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ci(i),_i(i,"style",r),t2(i,n.precedence,e),t.instance=i;case"stylesheet":r=ph(n.href);var s=e.querySelector(Gm(r));if(s)return t.state.loading|=4,t.instance=s,ci(s),s;i=uP(n),(r=xs.get(r))&&gw(i,r),s=(e.ownerDocument||e).createElement("link"),ci(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),_i(s,"link",i),t.state.loading|=4,t2(s,n.precedence,e),t.instance=s;case"script":return s=ng(n.src),(r=e.querySelector(Xm(s)))?(t.instance=r,ci(r),r):(i=n,(r=xs.get(s))&&(i=Zt({},n),mw(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ci(r),_i(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(te(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,t2(i,n.precedence,e));return t.instance}function t2(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function gw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function mw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var n2=null;function gx(e,t,n){if(n2===null){var i=new Map,r=n2=new Map;r.set(n,i)}else r=n2,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[M0]||s[Vi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function mx(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function TQ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function dP(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var B0=null;function SQ(){}function IQ(e,t,n){if(B0===null)throw Error(te(475));var i=B0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=ph(n.href),s=e.querySelector(Gm(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=ab.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ci(s);return}s=e.ownerDocument||e,n=uP(n),(r=xs.get(r))&&gw(n,r),s=s.createElement("link"),ci(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),_i(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=ab.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function xQ(){if(B0===null)throw Error(te(475));var e=B0;return e.stylesheets&&e.count===0&&c7(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&c7(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function ab(){if(this.count--,this.count===0){if(this.stylesheets)c7(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lb=null;function c7(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lb=new Map,t.forEach(CQ,e),lb=null,ab.call(e))}function CQ(e,t){if(!(t.state.loading&4)){var n=lb.get(e);if(n)var i=n.get(null);else{n=new Map,lb.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=ab.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var z0={$$typeof:Ra,Provider:null,Consumer:null,_currentValue:Ru,_currentValue2:Ru,_threadCount:0};function AQ(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=s8(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s8(0),this.hiddenUpdates=s8(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function fP(e,t,n,i,r,s,o,a,l,c,u,d){return e=new AQ(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=ms(3,null,null,t),e.current=s,s.stateNode=e,t=$v(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},rw(s),e}function hP(e){return e?(e=_f,e):_f}function gP(e,t,n,i,r,s){r=hP(r),i.context===null?i.context=r:i.pendingContext=r,i=sc(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=oc(e,i,t),n!==null&&(ir(n,e,t),Z1(n,e,t))}function px(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pw(e,t){px(e,t),(e=e.alternate)&&px(e,t)}function mP(e){if(e.tag===13){var t=_c(e,67108864);t!==null&&ir(t,e,67108864),pw(e,67108864)}}var cb=!0;function MQ(e,t,n,i){var r=ze.T;ze.T=null;var s=Kt.p;try{Kt.p=2,Uw(e,t,n,i)}finally{Kt.p=s,ze.T=r}}function RQ(e,t,n,i){var r=ze.T;ze.T=null;var s=Kt.p;try{Kt.p=8,Uw(e,t,n,i)}finally{Kt.p=s,ze.T=r}}function Uw(e,t,n,i){if(cb){var r=u7(i);if(r===null)k8(e,t,i,ub,n),Ux(e,i);else if(LQ(r,e,t,n,i))i.stopPropagation();else if(Ux(e,i),t&4&&-1<kQ.indexOf(e)){for(;r!==null;){var s=Jh(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=lu(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Gr(o);a.entanglements[1]|=l,o&=~l}ra(s),!(un&6)&&(eb=Fo()+500,$m(0))}}break;case 13:a=_c(s,2),a!==null&&ir(a,s,2),i5(),pw(s,2)}if(s=u7(i),s===null&&k8(e,t,i,ub,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else k8(e,t,i,null,n)}}function u7(e){return e=Lv(e),bw(e)}var ub=null;function bw(e){if(ub=null,e=Eu(e),e!==null){var t=qh(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=jD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ub=e,null}function pP(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(UZ()){case KD:return 2;case ZD:return 8;case z2:case bZ:return 32;case qD:return 268435456;default:return 32}default:return 32}}var d7=!1,cc=null,uc=null,dc=null,H0=new Map,V0=new Map,Xl=[],kQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ux(e,t){switch(e){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":dc=null;break;case"pointerover":case"pointerout":H0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":V0.delete(t.pointerId)}}function Yg(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Jh(t),t!==null&&mP(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function LQ(e,t,n,i,r){switch(t){case"focusin":return cc=Yg(cc,e,t,n,i,r),!0;case"dragenter":return uc=Yg(uc,e,t,n,i,r),!0;case"mouseover":return dc=Yg(dc,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return H0.set(s,Yg(H0.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,V0.set(s,Yg(V0.get(s)||null,e,t,n,i,r)),!0}return!1}function UP(e){var t=Eu(e.target);if(t!==null){var n=qh(t);if(n!==null){if(t=n.tag,t===13){if(t=jD(n),t!==null){e.blockedOn=t,xZ(e.priority,function(){if(n.tag===13){var i=Xr(),r=_c(n,i);r!==null&&ir(r,n,i),pw(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function i2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=u7(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);A3=i,n.target.dispatchEvent(i),A3=null}else return t=Jh(n),t!==null&&mP(t),e.blockedOn=n,!1;t.shift()}return!0}function bx(e,t,n){i2(e)&&n.delete(t)}function DQ(){d7=!1,cc!==null&&i2(cc)&&(cc=null),uc!==null&&i2(uc)&&(uc=null),dc!==null&&i2(dc)&&(dc=null),H0.forEach(bx),V0.forEach(bx)}function eU(e,t){e.blockedOn===t&&(e.blockedOn=null,d7||(d7=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,DQ)))}var tU=null;function yx(e){tU!==e&&(tU=e,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,function(){tU===e&&(tU=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(bw(i||n)===null)continue;break}var s=Jh(n);s!==null&&(e.splice(t,3),t-=3,B3(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function $0(e){function t(l){return eU(l,e)}cc!==null&&eU(cc,e),uc!==null&&eU(uc,e),dc!==null&&eU(dc,e),H0.forEach(t),V0.forEach(t);for(var n=0;n<Xl.length;n++){var i=Xl[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Xl.length&&(n=Xl[0],n.blockedOn===null);)UP(n),n.blockedOn===null&&Xl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[Er]||null;if(typeof s=="function")o||yx(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[Er]||null)a=o.formAction;else if(bw(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),yx(n)}}}function yw(e){this._internalRoot=e}o5.prototype.render=yw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));var n=t.current,i=Xr();gP(n,i,e,t,null,null)};o5.prototype.unmount=yw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&jf(),gP(e.current,2,null,e,null,null),i5(),t[Qh]=null}};function o5(e){this._internalRoot=e}o5.prototype.unstable_scheduleHydration=function(e){if(e){var t=iN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xl.length&&t!==0&&t<Xl[n].priority;n++);Xl.splice(n,0,e),n===0&&UP(e)}};var Ex=VD.version;if(Ex!=="19.0.0")throw Error(te(527,Ex,"19.0.0"));Kt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=gZ(t),e=e!==null?WD(e):null,e=e===null?null:e.stateNode,e};var NQ={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ze,findFiberByHostInstance:Eu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nU=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nU.isDisabled&&nU.supportsFiber)try{Dm=nU.inject(NQ),$r=nU}catch{}}X6.createRoot=function(e,t){if(!$D(e))throw Error(te(299));var n=!1,i="",r=gO,s=mO,o=pO,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=fP(e,1,!1,null,null,n,i,r,s,o,a,null),e[Qh]=t.current,hw(e.nodeType===8?e.parentNode:e),new yw(t)};X6.hydrateRoot=function(e,t,n){if(!$D(e))throw Error(te(299));var i=!1,r="",s=gO,o=mO,a=pO,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=fP(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=hP(null),n=t.current,i=Xr(),r=sc(i),r.callback=null,oc(n,r,i),t.current.lanes=i,Om(t,i),ra(t),e[Qh]=t.current,hw(e),new o5(t)};X6.version="19.0.0";function bP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bP)}catch(e){console.error(e)}}bP(),OD.exports=X6;var OQ=OD.exports;const PQ="modulepreload",FQ=function(e,t){return new URL(e,t).href},vx={},pe=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=FQ(o,i),o in vx)return;vx[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":PQ,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function BQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await pe(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([]),import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{s?s("./sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const Mt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Nt=globalThis,Id=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Pu="9.0.1";function a5(){return l5(Nt),Nt}function l5(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Pu,t[Pu]=t[Pu]||{}}function c5(e,t,n=Nt){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[Pu]=i[Pu]||{};return r[e]||(r[e]=t())}const zQ="Sentry Logger ",db=["debug","info","warn","error","log","assert","trace"],fb={};function ig(e){if(!("console"in Nt))return e();const t=Nt.console,n={},i=Object.keys(fb);i.forEach(r=>{const s=fb[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function HQ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Id?db.forEach(n=>{t[n]=(...i)=>{e&&ig(()=>{Nt.console[n](`${zQ}[${n}]:`,...i)})}}):db.forEach(n=>{t[n]=()=>{}}),t}const Pe=c5("logger",HQ),yP=50,Qu="?",wx=/\(error: (.*)\)/,_x=/captureMessage|captureException/;function EP(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=wx.test(l)?l.replace(wx,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=yP+r)break}}return $Q(s.slice(r))}}function VQ(e){return Array.isArray(e)?EP(...e):e}function $Q(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(iU(t).function||"")&&t.pop(),t.reverse(),_x.test(iU(t).function||"")&&(t.pop(),_x.test(iU(t).function||"")&&t.pop()),t.slice(0,yP).map(n=>({...n,filename:n.filename||iU(t).filename,function:n.function||Qu}))}function iU(e){return e[e.length-1]||{}}const N8="<anonymous>";function xc(e){try{return!e||typeof e!="function"?N8:e.name||N8}catch{return N8}}function Tx(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const r2={},Sx={};function xd(e,t){r2[e]=r2[e]||[],r2[e].push(t)}function Cd(e,t){if(!Sx[e]){Sx[e]=!0;try{t()}catch(n){Id&&Pe.error(`Error while instrumenting ${e}`,n)}}}function Qs(e,t){const n=e&&r2[e];if(n)for(const i of n)try{i(t)}catch(r){Id&&Pe.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${xc(i)}
Error:`,r)}}let O8=null;function GQ(e){const t="error";xd(t,e),Cd(t,XQ)}function XQ(){O8=Nt.onerror,Nt.onerror=function(e,t,n,i,r){return Qs("error",{column:i,error:r,line:n,msg:e,url:t}),O8?O8.apply(this,arguments):!1},Nt.onerror.__SENTRY_INSTRUMENTED__=!0}let P8=null;function YQ(e){const t="unhandledrejection";xd(t,e),Cd(t,jQ)}function jQ(){P8=Nt.onunhandledrejection,Nt.onunhandledrejection=function(e){return Qs("unhandledrejection",e),P8?P8.apply(this,arguments):!0},Nt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const vP=Object.prototype.toString;function Ew(e){switch(vP.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Ju(e,Error)}}function rg(e,t){return vP.call(e)===`[object ${t}]`}function wP(e){return rg(e,"ErrorEvent")}function Ix(e){return rg(e,"DOMError")}function WQ(e){return rg(e,"DOMException")}function za(e){return rg(e,"String")}function vw(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ww(e){return e===null||vw(e)||typeof e!="object"&&typeof e!="function"}function Uh(e){return rg(e,"Object")}function u5(e){return typeof Event<"u"&&Ju(e,Event)}function KQ(e){return typeof Element<"u"&&Ju(e,Element)}function ZQ(e){return rg(e,"RegExp")}function d5(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function qQ(e){return Uh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Ju(e,t){try{return e instanceof t}catch{return!1}}function _P(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const _w=Nt,QQ=80;function TP(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||QQ;for(;n&&s++<i&&(c=JQ(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function JQ(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(_w.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&za(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function Tw(){try{return _w.document.location.href}catch{return""}}function eJ(e){if(!_w.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Wf(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function hb(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{_P(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function tJ(e,t,n=!1){return za(e)?ZQ(t)?t.test(e):za(t)?n?e===t:e.includes(t):!1:!1}function f5(e,t=[],n=!1){return t.some(i=>tJ(e,i,n))}function Fr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&SP(r,i);try{e[t]=r}catch{Id&&Pe.log(`Failed to replace method "${t}" in object`,e)}}function ed(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Id&&Pe.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function SP(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ed(e,"__sentry_original__",t)}catch{}}function Sw(e){return e.__sentry_original__}function IP(e){if(Ew(e))return{message:e.message,name:e.name,stack:e.stack,...Cx(e)};if(u5(e)){const t={type:e.type,target:xx(e.target),currentTarget:xx(e.currentTarget),...Cx(e)};return typeof CustomEvent<"u"&&Ju(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function xx(e){try{return KQ(e)?TP(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Cx(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function nJ(e,t=40){const n=Object.keys(IP(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return Wf(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Wf(s,t)}return""}function Br(e){return f7(e,new Map)}function f7(e,t){if(iJ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=f7(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(f7(r,t))}),i}return e}function iJ(e){if(!Uh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const xP=1e3;function Ym(){return Date.now()/xP}function rJ(){const{performance:e}=Nt;if(!(e!=null&&e.now))return Ym;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/xP}const Ha=rJ();function Es(){const e=Nt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function CP(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Pl(e){const{message:t,event_id:n}=e;if(t)return t;const i=CP(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function h7(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function td(e,t){const n=CP(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r==null?void 0:r.data,...t.data};n.mechanism.data=s}}function Ax(e){if(sJ(e))return!0;try{ed(e,"__sentry_captured__",!0)}catch{}return!1}function sJ(e){try{return e.__sentry_captured__}catch{}}var Ua;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(Ua||(Ua={}));function nd(e){return new Cc(t=>{t(e)})}function gb(e){return new Cc((t,n)=>{n(e)})}class Cc{constructor(t){this._state=Ua.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new Cc((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Cc((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===Ua.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ua.RESOLVED&&n[1](this._value),this._state===Ua.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===Ua.PENDING){if(d5(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(Ua.RESOLVED,s)},r=s=>{n(Ua.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function oJ(e){const t=Ha(),n={sid:Es(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>lJ(n)};return e&&bh(n,e),n}function bh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ha(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Es()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function aJ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),bh(e,n)}function lJ(e){return Br({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function Mx(){return Es()}function AP(){return Es().substring(16)}function jm(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=jm(i[r],t[r],n-1));return i}const g7="_sentrySpan";function Rx(e,t){t?ed(e,g7,t):delete e[g7]}function kx(e){return e[g7]}const cJ=100;class Go{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Mx(),sampleRand:Math.random()}}clone(){const t=new Go;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Rx(t,kx(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&bh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof Go?n.getScopeData():Uh(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Rx(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Mx(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const i=typeof n=="number"?n:cJ;if(i<=0)return this;const r={timestamp:Ym(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:kx(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=jm(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||Es();if(!this._client)return Pe.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=(i==null?void 0:i.event_id)||Es();if(!this._client)return Pe.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||Es();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(Pe.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function uJ(){return c5("defaultCurrentScope",()=>new Go)}function dJ(){return c5("defaultIsolationScope",()=>new Go)}class fJ{constructor(t,n){let i;t?i=t:i=new Go;let r;n?r=n:r=new Go,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return d5(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function yh(){const e=a5(),t=l5(e);return t.stack=t.stack||new fJ(uJ(),dJ())}function hJ(e){return yh().withScope(e)}function gJ(e,t){const n=yh();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Lx(e){return yh().withScope(()=>e(yh().getIsolationScope()))}function mJ(){return{withIsolationScope:Lx,withScope:hJ,withSetScope:gJ,withSetIsolationScope:(e,t)=>Lx(t),getCurrentScope:()=>yh().getScope(),getIsolationScope:()=>yh().getIsolationScope()}}function Iw(e){const t=l5(e);return t.acs?t.acs:mJ()}function pl(){const e=a5();return Iw(e).getCurrentScope()}function Wm(){const e=a5();return Iw(e).getIsolationScope()}function pJ(){return c5("globalScope",()=>new Go)}function xw(...e){const t=a5(),n=Iw(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function ji(){return pl().getClient()}function UJ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return Br({trace_id:n,span_id:r||AP(),parent_span_id:i})}const bJ="sentry.source",yJ="sentry.sample_rate",EJ="sentry.op",vJ="sentry.origin",MP="sentry.profile_id",RP="sentry.exclusive_time",wJ=0,_J=1,TJ="_sentryScope",SJ="_sentryIsolationScope";function kP(e){return{scope:e[TJ],isolationScope:e[SJ]}}function IJ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const xJ="sentry-",CJ=/^sentry-/;function AJ(e){const t=MJ(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(CJ)){const o=r.slice(xJ.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function MJ(e){if(!(!e||!za(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=Dx(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):Dx(e)}function Dx(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const RJ=1;let Nx=!1;function kJ(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:Cw(e).parent_span_id,s=kP(e).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||AP():t;return Br({parent_span_id:r,span_id:o,trace_id:n})}function Ox(e){return typeof e=="number"?Px(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Px(e.getTime()):Ha()}function Px(e){return e>9999999999?e/1e3:e}function Cw(e){if(DJ(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(LJ(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return Br({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:Ox(r),timestamp:Ox(o)||void 0,status:OJ(l),op:i[EJ],origin:i[vJ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function LJ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function DJ(e){return typeof e.getSpanJSON=="function"}function NJ(e){const{traceFlags:t}=e.spanContext();return t===RJ}function OJ(e){if(!(!e||e.code===wJ))return e.code===_J?"ok":e.message||"unknown_error"}const PJ="_sentryRootSpan";function LP(e){return e[PJ]||e}function Fx(){Nx||(ig(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Nx=!0)}function FJ(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=ji())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Aw="production",BJ="_frozenDsc";function DP(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=Br({environment:n.environment||Aw,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function zJ(e,t){const n=t.getPropagationContext();return n.dsc||DP(n.traceId,e)}function HJ(e){var m;const t=ji();if(!t)return{};const n=LP(e),i=Cw(n),r=i.data,s=n.spanContext().traceState,o=(s==null?void 0:s.get("sentry.sample_rate"))??r[yJ];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[BJ];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&AJ(c);if(u)return a(u);const d=DP(e.spanContext().traceId,t),f=r[bJ],h=i.description;return f!=="url"&&h&&(d.transaction=h),FJ()&&(d.sampled=String(NJ(n)),d.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((m=kP(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const VJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function $J(e){return e==="http"||e==="https"}function Mw(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function GJ(e){const t=VJ.exec(e);if(!t){ig(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return NP({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function NP(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function XJ(e){if(!Id)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Pe.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?$J(i)?t&&isNaN(parseInt(t,10))?(Pe.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Pe.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Pe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function YJ(e){const t=typeof e=="string"?GJ(e):NP(e);if(!(!t||!XJ(t)))return t}function ba(e,t=100,n=1/0){try{return m7("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function OP(e,t=3,n=100*1024){const i=ba(e,t);return ZJ(i)>n?OP(e,t-1,n):i}function m7(e,t,n=1/0,i=1/0,r=qJ()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=jJ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return m7("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=IP(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=m7(h,m,l-1,i,r),d++}return o(t),u}function jJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(_P(t))return"[VueViewModel]";if(qQ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${xc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=WJ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function WJ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function KJ(e){return~-encodeURI(e).split(/%..|./).length}function ZJ(e){return KJ(JSON.stringify(e))}function qJ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function h5(e,t=[]){return[e,t]}function QJ(e,t){const[n,i]=e;return[n,[...i,t]]}function Bx(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function p7(e){const t=l5(Nt);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function JJ(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[p7(i),s]:i.push(typeof s=="string"?p7(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ba(a))}r(l)}}return typeof i=="string"?i:eee(i)}function eee(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function tee(e){const t=typeof e.data=="string"?p7(e.data):e.data;return[Br({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const nee={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function zx(e){return nee[e]}function PP(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function iee(e,t,n,i){var s;const r=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:Mw(i)},...r&&{trace:Br({...r})}}}function ree(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function see(e,t,n,i){const r=PP(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:Mw(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return h5(s,[o])}function oee(e,t,n,i){const r=PP(n),s=e.type&&e.type!=="replay_event"?e.type:"event";ree(e,n==null?void 0:n.sdk);const o=iee(e,r,i,t);return delete e.sdkProcessingMetadata,h5(o,[[{type:s},e]])}function U7(e,t,n,i=0){return new Cc((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);Mt&&o.id&&a===null&&Pe.log(`Event processor "${o.id}" dropped event`),d5(a)?a.then(l=>U7(e,l,n,i+1).then(r)).then(null,s):U7(e,a,n,i+1).then(r).then(null,s)}})}let rU,Hx,sU;function aee(e){const t=Nt._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return sU&&n.length===Hx||(Hx=n.length,sU=n.reduce((i,r)=>{rU||(rU={});const s=rU[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[r];if(c&&u){i[c]=u,rU[r]=[c,u];break}}}return i},{})),sU}function lee(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;cee(e,t),i&&fee(e,i),hee(e,n),uee(e,r),dee(e,s)}function Vx(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;oU(e,"extra",n),oU(e,"tags",i),oU(e,"user",r),oU(e,"contexts",s),e.sdkProcessingMetadata=jm(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function oU(e,t,n){e[t]=jm(e[t],n,1)}function cee(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=Br(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Br(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Br(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=Br(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function uee(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function dee(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function fee(e,t){e.contexts={trace:kJ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:HJ(t),...e.sdkProcessingMetadata};const n=LP(t),i=Cw(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function hee(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function gee(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Es(),timestamp:t.timestamp||Ym()},c=n.integrations||e.integrations.map(U=>U.name);mee(l,e),bee(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&pee(l,e.stackParser);const u=Eee(i,n.captureContext);n.mechanism&&td(l,n.mechanism);const d=r?r.getEventProcessors():[],f=pJ().getScopeData();if(s){const U=s.getScopeData();Vx(f,U)}if(u){const U=u.getScopeData();Vx(f,U)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),lee(l,f);const m=[...d,...f.eventProcessors];return U7(m,l,n).then(U=>(U&&Uee(U),typeof o=="number"&&o>0?yee(U,o,a):U))}function mee(e,t){var l,c;const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||Aw,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=Wf(e.message,s));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=Wf(o.value,s));const a=e.request;a!=null&&a.url&&(a.url=Wf(a.url,s))}function pee(e,t){var i,r;const n=aee(t);(r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function Uee(e){var i,r;const t={};if((r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,o])=>{n.push({type:"sourcemap",code_file:s,debug_id:o})})}function bee(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function yee(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:ba(o.data,t,n)}}))},...e.user&&{user:ba(e.user,t,n)},...e.contexts&&{contexts:ba(e.contexts,t,n)},...e.extra&&{extra:ba(e.extra,t,n)}};return(r=e.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ba(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:ba(o.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=ba(e.contexts.flags,3,n)),i}function Eee(e,t){if(!t)return e;const n=e?e.clone():new Go;return n.update(t),n}function vee(e){if(e)return wee(e)?{captureContext:e}:Tee(e)?{captureContext:e}:e}function wee(e){return e instanceof Go||typeof e=="function"}const _ee=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Tee(e){return Object.keys(e).some(t=>_ee.includes(t))}function Rw(e,t){return pl().captureException(e,vee(t))}function $x(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return pl().captureMessage(e,n,i)}function FP(e,t){return pl().captureEvent(e,t)}function Gx(e){const t=Wm(),n=pl(),{userAgent:i}=Nt.navigator||{},r=oJ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&bh(s,{status:"exited"}),BP(),t.setSession(r),r}function BP(){const e=Wm(),n=pl().getSession()||e.getSession();n&&aJ(n),zP(),e.setSession()}function zP(){const e=Wm(),t=ji(),n=e.getSession();n&&t&&t.captureSession(n)}function Xx(e=!1){if(e){BP();return}zP()}const See="7";function Iee(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function xee(e){return`${Iee(e)}${e.projectId}/envelope/`}function Cee(e,t){const n={sentry_version:See};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Aee(e,t,n){return t||`${xee(e)}?${Cee(e,n)}`}const Yx=[];function Mee(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function Ree(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return Mee(i)}function kee(e,t){const n={};return t.forEach(i=>{i&&HP(e,i,n)}),n}function jx(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function HP(e,t,n){if(n[t.name]){Mt&&Pe.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Yx.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Yx.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}Mt&&Pe.log(`Integration installed: ${t.name}`)}function Lee(e,t,n){const i=[{type:"client_report"},{timestamp:Ym(),discarded_events:e}];return h5(t?{dsn:t}:{},[i])}class Ys extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function VP(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Dee(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Br({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o==null?void 0:o[MP],exclusive_time:o==null?void 0:o[RP],measurements:e.measurements,is_segment:!0})}function Nee(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[MP]:e.profile_id},...e.exclusive_time&&{[RP]:e.exclusive_time}}}},measurements:e.measurements};return Br(t)}const Wx="Not capturing exception because it's already been captured.",Kx="Discarded session because of missing or non-string release";class Oee{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=YJ(t.dsn):Mt&&Pe.warn("No DSN provided, client will not send events."),this._dsn){const n=Aee(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=Es();if(Ax(t))return Mt&&Pe.log(Wx),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:Es(),...i},o=vw(t)?t:String(t),a=ww(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=Es();if(n!=null&&n.originalException&&Ax(n.originalException))return Mt&&Pe.log(Wx),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),bh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):nd(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];HP(this,t,this._integrations),n||jx(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=oee(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=QJ(i,tee(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=Aw}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){Mt&&Pe.warn(Kx);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){Mt&&Pe.warn(Kx);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=see(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;Mt&&Pe.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Mt&&Pe.error("Error while sending envelope:",n),n)):(Mt&&Pe.error("Transport disabled"),nd({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=kee(this,t),jx(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",r=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(bh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Cc(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),gee(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:UJ(i),...a.contexts};const l=zJ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=pl(),r=Wm()){return Mt&&b7(t)&&Pe.log(`Captured error event \`${VP(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{Mt&&(s instanceof Ys&&s.logLevel==="log"?Pe.log(s.message):Pe.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=$P(t),l=b7(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:IJ(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),gb(new Ys(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new Ys("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=Fee(this,s,h,n);return Pee(p,u)}).then(h=>{var U;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw new Ys(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const E=((U=h.sdkProcessingMetadata)==null?void 0:U.spanCountBeforeProcessing)||0,y=h.spans?h.spans.length:0,v=E-y;v>0&&this.recordDroppedEvent("before_send","span",v)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const E="custom";h.transaction_info={...p,source:E}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof Ys?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Ys(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Mt&&Pe.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Mt&&Pe.log("No outcomes to send");return}if(!this._dsn){Mt&&Pe.log("No dsn provided, will not send outcomes");return}Mt&&Pe.log("Sending outcomes:",t);const n=Lee(t,this._options.tunnel&&Mw(this._dsn));this.sendEnvelope(n)}}function Pee(e,t){const n=`${t} must return \`null\` or a valid event.`;if(d5(e))return e.then(i=>{if(!Uh(i)&&i!==null)throw new Ys(n);return i},i=>{throw new Ys(`${t} rejected with ${i}`)});if(!Uh(e)&&e!==null)throw new Ys(n);return e}function Fee(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if(b7(a)&&r)return r(a,i);if($P(a)){if(o){const l=o(Dee(a));if(l?a=jm(n,Nee(l)):Fx(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(Fx(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function b7(e){return e.type===void 0}function $P(e){return e.type==="transaction"}function Bee(e,t){t.debug===!0&&(Mt?Pe.enable():ig(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),pl().update(t.initialScope);const i=new e(t);return zee(i),i.init(),i}function zee(e){pl().setClient(e)}function Hee(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return gb(new Ys("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new Cc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{nd(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const Vee=60*1e3;function $ee(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?Vee:i-t}function Gee(e,t){return e[t]||e.all||0}function Xee(e,t,n=Date.now()){return Gee(e,t)>n}function Yee(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+$ee(o,i):t===429&&(r.all=i+60*1e3);return r}const jee=64;function Wee(e,t,n=Hee(e.bufferSize||jee)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(Bx(o,(d,f)=>{const h=zx(f);Xee(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return nd({});const l=h5(o[0],a),c=d=>{Bx(l,(f,h)=>{e.recordDroppedEvent(d,zx(h))})},u=()=>t({body:JJ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Mt&&Pe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Yee(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Ys)return Mt&&Pe.error("Skipped sending event because buffer is full."),c("queue_overflow"),nd({});throw d})}return{send:s,flush:r}}function Kee(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Zee(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function qee(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:Pu})),version:Pu}),e._metadata=r}const Qee=100;function id(e,t){const n=ji(),i=Wm();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=Qee}=n.getOptions();if(s<=0)return;const a={timestamp:Ym(),...e},l=r?ig(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let Zx;const Jee="FunctionToString",qx=new WeakMap,ete=()=>({name:Jee,setupOnce(){Zx=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Sw(this),n=qx.has(ji())&&t!==void 0?t:this;return Zx.apply(n,e)}}catch{}},setup(e){qx.set(e,!0)}}),tte=ete,nte=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],ite="InboundFilters",rte=(e={})=>({name:ite,processEvent(t,n,i){const r=i.getOptions(),s=ote(e,r);return ate(t,s)?null:t}}),ste=rte;function ote(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:nte],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function ate(e,t){return t.ignoreInternal&&fte(e)?(Mt&&Pe.warn(`Event dropped due to being internal Sentry Error.
Event: ${Pl(e)}`),!0):lte(e,t.ignoreErrors)?(Mt&&Pe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Pl(e)}`),!0):gte(e)?(Mt&&Pe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Pl(e)}`),!0):cte(e,t.ignoreTransactions)?(Mt&&Pe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Pl(e)}`),!0):ute(e,t.denyUrls)?(Mt&&Pe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Pl(e)}.
Url: ${mb(e)}`),!0):dte(e,t.allowUrls)?!1:(Mt&&Pe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Pl(e)}.
Url: ${mb(e)}`),!0)}function lte(e,t){return e.type||!t||!t.length?!1:VP(e).some(n=>f5(n,t))}function cte(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?f5(n,t):!1}function ute(e,t){if(!(t!=null&&t.length))return!1;const n=mb(e);return n?f5(n,t):!1}function dte(e,t){if(!(t!=null&&t.length))return!0;const n=mb(e);return n?f5(n,t):!0}function fte(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function hte(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function mb(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?hte(t):null}catch{return Mt&&Pe.error(`Cannot extract url for event ${Pl(e)}`),null}}function gte(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function mte(e,t,n=250,i,r,s,o){var l;if(!((l=s.exception)!=null&&l.values)||!o||!Ju(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=pte(y7(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function y7(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(Ju(i[r],Error)){Qx(o,a);const c=e(t,i[r]),u=l.length;Jx(c,r,u,a),l=y7(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(Ju(c,Error)){Qx(o,a);const d=e(t,c),f=l.length;Jx(d,`errors[${u}]`,f,a),l=y7(e,t,n,c,r,[d,...l],d,f)}}),l}function Qx(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Jx(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function pte(e,t){return e.map(n=>(n.value&&(n.value=Wf(n.value,t)),n))}function GP(e){const t="console";xd(t,e),Cd(t,Ute)}function Ute(){"console"in Nt&&db.forEach(function(e){e in Nt.console&&Fr(Nt.console,e,function(t){return fb[e]=t,function(...n){Qs("console",{args:n,level:e});const r=fb[e];r==null||r.apply(Nt.console,n)}})})}function XP(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const bte="CaptureConsole",yte=(e={})=>{const t=e.levels||db,n=e.handled??!0;return{name:bte,setup(i){"console"in Nt&&GP(({args:r,level:s})=>{ji()!==i||!t.includes(s)||vte(r,s,n)})}}},Ete=yte;function vte(e,t,n){const i={level:XP(t),extra:{arguments:e}};xw(r=>{if(r.addEventProcessor(a=>(a.logger="console",td(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${hb(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),$x(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){Rw(s,i);return}const o=hb(e," ");$x(o,i)})}const wte="Dedupe",_te=()=>{let e;return{name:wte,processEvent(t){if(t.type)return t;try{if(Ste(t,e))return Mt&&Pe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Tte=_te;function Ste(e,t){return t?!!(Ite(e,t)||xte(e,t)):!1}function Ite(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!jP(e,t)||!YP(e,t))}function xte(e,t){const n=eC(t),i=eC(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!jP(e,t)||!YP(e,t))}function YP(e,t){let n=Tx(e),i=Tx(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function jP(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function eC(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function F8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function WP(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const pb=Nt;function Cte(){return"history"in pb}function KP(){if(!("fetch"in pb))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function E7(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ate(){var n;if(typeof EdgeRuntime=="string")return!0;if(!KP())return!1;if(E7(pb.fetch))return!0;let e=!1;const t=pb.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=E7(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){Id&&Pe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function Mte(e,t){const n="fetch";xd(n,e),Cd(n,()=>Rte(void 0,t))}function Rte(e,t=!1){t&&!Ate()||Fr(Nt,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=kte(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:Ha()*1e3,virtualError:r};return Qs("fetch",{...a}),n.apply(Nt,i).then(async l=>(Qs("fetch",{...a,endTimestamp:Ha()*1e3,response:l}),l),l=>{throw Qs("fetch",{...a,endTimestamp:Ha()*1e3,error:l}),Ew(l)&&l.stack===void 0&&(l.stack=r.stack,ed(l,"framesToPop",1)),l})}})}function v7(e,t){return!!e&&typeof e=="object"&&!!e[t]}function tC(e){return typeof e=="string"?e:e?v7(e,"url")?e.url:e.toString?e.toString():"":""}function kte(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:tC(n),method:v7(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:tC(t),method:v7(t,"method")?String(t.method).toUpperCase():"GET"}}function Lte(){return"npm"}const Sn=Nt;let w7=0;function ZP(){return w7>0}function Dte(){w7++,setTimeout(()=>{w7--})}function Eh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(Sw(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>Eh(o,t));return e.apply(this,s)}catch(s){throw Dte(),xw(o=>{o.addEventProcessor(a=>(t.mechanism&&(h7(a,void 0),td(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),Rw(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}SP(i,e),ed(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function kw(e,t){const n=Lw(e,t),i={type:Bte(t),value:zte(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Nte(e,t,n,i){const r=ji(),s=r==null?void 0:r.getOptions().normalizeDepth,o=Xte(t),a={__serialized__:OP(t,s)};if(o)return{exception:{values:[kw(e,o)]},extra:a};const l={exception:{values:[{type:u5(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:$te(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=Lw(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function B8(e,t){return{exception:{values:[kw(e,t)]}}}function Lw(e,t){const n=t.stacktrace||t.stack||"",i=Pte(t),r=Fte(t);try{return e(n,i,r)}catch{}return[]}const Ote=/Minified React error #\d+;/i;function Pte(e){return e&&Ote.test(e.message)?1:0}function Fte(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function qP(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Bte(e){const t=e==null?void 0:e.name;return!t&&qP(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function zte(e){const t=e==null?void 0:e.message;return qP(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Hte(e,t,n,i){const r=(n==null?void 0:n.syntheticException)||void 0,s=Dw(e,t,r,i);return td(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),nd(s)}function Vte(e,t,n="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=_7(e,t,s,r);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),nd(o)}function Dw(e,t,n,i,r){let s;if(wP(t)&&t.error)return B8(e,t.error);if(Ix(t)||WQ(t)){const o=t;if("stack"in t)s=B8(e,t);else{const a=o.name||(Ix(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=_7(e,l,n,i),h7(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Ew(t)?B8(e,t):Uh(t)||u5(t)?(s=Nte(e,t,n,r),td(s,{synthetic:!0}),s):(s=_7(e,t,n,i),h7(s,`${t}`),td(s,{synthetic:!0}),s)}function _7(e,t,n,i){const r={};if(i&&n){const s=Lw(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),td(r,{synthetic:!0})}if(vw(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function $te(e,{isUnhandledRejection:t}){const n=nJ(e),i=t?"promise rejection":"exception";return wP(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:u5(e)?`Event \`${Gte(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function Gte(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Xte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Yte extends Oee{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=Sn.SENTRY_SDK_SOURCE||Lte();qee(n,"browser",["browser"],i),super(n),n.sendClientReports&&Sn.document&&Sn.document.addEventListener("visibilitychange",()=>{Sn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",Kee),this.on("beforeSendSession",Zee))}eventFromException(t,n){return Hte(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Vte(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const jte=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,mr=Nt,Wte=1e3;let nC,T7,S7;function Kte(e){const t="dom";xd(t,e),Cd(t,Zte)}function Zte(){if(!mr.document)return;const e=Qs.bind(null,"dom"),t=iC(e,!0);mr.document.addEventListener("click",t,!1),mr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,o;const r=(s=mr[n])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Fr(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=iC(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Fr(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function qte(e){if(e.type!==T7)return!1;try{if(!e.target||e.target._sentryId!==S7)return!1}catch{}return!0}function Qte(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function iC(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Jte(n);if(Qte(n.type,i))return;ed(n,"_sentryCaptured",!0),i&&!i._sentryId&&ed(i,"_sentryId",Es());const r=n.type==="keypress"?"input":n.type;qte(n)||(e({event:n,name:r,global:t}),T7=n.type,S7=i?i._sentryId:void 0),clearTimeout(nC),nC=mr.setTimeout(()=>{S7=void 0,T7=void 0},Wte)}}function Jte(e){try{return e.target}catch{return null}}let aU;function QP(e){const t="history";xd(t,e),Cd(t,ene)}function ene(){if(mr.addEventListener("popstate",()=>{const t=mr.location.href,n=aU;if(aU=t,n===t)return;Qs("history",{from:n,to:t})}),!Cte())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=aU,s=String(i);if(aU=s,r===s)return;Qs("history",{from:r,to:s})}return t.apply(this,n)}}Fr(mr.history,"pushState",e),Fr(mr.history,"replaceState",e)}const s2={};function tne(e){const t=s2[e];if(t)return t;let n=mr[e];if(E7(n))return s2[e]=n.bind(mr);const i=mr.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){jte&&Pe.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(s2[e]=n.bind(mr))}function rC(e){s2[e]=void 0}const E1="__sentry_xhr_v3__";function nne(e){const t="xhr";xd(t,e),Cd(t,ine)}function ine(){if(!mr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=Ha()*1e3,o=za(i[0])?i[0].toUpperCase():void 0,a=rne(i[1]);if(!o||!a)return t.apply(n,i);n[E1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[E1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Ha()*1e3,startTimestamp:s,xhr:n,virtualError:r};Qs("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[E1];return m&&za(f)&&za(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[E1];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:Ha()*1e3,xhr:n};return Qs("xhr",s),t.apply(n,i)}})}function rne(e){if(za(e))return e;try{return e.toString()}catch{}}function sne(e,t=tne("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return rC("fetch"),gb("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return rC("fetch"),n-=o,i--,gb(l)}}return Wee(e,r)}const one=30,ane=50;function I7(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?Qu:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const lne=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,cne=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,une=/\((\S*)(?::(\d+))(?::(\d+))\)/,dne=e=>{const t=lne.exec(e);if(t){const[,i,r,s]=t;return I7(i,Qu,+r,+s)}const n=cne.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=une.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=JP(n[1]||Qu,n[2]);return I7(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},fne=[one,dne],hne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,gne=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,mne=e=>{const t=hne.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=gne.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||Qu;return[r,i]=JP(r,i),I7(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},pne=[ane,mne],Une=[fne,pne],bne=EP(...Une),JP=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:Qu,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},G0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lU=1024,yne="Breadcrumbs",Ene=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:yne,setup(n){t.console&&GP(Tne(n)),t.dom&&Kte(_ne(n,t.dom)),t.xhr&&nne(Sne(n)),t.fetch&&Mte(Ine(n)),t.history&&QP(xne(n)),t.sentry&&n.on("beforeSendEvent",wne(n))}}},vne=Ene;function wne(e){return function(n){ji()===e&&id({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Pl(n)},{event:n})}}function _ne(e,t){return function(i){if(ji()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>lU&&(G0&&Pe.warn(`\`dom.maxStringLength\` cannot exceed ${lU}, but a value of ${a} was configured. Sentry will use ${lU} instead.`),a=lU),typeof o=="string"&&(o=[o]);try{const c=i.event,u=Cne(c)?c.target:c;r=TP(u,{keyAttrs:o,maxStringLength:a}),s=eJ(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),id(l,{event:i.event,name:i.name,global:i.global})}}function Tne(e){return function(n){if(ji()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:XP(n.level),message:hb(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${hb(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;id(i,{input:n.args,level:n.level})}}function Sne(e){return function(n){if(ji()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[E1];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=WP(l);id({category:"xhr",data:u,type:"http",level:f},d)}}function Ine(e){return function(n){if(ji()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};id({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=WP(s.status_code);id({category:"fetch",data:s,type:"http",level:l},a)}}}function xne(e){return function(n){if(ji()!==e)return;let i=n.from,r=n.to;const s=F8(Sn.location.href);let o=i?F8(i):void 0;const a=F8(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),id({category:"navigation",data:{from:i,to:r}})}}function Cne(e){return!!e&&!!e.target}const Ane=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Mne="BrowserApiErrors",Rne=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Mne,setupOnce(){t.setTimeout&&Fr(Sn,"setTimeout",sC),t.setInterval&&Fr(Sn,"setInterval",sC),t.requestAnimationFrame&&Fr(Sn,"requestAnimationFrame",Lne),t.XMLHttpRequest&&"XMLHttpRequest"in Sn&&Fr(XMLHttpRequest.prototype,"send",Dne);const n=t.eventTarget;n&&(Array.isArray(n)?n:Ane).forEach(Nne)}}},kne=Rne;function sC(e){return function(...t){const n=t[0];return t[0]=Eh(n,{mechanism:{data:{function:xc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Lne(e){return function(t){return e.apply(this,[Eh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:xc(e)},handled:!1,type:"instrument"}})])}}function Dne(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Fr(n,r,function(s){const o={mechanism:{data:{function:r,handler:xc(s)},handled:!1,type:"instrument"}},a=Sw(s);return a&&(o.mechanism.data.handler=xc(a)),Eh(s,o)})}),e.apply(this,t)}}function Nne(e){var i,r;const n=(i=Sn[e])==null?void 0:i.prototype;(r=n==null?void 0:n.hasOwnProperty)!=null&&r.call(n,"addEventListener")&&(Fr(n,"addEventListener",function(s){return function(o,a,l){try{One(a)&&(a.handleEvent=Eh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:xc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,Eh(a,{mechanism:{data:{function:"addEventListener",handler:xc(a),target:e},handled:!1,type:"instrument"}}),l])}}),Fr(n,"removeEventListener",function(s){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&s.call(this,o,c,l)}catch{}return s.call(this,o,a,l)}}))}function One(e){return typeof e.handleEvent=="function"}const Pne=()=>({name:"BrowserSession",setupOnce(){if(typeof Sn.document>"u"){G0&&Pe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Gx({ignoreDuration:!0}),Xx(),QP(({from:e,to:t})=>{e!==void 0&&e!==t&&(Gx({ignoreDuration:!0}),Xx())})}}),Fne="GlobalHandlers",Bne=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Fne,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Hne(n),oC("onerror")),t.onunhandledrejection&&(Vne(n),oC("onunhandledrejection"))}}},zne=Bne;function Hne(e){GQ(t=>{const{stackParser:n,attachStacktrace:i}=eF();if(ji()!==e||ZP())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=Xne(Dw(n,l||r,void 0,i,!1),s,o,a);c.level="error",FP(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Vne(e){YQ(t=>{const{stackParser:n,attachStacktrace:i}=eF();if(ji()!==e||ZP())return;const r=$ne(t),s=ww(r)?Gne(r):Dw(n,r,void 0,i,!0);s.level="error",FP(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function $ne(e){if(ww(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Gne(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Xne(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=za(t)&&t.length>0?t:Tw();return l.length===0&&l.push({colno:c,filename:d,function:Qu,in_app:!0,lineno:u}),e}function oC(e){G0&&Pe.log(`Global Handler attached: ${e}`)}function eF(){const e=ji();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Yne=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!Sn.navigator&&!Sn.location&&!Sn.document)return;const t=((o=e.request)==null?void 0:o.url)||Tw(),{referrer:n}=Sn.document||{},{userAgent:i}=Sn.navigator||{},r={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),jne="cause",Wne=5,Kne="LinkedErrors",Zne=(e={})=>{const t=e.limit||Wne,n=e.key||jne;return{name:Kne,preprocessEvent(i,r,s){const o=s.getOptions();mte(kw,o.stackParser,o.maxValueLength,n,t,i,r)}}},qne=Zne;function Qne(e){return[ste(),tte(),kne(),vne(),zne(),qne(),Tte(),Yne(),Pne()]}function Jne(e={}){var n;return{...{defaultIntegrations:Qne(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=Sn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...eie(e)}}function eie(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function tie(){var l;const e=typeof Sn.window<"u"&&Sn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,r=Tw()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&Sn===Sn.top&&s.some(c=>r.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function nie(e={}){const t=Jne(e);if(!t.skipBrowserExtensionCheck&&tie()){G0&&ig(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}G0&&!KP()&&Pe.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:VQ(t.stackParser||bne),integrations:Ree(t),transport:t.transport||sne};return Bee(Yte,n)}function iie(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var rie={};const tF={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},sie=rie.VITE_APP_DISABLE_SENTRY==="true",z8=!sie&&Object.keys(tF).find(e=>window.location.hostname.indexOf(e)>=0);nie({dsn:z8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:z8?tF[z8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[Ete({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:iie().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class oie{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,r=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(r))this.content[i]=n,this.content[t]=r,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=t+1<<1,o=s-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<r&&(a=o)}if(s<n){const c=this.content[s];this.scoreFunction(c)<(a===null?r:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const aie="#ffffff",lie="#000000",cie=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],uie=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],die=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],fie=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],hie=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],gie=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],mie=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],pie=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],Uie=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],bie=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],yie=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],Eie=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],vie=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],fi={white:aie,black:lie,gray:cie,red:uie,pink:die,grape:fie,violet:hie,indigo:gie,blue:mie,cyan:pie,teal:Uie,green:bie,lime:yie,yellow:Eie,orange:vie},nF=240,wie=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),_ie=5,af=5,Tie=4,v1=4,w1=1,Os=[0,2,4,6,8],Ps=(e,t)=>t.map(n=>fi[e][n]),Be={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Ps("gray",Os),red:Ps("red",Os),pink:Ps("pink",Os),grape:Ps("grape",Os),violet:Ps("violet",Os),blue:Ps("blue",Os),cyan:Ps("cyan",Os),teal:Ps("teal",Os),green:Ps("green",Os),yellow:Ps("yellow",Os),orange:Ps("orange",Os),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},iF=wie(Be,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),rF=[Be.black,Be.red[v1],Be.green[v1],Be.blue[v1],Be.yellow[v1]],sF=[Be.transparent,Be.red[w1],Be.green[w1],Be.blue[w1],Be.yellow[w1]],oF=[Be.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],Sie={transparent:Be.transparent,white:Be.white,gray:Be.gray,black:Be.black,bronze:Be.bronze,...iF},Iie={transparent:Be.transparent,white:Be.white,gray:Be.gray,black:Be.black,bronze:Be.bronze,...iF},xie=e=>[Be.cyan[e],Be.blue[e],Be.violet[e],Be.grape[e],Be.pink[e],Be.green[e],Be.teal[e],Be.yellow[e],Be.orange[e],Be.red[e]],Cie=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Xo=/Mac|iPod|iPhone|iPad/.test(navigator.platform),aF=/^Win/.test(navigator.platform),Aie=/\b(android)\b/i.test(navigator.userAgent),X0=typeof window<"u"&&"netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Mie=navigator.userAgent.indexOf("Chrome")!==-1,Rie=!Mie&&navigator.userAgent.indexOf("Safari")!==-1,lF=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,kie=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},x7=typeof window<"u"&&"ResizeObserver"in window,Va="Excalidraw",Lie=36,C7=10,o2=8,Die=5,aC=1,Nie=30,Dr=Math.PI/12,Oie="red",Tt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Rl={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},uu={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var ee=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(ee||{});const cU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},cF={TEST:"test",DEVELOPMENT:"development"},Ac={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup"},xf="Xiaolai",Y0="Segoe UI Emoji",qe={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},uF="sans-serif",dF="monospace",Pie={[uF]:998,[dF]:999},Cf={[xf]:100,...Pie,[Y0]:1e3};function Fie(e){switch(e){case qe.Cascadia:case qe["Comic Shanns"]:return dF;default:return uF}}const fF=e=>{const t=Fie(e);switch(e){case qe.Excalifont:return[xf,t,Y0];default:return[t,Y0]}},Ce={LIGHT:"light",DARK:"dark"},Dt={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},Nw=1,Ul=20,Yc=qe.Excalifont,Km="left",Ub="top",hF="{version}",rd=2,bb=2*rd,Bie=1e-5,lC=2*bb-Bie,uU="#ffffff",zie="#1e1e1e",Hie="#a2f1a6",yb=20,gF=5,vh={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ve={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...vh},Vie=[ve.text,ve.html,...Object.values(vh)],H8={png:"png",svg:"svg",clipboard:"clipboard"},vs={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},Ow=()=>window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,$ie=500,Gie=300,Xie=500,Yie=1e4,jie=3e4,Wie=100,g5=.1,Pw=.1,Fw=30,Kie=300,cC=6e4,uC=3e3,Bw="invert(93%) hue-rotate(180deg)",A7={addLibrary:"addLibrary"},M7={addLibrary:"addLibrary"},dC={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Zie=730,qie=1e3,Qie=500,Jie=1229,jg=2,zw=[1,2,3],sg=10,ere=1440,fC=4*1024*1024,tt="http://www.w3.org/2000/svg",tre=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,mF=128,m5={excalidraw:2,excalidrawLibrary:2},Fn=5,nre=.7,ire=11,zr={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},j0={LEFT:"left",CENTER:"center",RIGHT:"right"},rre=20,V8=.25,sre=32,dn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},pF={artist:1,cartoonist:2},$8={thin:1,bold:2,extraBold:4},on={strokeColor:Be.black,backgroundColor:Be.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:pF.artist,opacity:100,locked:!1},Eb="library",Fu="search",ws={name:"default",defaultTab:Eb},UF=new Set(["iframe","embeddable","image"]),Wn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},i0={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},bF="Untitled",Af={generalStats:1,elementProperties:2},ss=1,oi={sharp:"sharp",round:"round",elbow:"elbow"},yF=.3,vb="element";var wu=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(wu||{});const ore=20,wh={[qe.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[qe.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[qe["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[qe["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[qe.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[qe.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[qe.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[qe["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[qe.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[Cf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[Cf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},mu={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},Hw="local:",EF=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:r,descender:s}=((c=wh[e])==null?void 0:c.metrics)||wh[qe.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Mc=e=>{var n;const{lineHeight:t}=((n=wh[e])==null?void 0:n.metrics)||wh[qe.Excalifont].metrics;return t};class are{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Rc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=y5();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const Je={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},H={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Xo?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},lre=new Map([[H.Z,Je.Z],[H.Y,Je.Y]]),cre=e=>/^[a-z]$/.test(e.toLowerCase()),R7=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=lre.get(t);return!!(n&&!cre(e.key)&&e.code===n)},_1=e=>e===H.ARROW_LEFT||e===H.ARROW_RIGHT||e===H.ARROW_DOWN||e===H.ARROW_UP,hC=e=>e.altKey,Wg=e=>e.shiftKey,r0=e=>e.shiftKey,Zm=1e-4,Ge=(e,t,n)=>Math.min(Math.max(e,t),n),$a=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},ure=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},dU=(e,t)=>(e+t)/2,s0=e=>typeof e=="number"&&Number.isFinite(e),gC=(e,t,n=Zm)=>Math.abs(e-t)<n,Js=e=>e<0?e%(2*Math.PI)+2*Math.PI:e%(2*Math.PI);function Bu(e){return e*Math.PI/180}function p5(e){return e*180/Math.PI}function dre(e){return Math.abs(Math.sin(2*e))<Zm}function fre(e,t,n){return e=Js(e),t=Js(t),n=Js(n),t<n?e>=t&&e<=n:e>=t||e<=n}function hre(e,t){e=Js(e),t=Js(t);let n=e-t;return n<-Math.PI?n=n+2*Math.PI:n>Math.PI&&(n=n-2*Math.PI),Math.abs(n)}function an(e,t,n=0,i=0){return[e-n,t-i]}function le(e,t=[0,0],n,i=[0,1]){const r=an(e[0]-t[0],e[1]-t[1]);return n&&vF(r)<n*n?i:r}function ht(e,t){return e[0]*t[1]-t[0]*e[1]}function o0(e,t){return e[0]*t[0]+e[1]*t[1]}function Mf(e,t){return[e[0]+t[0],e[1]+t[1]]}function wb(e,t){return[e[0]-t[0],e[1]-t[1]]}function xn(e,t){return an(e[0]*t,e[1]*t)}function vF(e){return e[0]*e[0]+e[1]*e[1]}function gre(e){return Math.sqrt(vF(e))}const Cs=e=>{const t=gre(e);return t===0?an(0,0):an(e[0]/t,e[1]/t)},wF=e=>an(e[1],-e[0]);function I(e,t){return[e,t]}function U5(e){return e.length===2?I(e[0],e[1]):void 0}function Ti(e,t=I(0,0)){return I(t[0]+e[0],t[1]+e[1])}function Rf(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function As(e,t,n=Zm){const i=Math.abs;return i(e[0]-t[0])<n&&i(e[1]-t[1])<n}function q([e,t],[n,i],r){return I((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function _b(e,t=[0,0]){return I(e[0]+t[0],e[1]+t[1])}function Tb(e,t){return I((e[0]+t[0])/2,(e[1]+t[1])/2)}function gt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function ql(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const T1=(e,t,n)=>_b(t,xn(le(e,t),n)),W0=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]),_F=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],TF=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function On(e,t,n,i){return[e,t,n,i]}function mC(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function mre(e,t,n,i=.001,r=10){let s=1/0,o=0;for(;s>=i;){if(o>=r)return null;const a=e(t,n),l=[mC((p,U)=>e(p,U)[0],t,n),mC((p,U)=>e(p,U)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);s=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const zu=(e,t)=>I((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function SF(e,t){const n=o=>I(t[0][0]+o*(t[1][0]-t[0][0]),t[0][1]+o*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],r=([o,a])=>{const l=mre((d,f)=>{const h=zu(e,d),m=n(f);return[h[0]-m[0],h[1]-m[1]]},o,a);if(!l)return null;const[c,u]=l;return c<0||c>1||u<0||u>1?null:zu(e,c)};let s=r(i[0]);return s?[s]:(s=r(i[1]),s?[s]:(s=r(i[2]),s?[s]:[]))}function pre(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=gt(t,zu(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>gt(t,zu(e,c)));return l?zu(e,l):null}function Vw(e,t){const n=pre(e,t);return n?gt(t,n):0}function Ure(e){return Array.isArray(e)&&e.length===4&&Rf(e[0])&&Rf(e[1])&&Rf(e[2])&&Rf(e[3])}function $w([e,t,n,i],r){return an(-3*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*t[0]-6*r*(1-r)*t[0]-3*r*r*n[0]+6*r*(1-r)*n[0]+3*r*r*i[0],-3*(1-r)*(1-r)*e[1]+3*(1-r)*(1-r)*t[1]-6*r*(1-r)*t[1]-3*r*r*n[1]+6*r*(1-r)*n[1]+3*r*r*i[1])}function bre(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=s[0]+(o[0]-r[0])*t/2,l=s[1]+(o[1]-r[1])*t/2;n.push([I(a,l),I(o[0],o[1])])}return n}function Gw(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=e[i+2>=e.length?e.length-1:i+2],l=[(o[0]-r[0])*t,(o[1]-r[1])*t],c=[(a[0]-s[0])*t,(a[1]-s[1])*t],u=s[0]+l[0]/3,d=s[1]+l[1]/3,f=o[0]-c[0]/3,h=o[1]-c[1]/3;n.push(On(I(s[0],s[1]),I(u,d),I(f,h),I(o[0],o[1])))}return n}function yo([e,t,n,i],r,s=50){const o=[];for(let a=0;a<=s;a++){const l=a/s,c=On(e,t,n,i),u=zu(c,l),d=Cs($w(c,l)),f=wF(d);o.push(Ti(xn(f,r),u))}return o}function Tl(e,t,n,i,r=50){const s=[];for(let o=0;o<=r;o++){const a=o/r,l=1-a,c=I(l*l*e[0]+2*l*a*t[0]+a*a*n[0],l*l*e[1]+2*l*a*t[1]+a*a*n[1]),u=2*(1-a)*(t[0]-e[0])+2*a*(n[0]-t[0]),d=2*(1-a)*(t[1]-e[1])+2*a*(n[1]-t[1]),f=Cs(an(u,d)),h=wF(f);s.push(Ti(xn(h,i),c))}return s}function Xw(e){let n=0;for(let i=0;i<24;i++){const r=.5*_F[i]+.5,s=$w(e,r),o=Math.sqrt(s[0]*s[0]+s[1]*s[1]);n+=TF[i]*o}return .5*n}function yre(e,t){if(t<=0)return 0;if(t>=1)return Xw(e);const n=t/2,i=t/2;let r=0;for(let s=0;s<24;s++){const o=n*_F[s]+i,a=$w(e,o),l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);r+=TF[s]*l}return n*r}function Ere(e,t){const n=Xw(e),i=n*t;let r=0,s=1,o=t,a=0;const l=n*1e-4,c=20;for(let u=0;u<c&&(a=yre(e,o),!(Math.abs(a-i)<l));u++)a<i?r=o:s=o,o=(r+s)/2;return zu(e,o)}function IF(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const vre=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=Mf(le(e),xn(le(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,U=o*d,E=(s*s-o*o)*u**3/s,y=(o*o-s*s)*d**3/o,v=p-E,w=U-y,S=l-E,M=c-y,_=Math.hypot(w,v),T=Math.hypot(M,S);u=Math.min(1,Math.max(0,(S*_/T+E)/s)),d=Math.min(1,Math.max(0,(M*_/T+y)/o));const C=Math.hypot(d,u);u/=C,d/=C}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return gt(Ti(a),I(f,h))};function wre(e,t){const n=e.halfWidth,i=e.halfHeight,r=le(t[1],t[0]),s=an(t[0][0]-e.center[0],t[0][1]-e.center[1]),o=an(r[0]/(n*n),r[1]/(i*i)),a=an(s[0]/(n*n),s[1]/(i*i)),l=o0(r,o),c=o0(r,a),u=o0(s,a)-1,d=c*c-l*u,f=[];if(d>0){const h=(-c-Math.sqrt(d))/l,m=(-c+Math.sqrt(d))/l;0<=h&&h<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h)),0<=m&&m<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*m,t[0][1]+(t[1][1]-t[0][1])*m))}else if(d===0){const h=-c/l;0<=h&&h<=1&&f.push(I(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h))}return f}function pC(e,t){return[e,t]}function _re(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return I((a*s-l*i)/o,(n*l-r*a)/o)}return null}function Ae(e,t){return[e,t]}const Tre=e=>Array.isArray(e)&&e.length===2&&Rf(e[0])&&Rf(e[0]),Sb=(e,t,n=Zm)=>{const i=b5(e,t);return i===0?!0:i<n},b5=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,U;m<0?(p=r,U=s):m>1?(p=o,U=a):(p=r+m*u,U=s+m*d);const E=n-p,y=i-U;return Math.sqrt(E*E+y*y)};function Ib(e,t,n){const i=_re(pC(e[0],e[1]),pC(t[0],t[1]));return!i||!Sb(i,t,n)||!Sb(i,e,n)?null:i}function UC(...e){return xF(e)}function xb(e){return xF(e)}const Sre=(e,t)=>{const[n,i]=e;let r=0;for(let s=0;s<t.length;s++){const o=(s+1)%t.length,[a,l]=t[s],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&r++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&r--}return r!==0};function xF(e){return Ire(e)?e:[...e,e[0]]}function Ire(e){return As(e[0],e[e.length-1])}function Pi(e,t){return jo([e,t])}const Cb=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,Ab=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?jo([r,s]):null},fU=(e,[t,n])=>e>=t&&e<=n;function xre(e,t){return[e,t]}function G8([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const _h=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},Mb=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Rn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var CF={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ma,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(CF);var Cre=CF.exports;const Are=gl(Cre);class bC{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new Are(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let AF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function Mre(){return Math.floor(Math.random()*2**31)}class MF{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const yC=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},a0=e=>e.charAt(0).toUpperCase()+e.slice(1),Rre=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),k7=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,kre=e=>k7(e)||e instanceof Element&&!!e.closest("label, button"),pu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),qm=({fontFamily:e})=>{for(const[t,n]of Object.entries(qe))if(n===e)return`${t}${fF(n).map(i=>`, ${i}`).join("")}`;return Y0},dt=({fontSize:e,fontFamily:t})=>`${e}px ${qm({fontFamily:t})}`,el=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},og=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t!=null&&t.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},tl=e=>1-Math.pow(1-e,4),EC=(e,t,n)=>(t-e)*tl(n)+e,Lre=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s==null||s());const h=Math.min(f-u,i),m=tl(h/i),p={};if(Object.keys(e).forEach(U=>{const E=U,y=(t[E]-e[E])*m+e[E];p[E]=y}),n(p),h<i){const U=h/i,E={};Object.keys(e).forEach(y=>{const v=y,w=e[v],S=t[v];let M;M=r?r(w,S,U,v):EC(w,S,U),M==null&&(M=EC(w,S,U)),E[v]=M}),n(E),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},Dre=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Bi=(e,t)=>Math.abs(e-t),Wt=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},Q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Xo?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),xt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Hr=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},hU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Nre="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",Ore="֑-߿יִ-﷽ﹰ-ﻼ",Pre=new RegExp(`^[^${Nre}]*[${Ore}]`),RF=e=>Pre.test(e),Ga=e=>{const[t,n]=e;return{x:t,y:n}},kF=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},LF=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},Uu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},Fre=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i!=null)return i}},Us=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Be.transparent},a2=e=>e.fillStyle!=="solid"||Us(e.backgroundColor),y5=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},vC=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},L7=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||hF},Bre=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},zre=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},Yw=e=>{e.preventDefault(),e.returnValue=""},DF=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),ag=()=>Date.now(),we=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Hre=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),ga=(e,t)=>e.reduce((n,i,r)=>(n[t?t(i):r]=i,n),{}),Vre=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Fl=e=>Array.isArray(e)?e:e.values(),$re=e=>Array.isArray(e)?e:Array.from(Fl(e)),Gre=()=>cF.TEST==="production",NF=()=>cF.DEVELOPMENT==="production",Xre=()=>typeof process<"u"&&!0,OF=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),l2=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},Qm=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Yre=()=>Qm()==="iframe",Jm=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,D7=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},wC=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Gi=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||wC(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||wC(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},E5=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Yo=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function Kn(e,t){if(!e)throw new Error(t)}const jre=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},PF=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Xa=e=>JSON.parse(JSON.stringify(e)),Kg=(e,t)=>Gi(e,t)?e:t;function Qt(e,t,n,i){var r;return e?((r=e==null?void 0:e.addEventListener)==null||r.call(e,t,n,i),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,i)}):()=>{}}function Wre(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${dU(r[0],s[0]).toFixed(2)},${dU(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${dU(i[0],r[0]).toFixed(2)},${dU(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const FF=e=>e.replace(/\r?\n|\r/g,`
`),jo=e=>e,Rc=async(e,...t)=>new Promise(n=>{n(e(...t))}),Kre=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Zre=e=>{try{return JSON.parse(e)}catch{return null}},c2=e=>e.replace(/"/g,"&quot;"),X8=e=>Array.isArray(e)?e:[e],qre=e=>Array.isArray(e),BF=e=>qre(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,zF=(e,t)=>{if(BF(e)===0)return null;const n=t||(r=>r);let i=null;for(const r of e){const s=n(r);if((i===null||i===s)&&s!=null)i=s;else return null}return i};let Qre=new MF(Date.now());const Ms=()=>Math.floor(Qre.next()*2**31),rr=()=>AF();var jw={};Object.defineProperty(jw,"__esModule",{value:!0});var HF=jw.sanitizeUrl=void 0,Jre=/^([^\w]*)(javascript|data|vbscript)/im,ese=/&#(\w+)(^\w|;)?/g,tse=/&(newline|tab);/gi,nse=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ise=/^.+(:|&colon;)/gim,rse=[".","/"];function sse(e){return rse.indexOf(e[0])>-1}function ose(e){return e.replace(ese,function(t,n){return String.fromCharCode(n)})}function ase(e){var t=ose(e||"").replace(tse,"").replace(nse,"").trim();if(!t)return"about:blank";if(sse(t))return t;var n=t.match(ise);if(!n)return t;var i=n[0];return Jre.test(i)?"about:blank":t}HF=jw.sanitizeUrl=ase;const Yr=e=>(e=e.trim(),e&&HF(c2(e))),VF=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),Ww=e=>{if(e=Yr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class $s{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}function $F(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=$F(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function me(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=$F(t))&&(i&&(i+=" "),i+=n);return i}var GF="Expected a function",_C=NaN,lse="[object Symbol]",cse=/^\s+|\s+$/g,use=/^[-+]0x[0-9a-f]+$/i,dse=/^0b[01]+$/i,fse=/^0o[0-7]+$/i,hse=parseInt,gse=typeof Ma=="object"&&Ma&&Ma.Object===Object&&Ma,mse=typeof self=="object"&&self&&self.Object===Object&&self,pse=gse||mse||Function("return this")(),Use=Object.prototype,bse=Use.toString,yse=Math.max,Ese=Math.min,Y8=function(){return pse.Date.now()};function vse(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(GF);t=TC(t)||0,Rb(n)&&(u=!!n.leading,d="maxWait"in n,s=d?yse(TC(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var _=i,T=r;return i=r=void 0,c=M,o=e.apply(T,_),o}function m(M){return c=M,a=setTimeout(E,t),u?h(M):o}function p(M){var _=M-l,T=M-c,C=t-_;return d?Ese(C,s-T):C}function U(M){var _=M-l,T=M-c;return l===void 0||_>=t||_<0||d&&T>=s}function E(){var M=Y8();if(U(M))return y(M);a=setTimeout(E,p(M))}function y(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:y(Y8())}function S(){var M=Y8(),_=U(M);if(i=arguments,r=this,l=M,_){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=w,S}function wse(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(GF);return Rb(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),vse(e,t,{leading:i,maxWait:t,trailing:r})}function Rb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function _se(e){return!!e&&typeof e=="object"}function Tse(e){return typeof e=="symbol"||_se(e)&&bse.call(e)==lse}function TC(e){if(typeof e=="number")return e;if(Tse(e))return _C;if(Rb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Rb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(cse,"");var n=dse.test(e);return n||fse.test(e)?hse(e.slice(2),n?2:8):use.test(e)?_C:+e}var Sse=wse;const Do=gl(Sse);function N7(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function Ise(e,t,n){const i=[];e.forEach(r=>i.push(...r)),N7(i,t,n)}function xse(e,t){return e[0]===t[0]&&e[1]===t[1]}function Cse(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)N7(c,a,r);const l=Ase(o,s,i);if(r){for(const c of o)N7(c,a,-r);Ise(l,a,-r)}return l}function Ase(e,t,n){const i=[];for(const c of e){const u=[...c];xse(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function ep(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),Cse(e,r,i,s||1)}class Kw{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=ep(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function v5(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class Mse extends Kw{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=ep(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)v5([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class Rse extends Kw{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class kse{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=ep(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=v5(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,U=f-o+Math.random()*2*o,E=p-o+Math.random()*2*o,y=this.helper.ellipse(U,E,s,s,n);i.push(...y.ops)}}return{type:"fillSketch",ops:i}}}class Lse{constructor(t){this.helper=t}fillPolygons(t,n){const i=ep(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=v5(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,U=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],E=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(U[0],U[1],E[0],E[1],n))}}),s}}class Dse{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=ep(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=v5(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],U=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],E=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],E[0],E[1],i),...this.helper.doubleLineOps(E[0],E[1],U[0],U[1],i))}}),r}}const ur={};function Nse(e,t){let n=e.fillStyle||"hachure";if(!ur[n])switch(n){case"zigzag":ur[n]||(ur[n]=new Mse(t));break;case"cross-hatch":ur[n]||(ur[n]=new Rse(t));break;case"dots":ur[n]||(ur[n]=new kse(t));break;case"dashed":ur[n]||(ur[n]=new Lse(t));break;case"zigzag-line":ur[n]||(ur[n]=new Dse(t));break;case"hachure":default:n="hachure",ur[n]||(ur[n]=new Kw(t));break}return ur[n]}const Ose=0,O7=1,XF=2,gU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Pse(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:Ose,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:O7,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:XF,text:""},t}function j8(e,t){return e.type===t}function Zw(e){const t=[],n=Pse(e);let i="BOD",r=0,s=n[r];for(;!j8(s,XF);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=gU[s.text],i=s.text;else return Zw("M0,0"+e);else j8(s,O7)?o=gU[i]:(r++,o=gU[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(j8(c,O7))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof gU[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function YF(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function jF(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,U=r+2*(m-r)/3,E=d+2*(h-d)/3,y=f+2*(m-f)/3;t.push({key:"C",data:[p,U,E,y,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,U=r+2*(f-r)/3,E=h+2*(d-h)/3,y=m+2*(f-m)/3;t.push({key:"C",data:[p,U,E,y,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],U=u[5],E=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,U,E,U,E]}),i=U,r=E):(i!==U||r!==E)&&(WF(i,r,U,E,d,f,h,m,p).forEach(function(v){t.push({key:"C",data:v})}),i=U,r=E);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function Fse(e){return Math.PI*e/180}function Zg(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function WF(e,t,n,i,r,s,o,a,l,c){const u=Fse(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Zg(e,t,-u),[n,i]=Zg(n,i,-u);const P=(e-n)/2,D=(t-i)/2;let $=P*P/(r*r)+D*D/(s*s);$>1&&($=Math.sqrt($),r=$*r,s=$*s);const z=a===l?-1:1,V=r*r,G=s*s,Y=V*G-V*D*D-G*P*P,X=V*D*D+G*P*P,Z=z*Math.sqrt(Math.abs(Y/X));m=Z*r*D/s+(e+n)/2,p=Z*-s*P/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let U=h-f;if(Math.abs(U)>Math.PI*120/180){const P=h,D=n,$=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=WF(n,i,D,$,r,s,o,0,l,[h,P,m,p])}U=h-f;const E=Math.cos(f),y=Math.sin(f),v=Math.cos(h),w=Math.sin(h),S=Math.tan(U/4),M=4/3*r*S,_=4/3*s*S,T=[e,t],C=[e+M*y,t-_*E],x=[n+M*w,i-_*v],R=[n,i];if(C[0]=2*T[0]-C[0],C[1]=2*T[1]-C[1],c)return[C,x,R].concat(d);{d=[C,x,R].concat(d);const P=[];for(let D=0;D<d.length;D+=3){const $=Zg(d[D][0],d[D][1],u),z=Zg(d[D+1][0],d[D+1][1],u),V=Zg(d[D+2][0],d[D+2][1],u);P.push([$[0],$[1],z[0],z[1],V[0],V[1]])}return P}}const Bse={randOffset:Gse,randOffsetWithRange:Xse,ellipse:Vse,doubleLineOps:Yse};function KF(e,t,n,i,r){return{type:"path",ops:nl(e,t,n,i,r)}}function u2(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...nl(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...nl(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return KF(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function zse(e,t){return u2(e,!0,t)}function Hse(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return zse(s,r)}function SC(e,t){let n=AC(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=AC(e,1.5*(1+t.roughness*.22),jse(t));n=n.concat(i)}return{type:"path",ops:n}}function Vse(e,t,n,i,r){const s=ZF(n,i,r);return P7(e,t,r,s).opset}function ZF(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Le(o*l,n),a+=Le(a*l,n),{increment:s,rx:o,ry:a}}function P7(e,t,n,i){const[r,s]=MC(i.increment,e,t,i.rx,i.ry,1,i.increment*kb(.1,kb(.4,1,n),n),n);let o=Lb(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=MC(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=Lb(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function IC(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Le(d*.01,l),f+=Le(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,U=Math.min(p/2,(m-h)/2),E=RC(U,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const y=RC(U,c,u,d,f,h,m,1.5,l);E.push(...y)}return o&&(a?E.push(...nl(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...nl(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):E.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:E}}function xC(e,t){const n=jF(YF(Zw(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...nl(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Wse(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...nl(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function W8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+Le(r,t),i[0][1]+Le(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+Le(r,t),i[o][1]+Le(r,t)]})}}return{type:"fillPath",ops:n}}function lf(e,t){return Nse(t,Bse).fillPolygons(e,t)}function $se(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Le(c*.01,o),u+=Le(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),lf([m],o)}function Gse(e,t){return Le(e,t)}function Xse(e,t,n){return kb(e,t,n)}function Yse(e,t,n,i,r){return nl(e,t,n,i,r,!0)}function jse(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function qF(e){return e.randomizer||(e.randomizer=new MF(e.seed||0)),e.randomizer.next()}function kb(e,t,n,i=1){return n.roughness*i*(qF(n)*(t-e)+e)}function Le(e,t,n=1){return kb(-e,e,t,n)}function nl(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=CC(e,t,n,i,r,!0,!1);if(o)return a;const l=CC(e,t,n,i,r,!0,!0);return a.concat(l)}function CC(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+qF(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=Le(h,r,c),m=Le(m,r,c);const p=[],U=()=>Le(d,r,c),E=()=>Le(u,r,c),y=r.preserveVertices;return o?p.push({op:"move",data:[e+(y?0:U()),t+(y?0:U())]}):p.push({op:"move",data:[e+(y?0:Le(u,r,c)),t+(y?0:Le(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+U(),m+t+(i-t)*f+U(),h+e+2*(n-e)*f+U(),m+t+2*(i-t)*f+U(),n+(y?0:U()),i+(y?0:U())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+E(),m+t+(i-t)*f+E(),h+e+2*(n-e)*f+E(),m+t+2*(i-t)*f+E(),n+(y?0:E()),i+(y?0:E())]}),p}function AC(e,t,n){const i=[];i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]),i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+Le(t,n),e[r][1]+Le(t,n)]),r===e.length-1&&i.push([e[r][0]+Le(t,n),e[r][1]+Le(t,n)]);return Lb(i,null,n)}function Lb(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...nl(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function MC(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=Le(.5,a)-Math.PI/2;u.push([Le(s,a)+t+.9*i*Math.cos(d-e),Le(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Le(s,a)+t+i*Math.cos(h),Le(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([Le(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Le(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([Le(s,a)+t+.98*i*Math.cos(d+o),Le(s,a)+n+.98*r*Math.sin(d+o)]),u.push([Le(s,a)+t+.9*i*Math.cos(d+o*.5),Le(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function RC(e,t,n,i,r,s,o,a,l){const c=s+Le(.1,l),u=[];u.push([Le(a,l)+t+.9*i*Math.cos(c-e),Le(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Le(a,l)+t+i*Math.cos(d),Le(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),Lb(u,null,l)}function Wse(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Le(c[0],a)),o[1]+(f?0:Le(c[0],a))]}),u=f?[r,s]:[r+Le(c[h],a),s+Le(c[h],a)],l.push({op:"bcurveTo",data:[e+Le(c[h],a),t+Le(c[h],a),n+Le(c[h],a),i+Le(c[h],a),u[0],u[1]]});return l}function qg(e){return[...e]}function Kse(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(qg(e[0]),qg(e[1]),qg(e[2]),qg(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(qg(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Zse(e,t){return Math.sqrt(d2(e,t))}function d2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function qse(e,t,n){const i=d2(t,n);if(i===0)return d2(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),d2(e,du(t,n,r))}function du(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Qse(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function F7(e,t,n,i){const r=i||[];if(Qse(e,t)<n){const s=e[t+0];r.length?Zse(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=du(o,a,.5),d=du(a,l,.5),f=du(l,c,.5),h=du(u,d,.5),m=du(d,f,.5),p=du(h,m,.5);F7([o,u,h,p],0,n,r),F7([p,m,f,c],0,n,r)}return r}function qw(e,t){return Db(e,0,e.length,t)}function Db(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=qse(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(Db(e,t,c+1,i,s),Db(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function tp(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;F7(e,o,t,i)}return n&&n>0?Db(i,0,i.length,n):i}function Jse(e,t,n){const i=Zw(e),r=jF(YF(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...tp(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=qw(f,n);h.length&&d.push(h)}return d}const Cr="none";class Th{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Mre()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[KF(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=Hse(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(W8([c],o)):a.push(lf([c],o))}return o.stroke!==Cr&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=ZF(i,r,o),c=P7(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=P7(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(lf([c.estimatedPoints],o));return o.stroke!==Cr&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[u2(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=IC(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=IC(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push($se(t,n,i,r,s,o,c));return c.stroke!==Cr&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=SC(t,i);if(i.fill&&i.fill!==Cr&&t.length>=3)if(i.fillStyle==="solid"){const o=SC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=Kse(t),a=tp(o,10,(1+i.roughness)/2);r.push(lf([a],i))}return i.stroke!==Cr&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=u2(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(W8([t],i)):r.push(lf([t],i))),i.stroke!==Cr&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Cr,o=i.stroke!==Cr,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Jse(t,1,l),u=xC(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=xC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(W8(c,i));else r.push(lf(c,i));return o&&(a?c.forEach(d=>{r.push(u2(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Cr};break;case"fillPath":o={d:this.opsToPath(s),stroke:Cr,strokeWidth:0,fill:i.fill||Cr};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Cr,strokeWidth:i,fill:Cr}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class eoe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Th(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const mU="http://www.w3.org/2000/svg";class toe{constructor(t,n){this.svg=t,this.gen=new Th(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(mU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(mU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(mU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(mU,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const jc={canvas(e,t){return new eoe(e,t)},svg(e,t){return new toe(e,t)},generator(e){return new Th(e)},newSeed(){return Th.newSeed()}};let QF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const noe=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=I(o,a);let c;return e.type==="diamond"?c=UC(q(I(o,s),l,t),q(I(r+n,a),l,t),q(I(o,s+i),l,t),q(I(r,a),l,t)):c=UC(q(I(r,s),l,t),q(I(r+n,s),l,t),q(I(r+n,s+i),l,t),q(I(r,s+i),l,t)),{type:"polygon",data:c}},ioe=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:I(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},Ad=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},roe=(e,t=I(0,0),n,i)=>{const r=l=>q(I(l[0]+t[0],l[1]+t[1]),i,n),s=Ad(e),o=[];let a=I(0,0);for(const l of s){if(l.op==="move"){const c=U5(l.data);Kn(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(I(l.data[0],l.data[1])),u=r(I(l.data[2],l.data[3])),d=r(I(l.data[4],l.data[5]));o.push(On(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},soe=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(Ae(t,r)),t=r}return n},ooe=(e,t,n=!1)=>{const i=s=>q(Ti(Mf(le(s),an(e.x,e.y))),t,e.angle),r=soe(e.points.map(s=>i(s)));return n?{type:"polygon",data:xb(r.flat())}:{type:"polyline",data:r}},aoe=(e,t,n=I(0,0),i,r)=>{const s=u=>q(I(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:xb(e.points.map(u=>s(u)))};const o=Ad(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(I(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(I(u.data[0],u.data[1])),a.push(I(u.data[2],u.data[3])),a.push(I(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(I(u.data[0],u.data[1]));const c=tp(a,10,5).map(u=>s(u));return{type:"polygon",data:xb(c)}};function kC(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function loe(e){return[-e[0],-e[1]]}function Hs(e,t){return[e[0]+t[0],e[1]+t[1]]}function is(e,t){return[e[0]-t[0],e[1]-t[1]]}function Bs(e,t){return[e[0]*t,e[1]*t]}function coe(e,t){return[e[0]/t,e[1]/t]}function Qg(e){return[e[1],-e[0]]}function LC(e,t){return e[0]*t[0]+e[1]*t[1]}function uoe(e,t){return e[0]===t[0]&&e[1]===t[1]}function doe(e){return Math.hypot(e[0],e[1])}function foe(e){return e[0]*e[0]+e[1]*e[1]}function DC(e,t){return foe(is(e,t))}function JF(e){return coe(e,doe(e))}function hoe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Jg(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function B7(e,t,n){return Hs(e,Bs(is(t,e),n))}function NC(e,t,n){return Hs(e,Bs(t,n))}var{min:Xd,PI:goe}=Math,OC=.275,e1=goe+1e-4;function moe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=G=>G,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=G=>G*(2-G)}=a,{cap:f=!0,easing:h=G=>--G*G*G+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,E=Math.pow(n*i,2),y=[],v=[],w=e.slice(0,10).reduce((G,Y)=>{let X=Y.pressure;if(s){let Z=Xd(1,Y.distance/n),Ue=Xd(1,1-Z);X=Xd(1,G+(Ue-G)*(Z*OC))}return(G+X)/2},e[0].pressure),S=kC(n,r,e[e.length-1].pressure,o),M,_=e[0].vector,T=e[0].point,C=T,x=T,R=C,P=!1;for(let G=0;G<e.length;G++){let{pressure:Y}=e[G],{point:X,vector:Z,distance:Ue,runningLength:re}=e[G];if(G<e.length-1&&m-re<3)continue;if(r){if(s){let $e=Xd(1,Ue/n),ot=Xd(1,1-$e);Y=Xd(1,w+(ot-w)*($e*OC))}S=kC(n,r,Y,o)}else S=n/2;M===void 0&&(M=S);let be=re<p?d(re/p):1,Ye=m-re<U?h((m-re)/U):1;S=Math.max(.01,S*Math.min(be,Ye));let je=(G<e.length-1?e[G+1]:e[G]).vector,St=G<e.length-1?LC(Z,je):1,hn=LC(Z,_)<0&&!P,Yn=St!==null&&St<0;if(hn||Yn){let $e=Bs(Qg(_),S);for(let ot=1/13,rn=0;rn<=1;rn+=ot)x=Jg(is(X,$e),X,e1*rn),y.push(x),R=Jg(Hs(X,$e),X,e1*-rn),v.push(R);T=x,C=R,Yn&&(P=!0);continue}if(P=!1,G===e.length-1){let $e=Bs(Qg(Z),S);y.push(is(X,$e)),v.push(Hs(X,$e));continue}let pi=Bs(Qg(B7(je,Z,St)),S);x=is(X,pi),(G<=1||DC(T,x)>E)&&(y.push(x),T=x),R=Hs(X,pi),(G<=1||DC(C,R)>E)&&(v.push(R),C=R),w=Y,_=Z}let D=e[0].point.slice(0,2),$=e.length>1?e[e.length-1].point.slice(0,2):Hs(e[0].point,[1,1]),z=[],V=[];if(e.length===1){if(!(p||U)||c){let G=NC(D,JF(Qg(is(D,$))),-(M||S)),Y=[];for(let X=1/13,Z=X;Z<=1;Z+=X)Y.push(Jg(G,D,e1*2*Z));return Y}}else{if(!(p||U&&e.length===1))if(u)for(let Y=1/13,X=Y;X<=1;X+=Y){let Z=Jg(v[0],D,e1*X);z.push(Z)}else{let Y=is(y[0],v[0]),X=Bs(Y,.5),Z=Bs(Y,.51);z.push(is(D,X),is(D,Z),Hs(D,Z),Hs(D,X))}let G=Qg(loe(e[e.length-1].vector));if(U||p&&e.length===1)V.push($);else if(f){let Y=NC($,G,S);for(let X=1/29,Z=X;Z<1;Z+=X)V.push(Jg(Y,$,e1*3*Z))}else V.push(Hs($,Bs(G,S)),Hs($,Bs(G,S*.99)),is($,Bs(G,S*.99)),is($,Bs(G,S)))}return y.concat(V,v.reverse(),z)}function poe(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(B7(a[0],h,m/4))}a.length===1&&(a=[...a,[...Hs(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):B7(d.point,a[h],o);if(uoe(d.point,m))continue;let p=hoe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:JF(is(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function Uoe(e,t={}){return moe(poe(e,t),t)}const ri=10,boe=(e,t,n,i,r,s,o,a)=>{var R,P;const{width:l,height:c}=il(e),u=i/l,d=r/c,f=(((R=e.crop)==null?void 0:R.x)??0)/u,h=(((P=e.crop)==null?void 0:P.y)??0)/d,m=q(I(s,o),ni(e,t),-e.angle);s=m[0],o=m[1];let p=e.width,U=e.height,E=e.crop??{x:0,y:0,width:i,height:r,naturalWidth:i,naturalHeight:r};const y=E.height,v=E.width,w=e.scale[0]===-1,S=e.scale[1]===-1;let M=o-e.y,_=s-e.x;n.includes("n")&&(U=Ge(e.height-M,ri,S?c-h:e.height+h)),n.includes("s")&&(M=o-e.y-e.height,U=Ge(e.height+M,ri,S?e.height+h:c-h)),n.includes("e")&&(_=s-e.x-e.width,p=Ge(e.width+_,ri,w?e.width+f:l-f)),n.includes("w")&&(p=Ge(e.width-_,ri,w?l-f:e.width+f));const T=D=>{D.height=U*d,D.width=p*u};T(E);const C=(D,$)=>{T($),D.includes("n")&&(S||($.y+=y-$.height)),D.includes("s")&&S&&($.y+=y-$.height),D.includes("e")&&w&&($.x+=v-$.width),D.includes("w")&&(w||($.x+=v-$.width))};switch(n){case"n":{if(a){const D=f+e.width/2,$=l-f-e.width/2,z=Math.min(D,$)*2;p=Ge(U*a,ri,z),U=p/a}C(n,E),a&&(E.x+=(v-E.width)/2);break}case"s":{if(a){const D=f+e.width/2,$=l-f-e.width/2,z=Math.min(D,$)*2;p=Ge(U*a,ri,z),U=p/a}C(n,E),a&&(E.x+=(v-E.width)/2);break}case"w":{if(a){const D=h+e.height/2,$=c-h-e.height/2,z=Math.min(D,$)*2;U=Ge(p/a,ri,z),p=U*a}C(n,E),a&&(E.y+=(y-E.height)/2);break}case"e":{if(a){const D=h+e.height/2,$=c-h-e.height/2,z=Math.min(D,$)*2;U=Ge(p/a,ri,z),p=U*a}C(n,E),a&&(E.y+=(y-E.height)/2);break}case"ne":{if(a)if(_>-M){const D=S?c-h:h+e.height;U=Ge(p/a,ri,D),p=U*a}else{const D=w?f+e.width:l-f;p=Ge(U*a,ri,D),U=p/a}C(n,E);break}case"nw":{if(a)if(_<M){const D=S?c-h:h+e.height;U=Ge(p/a,ri,D),p=U*a}else{const D=w?l-f:f+e.width;p=Ge(U*a,ri,D),U=p/a}C(n,E);break}case"se":{if(a)if(_>M){const D=S?h+e.height:c-h;U=Ge(p/a,ri,D),p=U*a}else{const D=w?f+e.width:l-f;p=Ge(U*a,ri,D),U=p/a}C(n,E);break}case"sw":{if(a)if(-_>M){const D=S?h+e.height:c-h;U=Ge(p/a,ri,D),p=U*a}else{const D=w?l-f:f+e.width;p=Ge(U*a,ri,D),U=p/a}C(n,E);break}}const x=yoe(e,n,p,U,!!a);return gC(E.width,E.naturalWidth)&&gC(E.height,E.naturalHeight)&&(E=null),{x:x[0],y:x[1],width:p,height:U,crop:E}},yoe=(e,t,n,i,r)=>{const[s,o,a,l]=q0(e,e.width,e.height,!0),c=I(s,o),u=I(a,l),d=Tb(c,u),[f,h,m,p]=q0(e,n,i,!0),U=m-f,E=p-h;let y=[...c];if(["n","w","nw"].includes(t)&&(y=[u[0]-Math.abs(U),u[1]-Math.abs(E)]),t==="ne"){const T=[c[0],u[1]];y=[T[0],T[1]-Math.abs(E)]}if(t==="sw"){const T=[u[0],c[1]];y=[T[0]-Math.abs(U),T[1]]}r&&(["s","n"].includes(t)&&(y[0]=d[0]-U/2),["e","w"].includes(t)&&(y[1]=d[1]-E/2));const v=e.angle,w=q(y,d,v),S=[y[0]+Math.abs(U)/2,y[1]+Math.abs(E)/2],M=q(S,d,v);y=q(w,M,-v);const _=[...y];return _[0]+=e.x-f,_[1]+=e.y-h,_},Eoe=(e,t)=>{if(e.crop){const{width:n,height:i}=il(e),[r,s,o,a,l,c]=Oe(e,t),u=le(q(I(r,s),I(l,c),e.angle)),d=le(q(I(o,s),I(l,c),e.angle)),f=Cs(wb(d,u)),h=le(q(I(r,a),I(l,c),e.angle)),m=wb(h,u),p=Cs(m),{cropX:U,cropY:E}=voe(e.crop,e.scale),y=Mf(Mf(u,xn(f,-U*n/e.crop.naturalWidth)),xn(p,-E*i/e.crop.naturalHeight)),v=Ti(Mf(Mf(y,xn(f,n/2)),xn(p,i/2))),w=q(Ti(y),v,-e.angle);return{...e,x:w[0],y:w[1],width:n,height:i,crop:null}}return e},il=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},voe=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},woe=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=il(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},l0=new WeakMap,Qw=(e,t)=>{const n=l0.get(e);if(!n)return;const{version:i,shapes:r}=n;if(i!==e.version){l0.delete(e);return}return r.get(t)},Jw=(e,t,n)=>{const i=l0.get(e);if(!i){l0.set(e,{version:e.version,shapes:new Map([[n,t]])});return}const{version:r,shapes:s}=i;if(r!==e.version){l0.set(e,{version:e.version,shapes:new Map([[n,t]])});return}s.set(n,t)};function Nb(e){const t=Qw(e,0);if(t)return t;const n=vle(e),i=[],r=[];for(let o=0;o<n.length;o+=1){const a=n[o],l=n[o-1]&&U5(n[o-1].data.slice(-2));switch(a.op){case"move":continue;case"lineTo":if(!l)throw new Error("prevPoint is undefined");i.push(Ae(I(e.x+l[0],e.y+l[1]),I(e.x+a.data[0],e.y+a.data[1])));continue;case"bcurveTo":if(!l)throw new Error("prevPoint is undefined");r.push(On(I(e.x+l[0],e.y+l[1]),I(e.x+a.data[0],e.y+a.data[1]),I(e.x+a.data[2],e.y+a.data[3]),I(e.x+a.data[4],e.y+a.data[5])));continue;default:console.error("Unknown op type",a.op)}}const s=[i,r];return Jw(e,s,0),s}function e9(e,t=0){const n=Qw(e,t);if(n)return n;let i=nr(Math.min(e.width,e.height),e);i===0&&(i=.01);const r=xre(I(e.x,e.y),I(e.x+e.width,e.y+e.height)),s=Ae(I(r[0][0]+i,r[0][1]),I(r[1][0]-i,r[0][1])),o=Ae(I(r[1][0],r[0][1]+i),I(r[1][0],r[1][1]-i)),a=Ae(I(r[0][0]+i,r[1][1]),I(r[1][0]-i,r[1][1])),l=Ae(I(r[0][0],r[1][1]-i),I(r[0][0],r[0][1]+i)),c=[On(l[1],I(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1])),I(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1])),s[0]),On(s[1],I(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1])),I(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1])),o[0]),On(o[1],I(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1])),I(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1])),a[1]),On(a[0],I(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1])),I(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1])),l[0])],u=t>0?c.map(h=>Gw(yo(h,t))):[[c[0]],[c[1]],[c[2]],[c[3]]],f=[[Ae(u[0][u[0].length-1][3],u[1][0][0]),Ae(u[1][u[1].length-1][3],u[2][0][0]),Ae(u[2][u[2].length-1][3],u[3][0][0]),Ae(u[3][u[3].length-1][3],u[0][0][0])],u.flat()];return Jw(e,f,t),f}function t9(e,t=0){const n=Qw(e,t);if(n)return n;const[i,r,s,o,a,l,c,u]=Wb(e),d=e.roundness?nr(Math.abs(i-c),e):(i-c)*.01,f=e.roundness?nr(Math.abs(o-r),e):(o-r)*.01,[h,m,p,U]=[I(e.x+i,e.y+r),I(e.x+s,e.y+o),I(e.x+a,e.y+l),I(e.x+c,e.y+u)],E=[On(I(m[0]-d,m[1]-f),m,m,I(m[0]-d,m[1]+f)),On(I(p[0]+d,p[1]-f),p,p,I(p[0]-d,p[1]-f)),On(I(U[0]+d,U[1]+f),U,U,I(U[0]+d,U[1]-f)),On(I(h[0]-d,h[1]+f),h,h,I(h[0]+d,h[1]+f))],y=t>0?E.map(S=>Gw(yo(S,t))):[[E[0]],[E[1]],[E[2]],[E[3]]],w=[[Ae(y[0][y[0].length-1][3],y[1][0][0]),Ae(y[1][y[1].length-1][3],y[2][0][0]),Ae(y[2][y[2].length-1][3],y[3][0][0]),Ae(y[3][y[3].length-1][3],y[0][0][0])],y.flat()];return Jw(e,w,t),w}const Wo=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return gt(n,i)<=o2/t}return!1},nr=(e,t)=>{var n,i,r,s;if(((n=t.roundness)==null?void 0:n.type)===dn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===dn.LEGACY)return e*V8;if(((r=t.roundness)==null?void 0:r.type)===dn.ADAPTIVE_RADIUS){const o=((s=t.roundness)==null?void 0:s.value)??sre,a=o/V8;return e<=a?e*V8:o}return 0},In=e=>!!e&&e.type==="image"&&!!e.fileId,wt=e=>!!e&&e.type==="image",fr=e=>!!e&&e.type==="embeddable",Bl=e=>!!e&&e.type==="iframe",fs=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),ue=e=>e!=null&&e.type==="text",eB=e=>e!=null&&e.type==="frame",f2=e=>e!=null&&e.type==="magicframe",Ee=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),vr=e=>e!=null&&_oe(e.type),_oe=e=>e==="freedraw",Ie=e=>e!=null&&n9(e.type),ln=e=>e!=null&&e.type==="line",xe=e=>e!=null&&e.type==="arrow",de=e=>xe(e)&&e.elbowed,Toe=e=>xe(e)&&!e.elbowed,Soe=e=>xe(e)&&!e.elbowed&&!e.roundness,Ioe=e=>xe(e)&&!e.elbowed&&e.roundness!==null,n9=e=>e==="arrow"||e==="line",Oa=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&tB(e.type),tB=e=>e==="arrow",ro=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),xoe=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Hu=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||xe(e)),nB=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Yo(t,null),!1}},w5=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",sr=e=>{var t;return Hu(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Bt=e=>e!==null&&"containerId"in e&&e.containerId!==null&&ue(e),iB=e=>!!e.startBinding||!!e.endBinding,Md=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",rB=e=>e==="line"||e==="arrow"||e==="diamond",Coe=(e,t)=>!!((e===dn.ADAPTIVE_RADIUS||e===dn.LEGACY)&&Md(t.type)||e===dn.PROPORTIONAL_RADIUS&&rB(t.type)),Aoe=e=>rB(e.type)?{type:dn.PROPORTIONAL_RADIUS}:Md(e.type)?{type:dn.ADAPTIVE_RADIUS}:null,Ob=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,Kf=e=>Soe(e)?"sharpArrow":Ioe(e)?"curvedArrow":de(e)?"elbowArrow":"line",z7=e=>e.length>3&&As(e[0],e[e.length-1]),sB=e=>e.length>3||e.length===3&&!As(e[0],e[e.length-1]),Sh={},Pb=(e,t)=>{const n=Sh[e]||(Sh[e]={height:t});return n.height=t,n},oB=e=>{Sh[e]&&delete Sh[e]},Moe=e=>{var t;return((t=Sh[e])==null?void 0:t.height)??null},Hn=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=Doe(i,r,n);return{width:s9(i,t),height:s}},aB="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),lB=(e,t)=>{const n=Noe(e);return n===0?Hn(aB.split("").join(`
`),e,t).width+Fn*2:n+Fn*2},i9=(e,t)=>Hn("",e,t).width+Fn*2,Roe=()=>s9(aB,dt({fontSize:Ul,fontFamily:Yc}))>0,Ih=e=>FF(e).replace(/\t/g,"        "),r9=e=>Ih(e).split(`
`),koe=e=>{const t=r9(e.text).length;return e.height/t/e.fontSize},np=(e,t)=>e*t,cB=(e,t)=>np(e,t)+Fn*2;let K8;class Loe{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const sd=(e,t)=>(K8||(K8=new Loe),K8.getLineWidth(e,t)),s9=(e,t)=>{const n=r9(e);let i=0;return n.forEach(r=>{i=Math.max(i,sd(r,t))}),i},Doe=(e,t,n)=>{const i=r9(e).length;return np(t,n)*i},ip=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=sd(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),Noe=e=>{const t=ip.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let Z8,pU,q8;const Ooe=e=>(Z8||(Z8=Et.class(...Object.values(ya))),Z8.test(e)),Poe=()=>{if(!pU)try{pU=Boe()}catch{pU=Foe()}return pU},o9=()=>(q8||(q8=zoe()),q8),ts={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},ya={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},ru={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},Foe=()=>Et.or(o9(),pn.On(ts.HYPHEN,ts.WHITESPACE,ya.CHAR)),Boe=()=>Et.or(o9(),pn.Before(ts.WHITESPACE).Build(),pn.After(ts.WHITESPACE,ts.HYPHEN).Build(),pn.Before(ya.CHAR,ya.CURRENCY).NotPrecededBy(ts.OPENING,ya.OPENING).Build(),pn.After(ya.CHAR).NotFollowedBy(ts.HYPHEN,ts.CLOSING,ya.CLOSING).Build(),pn.BeforeMany(ya.OPENING).NotPrecededBy(ts.OPENING).Build(),pn.AfterMany(ya.CLOSING).NotFollowedBy(ts.CLOSING).Build(),pn.AfterMany(ts.CLOSING).FollowedBy(ts.OPENING).Build()),zoe=()=>Et.group(Et.or(ru.FLAG,Et.and(ru.MOST,ru.JOINER,Et.build(`(?:${ru.ZWJ.source}(?:${ru.FLAG.source}|${ru.ANY.source}${ru.JOINER.source}))*`)))),Et={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>Et.build(Et.join(...e)),or:(...e)=>Et.build(e.map(t=>t.source).join("|")),group:(...e)=>Et.build(`(${Et.join(...e)})`),class:(...e)=>Et.build(`[${Et.join(...e)}]`)},pn={On:(...e)=>{const t=Et.join(...e);return Et.build(`([${t}])`)},Before:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?=[${t}])`);return pn.Chain(n)},After:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<=[${t}])`);return pn.Chain(n)},BeforeMany:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<![${t}])(?=[${t}])`);return pn.Chain(n)},AfterMany:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<=[${t}])(?![${t}])`);return pn.Chain(n)},NotBefore:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?![${t}])`);return pn.Chain(n)},NotAfter:(...e)=>{const t=Et.join(...e),n=()=>Et.build(`(?<![${t}])`);return pn.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=pn.After(...t).Build(),r=()=>Et.and(i,n);return pn.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=pn.Before(...t).Build(),r=()=>Et.and(n,i);return pn.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=pn.NotAfter(...t).Build(),r=()=>Et.and(i,n);return pn.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=pn.NotBefore(...t).Build(),r=()=>Et.and(n,i);return pn.Chain(r)}})},Hoe=e=>{const t=Poe();return e.normalize("NFC").split(t).filter(Boolean)},Wc=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(sd(s,t)<=n){i.push(s);continue}const a=Voe(s,t,n);i.push(...a)}return i.join(`
`)},Voe=(e,t,n)=>{const i=[],s=Hoe(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=Xoe(c)?a+ip.calculate(c,t):sd(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=$oe(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=sd(h,t),l=s.next()}}if(o){const c=Goe(o,t,n);i.push(c)}return i},$oe=(e,t,n)=>{if(o9().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=ip.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},Goe=(e,t,n)=>{if(!(sd(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=sd(r,t);for(const a of Array.from(s)){const l=ip.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},Xoe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Yi=(e,t,n)=>{const i=n.getNonDeletedElementsMap();let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?xe(t)?0:t.angle:e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?Zo(t,e):e.width,s.text=Wc(e.originalText,dt(e),r));const o=Hn(s.text,dt(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=sp(t,e),l=Zo(t,e);if(!xe(t)&&o.height>a){const f=od(o.height,t.type);n.mutateElement(t,{height:f}),Pb(t.id,f)}if(o.width>l){const f=od(o.width,t.type);n.mutateElement(t,{width:f})}const c={...e,...s},{x:u,y:d}=lg(t,c,i);s.x=u,s.y=d}n.mutateElement(e,s)},rp=(e,t,n,i=!1)=>{const r=t.getNonDeletedElementsMap();if(!Ko(e))return;oB(e.id);const o=ke(e,r);if(o&&o.text){if(!e)return;let a=o.text,l=o.height,c=o.width;const u=Zo(e,o),d=sp(e,o);let f=e.height;if(i||n!=="n"&&n!=="s"){a&&(a=Wc(o.originalText,dt(o),u));const h=Hn(a,dt(o),o.lineHeight);l=h.height,c=h.width}if(l>d){f=od(l,e.type);const h=f-e.height,m=!xe(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-h:e.y;t.mutateElement(e,{height:f,y:m})}t.mutateElement(o,{text:a,width:c,height:l}),xe(e)||t.mutateElement(o,lg(e,o,r))}},lg=(e,t,n)=>{if(xe(e))return ce.getBoundTextElementPosition(e,t,n);const i=Yoe(e),r=sp(e,t),s=Zo(e,t);let o,a;return t.verticalAlign===zr.TOP?a=i.y:t.verticalAlign===zr.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===j0.LEFT?o=i.x:t.textAlign===j0.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2),{x:o,y:a}},Ko=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(r=>r.type==="text"))==null?void 0:i.id)||null},ke=(e,t)=>{if(!e)return null;const n=Ko(e);return n&&t.get(n)||null},Vn=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,Q8=(e,t,n)=>{if(!xe(e))return{x:e.x+e.width/2,y:e.y+e.height/2};if(ce.getPointsGlobalCoordinates(e,n).length%2===1){const o=Math.floor(e.points.length/2),a=ce.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=ce.getEditorMidPoints(e,n,t)[r];return s||(s=ce.getSegmentMidPoint(e,r+1)),{x:s[0],y:s[1]}},Yoe=e=>{let t=Fn,n=Fn;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},joe=(e,t)=>xe(t)?0:t?t.angle:e.angle,Woe=(e,t)=>e.some(n=>{if(Bt(n)){const i=Vn(n,t);return!xe(i)}return!1}),Koe=(e,t)=>e.some(n=>{if(Bt(n)){const i=Vn(n,t);return!xe(i)}return ue(n)}),Zoe=new Set(["rectangle","ellipse","diamond","arrow"]),qoe=e=>Zoe.has(e.type),od=(e,t)=>{e=Math.ceil(e);const n=Fn*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Zo=(e,t)=>{const{width:n}=e;if(xe(e)){const i=((t==null?void 0:t.fontSize)??Ul)*ire;return Math.max(nre*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},sp=(e,t)=>{const{height:n}=e;return xe(e)?n-Fn*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},uB=(e,t=`

`)=>e.reduce((i,r)=>(ue(r)&&i.push(r.text),i),[]).join(t),op=(e,t,n)=>{switch(e.type){case"selection":case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Qoe(e,t,n);case"diamond":return Joe(e,t,n);case"ellipse":return eae(e,t,n);case"line":case"arrow":case"freedraw":return tae(e,n)}},Qoe=(e,t,n)=>{const i=ni(e,t),r=q(n,i,-e.angle),[s,o]=e9(e);return Math.min(...s.map(a=>b5(r,a)),...o.map(a=>Vw(a,r)).filter(a=>a!==null))},Joe=(e,t,n)=>{const i=ni(e,t),r=q(n,i,-e.angle),[s,o]=t9(e);return Math.min(...s.map(a=>b5(r,a)),...o.map(a=>Vw(a,r)).filter(a=>a!==null))},eae=(e,t,n)=>{const i=ni(e,t);return vre(q(n,i,-e.angle),IF(i,e.width/2,e.height/2))},tae=(e,t)=>{const[n,i]=Nb(e);return Math.min(...n.map(r=>b5(t,r)),...i.map(r=>Vw(r,t)))},Fb=e=>{if(e.type==="arrow")return!1;const t=!Us(e.backgroundColor)||sr(e)||fs(e)||ue(e);return e.type==="line"||e.type==="freedraw"?t&&Wo(e.points):t||wt(e)},cf=({point:e,element:t,threshold:n,elementsMap:i,frameNameBound:r=null})=>{const s=r?W0(I(r.x-n,r.y-n),e,I(r.x+r.width+n,r.y+r.height+n)):!1,o=xi(t,i,!0);return!W0(I(o[0]-n,o[1]-n),q(e,fg(o),-t.angle),I(o[2]+n,o[3]+n))&&!s?!1:Fb(t)&&a9(e,t,i)||PC(e,t,i,n)||s},_5=(e,t,n,i=0)=>{let[r,s,o,a]=xi(t,n);return r-=i,s-=i,o+=i,a+=i,W0(I(r,s),e,I(o,a))},nae=(e,t)=>!cf(e)&&!dB(e.point,e.element,t)&&_5(e.point,e.element,t),dB=(e,t,n)=>{const i=ke(t,n);if(!i)return!1;const r=Ie(t)?{...i,...ce.getBoundTextElementPosition(t,i,n)}:i;return a9(e,r,n)},rl=(e,t,n,i=0,r=!1)=>{const s=[Math.min(n[0][0]-i,n[1][0]-i),Math.min(n[0][1]-i,n[1][1]-i),Math.max(n[0][0]+i,n[1][0]+i),Math.max(n[0][1]+i,n[1][1]+i)],o=xi(e,t);if(!hg(s,o))return[];switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"selection":case"magicframe":return rae(e,t,n,i,r);case"diamond":return sae(e,t,n,i,r);case"ellipse":return oae(e,t,n,i);case"line":case"freedraw":case"arrow":return iae(e,n,r)}},fB=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=T9(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!hg(a,l))continue;const c=SF(o,t);if(c.length>0){for(const u of c)n.push(q(u,i,r));if(s)return n}}return n},hB=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=Ib(o,t);if(a&&(n.push(q(a,i,r)),s))return n}return n},iae=(e,t,n=!1)=>{const[i,r]=Nb(e),s=[];for(const o of i){const a=Ib(o,t);if(a&&(s.push(a),n))return s}for(const o of r){const a=T9(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!hg(a,l))continue;const c=SF(o,t);if(c.length>0&&(s.push(...c),n))return s}return s},rae=(e,t,n,i=0,r=!1)=>{const s=ni(e,t),o=q(n[0],s,-e.angle),a=q(n[1],s,-e.angle),l=Ae(o,a),[c,u]=e9(e,i),d=[];return hB(c,l,d,s,e.angle,r),r&&d.length>0||fB(u,l,d,s,e.angle,r),d},sae=(e,t,n,i=0,r=!1)=>{const s=ni(e,t),o=q(n[0],s,-e.angle),a=q(n[1],s,-e.angle),l=Ae(o,a),[c,u]=t9(e,i),d=[];return hB(c,l,d,s,e.angle,r),r&&d.length>0||fB(u,l,d,s,e.angle,r),d},oae=(e,t,n,i=0)=>{const r=ni(e,t),s=q(n[0],r,-e.angle),o=q(n[1],r,-e.angle);return wre(IF(r,e.width/2+i,e.height/2+i),Ae(s,o)).map(a=>q(a,r,e.angle))},PC=(e,t,n,i=1)=>op(t,n,e)<=i,a9=(e,t,n)=>{if((Ie(t)||vr(t))&&!Wo(t.points))return!1;const[i,r,s,o]=xi(t,n);if(!W0(I(i,r),e,I(s,o)))return!1;const a=I((i+s)/2,(r+o)/2),l=Ti(xn(Cs(le(e,a,.1)),Math.max(t.width,t.height)*2),a),c=Ae(e,l);return rl(t,n,c).filter((d,f,h)=>h.findIndex(m=>As(m,d))===f).length%2===1},Pn=[1,0],er=[0,1],hs=[-1,0],Ws=[0,-1],xh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?Pn:t<=-r?hs:n>i?er:Ws},kr=(e,t)=>xh(le(e,t)),Ca=(e,t)=>No(kr(e,t)),Bn=(e,t)=>e[0]===t[0]&&e[1]===t[1],No=e=>Bn(e,Pn)||Bn(e,hs),aae=(e,t,n)=>{const i=fg(t),r=.95,s=Ti(xn(le(q(I(e.x+e.width/2,e.y),i,e.angle),i),r),i),o=Ti(xn(le(q(I(e.x+e.width,e.y+e.height/2),i,e.angle),i),r),i),a=Ti(xn(le(q(I(e.x+e.width/2,e.y+e.height),i,e.angle),i),r),i),l=Ti(xn(le(q(I(e.x,e.y+e.height/2),i,e.angle),i),r),i);if(ht(le(n,s),le(s,o))<=0&&ht(le(n,s),le(s,l))>0)return kr(s,i);if(ht(le(n,o),le(o,a))<=0&&ht(le(n,o),le(o,s))>0)return kr(o,i);if(ht(le(n,a),le(a,l))<=0&&ht(le(n,a),le(a,o))>0)return kr(a,i);if(ht(le(n,l),le(l,s))<=0&&ht(le(n,l),le(l,a))>0)return kr(l,i);if(ht(le(n,i),le(s,i))<=0&&ht(le(n,i),le(o,i))>0){const u=e.width>e.height?s:o;return kr(u,i)}else if(ht(le(n,i),le(o,i))<=0&&ht(le(n,i),le(a,i))>0){const u=e.width>e.height?a:o;return kr(u,i)}else if(ht(le(n,i),le(a,i))<=0&&ht(le(n,i),le(l,i))>0){const u=e.width>e.height?a:l;return kr(u,i)}const c=e.width>e.height?s:l;return kr(c,i)},l9=(e,t,n)=>{const r=fg(t);if(e.type==="diamond")return aae(e,t,n);const s=T1(I(t[0],t[1]),r,2),o=T1(I(t[2],t[1]),r,2),a=T1(I(t[0],t[3]),r,2),l=T1(I(t[2],t[3]),r,2);return G8([s,o,r],n)?Ws:G8([o,l,r],n)?Pn:G8([l,a,r],n)?er:hs},gB=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],c9=1,wn=40,lae=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>I(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=kr(o,l[a-1]),u=kr(l[a-1],l[a-2]);if(Bn(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=I(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(gt(l[a-2],l[a-1])<c9){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=Ca(o,l[a-1]);return r.push(I(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?Ya(f9(h9(d9(e,u9(e,t,r.map(o=>I(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):Ya(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},cae=(e,t,n)=>{var C,x;const i=t.map(R=>R.index),s=(((C=e.fixedSegments)==null?void 0:C.map(R=>R.index))??[]).findIndex(R=>!i.includes(R));if(s===-1||!((x=e.fixedSegments)!=null&&x[s]))return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredStartElement:E,hoveredEndElement:y,...v}=u9({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[I(0,0),I(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:w}=Ya(f9(h9(d9(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredEndElement:y,...v})??[])),t,null,null),S=[];if(a)for(let R=0;R<a.index;R++)S.push(I(e.x+e.points[R][0],e.y+e.points[R][1]));if(w.forEach(R=>{S.push(I(e.x+(a?a.end[0]:0)+R[0],e.y+(a?a.end[1]:0)+R[1]))}),l)for(let R=l.index;R<e.points.length;R++)S.push(I(e.x+e.points[R][0],e.y+e.points[R][1]));const M=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,_=t.map(R=>R.index>o?{...R,index:R.index-M+(w.length-1)}:R),T=S.flatMap((R,P)=>{const D=S[P-1],$=S[P+1];if(D&&$){const z=kr(R,D),V=kr($,R);if(Bn(z,V))return _.forEach(G=>{G.index>P&&(G.index-=1)}),[];if(Bn(z,gB(V)))return _.forEach(G=>{G.index>P&&(G.index+=1)}),[R,R]}return[R]});return Ya(T,_,!1,!1)},uae=(e,t,n,i,r,s)=>{var S,M;const o=t.map((_,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==_.index||(_.start[0]!==e.fixedSegments[T].start[0]&&_.end[0]!==e.fixedSegments[T].end[0])!=(_.start[1]!==e.fixedSegments[T].start[1]&&_.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(_=>_!==null).shift();if(o==null)return{points:e.points};const a=((S=e.fixedSegments)==null?void 0:S.findIndex(_=>_.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(_=>_.index===e.points.length-1))??-1,c=gt(t[o].start,t[o].end),u=c<wn+5;if(a===-1&&t[o].index===1&&r){const _=No(n),C=(_?Bn(n,Pn):Bn(n,er))?u?c/2:wn:u?-c/2:-40;t[o].start=I(t[o].start[0]+(_?C:0),t[o].start[1]+(_?0:C))}if(l===-1&&t[o].index===e.points.length-1&&s){const _=No(i),C=(_?Bn(i,Pn):Bn(i,er))?u?c/2:wn:u?-c/2:-40;t[o].end=I(t[o].end[0]+(_?C:0),t[o].end[1]+(_?0:C))}const d=t.map(_=>({..._,start:I(e.x+_.start[0],e.y+_.start[1]),end:I(e.x+_.end[0],e.y+_.end[1])})),f=e.points.map((_,T)=>I(e.x+_[0],e.y+_[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,U=d[o].end,E=f[h-1]&&!As(f[h],f[h-1])?Ca(f[h-1],f[h]):void 0,y=f[m+1]&&!As(f[m],f[m+1])?Ca(f[m+1],f[m]):void 0;if(E!==void 0){const _=E?1:0;f[h-1][_]=p[_]}if(f[h]=p,f[m]=U,y!==void 0){const _=y?1:0;f[m+1][_]=U[_]}const v=d.findIndex(_=>_.index===h);if(v!==-1){const _=Ca(d[v].end,d[v].start)?1:0;d[v].start[_]=p[_],d[v].end=p}const w=d.findIndex(_=>_.index===m+1);if(w!==-1){const _=Ca(d[w].end,d[w].start)?1:0;d[w].end[_]=U[_],d[w].start=U}if(a===-1&&h===0){const _=r?No(n):Ca(f[1],f[0]);f.unshift(I(_?p[0]:e.x+e.points[0][0],_?e.y+e.points[0][1]:p[1])),r&&f.unshift(I(e.x+e.points[0][0],e.y+e.points[0][1]));for(const T of d)T.index+=r?2:1}if(l===-1&&m===e.points.length-1){const _=No(i);f.push(I(_?U[0]:e.x+e.points[e.points.length-1][0],_?e.y+e.points[e.points.length-1][1]:U[1])),s&&f.push(I(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Ya(f,d.map(_=>({..._,start:I(_.start[0]-e.x,_.start[1]-e.y),end:I(_.end[0]-e.x,_.end[1]-e.y)})),!1,!1)},dae=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((U,E)=>E===0||E===t.length-1?I(e.x+U[0],e.y+U[1]):I(e.x+e.points[E][0],e.y+e.points[E][1])),f=n.map(U=>({...U,start:I(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:I(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const U=d[c?2:1],E=d[c?3:2],y=No(i),v=No(xh(le(U,E)));if(a&&y===v){const w=y?Bn(i,Pn):Bn(i,er);if(h.unshift(I(v?s[0]+(w?wn:-40):E[0],v?E[1]:s[1]+(w?wn:-40))),h.unshift(I(y?s[0]+(w?wn:-40):s[0],y?s[1]:s[1]+(w?wn:-40))),!c){c=!0;for(const S of f)S.index>1&&(S.index+=1)}}else if(h.unshift(I(v?s[0]:U[0],v?U[1]:s[1])),c){c=!1;for(const w of f)w.index>1&&(w.index-=1)}h.unshift(s)}{const U=d[d.length-(u?3:2)],E=d[d.length-(u?4:3)],y=No(r),v=Ca(E,U);if(l&&y===v){const w=y?Bn(r,Pn):Bn(r,er);h.push(I(v?o[0]+(w?wn:-40):E[0],v?E[1]:o[1]+(w?wn:-40))),h.push(I(y?o[0]+(w?wn:-40):o[0],y?o[1]:o[1]+(w?wn:-40))),u||(u=!0)}else h.push(I(v?o[0]:U[0],v?U[1]:o[1])),u&&(u=!1)}return h.push(o),Ya(h,f.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:I(U.start[0]-s[0],U.start[1]-s[1]),end:I(U.end[0]-s[0],U.end[1]-s[1])})),c,u)},UU=1e6,cg=(e,t,n,i)=>{var S;if(e.points.length<2)return{points:n.points??e.points};const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((M,_)=>_===0?n.points[0]:_===e.points.length-1?n.points[1]:M):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&Bb(c.elementId,t),f=u&&Bb(u.elementId,t),h=pB(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return Ya(s.map(M=>I(e.x+M[0],e.y+M[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:E,hoveredStartElement:y,hoveredEndElement:v,...w}=u9({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?Ya(s.map(M=>I(e.x+M[0],e.y+M[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?lae(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((M,_)=>As(M,e.points[_]??I(1/0,1/0)))&&h?{}:r.length===0?Ya(f9(h9(d9(e,{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:E,hoveredEndElement:v,...w})??[])),r,null,null):(((S=e.fixedSegments)==null?void 0:S.length)??0)>r.length?cae(e,r,t):n.points?n.points&&n.fixedSegments?n:dae(e,s,r,m,p,U,E,y,v):uae(e,r,m,p,y,v)},u9=(e,t,n,i)=>{var S,M;const r=_b(n[0],an(e.x,e.y)),s=_b(n[n.length-1],an(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const _=Array.from(t.values());o=HC(r,t,_,i==null?void 0:i.zoom)||null,a=HC(s,t,_,i==null?void 0:i.zoom)||null}else o=e.startBinding&&Bb(e.startBinding.elementId,t)||null,a=e.endBinding&&Bb(e.endBinding.elementId,t)||null;const l=BC({...e,type:"arrow",elbowed:!0,points:n},"start",(S=e.startBinding)==null?void 0:S.fixedPoint,r,o,t,i==null?void 0:i.isDragging),c=BC({...e,type:"arrow",elbowed:!0,points:n},"end",(M=e.endBinding)==null?void 0:M.fixedPoint,s,a,t,i==null?void 0:i.isDragging),u=zC(l,c,o,r,t),d=zC(c,l,a,s,t),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?Ea(o,t,Sl(u,e.startArrowhead?Ct*6:Ct*2,1)):f,p=a?Ea(a,t,Sl(d,e.endArrowhead?Ct*6:Ct*2,1)):h,U=Q0(l,a?Ea(a,t,Sl(d,wn,wn)):h)||Q0(c,o?Ea(o,t,Sl(u,wn,wn)):f),E=mB(U?[f,h]:[m,p]),y=gae(U?f:m,U?h:p,E,U?Sl(u,!o&&!a?0:wn,0):Sl(u,!o&&!a?0:wn-(e.startArrowhead?Ct*6:Ct*2),wn),U?Sl(d,!o&&!a?0:wn,0):Sl(d,!o&&!a?0:wn-(e.endArrowhead?Ct*6:Ct*2),wn),U,o&&Ea(o,t),a&&Ea(a,t)),v=FC(y[0],u,l),w=FC(y[1],d,c);return{dynamicAABBs:y,startDonglePosition:v,startGlobalPoint:l,startHeading:u,endDonglePosition:w,endGlobalPoint:c,endHeading:d,commonBounds:E,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:U,startElementBounds:m,endElementBounds:p}},d9=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=mae(n,i||r,s,o||a,l,c),f=i&&bU(i,d),h=o&&bU(o,d),m=bU(a,d);m&&u&&(m.closed=!0);const p=bU(r,d);p&&e.startBinding&&(p.closed=!0);const U=f&&h&&(Q0(f.pos,n[1])||Q0(h.pos,n[0])),E=fae(f||p,h||m,d,s||Pn,l||Pn,U?[]:n);if(E){const y=E.map(v=>[v.pos[0],v.pos[1]]);return f&&y.unshift(r),h&&y.push(a),y}return null},Sl=(e,t,n)=>{switch(e){case Ws:return[t,n,n,n];case Pn:return[n,t,n,n];case er:return[n,n,t,n]}return[n,n,n,t]},fae=(e,t,n,i,r,s)=>{const o=J8(e.pos,t.pos),a=new oie(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return hae(e,l);l.closed=!0;const c=Uae(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=T1(d.pos,l.pos,.5);if(Kre(...s.map(w=>Q0(f,w))))continue;const h=bae(u),m=l.parent?xh(le(l.pos,l.parent.pos)):i,p=gB(m);if(Bn(p,h)||VC(e.addr,d.addr)&&Bn(h,i)||VC(t.addr,d.addr)&&Bn(h,r))continue;const E=m!==h,y=l.g+J8(d.pos,l.pos)+(E?Math.pow(o,3):0),v=d.visited;if(!v||y<d.g){const w=pae(d,t,h,r);d.visited=!0,d.parent=l,d.h=J8(t.pos,d.pos)+w*Math.pow(o,2),d.g=y,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},hae=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},J8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),gae=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,U,E]=r??[0,0,0,0],y=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],v=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-E):(c[0]+l[2])/2:t[0]>e[0]?t[0]-E:n[0]-E,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+U):(c[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],w=mB([y,v]);if(!s&&y[2]-y[0]+v[2]-v[0]>w[2]-w[0]+1e-11&&y[3]-y[1]+v[3]-v[1]>w[3]-w[1]+1e-11){const[S,M]=[(v[0]+v[2])/2,(v[1]+v[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const _=y[2]+(v[0]-y[2])/2,T=v[3]+(y[1]-v[3])/2;return ht(an(e[2]-S,e[1]-M),an(e[0]-S,e[3]-M))>0?[[y[0],y[1],_,y[3]],[_,v[1],v[2],v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const _=y[2]+(v[0]-y[2])/2,T=y[3]+(v[1]-y[3])/2;return ht(an(e[0]-S,e[1]-M),an(e[2]-S,e[3]-M))>0?[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]:[[y[0],y[1],_,y[3]],[_,v[1],v[2],v[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const _=v[2]+(y[0]-v[2])/2,T=y[3]+(v[1]-y[3])/2;return ht(an(e[2]-S,e[1]-M),an(e[0]-S,e[3]-M))>0?[[_,y[1],y[2],y[3]],[v[0],v[1],_,v[3]]]:[[y[0],y[1],y[2],T],[v[0],T,v[2],v[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const _=v[2]+(y[0]-v[2])/2,T=v[3]+(y[1]-v[3])/2;return ht(an(e[0]-S,e[1]-M),an(e[2]-S,e[3]-M))>0?[[_,y[1],y[2],y[3]],[v[0],v[1],_,v[3]]]:[[y[0],T,y[2],y[3]],[v[0],v[1],v[2],T]]}}return[y,v]},mae=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===hs||n===Pn?a.add(t[1]):o.add(t[0]),r===hs||r===Pn?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},FC=(e,t,n)=>{switch(t){case Ws:return I(n[0],e[1]);case Pn:return I(e[2],n[1]);case er:return I(n[0],e[3])}return I(e[0],n[1])},pae=(e,t,n,i)=>{if(i===Pn)switch(n){case Pn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Ws:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case er:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case hs:return e.pos[1]===t.pos[1]?4:2}else if(i===hs)switch(n){case Pn:return e.pos[1]===t.pos[1]?4:2;case Ws:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case er:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case hs:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===Ws)switch(n){case Pn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ws:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case er:return e.pos[0]===t.pos[0]?4:2;case hs:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===er)switch(n){case Pn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ws:return e.pos[0]===t.pos[0]?4:2;case er:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case hs:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},Uae=([e,t],n)=>[S1([e,t-1],n),S1([e+1,t],n),S1([e,t+1],n),S1([e-1,t],n)],S1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,bU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=S1([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},mB=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],Bb=(e,t)=>{const n=t.get(e);return n&&ro(n)?n:null},Ya=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>_b(a,xn(le(e[0]),-1)));return(r<-1e6||r>UU||s<-1e6||s>UU||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>UU||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>UU)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,..._h(o)}),o=o.map(([a,l])=>I(Ge(a,-1e6,1e6),Ge(l,-1e6,1e6))),{points:o,x:Ge(r,-1e6,1e6),y:Ge(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,..._h(o),startIsSpecial:n,endIsSpecial:i}},f9=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},h9=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return gt(i,t)>c9}):e,bae=e=>{switch(e){case 0:return Ws;case 1:return Pn;case 2:return er}return hs},BC=(e,t,n,i,r,s,o)=>o?r&&s?vB(e,r,t,s):i:r?V7(n||[0,0],r,s??we([r])):i,zC=(e,t,n,i,r)=>kae(e,t,n,n&&Ea(n,r,Array(4).fill(op(n,r,e))),i,r),HC=(e,t,n,i)=>ja(Ga(e),n,t,i,!0,!0),VC=(e,t)=>e[0]===t[0]&&e[1]===t[1],pB=(e,t=c9)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),mi=(e,t,n,i)=>{let r=!1;const{points:s,fixedSegments:o,startBinding:a,endBinding:l,fileId:c}=n;de(e)&&(Object.keys(n).length===0||typeof s<"u"||typeof o<"u"||typeof a<"u"||typeof l<"u")?n={...n,angle:0,...cg({...e,x:n.x||e.x,y:n.y||e.y},t,n,i)}:typeof s<"u"&&(n={..._h(s),...n});for(const u in n){const d=n[u];if(typeof d<"u"){if(e[u]===d&&(typeof d!="object"||d===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){const f=e[u],h=d;if(f[0]===h[0]&&f[1]===h[1])continue}else if(u==="points"){const f=e[u],h=d;if(f.length===h.length){let m=!1,p=f.length;for(;--p;){const U=f[p],E=h[p];if(U[0]!==E[0]||U[1]!==E[1]){m=!0;break}}if(!m)continue}}e[u]=d,r=!0}}return r&&((typeof n.height<"u"||typeof n.width<"u"||typeof c<"u"||typeof s<"u")&&$t.delete(e),e.version=n.version??e.version+1,e.versionNonce=n.versionNonce??Ms(),e.updated=ag()),e},Te=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,version:t.version??e.version+1,versionNonce:t.versionNonce??Ms(),updated:ag()}},Aa=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Ms(),e.updated=ag(),e),yae=e=>!e[H.CTRL_OR_CMD],Vu=e=>e.isBindingEnabled,Ct=5,Eae=10,vae=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},zb=(e,t,n,i)=>{i.getNonDeletedElementsMap();const r=new Set,s=new Set;$C(e,t,n,"start",r,s,i),$C(e,n,t,"end",r,s,i);const o=Array.from(s).filter(a=>!r.has(a));vae(i,o).forEach(a=>{var l;i.mutateElement(a,{boundElements:(l=a.boundElements)==null?void 0:l.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},$C=(e,t,n,i,r,s,o,a)=>{if(t!=="keep"){if(t===null){const l=Iae(e,i,o);l!=null&&s.add(l);return}EB(e)?(n==null||(n==="keep"?!bB(e,t,i):i==="start"||n.id!==t.id))&&(qo(e,t,i,o),r.add(t.id)):(qo(e,t,i,o),r.add(t.id))}},UB=(e,t,n)=>["start","end"].map(i=>{var o,a;const r=wB(e,i,t),s=i==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){const l=t.get(s);if(ro(l)&&h2(l,r,t,n))return l}return null}),wae=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?$b(e,"start",i,r,s):null:"keep",d=c?t?$b(e,"end",i,r,s):null:"keep";return[u,d]},_ae=(e,t,n,i,r)=>{if(de(e))return["keep","keep"];const[s,o]=UB(e,t,r),a=s&&i?$b(e,"start",t,n,r):null,l=o&&i?$b(e,"end",t,n,r):null;return[a,l]},Hb=(e,t,n,i,r)=>{e.forEach(s=>{const[o,a]=n!=null&&n.length?wae(s,t,n??[],i.getNonDeletedElementsMap(),i.getNonDeletedElements(),r):_ae(s,i.getNonDeletedElementsMap(),i.getNonDeletedElements(),t,r);zb(s,o,a,i)})},eE=(e,t,n)=>e.length>50?[]:e.filter(Ie).flatMap(i=>UB(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===(i==null?void 0:i.id)).length===0),H7=(e,t,n,i,r)=>Array.from(t.reduce((s,o)=>{const a=ja(o,n.getNonDeletedElements(),n.getNonDeletedElementsMap(),i,de(e),de(e));return a!=null&&!yB(e,r==null?void 0:r.id,a)&&s.add(a),s},new Set)),Tae=(e,t,n,i)=>{const r=i.getNonDeletedElements(),s=i.getNonDeletedElementsMap();t.startBoundElement!=null&&qo(e,t.startBoundElement,"start",i);const o=ja(n,r,s,t.zoom,de(e),de(e));o!==null&&(bB(e,o,"end")||qo(e,o,"end",i))},Sae=(e,t)=>({...e,gap:Math.min(e.gap,ug(t,t.width,t.height))}),qo=(e,t,n,i)=>{if(!xe(e))return;let r={elementId:t.id,...Sae(Aae(e,t,n,i.getNonDeletedElementsMap()),t)};de(e)&&(r={...r,...Vb(e,t,n,i.getNonDeletedElementsMap())}),i.mutateElement(e,{[n==="start"?"startBinding":"endBinding"]:r}),we(t.boundElements||[]).has(e.id)||i.mutateElement(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},bB=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return yB(e,i==null?void 0:i.elementId,t)},yB=(e,t,n)=>t===n.id&&EB(e),EB=e=>e.points.length<3&&!de(e),Iae=(e,t,n)=>{const i=t==="start"?"startBinding":"endBinding",r=e[i];return r==null?null:(n.mutateElement(e,{[i]:null}),r.elementId)},ja=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=Cae(t,u=>ro(u,!1)&&h2(u,e,n,i,(r||!a2(u))&&!Ee(u))).filter(u=>a?!1:(a2(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>h2(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return xae(t,a=>ro(a,!1)&&h2(a,e,n,i,(r||!a2(a))&&!Ee(a)))},xae=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},Cae=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},Aae=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=ce.getPointAtIndexGlobalCoordinates(e,s,i),l=ce.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:Fae(t,i,l,a),gap:Math.max(1,op(t,i,a))}},br=(e,t,n)=>{if(!ro(e))return;const{newSize:i,simultaneouslyUpdated:r}=n??{},s=Rae(r);let o=t.getNonDeletedElementsMap();n!=null&&n.changedElements&&(o=new Map(o),n.changedElements.forEach(a=>{o.set(a.id,a)})),Gb(o,e,a=>{var p,U;if(!Ie(a)||a.isDeleted||!Mae(a,e))return;const l=a.startBinding?o.get(a.startBinding.elementId):null,c=a.endBinding?o.get(a.endBinding.elementId):null;let u=null,d=null;l&&c&&(u=xi(l,o),d=xi(c,o));const f={startBinding:GC(e,a.startBinding,i),endBinding:GC(e,a.endBinding,i)};if(s.has(a.id)){t.mutateElement(a,f);return}const h=Xb(o,a,(E,y)=>{var v,w;if(E&&ro(E)&&(y==="startBinding"||y==="endBinding")&&(e.id===((v=a[y])==null?void 0:v.elementId)||e.id===((w=a[y==="startBinding"?"endBinding":"startBinding"])==null?void 0:w.elementId)&&!hg(u,d))){const S=Oae(a,y,f[y],E,o);if(S)return[y==="startBinding"?0:a.points.length-1,{point:S}]}return null}).filter(E=>E!==null);ce.movePoints(a,t,new Map(h),{...e.id===((p=a.startBinding)==null?void 0:p.elementId)?{startBinding:f.startBinding}:{},...e.id===((U=a.endBinding)==null?void 0:U.elementId)?{endBinding:f.endBinding}:{}});const m=ke(a,o);m&&!m.isDeleted&&rp(a,t,!1)})},K0=(e,t,n)=>{Ie(e)?Hb([e],!0,[],t,n==null?void 0:n.zoom):br(e,t,{...n,changedElements:new Map([[e.id,e]])})},Mae=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},Rae=e=>new Set((e||[]).map(t=>t.id)),kae=(e,t,n,i,r,s,o)=>{const a=xh(le(t,e));return!n||!i?a:Lae(r,n,s,o)?l9(n,i,e):xh(le(e,ni(n,s)))},Lae=(e,t,n,i)=>{const r=op(t,n,e),s=ug(t,t.width,t.height,i);return r>s?null:r},vB=(e,t,n,i)=>{const r=Ea(t,i),s=e.points[n==="start"?0:e.points.length-1],o=I(e.x+s[0],e.y+s[1]),a=xoe(t)?Dae(t,i,o):o,l=de(e),c=fg(r),u=n==="start"?1:e.points.length-2,d=q(I(e.x+e.points[u][0],e.y+e.points[u][1]),c,e.angle??0);let f=null;if(l){const h=No(l9(t,r,o)),m=Nae(t,i,a),p=I(h?c[0]:m[0],h?m[1]:c[1]),U=Ae(p,Ti(xn(Cs(le(m,p)),Math.max(t.width,t.height)*2),p));f=rl(t,i,U,Ct).sort(ql)[0]}else f=rl(t,i,Ae(d,Ti(xn(Cs(le(a,d)),gt(a,d)+Math.max(t.width,t.height)*2),d)),Ct).sort((h,m)=>ql(h,d)-ql(m,d))[0];return!f||ql(a,f)<Zm?a:l?f:a},Dae=(e,t,n)=>{const i=ni(e,t),r=q(n,i,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-5?q(I(e.x-Ct,e.y),i,e.angle):q(I(e.x,e.y-Ct),i,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-5?q(I(e.x,e.y+e.height+Ct),i,e.angle):q(I(e.x-Ct,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+Ct?q(I(e.x+e.width,e.y+e.height+Ct),i,e.angle):q(I(e.x+e.width+Ct,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+Ct?q(I(e.x+e.width,e.y-Ct),i,e.angle):q(I(e.x+e.width+Ct,e.y),i,e.angle):n},Nae=(e,t,n,i=.05)=>{const{x:r,y:s,width:o,height:a,angle:l}=e,c=ni(e,t,-.1,-.1),u=q(n,c,-l),d=Ge(i*a,5,80),f=Ge(i*o,5,80);if(u[0]<=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return q(I(r-Ct,c[1]),c,l);if(u[1]<=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return q(I(c[0],s-Ct),c,l);if(u[0]>=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return q(I(r+o+Ct,c[1]),c,l);if(u[1]>=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return q(I(c[0],s+a+Ct),c,l);if(e.type==="diamond"){const h=Ct,m=I(r+o/4-h,s+a/4-h),p=I(r+3*o/4+h,s+a/4-h),U=I(r+o/4-h,s+3*a/4+h),E=I(r+3*o/4+h,s+3*a/4+h);if(gt(m,u)<Math.max(f,d))return q(m,c,l);if(gt(p,u)<Math.max(f,d))return q(p,c,l);if(gt(U,u)<Math.max(f,d))return q(U,c,l);if(gt(E,u)<Math.max(f,d))return q(E,c,l)}return n},Oae=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(de(e)&&Ob(n)){const d=T5(n.fixedPoint)??Vb(e,i,t==="startBinding"?"start":"end",r).fixedPoint,f=ni(i,r),h=I(i.x+d[0]*i.width,i.y+d[1]*i.height),m=q(h,f,i.angle);return ce.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=ce.getPointAtIndexGlobalCoordinates(e,a,r),c=Bae(i,r,n.focus,l);let u;if(n.gap===0)u=c;else{const d=ce.getPointAtIndexGlobalCoordinates(e,o,r),f=ni(i,r),h=gt(l,d)+gt(l,f)+Math.max(i.width,i.height)*2,m=[...rl(i,r,Ae(l,Ti(xn(Cs(le(c,l)),h),l)),n.gap).sort((p,U)=>ql(p,l)-ql(U,l)),Ti(xn(Cs(le(c,l)),gt(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return ce.pointFromAbsoluteCoords(e,u,r)},Vb=(e,t,n,i)=>{const r=[t.x,t.y,t.x+t.width,t.y+t.height],s=vB(e,t,n,i),o=I(r[0]+(r[2]-r[0])/2,r[1]+(r[3]-r[1])/2),a=q(s,o,-t.angle);return{fixedPoint:T5([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},GC=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(ug(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},$b=(e,t,n,i,r)=>ja(wB(e,t,n),i,n,r,de(e),de(e)),wB=(e,t,n)=>{const i=t==="start"?0:-1;return Ga(ce.getPointAtIndexGlobalCoordinates(e,i,n))},Pae=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}de(i)&&Object.assign(i,cg(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},_B=(e,t)=>{const n=we(e);for(const i of t)kf.unbindAffected(n,i,(r,s)=>mi(r,n,s)),Lf.unbindAffected(n,i,(r,s)=>mi(r,n,s))},c0=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},h2=(e,{x:t,y:n},i,r,s)=>{const o=I(t,n),a=ug(e,e.width,e.height,r),l=(s||!a2(e))&&!Ee(e),c=[t-a,n-a,t+a,n+a],u=xi(e,i);if(!hg(c,u))return!1;const d=rl(e,i,Ae(ni(e,i),o)),f=op(e,i,o);return l?d.length===0||f<=a:d.length>0&&f<=a},ug=(e,t,n,i)=>{const r=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),Eae/r+Ct)},Fae=(e,t,n,i)=>{const r=ni(e,t);if(As(n,i))return 0;const s=q(n,r,-e.angle),o=q(i,r,-e.angle),a=Math.sign(ht(le(o,n),le(o,r)))*-1,l=Ae(o,Ti(xn(Cs(le(o,s)),Math.max(e.width*2,e.height*2)),o)),c=e.type==="diamond"?[Ae(I(e.x+e.width/2,e.y),I(e.x+e.width/2,e.y+e.height)),Ae(I(e.x,e.y+e.height/2),I(e.x+e.width,e.y+e.height/2))]:[Ae(I(e.x,e.y),I(e.x+e.width,e.y+e.height)),Ae(I(e.x+e.width,e.y),I(e.x,e.y+e.height))],u=e.type==="diamond"?[Ae(I(e.x+e.width/2,e.y-e.height),I(e.x+e.width/2,e.y+e.height*2)),Ae(I(e.x-e.width,e.y+e.height/2),I(e.x+e.width*2,e.y+e.height/2))]:[Ae(I(e.x-e.width,e.y-e.height),I(e.x+e.width*2,e.y+e.height*2)),Ae(I(e.x+e.width*2,e.y-e.height),I(e.x-e.width,e.y+e.height*2))];return[Ib(l,u[0]),Ib(l,u[1])].filter(h=>h!==null).sort((h,m)=>ql(h,i)-ql(m,i)).map((h,m)=>a*gt(r,h)/(e.type==="diamond"?gt(c[m][0],c[m][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((h,m)=>Math.abs(h)-Math.abs(m))[0]??0},Bae=(e,t,n,i)=>{const r=ni(e,t);if(n===0)return r;const s=(e.type==="diamond"?[I(e.x,e.y+e.height/2),I(e.x+e.width/2,e.y),I(e.x+e.width,e.y+e.height/2),I(e.x+e.width/2,e.y+e.height)]:[I(e.x,e.y),I(e.x+e.width,e.y),I(e.x+e.width,e.y+e.height),I(e.x,e.y+e.height)]).map(l=>Ti(xn(le(l,r),Math.abs(n)),r)).map(l=>q(l,r,e.angle)),o=[ht(le(i,s[0]),le(s[1],s[0]))>0&&(n>0?ht(le(i,s[1]),le(s[2],s[1]))<0:ht(le(i,s[3]),le(s[0],s[3]))<0),ht(le(i,s[1]),le(s[2],s[1]))>0&&(n>0?ht(le(i,s[2]),le(s[3],s[2]))<0:ht(le(i,s[0]),le(s[1],s[0]))<0),ht(le(i,s[2]),le(s[3],s[2]))>0&&(n>0?ht(le(i,s[3]),le(s[0],s[3]))<0:ht(le(i,s[1]),le(s[2],s[1]))<0),ht(le(i,s[3]),le(s[0],s[3]))>0&&(n>0?ht(le(i,s[0]),le(s[1],s[0]))<0:ht(le(i,s[2]),le(s[3],s[2]))<0)];return o[0]?n>0?s[1]:s[0]:o[1]?n>0?s[2]:s[1]:o[2]?n>0?s[3]:s[2]:n>0?s[0]:s[3]},zae=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Gb=(e,t,n)=>{var i;ro(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:s})=>{n(e.get(s),"boundElements",s)})},Xb=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(Bt(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(xe(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class kf{static unbindAffected(t,n,i){n&&Xb(t,n,r=>{!r||r.isDeleted||Gb(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:c0(r.boundElements,new Set([a]))})})})}}F(kf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Xb(t,n,(r,s)=>{var o,a;if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&((o=r.boundElements)!=null&&o.find(l=>l.id===n.id)||(xe(n)&&i(r,{boundElements:c0(r.boundElements,new Set,new Array(n))}),ue(n)&&((a=r.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[s]:null}):i(r,{boundElements:c0(r.boundElements,new Set,new Array(n))}))))})});class Lf{static unbindAffected(t,n,i){n&&Gb(t,n,r=>{!r||r.isDeleted||Xb(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}}F(Lf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Gb(t,n,(r,s,o)=>{var a,l;if(!r||r.isDeleted){i(n,{boundElements:c0(n.boundElements,new Set([o]))});return}ue(r)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:c0(n.boundElements,new Set([r.id]))})))})});const V7=(e,t,n)=>{const[i,r]=T5(e);return q(I(t.x+t.width*i,t.y+t.height*r),ni(t,n),t.angle)},Hae=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?V7(e.startBinding.fixedPoint,n,t):I(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?V7(e.endBinding.fixedPoint,i,t):I(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Vae=(e,t)=>{const[n,i]=Hae(e,t);return[ce.pointFromAbsoluteCoords(e,n,t),ce.pointFromAbsoluteCoords(e,i,t)]},T5=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,tE=({points:e})=>{const t=e[0][0],n=e[0][1];return{points:e.map(i=>I(i[0]-t,i[1]-n)),offsetX:t,offsetY:n}},_e=class _e{constructor(t,n){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");F(this,"customLineAngle");this.elementId=t.id,As(t.points[0],I(0,0))||(console.error("Linear element is not normalized",Error().stack),mi(t,n,_e.getNormalizeElementPointsAndCoords(t))),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=de(t)&&t.elbowed,this.customLineAngle=null}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=_e.getElement(a,r);if(!l)return!1;const[c,u,d,f]=Oe(n.selectionElement,r),m=_e.getPointsGlobalCoordinates(l,r).reduce((p,U,E)=>((U[0]>=c&&U[0]<=d&&U[1]>=u&&U[1]<=f||t.shiftKey&&(o!=null&&o.includes(E)))&&p.push(E),p),[]).filter(p=>!(de(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s){var h,m;if(!s)return null;const{elementId:o}=s,a=n.scene.getNonDeletedElementsMap(),l=_e.getElement(o,a);let c=s.customLineAngle;if(!l||de(l)&&!s.pointerDownState.lastClickedIsEndPoint&&s.pointerDownState.lastClickedPoint!==0)return null;const u=de(l)?[(h=s.selectedPointsIndices)!=null&&h.includes(0)?0:void 0,(m=s.selectedPointsIndices)!=null&&m.find(p=>p>0)?l.points.length-1:void 0].filter(p=>p!==void 0):s.selectedPointsIndices,d=de(l)?s.pointerDownState.lastClickedPoint>0?l.points.length-1:0:s.pointerDownState.lastClickedPoint,f=l.points[d];if(u&&f){if(r0(t)&&u.length===1&&l.points.length>1){const y=u[0],v=l.points[y===0?1:y-1];c=s.customLineAngle??Math.atan2(l.points[y][1]-v[1],l.points[y][0]-v[0]);const[w,S]=_e._getShiftLockedDelta(l,a,v,I(i,r),t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize(),c);_e.movePoints(l,n.scene,new Map([[y,{point:I(w+v[0],S+v[1]),isDragging:y===d}]]))}else{const y=_e.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),v=y[0]-f[0],w=y[1]-f[1];_e.movePoints(l,n.scene,new Map(u.map(S=>{const M=S===d?_e.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):I(l.points[S][0]+v,l.points[S][1]+w);return[S,{point:M,isDragging:S===d}]})))}ke(l,a)&&rp(l,n.scene,!1);let U=[];if(Oa(l,!1)){const y=u[0]===0,v=u[u.length-1]===l.points.length-1,w=[];!y!=!v?w.push({x:i,y:r}):(y&&w.push(Ga(_e.getPointGlobalCoordinates(l,l.points[0],a))),v&&w.push(Ga(_e.getPointGlobalCoordinates(l,l.points[u[u.length-1]],a)))),w.length&&(U=H7(l,w,n.scene,n.state.zoom))}const E={...s,selectedPointsIndices:u,segmentMidPointHoveredCoords:d!==0&&d!==l.points.length-1?this.getPointGlobalCoordinates(l,f,a):null,hoverPointIndex:d===0||d===l.points.length-1?d:-1,isDragging:!0,customLineAngle:c};return{...n.state,editingLinearElement:n.state.editingLinearElement?E:null,selectedLinearElement:E,suggestedBindings:U}}return null}static handlePointerUp(t,n,i,r){var m;const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),a=xt(t,i),{elementId:l,selectedPointsIndices:c,isDragging:u,pointerDownState:d}=n,f=_e.getElement(l,s);if(!f)return n;const h={};if(u&&c){for(const p of c)if(p===0||p===f.points.length-1){Wo(f.points,i.zoom.value)&&(ln(f)&&r.mutateElement(f,{..._9(f,!0)},{informMutation:!1,isDragging:!1}),_e.movePoints(f,r,new Map([[p,{point:p===0?f.points[f.points.length-1]:f.points[0]}]])));const U=Vu(i)?ja(((c==null?void 0:c.length)??0)>1?Ga(_e.getPointAtIndexGlobalCoordinates(f,p,s)):a,o,s,i.zoom,de(f),de(f)):null;h[p===0?"startBindingElement":"endBindingElement"]=U}}return{...n,...h,segmentMidPointHoveredCoords:null,hoverPointIndex:-1,selectedPointsIndices:u||t.shiftKey?!u&&t.shiftKey&&((m=d.prevSelectedPointsIndices)!=null&&m.includes(d.lastClickedPoint))?c&&c.filter(p=>p!==d.lastClickedPoint):c:c!=null&&c.includes(d.lastClickedPoint)?[d.lastClickedPoint]:c,isDragging:!1,pointerOffset:{x:0,y:0},customLineAngle:null}}static isSegmentTooShort(t,n,i,r,s){if(de(t))return r>=0&&r<t.points.length?gt(n,i)*s.value<_e.POINT_HANDLE_SIZE/2:!1;let o=gt(n,i);if(t.points.length>2&&t.roundness){const[a,l]=Nb(t);Kn(a.length===0&&l.length>0,"Only linears built out of curves are supported"),Kn(a.length+l.length>=r,"Invalid segment index while calculating mid point"),o=Xw(l[r])}return o*s.value<_e.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n){if(de(t)){Kn(t.points.length>=n,"Invalid segment index while calculating elbow arrow mid point");const s=Tb(t.points[n-1],t.points[n]);return I(t.x+s[0],t.y+s[1])}const[i,r]=Nb(t);if(Kn(i.length===0&&r.length>0||i.length>0&&r.length===0,"Only linears built out of either segments or curves are supported"),Kn(i.length+r.length>=n,"Invalid segment index while calculating mid point"),i.length){const s=i[n-1];return Tb(s[0],s[1])}if(r.length){const s=r[n-1];return Ere(s,.5)}Kn(!1,"Invalid segment type while calculating mid point")}static getSegmentMidPointIndex(t,n,i,r){const s=_e.getElement(t.elementId,r);if(!s)return-1;const o=_e.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(_e.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){var T;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=_e.getElement(d,l);if(!f)return u;const h=_e.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=_e.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(o.mutateElement(f,{points:[...f.points,_e.createPointAt(f,l,r.x,r.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.scheduleCapture(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:ja(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=_e.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:C,endBindingElement:x}=s;Vu(a)&&Oa(f)&&zb(f,C,x,o)}const[U,E,y,v]=Oe(f,l),w=(U+y)/2,S=(E+v)/2,M=p>-1&&q(I(f.x+f.points[p][0],f.y+f.points[p][1]),I(w,S),f.angle),_=p>-1||t.shiftKey?t.shiftKey||(T=s.selectedPointsIndices)!=null&&T.includes(p)?$ae([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:_,pointerOffset:M?{x:r.x-M[0],y:r.y-M[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:As(t,n)}static handlePointerMove(t,n,i,r){const s=r.state;if(!s.editingLinearElement)return null;const{elementId:o,lastUncommittedPoint:a}=s.editingLinearElement,l=r.scene.getNonDeletedElementsMap(),c=_e.getElement(o,l);if(!c)return s.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===a&&_e.deletePoints(c,r,[u.length-1]),{...s.editingLinearElement,lastUncommittedPoint:null};let f;if(r0(t)&&u.length>=2){const h=u[u.length-2],[m,p]=_e._getShiftLockedDelta(c,l,h,I(n,i),t[H.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=I(m+h[0],p+h[1])}else f=_e.createPointAt(c,l,n-s.editingLinearElement.pointerOffset.x,i-s.editingLinearElement.pointerOffset.y,t[H.CTRL_OR_CMD]||de(c)?null:r.getEffectiveGridSize());return d===a?_e.movePoints(c,r.scene,new Map([[c.points.length-1,{point:f}]])):_e.addPoints(c,r.scene,[f]),{...s.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=Oe(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return q(I(u+n[0],d+n[1]),I(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=Oe(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return q(I(u+c[0],d+c[1]),I(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=Oe(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return q(d?I(f+d[0],h+d[1]):I(f,h),I(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(de(t))return I(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=Oe(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=q(I(n[0],n[1]),I(l,c),-t.angle);return I(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=_e.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(gt(I(r,s),I(l[0],l[1]))*i.value<_e.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=Rn(i,r,s),[a,l,c,u]=Oe(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=q(I(o[0],o[1]),I(d,f),-t.angle);return I(h-t.x,m-t.y)}static getNormalizeElementPointsAndCoords(t){const{points:n,offsetX:i,offsetY:r}=tE(t);return{points:n,x:t.x+i,y:t.y+r}}static duplicateSelectedPoints(t,n){Kn(t.editingLinearElement,"Not currently editing a linear element");const i=n.getNonDeletedElementsMap(),{selectedPointsIndices:r,elementId:s}=t.editingLinearElement,o=_e.getElement(s,i);Kn(o,"The linear element does not exist in the provided Scene"),Kn(r!=null,"There are no selected points to duplicate");const{points:a}=o,l=[];let c=!1,u=-1;const d=a.reduce((f,h,m)=>{if(++u,f.push(h),r.includes(m)){const U=a[m+1];U||(c=!0),f.push(U?I((h[0]+U[0])/2,(h[1]+U[1])/2):I(h[0],h[1])),l.push(u+1),++u}return f},[]);if(n.mutateElement(o,{points:d}),c){const f=o.points[o.points.length-1];_e.movePoints(o,n,new Map([[o.points.length-1,{point:I(f[0]+30,f[1]+30)}]]))}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:l}}}static deletePoints(t,n,i){var u;const r=((u=n.state.editingLinearElement)==null?void 0:u.lastUncommittedPoint)===t.points[t.points.length-1],s=t.points.filter((d,f)=>!i.includes(f));ln(t)&&t.polygon&&(r||i.includes(0)||i.includes(t.points.length-1))&&(s[0]=I(s[s.length-1][0],s[s.length-1][1]));const{points:a,offsetX:l,offsetY:c}=tE({points:s});_e._updatePoints(t,n.scene,a,l,c)}static addPoints(t,n,i){const r=[...t.points,...i];ln(t)&&t.polygon&&(r[0]=I(r[r.length-1][0],r[r.length-1][1]));const{points:s,offsetX:o,offsetY:a}=tE({points:r});_e._updatePoints(t,n,s,o,a)}static movePoints(t,n,i,r){var u,d,f;const{points:s}=t;if(ln(t)&&t.polygon){const h=i.get(0),m=i.get(s.length-1);h?i.set(s.length-1,{point:I(h.point[0],h.point[1]),isDragging:h.isDragging}):m&&i.set(0,{point:I(m.point[0],m.point[1]),isDragging:m.isDragging})}const o=((u=i.get(0))==null?void 0:u.point)??I(0,0),[a,l]=o,c=de(t)?[((d=i.get(0))==null?void 0:d.point)??s[0],((f=i.get(s.length-1))==null?void 0:f.point)??s[s.length-1]]:s.map((h,m)=>{var U;const p=((U=i.get(m))==null?void 0:U.point)??h;return I(p[0]-a,p[1]-l)});_e._updatePoints(t,n,c,a,l,r,{isDragging:Array.from(i.values()).some(h=>h.isDragging)})}static shouldAddMidpoint(t,n,i,r){const s=_e.getElement(t.elementId,r);if(s&&de(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=gt(I(a.x,a.y),I(n.x,n.y));return!(!i.editingLinearElement&&l<C7/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=_e.getElement(t.elementId,o);if(!a)return;const{segmentMidpoint:l}=t.pointerDownState,c={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},u=_e.createPointAt(a,o,n.x,n.y,r&&!de(a)?i.getEffectiveGridSize():null),d=[...a.points.slice(0,l.index),u,...a.points.slice(l.index)];return s.mutateElement(a,{points:d}),c.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:l.index},c.selectedPointsIndices=[l.index],c}static _updatePoints(t,n,i,r,s,o,a){if(de(t)){const l={};(o==null?void 0:o.startBinding)!==void 0&&(l.startBinding=o.startBinding!==null&&Ob(o.startBinding)?o.startBinding:null),(o==null?void 0:o.endBinding)!==void 0&&(l.endBinding=o.endBinding!==null&&Ob(o.endBinding)?o.endBinding:null),l.points=Array.from(i),n.mutateElement(t,l,{informMutation:!0,isDragging:(a==null?void 0:a.isDragging)??!1})}else{const l=cA(t,i),c=cA(t,t.points),u=(l[0]+l[2])/2,d=(l[1]+l[3])/2,f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,m=f-u,p=h-d,U=q(I(r,s),I(m,p),t.angle);n.mutateElement(t,{...o,points:i,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,i,r,s,o){const a=_e.getPointGlobalCoordinates(t,i,n);if(de(t))return[r[0]-a[0],r[1]-a[1]];const[l,c]=Rn(r[0],r[1],s),{width:u,height:d}=K7(a[0],a[1],l,c,o);return q(I(u,d),I(0,0),-t.angle)}static moveFixedSegment(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=_e.getElement(t.elementId,o);if(!a||!de(a))return t;if(n&&n>0&&n<a.points.length){const l=No(xh(le(a.points[n],a.points[n-1]))),c=(a.fixedSegments??[]).reduce((h,m)=>(h[m.index]=m,h),{});c[n]={index:n,start:I(l?a.points[n-1][0]:i-a.x,l?r-a.y:a.points[n-1][1]),end:I(l?a.points[n][0]:i-a.x,l?r-a.y:a.points[n][1])};const u=Object.values(c).sort((h,m)=>h.index-m.index),d=u.map(h=>h.index).reduce((h,m)=>m<n?h+1:h,0);s.mutateElement(a,{fixedSegments:u});const f=I(a.x+(a.fixedSegments[d].start[0]+a.fixedSegments[d].end[0])/2,a.y+(a.fixedSegments[d].start[1]+a.fixedSegments[d].end[1])/2);return{...t,segmentMidPointHoveredCoords:f,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[d].index,value:f}}}}return t}static deleteFixedSegment(t,n,i){var r;n.mutateElement(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(s=>s.index!==i)})}};F(_e,"POINT_HANDLE_SIZE",10),F(_e,"getEditorMidPoints",(t,n,i)=>{const r=ke(t,n);if(!de(t)&&!i.editingLinearElement&&t.points.length>2&&!r)return[];const s=_e.getPointsGlobalCoordinates(t,n);let o=0;const a=[];for(;o<s.length-1;){if(_e.isSegmentTooShort(t,t.points[o],t.points[o+1],o,i.zoom)){a.push(null),o++;continue}const l=_e.getSegmentMidPoint(t,o+1);a.push(l),o++}return a}),F(_e,"getSegmentMidpointHitCoords",(t,n,i,r)=>{const{elementId:s}=t,o=_e.getElement(s,r);if(!o)return null;const a=_e.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!de(o)&&a>=0||_e.getPointsGlobalCoordinates(o,r).length>=3&&!i.editingLinearElement&&!de(o))return null;const c=(_e.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&gt(I(u[0],u[1]),I(n.x,n.y))<=c)return u;let d=0;const f=_e.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&gt(f[d],I(n.x,n.y))<=c)return f[d];d++}return null}),F(_e,"getBoundTextElementPosition",(t,n,i)=>{_e.getPointsGlobalCoordinates(t,i).length<2&&mi(n,i,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=_e.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1,l=_e.getSegmentMidPoint(t,a+1);s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}}),F(_e,"getMinMaxXYWithBoundText",(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=_e.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=I(c,u),U=q(I(s,o),p,t.angle),E=q(I(a,o),p,t.angle),y=q(I(d,f),p,-t.angle),v=q(I(h,f),p,-t.angle),w=q(I(d,m),p,-t.angle),S=q(I(h,m),p,-t.angle);return U[0]<E[0]&&U[1]>=E[1]?(s=Math.min(s,w[0]),a=Math.max(a,Math.max(v[0],S[0])),o=Math.min(o,y[1]),l=Math.max(l,S[1])):U[0]>=E[0]&&U[1]>E[1]?(s=Math.min(s,S[0]),a=Math.max(a,Math.max(y[0],v[0])),o=Math.min(o,w[1]),l=Math.max(l,v[1])):U[0]>=E[0]?(s=Math.min(s,v[0]),a=Math.max(a,w[0]),o=Math.min(o,S[1]),l=Math.max(l,y[1])):U[1]<=E[1]&&(s=Math.min(s,Math.min(v[0],y[0])),a=Math.max(a,S[0]),o=Math.min(o,v[1]),l=Math.max(l,w[1])),[s,o,a,l,c,u]}),F(_e,"getElementAbsoluteCoords",(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!$t.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((U,[E,y])=>(U.minY=Math.min(U.minY,y),U.minX=Math.min(U.minX,E),U.maxX=Math.max(U.maxX,E),U.maxY=Math.max(U.maxY,y),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=$t.generateElementShape(t,null),h=Ad(f[0]),[m,p,U,E]=A5(h);s=m+t.x,o=p+t.y,a=U+t.x,l=E+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=ke(t,n);return d&&(r=_e.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r});let ce=_e;const $ae=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null};function XC(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function Gae(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const Xae=1e-6;function YC(e,t){const n=le(e[1],e[0]),i=le(t,e[0]),r=ht(n,i);return Math.abs(r)<Xae}function nE(e,t){const n=le(e[1],e[0]),i=le(t,e[0]);return ht(n,i)<0}function jC(e,t){return YC(e,t[0])||YC(e,t[1])||(nE(e,t[0])?!nE(e,t[1]):nE(e,t[1]))}function Yae(e,t){return Gae(XC(e),XC(t))&&jC(e,t)&&jC(t,e)}const jae=e=>e.type==="diamond"?[I(e.width/2,0),I(e.width,e.height/2),I(e.width/2,e.height),I(0,e.height/2)]:[I(0,0),I(0+e.width,0),I(0+e.width,e.height),I(0,e.height)],Wae=e=>Ie(e)||vr(e)?e.points:jae(e),WC=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},Kae=e=>{const t=Wae(e),{cx:n,cy:i}=WC(t),r=I(n,i),s=t.map(u=>q(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=WC(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},Zae=(e,t)=>{const n=Kae(e);return(fU(n[0],Pi(t[0],t[2]))||fU(t[0],Pi(n[0],n[2])))&&(fU(n[1],Pi(t[1],t[3]))||fU(t[1],Pi(n[1],n[3])))},qae=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;nB(t)&&(t=xi(t,we(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const a of e){if(s.has(a.id))continue;if(Zae(a,r)){if(s.add(a.id),a.boundElements)for(const c of a.boundElements)s.add(c.id);ue(a)&&a.containerId&&s.add(a.containerId),xe(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>s.has(a.id))},TB=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Oi=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:yt({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Fe(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:yt(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),SB=(e,t)=>IB(e,t)!=null,IB=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),$u=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),ap=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...TB(s,n,e)}}}return n.selectedGroupIds},Qae=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),Z0=(e,t)=>e.groupIds.includes(t),At=(e,t)=>{const n=[];for(const i of e.values())Z0(i,t)&&n.push(i);return n},Jae=(e,t)=>e.groupIds.find(n=>t[n]),ele=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},tle=(e,t)=>e.filter(n=>!t[n]),S5=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=ke(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},nle=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},g9=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},Ch=e=>e.groupIds.length>0,ile=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},m9=e=>{const t=new Set;return e.forEach(n=>{Ee(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},p9=(e,t,n,i=!0)=>{const[r,s,o,a]=Oe(t,n);let l=e.filter(c=>{let[u,d,f,h]=xi(c,n);const m=yr(c,n);if(m){const[p,U,E,y]=xi(m,n);u=Math.max(p,u),d=Math.max(U,d),f=Math.min(E,f),h=Math.min(y,h)}return c.locked===!1&&c.type!=="selection"&&!Bt(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?m9(l):l,l=l.filter(c=>{const u=yr(c,n);return u?kc(c,u,n):!0}),l},xB=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=Kb(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},$n=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),Fe=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Bt(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){r.push(s),i.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){const s=[];return r.forEach(o=>{Ee(o)&&Rs(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},CB=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Fe(e,t,{includeBoundTextElement:!0}),yt=(e,t)=>Gi(t.selectedElementIds,e)?t.selectedElementIds:e,rle=(e,t)=>{var i;const n=e.filter(Ie);if(n.length===1){const r=n[0],s=((i=r.boundElements)==null?void 0:i.map(a=>a.id))??[];if(e.every(a=>a.id===r.id||s.includes(a.id)))return new ce(r,we(t))}return null},AB=(e,t,n)=>({selectedLinearElement:rle(e,t),...Oi({editingGroupId:n.editingGroupId,selectedElementIds:m9(e).reduce((i,r)=>(Bt(r)||(i[r.id]=!0),i),{})},t,n,null)}),sle=(e,t,n)=>{const i=we(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId),a=s&&i.get(s);a&&mi(a,i,{frameId:o??null})}};function U9(e,t,n){const i=W7(t,n),r=W7(e,n);return i.some(o=>r.some(a=>Yae(o,a)))}const MB=(e,t,n)=>x5(p9(e,t,n,!1)).filter(i=>!Ee(i)&&!i.frameId||i.frameId===t.id),b9=(e,t,n)=>p9([t],e,n).some(i=>i.id===t.id),lp=(e,t,n)=>{const[i,r,s,o]=Oe(t,n),[a,l,c,u]=mt(e);return i<=a&&r<=l&&s>=c&&o>=u},kc=(e,t,n)=>lp([e],t,n)||U9(e,t,n)||b9(e,t,n),KC=(e,t,n)=>{const[i,r,s,o]=Oe(t,n);return W0(I(i,r),I(e.x,e.y),I(s,o))},ole=e=>{const t=new Map;for(const n of e){const i=Ee(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,Rs(e,i))}return t},Rs=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},y9=e=>e.filter(t=>Ee(t)),E9=e=>{const t=we(y9(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},zo=(e,t,n,i)=>{const r=Rs(e,t.id),s=new Set(r),o=new Set([...MB(e,t,i),...r.filter(f=>b9(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!U9(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=ap(u,n);for(const[f,h]of Object.entries(d))if(h){const m=At(e,f);if(lp(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(ue(f)&&f.containerId))},ale=(e,t,n)=>lle(x5(e,MB(e,t,n)),t,n),lle=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>At(n,l)));o=!lp(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},yr=(e,t)=>e.frameId&&t.get(e.frameId)||null,cle=(e,t)=>{const n=new Set,i=we(e);e=x5(e);for(const o of e)Ee(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(Ee(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=At(e,a);if(l.some(c=>kc(c,t,i)))for(const c of l)s.push(c)}}else kc(o,t,i)&&s.push(o);return s},u0=(e,t,n,i)=>{const r=we(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)Ee(c)&&c.id!==n.id&&l.add(c.id);for(const c of x5(e,t)){if(Ee(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=ke(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)mi(c,r,{frameId:n.id});return e},I5=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=ke(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)mi(r,t,{frameId:null})},RB=(e,t)=>{const n=Rs(e,t.id);return I5(n,we(e)),e},dg=(e,t,n,i)=>u0(RB(e,n),t,n,i.state).slice(),Ah=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>At(e,l)).forEach(l=>r.add(l));const s=new Set,o=we(e);return r.forEach(a=>{a.frameId&&!Ee(a)&&!Yb(a,o,t)&&s.add(a)}),s.size>0&&I5(s,o),e},x5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)At(e,o).some(a=>Ee(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},$7=(e,t,n)=>{const i=ue(e)&&Vn(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?yr(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:yr(i,t)},Yb=(e,t,n,i)=>{var l;const r=(i==null?void 0:i.targetFrame)??$7(e,t,n);if(!r)return!1;const s=ue(e)&&Vn(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&s.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return kc(s,r,t);for(const c of s.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(s.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>At(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(Fe(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(Ee(c))return o(!1),!1;for(const c of a)if(kc(c,r,t))return o(!0),!0;return!1},ZC=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=U9(e,t,i)||b9(e,t,i);if(s){for(const o of e.groupIds)r==null||r.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!lp([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=Yb(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r==null||r.set(a,o)}for(const a of e.groupIds)r==null||r.set(a,o);return o}return!1},ule="Frame",dle="AI Frame",v9=e=>eB(e)?ule:dle,kB=e=>e.name===null?v9(e):e.name,w9=(e,t)=>qae({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),LB=e=>{const t=we(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},DB="invert(100%) hue-rotate(180deg) saturate(1.25)",NB=(e,t)=>In(e)&&!t.imageCache.has(e.fileId),OB=(e,t,n)=>{var i;return n.theme===Ce.DARK&&In(e)&&!NB(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==ve.svg},C5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},PB=(e,t,n,i,r=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=rre/100),s},fle=(e,t,n)=>{const s=C5(e),[o,a,l,c]=Oe(e,t),u=Ie(e)||vr(e)?Bi(o,l):e.width,d=Ie(e)||vr(e)?Bi(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},FB=(e,t,n,i,r)=>{var E,y;const s=document.createElement("canvas"),o=s.getContext("2d"),a=C5(e),{width:l,height:c,scale:u}=fle(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(Ie(e)||vr(e)){const[v,w]=Oe(e,t);d=e.x>v?Bi(e.x,v)*window.devicePixelRatio*u:0,f=e.y>w?Bi(e.y,w)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=jc.canvas(s);OB(e,i,r)&&(o.filter=DB),g2(e,h,o,i),o.restore();const m=ke(e,t),p=document.createElement("canvas"),U=p.getContext("2d");if(xe(e)&&m){const[v,w,S,M]=Oe(e,t),_=Math.max(Bi(v,S),Bi(w,M));p.width=_*window.devicePixelRatio*u+a*u*10,p.height=_*window.devicePixelRatio*u+a*u*10,U.translate(p.width/2,p.height/2),U.rotate(e.angle),U.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,T,C]=Oe(m,t);U.rotate(-e.angle);const x=(p.width-s.width)/2,R=(p.height-s.height)/2,P=p.width/2-(T-v)*window.devicePixelRatio*u-x-a*u,D=p.height/2-(C-w)*window.devicePixelRatio*u-R-a*u;U.translate(-P,-D),U.clearRect(-(m.width/2+Fn)*window.devicePixelRatio*u,-(m.height/2+Fn)*window.devicePixelRatio*u,(m.width+Fn*2)*window.devicePixelRatio*u,(m.height+Fn*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((E=ke(e,t))==null?void 0:E.version)||null,containingFrameOpacity:((y=yr(e,t))==null?void 0:y.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:wt(e)?e.crop:null}},BB=typeof document<"u"?document.createElement("img"):{src:""};BB.src=`data:${ve.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const zB=typeof document<"u"?document.createElement("img"):{src:""};zB.src=`data:${ve.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const hle=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?zB:BB,e.width/2-i/2,e.height/2-i/2,i,i)},g2=(e,t,n,i,r)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw($t.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",$t.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=ple(e),a=$t.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=In(e)?(s=i.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,nr(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else hle(e,n);break}default:if(ue(e)){const o=RF(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=dt(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=np(e.fontSize,e.lineHeight),d=EF(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},G7=new WeakMap,qC=(e,t,n,i)=>{var d;const r=n?i.zoom:{value:1},s=G7.get(e),o=s&&s.zoomValue!==r.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=ke(e,t),l=(a==null?void 0:a.version)||null,c=wt(e)?e.crop:null,u=((d=yr(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||xe(e)&&a&&e.angle!==s.angle){const f=FB(e,t,r,n,i);return f?(G7.set(e,f),f):null}return s},iE=(e,t,n,i,r)=>{const s=e.element,o=C5(s),a=e.scale,[l,c,u,d]=Oe(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=ke(s,r);if(xe(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!NB(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},gle=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},fu=(e,t,n,i,r,s,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=PB(e,yr(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?yF:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=Dt.strokeWidth/o.zoom.value,r.strokeStyle=Dt.strokeColor,f2(e)&&(r.strokeStyle=o.theme===Ce.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,Dt.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if($t.generateElementShape(e,null),s.isExporting){const[c,u,d,f]=Oe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);r.save(),r.translate(h,m),r.rotate(e.angle),r.translate(-p,-U),g2(e,i,r,s),r.restore()}else{const c=qC(e,n,s,o);if(!c)return;iE(c,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if($t.generateElementShape(e,s),s.isExporting){const[c,u,d,f]=Oe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);if(ue(e)){const y=Vn(e,t);if(xe(y)){const v=ce.getBoundTextElementPosition(y,e,t);p=(d-c)/2-(v.x-c),U=(f-u)/2-(v.y-u)}}r.save(),r.translate(h,m),OB(e,s,o)&&(r.filter="none");const E=ke(e,t);if(xe(e)&&E){const y=document.createElement("canvas"),v=y.getContext("2d"),w=Math.max(Bi(c,d),Bi(u,f)),S=C5(e);y.width=w*o.exportScale+S*10*o.exportScale,y.height=w*o.exportScale+S*10*o.exportScale,v.translate(y.width/2,y.height/2),v.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),U=e.height/2-(e.y-u),v.rotate(e.angle);const M=jc.canvas(y);v.translate(-p,-U),g2(e,M,v,s),v.translate(p,U),v.rotate(-e.angle);const[,,,,_,T]=Oe(E,t),C=(c+d)/2-_,x=(u+f)/2-T;v.translate(-C,-x),v.clearRect(-E.width/2,-E.height/2,E.width,E.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(y,-y.width/2,-y.height/2,y.width,y.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-p,-U),g2(e,i,r,s);r.restore()}else{const c=qC(e,n,s,o);if(!c)return;const u=r.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||dre(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&wt(c.element)&&c.element.crop!==null){r.save(),r.globalAlpha=.1;const d=FB(Eoe(c.element,t),n,o.zoom,s,o);d&&iE(d,r,s,o,n),r.restore()}iE(c,r,s,o,n),r.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},HB=new WeakMap([]);function mle(e){const t=VB(e),n=new Path2D(t);return HB.set(e,n),n}function ple(e){return HB.get(e)}function VB(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return ble(Uoe(t,n))}function QC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const Ule=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function ble(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,QC(i,s[0]),"L",s[0],"Z"):n.push(i,QC(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(Ule,"$1")}const Mh=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",X7=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",JC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",eA=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",Y7=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",tA=e=>e==="arrow",jb=e=>e==="arrow",Ni=class Ni{};F(Ni,"rg",new Th),F(Ni,"cache",new WeakMap),F(Ni,"get",t=>Ni.cache.get(t)),F(Ni,"set",(t,n)=>Ni.cache.set(t,n)),F(Ni,"delete",t=>Ni.cache.delete(t)),F(Ni,"destroy",()=>{Ni.cache=new WeakMap}),F(Ni,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:Ni.get(t);if(i!==void 0)return i;G7.delete(t);const r=wle(t,Ni.rg,n||{isExporting:!1,canvasBackgroundColor:Be.white,embedsValidationStatus:null});return Ni.cache.set(t,r),r});let $t=Ni;const yle=e=>[8,8+e],$B=e=>[1.5,6+e];function Ele(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&Y7(e.type)||Ie(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Lr=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?yle(e.strokeWidth):e.strokeStyle==="dotted"?$B(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:Ele(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<pF.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Us(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Wo(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},nA=(e,t,n)=>fs(e)&&(t||fr(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Us(e.backgroundColor)&&Us(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Bl(e)?{...e,strokeColor:Us(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Us(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,iA=(e,t,n,i,r,s,o)=>{const a=lA(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,U]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,U],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=$B(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(lA(e,t,n,"crowfoot_one"),s):[]]}}},vle=e=>{const t=new Th,n={seed:e.seed,disableMultiStroke:!0,disableMultiStrokeFill:!0,roughness:0,preserveVertices:!0},i=fg(e.points.reduce((r,s)=>[Math.min(e.x+s[0],r[0]),Math.min(e.y+s[1],r[1]),Math.max(e.x+s[0],r[2]),Math.max(e.y+s[1],r[3])],[1/0,1/0,-1/0,-1/0]));switch(e.type){case"line":case"arrow":{const r=e.points.length?e.points:[I(0,0)];return de(e)?t.path(GB(r,16),n).sets[0].ops:e.roundness?t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=q(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:I(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[q(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle),q(I(e.x+s.data[2],e.y+s.data[3]),i,e.angle),q(I(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>I(a[0]-e.x,a[1]-e.y)).flat()}}):r.map((s,o)=>{const a=q(I(e.x+s[0],e.y+s[1]),i,e.angle);return{op:o===0?"move":"lineTo",data:I(a[0]-e.x,a[1]-e.y)}})}case"freedraw":{if(e.points.length<2)return[];const r=qw(e.points,.75);return t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=q(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:I(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[q(I(e.x+s.data[0],e.y+s.data[1]),i,e.angle),q(I(e.x+s.data[2],e.y+s.data[3]),i,e.angle),q(I(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>I(a[0]-e.x,a[1]-e.y)).flat()}})}}},wle=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=nr(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Lr(nA(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,Lr(nA(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=Wb(e);if(e.roundness){const m=nr(Math.abs(o-f),e),p=nr(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,Lr(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],Lr(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Lr(e));case"line":case"arrow":{let s;const o=Lr(e),a=e.points.length?e.points:[I(0,0)];if(de(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(GB(a,16),Lr(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=iA(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=iA(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(mle(e),Wo(e.points)){const o=qw(e.points,.75);s=t.curve(o,{...Lr(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Yo(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},GB=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=Ca(a,s),c=Ca(o,a),u=Math.min(t,gt(e[r],o)/2,gt(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},_le=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return noe(e);case"arrow":case"line":{const i=((n=$t.get(e))==null?void 0:n[0])??$t.generateElementShape(e,null)[0],[,,,,r,s]=Oe(e,t);return Fb(e)?aoe(e,i,I(e.x,e.y),e.angle,I(r,s)):roe(i,I(e.x,e.y),e.angle,I(r,s))}case"ellipse":return ioe(e);case"freedraw":{const[,,,,i,r]=Oe(e,t);return ooe(e,I(i,r),Fb(e))}}},_9=(e,t)=>{const n=[...e.points];if(t){if(!sB(e.points))return null;const r=n[0],s=n[n.length-1];Math.hypot(r[0]-s[0],r[1]-s[1])>ore||n.length<4?n.push(I(r[0],r[1])):n[n.length-1]=I(r[0],r[1])}return{polygon:t,points:n}},So=class So{static getBounds(t,n,i=!1){const r=i&&t.angle!==0?So.nonRotatedBoundsCache.get(t):So.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Bt(t))return r.bounds;if(i&&t.angle!==0){const o=So.calculateBounds({...t,angle:0},n);return So.nonRotatedBoundsCache.set(t,{version:t.version,bounds:o}),o}const s=So.calculateBounds(t,n);return So.boundsCache.set(t,{version:t.version,bounds:s}),s}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=Oe(t,n);if(vr(t)){const[u,d,f,h]=S9(t.points.map(([m,p])=>q(I(m,p),I(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(Ie(t))i=Mle(t,l,c,n);else if(t.type==="diamond"){const[u,d]=q(I(l,s),I(l,c),t.angle),[f,h]=q(I(l,a),I(l,c),t.angle),[m,p]=q(I(r,c),I(l,c),t.angle),[U,E]=q(I(o,c),I(l,c),t.angle),y=Math.min(u,f,m,U),v=Math.min(d,h,p,E),w=Math.max(u,f,m,U),S=Math.max(d,h,p,E);i=[y,v,w,S]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=q(I(r,s),I(l,c),t.angle),[f,h]=q(I(r,a),I(l,c),t.angle),[m,p]=q(I(o,a),I(l,c),t.angle),[U,E]=q(I(o,s),I(l,c),t.angle),y=Math.min(u,f,m,U),v=Math.min(d,h,p,E),w=Math.max(u,f,m,U),S=Math.max(d,h,p,E);i=[y,v,w,S]}return i}};F(So,"boundsCache",new WeakMap),F(So,"nonRotatedBoundsCache",new WeakMap);let j7=So;const Oe=(e,t,n=!1)=>{if(vr(e))return Ile(e);if(Ie(e))return ce.getElementAbsoluteCoords(e,t,n);if(ue(e)){const i=t?Vn(e,t):null;if(xe(i)){const{x:r,y:s}=ce.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},W7=(e,t)=>{const n=_le(e,t),[i,r,s,o,a,l]=Oe(e,t),c=I(a,l);if(n.type==="polycurve"){const E=n.data.map(w=>tp(w,10)).flat();let y=0;const v=[];for(;y<E.length-1;)v.push(Ae(I(E[y][0],E[y][1]),I(E[y+1][0],E[y+1][1]))),y++;return v}else{if(n.type==="polyline")return n.data;if(Tle(e)){const[U,E]=e9(e),y=E.map(w=>sA(w,c,e.angle)).flat();return[...rA(U,c,e.angle),...y]}else if(e.type==="diamond"){const[U,E]=t9(e),y=E.map(w=>sA(w,c,e.angle)).flat();return[...rA(U,c,e.angle),...y]}else if(n.type==="polygon"){if(ue(e)){const y=Vn(e,t);if(y&&Ie(y))return[Ae(I(i,r),I(s,r)),Ae(I(s,r),I(s,o)),Ae(I(s,o),I(i,o)),Ae(I(i,o),I(i,r))]}const U=n.data,E=[];for(let y=0;y<U.length-1;y++)E.push(Ae(U[y],U[y+1]));return E}else if(n.type==="ellipse")return Sle(e)}const[u,d,f,h,,,m,p]=[[i,r],[s,r],[i,o],[s,o],[a,r],[a,o],[i,l],[s,l]].map(U=>q(U,c,e.angle));return[Ae(u,d),Ae(f,h),Ae(u,f),Ae(d,h),Ae(u,p),Ae(f,p),Ae(d,m),Ae(h,m)]},Tle=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),rA=(e,t,n)=>e.map(i=>Ae(q(i[0],t,n),q(i[1],t,n))),sA=(e,t,n)=>{const i=tp(e,10);let r=0;const s=[];for(;r<i.length-1;)s.push(Ae(q(I(i[r][0],i[r][1]),t,n),q(I(i[r+1][0],i[r+1][1]),t,n))),r++;return s},Sle=e=>{const t=I(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,r=[],s=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);s.push(q(I(u,d),t,e.angle))}for(let l=0;l<s.length-1;l++)r.push(Ae(s[l],s[l+1]));return r.push(Ae(s[s.length-1],s[0])),r},Wb=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},oA=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},aA=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=oA(m,e,t,n,i)),p>=0&&p<=1&&(h=oA(p,e,t,n,i)),[f,h]},T9=(e,t,n,i)=>{const r=aA(e[0],t[0],n[0],i[0]),s=aA(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},A5=(e,t)=>{let n=I(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=U5(c);Kn(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=I(c[0],c[1]),d=I(c[2],c[3]),f=I(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,U=t?t(n):n;n=f;const[E,y,v,w]=T9(U,h,m,p);a.minX=Math.min(a.minX,E),a.minY=Math.min(a.minY,y),a.maxX=Math.max(a.maxX,v),a.maxY=Math.max(a.maxY,w)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},S9=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},Ile=e=>{const[t,n,i,r]=S9(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},xle=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},Cle=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},lA=(e,t,n,i)=>{if(t.length<1)return null;const r=Ad(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;Kn(o.length===6,"Op data length is not 6");const a=I(o[4],o[5]),l=I(o[2],o[3]),c=I(o[0],o[1]),u=r[s-1];let d=I(0,0);if(u.op==="move"){const z=U5(u.data);Kn(z!=null,"Op data is not a point"),d=z}else u.op==="bcurveTo"&&(d=I(u.data[4],u.data[5]));const f=(z,V)=>Math.pow(1-z,3)*a[V]+3*z*Math.pow(1-z,2)*l[V]+3*Math.pow(z,2)*(1-z)*c[V]+d[V]*Math.pow(z,3),[h,m]=n==="start"?d:a,[p,U]=[f(.3,0),f(.3,1)],E=Math.hypot(h-p,m-U),y=(h-p)/E,v=(m-U)/E,w=xle(i);let S=0;{const[z,V]=n==="end"?e.points[e.points.length-1]:e.points[0],[G,Y]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];S=Math.hypot(z-G,V-Y)}const _=Math.min(w,S*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-y*_,C=m-v*_;if(i==="dot"||i==="circle"||i==="circle_outline"){const z=Math.hypot(C-m,T-h)+e.strokeWidth-2;return[h,m,z]}const x=Cle(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[z,V]=q(I(h,m),I(T,C),Bu(-x)),[G,Y]=q(I(h,m),I(T,C),Bu(x));return[T,C,z,V,G,Y]}const[R,P]=q(I(T,C),I(h,m),-x*Math.PI/180),[D,$]=q(I(T,C),I(h,m),Bu(x));if(i==="diamond"||i==="diamond_outline"){let z,V;if(n==="start"){const[G,Y]=e.points.length>1?e.points[1]:[0,0];[z,V]=q(I(h+_*2,m),I(h,m),Math.atan2(Y-m,G-h))}else{const[G,Y]=e.points.length>1?e.points[e.points.length-2]:[0,0];[z,V]=q(I(h-_*2,m),I(h,m),Math.atan2(m-Y,h-G))}return[h,m,R,P,z,V,D,$]}return[h,m,R,P,D,$]},Ale=e=>{const t=jc.generator(),n=Lr(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},Mle=(e,t,n,i)=>{var d;const r=ke(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=q(I(e.x+f,e.y+h),I(t,n),e.angle);let U=[m,p,m,p];if(r){const E=ce.getMinMaxXYWithBoundText(e,i,[m,p,m,p],r);U=[E[0],E[1],E[2],E[3]]}return U}const o=((d=$t.get(e))==null?void 0:d[0])??Ale(e),a=Ad(o),c=A5(a,([f,h])=>q(I(e.x+f,e.y+h),I(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const f=ce.getMinMaxXYWithBoundText(e,i,u,r);u=[f[0],f[1],f[2],f[3]]}return u},xi=(e,t,n=!1)=>j7.getBounds(e,t,n),mt=(e,t)=>{if(!BF(e))return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||we(e);return e.forEach(a=>{const[l,c,u,d]=xi(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},I9=(e,t)=>{const[n,i,r,s]=mt(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},q0=(e,t,n,i)=>{if(!(Ie(e)||vr(e)))return[e.x,e.y,e.x+t,e.y+n];const r=Mb(0,t,Mb(1,n,e.points,i),i);let s;if(vr(e))s=S9(r);else{const u=jc.generator(),d=e.roundness?u.curve(r,Lr(e)):u.linearPath(r,Lr(e)),f=Ad(d);s=A5(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},cA=(e,t)=>{const n=jc.generator(),i=e.roundness==null?n.linearPath(t,Lr(e)):n.curve(t,Lr(e)),r=Ad(i),[s,o,a,l]=A5(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},Rle=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=we(e);return e.forEach(s=>{const[o,a,l,c]=xi(s,r),u=gt(I((o+l)/2,(a+c)/2),I(t.x,t.y));u<n&&(n=u,i=s)}),xi(i,r)},_s=e=>{const[t,n,i,r]=mt(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},XB=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],fg=e=>I(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),Ea=(e,t,n)=>{const i={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=ni(e,t),[s,o]=q(I(i.minX,i.minY),r,e.angle),[a,l]=q(I(i.maxX,i.minY),r,e.angle),[c,u]=q(I(i.maxX,i.maxY),r,e.angle),[d,f]=q(I(i.minX,i.maxY),r,e.angle),h=[Math.min(s,a,c,d),Math.min(o,l,u,f),Math.max(s,a,c,d),Math.max(o,l,u,f)];if(n){const[m,p,U,E]=n;return[h[0]-E,h[1]-m,h[2]+p,h[3]+U]}return h},Q0=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],hg=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},ni=(e,t,n=0,i=0)=>{const[r,s]=fg(xi(e,t));return I(r+n,s+i)},kle=.1,fc=e=>Ie(e)||vr(e)?e.points.length<2||e.points.length===2&&xe(e)&&As(e.points[0],e.points[e.points.length-1],kle):e.width===0&&e.height===0,Kb=(e,t,n,i,r)=>{const[s,o,a,l]=xi(e,r),c=xt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=xt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},m2=(e,t,n,i,r,s)=>{const[o,a,l,c]=mt(e,r),u=xt({clientX:i.offsetLeft+((s==null?void 0:s.left)||0),clientY:i.offsetTop+((s==null?void 0:s.top)||0)},i),d=xt({clientX:i.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:i.offsetTop+n-((s==null?void 0:s.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},uA=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/Dr)*Dr;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},K7=(e,t,n,i,r)=>{let s=n-e,o=i-t;const a=Math.atan2(o,s);let l=Math.round(a/Dr)*Dr;if(r){const c=Math.floor(r/Dr)*Dr;fre(a,c,c+Dr)&&(hre(a,r)<Dr/6?l=r:Js(a)>Js(r)?l=c+Dr:l=c)}if(l===0)o=0;else if(l===Math.PI/2)s=0;else{const c=Math.tan(l),u=-1,d=t-c*e,f=-1/c,h=-1,m=i-f*n,p=(u*m-h*d)/(c*h-f*u),U=(d*f-m*c)/(c*h-f*u);s=p-e,o=U-t}return{width:s,height:o}},YB=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},Lle=(e,t,n)=>{const i=n.getNonDeletedElementsMap(),r=S5(e,i),s=_s(e);return r.flatMap(o=>{const a=Dle(o,s,t);return o.map(l=>{const c=n.mutateElement(l,{x:l.x+a.x,y:l.y+a.y});return br(l,n,{simultaneouslyUpdated:o}),c})})},Dle=(e,t,{axis:n,position:i})=>{const r=_s(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},Nle=e=>{const t=e.slice(),n=new Set,i=s=>{var c,u,d;const o=(u=(c=s[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[s[0]],l=[];for(const f of s.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{var a;if(!r.has(s.id))if((a=s.groupIds)!=null&&a.length){const l=s.groupIds[s.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&r.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},Ole=e=>{const t=Hre(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{var o,a;if(r)if((o=r.boundElements)!=null&&o.length)i.add(r),n[s]=null,r.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(r.type==="text"&&r.containerId){const l=t.get(r.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===r.id)||(i.add(r),n[s]=null)}else i.add(r),n[s]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},Ple=e=>Ole(Nle(e)),Fle=(e,t,n,i)=>{const r=Lc(n);return r.id=rr(),r.updated=ag(),i&&(r.seed=Ms(),Aa(r)),r.groupIds=ile(r.groupIds,e,s=>(t.has(s)||t.set(s,rr()),t.get(s))),r},Zb=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,r=new Map,s=[],o=[],a=new Map,l=new Map,c=new Map,u=we(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(U=>[U.id,U]));if(e.type==="in-place")for(const U of Object.keys(e.appState.selectedGroupIds))t.filter(E=>{var y;return(y=E.groupIds)==null?void 0:y.includes(U)}).forEach(E=>d.set(E.id,E));t=Ple(t);const f=t.slice(),h=U=>{const y=X8(U).reduce((v,w)=>{if(i.has(w.id))return v;i.set(w.id,!0);const S=Fle(n.editingGroupId,r,w,e.randomizeSeed);return i.set(S.id,!0),c.set(S.id,S),a.set(w.id,S.id),l.set(S.id,w),o.push(w),s.push(S),v.push(S),v},[]);return Array.isArray(U)?y:y[0]||null},m=(U,E)=>{if(E){if(U>f.length-1){f.push(...X8(E));return}f.splice(U+1,0,...X8(E))}},p=new Set(t.filter(U=>d.has(U.id)&&Ee(U)).map(U=>U.id));for(const U of t){if(i.has(U.id)||!d.has(U.id))continue;const E=IB(n,U);if(E){const y=At(t,E).flatMap(w=>Ee(w)?[...Rs(t,w.id),w]:[w]),v=Uu(f,w=>{var S;return(S=w.groupIds)==null?void 0:S.includes(E)});m(v,h(y));continue}if(!(U.frameId&&p.has(U.frameId))){if(Ee(U)){const y=U.id,v=Rs(t,y),w=Uu(f,S=>S.frameId===y||S.id===y);m(w,h([...v,U]));continue}if(sr(U)){const y=ke(U,u),v=Uu(f,w=>w.id===U.id||"containerId"in w&&w.containerId===U.id);y?m(v,h([U,y])):m(v,h(U));continue}if(Bt(U)){const y=Vn(U,u),v=Uu(f,w=>w.id===U.id||w.id===(y==null?void 0:y.id));y?m(v,h([y,U])):m(v,h(U));continue}m(Uu(f,y=>y.id===U.id),h(U))}}if(Pae(s,a,c),sle(f,o,a),e.overrides)for(const U of s){const E=l.get(U.id);E&&Object.assign(U,e.overrides({duplicateElement:U,origElement:E,origIdToDuplicateId:a}))}return{duplicatedElements:s,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},Z7=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=Z7(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=Z7(e[i],t+1);return r}return e},Lc=e=>Z7(e),W={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class Ble{constructor(t){F(this,"onDurableIncrementEmitter",new $s);F(this,"onStoreIncrementEmitter",new $s);F(this,"scheduledMacroActions",new Set);F(this,"scheduledMicroActions",[]);F(this,"_snapshot",Pa.empty());this.app=t}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}scheduleAction(t){this.scheduledMacroActions.add(t),this.satisfiesScheduledActionsInvariant()}scheduleCapture(){this.scheduleAction(W.IMMEDIATELY)}scheduleMicroAction(t){const{action:n}=t;let i;if("change"in t)i=t.change;else{const s=Pa.create(this.app.scene.getElementsMapIncludingDeleted(),this.app.state),o=s.maybeClone(n,t.elements?Xle(t.elements):void 0,t.appState);i=Zf.create(s,o)}const r="delta"in t?t.delta:void 0;this.scheduledMicroActions.push(()=>this.processAction({action:n,change:i,delta:r}))}commit(t,n){this.flushMicroActions();try{const i=this.getScheduledMacroAction();this.processAction({action:i,elements:t,appState:n})}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledMacroActions=new Set}}clear(){this.snapshot=Pa.empty(),this.scheduledMacroActions=new Set}emitDurableIncrement(t,n=void 0,i=void 0){const r=this.snapshot;let s,o;if(n?s=n:s=Zf.create(r,t),i?o=i:o=WB.calculate(r,t),!o.isEmpty()){const a=new zle(s,o);this.onDurableIncrementEmitter.trigger(a),this.onStoreIncrementEmitter.trigger(a)}}emitEphemeralIncrement(t,n=void 0){let i;if(n)i=n;else{const s=this.snapshot;i=Zf.create(s,t)}const r=new Hle(i);this.onStoreIncrementEmitter.trigger(r)}applyChangeToSnapshot(t){const n=this.snapshot,i=this.snapshot.applyChange(t);return n===i?null:i}maybeCloneSnapshot(t,n,i){if(!n&&!i)return null;const r=this.snapshot,s=this.snapshot.maybeClone(t,n,i);return r===s?null:s}flushMicroActions(){for(const t of this.scheduledMicroActions)try{t()}catch(n){console.error("Failed to execute scheduled micro action",n)}this.scheduledMicroActions=[]}processAction(t){const{action:n}=t;if(n===W.EVENTUALLY&&!this.onStoreIncrementEmitter.subscribers.length)return;let i;if("change"in t?i=this.applyChangeToSnapshot(t.change):i=this.maybeCloneSnapshot(n,t.elements,t.appState),!i)return;const r="change"in t?t.change:void 0,s="delta"in t?t.delta:void 0;try{switch(n){case W.IMMEDIATELY:this.emitDurableIncrement(i,r,s);break;case W.NEVER:case W.EVENTUALLY:this.emitEphemeralIncrement(i,r);break;default:Yo(n,"Unknown store action")}}finally{switch(n){case W.IMMEDIATELY:case W.NEVER:this.snapshot=i;break}}}getScheduledMacroAction(){let t;return this.scheduledMacroActions.has(W.IMMEDIATELY)?t=W.IMMEDIATELY:this.scheduledMacroActions.has(W.NEVER)?t=W.NEVER:t=W.EVENTUALLY,t}satisfiesScheduledActionsInvariant(){if(!(this.scheduledMacroActions.size>=0&&this.scheduledMacroActions.size<=Object.keys(W).length)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledMacroActions.size}".`;console.error(t,this.scheduledMacroActions.values())}}}class Zf{constructor(t,n){this.elements=t,this.appState=n}static create(t,n){const i=n.getChangedElements(t),r=n.getChangedAppState(t);return new Zf(i,r)}}class jB{constructor(t,n){this.type=t,this.change=n}static isDurable(t){return t.type==="durable"}static isEphemeral(t){return t.type==="ephemeral"}}class zle extends jB{constructor(t,n){super("durable",t),this.change=t,this.delta=n}}class Hle extends jB{constructor(t){super("ephemeral",t),this.change=t}}class WB{constructor(t,n,i){this.id=t,this.elements=n,this.appState=i}static create(t,n,i={id:rr()}){return new this(i.id,t,n)}static calculate(t,n){const i=n.metadata.didElementsChange?Nf.calculate(t.elements,n.elements):Nf.empty(),r=n.metadata.didAppStateChange?Dn.calculate(t.appState,n.appState):Dn.empty();return this.create(i,r)}static restore(t){const{id:n,elements:i,appState:r}=t;return new this(n,Nf.restore(i),Dn.restore(r))}static load({id:t,elements:{added:n,removed:i,updated:r}}){const s=Nf.create(n,i,r);return new this(t,s,Dn.empty())}static inverse(t){return this.create(t.elements.inverse(),t.appState.inverse())}static applyTo(t,n,i){const[r,s]=t.elements.applyTo(n),[o,a]=t.appState.applyTo(i,r);return[r,o,s||a]}static applyLatestChanges(t,n,i,r){return this.create(t.elements.applyLatestChanges(n,i,r),t.appState,{id:t.id})}isEmpty(){return this.elements.isEmpty()&&this.appState.isEmpty()}}class Pa{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){F(this,"_lastChangedElementsHash",0);F(this,"_lastChangedAppStateHash",0);this.elements=t,this.appState=n,this.metadata=i}static create(t,n,i={didElementsChange:!1,didAppStateChange:!1}){return new Pa(t,dA(n)?n:qf(n),i)}static empty(){return new Pa(new Map,Vle(),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}getChangedElements(t){const n={};for(const i of Fl(t.elements))this.elements.get(i.id)||(n[i.id]=Te(i,{isDeleted:!0}));for(const i of Fl(this.elements))t.elements.get(i.id)!==i&&(n[i.id]=i);return n}getChangedAppState(t){return Ke.getRightDifferences(t.appState,this.appState).reduce((n,i)=>Object.assign(n,{[i]:this.appState[i]}),{})}isEmpty(){return this.metadata.isEmpty}applyChange(t){const n=new Map(this.elements);for(const[r,s]of Object.entries(t.elements))n.set(r,s);const i=qf({...this.appState,...t.appState});return Pa.create(n,i,{didElementsChange:Object.keys(t.elements).length>0,didAppStateChange:Object.keys(t.appState).length>0})}maybeClone(t,n,i){const r={shouldCompareHashes:!1};t===W.EVENTUALLY&&(r.shouldCompareHashes=!0);const s=this.maybeCreateElementsSnapshot(n,r),o=this.maybeCreateAppStateSnapshot(i,r);let a=!1,l=!1;return this.elements!==s&&(a=!0),this.appState!==o&&(l=!0),!a&&!l?this:new Pa(s,o,{didElementsChange:a,didAppStateChange:l})}maybeCreateAppStateSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.appState;const i=dA(t)?t:qf(t);return this.detectChangedAppState(i,n)?i:this.appState}maybeCreateElementsSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.elements;const i=this.detectChangedElements(t,n);return i!=null&&i.size?this.createElementsSnapshot(i):this.elements}detectChangedAppState(t,n={shouldCompareHashes:!1}){if(this.appState===t)return;const i=Ke.isRightDifferent(this.appState,t);if(!i)return;const r=O9(JSON.stringify(t));if(!(n.shouldCompareHashes&&this._lastChangedAppStateHash===r))return this._lastChangedAppStateHash=r,i}detectChangedElements(t,n={shouldCompareHashes:!1}){if(this.elements===t)return;const i=new Map;for(const s of Fl(this.elements))t.get(s.id)||i.set(s.id,Te(s,{isDeleted:!0}));for(const s of Fl(t)){const o=this.elements.get(s.id);if(!o||o.version<s.version){if(wt(s)&&!In(s))continue;i.set(s.id,s)}}if(!i.size)return;const r=Ez(i);if(!(n.shouldCompareHashes&&this._lastChangedElementsHash===r))return this._lastChangedElementsHash=r,i}createElementsSnapshot(t){const n=new Map;for(const i of Fl(this.elements))n.set(i.id,i);for(const i of Fl(t))n.set(i.id,Lc(i));return n}}const KB="__observedAppState",Vle=()=>({name:null,editingGroupId:null,viewBackgroundColor:Be.white,selectedElementIds:{},selectedGroupIds:{},editingLinearElementId:null,selectedLinearElementId:null,croppingElementId:null,activeLockedId:null,lockedMultiSelections:{}}),qf=e=>{var n,i;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,croppingElementId:e.croppingElementId,activeLockedId:e.activeLockedId,lockedMultiSelections:e.lockedMultiSelections,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)??e.editingLinearElementId??null,selectedLinearElementId:((i=e.selectedLinearElement)==null?void 0:i.elementId)??e.selectedLinearElementId??null};return Reflect.defineProperty(t,KB,{value:!0,enumerable:!1}),t},dA=e=>!!Reflect.get(e,KB),ZB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Df(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Df(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+Df(e.slice(1),null,n)}function qB(e){if(e.length!==QB(e[0]))throw new Error("invalid integer part of order key: "+e)}function QB(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function I1(e){const t=QB(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function fA(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=I1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function hA(e,t){qB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function $le(e,t){qB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function Yd(e,t,n=ZB){if(e!=null&&fA(e,n),t!=null&&fA(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=I1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Df("",c,n);if(l<t)return l;const u=$le(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=I1(e),c=e.slice(l.length),u=hA(l,n);return u??l+Df(c,null,n)}const i=I1(e),r=e.slice(i.length),s=I1(t),o=t.slice(s.length);if(i===s)return i+Df(r,o,n);const a=hA(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Df(r,null,n)}function q7(e,t,n,i=ZB){if(n===0)return[];if(n===1)return[Yd(e,t,i)];if(t==null){let o=Yd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Yd(o,t,i),a.push(o);return a}if(e==null){let o=Yd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Yd(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=Yd(e,t,i);return[...q7(e,s,r,i),s,...q7(s,t,n-r-1,i)]}class Gle extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const x9=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(Q7(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&sr(e[l])){const f=e[l],h=ke(f,we(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new Gle,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},C9=e=>e.sort((t,n)=>gA(t)&&gA(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),so=(e,t)=>{try{const n=we(e),i=Yle(e,t),r=A9(e,i),s=e.map(o=>{const a=r.get(o);return a?{...o,index:a.index}:o});x9(s,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,{index:a}]of r)mi(o,n,{index:a})}catch{Kc(e)}return e},Kc=e=>{const t=we(e),n=JB(e),i=A9(e,n);for(const[r,{index:s}]of i)mi(r,t,{index:s});return e},Xle=e=>{const t=we(e),n=JB(e),i=A9(e,n);for(const[r,{index:s}]of i)t.set(r.id,Te(r,{index:s}));return t},Yle=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},JB=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{var f;const u=e[r]?e[r].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{var f;const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),Q7(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(Q7(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},Q7=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,A9=(e,t)=>{var i,r;const n=new Map;for(const s of t){const o=s.shift(),a=s.pop(),l=q7((i=e[o])==null?void 0:i.index,(r=e[a])==null?void 0:r.index,s.length);for(let c=0;c<s.length;c++){const u=e[s[c]];n.set(u,{index:l[c]})}}return n},gA=e=>!!e.index,mA=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},jle=Do(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&x9(e,{shouldThrow:Gre(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Wle=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n};class qb{constructor(t=null){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",jo(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",jo(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:At(n,t)});t&&this.replaceAllElements(t)}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=Wle(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const r=Fe(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&a4(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=$re(t),i=[];jle(n),this.elements=Kc(n),this.elementsMap.clear(),this.elements.forEach(s=>{Ee(s)&&i.push(s),this.elementsMap.set(s.id,s)});const r=mA(this.elements);this.nonDeletedElements=r.elements,this.nonDeletedElementsMap=r.elementsMap,this.frames=i,this.nonDeletedFramesLikes=mA(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Ms();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];so(i,we([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];so(i,we(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}mutateElement(t,n,i={informMutation:!0,isDragging:!1}){const r=this.getNonDeletedElementsMap(),{version:s}=t,{version:o}=mi(t,r,n,i);return this.elementsMap.has(t.id)&&s!==o&&i.informMutation&&this.triggerUpdate(),t}}class Ke{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t,"deleted"):t,o=i&&r!=="deleted"?i(n,"inserted"):n;return new Ke(s,o)}static calculate(t,n,i,r){if(t===n)return Ke.empty();const s={},o={};for(const c of this.getDifferences(t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return Ke.create(a,l,i)}static empty(){return new Ke({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(Ke.mergeObjects(ga(t??[],r),ga(n??[],r),ga(i??[],r)))}static diffObjects(t,n,i,r){if(!t[i]&&!n[i])return;const s=t[i]!==null&&typeof t[i]=="object",o=n[i]!==null&&typeof n[i]=="object";if(s||o){const a=t[i]??{},l=n[i]??{},c=Ke.getLeftDifferences(a,l).reduce((d,f)=>(d[f]=r(a[f]),d),{}),u=Ke.getRightDifferences(a,l).reduce((d,f)=>(d[f]=r(l[f]),d),{});Object.keys(c).length||Object.keys(u).length?(Reflect.set(t,i,c),Reflect.set(n,i,u)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}else t[i]===n[i]&&(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=ga(Ke.getLeftDifferences(ga(s,r),ga(o,r)),c=>c),l=ga(Ke.getRightDifferences(ga(s,r),ga(o,r)),c=>c);if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static isInnerDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("inner",t,n,i).next().value}static isDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("full",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i)).sort()}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i)).sort()}static getInnerDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("inner",t,n,i)).sort()}static getDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("full",t,n,i)).sort()}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="inner"?s=Object.keys(n).filter(o=>o in i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):Yo(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Gi(a,l))continue;yield o}}}}class Dn{constructor(t){this.delta=t}static calculate(t,n){const i=Ke.calculate(t,n,Dn.orderAppStateKeys,Dn.postProcess);return new Dn(i)}static restore(t){const{delta:n}=t;return new Dn(n)}static empty(){return new Dn(Ke.create({},{}))}inverse(){const t=Ke.create(this.delta.inserted,this.delta.deleted);return new Dn(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=Ke.mergeObjects(t.selectedElementIds,s,i),d=Ke.mergeObjects(t.selectedGroupIds,o,r),f=a&&n.has(a)?new ce(n.get(a),n):null,h=l&&n.has(l)?new ce(n.get(l),n):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return Ke.isEmpty(this.delta)}filterInvisibleChanges(t,n,i){const r=qf(t),s=qf(n),o=Ke.isRightDifferent(Dn.stripElementsProps(r),Dn.stripElementsProps(s)),a=Ke.isRightDifferent(Dn.stripStandaloneProps(r),Dn.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=Ke.getRightDifferences(Dn.stripStandaloneProps(r),Dn.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=nle(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=Dn.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=Dn.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d];if(!p)l.value=!0;else{const U=i.get(p);U&&!U.isDeleted?l.value=!0:n[d]=null}break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=Dn.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;case"lockedMultiSelections":{const p=t[d]||{},U=n[d]||{};Gi(p,U)||(l.value=!0);break}case"activeLockedId":{const p=t[d]||null,U=n[d]||null;p!==U&&(l.value=!0);break}default:Yo(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,lockedMultiSelections:l,activeLockedId:c,...u}=t;return u}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}static postProcess(t,n){try{Ke.diffObjects(t,n,"selectedElementIds",i=>!0),Ke.diffObjects(t,n,"selectedGroupIds",i=>i??!1),Ke.diffObjects(t,n,"lockedMultiSelections",i=>i??{}),Ke.diffObjects(t,n,"activeLockedId",i=>i??null)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}static orderAppStateKeys(t){const n={};for(const i of Object.keys(t).sort())n[i]=t[i];return n}}const _t=class _t{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o={},a={},l={},c=[...Object.entries(t),...Object.entries(n),...Object.entries(i)];for(const[u,d]of c)this.satisfiesAddition(d)?o[u]=d:this.satisfiesRemoval(d)?a[u]=d:l[u]=d;s=new _t(o,a,l)}else s=new _t(t,n,i);return s}static restore(t){const{added:n,removed:i,updated:r}=t;return _t.create(n,i,r)}static validate(t,n,i){for(const[r,s]of Object.entries(t[n]))if(!this.satisfiesCommmonInvariants(s)||!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsDelta invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return _t.empty();const i={},r={},s={};for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0,version:o.version+1,versionNonce:Ms()},u=Ke.create(l,c,_t.stripIrrelevantProps);r[o.id]=u}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0,version:o.version-1,versionNonce:Ms()},c={...o,isDeleted:!1},u=Ke.create(l,c,_t.stripIrrelevantProps);i[o.id]=u;continue}if(a.versionNonce!==o.versionNonce){const l=Ke.calculate(a,o,_t.stripIrrelevantProps,_t.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i[o.id]=l:r[o.id]=l;continue}Ke.isEmpty(l)||(s[o.id]=l)}}return _t.create(i,r,s)}static empty(){return _t.create({},{},{})}inverse(){const t=s=>{const o={};for(const[a,l]of Object.entries(s))o[a]=Ke.create(l.inserted,l.deleted);return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return _t.create(i,n,r)}isEmpty(){return Object.keys(this.added).length===0&&Object.keys(this.removed).length===0&&Object.keys(this.updated).length===0}applyLatestChanges(t,n,i){const r=(c,u)=>(d,f)=>{let h;switch(f){case"deleted":h=c;break;case"inserted":h=u;break}if(!h)return console.error("Element not found when trying to apply latest changes"),d;const m={};for(const p of Object.keys(d))switch(p){case"boundElements":m[p]=d[p];break;default:m[p]=h[p]}return m},s=c=>{const u={};for(const[d,f]of Object.entries(c)){const h=t.get(d),m=n.get(d);let p=null;h||m?p=Ke.create(f.deleted,f.inserted,r(h,m),i):p=f,Ke.isInnerDifferent(p.deleted,p.inserted)&&(u[d]=p)}return u},o=s(this.added),a=s(this.removed),l=s(this.updated);return _t.create(o,a,l,{shouldRedistribute:!0})}applyTo(t,n=Pa.empty().elements,i={excludedProperties:new Set}){let r=new Map(t),s;const o={containsVisibleDifference:!1,containsZindexDifference:!1};try{const a=_t.createApplier(r,n,i,o),l=a(this.added),c=a(this.removed),u=a(this.updated),d=this.resolveConflicts(t,r);s=new Map([...l,...c,...u,...d])}catch(a){return console.error("Couldn't apply elements delta",a),[t,!0]}try{r=_t.reorderElements(r,s,o);const a=new qb(r);_t.redrawTextBoundingBoxes(a,s),_t.redrawBoundArrows(a,s)}catch(a){console.error("Couldn't mutate elements after applying elements change",a)}finally{return[r,o.containsVisibleDifference]}}static applyDelta(t,n,i,r){var o,a;const s={};for(const l of Object.keys(n.inserted)){if(l==="boundElements"||i.excludedProperties.has(l))continue;const c=n.inserted[l];Reflect.set(s,l,c)}if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){const l=Ke.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(s,{boundElements:l})}if(!r.containsVisibleDifference){const{index:l,...c}=s,u=_t.checkForVisibleDifference(t,c);r.containsVisibleDifference=u}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),Te(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:Ke.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,r=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Te(d,u):f=mi(d,n,u),i.set(f.id,f),n.set(f.id,f)};for(const c of Object.keys(this.removed))_t.unbindAffected(t,n,c,r);for(const c of Object.keys(this.added))_t.rebindAffected(t,n,c,r);for(const[c]of Array.from(Object.entries(this.updated)).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>zae.has(f)))){const u=n.get(c);!u||u.isDeleted||_t.rebindAffected(t,n,c,r)}const s=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=_t.calculate(s,i);for(const[c,u]of Object.entries(o))this.added[c]=u;for(const[c,u]of Object.entries(a))this.removed[c]=u;for(const[c,u]of Object.entries(l))this.updated[c]=u;return i}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);kf.unbindAffected(n,s(),r),kf.unbindAffected(n,o(),r),Lf.unbindAffected(n,s(),r),Lf.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);kf.unbindAffected(n,s(),r),kf.rebindAffected(n,o(),r),Lf.unbindAffected(n,s(),(a,l)=>{ue(a)&&r(a,l)}),Lf.rebindAffected(n,o(),r)}static redrawTextBoundingBoxes(t,n){const i=t.getNonDeletedElementsMap(),r=new Map;for(const s of n.values()){if(Bt(s)){const{containerId:o}=s,a=o?i.get(o):void 0;a&&r.set(a.id,{container:a,boundText:s})}if(sr(s)){const o=Ko(s),a=o?i.get(o):void 0;a&&r.set(s.id,{container:s,boundText:a})}}for(const{container:s,boundText:o}of r.values())s.isDeleted||o.isDeleted||Yi(o,s,t)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&ro(i)&&br(i,t,{changedElements:n})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=C9([...r]),o=Ke.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),we(so(s,o))}static postProcess(t,n){try{Ke.diffArrays(t,n,"boundElements",s=>s.id);const i=t.points??[],r=n.points??[];Ke.isDifferent(i,r)||(Reflect.deleteProperty(t,"points"),Reflect.deleteProperty(n,"points"))}catch{console.error("Couldn't postprocess elements delta.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,...r}=t;return r}};F(_t,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(_t,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(_t,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(_t,"satisfiesCommmonInvariants",({deleted:t,inserted:n})=>!!(t.version&&n.version&&Number.isInteger(t.version)&&Number.isInteger(n.version)&&t.version>=0&&n.version>=0&&t.version!==n.version)),F(_t,"createApplier",(t,n,i,r)=>s=>{const o=_t.createGetter(t,n,r);return Object.entries(s).reduce((a,[l,c])=>{const u=o(l,c.inserted);if(u){const d=_t.applyDelta(u,c,i,r);t.set(d.id,d),a.set(d.id,d)}return a},new Map)}),F(_t,"createGetter",(t,n,i)=>(r,s)=>{let o=t.get(r);return o||(o=n.get(r),o?(i.containsZindexDifference=!0,(!s.isDeleted||s.isDeleted&&!o.isDeleted)&&(i.containsVisibleDifference=!0)):o=Te({id:r,version:1},{...s})),o});let Nf=_t;const Kle=(e,t,n)=>{const[i,r,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=_s(e),l=S5(e,t).map(f=>[f,_s(f)]).sort((f,h)=>f[1][r]-h[1][r]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(U=>U[1][i]===a[i]),h=l.findIndex(U=>U[1][s]===a[s]),m=(l[h][1][r]-l[f][1][r])/(l.length-1);let p=l[f][1][r];return l.flatMap(([U,E],y)=>{const v={x:0,y:0};return y!==f&&y!==h&&(p+=m,v[n.axis]=p-E[r]),U.map(w=>Te(w,{x:w.x+v.x,y:w.y+v.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Te(p,{x:p.x+m.x,y:p.y+m.y}))})},Zle=(e,t,n,i,r,s)=>{if(t.length===1&&de(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(de(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>Ee(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=qle(mt(c),n,r,s);a.forEach(d=>{if(pA(e,d,i,u),!xe(d)){const f=ke(d,i.getNonDeletedElementsMap());f&&pA(e,f,i,u),br(d,i,{simultaneouslyUpdated:Array.from(a)})}})},qle=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Rn(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},pA=(e,t,n,i)=>{const r=e.originalElements.get(t.id)??t,s=r.x+i.x,o=r.y+i.y;n.mutateElement(t,{x:s,y:o})},Qle=(e,t,n)=>{const[i,r]=mt(e);return[t-i,n-r]},UA=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,scene:d,widthAspectRatio:f=null,originOffset:h=null,informMutation:m=!0})=>{l&&e.type!=="selection"&&(f?a=o/f:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=uA(t,a,r<n?-o:o):{width:o,height:a}=uA(t,o,s<i?-a:a),a<0&&(a=-a)));let p=r<n?n-o:n,U=s<i?i-a:i;c&&(o+=o,a+=a,p=n-o/2,U=i-a/2);let E=null;if(ue(e)){a=e.height;const y=i9(dt({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,y),Math.abs(r-n)>Lie/u&&(E={autoResize:!1}),U=i,c&&(p=n-o/2)}if(o!==0&&a!==0){let y=null;wt(e)&&(y={initialWidth:o,initialHeight:a}),d.mutateElement(e,{x:p+((h==null?void 0:h.x)??0),y:U+((h==null?void 0:h.y)??0),width:o,height:a,...E,...y},{informMutation:m,isDragging:!1})}},ez=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(vb,e),Yr(i.toString())}catch(i){console.error(i)}return Yr(n)},tz=(e,t)=>{if(e.length>0&&Qb(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},Qb=e=>!!(e.length===1||e.length>1&&g9(e)),Qf=e=>{try{const t=new URL(e);return t.searchParams.has(vb)&&t.host===window.location.host}catch{return!1}},Jle=e=>{try{const{searchParams:t}=new URL(e);if(t.has(vb))return t.get(vb)}catch{}return null},oo=(e,{x:t,y:n,strokeColor:i=on.strokeColor,backgroundColor:r=on.backgroundColor,fillStyle:s=on.fillStyle,strokeWidth:o=on.strokeWidth,strokeStyle:a=on.strokeStyle,roughness:l=on.roughness,opacity:c=on.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:U=null,boundElements:E=null,link:y=null,locked:v=on.locked,...w})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:w.points}),{id:w.id||rr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:U,seed:w.seed??Ms(),version:w.version||1,versionNonce:w.versionNonce??0,isDeleted:!1,boundElements:E,updated:ag(),link:y,locked:v,customData:w.customData}),Qo=e=>oo(e.type,e),bA=e=>oo("embeddable",e),ece=e=>({...oo("iframe",e)}),M9=e=>Te({...oo("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),J7=e=>Te({...oo("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),nz=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Kr=e=>{const t=e.fontFamily||Yc,n=e.fontSize||Ul,i=e.lineHeight||Mc(t),r=Ih(e.text),s=Hn(r,dt({fontFamily:t,fontSize:n}),i),o=e.textAlign||Km,a=e.verticalAlign||Ub,l=nz({textAlign:o,verticalAlign:a},s),c={...oo("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Te(c,{})},tce=(e,t,n)=>{let{width:i,height:r}=Hn(n,dt(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===zr.MIDDLE&&!e.containerId&&e.autoResize){const c=Hn(e.text,dt(e),e.lineHeight),u=nz(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Oe(e,t),[h,m,p,U]=q0(e,i,r,!1),E=(c-h)/2,y=(u-m)/2,v=(d-p)/2,w=(f-U)/2;[a,l]=nce({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,E,y,v,w)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},nce=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},iz=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=Wc(i,dt(e),t?Zo(t,e):e.width));const r=tce(e,n,i);return{text:i,...r}},ice=e=>({...oo(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),hc=e=>{const t={...oo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null};return ln(t)?{...t,polygon:e.polygon??!1}:t},Jf=e=>e.elbowed?{...oo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...oo(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},rz=e=>({...oo("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),mo=new Map,rce=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,sce=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,oce=/^https:\/\/(?:www\.)?figma\.com/,yA=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,ace=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,lce=/^(?:https?:\/\/)?forms\.microsoft\.com\//,EA=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,cce=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,uce=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,dce=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,vA=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,wA=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,fce=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,e4=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com","forms.microsoft.com"]),_A=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com","forms.microsoft.com"]),d0=e=>`<html><body>${e}</body></html>`,Of=e=>{if(!e)return null;if(mo.has(e))return mo.get(e);const t=e,n=_A.has(t4(e,_A)||"");let i="generic",r={w:560,h:840};const s=e.match(rce);if(s!=null&&s[2]){const c=s[3]?`&start=${s[3]}`:"",u=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break}return r=u?{w:315,h:560}:{w:560,h:315},mo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(sce);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},mo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(oce))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},mo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(uce);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),mo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(lce.test(e)&&!e.includes("embed=true")&&(e+=e.includes("?")?"&embed=true":"?embed=true"),EA.test(e)){const c=e.match(EA)[1],u=c2(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>d0(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return mo.set(t,d),d}if(wA.test(e)){const[,c,u,d]=e.match(wA),f=c2(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>d0(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return mo.set(t,h),h}if(yA.test(e)){const[,c,u]=e.match(yA),d=c2(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>d0(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return mo.set(e,f),f}return mo.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},sz=e=>{let t;Bl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=qe.Helvetica,r=dt({fontSize:n,fontFamily:i});return Kr({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:Wc(t,r,e.width-20),textAlign:"center",verticalAlign:zr.MIDDLE,angle:e.angle??0})},t4=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(e4.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return e4.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},hce=e=>{const t=e.match(cce);if(t&&t.length===2)return t[1];const n=e.match(fce);if(n&&n.length===2)return n[1];const i=e.match(ace);if(i&&i.length===2)return i[1];if(vA.test(e))return`https://giphy.com/embed/${vA.exec(e)[1]}`;const r=e.match(dce);return r&&r.length===2?r[1]:e},p2=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(t4(e,n))return!0;return!1}}return!!t4(e,e4)},eh=100,_u=100,TA=e=>{switch(e){case H.ARROW_UP:return"up";case H.ARROW_DOWN:return"down";case H.ARROW_RIGHT:return"right";case H.ARROW_LEFT:return"left";default:return"right"}},oz=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{var l;let a;if(de(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return s;Kn(ro(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=l9(t,Ea(t,n),[u[0]+o.x,u[1]+o.y]);s.push({relative:c,heading:d})}return s},[]);switch(i){case"up":return r.filter(s=>Bn(s.heading,Ws)).map(s=>s.relative);case"down":return r.filter(s=>Bn(s.heading,er)).map(s=>s.relative);case"right":return r.filter(s=>Bn(s.heading,Pn)).map(s=>s.relative);case"left":return r.filter(s=>Bn(s.heading,hs)).map(s=>s.relative)}},n4=(e,t,n)=>oz("successors",e,t,n),i4=(e,t,n)=>oz("predecessors",e,t,n),gce=(e,t,n)=>{const i=_u+e.width;if(n==="up"||n==="down"){const a=eh+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(_u+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=eh+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=eh+e.height,s=(t.length===0,_u+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},mce=(e,t,n,i)=>{const r=i.getNonDeletedElementsMap(),s=n4(e,r,n),o=i4(e,r,n),a=gce(e,[...s,...o],n),l=Qo({type:e.type,x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Kn(w5(l),"not an ExcalidrawFlowchartNodeElement");const c=az(e,l,n,t,i);return{nextNode:l,bindingArrow:c}},pce=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(n==="left"||n==="right"){const d=eh*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=_u+e.width;n==="left"&&(h*=-1),a=e.x+h;const m=(eh+e.height)*o;l=f+m}else{const d=_u*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=eh+e.height;n==="up"&&(h*=-1),l=e.y+h;const m=(_u+e.width)*o;a=f+m}const c=Qo({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Kn(w5(c),"not an ExcalidrawFlowchartNodeElement");const u=az(e,c,n,t,i);s.push(c),s.push(u)}return s},az=(e,t,n,i,r)=>{let s,o;switch(n){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(n){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=Jf({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[I(0,0),I(l,c)],elbowed:!0}),d=r.getNonDeletedElementsMap();qo(u,e,"start",r),qo(u,t,"end",r);const f=new Map;f.set(e.id,e),f.set(t.id,t),f.set(u.id,u),ce.movePoints(u,r,new Map([[1,{point:u.points[1]}]]));const h=cg(u,jo(new Map([...d.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...h}};class Uce{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!ro(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...n4(t,n,i),...i4(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...n4(t,n,a),...i4(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class bce{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,r){const s=r.getNonDeletedElementsMap();if(i!==this.direction){const{nextNode:o,bindingArrow:a}=mce(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,a]}else{this.numberOfNodes+=1;const o=pce(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=s.get(t.frameId);Kn(o&&eB(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(a=>lp([a],o,s)||kc(a,o,s))&&(this.pendingNodes=this.pendingNodes.map(a=>mi(a,s,{frameId:t.frameId})))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const yce=(e,t)=>{var n,i;for(const[,r]of t)if(r.type==="arrow"&&(((n=r.startBinding)==null?void 0:n.elementId)===e.id||((i=r.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},Ece=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),lz=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===ve.binary)throw new Error("Only images can be added to ImageCache");const l=Ece(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},cz=e=>e.filter(t=>In(t)),vce=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",SA=e=>{const t=new DOMParser().parseFromString(e,ve.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!vce(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",tt);let r=n.getAttribute("width"),s=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(s!=null&&s.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},wce=(e,t,n,i,r,s,o,a,l,c,u)=>{const d=i.getNonDeletedElementsMap();if(n.length===1){const[f]=n;if(t==="rotation")de(f)||(_ce(f,i,a,l,r),br(f,i));else if(t){const h=n[0].id,m=d.get(h),p=e.get(h);if(m&&p){const{nextWidth:U,nextHeight:E}=Ace(m,p,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});J0(U,E,m,p,e,i,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s})}}return ue(f)&&br(f,i),!0}else if(n.length>1){if(t==="rotation")return Sce(e,n,i,a,l,r,c,u),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:U}=Mce(n,e,d,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});return uz(n,d,t,i,e,{shouldResizeFromCenter:s,shouldMaintainAspectRatio:o,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:U}),!0}}return!1},_ce=(e,t,n,i,r)=>{const[s,o,a,l]=Oe(e,t.getNonDeletedElementsMap()),c=(s+a)/2,u=(o+l)/2;let d;Ee(e)?d=0:(d=5*Math.PI/2+Math.atan2(i-u,n-c),r&&(d=d+Dr/2,d=d-d%Dr),d=Js(d));const f=Ko(e);if(t.mutateElement(e,{angle:d}),f){const h=t.getElement(f);h&&!xe(e)&&t.mutateElement(h,{angle:d})}},R9=(e,t,n,i)=>Ie(e)||vr(e)?{points:Mb(0,t,Mb(1,n,e.points,i),i)}:{},k9=(e,t,n)=>{let i=e.width;if(Bt(e)){const o=Vn(e,t);o&&(i=Zo(o,e))}const s=e.fontSize*(n/i);return s<Nw?null:{size:s}},Tce=(e,t,n,i,r,s,o)=>{const a=n.getNonDeletedElementsMap(),l=t.width*(o/t.height),c=k9(t,a,l);if(c!==null){if(i.includes("n")||i.includes("s")){const u=I(e.x,e.y),d=r4(u,e.width,e.height,l,o,e.angle,i,!1,r);n.mutateElement(t,{fontSize:c.size,width:l,height:o,x:d.x,y:d.y});return}if(i==="e"||i==="w"){const u=i9(dt({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),d=Math.max(u,s),f=Wc(t.originalText,dt(t),Math.abs(d)),h=Hn(f,dt(t),t.lineHeight),m=h.height,p=I(e.x,e.y),U=r4(p,e.width,e.height,d,m,t.angle,i,!1,r),E={width:Math.abs(d),height:Math.abs(h.height),x:U.x,y:U.y,text:f,autoResize:!1};n.mutateElement(t,E)}}},Sce=(e,t,n,i,r,s,o,a)=>{var u;const l=n.getNonDeletedElementsMap();let c=5*Math.PI/2+Math.atan2(r-a,i-o);s&&(c+=Dr/2,c-=c%Dr);for(const d of t)if(!Ee(d)){const[f,h,m,p]=Oe(d,l),U=(f+m)/2,E=(h+p)/2,y=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[v,w]=q(I(U,E),I(o,a),c+y-d.angle),S=de(d)?{points:Vae(d,l)}:{x:d.x+(v-U),y:d.y+(w-E),angle:Js(c+y)};n.mutateElement(d,S),br(d,n,{simultaneouslyUpdated:t});const M=ke(d,l);M&&!xe(d)&&n.mutateElement(M,{x:M.x+(v-U),y:M.y+(w-E),angle:Js(c+y)})}n.triggerUpdate()},Ice=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?Oe(t[0],n):mt(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=q(I(i,r),I(c,u),-d),e){case"n":return q(I(i-(s+a)/2,r-o),I(0,0),d);case"s":return q(I(i-(s+a)/2,r-l),I(0,0),d);case"w":return q(I(i-s,r-(o+l)/2),I(0,0),d);case"e":return q(I(i-a,r-(o+l)/2),I(0,0),d);case"nw":return q(I(i-s,r-o),I(0,0),d);case"ne":return q(I(i-a,r-o),I(0,0),d);case"sw":return q(I(i-s,r-l),I(0,0),d);case"se":return q(I(i-a,r-l),I(0,0),d);default:return[0,0]}},xce=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},Cce=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},r4=(e,t,n,i,r,s,o,a,l)=>{const c=Cce(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},J0=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{if(ue(n)&&ue(i))return Tce(i,n,s,o,c,e,t);let u={};const d=s.getNonDeletedElementsMap(),f=ke(n,d);if(f){const U=r.get(f.id);if(U&&(u={fontSize:U.fontSize}),l){const E={...n,width:e},y=k9(f,d,Zo(E,f));if(y===null)return;u={fontSize:y.size}}else{const E=lB(dt(f),f.lineHeight),y=cB(f.fontSize,f.lineHeight);e=Math.max(e,E),t=Math.max(t,y)}}const h=R9(i,e,t,!0);let m=I(i.x,i.y);if(Ie(i)){const[U,E]=xi(i,r);m=I(U,E)}const p=r4(m,i.width,i.height,e,t,i.angle,o,l,c);if(Ie(i)&&h.points){const U=i.x-m[0],E=i.y-m[1];p.x+=U,p.y+=E;const y=h.points[0][0],v=h.points[0][1];p.x+=y,p.y+=v,h.points=h.points.map(w=>I(w[0]-y,w[1]-v))}if(e<0&&(p.x=p.x+e),t<0&&(p.y=p.y+t),"scale"in n&&"scale"in i&&s.mutateElement(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),xe(n)&&f&&l){const U=e/n.width*f.fontSize;if(U<Nw)return;u.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(p.x)&&Number.isFinite(p.y)){const U={...p,width:Math.abs(e),height:Math.abs(t),...h};s.mutateElement(n,U,{informMutation:a,isDragging:!1}),f&&u!=null&&s.mutateElement(f,{fontSize:u.fontSize}),rp(n,s,o,l),br(n,s,{newSize:{width:e,height:t}})}},Ace=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1}={})=>{const[a,l,c,u]=q0(t,t.width,t.height,!0),d=I(a,l),f=I(c,u),h=Tb(d,f),m=q(I(i,r),h,-t.angle),[p,U,E,y]=q0(e,e.width,e.height,!0),v=E-p,w=y-U,S=f[0]-d[0],M=f[1]-d[1];let _=S/v,T=M/w;n.includes("e")&&(_=(m[0]-d[0])/v),n.includes("s")&&(T=(m[1]-d[1])/w),n.includes("w")&&(_=(f[0]-m[0])/v),n.includes("n")&&(T=(f[1]-m[1])/w);let C=e.width*_,x=e.height*T;if(o&&(C=2*C-t.width,x=2*x-t.height),s){const R=Math.abs(C)/t.width,P=Math.abs(x)/t.height;if(n.length===1&&(x*=R,C*=P),n.length===2){const D=Math.max(R,P);C=t.width*D*Math.sign(C),x=t.height*D*Math.sign(x)}}return{nextWidth:C,nextHeight:x}},Mce=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(D=>t.get(D.id)),c=l.reduce((D,$)=>{if(!Ie($))return D;const z=Ko($);if(!z)return D;const V=t.get(z)??null;return Bt(V)?[...D,{...V,...ce.getBoundTextElementPosition($,V,n)}]:D},[]),u=_s(l.map(D=>D).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:U}=u,E=h-d,y=m-f,v={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+y/2],w:[h,f+y/2],n:[d+E/2,m],s:[d+E/2,f]},[w,S]=a?[p,U]:v[i],M=a?2:1,_=Math.max(Math.abs(r-w)/E||0,Math.abs(s-S)/y||0)*M;let T=i.includes("e")||i.includes("w")?Math.abs(r-w)*M:E,C=i.includes("n")||i.includes("s")?Math.abs(s-S)*M:y;o&&(T=E*_*Math.sign(r-w),C=y*_*Math.sign(s-S));const x={ne:[r<w,s>S],se:[r<w,s<S],sw:[r>w,s<S],nw:[r>w,s>S],e:[r<w,!1],w:[r>w,!1],n:[!1,s>S],s:[!1,s<S]},[R,P]=x[i].map(D=>D);return{originalBoundingBox:u,nextWidth:T,nextHeight:C,flipByX:R,flipByY:P}},uz=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((M,_)=>{const T=r.get(_.id);return T&&M.push({orig:T,latest:_}),M},[]);let h;if(d)h=d;else{const M=f.reduce((_,{orig:T})=>{if(!Ie(T))return _;const C=Ko(T);if(!C)return _;const x=r.get(C)??null;return Bt(x)?[..._,{...x,...ce.getBoundTextElementPosition(T,x,t)}]:_},[]);h=_s(f.map(({orig:_})=>_).concat(M))}const{minX:m,minY:p,maxX:U,maxY:E,midX:y,midY:v}=h,w=U-m,S=E-p;if(u===void 0&&c===void 0&&(u=w,c=S),s&&(u===void 0?u=c*(w/S):c===void 0?c=u*(S/w):Math.abs(u/c-w/S)>.001&&(u=c*(w/S))),u&&c){let M=n.includes("e")||n.includes("w")?Math.abs(u)/w:1,_=n.includes("n")||n.includes("s")?Math.abs(c)/S:1,T;n.length===1?T=n.includes("e")||n.includes("w")?M:_:T=Math.max(Math.abs(u)/w||0,Math.abs(c)/S||0);const C={ne:[m,E],se:[m,p],sw:[U,p],nw:[U,E],e:[m,p+S/2],w:[U,p+S/2],n:[m+w/2,E],s:[m+w/2,p]},[x,R]=o?[y,v]:C[n],P=s||f.some(G=>G.latest.angle!==0||ue(G.latest)||Ch(G.latest));P&&(M=T,_=T);const[D,$]=[a?-1:1,l?-1:1],z=[];for(const{orig:G,latest:Y}of f){if(ue(G)&&Bt(G))continue;const X=G.width*M,Z=G.height*_,Ue=Js(G.angle*D*$),re=Ie(G)||vr(G),be=G.x-x,Ye=G.y-R,je=a&&!re?X:0,St=l&&!re?Z:0,hn=x+D*(be*M+je),Yn=R+$*(Ye*_+St),pi=R9(G,X*D,Z*$,!1),$e={x:hn,y:Yn,width:X,height:Z,angle:Ue,...pi};if(de(G)&&(G.startBinding&&($e.startBinding={...G.startBinding,fixedPoint:[a?-G.startBinding.fixedPoint[0]+1:G.startBinding.fixedPoint[0],l?-G.startBinding.fixedPoint[1]+1:G.startBinding.fixedPoint[1]]}),G.endBinding&&($e.endBinding={...G.endBinding,fixedPoint:[a?-G.endBinding.fixedPoint[0]+1:G.endBinding.fixedPoint[0],l?-G.endBinding.fixedPoint[1]+1:G.endBinding.fixedPoint[1]]}),G.fixedSegments&&pi.points&&($e.fixedSegments=G.fixedSegments.map(rn=>({...rn,start:pi.points[rn.index-1],end:pi.points[rn.index]})))),wt(G)&&($e.scale=[G.scale[0]*D,G.scale[1]*$]),ue(G)){const rn=k9(G,t,X);if(!rn)return;$e.fontSize=rn.size}const ot=r.get(Ko(G)??"");if(ot)if(P){const rn=ot.fontSize*T;if(rn<Nw)return;$e.boundTextFontSize=rn}else $e.boundTextFontSize=ot.fontSize;z.push({element:Y,update:$e})}const V=z.map(({element:G})=>G);for(const{element:G,update:{boundTextFontSize:Y,...X}}of z){const{width:Z,height:Ue,angle:re}=X;i.mutateElement(G,X),br(G,i,{simultaneouslyUpdated:V,newSize:{width:Z,height:Ue}});const be=ke(G,t);be&&Y&&(i.mutateElement(be,{fontSize:Y,angle:Ie(G)?void 0:re}),rp(G,i,n,!0))}i.triggerUpdate()}},IA={mouse:8,pen:16,touch:28},Rce=16,dz={e:!0,s:!0,n:!0,w:!0},xA={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},rE={e:!0,s:!0,n:!0,w:!0},ma=(e,t,n,i,r,s,o)=>{const[a,l]=q(I(e+n/2,t+i/2),I(r,s),o);return[a-n/2,l-i/2,n,i]},L9=e=>!(e.viewport.isMobile||e.isTouchScreen&&(Aie||lF)),f0=e=>L9(e)?dz:{},D9=([e,t,n,i,r,s],o,a,l,c={},u=4,d=rd)=>{const f=IA[l],h=f/a.value,m=f/a.value,p=f/a.value,U=f/a.value,E=n-e,y=i-t,v=u/a.value,w=(f-d*2)/(2*a.value),S={nw:c.nw?void 0:ma(e-v-p+w,t-v-U+w,h,m,r,s,o),ne:c.ne?void 0:ma(n+v-w,t-v-U+w,h,m,r,s,o),sw:c.sw?void 0:ma(e-v-p+w,i+v-w,h,m,r,s,o),se:c.se?void 0:ma(n+v-w,i+v-w,h,m,r,s,o),rotation:c.rotation?void 0:ma(e+E/2-h/2,t-v-U+w-Rce/a.value,h,m,r,s,o)},M=5*IA.mouse/a.value;return Math.abs(E)>M&&(c.n||(S.n=ma(e+E/2-h/2,t-v-U+w,h,m,r,s,o)),c.s||(S.s=ma(e+E/2-h/2,i+v-w,h,m,r,s,o))),Math.abs(y)>M&&(c.w||(S.w=ma(e-v-p+w,t+y/2-m/2,h,m,r,s,o)),c.e||(S.e=ma(n+v-w,t+y/2-m/2,h,m,r,s,o))),S},fz=(e,t,n,i="mouse",r=dz)=>{if(e.locked||de(e))return{};if(e.type==="freedraw"||Ie(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=rE:o[0]>0&&o[1]<0?r=xA:o[0]>0&&o[1]>0?r=rE:o[0]<0&&o[1]>0?r=xA:o[0]<0&&o[1]<0&&(r=rE)}}else Ee(e)&&(r={...r,rotation:!0});const s=Ie(e)?rd+8:wt(e)?0:rd;return D9(Oe(e,n,!0),e.angle,t,i,r,s,wt(e)?0:void 0)},hz=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return de(n)?!1:Ie(n)?n.points.length>2:!0},s4=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],kce=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=fz(e,s,t,o,f0(a));if(l&&s4(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?s4(f,i,r):!1});if(u.length>0)return u[0];if(L9(a)){const[d,f,h,m,p,U]=Oe(e,t);if(!(Ie(e)&&e.points.length<=2)){const E=wt(e)?0:bb/s.value,y=bb/s.value,v=gz(I(d-E,f-E),I(h+E,m+E),I(p,U),e.angle);for(const[w,S]of Object.entries(v))if(Sb(I(i,r),S,y))return w}}return!1},CA=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=kce(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),AA=([e,t,n,i],r,s,o,a,l)=>{const c=D9([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,f0(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&s4(f,r,s)});if(u)return u;if(L9(l)){const d=(e+n)/2,f=(t+i)/2,h=bb/o.value,m=gz(I(e-h,t-h),I(n+h,i+h),I(d,f),0);for(const[p,U]of Object.entries(m))if(Sb(I(r,s),U,h))return p}return!1},sE=["ns","nesw","ew","nwse"],Lce=(e,t)=>{const n=sE.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=sE[(n+i)%sE.length]}return e},MA=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=Lce(r,t.angle)),r?`${r}-resize`:""},gz=([e,t],[n,i],r,s)=>{const o=q(I(e,t),r,s),a=q(I(n,t),r,s),l=q(I(e,i),r,s),c=q(I(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},N9=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Fe(t,e).length))},o4=(e,t)=>e.frameId===t||e.id===t,mz=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=we(n||Fe(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},Dce=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},RA=(e,t,n,i)=>{var r,s;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(s=(r=e.boundElements)==null?void 0:r.find(a=>a.type!=="arrow"))==null?void 0:s.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},Nce=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{o4(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},Oce=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?Uu(t,f=>a(f),Math.max(0,n-1)):LF(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return RA(c,t,i,s)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!r&&(c.frameId||Ee(c))){const f=Nce(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return RA(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=At(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},pz=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),Uz=(e,t,n,i)=>{const r=mz(e,t),s=pz(e,r);let o=Dce(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>Ee(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var v;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(w=>{const S=e[w];return S.frameId&&a.has(S.frameId)})?null:(v=e[f])==null?void 0:v.frameId,m=Oce(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),U=e.slice(u,d+1),E=n==="left"?e.slice(m,u):e.slice(d+1,m+1),y=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...U,...E,...y]:[...p,...E,...U,...y]}),so(e,s),e},bz=(e,t,n,i,r)=>{const s=mz(e,t,r),o=pz(e,s),a=[];let l,c;if(n==="left"){if(i)l=LF(e,m=>o4(m,i));else if(t.editingGroupId){const m=At(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=Uu(e,m=>o4(m,i));else if(t.editingGroupId){const m=At(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return so(h,o),h};function yz(e,t,n,i){const r=we(Fe(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&Ee(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(Ee(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const Pce=(e,t,n)=>Uz(e,t,"left",n),Fce=(e,t,n)=>Uz(e,t,"right",n),Bce=(e,t)=>yz(e,t,"left",bz),zce=(e,t)=>yz(e,t,"right",bz),Yl=e=>e.reduce((t,n)=>t+n.version,0),Ez=e=>{let t=5381;for(const n of Fl(e))t=(t<<5)+t+n.versionNonce;return t>>>0},O9=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},Hce=e=>e.filter(t=>!t.isDeleted&&!fc(t)),Ot=e=>e.filter(t=>!t.isDeleted),a4=e=>!e.isDeleted,P9=e=>Ot(e).map(t=>n9(t.type)?{...t,lastCommittedPoint:null}:t),Vce=e=>P9(e),vz=e=>P9(e),wz=e=>P9(e),$ce=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var sl={};let Gce=0;function Xt(e,t){const n=`atom${++Gce}`,i={toString(){return(sl?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Xce,i.write=Yce),i}function Xce(e){return e(this)}function Yce(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const kA=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,l4=e=>"init"in e,oE=e=>!!e.write,Jb=new WeakMap,c4=e=>{var t;return u4(e)&&!((t=Jb.get(e))!=null&&t[1])},jce=(e,t)=>{const n=Jb.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((sl?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Wce=e=>{if(Jb.has(e))return;const t=[new Set,!1];Jb.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},u4=e=>typeof(e==null?void 0:e.then)=="function",LA=e=>"v"in e||"e"in e,yU=e=>{if("e"in e)throw e.e;if((sl?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},_z=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},DA=(e,t,n,i,r)=>{var s;if((sl?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),c4(n.v)&&_z(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&Kce(e,i,t)},t1=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),h0=(e,t,n)=>{e[t].add(n)},NA=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),h0(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>h0(e,"M",r))}))},Kce=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Zce=(e,t)=>e.D.get(t),su=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},Tz=(...[e,t,n,i])=>{const r=(E,y,v)=>{const w="v"in y,S=y.v,M=c4(y.v)?y.v:null;if(u4(v)){Wce(v);for(const _ of y.d.keys())_z(E,v,e(_));y.v=v}else y.v=v;delete y.e,delete y.x,(!w||!Object.is(S,y.v))&&(++y.n,M&&jce(M,v))},s=(E,y)=>{var v;const w=e(y);if(LA(w)&&(w.m&&!w.x||Array.from(w.d).every(([x,R])=>s(E,x).n===R)))return w;w.d.clear();let S=!0;const M=x=>{if(kA(y,x)){const P=e(x);if(!LA(P))if(l4(x))r(x,P,x.init);else throw new Error("no atom init");return yU(P)}const R=s(E,x);try{return yU(R)}finally{if(S)DA(E,y,w,x,R);else{const P=t1();DA(P,y,w,x,R),d(P,y,w),su(P)}}};let _,T;const C={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(sl?"production":void 0)!=="production"&&!oE(y)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&oE(y)&&(T=(...x)=>{if((sl?"production":void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return u(y,...x)}),T}};try{const x=t(y,M,C);if(r(y,w,x),u4(x)){(v=x.onCancel)==null||v.call(x,()=>_==null?void 0:_.abort());const R=()=>{if(w.m){const P=t1();d(P,y,w),su(P)}};x.then(R,R)}return w}catch(x){return delete w.v,w.e=x,delete w.x,++w.n,w}finally{S=!1}},o=E=>yU(s(void 0,E)),a=(E,y,v)=>{var w,S;const M=new Map;for(const _ of((w=v.m)==null?void 0:w.t)||[]){const T=e(_);T.m&&M.set(_,T)}for(const _ of v.p)M.set(_,e(_));return(S=Zce(E,y))==null||S.forEach(_=>{M.set(_,e(_))}),M},l=(E,y,v)=>{const w=[],S=new Set,M=new Set,_=[[y,v]];for(;_.length>0;){const[T,C]=_[_.length-1];if(M.has(T)){_.pop();continue}if(S.has(T)){w.push([T,C,C.n]),M.add(T),C.x=!0,_.pop();continue}S.add(T);for(const[x,R]of a(E,T,C))T!==x&&!S.has(x)&&_.push([x,R])}h0(E,"H",()=>{const T=new Set([y]);for(let C=w.length-1;C>=0;--C){const[x,R,P]=w[C];let D=!1;for(const $ of R.d.keys())if($!==x&&T.has($)){D=!0;break}D&&(s(E,x),d(E,x,R),P!==R.n&&(NA(E,x,R),T.add(x))),delete R.x}})},c=(E,y,...v)=>{let w=!0;const S=_=>yU(s(E,_)),M=(_,...T)=>{const C=e(_);try{if(kA(y,_)){if(!l4(_))throw new Error("atom not writable");const x=C.n,R=T[0];r(_,C,R),d(E,_,C),x!==C.n&&(NA(E,_,C),l(E,_,C));return}else return c(E,_,...T)}finally{w||su(E)}};try{return n(y,S,M,...v)}finally{w=!1}},u=(E,...y)=>{const v=t1();try{return c(v,E,...y)}finally{su(v)}},d=(E,y,v)=>{if(v.m&&!c4(v.v)){for(const w of v.d.keys())v.m.d.has(w)||(f(E,w,e(w)).t.add(y),v.m.d.add(w));for(const w of v.m.d||[])if(!v.d.has(w)){v.m.d.delete(w);const S=h(E,w,e(w));S==null||S.t.delete(y)}}},f=(E,y,v)=>{if(!v.m){s(E,y);for(const w of v.d.keys())f(E,w,e(w)).t.add(y);if(v.m={l:new Set,d:new Set(v.d.keys()),t:new Set},oE(y)){const w=v.m;let S;const M=(_,T)=>{let C=!0;S=(...x)=>{try{return c(_,y,...x)}finally{C||su(_)}};try{return T()}finally{C=!1}};h0(E,"L",()=>{const _=M(E,()=>i(y,(...T)=>S(...T)));_&&(w.u=T=>M(T,_))})}}return v.m},h=(E,y,v)=>{if(v.m&&!v.m.l.size&&!Array.from(v.m.t).some(w=>{var S;return(S=e(w).m)==null?void 0:S.d.has(y)})){const w=v.m.u;w&&h0(E,"L",()=>w(E)),delete v.m;for(const S of v.d.keys()){const M=h(E,S,e(S));M==null||M.t.delete(y)}return}return v.m};return{get:o,set:u,sub:(E,y)=>{const v=t1(),w=e(E),M=f(v,E,w).l;return M.add(y),su(v),()=>{M.delete(y);const _=t1();h(_,E,w),su(_)}},unstable_derive:E=>Tz(...E(e,t,n,i))}},qce=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,U,E){return U==="m"&&n.add(f),Reflect.set(p,U,E)},deleteProperty(p,U){return U==="m"&&n.delete(f),Reflect.deleteProperty(p,U)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)l4(f)&&d(f,h)}finally{--r}}})}})},cp=()=>{const e=new WeakMap,n=Tz(i=>{if((sl?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(sl?"production":void 0)!=="production"?qce(n):n};let n1;const Qce=()=>(n1||(n1=cp(),(sl?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=n1),globalThis.__JOTAI_DEFAULT_STORE__!==n1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),n1);var Sz={};const Iz=L.createContext(void 0),M5=e=>{const t=L.useContext(Iz);return(e==null?void 0:e.store)||t||Qce()},Jce=({children:e,store:t})=>{const n=L.useRef(void 0);return!t&&!n.current&&(n.current=cp()),L.createElement(Iz.Provider,{value:t||n.current},e)},d4=e=>typeof(e==null?void 0:e.then)=="function",xz=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},eue=oe.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(xz(e),e)}),aE=new WeakMap,OA=e=>{let t=aE.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((Sz?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");d4(c)?(aE.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),aE.set(e,t)),t};function R5(e,t){const n=M5(t),[[i,r,s],o]=L.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(L.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);d4(u)&&xz(OA(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),L.useDebugValue(a),d4(a)){const c=OA(a);return eue(c)}return a}function F9(e,t){const n=M5(t);return L.useCallback((...r)=>{if((Sz?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function Rh(e,t){return[R5(e,t),F9(e,t)]}const PA=new WeakMap;function tue(e,t){const n=M5(t),i=nue(n);for(const[r,s]of e)(!i.has(r)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const nue=e=>{let t=PA.get(e);return t||(t=new WeakSet,PA.set(e,t)),t};function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pf.apply(this,arguments)}function Cz(){const e=L.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=L.useRef(o);return c.current||(c.current=cp()),tue(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=L.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return M5(Pf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return Rh(o,Pf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return R5(o,Pf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return F9(o,Pf({store:l},a))}}}const{read:Lxe,write:Dxe}=Xt(null);L.createContext({scope:void 0,baseStore:void 0});const Az=Cz(),{useAtom:fn,useSetAtom:k5,useAtomValue:Mz,useStore:Nxe}=Az,iue=Az.Provider,Pr=cp(),Rz={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},polygon:{breakPolygon:"Break polygon",convertToPolygon:"Convert to polygon"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame",tab:"Tab",shapeSwitch:"Switch shape"},kz={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},Lz={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},Dz={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas...",frames:"Frames",texts:"Texts"},Nz={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},Oz={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Pz={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Fz={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw",convertElementType:"Toggle shape type"},Bz={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},zz={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},Hz={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_line_info:"Double-click or press Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},Vz={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},$z={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},Gz={or:"Or"},Xz={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},Yz={title:"Error"},jz={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Wz={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},Kz={title:"Clear canvas"},Zz={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},qz={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},Qz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},Jz={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},eH={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},tH={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},nH={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},iH={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},rH={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},sH={color:"Color",mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},oH={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},aH={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},lH={placeholder:"Quick search"},cH={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},uH={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},dH={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},B9={labels:Rz,elementLink:kz,library:Lz,search:Dz,buttons:Nz,alerts:Oz,errors:Pz,toolBar:Fz,element:Bz,headings:zz,hints:Hz,canvasError:Vz,errorSplash:$z,shareDialog:Gz,roomDialog:Xz,errorDialog:Yz,exportDialog:jz,helpDialog:Wz,clearCanvasDialog:Kz,publishDialog:Zz,publishSuccessDialog:qz,confirmDialog:Qz,imageExportDialog:Jz,encrypted:eH,stats:tH,toast:nH,colors:iH,welcomeScreen:rH,colorPicker:sH,overwriteConfirm:oH,mermaid:aH,quickSearch:lH,fontList:cH,userList:uH,commandPalette:dH},rue=Object.freeze(Object.defineProperty({__proto__:null,alerts:Oz,buttons:Nz,canvasError:Vz,clearCanvasDialog:Kz,colorPicker:sH,colors:iH,commandPalette:dH,confirmDialog:Qz,default:B9,element:Bz,elementLink:kz,encrypted:eH,errorDialog:Yz,errorSplash:$z,errors:Pz,exportDialog:jz,fontList:cH,headings:zz,helpDialog:Wz,hints:Hz,imageExportDialog:Jz,labels:Rz,library:Lz,mermaid:aH,overwriteConfirm:oH,publishDialog:Zz,publishSuccessDialog:qz,quickSearch:lH,roomDialog:Xz,search:Dz,shareDialog:Gz,stats:tH,toast:nH,toolBar:Fz,userList:uH,welcomeScreen:rH},Symbol.toStringTag,{value:"Module"})),fH=100,hH=36,gH={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:fH,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:hH,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},sue=Object.freeze(Object.defineProperty({__proto__:null,default:gH,en:fH,kaa:hH},Symbol.toStringTag,{value:"Module"})),oue=85,Rd={code:"en",label:"English"},L5=[Rd,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>gH[e.code]>=oue).sort((e,t)=>e.label>t.label?1:-1)],mH="__test__";let Ff=Rd,U2={};const pH=async e=>{if(Ff=e,document.documentElement.dir=Ff.rtl?"rtl":"ltr",document.documentElement.lang=Ff.code,e.code.startsWith(mH))U2={};else try{U2=await $ce(Object.assign({"./locales/ar-SA.json":()=>pe(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([]),import.meta.url),"./locales/az-AZ.json":()=>pe(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([]),import.meta.url),"./locales/bg-BG.json":()=>pe(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([]),import.meta.url),"./locales/bn-BD.json":()=>pe(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([]),import.meta.url),"./locales/ca-ES.json":()=>pe(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([]),import.meta.url),"./locales/cs-CZ.json":()=>pe(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([]),import.meta.url),"./locales/da-DK.json":()=>pe(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([]),import.meta.url),"./locales/de-DE.json":()=>pe(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([]),import.meta.url),"./locales/el-GR.json":()=>pe(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([]),import.meta.url),"./locales/en.json":()=>pe(()=>Promise.resolve().then(()=>rue),void 0,import.meta.url),"./locales/es-ES.json":()=>pe(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([]),import.meta.url),"./locales/eu-ES.json":()=>pe(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([]),import.meta.url),"./locales/fa-IR.json":()=>pe(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([]),import.meta.url),"./locales/fi-FI.json":()=>pe(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([]),import.meta.url),"./locales/fr-FR.json":()=>pe(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([]),import.meta.url),"./locales/gl-ES.json":()=>pe(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([]),import.meta.url),"./locales/he-IL.json":()=>pe(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([]),import.meta.url),"./locales/hi-IN.json":()=>pe(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([]),import.meta.url),"./locales/hu-HU.json":()=>pe(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([]),import.meta.url),"./locales/id-ID.json":()=>pe(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([]),import.meta.url),"./locales/it-IT.json":()=>pe(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([]),import.meta.url),"./locales/ja-JP.json":()=>pe(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([]),import.meta.url),"./locales/kaa.json":()=>pe(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([]),import.meta.url),"./locales/kab-KAB.json":()=>pe(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([]),import.meta.url),"./locales/kk-KZ.json":()=>pe(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([]),import.meta.url),"./locales/km-KH.json":()=>pe(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([]),import.meta.url),"./locales/ko-KR.json":()=>pe(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([]),import.meta.url),"./locales/ku-TR.json":()=>pe(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([]),import.meta.url),"./locales/lt-LT.json":()=>pe(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([]),import.meta.url),"./locales/lv-LV.json":()=>pe(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([]),import.meta.url),"./locales/mr-IN.json":()=>pe(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([]),import.meta.url),"./locales/my-MM.json":()=>pe(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([]),import.meta.url),"./locales/nb-NO.json":()=>pe(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([]),import.meta.url),"./locales/nl-NL.json":()=>pe(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([]),import.meta.url),"./locales/nn-NO.json":()=>pe(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([]),import.meta.url),"./locales/oc-FR.json":()=>pe(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([]),import.meta.url),"./locales/pa-IN.json":()=>pe(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([]),import.meta.url),"./locales/percentages.json":()=>pe(()=>Promise.resolve().then(()=>sue),void 0,import.meta.url),"./locales/pl-PL.json":()=>pe(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-BR.json":()=>pe(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-PT.json":()=>pe(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([]),import.meta.url),"./locales/ro-RO.json":()=>pe(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([]),import.meta.url),"./locales/ru-RU.json":()=>pe(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([]),import.meta.url),"./locales/si-LK.json":()=>pe(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([]),import.meta.url),"./locales/sk-SK.json":()=>pe(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([]),import.meta.url),"./locales/sl-SI.json":()=>pe(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([]),import.meta.url),"./locales/sv-SE.json":()=>pe(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([]),import.meta.url),"./locales/ta-IN.json":()=>pe(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([]),import.meta.url),"./locales/th-TH.json":()=>pe(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([]),import.meta.url),"./locales/tr-TR.json":()=>pe(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([]),import.meta.url),"./locales/uk-UA.json":()=>pe(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([]),import.meta.url),"./locales/vi-VN.json":()=>pe(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-CN.json":()=>pe(()=>import("./locales/zh-CN.json-B0Xp5Ku5.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-HK.json":()=>pe(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-TW.json":()=>pe(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]),import.meta.url)}),`./locales/${Ff.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),U2=B9}Pr.set(UH,e.code)},em=()=>Ff,FA=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},k=(e,t,n)=>{if(Ff.code.startsWith(mH))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let r=FA(U2,i)||FA(B9,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},UH=Xt(Rd.code),En=()=>{const e=Mz(UH);return{t:k,langCode:e}},aue=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Hr({sceneX:n,sceneY:i},e),{x:l,y:c}=Hr({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},bH=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;r+=((i==null?void 0:i.left)??0)/2/n.value;let s=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return s+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:r,scrollY:s}},tm=(e,t)=>{if(e=Hce(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=mt(e);aue(t,[n,i,r,s])&&([n,i,r,s]=Rle(e,xt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return bH({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Fa=e=>Ge($a(e,6),Pw,Fw),lue=e=>Ge(Math.round(e),1,100),yH=e=>Ge(Math.round(e),1,100),Ks=e=>"var(--icon-fill-color)",EH=e=>e===Ce.LIGHT?fi.white:"#1e1e1e",j=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:me({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},ae={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Ne={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),ae);const z9=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),ae),cue=j(O("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ae),uue=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),ae),due=j(O("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),ae),BA=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M6.5 9.5l3.5 -3"}),g("path",{d:"M14 5.5l3 1.5"}),g("path",{d:"M18.5 10l-2.5 7"}),g("path",{d:"M13.5 17.5l-7 -5"})]}),ae),D5=j(O("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Ne),H9=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Ne),fue=j(g("g",{fill:"currentColor",children:g("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3"})}),{width:24,height:24}),hue=j(O(he,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),gue=j(O(he,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),mue=j(O(he,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),zA=j(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),pue=j(O("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),f4=j(O("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),vH=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),ae),wH=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),ae),_H=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),ae),Uue=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),ae),TH=j(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Ne),bue=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),ae),N5=j(O("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Ne),V9=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),ae),yue=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Ne),Eue=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),ae),HA=j(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Ne),VA=j(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Ne),vue=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),ae),ad=j(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Ne),$A=j(O("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Ne),h4=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Ne),g4=j(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Ne),m4=j(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Ne,strokeWidth:1.5}),SH=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),ae),O5=j(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Ne),$9=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),wue=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),GA=j(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Ne),G9=j(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Ne),IH=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Ne),xH=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),ae),_ue=j(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),e6=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Ne),Tue=j("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),Sue=j("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),X9=j(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Ne);j("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const Iue=j("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),lE=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),ae),xue=j(g("g",{strokeWidth:1.5,children:g("path",{d:"M6 18l12 -12"})}),ae),CH=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),ae),Cue=j("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});j("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});j("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const Aue=j("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");j("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const XA=j(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Ne),YA=j(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Ne),Mue=j("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),AH=j(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Ne);j("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");const Rue=j("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),kue=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),ae),Lue=j(O(he,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});j(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const MH=O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),RH=O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),jA=j(RH,ae),WA=j(RH,{...ae,style:{transform:"rotate(180deg)"}}),KA=j(MH,ae),ZA=j(MH,{...ae,style:{transform:"rotate(180deg)"}}),qA=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),QA=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),JA=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),eM=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),Due=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),Nue=j(O(he,{children:[O("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),tM=j(O("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Ne),nM=j(O("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Ne),Y9=j(O("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),ae);j("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");j("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const gg=j(O(he,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne);j("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});j("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});j("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const iM=oe.memo(({theme:e})=>j(O(he,{children:[g("path",{d:"M25 26H111V111H25",fill:Ks()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ks(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ks()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ks(),strokeWidth:"2"}),O("g",{fill:EH(e),stroke:Ks(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),rM=oe.memo(({theme:e})=>j(O(he,{children:[g("path",{d:"M25 26H111V111H25",fill:Ks()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Ks(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Ks()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Ks(),strokeWidth:"2"}),O("g",{fill:EH(e),stroke:Ks(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Oue=j(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Ne),Pue=j(O(he,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Ne),Fue=j(O(he,{children:[O("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),Bue=j(O(he,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Ne,fill:"currentColor"}),kH=j(g(he,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Ne),zue=j(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Ne),Hue=j(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Ne);oe.memo(({theme:e})=>j(g("path",{d:"M6 10H34",stroke:Ks(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Vue=j(O("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),ae),$ue=j(O("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),ae),Gue=j(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Ne),Xue=j(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Ne),Yue=j(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Ne),jue=j(O("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Ne),Wue=j(O("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),ae),Kue=j(O("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),ae),Zue=oe.memo(({flip:e=!1})=>j(O("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),que=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Que=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Jue=oe.memo(({flip:e=!1})=>j(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),ede=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),tde=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),nde=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),ide=oe.memo(({flip:e=!1})=>j(O("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),rde=oe.memo(({flip:e=!1})=>j(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),sde=oe.memo(({flip:e=!1})=>j(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),ode=oe.memo(({flip:e=!1})=>j(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),ade=j(O(he,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),lde=j(O(he,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),cde=j(O(he,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),ude=j(g(he,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Ne),P5=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),ae),dde=j(g(he,{children:O("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),ae),p4=j(g(he,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Ne),LH=j(O(he,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Ne),fde=j(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),ae),hde=j(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),ae),gde=j(O("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),ae),mde=oe.memo(({theme:e})=>j(O("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),ae)),pde=oe.memo(({theme:e})=>j(O("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),ae)),Ude=oe.memo(({theme:e})=>j(O("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),ae)),DH=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),ae),bde=j(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});j(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const NH=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),ae),sM=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),ae),up=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),ae),yde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),ae),Ede=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ae),vde=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),ae),wde=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),ae),_de=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),ae),Tde=j(O(he,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),ae),Sde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),ae),Ide=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),ae),t6=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),ae),OH=j(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),b2=j(O("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Ne),U4=j(O("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),PH=j(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ae);j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ae);j(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),ae);const xde=j(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),ae),j9=j(O("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),ae),Cde=j(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),ae),Ade=j(O("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ae),Mde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ae),ld=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),ae),Rde=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),ae),kde=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ae),Lde=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ae),b4=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),ae),Dde=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),ae),Nde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),ae),Ode=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),ae),Pde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),ae),FH=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),ae),W9=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),ae),Fde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),ae),Bde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),ae),zde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),ae),Hde=j(O("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),ae),Vde=j(O("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...ae,strokeWidth:1.5});j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),ae);const BH=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),ae),$de=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),ae),Gde=j(O("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),ae),zH=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),ae),HH=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),ae),VH=j(O("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),ae),$H=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),ae),Xde=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ae),Yde=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ae),oM=j(O("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),ae),GH=j(O("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),ae);class jde extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class kh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class Tu extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class XH extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class YH extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class Zs extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const ol=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(oe.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},He=oe.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=aa(),o=oe.useRef(null);oe.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=L.useState(!1),u=L.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(Jm(m))try{c(!0),await m}catch(U){if(U instanceof kh)console.warn(U);else throw U}finally{u.current&&c(!1)}};L.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=L.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return O("button",{className:me("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&O("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(ol,{})]}),i.showAriaLabel&&O("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(ol,{})]}),i.children]})}return O("label",{className:me("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),O("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});He.displayName="ToolButton";let y4=[];const se=e=>(y4=y4.concat(e),e),Wde=(e,t,n)=>{const i=new Set(Fe(e.filter(u=>Ee(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=Rs(e,u);for(const f of d)if(!o.has(f.id)){if(Bt(f)){const h=Vn(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Bt(u)?Vn(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&de(h)&&n.scene.mutateElement(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding})}),Te(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Bt(u)||(r[u.id]=!0),Te(u,{frameId:null})):Bt(u)&&t.selectedElementIds[u.containerId]?Te(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=At(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=At(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Oi({selectedElementIds:r,editingGroupId:c},l,t,null)}}},aM=(e,t)=>{if(e.editingGroupId){const n=At(Ot(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},jH=se({name:"deleteSelectedElements",label:"labels.delete",icon:ad,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=ce.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Te(p,{isDeleted:!0}):p),m=aM(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:W.IMMEDIATELY}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return ce.deletePoints(d,i,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:W.IMMEDIATELY}}let{elements:r,appState:s}=Wde(e,t,i);return _B(r,r.filter(o=>o.isDeleted)),s=aM(s,r),{elements:r,appState:{...s,activeTool:Wt(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:$n(Ot(e),t)?W.IMMEDIATELY:W.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===H.BACKSPACE||e.key===H.DELETE)&&!e[H.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(He,{type:"button",icon:ad,title:k("labels.delete"),"aria-label":k("labels.delete"),onClick:()=>n(null),visible:$n(Ot(e),t)})}),Kde=se({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:WA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Pce(e,t,i.scene),appState:t,captureUpdate:W.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[H.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Je.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendBackward")} — ${Q("CtrlOrCmd+[")}`,children:WA})}),Zde=se({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:jA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Fce(e,t,i.scene),appState:t,captureUpdate:W.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[H.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Je.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.bringForward")} — ${Q("CtrlOrCmd+]")}`,children:jA})}),qde=se({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:ZA,trackEvent:{category:"element"},perform:(e,t)=>({elements:Bce(e,t),appState:t,captureUpdate:W.IMMEDIATELY}),keyTest:e=>Xo?e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.BRACKET_LEFT:e[H.CTRL_OR_CMD]&&e.shiftKey&&e.code===Je.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendToBack")} — ${Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:ZA})}),Qde=se({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:KA,trackEvent:{category:"element"},perform:(e,t)=>({elements:zce(e,t),appState:t,captureUpdate:W.IMMEDIATELY}),keyTest:e=>Xo?e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.BRACKET_RIGHT:e[H.CTRL_OR_CMD]&&e.shiftKey&&e.code===Je.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${k("labels.bringToFront")} — ${Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:KA})}),Jde=se({name:"selectAll",label:"labels.selectAll",icon:Dde,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const r=e.filter(s=>!s.isDeleted&&!(ue(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Oi({editingGroupId:null,selectedElementIds:r},Ot(e),t,i),selectedLinearElement:Object.keys(r).length===1&&Ie(e[0])?new ce(e[0],we(e)):null},captureUpdate:W.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.A}),efe=se({name:"duplicateSelection",label:"labels.duplicateSelection",icon:h4,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=ce.duplicateSelectedPoints(t,i.scene);return{elements:e,appState:o,captureUpdate:W.IMMEDIATELY}}catch{return!1}let{duplicatedElements:r,elementsWithDuplicates:s}=Zb({type:"in-place",elements:e,idsOfElementsToDuplicate:we(Fe(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:o,origIdToDuplicateId:a})=>{const l=o.frameId&&a.get(o.frameId);return{x:o.x+yb/2,y:o.y+yb/2,frameId:l??o.frameId}}});if(i.props.onDuplicate&&s){const o=i.props.onDuplicate(s,e);o&&(s=o)}return{elements:so(s,we(r)),appState:{...t,...AB(r,Ot(s),t)},captureUpdate:W.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(He,{type:"button",icon:h4,title:`${k("labels.duplicateSelection")} — ${Q("CtrlOrCmd+D")}`,"aria-label":k("labels.duplicateSelection"),onClick:()=>n(null),visible:$n(Ot(e),t)})});var tfe={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const nfe=new Set(["command_palette","export"]),st=(e,t,n,i)=>{try{if(typeof window>"u"||tfe.VITE_WORKER_ID||!nfe.has(e))return;NF(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},K9=L.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:me(i,{standalone:o,active:s}),onClick:l,style:e.style,children:a},n)}),sa=e=>g(he,{children:e.options.map(t=>e.type==="button"?g(K9,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):O("label",{className:me({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function Ii(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function lM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function WH(...e){return t=>{let n=!1;const i=e.map(r=>{const s=lM(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():lM(e[r],null)}}}}function ao(...e){return L.useCallback(WH(...e),e)}function dp(e,t=[]){let n=[];function i(s,o){const a=L.createContext(o),l=n.length;n=[...n,o];const c=d=>{var E;const{scope:f,children:h,...m}=d,p=((E=f==null?void 0:f[e])==null?void 0:E[l])||a,U=L.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:U,children:h})};c.displayName=s+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=L.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return L.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,ife(r,...t)]}function ife(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var nm=L.forwardRef((e,t)=>{const{children:n,...i}=e,r=L.Children.toArray(n),s=r.find(sfe);if(s){const o=s.props.children,a=r.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return g(E4,{...i,ref:t,children:L.isValidElement(o)?L.cloneElement(o,void 0,a):null})}return g(E4,{...i,ref:t,children:n})});nm.displayName="Slot";var E4=L.forwardRef((e,t)=>{const{children:n,...i}=e;if(L.isValidElement(n)){const r=afe(n),s=ofe(i,n.props);return n.type!==L.Fragment&&(s.ref=t?WH(t,r):r),L.cloneElement(n,s)}return L.Children.count(n)>1?L.Children.only(null):null});E4.displayName="SlotClone";var rfe=({children:e})=>g(he,{children:e});function sfe(e){return L.isValidElement(e)&&e.type===rfe}function ofe(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function afe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],lr=lfe.reduce((e,t)=>{const n=L.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?nm:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function cfe(e,t){e&&_n.flushSync(()=>e.dispatchEvent(t))}function al(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function ufe(e,t=globalThis==null?void 0:globalThis.document){const n=al(e);L.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var dfe="DismissableLayer",v4="dismissableLayer.update",ffe="dismissableLayer.pointerDownOutside",hfe="dismissableLayer.focusOutside",cM,KH=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ZH=L.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=L.useContext(KH),[u,d]=L.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=L.useState({}),m=ao(t,_=>d(_)),p=Array.from(c.layers),[U]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=p.indexOf(U),y=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,w=y>=E,S=pfe(_=>{const T=_.target,C=[...c.branches].some(x=>x.contains(T));!w||C||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),M=Ufe(_=>{const T=_.target;[...c.branches].some(x=>x.contains(T))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return ufe(_=>{y===c.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),L.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(cM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),uM(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=cM)}},[u,f,n,c]),L.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),uM())},[u,c]),L.useEffect(()=>{const _=()=>h({});return document.addEventListener(v4,_),()=>document.removeEventListener(v4,_)},[]),g(lr.div,{...l,ref:m,style:{pointerEvents:v?w?"auto":"none":void 0,...e.style},onFocusCapture:Ii(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ii(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ii(e.onPointerDownCapture,S.onPointerDownCapture)})});ZH.displayName=dfe;var gfe="DismissableLayerBranch",mfe=L.forwardRef((e,t)=>{const n=L.useContext(KH),i=L.useRef(null),r=ao(t,i);return L.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(lr.div,{...e,ref:r})});mfe.displayName=gfe;function pfe(e,t=globalThis==null?void 0:globalThis.document){const n=al(e),i=L.useRef(!1),r=L.useRef(()=>{});return L.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){qH(ffe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function Ufe(e,t=globalThis==null?void 0:globalThis.document){const n=al(e),i=L.useRef(!1);return L.useEffect(()=>{const r=s=>{s.target&&!i.current&&qH(hfe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function uM(){const e=new CustomEvent(v4);document.dispatchEvent(e)}function qH(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?cfe(r,s):r.dispatchEvent(s)}var cE=0;function bfe(){L.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dM()),document.body.insertAdjacentElement("beforeend",e[1]??dM()),cE++,()=>{cE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cE--}},[])}function dM(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var uE="focusScope.autoFocusOnMount",dE="focusScope.autoFocusOnUnmount",fM={bubbles:!1,cancelable:!0},yfe="FocusScope",QH=L.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=L.useState(null),c=al(r),u=al(s),d=L.useRef(null),f=ao(t,p=>l(p)),h=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let p=function(v){if(h.paused||!a)return;const w=v.target;a.contains(w)?d.current=w:kl(d.current,{select:!0})},U=function(v){if(h.paused||!a)return;const w=v.relatedTarget;w!==null&&(a.contains(w)||kl(d.current,{select:!0}))},E=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&kl(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",U);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",U),y.disconnect()}}},[i,a,h.paused]),L.useEffect(()=>{if(a){gM.add(h);const p=document.activeElement;if(!a.contains(p)){const E=new CustomEvent(uE,fM);a.addEventListener(uE,c),a.dispatchEvent(E),E.defaultPrevented||(Efe(Sfe(JH(a)),{select:!0}),document.activeElement===p&&kl(a))}return()=>{a.removeEventListener(uE,c),setTimeout(()=>{const E=new CustomEvent(dE,fM);a.addEventListener(dE,u),a.dispatchEvent(E),E.defaultPrevented||kl(p??document.body,{select:!0}),a.removeEventListener(dE,u),gM.remove(h)},0)}}},[a,c,u,h]);const m=L.useCallback(p=>{if(!n&&!i||h.paused)return;const U=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,E=document.activeElement;if(U&&E){const y=p.currentTarget,[v,w]=vfe(y);v&&w?!p.shiftKey&&E===w?(p.preventDefault(),n&&kl(v,{select:!0})):p.shiftKey&&E===v&&(p.preventDefault(),n&&kl(w,{select:!0})):E===y&&p.preventDefault()}},[n,i,h.paused]);return g(lr.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});QH.displayName=yfe;function Efe(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(kl(i,{select:t}),document.activeElement!==n)return}function vfe(e){const t=JH(e),n=hM(t,e),i=hM(t.reverse(),e);return[n,i]}function JH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function hM(e,t){for(const n of e)if(!wfe(n,{upTo:t}))return n}function wfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _fe(e){return e instanceof HTMLInputElement&&"select"in e}function kl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&_fe(e)&&t&&e.select()}}var gM=Tfe();function Tfe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=mM(e,t),e.unshift(t)},remove(t){var n;e=mM(e,t),(n=e[0])==null||n.resume()}}}function mM(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function Sfe(e){return e.filter(t=>t.tagName!=="A")}var cd=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},Ife=nZ.useId||(()=>{}),xfe=0;function Z9(e){const[t,n]=L.useState(Ife());return cd(()=>{n(i=>i??String(xfe++))},[e]),e||(t?`radix-${t}`:"")}const Cfe=["top","right","bottom","left"],Dc=Math.min,Nr=Math.max,n6=Math.round,EU=Math.floor,Ho=e=>({x:e,y:e}),Afe={left:"right",right:"left",bottom:"top",top:"bottom"},Mfe={start:"end",end:"start"};function w4(e,t,n){return Nr(e,Dc(t,n))}function ll(e,t){return typeof e=="function"?e(t):e}function cl(e){return e.split("-")[0]}function mg(e){return e.split("-")[1]}function q9(e){return e==="x"?"y":"x"}function Q9(e){return e==="y"?"height":"width"}function Nc(e){return["top","bottom"].includes(cl(e))?"y":"x"}function J9(e){return q9(Nc(e))}function Rfe(e,t,n){n===void 0&&(n=!1);const i=mg(e),r=J9(e),s=Q9(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=i6(o)),[o,i6(o)]}function kfe(e){const t=i6(e);return[_4(e),t,_4(t)]}function _4(e){return e.replace(/start|end/g,t=>Mfe[t])}function Lfe(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function Dfe(e,t,n,i){const r=mg(e);let s=Lfe(cl(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(_4)))),s}function i6(e){return e.replace(/left|right|bottom|top/g,t=>Afe[t])}function Nfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function eV(e){return typeof e!="number"?Nfe(e):{top:e,right:e,bottom:e,left:e}}function r6(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function pM(e,t,n){let{reference:i,floating:r}=e;const s=Nc(t),o=J9(t),a=Q9(o),l=cl(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(mg(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Ofe=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=pM(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:U,fn:E}=a[p],{x:y,y:v,data:w,reset:S}=await E({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=v??d,h={...h,[U]:{...h[U],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:u,y:d}=pM(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function im(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ll(t,e),m=eV(h),U=a[f?d==="floating"?"reference":"floating":d],E=r6(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(U)))==null||n?U:U.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=r6(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(E.top-S.top+m.top)/w.y,bottom:(S.bottom-E.bottom+m.bottom)/w.y,left:(E.left-S.left+m.left)/w.x,right:(S.right-E.right+m.right)/w.x}}const Pfe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=ll(e,t)||{};if(c==null)return{};const d=eV(u),f={x:n,y:i},h=J9(r),m=Q9(h),p=await o.getDimensions(c),U=h==="y",E=U?"top":"left",y=U?"bottom":"right",v=U?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-f[h]-s.floating[m],S=f[h]-s.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=M?M[v]:0;(!_||!await(o.isElement==null?void 0:o.isElement(M)))&&(_=a.floating[v]||s.floating[m]);const T=w/2-S/2,C=_/2-p[m]/2-1,x=Dc(d[E],C),R=Dc(d[y],C),P=x,D=_-p[m]-R,$=_/2-p[m]/2+T,z=w4(P,$,D),V=!l.arrow&&mg(r)!=null&&$!==z&&s.reference[m]/2-($<P?x:R)-p[m]/2<0,G=V?$<P?$-P:$-D:0;return{[h]:f[h]+G,data:{[h]:z,centerOffset:$-z-G,...V&&{alignmentOffset:G}},reset:V}}}),Ffe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...U}=ll(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=cl(r),y=Nc(a),v=cl(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(v||!p?[i6(a)]:kfe(a)),M=m!=="none";!f&&M&&S.push(...Dfe(a,p,m,w));const _=[a,...S],T=await im(t,U),C=[];let x=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&C.push(T[E]),d){const $=Rfe(r,o,w);C.push(T[$[0]],T[$[1]])}if(x=[...x,{placement:r,overflows:C}],!C.every($=>$<=0)){var R,P;const $=(((R=s.flip)==null?void 0:R.index)||0)+1,z=_[$];if(z)return{data:{index:$,overflows:x},reset:{placement:z}};let V=(P=x.filter(G=>G.overflows[0]<=0).sort((G,Y)=>G.overflows[1]-Y.overflows[1])[0])==null?void 0:P.placement;if(!V)switch(h){case"bestFit":{var D;const G=(D=x.filter(Y=>{if(M){const X=Nc(Y.placement);return X===y||X==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(X=>X>0).reduce((X,Z)=>X+Z,0)]).sort((Y,X)=>Y[1]-X[1])[0])==null?void 0:D[0];G&&(V=G);break}case"initialPlacement":V=a;break}if(r!==V)return{reset:{placement:V}}}return{}}}};function UM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function bM(e){return Cfe.some(t=>e[t]>=0)}const Bfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=ll(e,t);switch(i){case"referenceHidden":{const s=await im(t,{...r,elementContext:"reference"}),o=UM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:bM(o)}}}case"escaped":{const s=await im(t,{...r,altBoundary:!0}),o=UM(s,n.floating);return{data:{escapedOffsets:o,escaped:bM(o)}}}default:return{}}}}};async function zfe(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=cl(n),a=mg(n),l=Nc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=ll(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Hfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await zfe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Vfe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:U=>{let{x:E,y}=U;return{x:E,y}}},...l}=ll(e,t),c={x:n,y:i},u=await im(t,l),d=Nc(cl(r)),f=q9(d);let h=c[f],m=c[d];if(s){const U=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=h+u[U],v=h-u[E];h=w4(y,h,v)}if(o){const U=d==="y"?"top":"left",E=d==="y"?"bottom":"right",y=m+u[U],v=m-u[E];m=w4(y,m,v)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},$fe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ll(e,t),u={x:n,y:i},d=Nc(r),f=q9(d);let h=u[f],m=u[d];const p=ll(a,t),U=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=f==="y"?"height":"width",w=s.reference[f]-s.floating[v]+U.mainAxis,S=s.reference[f]+s.reference[v]-U.mainAxis;h<w?h=w:h>S&&(h=S)}if(c){var E,y;const v=f==="y"?"width":"height",w=["top","left"].includes(cl(r)),S=s.reference[d]-s.floating[v]+(w&&((E=o.offset)==null?void 0:E[d])||0)+(w?0:U.crossAxis),M=s.reference[d]+s.reference[v]+(w?0:((y=o.offset)==null?void 0:y[d])||0)-(w?U.crossAxis:0);m<S?m=S:m>M&&(m=M)}return{[f]:h,[d]:m}}}},Gfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=ll(e,t),u=await im(t,c),d=cl(r),f=mg(r),h=Nc(r)==="y",{width:m,height:p}=s.floating;let U,E;d==="top"||d==="bottom"?(U=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,U=f==="end"?"top":"bottom");const y=p-u.top-u.bottom,v=m-u.left-u.right,w=Dc(p-u[U],y),S=Dc(m-u[E],v),M=!t.middlewareData.shift;let _=w,T=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(_=y),M&&!f){const x=Nr(u.left,0),R=Nr(u.right,0),P=Nr(u.top,0),D=Nr(u.bottom,0);h?T=m-2*(x!==0||R!==0?x+R:Nr(u.left,u.right)):_=p-2*(P!==0||D!==0?P+D:Nr(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:_});const C=await o.getDimensions(a.floating);return m!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function F5(){return typeof window<"u"}function pg(e){return tV(e)?(e.nodeName||"").toLowerCase():"#document"}function jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oa(e){var t;return(t=(tV(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function tV(e){return F5()?e instanceof Node||e instanceof jr(e).Node:!1}function lo(e){return F5()?e instanceof Element||e instanceof jr(e).Element:!1}function Jo(e){return F5()?e instanceof HTMLElement||e instanceof jr(e).HTMLElement:!1}function yM(e){return!F5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jr(e).ShadowRoot}function fp(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=co(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function Xfe(e){return["table","td","th"].includes(pg(e))}function B5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function e_(e){const t=t_(),n=lo(e)?co(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Yfe(e){let t=Oc(e);for(;Jo(t)&&!Lh(t);){if(e_(t))return t;if(B5(t))return null;t=Oc(t)}return null}function t_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lh(e){return["html","body","#document"].includes(pg(e))}function co(e){return jr(e).getComputedStyle(e)}function z5(e){return lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Oc(e){if(pg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yM(e)&&e.host||oa(e);return yM(t)?t.host:t}function nV(e){const t=Oc(e);return Lh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jo(t)&&fp(t)?t:nV(t)}function rm(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=nV(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=jr(r);if(s){const a=T4(o);return t.concat(o,o.visualViewport||[],fp(r)?r:[],a&&n?rm(a):[])}return t.concat(r,rm(r,[],n))}function T4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function iV(e){const t=co(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Jo(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=n6(n)!==s||n6(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function n_(e){return lo(e)?e:e.contextElement}function th(e){const t=n_(e);if(!Jo(t))return Ho(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=iV(t);let o=(s?n6(n.width):n.width)/i,a=(s?n6(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jfe=Ho(0);function rV(e){const t=jr(e);return!t_()||!t.visualViewport?jfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Wfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==jr(e)?!1:t}function ud(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=n_(e);let o=Ho(1);t&&(i?lo(i)&&(o=th(i)):o=th(e));const a=Wfe(s,n,i)?rV(s):Ho(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=jr(s),h=i&&lo(i)?jr(i):i;let m=f,p=T4(m);for(;p&&i&&h!==m;){const U=th(p),E=p.getBoundingClientRect(),y=co(p),v=E.left+(p.clientLeft+parseFloat(y.paddingLeft))*U.x,w=E.top+(p.clientTop+parseFloat(y.paddingTop))*U.y;l*=U.x,c*=U.y,u*=U.x,d*=U.y,l+=v,c+=w,m=jr(p),p=T4(m)}}return r6({width:u,height:d,x:l,y:c})}function i_(e,t){const n=z5(e).scrollLeft;return t?t.left+n:ud(oa(e)).left+n}function sV(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:i_(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function Kfe(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=oa(i),a=t?B5(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ho(1);const u=Ho(0),d=Jo(i);if((d||!d&&!s)&&((pg(i)!=="body"||fp(o))&&(l=z5(i)),Jo(i))){const h=ud(i);c=th(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?sV(o,l,!0):Ho(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Zfe(e){return Array.from(e.getClientRects())}function qfe(e){const t=oa(e),n=z5(e),i=e.ownerDocument.body,r=Nr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Nr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+i_(e);const a=-n.scrollTop;return co(i).direction==="rtl"&&(o+=Nr(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Qfe(e,t){const n=jr(e),i=oa(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=t_();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function Jfe(e,t){const n=ud(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=Jo(e)?th(e):Ho(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function EM(e,t,n){let i;if(t==="viewport")i=Qfe(e,n);else if(t==="document")i=qfe(oa(e));else if(lo(t))i=Jfe(t,n);else{const r=rV(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return r6(i)}function oV(e,t){const n=Oc(e);return n===t||!lo(n)||Lh(n)?!1:co(n).position==="fixed"||oV(n,t)}function ehe(e,t){const n=t.get(e);if(n)return n;let i=rm(e,[],!1).filter(a=>lo(a)&&pg(a)!=="body"),r=null;const s=co(e).position==="fixed";let o=s?Oc(e):e;for(;lo(o)&&!Lh(o);){const a=co(o),l=e_(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||fp(o)&&!l&&oV(e,o))?i=i.filter(u=>u!==o):r=a,o=Oc(o)}return t.set(e,i),i}function the(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?B5(t)?[]:ehe(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=EM(t,u,r);return c.top=Nr(d.top,c.top),c.right=Dc(d.right,c.right),c.bottom=Dc(d.bottom,c.bottom),c.left=Nr(d.left,c.left),c},EM(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function nhe(e){const{width:t,height:n}=iV(e);return{width:t,height:n}}function ihe(e,t,n){const i=Jo(t),r=oa(t),s=n==="fixed",o=ud(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Ho(0);if(i||!i&&!s)if((pg(t)!=="body"||fp(r))&&(a=z5(t)),i){const f=ud(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=i_(r));const c=r&&!i&&!s?sV(r,a):Ho(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function fE(e){return co(e).position==="static"}function vM(e,t){if(!Jo(e)||co(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return oa(e)===n&&(n=n.ownerDocument.body),n}function aV(e,t){const n=jr(e);if(B5(e))return n;if(!Jo(e)){let r=Oc(e);for(;r&&!Lh(r);){if(lo(r)&&!fE(r))return r;r=Oc(r)}return n}let i=vM(e,t);for(;i&&Xfe(i)&&fE(i);)i=vM(i,t);return i&&Lh(i)&&fE(i)&&!e_(i)?n:i||Yfe(e)||n}const rhe=async function(e){const t=this.getOffsetParent||aV,n=this.getDimensions,i=await n(e.floating);return{reference:ihe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function she(e){return co(e).direction==="rtl"}const ohe={convertOffsetParentRelativeRectToViewportRelativeRect:Kfe,getDocumentElement:oa,getClippingRect:the,getOffsetParent:aV,getElementRects:rhe,getClientRects:Zfe,getDimensions:nhe,getScale:th,isElement:lo,isRTL:she};function lV(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ahe(e,t){let n=null,i;const r=oa(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=EU(d),p=EU(r.clientWidth-(u+f)),U=EU(r.clientHeight-(d+h)),E=EU(u),v={rootMargin:-m+"px "+-p+"px "+-U+"px "+-E+"px",threshold:Nr(0,Dc(1,l))||1};let w=!0;function S(M){const _=M[0].intersectionRatio;if(_!==l){if(!w)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!lV(c,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return o(!0),s}function lhe(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=n_(e),u=r||s?[...c?rm(c):[],...rm(t)]:[];u.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const d=c&&a?ahe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?ud(e):null;l&&U();function U(){const E=ud(e);p&&!lV(p,E)&&n(),p=E,m=requestAnimationFrame(U)}return n(),()=>{var E;u.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(E=h)==null||E.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const che=Hfe,uhe=Vfe,dhe=Ffe,fhe=Gfe,hhe=Bfe,wM=Pfe,ghe=$fe,mhe=(e,t,n)=>{const i=new Map,r={platform:ohe,...n},s={...r.platform,_c:i};return Ofe(e,t,{...r,platform:s})};var y2=typeof document<"u"?L.useLayoutEffect:L.useEffect;function s6(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!s6(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!s6(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function cV(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _M(e,t){const n=cV(e);return Math.round(t*n)/n}function hE(e){const t=L.useRef(e);return y2(()=>{t.current=e}),t}function phe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=L.useState(i);s6(f,i)||h(i);const[m,p]=L.useState(null),[U,E]=L.useState(null),y=L.useCallback(Y=>{Y!==M.current&&(M.current=Y,p(Y))},[]),v=L.useCallback(Y=>{Y!==_.current&&(_.current=Y,E(Y))},[]),w=s||m,S=o||U,M=L.useRef(null),_=L.useRef(null),T=L.useRef(u),C=l!=null,x=hE(l),R=hE(r),P=hE(c),D=L.useCallback(()=>{if(!M.current||!_.current)return;const Y={placement:t,strategy:n,middleware:f};R.current&&(Y.platform=R.current),mhe(M.current,_.current,Y).then(X=>{const Z={...X,isPositioned:P.current!==!1};$.current&&!s6(T.current,Z)&&(T.current=Z,_n.flushSync(()=>{d(Z)}))})},[f,t,n,R,P]);y2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(Y=>({...Y,isPositioned:!1})))},[c]);const $=L.useRef(!1);y2(()=>($.current=!0,()=>{$.current=!1}),[]),y2(()=>{if(w&&(M.current=w),S&&(_.current=S),w&&S){if(x.current)return x.current(w,S,D);D()}},[w,S,D,x,C]);const z=L.useMemo(()=>({reference:M,floating:_,setReference:y,setFloating:v}),[y,v]),V=L.useMemo(()=>({reference:w,floating:S}),[w,S]),G=L.useMemo(()=>{const Y={position:n,left:0,top:0};if(!V.floating)return Y;const X=_M(V.floating,u.x),Z=_M(V.floating,u.y);return a?{...Y,transform:"translate("+X+"px, "+Z+"px)",...cV(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:Z}},[n,a,V.floating,u.x,u.y]);return L.useMemo(()=>({...u,update:D,refs:z,elements:V,floatingStyles:G}),[u,D,z,V,G])}const Uhe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?wM({element:i.current,padding:r}).fn(n):{}:i?wM({element:i,padding:r}).fn(n):{}}}},bhe=(e,t)=>({...che(e),options:[e,t]}),yhe=(e,t)=>({...uhe(e),options:[e,t]}),Ehe=(e,t)=>({...ghe(e),options:[e,t]}),vhe=(e,t)=>({...dhe(e),options:[e,t]}),whe=(e,t)=>({...fhe(e),options:[e,t]}),_he=(e,t)=>({...hhe(e),options:[e,t]}),The=(e,t)=>({...Uhe(e),options:[e,t]});var She="Arrow",uV=L.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(lr.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});uV.displayName=She;var Ihe=uV;function xhe(e){const[t,n]=L.useState(void 0);return cd(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var r_="Popper",[dV,fV]=dp(r_),[Che,hV]=dV(r_),gV=e=>{const{__scopePopper:t,children:n}=e,[i,r]=L.useState(null);return g(Che,{scope:t,anchor:i,onAnchorChange:r,children:n})};gV.displayName=r_;var mV="PopperAnchor",pV=L.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=hV(mV,n),o=L.useRef(null),a=ao(t,o);return L.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(lr.div,{...r,ref:a})});pV.displayName=mV;var s_="PopperContent",[Ahe,Mhe]=dV(s_),UV=L.forwardRef((e,t)=>{var hn,Yn,pi,$e,ot,rn;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,U=hV(s_,n),[E,y]=L.useState(null),v=ao(t,Qr=>y(Qr)),[w,S]=L.useState(null),M=xhe(w),_=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,C=i+(s!=="center"?"-"+s:""),x=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],P=R.length>0,D={padding:x,boundary:R.filter(khe),altBoundary:P},{refs:$,floatingStyles:z,placement:V,isPositioned:G,middlewareData:Y}=phe({strategy:"fixed",placement:C,whileElementsMounted:(...Qr)=>lhe(...Qr,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[bhe({mainAxis:r+T,alignmentAxis:o}),l&&yhe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Ehe():void 0,...D}),l&&vhe({...D}),whe({...D,apply:({elements:Qr,rects:Ls,availableWidth:Ds,availableHeight:Ir})=>{const{width:Ly,height:Dy}=Ls.reference,Qc=Qr.floating.style;Qc.setProperty("--radix-popper-available-width",`${Ds}px`),Qc.setProperty("--radix-popper-available-height",`${Ir}px`),Qc.setProperty("--radix-popper-anchor-width",`${Ly}px`),Qc.setProperty("--radix-popper-anchor-height",`${Dy}px`)}}),w&&The({element:w,padding:a}),Lhe({arrowWidth:_,arrowHeight:T}),f&&_he({strategy:"referenceHidden",...D})]}),[X,Z]=EV(V),Ue=al(m);cd(()=>{G&&(Ue==null||Ue())},[G,Ue]);const re=(hn=Y.arrow)==null?void 0:hn.x,be=(Yn=Y.arrow)==null?void 0:Yn.y,Ye=((pi=Y.arrow)==null?void 0:pi.centerOffset)!==0,[je,St]=L.useState();return cd(()=>{E&&St(window.getComputedStyle(E).zIndex)},[E]),g("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:G?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[($e=Y.transformOrigin)==null?void 0:$e.x,(ot=Y.transformOrigin)==null?void 0:ot.y].join(" "),...((rn=Y.hide)==null?void 0:rn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(Ahe,{scope:n,placedSide:X,onArrowChange:S,arrowX:re,arrowY:be,shouldHideArrow:Ye,children:g(lr.div,{"data-side":X,"data-align":Z,...p,ref:v,style:{...p.style,animation:G?void 0:"none"}})})})});UV.displayName=s_;var bV="PopperArrow",Rhe={top:"bottom",right:"left",bottom:"top",left:"right"},yV=L.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=Mhe(bV,i),o=Rhe[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(Ihe,{...r,ref:n,style:{...r.style,display:"block"}})})});yV.displayName=bV;function khe(e){return e!==null}var Lhe=e=>({name:"transformOrigin",options:e,fn(t){var U,E,y;const{placement:n,rects:i,middlewareData:r}=t,o=((U=r.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=EV(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=r.arrow)==null?void 0:E.x)??0)+a/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function EV(e){const[t,n="center"]=e.split("-");return[t,n]}var Dhe=gV,vV=pV,Nhe=UV,Ohe=yV,Phe="Portal",wV=L.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[r,s]=L.useState(!1);cd(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aZ.createPortal(g(lr.div,{...i,ref:t}),o):null});wV.displayName=Phe;function Fhe(e,t){return L.useReducer((n,i)=>t[n][i]??n,e)}var H5=e=>{const{present:t,children:n}=e,i=Bhe(t),r=typeof n=="function"?n({present:i.isPresent}):L.Children.only(n),s=ao(i.ref,zhe(r));return typeof n=="function"||i.isPresent?L.cloneElement(r,{ref:s}):null};H5.displayName="Presence";function Bhe(e){const[t,n]=L.useState(),i=L.useRef({}),r=L.useRef(e),s=L.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Fhe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=vU(i.current);s.current=a==="mounted"?c:"none"},[a]),cd(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=vU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),cd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=vU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},f=h=>{h.target===t&&(s.current=vU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function vU(e){return(e==null?void 0:e.animationName)||"none"}function zhe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function o_({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=Hhe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=al(n),l=L.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function Hhe({defaultProp:e,onChange:t}){const n=L.useState(e),[i]=n,r=L.useRef(i),s=al(t);return L.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var Vhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jd=new WeakMap,wU=new WeakMap,_U={},gE=0,_V=function(e){return e&&(e.host||_V(e.parentNode))},$he=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=_V(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Ghe=function(e,t,n,i){var r=$he(t,Array.isArray(e)?e:[e]);_U[n]||(_U[n]=new WeakMap);var s=_U[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(jd.get(f)||0)+1,U=(s.get(f)||0)+1;jd.set(f,p),s.set(f,U),o.push(f),p===1&&m&&wU.set(f,!0),U===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(t),a.clear(),gE++,function(){o.forEach(function(d){var f=jd.get(d)-1,h=s.get(d)-1;jd.set(d,f),s.set(d,h),f||(wU.has(d)||d.removeAttribute(i),wU.delete(d)),h||d.removeAttribute(n)}),gE--,gE||(jd=new WeakMap,jd=new WeakMap,wU=new WeakMap,_U={})}},Xhe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=Vhe(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Ghe(i,r,n,"aria-hidden")):function(){return null}},Ro=function(){return Ro=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ro.apply(this,arguments)};function TV(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Yhe(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var E2="right-scroll-bar-position",v2="width-before-scroll-bar",jhe="with-scroll-bars-hidden",Whe="--removed-body-scroll-bar-size";function mE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Khe(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var Zhe=typeof window<"u"?L.useLayoutEffect:L.useEffect,TM=new WeakMap;function qhe(e,t){var n=Khe(null,function(i){return e.forEach(function(r){return mE(r,i)})});return Zhe(function(){var i=TM.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||mE(a,null)}),s.forEach(function(a){r.has(a)||mE(a,o)})}TM.set(n,e)},[e]),n}function Qhe(e){return e}function Jhe(e,t){t===void 0&&(t=Qhe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function ege(e){e===void 0&&(e={});var t=Jhe(null);return t.options=Ro({async:!0,ssr:!1},e),t}var SV=function(e){var t=e.sideCar,n=TV(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,Ro({},n))};SV.isSideCarExport=!0;function tge(e,t){return e.useMedium(t),SV}var IV=ege(),pE=function(){},V5=L.forwardRef(function(e,t){var n=L.useRef(null),i=L.useState({onScrollCapture:pE,onWheelCapture:pE,onTouchMoveCapture:pE}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,U=e.as,E=U===void 0?"div":U,y=e.gapMode,v=TV(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,S=qhe([n,t]),M=Ro(Ro({},v),r);return L.createElement(L.Fragment,null,u&&L.createElement(w,{sideCar:IV,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?L.cloneElement(L.Children.only(a),Ro(Ro({},M),{ref:S})):L.createElement(E,Ro({},M,{className:l,ref:S}),a))});V5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};V5.classNames={fullWidth:v2,zeroRight:E2};var nge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ige(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=nge();return t&&e.setAttribute("nonce",t),e}function rge(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function sge(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var oge=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ige())&&(rge(t,n),sge(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},age=function(){var e=oge();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},xV=function(){var e=age(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},lge={left:0,top:0,right:0,gap:0},UE=function(e){return parseInt(e||"",10)||0},cge=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[UE(n),UE(i),UE(r)]},uge=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lge;var t=cge(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},dge=xV(),nh="data-scroll-locked",fge=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(jhe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(nh,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(E2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(v2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(E2," .").concat(E2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(v2," .").concat(v2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(nh,`] {
    `).concat(Whe,": ").concat(a,`px;
  }
`)},SM=function(){var e=parseInt(document.body.getAttribute(nh)||"0",10);return isFinite(e)?e:0},hge=function(){L.useEffect(function(){return document.body.setAttribute(nh,(SM()+1).toString()),function(){var e=SM()-1;e<=0?document.body.removeAttribute(nh):document.body.setAttribute(nh,e.toString())}},[])},gge=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;hge();var s=L.useMemo(function(){return uge(r)},[r]);return L.createElement(dge,{styles:fge(s,!t,r,n?"":"!important")})},S4=!1;if(typeof window<"u")try{var TU=Object.defineProperty({},"passive",{get:function(){return S4=!0,!0}});window.addEventListener("test",TU,TU),window.removeEventListener("test",TU,TU)}catch{S4=!1}var Wd=S4?{passive:!1}:!1,mge=function(e){return e.tagName==="TEXTAREA"},CV=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!mge(e)&&n[t]==="visible")},pge=function(e){return CV(e,"overflowY")},Uge=function(e){return CV(e,"overflowX")},IM=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=AV(e,i);if(r){var s=MV(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},bge=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},yge=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},AV=function(e,t){return e==="v"?pge(t):Uge(t)},MV=function(e,t){return e==="v"?bge(t):yge(t)},Ege=function(e,t){return e==="h"&&t==="rtl"?-1:1},vge=function(e,t,n,i,r){var s=Ege(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=MV(e,a),m=h[0],p=h[1],U=h[2],E=p-U-s*m;(m||E)&&AV(e,a)&&(d+=E,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},SU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xM=function(e){return[e.deltaX,e.deltaY]},CM=function(e){return e&&"current"in e?e.current:e},wge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},_ge=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Tge=0,Kd=[];function Sge(e){var t=L.useRef([]),n=L.useRef([0,0]),i=L.useRef(),r=L.useState(Tge++)[0],s=L.useState(xV)[0],o=L.useRef(e);L.useEffect(function(){o.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=Yhe([e.lockRef.current],(e.shards||[]).map(CM),!0).filter(Boolean);return p.forEach(function(U){return U.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=L.useCallback(function(p,U){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var E=SU(p),y=n.current,v="deltaX"in p?p.deltaX:y[0]-E[0],w="deltaY"in p?p.deltaY:y[1]-E[1],S,M=p.target,_=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in p&&_==="h"&&M.type==="range")return!1;var T=IM(_,M);if(!T)return!0;if(T?S=_:(S=_==="v"?"h":"v",T=IM(_,M)),!T)return!1;if(!i.current&&"changedTouches"in p&&(v||w)&&(i.current=S),!S)return!0;var C=i.current||S;return vge(C,U,p,C==="h"?v:w)},[]),l=L.useCallback(function(p){var U=p;if(!(!Kd.length||Kd[Kd.length-1]!==s)){var E="deltaY"in U?xM(U):SU(U),y=t.current.filter(function(S){return S.name===U.type&&(S.target===U.target||U.target===S.shadowParent)&&wge(S.delta,E)})[0];if(y&&y.should){U.cancelable&&U.preventDefault();return}if(!y){var v=(o.current.shards||[]).map(CM).filter(Boolean).filter(function(S){return S.contains(U.target)}),w=v.length>0?a(U,v[0]):!o.current.noIsolation;w&&U.cancelable&&U.preventDefault()}}},[]),c=L.useCallback(function(p,U,E,y){var v={name:p,delta:U,target:E,should:y,shadowParent:Ige(E)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(w){return w!==v})},1)},[]),u=L.useCallback(function(p){n.current=SU(p),i.current=void 0},[]),d=L.useCallback(function(p){c(p.type,xM(p),p.target,a(p,e.lockRef.current))},[]),f=L.useCallback(function(p){c(p.type,SU(p),p.target,a(p,e.lockRef.current))},[]);L.useEffect(function(){return Kd.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Wd),document.addEventListener("touchmove",l,Wd),document.addEventListener("touchstart",u,Wd),function(){Kd=Kd.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Wd),document.removeEventListener("touchmove",l,Wd),document.removeEventListener("touchstart",u,Wd)}},[]);var h=e.removeScrollBar,m=e.inert;return L.createElement(L.Fragment,null,m?L.createElement(s,{styles:_ge(r)}):null,h?L.createElement(gge,{gapMode:e.gapMode}):null)}function Ige(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xge=tge(IV,Sge);var RV=L.forwardRef(function(e,t){return L.createElement(V5,Ro({},e,{ref:t,sideCar:xge}))});RV.classNames=V5.classNames;var a_="Popover",[kV,Oxe]=dp(a_,[fV]),hp=fV(),[Cge,Zc]=kV(a_),LV=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=hp(t),l=L.useRef(null),[c,u]=L.useState(!1),[d=!1,f]=o_({prop:i,defaultProp:r,onChange:s});return g(Dhe,{...a,children:g(Cge,{scope:t,contentId:Z9(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:L.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>u(!0),[]),onCustomAnchorRemove:L.useCallback(()=>u(!1),[]),modal:o,children:n})})};LV.displayName=a_;var DV="PopoverAnchor",Age=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(DV,n),s=hp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return L.useEffect(()=>(o(),()=>a()),[o,a]),g(vV,{...s,...i,ref:t})});Age.displayName=DV;var NV="PopoverTrigger",OV=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(NV,n),s=hp(n),o=ao(t,r.triggerRef),a=g(lr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":VV(r.open),...i,ref:o,onClick:Ii(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(vV,{asChild:!0,...s,children:a})});OV.displayName=NV;var l_="PopoverPortal",[Mge,Rge]=kV(l_,{forceMount:void 0}),PV=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=Zc(l_,t);return g(Mge,{scope:t,forceMount:n,children:g(H5,{present:n||s.open,children:g(wV,{asChild:!0,container:r,children:i})})})};PV.displayName=l_;var Dh="PopoverContent",FV=L.forwardRef((e,t)=>{const n=Rge(Dh,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=Zc(Dh,e.__scopePopover);return g(H5,{present:i||s.open,children:s.modal?g(kge,{...r,ref:t}):g(Lge,{...r,ref:t})})});FV.displayName=Dh;var kge=L.forwardRef((e,t)=>{const n=Zc(Dh,e.__scopePopover),i=L.useRef(null),r=ao(t,i),s=L.useRef(!1);return L.useEffect(()=>{const o=i.current;if(o)return Xhe(o)},[]),g(RV,{as:nm,allowPinchZoom:!0,children:g(BV,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ii(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ii(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ii(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lge=L.forwardRef((e,t)=>{const n=Zc(Dh,e.__scopePopover),i=L.useRef(!1),r=L.useRef(!1);return g(BV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),BV=L.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Zc(Dh,n),h=hp(n);return bfe(),g(QH,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(ZH,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Nhe,{"data-state":VV(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),zV="PopoverClose",Dge=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(zV,n);return g(lr.button,{type:"button",...i,ref:t,onClick:Ii(e.onClick,()=>r.onOpenChange(!1))})});Dge.displayName=zV;var Nge="PopoverArrow",HV=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=hp(n);return g(Ohe,{...r,...i,ref:t})});HV.displayName=Nge;function VV(e){return e?"open":"closed"}var $5=LV,G5=OV,Oge=PV,c_=FV,$V=HV;const GV=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),XV=oe.createContext(null),Ai=()=>oe.useContext(XV),YV=e=>{const[t,n]=L.useState(null),i=ii(),{theme:r}=Ai(),{container:s}=aa();return L.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",r===Ce.DARK))},[t,r,i.editor.isMobile,e==null?void 0:e.className]),L.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function u_(e,t,n){L.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n==null?void 0:n(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(ee.POINTER_DOWN,i),document.addEventListener(ee.TOUCH_START,i),()=>{document.removeEventListener(ee.POINTER_DOWN,i),document.removeEventListener(ee.TOUCH_START,i)}},[e,t,n])}const X5=e=>{const t=L.useRef(e);return Object.assign(t.current,e),t.current},Y5=Xt(null),Pge=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=YV({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=Ai(),o=by(),a=ho(),l=Fe(o,s),c=X5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=aa();L.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:M,clientY:_})=>{const T=m.getImageData((M-s.offsetLeft)*window.devicePixelRatio,(_-s.offsetTop)*window.devicePixelRatio,1,1).data;return Cie(T[0],T[1],T[2])},U=({clientX:M,clientY:_,altKey:T})=>{f.style.top=`${_+20}px`,f.style.left=`${M+20}px`;const C=p({clientX:M,clientY:_});h&&c.onChange(i,C,c.selectedElements,{altKey:T}),f.style.background=C},E=()=>{c.onCancel()},y=(M,_)=>{c.onSelect(M,_)},v=M=>{h=!0,M.stopImmediatePropagation()},w=M=>{h=!1,u==null||u.focus(),M.stopImmediatePropagation(),M.preventDefault(),y(p(M),M)},S=M=>{M.key===H.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),E())};return r.tabIndex=-1,r.focus(),U({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(ee.KEYDOWN,S),r.addEventListener(ee.POINTER_DOWN,v),r.addEventListener(ee.POINTER_UP,w),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener(ee.BLUR,E),()=>{h=!1,r.removeEventListener(ee.KEYDOWN,S),r.removeEventListener(ee.POINTER_DOWN,v),r.removeEventListener(ee.POINTER_UP,w),window.removeEventListener("pointermove",U),window.removeEventListener(ee.BLUR,E)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=L.useRef(null);return u_(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?_n.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},eo=oe.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:me("Island",n),style:{"--padding":t,...i},ref:r,children:e})),jV=oe.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=ii();return g(Oge,{container:t,children:O(c_,{ref:c,className:me("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!kre(document.activeElement)&&t.focus(),r()},children:[g(eo,{padding:3,style:i,children:n}),g($V,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),j5=({palette:e,color:t})=>{if(!t)return null;for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},I4=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),WV=({color:e,palette:t})=>!Object.values(t).flat().includes(e),Fge=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return WV({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,_ie)},Ug=Xt(null),AM=(e,t,n)=>(e*299+t*587+n*114)/1e3,d_=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return AM(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return AM(n,i,r)<t},Bge=({color:e,onChange:t,label:n,colorPickerType:i,placeholder:r})=>{const s=ii(),[o,a]=L.useState(e),[l,c]=fn(Ug);L.useEffect(()=>{a(e)},[e]);const u=L.useCallback(p=>{const U=p.toLowerCase(),E=jge(U);E&&t(E),a(U)},[t]),d=L.useRef(null),f=L.useRef(null);L.useEffect(()=>{d.current&&d.current.focus()},[l]);const[h,m]=fn(Y5);return L.useEffect(()=>()=>{m(null)},[m]),O("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:l==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:p=>{u(p.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:p=>{var U;p.key!==H.TAB&&(p.key===H.ESCAPE&&((U=f.current)==null||U.focus()),p.stopPropagation())},placeholder:r}),!s.editor.isMobile&&O(he,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:f,className:me("excalidraw-eye-dropper-trigger",{selected:h}),onClick:()=>m(p=>p?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:i}),title:`${k("labels.eyeDropper")} — ${H.I.toLocaleUpperCase()} or ${Q("Alt")} `,children:Sde})]})]})},f_=({color:e,keyLabel:t,isShade:n=!1})=>O("div",{className:"color-picker__button__hotkey-label",style:{color:d_(e)?"#fff":"#000"},children:[n&&"⇧",t]}),zge=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=fn(Ug),o=L.useRef(null);return L.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>O("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(f_,{color:a,keyLabel:l+1})]},l))})},Hge=({palette:e,color:t,onChange:n,activeShade:i})=>{const r=j5({color:t,palette:e}),[s,o]=fn(Ug),a=L.useRef(null);return L.useEffect(()=>{a.current&&s==="baseColors"&&a.current.focus()},[r==null?void 0:r.colorName,s]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([l,c],u)=>{const d=(Array.isArray(c)?c[i]:c)||"transparent",f=I4[u],h=k(`colors.${l.replace(/\d+/,"")}`,null,"");return O("button",{ref:(r==null?void 0:r.colorName)===l?a:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:(r==null?void 0:r.colorName)===l,"is-transparent":d==="transparent"||!1}),onClick:()=>{n(d),o("baseColors")},title:`${h}${d.startsWith("#")?` ${d}`:""} — ${f}`,"aria-label":`${h} — ${f}`,style:{"--swatch-color":d},"data-testid":`color-${l}`,children:[g("div",{className:"color-picker__button-outline"}),g(f_,{color:d,keyLabel:f})]},l)})})},w2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Vge=({color:e,onChange:t,palette:n})=>{const i=j5({color:e||"transparent",palette:n}),[r,s]=fn(Ug),o=L.useRef(null);if(L.useEffect(()=>{o.current&&r==="shades"&&o.current.focus()},[i,r]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>O("button",{ref:d===l&&r==="shades"?o:void 0,tabIndex:-1,type:"button",className:me("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),s("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(f_,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return O("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:k("colorPicker.noShades")})]})},bE=(e,t,n)=>{const i=Math.ceil(n/af);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+af;return r>=n?t%af:r}case"ArrowUp":{const r=t-af,s=r<0?af*i+r:r;return s>=n?void 0:s}}},$ge=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(I4.includes(e.key)){const a=I4.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},Gge=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[H.CTRL_OR_CMD])return!1;if(e.key===H.ESCAPE)return u(e),!0;if(e.key===H.ALT)return c(!0),!0;if(e.key===H.I)return c(),!0;const d=j5({color:i,palette:n});if(e.key===H.TAB){const f={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((y,[v,w])=>(w&&y.push(v),y),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,U=m+p>h.length-1?0:m+p<0?h.length-1:m+p,E=h[U];return E&&o(E),E==="custom"?r(s[0]):E==="baseColors"&&(Object.entries(n).find(([v,w])=>Array.isArray(w)?w.includes(i):w===i?v:null)||r(Be.black)),e.preventDefault(),e.stopPropagation(),!0}if($ge({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=bE(e.key,f,af);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=bE(e.key,m,h.length);if(p!==void 0){const U=h[p],E=n[U];return r(Array.isArray(E)?E[l]:E),!0}}if(t==="custom"){const f=i!=null?s.indexOf(i):0,h=bE(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},Xge=oe.forwardRef(({color:e,onChange:t,type:n,elements:i,palette:r,updateData:s,children:o,onEyeDropperToggle:a,onEscape:l},c)=>{const[u]=oe.useState(()=>n==="canvasBackground"?[]:Fge(i,n,r)),[d,f]=fn(Ug),h=j5({color:e,palette:r});L.useEffect(()=>{if(!d){const E=!!e&&WV({color:e,palette:r}),y=E&&!u.includes(e);f(y?null:E?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,r,f,h,u]);const[m,p]=L.useState((h==null?void 0:h.shade)??(n==="elementBackground"?w1:v1));L.useEffect(()=>{(h==null?void 0:h.shade)!=null&&p(h.shade);const E=y=>{y.key===H.ALT&&a(!1)};return document.addEventListener(ee.KEYUP,E,{capture:!0}),()=>{document.removeEventListener(ee.KEYUP,E,{capture:!0})}},[h,a]);const U=oe.useRef(null);return L.useImperativeHandle(c,()=>U.current),L.useEffect(()=>{var E;(E=U==null?void 0:U.current)==null||E.focus()},[]),g("div",{role:"dialog","aria-modal":"true","aria-label":k("labels.colorPicker"),children:O("div",{ref:U,onKeyDown:E=>{Gge({event:E,activeColorPickerSection:d,palette:r,color:e,onChange:t,onEyeDropperToggle:a,customColors:u,setActiveColorPickerSection:f,updateData:s,activeShade:m,onEscape:l})&&(E.preventDefault(),E.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&O("div",{children:[g(w2,{children:k("colorPicker.mostUsedCustomColors")}),g(zge,{colors:u,color:e,label:k("colorPicker.mostUsedCustomColors"),onChange:t})]}),O("div",{children:[g(w2,{children:k("colorPicker.colors")}),g(Hge,{color:e,palette:r,onChange:t,activeShade:m})]}),O("div",{children:[g(w2,{children:k("colorPicker.shades")}),g(Vge,{color:e,onChange:t,palette:r})]}),o]})})}),Yge=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=rF),t==="elementBackground"&&(r=sF),t==="canvasBackground"&&(r=oF),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:me("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!d_(s,nF)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},MM=e=>{const t=new Option().style;return t.color=e,!!t.color},jge=e=>Us(e)?e:MM(`#${e}`)?`#${e}`:MM(e)?e:null,Wge=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Be,updateData:o})=>{const{container:a}=aa(),[,l]=fn(Ug),[c,u]=fn(Y5),d=O("div",{children:[g(w2,{children:k("colorPicker.hexCode")}),g(Bge,{color:t||"",label:i,onChange:m=>{n(m)},colorPickerType:e,placeholder:k("colorPicker.color")})]}),f=L.useRef(null),h=()=>{var m;(m=f.current)==null||m.focus()};return g(jV,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?g(Xge,{ref:f,palette:s,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},type:e,elements:r,updateData:o,children:d}):d})},Kge=({label:e,color:t,type:n})=>g(G5,{type:"button",className:me("color-picker__button active-color properties-trigger",{"is-transparent":!t||t==="transparent","has-outline":!t||!d_(t,nF)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:k(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline",children:!t&&xue})}),h_=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=Be,topPicks:o,updateData:a,appState:l})=>g("div",{children:O("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Yge,{activeColor:t,onChange:n,type:e,topPicks:o}),g(GV,{}),O($5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Kge,{color:t,label:i,type:e}),l.openPopup===e&&g(Wge,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a})]})]})}),Zge=""+new URL("../fonts/CascadiaCode/CascadiaCode-Regular.woff2",import.meta.url).href,qge=[{uri:Zge}],Qge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",import.meta.url).href,Jge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",import.meta.url).href,e1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",import.meta.url).href,t1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",import.meta.url).href,n1e=[{uri:Qge,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:t1e,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:e1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:Jge,descriptors:{unicodeRange:"U+3bb"}}],i1e=[{uri:Hw}];class r1e{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class g_{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new XH;if(!import.meta.url||t.toString()===import.meta.url)throw new YH;return new g_(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new r1e(this.workerUrl);return t.debounceTerminate=el(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let RM=typeof Worker<"u";const s1e=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await a1e();return RM?Rc(async()=>{try{const s=await l1e(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return RM=!1,Xre()&&(s instanceof XH||s instanceof YH)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let yE=null,EE=null;const o1e=async()=>(yE||(yE=pe(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]),import.meta.url)),yE),a1e=async()=>(EE||(EE=pe(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]),import.meta.url)),EE);let vE=null;const l1e=()=>(vE||(vE=Rc(async()=>{const{WorkerUrl:e}=await o1e();return g_.create(e)})),vE);var wE={};const Bf=class Bf{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Bf.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${Bf.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await s1e(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Rc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(Hw))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,Bf.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Bf,"ASSETS_FALLBACK_URL",`https://esm.sh/${wE.PKG_NAME?`${wE.PKG_NAME}@${wE.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let x4=Bf;const c1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",import.meta.url).href,u1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",import.meta.url).href,d1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",import.meta.url).href,f1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",import.meta.url).href,h1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",import.meta.url).href,g1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",import.meta.url).href,m1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",import.meta.url).href,p1e=[{uri:h1e,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:m1e,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:g1e,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:d1e,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:u1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:c1e,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:f1e,descriptors:{unicodeRange:"U+300-301,U+303"}}],U1e=[{uri:Hw}],b1e=""+new URL("../fonts/LiberationSans/LiberationSans-Regular.woff2",import.meta.url).href,y1e=[{uri:b1e}],E1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",import.meta.url).href,v1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",import.meta.url).href,w1e=[{uri:E1e,descriptors:{unicodeRange:mu.LATIN_EXT}},{uri:v1e,descriptors:{unicodeRange:mu.LATIN}}],_1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",import.meta.url).href,T1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",import.meta.url).href,S1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",import.meta.url).href,I1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",import.meta.url).href,x1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",import.meta.url).href,C1e=[{uri:S1e,descriptors:{unicodeRange:mu.CYRILIC_EXT,weight:"500"}},{uri:_1e,descriptors:{unicodeRange:mu.CYRILIC,weight:"500"}},{uri:x1e,descriptors:{unicodeRange:mu.VIETNAMESE,weight:"500"}},{uri:I1e,descriptors:{unicodeRange:mu.LATIN_EXT,weight:"500"}},{uri:T1e,descriptors:{unicodeRange:mu.LATIN,weight:"500"}}],A1e=""+new URL("../fonts/Virgil/Virgil-Regular.woff2",import.meta.url).href,M1e=[{uri:A1e}],R1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",import.meta.url).href,k1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",import.meta.url).href,L1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",import.meta.url).href,D1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",import.meta.url).href,N1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",import.meta.url).href,O1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",import.meta.url).href,P1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",import.meta.url).href,F1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",import.meta.url).href,B1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",import.meta.url).href,z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",import.meta.url).href,H1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",import.meta.url).href,V1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",import.meta.url).href,$1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",import.meta.url).href,G1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",import.meta.url).href,X1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",import.meta.url).href,Y1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",import.meta.url).href,j1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",import.meta.url).href,W1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",import.meta.url).href,K1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",import.meta.url).href,Z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",import.meta.url).href,q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",import.meta.url).href,Q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",import.meta.url).href,J1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",import.meta.url).href,e0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",import.meta.url).href,t0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",import.meta.url).href,n0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",import.meta.url).href,i0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",import.meta.url).href,r0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",import.meta.url).href,s0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",import.meta.url).href,o0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",import.meta.url).href,a0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",import.meta.url).href,l0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",import.meta.url).href,c0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",import.meta.url).href,u0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",import.meta.url).href,d0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",import.meta.url).href,f0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",import.meta.url).href,h0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",import.meta.url).href,g0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",import.meta.url).href,m0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",import.meta.url).href,p0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",import.meta.url).href,U0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",import.meta.url).href,b0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",import.meta.url).href,y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",import.meta.url).href,E0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",import.meta.url).href,v0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",import.meta.url).href,w0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",import.meta.url).href,_0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",import.meta.url).href,T0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",import.meta.url).href,S0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",import.meta.url).href,I0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",import.meta.url).href,x0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",import.meta.url).href,C0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",import.meta.url).href,A0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",import.meta.url).href,M0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",import.meta.url).href,R0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",import.meta.url).href,k0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",import.meta.url).href,L0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",import.meta.url).href,D0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",import.meta.url).href,N0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",import.meta.url).href,O0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",import.meta.url).href,P0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",import.meta.url).href,F0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",import.meta.url).href,B0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",import.meta.url).href,z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",import.meta.url).href,H0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",import.meta.url).href,V0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",import.meta.url).href,$0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",import.meta.url).href,G0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",import.meta.url).href,X0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",import.meta.url).href,Y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",import.meta.url).href,j0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",import.meta.url).href,W0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",import.meta.url).href,K0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",import.meta.url).href,Z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",import.meta.url).href,q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",import.meta.url).href,Q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",import.meta.url).href,J0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",import.meta.url).href,eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",import.meta.url).href,tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",import.meta.url).href,nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",import.meta.url).href,ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",import.meta.url).href,rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",import.meta.url).href,sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",import.meta.url).href,ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",import.meta.url).href,ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",import.meta.url).href,lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",import.meta.url).href,cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",import.meta.url).href,ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",import.meta.url).href,dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",import.meta.url).href,fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",import.meta.url).href,hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",import.meta.url).href,gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",import.meta.url).href,mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",import.meta.url).href,pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",import.meta.url).href,Ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",import.meta.url).href,bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",import.meta.url).href,yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",import.meta.url).href,Eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",import.meta.url).href,vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",import.meta.url).href,wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",import.meta.url).href,_me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",import.meta.url).href,Tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",import.meta.url).href,Sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",import.meta.url).href,Ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",import.meta.url).href,xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",import.meta.url).href,Cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",import.meta.url).href,Ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",import.meta.url).href,Mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",import.meta.url).href,Rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",import.meta.url).href,kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",import.meta.url).href,Lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",import.meta.url).href,Dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",import.meta.url).href,Nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",import.meta.url).href,Ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",import.meta.url).href,Pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",import.meta.url).href,Fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",import.meta.url).href,Bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",import.meta.url).href,zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",import.meta.url).href,Hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",import.meta.url).href,Vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",import.meta.url).href,$me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",import.meta.url).href,Gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",import.meta.url).href,Xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",import.meta.url).href,Yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",import.meta.url).href,jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",import.meta.url).href,Wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",import.meta.url).href,Kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",import.meta.url).href,Zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",import.meta.url).href,qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",import.meta.url).href,Qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",import.meta.url).href,Jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",import.meta.url).href,epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",import.meta.url).href,tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",import.meta.url).href,npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",import.meta.url).href,ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",import.meta.url).href,rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",import.meta.url).href,spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",import.meta.url).href,ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",import.meta.url).href,ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",import.meta.url).href,lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",import.meta.url).href,cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",import.meta.url).href,upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",import.meta.url).href,dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",import.meta.url).href,fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",import.meta.url).href,hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",import.meta.url).href,gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",import.meta.url).href,mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",import.meta.url).href,ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",import.meta.url).href,Upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",import.meta.url).href,bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",import.meta.url).href,ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",import.meta.url).href,Epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",import.meta.url).href,vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",import.meta.url).href,wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",import.meta.url).href,_pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",import.meta.url).href,Tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",import.meta.url).href,Spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",import.meta.url).href,Ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",import.meta.url).href,xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",import.meta.url).href,Cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",import.meta.url).href,Ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",import.meta.url).href,Mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",import.meta.url).href,Rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",import.meta.url).href,kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",import.meta.url).href,Lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",import.meta.url).href,Dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",import.meta.url).href,Npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",import.meta.url).href,Ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",import.meta.url).href,Ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",import.meta.url).href,Fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",import.meta.url).href,Bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",import.meta.url).href,zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",import.meta.url).href,Hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",import.meta.url).href,Vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",import.meta.url).href,$pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",import.meta.url).href,Gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",import.meta.url).href,Xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",import.meta.url).href,Ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",import.meta.url).href,jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",import.meta.url).href,Wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",import.meta.url).href,Kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",import.meta.url).href,Zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",import.meta.url).href,qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",import.meta.url).href,Qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",import.meta.url).href,Jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",import.meta.url).href,eUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",import.meta.url).href,tUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",import.meta.url).href,nUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",import.meta.url).href,iUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",import.meta.url).href,rUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",import.meta.url).href,sUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",import.meta.url).href,oUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",import.meta.url).href,aUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",import.meta.url).href,lUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",import.meta.url).href,cUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",import.meta.url).href,uUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",import.meta.url).href,dUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",import.meta.url).href,fUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",import.meta.url).href,hUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",import.meta.url).href,gUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",import.meta.url).href,mUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",import.meta.url).href,pUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",import.meta.url).href,UUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",import.meta.url).href,bUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",import.meta.url).href,yUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",import.meta.url).href,EUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",import.meta.url).href,vUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",import.meta.url).href,wUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",import.meta.url).href,_Ue=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",import.meta.url).href,TUe=[{uri:F1e,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:V1e,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:H1e,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:$1e,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:X1e,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:Y1e,descriptors:{unicodeRange:"U+d520-d608"}},{uri:G1e,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:j1e,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:K1e,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:Z1e,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:z1e,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:q1e,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:Q1e,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:L1e,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:B1e,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:J1e,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:k1e,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:e0e,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:t0e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:n0e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:i0e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:r0e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:s0e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:o0e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:a0e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:l0e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:c0e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:u0e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:d0e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:f0e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:W1e,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:h0e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:g0e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:m0e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:p0e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:U0e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:b0e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:y0e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:E0e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:I0e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:x0e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:v0e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:C0e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:A0e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:M0e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:T0e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:R0e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:S0e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:k0e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:L0e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:D0e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:N0e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:O0e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:P0e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:F0e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:B0e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:z0e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:H0e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:V0e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:$0e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:G0e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:X0e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:Y0e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:j0e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:W0e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:K0e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:Z0e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:q0e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:Q0e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:J0e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:eme,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:N1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:tme,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:nme,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:ime,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:rme,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:sme,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:ome,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:ame,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:lme,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:R1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:cme,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:_0e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:ume,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:dme,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:fme,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:hme,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:gme,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:mme,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:pme,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:Ume,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:bme,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:yme,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:Eme,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:vme,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:wme,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:_me,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:Tme,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:Sme,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:Ime,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:xme,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:Cme,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:Ame,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:Mme,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:Rme,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:w0e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:kme,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:Lme,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:Dme,descriptors:{unicodeRange:"U+487a-4932"}},{uri:Nme,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:Ome,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:Pme,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:Fme,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:Bme,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:zme,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:Hme,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Vme,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:$me,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:Gme,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:Xme,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:Yme,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:jme,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:Wme,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:Kme,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:Zme,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:qme,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:Qme,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:Jme,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:epe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:tpe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:npe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:ipe,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:rpe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:spe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:ope,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:ape,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:lpe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:cpe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:upe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:dpe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:fpe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:hpe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:gpe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:mpe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:ppe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:Upe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:bpe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:ype,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:Epe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:vpe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:wpe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:_pe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:Tpe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:Spe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:Ipe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:xpe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:Cpe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:Ape,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:Mpe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Rpe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:kpe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:O1e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:Lpe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:Dpe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Npe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Ope,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:D1e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Ppe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:Fpe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:Bpe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:Hpe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Vpe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:$pe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:Gpe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Xpe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Ype,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:jpe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Wpe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Kpe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:Zpe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:qpe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:Qpe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:Jpe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:P1e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:eUe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:tUe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:nUe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:iUe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:rUe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:sUe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:oUe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:aUe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:lUe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:cUe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:uUe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:dUe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:fUe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:hUe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:gUe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:mUe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:pUe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:UUe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:zpe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:bUe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:yUe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:EUe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:vUe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:wUe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:_Ue,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],We=class We{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>We.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;We.loadedFontsCache.has(o)||(We.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(ue(s)){i=!0,$t.delete(s),ip.clearCache(dt(s));const o=Vn(s,r);o&&$t.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=We.getCharsPerFamily(this.scene.getNonDeletedElements());return We.loadFontFaces(t,n)});this.scene=t}static get registered(){return We._registered?We._initialized||(We._registered=new Map([...We.init().entries(),...We._registered.entries()])):We._registered=We.init(),We._registered}get registered(){return We.registered}static async generateFontFaceDeclarations(t){const n=We.getUniqueFamilies(t),i=We.getCharsPerFamily(t),r=n.find(l=>fF(l).includes(xf));if(r){const l=We.getCharacters(i,r);if(Ooe(l)){const c=Cf[xf];i[c]=new Set(l),n.unshift(Cf[xf])}}const s=We.fontFacesStylesGenerator(n,i),o=3,a=await new bC(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of We.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=We.fontFacesLoader(t,n),r=10;return(await new bC(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=dt({fontFamily:r,fontSize:16}),o=We.getCharacters(n,r);window.document.fonts.check(s,o)||(yield Rc(async()=>{var a;try{const l=await window.document.fonts.load(s,o);return[i,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=We.registered.get(r))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=We.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,We.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of s.entries())yield Rc(async()=>{try{const c=We.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=qe[t]??Cf[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new x4(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=qe[i]??Cf[i],o=wh[s]??wh[qe.Excalifont];We.register.call(t,i,o,...r)};return n("Cascadia",...qge),n("Comic Shanns",...n1e),n("Excalifont",...p1e),n("Helvetica",...U1e),n("Liberation Sans",...y1e),n("Lilita One",...w1e),n("Nunito",...C1e),n("Virgil",...M1e),n(xf,...TUe),n(Y0,...i1e),We._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(ue(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(ue(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(We.registered.keys())}};F(We,"loadedFontsCache",new Set),F(We,"_registered"),F(We,"_initialized",!1),F(We,"loadElementsFonts",async t=>{const n=We.getUniqueFamilies(t),i=We.getCharsPerFamily(t);return We.loadFontFaces(n,i)});let Wa=We;const KV=oe.forwardRef(({className:e,placeholder:t,onChange:n},i)=>O("div",{className:me("QuickSearch__wrapper",e),children:[ld,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),ZV=({className:e,placeholder:t,children:n})=>{const i=!L.Children.count(n);return g("div",{className:me("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},o6=({children:e,className:t="",style:n,title:i})=>O("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});o6.displayName="DropdownMenuGroup";const qV=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=ii();return O(he,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!r.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},QV=oe.createContext({}),JV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),e$=(e,t)=>{const n=L.useContext(QV);return E5(e,i=>{var s;const r=new CustomEvent(ee.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(r),r.defaultPrevented||(s=n.onSelect)==null||s.call(n,r)})},Tr=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=e$(u,c),h=L.useRef(null);return L.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:JV(s,a,o),title:d.title??d["aria-label"],children:g(qV,{textStyle:l,icon:e,shortcut:r,children:i})})};Tr.displayName="DropdownMenuItem";const x1={GREEN:"green",RED:"red",BLUE:"blue"},m_=({type:e=x1.BLUE,children:t})=>{const{theme:n}=bp(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Ce.LIGHT?"1.5px solid white":"none"};switch(e){case x1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case x1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case x1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};m_.displayName="DropdownMenuItemBadge";Tr.Badge=m_;const SUe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{var a,l,c;if(!e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===H.F)return(a=t.current)==null||a.focus(),!0;if(e.key===H.ESCAPE)return r(),!0;if(e.key===H.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===H.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===H.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},IUe=e=>{switch(e){case qe.Excalifont:case qe.Virgil:return N5;case qe.Nunito:case qe.Helvetica:return p4;case qe["Lilita One"]:return dde;case qe["Comic Shanns"]:case qe.Cascadia:return LH;default:return p4}},xUe=oe.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=aa(),{fonts:l}=ho(),{showDeprecatedFonts:c}=Up(),[u,d]=L.useState(""),f=L.useRef(null),h=L.useMemo(()=>Array.from(Wa.registered.entries()).filter(([T,{metadata:C}])=>!C.private&&!C.fallback).map(([T,{metadata:C,fontFaces:x}])=>{var P,D;const R={value:T,icon:IUe(T),text:((D=(P=x[0])==null?void 0:P.fontFace)==null?void 0:D.family)??"Unknown"};return C.deprecated&&Object.assign(R,{deprecated:C.deprecated,badge:{type:x1.RED,placeholder:k("fontList.badge.old")}}),R}).sort((T,C)=>T.text.toLowerCase()>C.text.toLowerCase()?1:-1),[]),m=L.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=L.useMemo(()=>h.filter(T=>m.has(T.value)),[h,m]),U=L.useMemo(()=>h.filter(T=>!m.has(T.value)&&(c||!T.deprecated)),[h,m,c]),E=L.useMemo(()=>Vre([...p,...U].filter(T=>{var C;return(C=T.text)==null?void 0:C.toLowerCase().includes(u)})),[p,U,u]),y=L.useMemo(()=>{var C;let T;return t?T=E.find(x=>x.value===t):e&&(T=E.find(x=>x.value===e)),!T&&u&&((C=E[0])!=null&&C.value?i(E[0].value):r()),T},[t,e,u,E,i,r]),v=L.useCallback(T=>{SUe({event:T,inputRef:f,hoveredFont:y,filteredFonts:E,onSelect:n,onHover:i,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[y,E,n,i,o]);L.useEffect(()=>(s(),()=>{o()}),[]);const w=L.useMemo(()=>E.filter(T=>m.has(T.value)),[E,m]),S=L.useMemo(()=>E.filter(T=>!m.has(T.value)),[E,m]),M=(T,C)=>O(Tr,{icon:T.icon,value:T.value,order:C,textStyle:{fontFamily:qm({fontFamily:T.value})},hovered:T.value===(y==null?void 0:y.value),selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:x=>{n(Number(x.currentTarget.value))},onMouseMove:()=>{(y==null?void 0:y.value)!==T.value&&i(T.value)},children:[T.text,T.badge&&g(m_,{type:T.badge.type,children:T.badge.placeholder})]},T.value),_=[];return w.length&&_.push(g(o6,{title:k("fontList.sceneFonts"),children:w.map(M)},"group_1")),S.length&&_.push(g(o6,{title:k("fontList.availableFonts"),children:S.map((T,C)=>M(T,C+w.length))},"group_2")),O(jV,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:r,onKeyDown:v,children:[g(KV,{ref:f,placeholder:k("quickSearch.placeholder"),onChange:el(d,20)}),g(ZV,{className:"dropdown-menu fonts manual-hover",placeholder:k("fontList.empty"),children:_.length?_:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),CUe=({selectedFontFamily:e})=>{const t=L.useMemo(()=>!!(e&&!MUe(e)),[e]);return g(G5,{asChild:!0,children:g("div",{children:g(K9,{standalone:!0,icon:V9,title:k("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},t$=[{value:qe.Excalifont,icon:N5,text:k("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:qe.Nunito,icon:p4,text:k("labels.normal"),testId:"font-family-normal"},{value:qe["Comic Shanns"],icon:LH,text:k("labels.code"),testId:"font-family-code"}],AUe=new Set(t$.map(e=>e.value)),MUe=e=>e?AUe.has(e):!1,RUe=oe.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o})=>{const a=L.useMemo(()=>t$,[]),l=L.useCallback(c=>{c&&i(c)},[i]);return O("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g("div",{className:"buttonList",children:g(sa,{type:"button",options:a,value:t,onClick:l})}),g(GV,{}),O($5,{open:e,onOpenChange:o,children:[g(CUe,{selectedFontFamily:t}),e&&g(xUe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),W5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),C4=({label:e,open:t,openTrigger:n,children:i,className:r,showCollapsedIcon:s=!0})=>O(he,{children:[O("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,s&&g(W5,{icon:t?Xde:$H})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),kUe=Xt(!1);function LUe({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=ii(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===H.TAB){const p=e.findIndex(E=>E.value===t),U=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[U].value)}else if(_1(h.key)){const p=em().rtl,U=e.findIndex(E=>E.value===t);if(U!==-1){const E=e.length;let y=U;switch(h.key){case(p?H.ARROW_LEFT:H.ARROW_RIGHT):y=(U+1)%E;break;case(p?H.ARROW_RIGHT:H.ARROW_LEFT):y=(E+U-1)%E;break;case H.ARROW_DOWN:{y=(U+(s??1))%E;break}case H.ARROW_UP:{y=(E+U-(s??1))%E;break}}i(e[y].value)}h.preventDefault()}else(h.key===H.ESCAPE||h.key===H.ENTER)&&(h.preventDefault(),r());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=fn(kUe),u=oe.useMemo(()=>e.slice(0,s),[e,s]),d=oe.useMemo(()=>e.slice(s),[e,s]);L.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>O("button",{type:"button",className:me("picker-option",{active:t===m.value}),onClick:U=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:U=>{t===m.value&&setTimeout(()=>{U==null||U.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(c_,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:O("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(C4,{label:k("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function kM({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){var c;const[o,a]=oe.useState(!1),l=oe.useRef(null);return g("div",{children:O($5,{open:o,onOpenChange:u=>a(u),children:[g(G5,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(LUe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const DUe=({updateData:e,app:t,testId:n})=>{const i=oe.useRef(null),r=oe.useRef(null),s=t.scene.getSelectedElements(t.state);let o=!0;const a=s.at(0),c=s.reduce((u,d)=>(u!=null&&u!==d.opacity&&(o=!1),u==null||u>d.opacity?d.opacity:u),(a==null?void 0:a.opacity)??null)??t.state.currentItemOpacity;return L.useEffect(()=>{if(i.current&&r.current){const u=i.current,d=r.current,f=u.offsetWidth,h=15,m=c/100*(f-h)+h/2;d.style.left=`${m}px`,u.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${c}%, var(--button-bg) ${c}%, var(--button-bg) 100%)`}},[c]),O("label",{className:"control-label",children:[k("labels.opacity"),O("div",{className:"range-wrapper",children:[g("input",{style:{"--color-slider-track":o?void 0:"var(--button-bg)"},ref:i,type:"range",min:"0",max:"100",step:"10",onChange:u=>{e(+u.target.value)},value:c,className:"range-input","data-testid":n}),g("div",{className:"value-bubble",ref:r,children:c!==0?c:null}),g("div",{className:"zero-label",children:"0"})]})]})},n$=.1,or=(e,t,n,i=!1)=>{const r=we(Fe(e,t,{includeBoundTextElement:i}));return e.map(s=>{var o;return r.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},wr=function(e,t,n,i,r){const s=t.state.editingTextElement,o=Ot(e);let a=null;if(s&&(a=n(s)),!a)if($n(o,t.state)){const c=t.scene.getSelectedElements(t.state),u=i===!0?c:c.filter(d=>i(d));a=zF(u,n)??(typeof r=="function"?r(!0):r)}else a=typeof r=="function"?r(!1):r;return a},NUe=(e,t,n)=>Bt(t)||!t.autoResize?t:n.mutateElement(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2}),p_=(e,t,n,i,r)=>{const s=new Set,o=or(e,t,a=>{if(ue(a)){const l=i(a);s.add(l);let c=Te(a,{fontSize:l});return Yi(c,n.scene.getContainerElement(a),n.scene),c=NUe(a,c,n.scene),c}return a},!0);return Fe(e,t,{includeBoundTextElement:!0}).forEach(a=>{ue(a)&&br(a,n.scene)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:W.IMMEDIATELY}};se({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:or(e,t,i=>X7(i.type)?Te(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?W.IMMEDIATELY:W.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O(he,{children:[g("h3",{"aria-hidden":"true",children:k("labels.stroke")}),g(h_,{topPicks:rF,palette:Sie,type:"elementStroke",label:k("labels.stroke"),color:wr(e,i,r=>r.strokeColor,!0,r=>r?null:t.currentItemStrokeColor),onChange:r=>n({currentItemStrokeColor:r}),elements:e,appState:t,updateData:n})]})});se({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n,i)=>{if(!n.currentItemBackgroundColor)return{appState:{...t,...n},captureUpdate:W.EVENTUALLY};let r;const s=i.scene.getSelectedElements(t);if(!Us(n.currentItemBackgroundColor)&&s.every(a=>ln(a)&&sB(a.points))){const a=we(s);r=e.map(l=>a.has(l.id)&&ln(l)?Te(l,{backgroundColor:n.currentItemBackgroundColor,..._9(l,!0)}):l)}else r=or(e,t,a=>Te(a,{backgroundColor:n.currentItemBackgroundColor}));return{elements:r,appState:{...t,...n},captureUpdate:W.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O(he,{children:[g("h3",{"aria-hidden":"true",children:k("labels.background")}),g(h_,{topPicks:sF,palette:Iie,type:"elementBackground",label:k("labels.background"),color:wr(e,i,r=>r.backgroundColor,!0,r=>r?null:t.currentItemBackgroundColor),onChange:r=>n({currentItemBackgroundColor:r}),elements:e,appState:t,updateData:n})]})});se({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(st("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:or(e,t,r=>Te(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=Fe(e,t),s=r.length>0&&r.every(o=>o.fillStyle==="zigzag");return O("fieldset",{children:[g("legend",{children:k("labels.fill")}),g("div",{className:"buttonList",children:g(sa,{type:"button",options:[{value:"hachure",text:`${k(s?"labels.zigzag":"labels.hachure")} (${Q("Alt-Click")})`,icon:s?Oue:Pue,active:s?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:k("labels.crossHatch"),icon:Fue,testId:"fill-cross-hatch"},{value:"solid",text:k("labels.solid"),icon:Bue,testId:"fill-solid"}],value:wr(e,i,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,a)=>{const l=a.altKey&&o==="hachure"&&r.every(c=>c.fillStyle==="hachure")?"zigzag":o;n(l)}})})]})}});se({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>Te(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:k("labels.strokeWidth")}),g("div",{className:"buttonList",children:g(sa,{group:"stroke-width",options:[{value:$8.thin,text:k("labels.thin"),icon:kH,testId:"strokeWidth-thin"},{value:$8.bold,text:k("labels.bold"),icon:zue,testId:"strokeWidth-bold"},{value:$8.extraBold,text:k("labels.extraBold"),icon:Hue,testId:"strokeWidth-extraBold"}],value:wr(e,i,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})})]})});se({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>Te(i,{seed:Ms(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:k("labels.sloppiness")}),g("div",{className:"buttonList",children:g(sa,{group:"sloppiness",options:[{value:0,text:k("labels.architect"),icon:Gue},{value:1,text:k("labels.artist"),icon:Xue},{value:2,text:k("labels.cartoonist"),icon:Yue}],value:wr(e,i,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})})]})});se({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>Te(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:k("labels.strokeStyle")}),g("div",{className:"buttonList",children:g(sa,{group:"strokeStyle",options:[{value:"solid",text:k("labels.strokeStyle_solid"),icon:kH},{value:"dashed",text:k("labels.strokeStyle_dashed"),icon:Vue},{value:"dotted",text:k("labels.strokeStyle_dotted"),icon:$ue}],value:wr(e,i,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})})]})});se({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>Te(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({app:e,updateData:t})=>g(DUe,{updateData:t,app:e,testId:"opacity"})});se({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>p_(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:k("labels.fontSize")}),g("div",{className:"buttonList",children:g(sa,{group:"font-size",options:[{value:16,text:k("labels.small"),icon:ade,testId:"fontSize-small"},{value:20,text:k("labels.medium"),icon:lde,testId:"fontSize-medium"},{value:28,text:k("labels.large"),icon:cde,testId:"fontSize-large"},{value:36,text:k("labels.veryLarge"),icon:ude,testId:"fontSize-veryLarge"}],value:wr(e,i,r=>{if(ue(r))return r.fontSize;const s=ke(r,i.scene.getNonDeletedElementsMap());return s?s.fontSize:null},r=>ue(r)||ke(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:t.currentItemFontSize||Ul),onChange:r=>n(r)})})]})});const LM=se({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:P5,trackEvent:!1,perform:(e,t,n,i)=>p_(e,t,i,r=>Math.round(1/(1+n$)*r.fontSize)),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&(e.key===H.CHEVRON_LEFT||e.key===H.COMMA)}),DM=se({name:"increaseFontSize",label:"labels.increaseFontSize",icon:P5,trackEvent:!1,perform:(e,t,n,i)=>p_(e,t,i,r=>Math.round(r.fontSize*(1+n$))),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&(e.key===H.CHEVRON_RIGHT||e.key===H.PERIOD)});se({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:or(e,t,U=>{const E=r==null?void 0:r.get(U.id);return E?Te(U,{...E}):U},!0),appState:{...t,...a},captureUpdate:W.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=W.EVENTUALLY,d,f=!1;if(l)d=l,u=W.IMMEDIATELY;else if(c){d=c,u=W.EVENTUALLY;const p=Fe(e,t,{includeBoundTextElement:!0}).filter(U=>ue(U));if(p.length>200)f=!0;else{let U=0,E=0;for(;U<p.length&&E<5e3;){const y=p[U];E+=(y==null?void 0:y.originalText.length)||0,U++}E>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let U=new Set,E=!1;const y=Array.from(Wa.loadedFontsCache.values()),v=(m=Object.entries(qe).find(([M,_])=>_===d))==null?void 0:m[0];c&&v&&y.some(M=>M.startsWith(v))&&(E=!0),Object.assign(h,{elements:or(e,t,M=>{if(ue(M)&&(M.fontFamily!==d||l)){const _=Te(M,{fontFamily:d,lineHeight:Mc(d)}),T=(r==null?void 0:r.get(M.containerId||""))||{},C=i.scene.getContainerElement(M);return o&&C&&T&&i.scene.mutateElement(C,{...T}),E||(U=new Set([...U,...Array.from(_.originalText)])),p.set(_,C),_}return M},!0)});const w=`10px ${qm({fontFamily:d})}`,S=Array.from(U.values()).join();if(E||window.document.fonts.check(w,S))for(const[M,_]of p)Yi(M,_,i.scene);else window.document.fonts.load(w,S).then(M=>{for(const[_,T]of p){const C=i.scene.getElement(_.id),x=T?i.scene.getElement(T.id):null;C&&Yi(C,x,i.scene)}i.fonts.onLoaded(M)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=L.useRef(new Map),s=L.useRef(null),[o,a]=L.useState({}),l=L.useRef(!0),c=L.useMemo(()=>{var d;const u=(f,h)=>wr(f,n,m=>{if(ue(m))return m.fontFamily;const p=ke(m,h);return p?p.fontFamily:null},m=>ue(m)||ke(m,h)!==null,m=>m?null:t.currentItemFontFamily||Yc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=r.current)==null?void 0:d.values())??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n]);return L.useEffect(()=>{s.current=c},[c]),L.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),L.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),O("fieldset",{children:[g("legend",{children:k("labels.fontFamily")}),g(RUe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),r.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:u=>{if(u){r.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);r.current.set(d.id,Te(f||d,{},!0))}else{const f=Fe(e,t,{includeBoundTextElement:!0});for(const h of f)r.current.set(h.id,Te(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};l.current?i({...o,...d}):a(d),r.current.clear()}}})]})}});se({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:or(e,t,r=>{if(ue(r)){const s=Te(r,{textAlign:n});return Yi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=i.scene.getNonDeletedElementsMap();return O("fieldset",{children:[g("legend",{children:k("labels.textAlign")}),g("div",{className:"buttonList",children:g(sa,{group:"text-align",options:[{value:"left",text:k("labels.left"),icon:fde,testId:"align-left"},{value:"center",text:k("labels.center"),icon:hde,testId:"align-horizontal-center"},{value:"right",text:k("labels.right"),icon:gde,testId:"align-right"}],value:wr(e,i,s=>{if(ue(s))return s.textAlign;const o=ke(s,r);return o?o.textAlign:null},s=>ue(s)||ke(s,r)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})})]})}});se({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:or(e,t,r=>{if(ue(r)){const s=Te(r,{verticalAlign:n});return Yi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g("div",{className:"buttonList",children:g(sa,{group:"text-align",options:[{value:zr.TOP,text:k("labels.alignTop"),icon:g(mde,{theme:t.theme}),testId:"align-top"},{value:zr.MIDDLE,text:k("labels.centerVertically"),icon:g(Ude,{theme:t.theme}),testId:"align-middle"},{value:zr.BOTTOM,text:k("labels.alignBottom"),icon:g(pde,{theme:t.theme}),testId:"align-bottom"}],value:wr(e,i,r=>{if(ue(r)&&r.containerId)return r.verticalAlign;const s=ke(r,i.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},r=>ue(r)||ke(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:zr.MIDDLE),onChange:r=>n(r)})})})});se({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>de(i)?i:Te(i,{roundness:n==="round"?{type:Md(i.type)?dn.ADAPTIVE_RADIUS:dn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,renderAction:r})=>{const o=CB(Ot(e),t).some(a=>{var l;return((l=a.roundness)==null?void 0:l.type)===dn.LEGACY});return O("fieldset",{children:[g("legend",{children:k("labels.edges")}),O("div",{className:"buttonList",children:[g(sa,{group:"edges",options:[{value:"sharp",text:k("labels.sharp"),icon:jue},{value:"round",text:k("labels.round"),icon:Wue}],value:wr(e,i,a=>o?null:a.roundness?"round":"sharp",a=>!xe(a)&&a.hasOwnProperty("roundness"),a=>a?null:t.currentItemRoundness),onChange:a=>n(a)}),r("togglePolygon")]})]})}});const NM=e=>[{value:null,text:k("labels.arrowhead_none"),keyBinding:"q",icon:Kue},{value:"arrow",text:k("labels.arrowhead_arrow"),keyBinding:"w",icon:g(Zue,{flip:e})},{value:"triangle",text:k("labels.arrowhead_triangle"),icon:g(ede,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:k("labels.arrowhead_triangle_outline"),icon:g(tde,{flip:e}),keyBinding:"r"},{value:"circle",text:k("labels.arrowhead_circle"),keyBinding:"a",icon:g(que,{flip:e})},{value:"circle_outline",text:k("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Que,{flip:e})},{value:"diamond",text:k("labels.arrowhead_diamond"),icon:g(nde,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:k("labels.arrowhead_diamond_outline"),icon:g(ide,{flip:e}),keyBinding:"f"},{value:"bar",text:k("labels.arrowhead_bar"),keyBinding:"z",icon:g(Jue,{flip:e})},{value:"crowfoot_one",text:k("labels.arrowhead_crowfoot_one"),icon:g(sde,{flip:e}),keyBinding:"x"},{value:"crowfoot_many",text:k("labels.arrowhead_crowfoot_many"),icon:g(rde,{flip:e}),keyBinding:"c"},{value:"crowfoot_one_or_many",text:k("labels.arrowhead_crowfoot_one_or_many"),icon:g(ode,{flip:e}),keyBinding:"v"}];se({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:or(e,t,i=>{if(Ie(i)){const{position:r,type:s}=n;if(r==="start")return Te(i,{startArrowhead:s});if(r==="end")return Te(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=em().rtl;return O("fieldset",{children:[g("legend",{children:k("labels.arrowheads")}),O("div",{className:"iconSelectList buttonList",children:[g(kM,{label:"arrowhead_start",options:NM(!r),value:wr(e,i,s=>Ie(s)&&jb(s.type)?s.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:s=>n({position:"start",type:s}),numberOfOptionsToAlwaysShow:4}),g(kM,{label:"arrowhead_end",group:"arrowheads",options:NM(!!r),value:wr(e,i,s=>Ie(s)&&jb(s.type)?s.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:s=>n({position:"end",type:s}),numberOfOptionsToAlwaysShow:4})]})]})}});se({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const r=or(e,t,l=>{if(!xe(l))return l;let c=Te(l,{roundness:n===oi.round?{type:dn.PROPORTIONAL_RADIUS}:null,elbowed:n===oi.elbow,points:n===oi.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(de(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=ce.getPointAtIndexGlobalCoordinates(c,0,u),f=ce.getPointAtIndexGlobalCoordinates(c,-1,u),h=c.startBinding&&u.get(c.startBinding.elementId),m=c.endBinding&&u.get(c.endBinding.elementId),p=h&&c.startBinding?{...c.startBinding,...Vb(c,h,"start",u)}:null,U=m&&c.endBinding?{...c.endBinding,...Vb(c,m,"end",u)}:null;c={...c,startBinding:p,endBinding:U,...cg(c,u,{points:[d,f].map(E=>I(E[0]-c.x,E[1]-c.y)),startBinding:p,endBinding:U,fixedSegments:null})}}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&qo(c,d,"start",i.scene)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&qo(c,d,"end",i.scene)}}return c}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=r.find(c=>c.id===o);l&&(s.selectedLinearElement=new ce(l,we(e)))}return{elements:r,appState:s,captureUpdate:W.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>O("fieldset",{children:[g("legend",{children:k("labels.arrowtypes")}),g("div",{className:"buttonList",children:g(sa,{group:"arrowtypes",options:[{value:oi.sharp,text:k("labels.arrowtype_sharp"),icon:zH,testId:"sharp-arrow"},{value:oi.round,text:k("labels.arrowtype_round"),icon:VH,testId:"round-arrow"},{value:oi.elbow,text:k("labels.arrowtype_elbowed"),icon:HH,testId:"elbow-arrow"}],value:wr(e,i,r=>xe(r)?r.elbowed?oi.elbow:r.roundness?oi.round:oi.sharp:null,r=>xe(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})})]})});const OUe=zw.includes(devicePixelRatio)?devicePixelRatio:1,ea=()=>({showWelcomeScreen:!1,theme:Ce.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:on.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:on.fillStyle,currentItemFontFamily:Yc,currentItemFontSize:Ul,currentItemOpacity:on.opacity,currentItemRoughness:on.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:on.strokeColor,currentItemRoundness:"round",currentItemArrowType:oi.round,currentItemStrokeStyle:on.strokeStyle,currentItemStrokeWidth:on.strokeWidth,currentItemTextAlign:Km,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:on.locked,fromSelection:!1,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:OUe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:yb,gridStep:gF,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Af.generalStats|Af.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Be.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:null,lockedMultiSelections:{},activeLockedId:null}),PUe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1},lockedMultiSelections:{browser:!0,export:!0,server:!0},activeLockedId:{browser:!1,export:!1,server:!1}}),U_=(e,t)=>{const n={};for(const i of Object.keys(e)){const r=PUe[i];if(r!=null&&r[t]){const s=e[i];n[i]=s}}return n},i$=e=>U_(e,"browser"),r$=e=>U_(e,"export"),FUe=e=>U_(e,"server"),Io=({activeTool:e})=>e.type==="eraser",Nh=({activeTool:e})=>e.type==="hand",g0=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},s$=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},BUe=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();s$(t,r)},dd=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(L.useEffect(()=>()=>g0().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>BUe(s.currentTarget,g0(),t,n),onPointerLeave:()=>g0().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),o$='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',zUe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',a$='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',HUe=`data:${ve.svg},${encodeURIComponent(`${o$}${a$}</svg>`)}`,VUe=`data:${ve.svg},${encodeURIComponent(`${o$}${zUe}${a$}</svg>`)}`,Eo=e=>{e&&(e.style.cursor="")},It=(e,t)=>{e&&(e.style.cursor=t)};let po,OM;const l$=(e,t)=>{const i=()=>{const r=t===Ce.DARK;po=document.createElement("canvas"),po.theme=t,po.height=20,po.width=20;const s=po.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(po.width/2,po.height/2,5,0,2*Math.PI),s.fillStyle=r?fi.black:fi.white,s.fill(),s.strokeStyle=r?fi.white:fi.black,s.stroke(),OM=po.toDataURL(ve.svg)};(!po||po.theme!==t)&&i(),It(e,`url(${OM}) ${20/2} ${20/2}, auto`)},vo=(e,t)=>{if(e)if(t.activeTool.type==="selection")Eo(e);else if(Nh(t))e.style.cursor=Tt.GRAB;else if(Io(t))l$(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===Ce.LIGHT?HUe:VUe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=Tt.AUTO):e.style.cursor=Tt.CROSSHAIR},Su=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};se({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?W.IMMEDIATELY:W.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(h_,{palette:null,topPicks:oF,label:k("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:r=>n({viewBackgroundColor:r}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const m0=se({name:"clearCanvas",label:"labels.clearCanvas",icon:ad,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var r;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Te(r,{isDeleted:!0})),appState:{...ea(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:W.IMMEDIATELY})}),PM=se({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:HA,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Su({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(t.zoom.value+g5)},t),userToFollow:null},captureUpdate:W.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(He,{type:"button",className:"zoom-in-button zoom-button",icon:HA,title:`${k("buttons.zoomIn")} — ${Q("CtrlOrCmd++")}`,"aria-label":k("buttons.zoomIn"),disabled:t.zoom.value>=Fw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Je.EQUAL||e.code===Je.NUM_ADD)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),FM=se({name:"zoomOut",label:"buttons.zoomOut",icon:VA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Su({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(t.zoom.value-g5)},t),userToFollow:null},captureUpdate:W.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(He,{type:"button",className:"zoom-out-button zoom-button",icon:VA,title:`${k("buttons.zoomOut")} — ${Q("CtrlOrCmd+-")}`,"aria-label":k("buttons.zoomOut"),disabled:t.zoom.value<=Pw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Je.MINUS||e.code===Je.NUM_SUBTRACT)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),BM=se({name:"resetZoom",label:"buttons.resetZoom",icon:vue,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Su({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(1)},t),userToFollow:null},captureUpdate:W.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(dd,{label:k("buttons.resetZoom"),style:{height:"100%"},children:O(He,{type:"button",className:"reset-zoom-button zoom-button",title:k("buttons.resetZoom"),"aria-label":k("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Je.ZERO||e.code===Je.NUM_ZERO)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),$Ue=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Ge(n,.1,1);return Math.min(f,1)},c$=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Ge(r,Pw,Fw);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,E=t.width-h-p,y=t.height-m-U;let v;if(i){const M=c-a,_=u-l;v=Math.min(E/M,y/_)*r}else v=$Ue(e,{width:E,height:y},r);const w=Fa(Ge(ure(v,g5,"floor"),s,o)),S=bH({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:w}});return{appState:{...t,scrollX:S.scrollX,scrollY:S.scrollY,zoom:{value:w}},captureUpdate:W.EVENTUALLY}},K5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=mt(Ot(t));return c$({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};se({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:W9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return K5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Je.TWO&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});se({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:W9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return K5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===Je.THREE&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});se({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:W9,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>K5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===Je.ONE&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});const a6=se({name:"toggleTheme",label:(e,t)=>t.theme===Ce.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Ce.LIGHT?g4:m4,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Ce.LIGHT?Ce.DARK:Ce.LIGHT)},captureUpdate:W.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Je.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});se({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Io(t)?n=Wt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=Wt(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:W.IMMEDIATELY}},keyTest:e=>e.key===H.E});se({name:"toggleLassoTool",label:"toolBar.lasso",icon:f4,trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let r;return t.activeTool.type!=="lasso"?(r=Wt(t,{type:"lasso",fromSelection:!1}),It(i.interactiveCanvas,Tt.CROSSHAIR)):r=Wt(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:W.NEVER}}});const GUe=se({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:NH,viewMode:!1,perform:(e,t,n,i)=>{let r;return Nh(t)?r=Wt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=Wt(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),It(i.interactiveCanvas,Tt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:W.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[H.CTRL_OR_CMD]&&e.key===H.H});se({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=Wt(t,{type:"embeddable"});return vo(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Wt(t,{type:"embeddable"})},captureUpdate:W.EVENTUALLY}}});const Fs=se({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var h;const{interactiveCanvas:r,focusContainer:s,scene:o}=i,{event:a,sceneCoords:l}=n??{},c=o.getNonDeletedElementsMap();if(a&&t.selectedLinearElement){const m=ce.handlePointerUp(a,t.selectedLinearElement,t,i.scene),{startBindingElement:p,endBindingElement:U}=m,E=i.scene.getElement(m.elementId);if(Oa(E)&&zb(E,p,U,i.scene),m!==t.selectedLinearElement){let y=e;return E&&fc(E)&&(y=y.filter(v=>v.id!==E.id)),{elements:y,appState:{selectedLinearElement:{...m,selectedPointsIndices:null},suggestedBindings:[]},captureUpdate:W.IMMEDIATELY}}}if(t.editingLinearElement){const{elementId:m,startBindingElement:p,endBindingElement:U}=t.editingLinearElement,E=ce.getElement(m,c);if(E)return Oa(E)&&zb(E,p,U,o),ln(E)&&!z7(E.points)&&o.mutateElement(E,{polygon:!1}),{elements:E.points.length<2||fc(E)?e.filter(y=>y.id!==E.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:W.IMMEDIATELY}}let u=e;window.document.activeElement instanceof HTMLElement&&s();let d=null;if(t.multiElement)d=t.multiElement;else if(((h=t.newElement)==null?void 0:h.type)==="freedraw"||Oa(t.newElement))d=t.newElement;else if(Object.keys(t.selectedElementIds).length===1){const m=c.get(Object.keys(t.selectedElementIds)[0]);m&&(d=m)}if(d){if(t.multiElement&&d.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:m,lastCommittedPoint:p}=d;(!p||m[m.length-1]!==p)&&o.mutateElement(d,{points:d.points.slice(0,-1)})}if(d&&fc(d)&&(u=u.filter(m=>m.id!==d.id)),Ie(d)||vr(d)){const m=Wo(d.points,t.zoom.value);if(m&&(ln(d)||vr(d))){const p=d.points,U=p[0],E=p.map((y,v)=>v===p.length-1?I(U[0],U[1]):y);ln(d)?o.mutateElement(d,{points:E,polygon:!0}):o.mutateElement(d,{points:E})}if(ln(d)&&!z7(d.points)&&o.mutateElement(d,{polygon:!1}),Oa(d)&&!m&&d.points.length>1&&Vu(t)){const p=l??Ga(ce.getPointAtIndexGlobalCoordinates(d,-1,we(e)));Tae(d,t,p,o)}}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!d)&&Eo(r);let f;return t.activeTool.type==="eraser"?f=Wt(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):f=Wt(t,{type:"selection"}),{elements:u,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&d?t.activeTool:f,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:d&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[d.id]:!0}:t.selectedElementIds,selectedLinearElement:d&&Ie(d)?new ce(d,we(u)):t.selectedLinearElement},captureUpdate:W.IMMEDIATELY}},keyTest:(e,t)=>e.key===H.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===H.ESCAPE||e.key===H.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(He,{type:"button",icon:Aue,title:k("buttons.done"),"aria-label":k("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),b_=({children:e,checked:t,onChange:n,className:i})=>O("div",{className:me("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:_ue}),g("div",{className:"Checkbox-label",children:e})]}),XUe=e=>{const t=e.title||(e.value===Ce.DARK?k("buttons.lightMode"):k("buttons.darkMode"));return g(He,{type:"icon",icon:e.value===Ce.LIGHT?zM.MOON:zM.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Ce.DARK?Ce.LIGHT:Ce.DARK),"data-testid":"toggle-dark-mode"})},zM={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},YUe=e=>{const{id:t}=aa(),[n,i]=L.useState(e.value),r=o=>{e.ignoreFocus||zre(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===H.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return O("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const jUe=4,HM=0,VM=1,WUe=2;function bg(e){let t=e.length;for(;--t>=0;)e[t]=0}const KUe=0,u$=1,ZUe=2,qUe=3,QUe=258,y_=29,gp=256,sm=gp+1+y_,ih=30,E_=19,d$=2*sm+1,Iu=15,_E=16,JUe=7,v_=256,f$=16,h$=17,g$=18,A4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),e2e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),m$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t2e=512,va=new Array((sm+2)*2);bg(va);const p0=new Array(ih*2);bg(p0);const om=new Array(t2e);bg(om);const am=new Array(QUe-qUe+1);bg(am);const w_=new Array(y_);bg(w_);const l6=new Array(ih);bg(l6);function TE(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let p$,U$,b$;function SE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const y$=e=>e<256?om[e]:om[256+(e>>>7)],lm=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},pr=(e,t,n)=>{e.bi_valid>_E-n?(e.bi_buf|=t<<e.bi_valid&65535,lm(e,e.bi_buf),e.bi_buf=t>>_E-e.bi_valid,e.bi_valid+=n-_E):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ko=(e,t,n)=>{pr(e,n[t*2],n[t*2+1])},E$=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},n2e=e=>{e.bi_valid===16?(lm(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},i2e=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=Iu;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<d$;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},v$=(e,t,n)=>{const i=new Array(Iu+1);let r=0,s,o;for(s=1;s<=Iu;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=E$(i[a]++,a))}},r2e=()=>{let e,t,n,i,r;const s=new Array(Iu+1);for(n=0,i=0;i<y_-1;i++)for(w_[i]=n,e=0;e<1<<A4[i];e++)am[n++]=i;for(am[n-1]=i,r=0,i=0;i<16;i++)for(l6[i]=r,e=0;e<1<<_2[i];e++)om[r++]=i;for(r>>=7;i<ih;i++)for(l6[i]=r<<7,e=0;e<1<<_2[i]-7;e++)om[256+r++]=i;for(t=0;t<=Iu;t++)s[t]=0;for(e=0;e<=143;)va[e*2+1]=8,e++,s[8]++;for(;e<=255;)va[e*2+1]=9,e++,s[9]++;for(;e<=279;)va[e*2+1]=7,e++,s[7]++;for(;e<=287;)va[e*2+1]=8,e++,s[8]++;for(v$(va,sm+1,s),e=0;e<ih;e++)p0[e*2+1]=5,p0[e*2]=E$(e,5);p$=new TE(va,A4,gp+1,sm,Iu),U$=new TE(p0,_2,0,ih,Iu),b$=new TE(new Array(0),e2e,0,E_,JUe)},w$=e=>{let t;for(t=0;t<sm;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ih;t++)e.dyn_dtree[t*2]=0;for(t=0;t<E_;t++)e.bl_tree[t*2]=0;e.dyn_ltree[v_*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},_$=e=>{e.bi_valid>8?lm(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},s2e=(e,t,n,i)=>{_$(e),lm(e,n),lm(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},$M=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},IE=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&$M(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!$M(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},GM=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?ko(e,r,t):(o=am[r],ko(e,o+gp+1,t),a=A4[o],a!==0&&(r-=w_[o],pr(e,r,a)),i--,o=y$(i),ko(e,o,n),a=_2[o],a!==0&&(i-=l6[o],pr(e,i,a)));while(s<e.last_lit);ko(e,v_,t)},M4=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=d$,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)IE(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],IE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,IE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],i2e(e,t),v$(n,l,e.bl_count)},XM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[f$*2]++):a<=10?e.bl_tree[h$*2]++:e.bl_tree[g$*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},YM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do ko(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(ko(e,s,e.bl_tree),a--),ko(e,f$,e.bl_tree),pr(e,a-3,2)):a<=10?(ko(e,h$,e.bl_tree),pr(e,a-3,3)):(ko(e,g$,e.bl_tree),pr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},o2e=e=>{let t;for(XM(e,e.dyn_ltree,e.l_desc.max_code),XM(e,e.dyn_dtree,e.d_desc.max_code),M4(e,e.bl_desc),t=E_-1;t>=3&&e.bl_tree[m$[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},a2e=(e,t,n,i)=>{let r;for(pr(e,t-257,5),pr(e,n-1,5),pr(e,i-4,4),r=0;r<i;r++)pr(e,e.bl_tree[m$[r]*2+1],3);YM(e,e.dyn_ltree,t-1),YM(e,e.dyn_dtree,n-1)},l2e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return HM;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return VM;for(n=32;n<gp;n++)if(e.dyn_ltree[n*2]!==0)return VM;return HM};let jM=!1;const c2e=e=>{jM||(r2e(),jM=!0),e.l_desc=new SE(e.dyn_ltree,p$),e.d_desc=new SE(e.dyn_dtree,U$),e.bl_desc=new SE(e.bl_tree,b$),e.bi_buf=0,e.bi_valid=0,w$(e)},T$=(e,t,n,i)=>{pr(e,(KUe<<1)+(i?1:0),3),s2e(e,t,n)},u2e=e=>{pr(e,u$<<1,3),ko(e,v_,va),n2e(e)},d2e=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===WUe&&(e.strm.data_type=l2e(e)),M4(e,e.l_desc),M4(e,e.d_desc),o=o2e(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?T$(e,t,n,i):e.strategy===jUe||s===r?(pr(e,(u$<<1)+(i?1:0),3),GM(e,va,p0)):(pr(e,(ZUe<<1)+(i?1:0),3),a2e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),GM(e,e.dyn_ltree,e.dyn_dtree)),w$(e),i&&_$(e)},f2e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(am[n]+gp+1)*2]++,e.dyn_dtree[y$(t)*2]++),e.last_lit===e.lit_bufsize-1);var h2e=c2e,g2e=T$,m2e=d2e,p2e=f2e,U2e=u2e,b2e={_tr_init:h2e,_tr_stored_block:g2e,_tr_flush_block:m2e,_tr_tally:p2e,_tr_align:U2e};const y2e=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var cm=y2e;const E2e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},v2e=new Uint32Array(E2e()),w2e=(e,t,n,i)=>{const r=v2e,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var si=w2e,fd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_2e,_tr_stored_block:T2e,_tr_flush_block:S2e,_tr_tally:gc,_tr_align:I2e}=b2e,{Z_NO_FLUSH:kd,Z_PARTIAL_FLUSH:x2e,Z_FULL_FLUSH:C2e,Z_FINISH:mc,Z_BLOCK:WM,Z_OK:Lo,Z_STREAM_END:KM,Z_STREAM_ERROR:Ts,Z_DATA_ERROR:A2e,Z_BUF_ERROR:xE,Z_DEFAULT_COMPRESSION:M2e,Z_FILTERED:R2e,Z_HUFFMAN_ONLY:IU,Z_RLE:k2e,Z_FIXED:L2e,Z_DEFAULT_STRATEGY:D2e,Z_UNKNOWN:N2e,Z_DEFLATED:q5}=Z5,O2e=9,P2e=15,F2e=8,B2e=29,z2e=256,R4=z2e+1+B2e,H2e=30,V2e=19,$2e=2*R4+1,G2e=15,rt=3,Ql=258,to=Ql+rt+1,X2e=32,Q5=42,k4=69,T2=73,S2=91,I2=103,xu=113,C1=666,Qn=1,mp=2,hd=3,yg=4,Y2e=3,Jl=(e,t)=>(e.msg=fd[t],t),ZM=e=>(e<<1)-(e>4?9:0),jl=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let j2e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,pc=j2e;const Ll=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Si=(e,t)=>{S2e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ll(e.strm)},bt=(e,t)=>{e.pending_buf[e.pending++]=t},i1=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},W2e=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=cm(e.adler,t,r,n):e.state.wrap===2&&(e.adler=si(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},S$=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-to?e.strstart-(e.w_size-to):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Ql;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=Ql-(f-i),i=f-Ql,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},gd=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-to)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=W2e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=rt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=pc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=pc(e,e.ins_h,e.window[o+rt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<rt)););}while(e.lookahead<to&&e.strm.avail_in!==0)},K2e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(gd(e),e.lookahead===0&&t===kd)return Qn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Si(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-to&&(Si(e,!1),e.strm.avail_out===0))return Qn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?hd:yg):(e.strstart>e.block_start&&(Si(e,!1),e.strm.avail_out===0),Qn)},CE=(e,t)=>{let n,i;for(;;){if(e.lookahead<to){if(gd(e),e.lookahead<to&&t===kd)return Qn;if(e.lookahead===0)break}if(n=0,e.lookahead>=rt&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+rt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-to&&(e.match_length=S$(e,n)),e.match_length>=rt)if(i=gc(e,e.strstart-e.match_start,e.match_length-rt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=rt){e.match_length--;do e.strstart++,e.ins_h=pc(e,e.ins_h,e.window[e.strstart+rt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=pc(e,e.ins_h,e.window[e.strstart+1]);else i=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Si(e,!1),e.strm.avail_out===0))return Qn}return e.insert=e.strstart<rt-1?e.strstart:rt-1,t===mc?(Si(e,!0),e.strm.avail_out===0?hd:yg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Qn:mp},Zd=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<to){if(gd(e),e.lookahead<to&&t===kd)return Qn;if(e.lookahead===0)break}if(n=0,e.lookahead>=rt&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+rt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=rt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-to&&(e.match_length=S$(e,n),e.match_length<=5&&(e.strategy===R2e||e.match_length===rt&&e.strstart-e.match_start>4096)&&(e.match_length=rt-1)),e.prev_length>=rt&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-rt,i=gc(e,e.strstart-1-e.prev_match,e.prev_length-rt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+rt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=rt-1,e.strstart++,i&&(Si(e,!1),e.strm.avail_out===0))return Qn}else if(e.match_available){if(i=gc(e,0,e.window[e.strstart-1]),i&&Si(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Qn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=gc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<rt-1?e.strstart:rt-1,t===mc?(Si(e,!0),e.strm.avail_out===0?hd:yg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Qn:mp},Z2e=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=Ql){if(gd(e),e.lookahead<=Ql&&t===kd)return Qn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=rt&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+Ql;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=Ql-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=rt?(n=gc(e,1,e.match_length-rt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Si(e,!1),e.strm.avail_out===0))return Qn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?hd:yg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Qn:mp},q2e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(gd(e),e.lookahead===0)){if(t===kd)return Qn;break}if(e.match_length=0,n=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Si(e,!1),e.strm.avail_out===0))return Qn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?hd:yg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Qn:mp};function Uo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const A1=[new Uo(0,0,0,0,K2e),new Uo(4,4,8,4,CE),new Uo(4,5,16,8,CE),new Uo(4,6,32,32,CE),new Uo(4,4,16,16,Zd),new Uo(8,16,32,32,Zd),new Uo(8,16,128,128,Zd),new Uo(8,32,128,256,Zd),new Uo(32,128,258,1024,Zd),new Uo(32,258,258,4096,Zd)],Q2e=e=>{e.window_size=2*e.w_size,jl(e.head),e.max_lazy_match=A1[e.level].max_lazy,e.good_match=A1[e.level].good_length,e.nice_match=A1[e.level].nice_length,e.max_chain_length=A1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=rt-1,e.match_available=0,e.ins_h=0};function J2e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array($2e*2),this.dyn_dtree=new Uint16Array((2*H2e+1)*2),this.bl_tree=new Uint16Array((2*V2e+1)*2),jl(this.dyn_ltree),jl(this.dyn_dtree),jl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(G2e+1),this.heap=new Uint16Array(2*R4+1),jl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*R4+1),jl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const I$=e=>{if(!e||!e.state)return Jl(e,Ts);e.total_in=e.total_out=0,e.data_type=N2e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Q5:xu,e.adler=t.wrap===2?0:1,t.last_flush=kd,_2e(t),Lo},x$=e=>{const t=I$(e);return t===Lo&&Q2e(e.state),t},ebe=(e,t)=>!e||!e.state||e.state.wrap!==2?Ts:(e.state.gzhead=t,Lo),C$=(e,t,n,i,r,s)=>{if(!e)return Ts;let o=1;if(t===M2e&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>O2e||n!==q5||i<8||i>15||t<0||t>9||s<0||s>L2e)return Jl(e,Ts);i===8&&(i=9);const a=new J2e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+rt-1)/rt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,x$(e)},tbe=(e,t)=>C$(e,t,q5,P2e,F2e,D2e),nbe=(e,t)=>{let n,i;if(!e||!e.state||t>WM||t<0)return e?Jl(e,Ts):Ts;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===C1&&t!==mc)return Jl(e,e.avail_out===0?xE:Ts);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===Q5)if(r.wrap===2)e.adler=0,bt(r,31),bt(r,139),bt(r,8),r.gzhead?(bt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),bt(r,r.gzhead.time&255),bt(r,r.gzhead.time>>8&255),bt(r,r.gzhead.time>>16&255),bt(r,r.gzhead.time>>24&255),bt(r,r.level===9?2:r.strategy>=IU||r.level<2?4:0),bt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(bt(r,r.gzhead.extra.length&255),bt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=si(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=k4):(bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,0),bt(r,r.level===9?2:r.strategy>=IU||r.level<2?4:0),bt(r,Y2e),r.status=xu);else{let o=q5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=IU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=X2e),o+=31-o%31,r.status=xu,i1(r,o),r.strstart!==0&&(i1(r,e.adler>>>16),i1(r,e.adler&65535)),e.adler=1}if(r.status===k4)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Ll(e),n=r.pending,r.pending===r.pending_buf_size));)bt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=T2)}else r.status=T2;if(r.status===T2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Ll(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=S2)}else r.status=S2;if(r.status===S2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Ll(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,bt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=I2)}else r.status=I2;if(r.status===I2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ll(e),r.pending+2<=r.pending_buf_size&&(bt(r,e.adler&255),bt(r,e.adler>>8&255),e.adler=0,r.status=xu)):r.status=xu),r.pending!==0){if(Ll(e),e.avail_out===0)return r.last_flush=-1,Lo}else if(e.avail_in===0&&ZM(t)<=ZM(s)&&t!==mc)return Jl(e,xE);if(r.status===C1&&e.avail_in!==0)return Jl(e,xE);if(e.avail_in!==0||r.lookahead!==0||t!==kd&&r.status!==C1){let o=r.strategy===IU?q2e(r,t):r.strategy===k2e?Z2e(r,t):A1[r.level].func(r,t);if((o===hd||o===yg)&&(r.status=C1),o===Qn||o===hd)return e.avail_out===0&&(r.last_flush=-1),Lo;if(o===mp&&(t===x2e?I2e(r):t!==WM&&(T2e(r,0,0,!1),t===C2e&&(jl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ll(e),e.avail_out===0))return r.last_flush=-1,Lo}return t!==mc?Lo:r.wrap<=0?KM:(r.wrap===2?(bt(r,e.adler&255),bt(r,e.adler>>8&255),bt(r,e.adler>>16&255),bt(r,e.adler>>24&255),bt(r,e.total_in&255),bt(r,e.total_in>>8&255),bt(r,e.total_in>>16&255),bt(r,e.total_in>>24&255)):(i1(r,e.adler>>>16),i1(r,e.adler&65535)),Ll(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Lo:KM)},ibe=e=>{if(!e||!e.state)return Ts;const t=e.state.status;return t!==Q5&&t!==k4&&t!==T2&&t!==S2&&t!==I2&&t!==xu&&t!==C1?Jl(e,Ts):(e.state=null,t===xu?Jl(e,A2e):Lo)},rbe=(e,t)=>{let n=t.length;if(!e||!e.state)return Ts;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==Q5||i.lookahead)return Ts;if(r===1&&(e.adler=cm(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(jl(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,gd(i);i.lookahead>=rt;){let l=i.strstart,c=i.lookahead-(rt-1);do i.ins_h=pc(i,i.ins_h,i.window[l+rt-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=rt-1,gd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=rt-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,Lo};var sbe=tbe,obe=C$,abe=x$,lbe=I$,cbe=ebe,ube=nbe,dbe=ibe,fbe=rbe,hbe="pako deflate (from Nodeca project)",U0={deflateInit:sbe,deflateInit2:obe,deflateReset:abe,deflateResetKeep:lbe,deflateSetHeader:cbe,deflate:ube,deflateEnd:dbe,deflateSetDictionary:fbe,deflateInfo:hbe};const gbe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var mbe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)gbe(n,i)&&(e[i]=n[i])}}return e},pbe=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},J5={assign:mbe,flattenChunks:pbe};let A$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{A$=!1}const um=new Uint8Array(256);for(let e=0;e<256;e++)um[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;um[254]=um[254]=1;var Ube=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const bbe=(e,t)=>{if(t<65534&&e.subarray&&A$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var ybe=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=um[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return bbe(s,i)},Ebe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+um[e[n]]>t?n:t},dm={string2buf:Ube,buf2string:ybe,utf8border:Ebe};function vbe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var M$=vbe;const R$=Object.prototype.toString,{Z_NO_FLUSH:wbe,Z_SYNC_FLUSH:_be,Z_FULL_FLUSH:Tbe,Z_FINISH:Sbe,Z_OK:c6,Z_STREAM_END:Ibe,Z_DEFAULT_COMPRESSION:xbe,Z_DEFAULT_STRATEGY:Cbe,Z_DEFLATED:Abe}=Z5;function ey(e){this.options=J5.assign({level:xbe,method:Abe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cbe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M$,this.strm.avail_out=0;let n=U0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c6)throw new Error(fd[n]);if(t.header&&U0.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=dm.string2buf(t.dictionary):R$.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=U0.deflateSetDictionary(this.strm,i),n!==c6)throw new Error(fd[n]);this._dict_set=!0}}ey.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Sbe:wbe,typeof e=="string"?n.input=dm.string2buf(e):R$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===_be||s===Tbe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=U0.deflate(n,s),r===Ibe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=U0.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c6;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};ey.prototype.onData=function(e){this.chunks.push(e)};ey.prototype.onEnd=function(e){e===c6&&(this.result=J5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Mbe(e,t){const n=new ey(t);if(n.push(e,!0),n.err)throw n.msg||fd[n.err];return n.result}var Rbe=Mbe,kbe={deflate:Rbe};const xU=30,Lbe=12;var Dbe=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,U,E,y,v,w,S,M,_,T,C,x;const R=t.state;i=t.next_in,C=t.input,r=i+(t.avail_in-5),s=t.next_out,x=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,d=R.wnext,f=R.window,h=R.hold,m=R.bits,p=R.lencode,U=R.distcode,E=(1<<R.lenbits)-1,y=(1<<R.distbits)-1;e:do{m<15&&(h+=C[i++]<<m,m+=8,h+=C[i++]<<m,m+=8),v=p[h&E];t:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w===0)x[s++]=v&65535;else if(w&16){S=v&65535,w&=15,w&&(m<w&&(h+=C[i++]<<m,m+=8),S+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=C[i++]<<m,m+=8,h+=C[i++]<<m,m+=8),v=U[h&y];n:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w&16){if(M=v&65535,w&=15,m<w&&(h+=C[i++]<<m,m+=8,m<w&&(h+=C[i++]<<m,m+=8)),M+=h&(1<<w)-1,M>l){t.msg="invalid distance too far back",R.mode=xU;break e}if(h>>>=w,m-=w,w=s-o,M>w){if(w=M-w,w>u&&R.sane){t.msg="invalid distance too far back",R.mode=xU;break e}if(_=0,T=f,d===0){if(_+=c-w,w<S){S-=w;do x[s++]=f[_++];while(--w);_=s-M,T=x}}else if(d<w){if(_+=c+d-w,w-=d,w<S){S-=w;do x[s++]=f[_++];while(--w);if(_=0,d<S){w=d,S-=w;do x[s++]=f[_++];while(--w);_=s-M,T=x}}}else if(_+=d-w,w<S){S-=w;do x[s++]=f[_++];while(--w);_=s-M,T=x}for(;S>2;)x[s++]=T[_++],x[s++]=T[_++],x[s++]=T[_++],S-=3;S&&(x[s++]=T[_++],S>1&&(x[s++]=T[_++]))}else{_=s-M;do x[s++]=x[_++],x[s++]=x[_++],x[s++]=x[_++],S-=3;while(S>2);S&&(x[s++]=x[_++],S>1&&(x[s++]=x[_++]))}}else if(w&64){t.msg="invalid distance code",R.mode=xU;break e}else{v=U[(v&65535)+(h&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){R.mode=Lbe;break e}else{t.msg="invalid literal/length code",R.mode=xU;break e}else{v=p[(v&65535)+(h&(1<<w)-1)];continue t}break}}while(i<r&&s<a);S=m>>3,i-=S,m-=S<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),R.hold=h,R.bits=m};const qd=15,qM=852,QM=592,JM=0,AE=1,eR=2,Nbe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Obe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Pbe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Fbe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Bbe=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,U=0,E=0,y=0,v,w,S,M,_,T=null,C=0,x;const R=new Uint16Array(qd+1),P=new Uint16Array(qd+1);let D=null,$=0,z,V,G;for(c=0;c<=qd;c++)R[c]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=l,f=qd;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),U=1,c=1;c<=qd;c++)if(U<<=1,U-=R[c],U<0)return-1;if(U>0&&(e===JM||f!==1))return-1;for(P[1]=0,c=1;c<qd;c++)P[c+1]=P[c]+R[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[P[t[n+u]]++]=u);if(e===JM?(T=D=o,x=19):e===AE?(T=Nbe,C-=257,D=Obe,$-=257,x=256):(T=Pbe,D=Fbe,x=-1),y=0,u=0,c=d,_=s,m=h,p=0,S=-1,E=1<<h,M=E-1,e===AE&&E>qM||e===eR&&E>QM)return 1;for(;;){z=c-p,o[u]<x?(V=0,G=o[u]):o[u]>x?(V=D[$+o[u]],G=T[C+o[u]]):(V=96,G=0),v=1<<c-p,w=1<<m,d=w;do w-=v,r[_+(y>>p)+w]=z<<24|V<<16|G|0;while(w!==0);for(v=1<<c-1;y&v;)v>>=1;if(v!==0?(y&=v-1,y+=v):y=0,u++,--R[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(y&M)!==S){for(p===0&&(p=h),_+=d,m=c-p,U=1<<m;m+p<f&&(U-=R[m+p],!(U<=0));)m++,U<<=1;if(E+=1<<m,e===AE&&E>qM||e===eR&&E>QM)return 1;S=y&M,r[S]=h<<24|m<<16|_-s|0}}return y!==0&&(r[_+y]=c-p<<24|64<<16|0),a.bits=h,0};var b0=Bbe;const zbe=0,k$=1,L$=2,{Z_FINISH:tR,Z_BLOCK:Hbe,Z_TREES:CU,Z_OK:md,Z_STREAM_END:Vbe,Z_NEED_DICT:$be,Z_STREAM_ERROR:ks,Z_DATA_ERROR:D$,Z_MEM_ERROR:N$,Z_BUF_ERROR:Gbe,Z_DEFLATED:nR}=Z5,O$=1,iR=2,rR=3,sR=4,oR=5,aR=6,lR=7,cR=8,uR=9,dR=10,u6=11,pa=12,ME=13,fR=14,RE=15,hR=16,gR=17,mR=18,pR=19,AU=20,MU=21,UR=22,bR=23,yR=24,ER=25,vR=26,kE=27,wR=28,_R=29,qt=30,P$=31,Xbe=32,Ybe=852,jbe=592,Wbe=15,Kbe=Wbe,TR=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Zbe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const F$=e=>{if(!e||!e.state)return ks;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=O$,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ybe),t.distcode=t.distdyn=new Int32Array(jbe),t.sane=1,t.back=-1,md},B$=e=>{if(!e||!e.state)return ks;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,F$(e)},z$=(e,t)=>{let n;if(!e||!e.state)return ks;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?ks:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,B$(e))},H$=(e,t)=>{if(!e)return ks;const n=new Zbe;e.state=n,n.window=null;const i=z$(e,t);return i!==md&&(e.state=null),i},qbe=e=>H$(e,Kbe);let SR=!0,LE,DE;const Qbe=e=>{if(SR){LE=new Int32Array(512),DE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(b0(k$,e.lens,0,288,LE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;b0(L$,e.lens,0,32,DE,0,e.work,{bits:5}),SR=!1}e.lencode=LE,e.lenbits=9,e.distcode=DE,e.distbits=5},V$=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},Jbe=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,U=0,E,y,v,w,S,M,_,T;const C=new Uint8Array(4);let x,R;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ks;n=e.state,n.mode===pa&&(n.mode=ME),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=md;e:for(;;)switch(n.mode){case O$:if(n.wrap===0){n.mode=ME;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,C[0]=c&255,C[1]=c>>>8&255,n.check=si(n.check,C,2,0),c=0,u=0,n.mode=iR;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=qt;break}if((c&15)!==nR){e.msg="unknown compression method",n.mode=qt;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=qt;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?dR:pa,c=0,u=0;break;case iR:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==nR){e.msg="unknown compression method",n.mode=qt;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=qt;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=si(n.check,C,2,0)),c=0,u=0,n.mode=rR;case rR:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=si(n.check,C,4,0)),c=0,u=0,n.mode=sR;case sR:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=si(n.check,C,2,0)),c=0,u=0,n.mode=oR;case oR:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=si(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=aR;case aR:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),_)),n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=lR;case lR:if(n.flags&2048){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=cR;case cR:if(n.flags&4096){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.comment=null);n.mode=uR;case uR:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=qt;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pa;break;case dR:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=TR(c),c=0,u=0,n.mode=u6;case u6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,$be;e.adler=n.check=1,n.mode=pa;case pa:if(t===Hbe||t===CU)break e;case ME:if(n.last){c>>>=u&7,u-=u&7,n.mode=kE;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=fR;break;case 1:if(Qbe(n),n.mode=AU,t===CU){c>>>=2,u-=2;break e}break;case 2:n.mode=gR;break;case 3:e.msg="invalid block type",n.mode=qt}c>>>=2,u-=2;break;case fR:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=qt;break}if(n.length=c&65535,c=0,u=0,n.mode=RE,t===CU)break e;case RE:n.mode=hR;case hR:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=pa;break;case gR:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=qt;break}n.have=0,n.mode=mR;case mR:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[P[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},T=b0(zbe,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,T){e.msg="invalid code lengths set",n.mode=qt;break}n.have=0,n.mode=pR;case pR:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[c&(1<<n.lenbits)-1],E=U>>>24,y=U>>>16&255,v=U&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(v<16)c>>>=E,u-=E,n.lens[n.have++]=v;else{if(v===16){for(R=E+2;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=E,u-=E,n.have===0){e.msg="invalid bit length repeat",n.mode=qt;break}_=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(R=E+3;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,_=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=E+7;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=E,u-=E,_=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=qt;break}for(;h--;)n.lens[n.have++]=_}}if(n.mode===qt)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=qt;break}if(n.lenbits=9,x={bits:n.lenbits},T=b0(k$,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,T){e.msg="invalid literal/lengths set",n.mode=qt;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},T=b0(L$,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,T){e.msg="invalid distances set",n.mode=qt;break}if(n.mode=AU,t===CU)break e;case AU:n.mode=MU;case MU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,Dbe(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===pa&&(n.back=-1);break}for(n.back=0;U=n.lencode[c&(1<<n.lenbits)-1],E=U>>>24,y=U>>>16&255,v=U&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&!(y&240)){for(w=E,S=y,M=v;U=n.lencode[M+((c&(1<<w+S)-1)>>w)],E=U>>>24,y=U>>>16&255,v=U&65535,!(w+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=E,u-=E,n.back+=E,n.length=v,y===0){n.mode=vR;break}if(y&32){n.back=-1,n.mode=pa;break}if(y&64){e.msg="invalid literal/length code",n.mode=qt;break}n.extra=y&15,n.mode=UR;case UR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=bR;case bR:for(;U=n.distcode[c&(1<<n.distbits)-1],E=U>>>24,y=U>>>16&255,v=U&65535,!(E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(y&240)){for(w=E,S=y,M=v;U=n.distcode[M+((c&(1<<w+S)-1)>>w)],E=U>>>24,y=U>>>16&255,v=U&65535,!(w+E<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=E,u-=E,n.back+=E,y&64){e.msg="invalid distance code",n.mode=qt;break}n.offset=v,n.extra=y&15,n.mode=yR;case yR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=qt;break}n.mode=ER;case ER:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=qt;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=MU);break;case vR:if(l===0)break e;r[o++]=n.length,l--,n.mode=MU;break;case kE:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?si(n.check,r,f,o-f):cm(n.check,r,f,o-f)),f=l,(n.flags?c:TR(c))!==n.check){e.msg="incorrect data check",n.mode=qt;break}c=0,u=0}n.mode=wR;case wR:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=qt;break}c=0,u=0}n.mode=_R;case _R:T=Vbe;break e;case qt:T=D$;break e;case P$:return N$;case Xbe:default:return ks}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<qt&&(n.mode<kE||t!==tR))&&V$(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?si(n.check,r,f,e.next_out-f):cm(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pa?128:0)+(n.mode===AU||n.mode===RE?256:0),(d===0&&f===0||t===tR)&&T===md&&(T=Gbe),T},e6e=e=>{if(!e||!e.state)return ks;let t=e.state;return t.window&&(t.window=null),e.state=null,md},t6e=(e,t)=>{if(!e||!e.state)return ks;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,md):ks},n6e=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==u6)?ks:i.mode===u6&&(r=1,r=cm(r,t,n,0),r!==i.check)?D$:(s=V$(e,t,n,n),s?(i.mode=P$,N$):(i.havedict=1,md))};var i6e=B$,r6e=z$,s6e=F$,o6e=qbe,a6e=H$,l6e=Jbe,c6e=e6e,u6e=t6e,d6e=n6e,f6e="pako inflate (from Nodeca project)",wa={inflateReset:i6e,inflateReset2:r6e,inflateResetKeep:s6e,inflateInit:o6e,inflateInit2:a6e,inflate:l6e,inflateEnd:c6e,inflateGetHeader:u6e,inflateSetDictionary:d6e,inflateInfo:f6e};function h6e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var g6e=h6e;const $$=Object.prototype.toString,{Z_NO_FLUSH:m6e,Z_FINISH:p6e,Z_OK:fm,Z_STREAM_END:NE,Z_NEED_DICT:OE,Z_STREAM_ERROR:U6e,Z_DATA_ERROR:IR,Z_MEM_ERROR:b6e}=Z5;function ty(e){this.options=J5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M$,this.strm.avail_out=0;let n=wa.inflateInit2(this.strm,t.windowBits);if(n!==fm)throw new Error(fd[n]);if(this.header=new g6e,wa.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=dm.string2buf(t.dictionary):$$.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=wa.inflateSetDictionary(this.strm,t.dictionary),n!==fm)))throw new Error(fd[n])}ty.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?p6e:m6e,$$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=wa.inflate(n,o),s===OE&&r&&(s=wa.inflateSetDictionary(n,r),s===fm?s=wa.inflate(n,o):s===IR&&(s=OE));n.avail_in>0&&s===NE&&n.state.wrap>0&&e[n.next_in]!==0;)wa.inflateReset(n),s=wa.inflate(n,o);switch(s){case U6e:case IR:case OE:case b6e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===NE))if(this.options.to==="string"){let l=dm.utf8border(n.output,n.next_out),c=n.next_out-l,u=dm.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===fm&&a===0)){if(s===NE)return s=wa.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};ty.prototype.onData=function(e){this.chunks.push(e)};ty.prototype.onEnd=function(e){e===fm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=J5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function y6e(e,t){const n=new ty(t);if(n.push(e),n.err)throw n.msg||fd[n.err];return n.result}var E6e=y6e,v6e={inflate:E6e};const{deflate:w6e}=kbe,{inflate:_6e}=v6e;var G$=w6e,X$=_6e;const x2=12,T6e=()=>{const e=new Uint8Array(x2);return window.crypto.getRandomValues(e)},__=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:mF},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},Y$=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:mF},!1,[t]),ny=async(e,t)=>{const n=typeof e=="string"?await Y$(e,"encrypt"):e,i=T6e(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await ec(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},hm=async(e,t,n)=>{const i=await Y$(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},d6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},j$=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},W$=e=>new TextDecoder("utf-8").decode(j$(e)),K$=(e,t=!1)=>t?window.btoa(e):window.btoa(d6(e)),Z$=(e,t=!1)=>t?window.atob(e):W$(window.atob(e)),xR=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),q$=({text:e,compress:t})=>{let n;if(t!==!1)try{n=d6(G$(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||d6(e)}},Q$=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:W$(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?X$(new Uint8Array(j$(t)),{to:"string"}):t},J$=1,C2=4,rh=4,PE={1:8,2:16,4:32};function f6(e,t,n,i){if(i!=null){if(i>Math.pow(2,PE[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${PE[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${PE[t]}`;return new DataView(e.buffer)[r](n)}const CR=(...e)=>{const t=new Uint8Array(C2+rh*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;f6(t,C2,n,J$),n+=C2;for(const i of e)f6(t,rh,n,i.byteLength),n+=rh,t.set(i,n),n+=i.byteLength;return t},AR=e=>{const t=[];let n=0;const i=f6(e,rh,n);if(i>J$)throw new Error(`invalid version ${i}`);for(n+=C2;;){const r=f6(e,rh,n);if(n+=rh,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},S6e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await ny(t,G$(e));return{iv:i,buffer:new Uint8Array(n)}},eG=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await S6e(CR(r,e),t.encryptionKey);return CR(i,s,o)},I6e=async(e,t,n,i)=>(t=new Uint8Array(await hm(e,t,n)),i?X$(t):t),tG=async(e,t)=>{const[n,i,r]=AR(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=AR(await I6e(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},Ld=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),x6e=Ld?pe(()=>import("./file-open-002ab408-DIuFHtCF.js"),__vite__mapDeps([]),import.meta.url):pe(()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]),import.meta.url);async function C6e(...e){return(await x6e).default(...e)}Ld?pe(()=>import("./directory-open-4ed118d0-BzWybGaI.js"),__vite__mapDeps([]),import.meta.url):pe(()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]),import.meta.url);const A6e=Ld?pe(()=>import("./file-save-745eba88-Bb9F9Kg7.js"),__vite__mapDeps([]),import.meta.url):pe(()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]),import.meta.url);async function M6e(...e){return(await A6e).default(...e)}const MR=500,T_=e=>{var i,r;const t=(i=e.extensions)==null?void 0:i.reduce((s,o)=>(s.push(ve[o]),s),[]),n=(r=e.extensions)==null?void 0:r.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return C6e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{const l=el(o,MR),c=()=>{u(),document.addEventListener(ee.KEYUP,l),document.addEventListener(ee.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener(ee.FOCUS,c)});const d=window.setInterval(()=>{u()},MR);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(ee.FOCUS,c),document.removeEventListener(ee.KEYUP,l),document.removeEventListener(ee.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new kh))}}})},h6=(e,t)=>M6e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),R6e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},Eg=(e,t,n,i)=>{const r={type:vs.excalidraw,version:m5.excalidraw,source:Ow(),elements:i==="local"?vz(e):Vce(e),appState:i==="local"?r$(t):FUe(t),files:i==="local"?R6e(e,n):void 0};return JSON.stringify(r,null,2)},nG=async(e,t,n,i=t.name||bF)=>{const r=Eg(e,t,n,"local"),s=new Blob([r],{type:ve.excalidraw});return{fileHandle:await h6(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:C_(t.fileHandle)?null:t.fileHandle})}},k6e=async(e,t)=>{const n=await T_({description:"Excalidraw files"});return A_(await M_(n),e,t,n.handle)},L6e=e=>(e==null?void 0:e.type)===vs.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),iG=e=>typeof e=="object"&&e&&e.type===vs.excalidrawLibrary&&(e.version===1||e.version===2),rG=e=>{const t={type:vs.excalidrawLibrary,version:m5.excalidrawLibrary,source:Ow(),libraryItems:e};return JSON.stringify(t,null,2)},D6e=async e=>{const t=rG(e);await h6(new Blob([t],{type:ve.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},N6e=12,sG=document.createElement("img");sG.src=`data:${ve.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const oG=document.createElement("img");oG.src=`data:${ve.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const S_=([e,t,n,i],r,s)=>{const o=N6e,a=s.zoom.value>1?s.zoom.value:1,l=o/a,c=o/a,u=o/a,d=(e+n)/2,f=(t+i)/2,h=(o-8)/(2*a),m=4/a,p=n+m-h,U=t-m-u+h,[E,y]=q(I(p+l/2,U+c/2),I(d,f),r);return[E-l/2,y-c/2,l,c]},aG=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=Oe(e,t),[u,d,f,h]=S_([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},FE=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&_5(I(i,r),e,t)?!0:aG(e,t,n,I(i,r)),iy=(e,t,n,i,r,s=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),s&&e.fill(),r&&e.stroke()},ry=(e,t)=>[e.width/t,e.height/t],sy=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===Ce.DARK&&(a.filter=Bw),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a};function Il(e,t,n=.5){const i=bre(t,n);if(i)for(let r=0;r<i.length-1;r++){const[[s,o],[a,l]]=i[r];e.quadraticCurveTo(s,o,a,l)}}function xl(e,t,n=.5){const i=Gw(t,n);if(i)for(let r=0;r<i.length;r++){const[[s,o],[a,l],[c,u]]=i[r];e.bezierCurveTo(s,o,a,l,c,u)}}const O6e=(e,t,n,i)=>{const[r,s]=q(I(t.x,t.y),ni(t,n),t.angle);e.save(),e.translate(r,s),e.rotate(t.angle);let o=nr(Math.min(t.width,t.height),t);o===0&&(o=.01),e.beginPath();{const a=Tl(I(0,0+o),I(0,0),I(0+o,0),i),l=Tl(I(t.width-o,0),I(t.width,0),I(t.width,o),i),c=Tl(I(t.width,t.height-o),I(t.width,t.height),I(t.width-o,t.height),i),u=Tl(I(o,t.height),I(0,t.height),I(0,t.height-o),i);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(l[0][0],l[0][1]),Il(e,l),e.lineTo(c[0][0],c[0][1]),Il(e,c),e.lineTo(u[0][0],u[0][1]),Il(e,u),e.lineTo(a[0][0],a[0][1]),Il(e,a)}{const a=Tl(I(0+o,0),I(0,0),I(0,0+o),-5),l=Tl(I(t.width,o),I(t.width,0),I(t.width-o,0),-5),c=Tl(I(t.width-o,t.height),I(t.width,t.height),I(t.width,t.height-o),-5),u=Tl(I(0,t.height-o),I(0,t.height),I(o,t.height),-5);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(u[0][0],u[0][1]),Il(e,u),e.lineTo(c[0][0],c[0][1]),Il(e,c),e.lineTo(l[0][0],l[0][1]),Il(e,l),e.lineTo(a[0][0],a[0][1]),Il(e,a)}e.closePath(),e.fill(),e.restore()},P6e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},oy=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},F6e=(e,t,n,i)=>{const[r,s]=q(I(n.x,n.y),ni(n,i),n.angle);e.save(),e.translate(r,s),e.rotate(n.angle);{e.beginPath();const[o,a,l,c,u,d,f,h]=Wb(n),m=n.roundness?nr(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?nr(Math.abs(c-a),n):(c-a)*.01,U=yo(On(I(o-m,a+p),I(o,a),I(o,a),I(o+m,a+p)),t),E=yo(On(I(l-m,c-p),I(l,c),I(l,c),I(l-m,c+p)),t),y=yo(On(I(u+m,d-p),I(u,d),I(u,d),I(u-m,d-p)),t),v=yo(On(I(f+m,h+p),I(f,h),I(f,h),I(f+m,h-p)),t);e.moveTo(U[U.length-1][0],U[U.length-1][1]),e.lineTo(E[1][0],E[1][1]),xl(e,E),e.lineTo(y[1][0],y[1][1]),xl(e,y),e.lineTo(v[1][0],v[1][1]),xl(e,v),e.lineTo(U[1][0],U[1][1]),xl(e,U)}{const[o,a,l,c,u,d,f,h]=Wb(n),m=n.roundness?nr(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?nr(Math.abs(c-a),n):(c-a)*.01,U=yo(On(I(o+m,a+p),I(o,a),I(o,a),I(o-m,a+p)),-5),E=yo(On(I(l-m,c+p),I(l,c),I(l,c),I(l-m,c-p)),-5),y=yo(On(I(u-m,d-p),I(u,d),I(u,d),I(u+m,d-p)),-5),v=yo(On(I(f+m,h-p),I(f,h),I(f,h),I(f+m,h+p)),-5);e.moveTo(U[U.length-1][0],U[U.length-1][1]),e.lineTo(v[1][0],v[1][1]),xl(e,v),e.lineTo(y[1][0],y[1][1]),xl(e,y),e.lineTo(E[1][0],E[1][1]),xl(e,E),e.lineTo(U[1][0],U[1][1]),xl(e,U)}e.closePath(),e.fill(),e.restore()},RU={Bold:"#dddddd",Regular:"#e5e5e5"},B6e=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?RU.Bold:RU.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?RU.Bold:RU.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},RR=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Dt.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},kR={regularLink:null,elementLink:null},LR=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=Oe(e,i),[l,c,u,d]=S_([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=Qf(e.link)?"elementLink":"regularLink";let p=kR[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,kR[m]=p;const U=p.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle=n.viewBackgroundColor||"#fff",U.fillRect(0,0,u,d),m==="elementLink"?U.drawImage(oG,0,0,u,d):U.drawImage(sG,0,0,u,d),U.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},lG=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=ry(e,s),f=sy({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&B6e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(kc(U,o.frameToHighlight,n)||U.groupIds.find(E=>h.has(E)))&&U.groupIds.forEach(E=>h.add(E))});const m=new Map;r.filter(U=>!fs(U)).forEach(U=>{var E;try{const y=U.frameId||((E=o.frameToHighlight)==null?void 0:E.id);if(ue(U)&&U.containerId&&n.has(U.containerId))return;if(f.save(),y&&o.frameRendering.enabled&&o.frameRendering.clip){const w=$7(U,n,o);w&&ZC(U,w,o,n,m)&&RR(w,f,a,o),fu(U,n,i,t,f,a,o)}else fu(U,n,i,t,f,a,o);const v=ke(U,n);v&&fu(v,n,i,t,f,a,o),f.restore(),c||LR(U,f,o,n)}catch(y){console.error(y,U.id,U.x,U.y,U.width,U.height)}}),r.filter(U=>fs(U)).forEach(U=>{var E;try{const y=()=>{if(fu(U,n,i,t,f,a,o),fs(U)&&(c||fr(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){const w=sz(U);fu(w,n,i,t,f,a,o)}c||LR(U,f,o,n)};if((U.frameId||((E=o.frameToHighlight)==null?void 0:E.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const w=$7(U,n,o);w&&ZC(U,w,o,n,m)&&RR(w,f,a,o),y(),f.restore()}else y()}catch(y){console.error(y)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(U=>{try{fu(U,n,i,t,f,a,o)}catch(E){console.error(E)}})},cG=og(e=>{lG(e)},{trailing:!0}),uG=(e,t)=>{if(t){cG(e);return}lG(e)},r1=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},s1=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=yr(e,r);if(s){const o=t.ownerDocument.createElementNS(tt,"g");return o.setAttributeNS(tt,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},A2=(e,t,n,i,r,s,o,a)=>{var v;const l={x:s,y:o},[c,u,d,f]=Oe(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(ue(e)){const w=Vn(e,t);if(xe(w)){const[S,M,_,T]=Oe(w,t),C=ce.getBoundTextElementPosition(w,e,t);h=(_-S)/2-(C.x-S),m=(T-M)/2-(C.y-M),s=s+C.x-e.x,o=o+C.y-e.y}}const p=180*e.angle/Math.PI;let U=i;if(e.link){const w=i.ownerDocument.createElementNS(tt,"a");w.setAttribute("href",Yr(e.link)),U.appendChild(w),U=w}const E=(w,S)=>{U.appendChild(w)},y=(((v=yr(e,t))==null?void 0:v.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const w=$t.generateElementShape(e,null),S=r1(n,w,jg);y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const M=s1(e,U,[S],a.frameRendering,t);E(M||S);break}case"iframe":case"embeddable":{const w=$t.generateElementShape(e,a),S=r1(n,w,jg),M=e.opacity/100;M!==1&&(S.setAttribute("stroke-opacity",`${M}`),S.setAttribute("fill-opacity",`${M}`)),S.setAttribute("stroke-linecap","round"),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),E(S);const _=sz(e);A2(_,t,n,U,r,_.x+l.x-e.x,_.y+l.y-e.y,a);const T=r1(n,w,jg);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);T.firstChild;)T.removeChild(T.firstChild);const C=nr(Math.min(e.width,e.height),e),x=Of(Ww(e.link||""));if(a.renderEmbeddables===!1||(x==null?void 0:x.type)==="document"){const R=i.ownerDocument.createElementNS(tt,"a");R.setAttribute("href",Yr(e.link||"")),R.setAttribute("target","_blank"),R.setAttribute("rel","noopener noreferrer"),R.style.borderRadius=`${C}px`,T.appendChild(R)}else{const R=i.ownerDocument.createElementNS(tt,"foreignObject");R.style.width=`${e.width}px`,R.style.height=`${e.height}px`,R.style.border="none";const P=R.ownerDocument.createElementNS(tt,"div");P.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),P.style.width="100%",P.style.height="100%";const D=P.ownerDocument.createElement("iframe");D.src=(x==null?void 0:x.link)??"",D.style.width="100%",D.style.height="100%",D.style.border="none",D.style.borderRadius=`${C}px`,D.style.top="0",D.style.left="0",D.allowFullscreen=!0,P.appendChild(D),R.appendChild(P),T.appendChild(R)}E(T);break}case"line":case"arrow":{const w=ke(e,t),S=i.ownerDocument.createElementNS(tt,"mask");if(w){S.setAttribute("id",`mask-${e.id}`);const C=i.ownerDocument.createElementNS(tt,"rect");s=s||0,o=o||0,C.setAttribute("x","0"),C.setAttribute("y","0"),C.setAttribute("fill","#fff"),C.setAttribute("width",`${e.width+100+s}`),C.setAttribute("height",`${e.height+100+o}`),S.appendChild(C);const x=i.ownerDocument.createElementNS(tt,"rect"),R=ce.getBoundTextElementPosition(e,w,t),P=s+R.x-e.x,D=o+R.y-e.y;x.setAttribute("x",P.toString()),x.setAttribute("y",D.toString()),x.setAttribute("fill","#000"),x.setAttribute("width",`${w.width}`),x.setAttribute("height",`${w.height}`),x.setAttribute("opacity","1"),S.appendChild(x)}const M=i.ownerDocument.createElementNS(tt,"g");w&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),$t.generateElementShape(e,a).forEach(C=>{const x=r1(n,C,jg);y!==1&&(x.setAttribute("stroke-opacity",`${y}`),x.setAttribute("fill-opacity",`${y}`)),x.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&Wo(e.points)&&e.backgroundColor!=="transparent"&&x.setAttribute("fill-rule","evenodd"),M.appendChild(x)});const T=s1(e,U,[M,S],a.frameRendering,t);T?(E(T),U.appendChild(T)):(E(M),U.append(S));break}case"freedraw":{const w=$t.generateElementShape(e,a),S=w?r1(n,w,jg):i.ownerDocument.createElementNS(tt,"g");y!==1&&(S.setAttribute("stroke-opacity",`${y}`),S.setAttribute("fill-opacity",`${y}`)),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),S.setAttribute("stroke","none");const M=i.ownerDocument.createElementNS(tt,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",VB(e)),S.appendChild(M);const _=s1(e,U,[S],a.frameRendering,t);E(_||S);break}case"image":{const w=Math.round(e.width),S=Math.round(e.height),M=In(e)&&r[e.fileId];if(M){const{reuseImages:_=!0}=a;let T=`image-${M.id}`,C=e.width,x=e.height;e.crop&&({width:C,height:x}=il(e),T=`image-crop-${M.id}-${O9(`${C}x${x}`)}`),_||(T=`image-${e.id}`);let R=i.querySelector(`#${T}`);if(!R){R=i.ownerDocument.createElementNS(tt,"symbol"),R.id=T;const X=i.ownerDocument.createElementNS(tt,"image");X.setAttribute("href",M.dataURL),X.setAttribute("preserveAspectRatio","none"),e.crop||!_?(X.setAttribute("width",`${C}`),X.setAttribute("height",`${x}`)):(X.setAttribute("width","100%"),X.setAttribute("height","100%")),R.appendChild(X),(U.querySelector("defs")||U).prepend(R)}const P=i.ownerDocument.createElementNS(tt,"use");P.setAttribute("href",`#${T}`),a.exportWithDarkMode&&M.mimeType!==ve.svg&&P.setAttribute("filter",DB);let D=0,$=0;if(e.crop){const{width:X,height:Z}=il(e);D=e.crop.x/(e.crop.naturalWidth/X),$=e.crop.y/(e.crop.naturalHeight/Z)}const z=h+D,V=m+$;P.setAttribute("width",`${w+D}`),P.setAttribute("height",`${S+$}`),P.setAttribute("opacity",`${y}`),(e.scale[0]!==1||e.scale[1]!==1)&&P.setAttribute("transform",`translate(${z} ${V}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-z} ${-V})`);const G=i.ownerDocument.createElementNS(tt,"g");if(e.crop){const X=i.ownerDocument.createElementNS(tt,"mask");X.setAttribute("id",`mask-image-crop-${e.id}`),X.setAttribute("fill","#fff");const Z=i.ownerDocument.createElementNS(tt,"rect");Z.setAttribute("x",`${D}`),Z.setAttribute("y",`${$}`),Z.setAttribute("width",`${w}`),Z.setAttribute("height",`${S}`),X.appendChild(Z),U.appendChild(X),G.setAttribute("mask",`url(#${X.id})`)}if(G.appendChild(P),G.setAttribute("transform",`translate(${s-D} ${o-$}) rotate(${p} ${z} ${V})`),e.roundness){const X=i.ownerDocument.createElementNS(tt,"clipPath");X.id=`image-clipPath-${e.id}`;const Z=i.ownerDocument.createElementNS(tt,"rect"),Ue=nr(Math.min(e.width,e.height),e);Z.setAttribute("width",`${e.width}`),Z.setAttribute("height",`${e.height}`),Z.setAttribute("rx",`${Ue}`),Z.setAttribute("ry",`${Ue}`),X.appendChild(Z),E(X),G.setAttributeNS(tt,"clip-path",`url(#${X.id})`)}const Y=s1(e,U,[G],a.frameRendering,t);E(Y||G)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const w=document.createElementNS(tt,"rect");w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),w.setAttribute("width",`${e.width}px`),w.setAttribute("height",`${e.height}px`),w.setAttribute("rx",Dt.radius.toString()),w.setAttribute("ry",Dt.radius.toString()),w.setAttribute("fill","none"),w.setAttribute("stroke",Dt.strokeColor),w.setAttribute("stroke-width",Dt.strokeWidth.toString()),E(w)}break}default:if(ue(e)){const w=i.ownerDocument.createElementNS(tt,"g");y!==1&&(w.setAttribute("stroke-opacity",`${y}`),w.setAttribute("fill-opacity",`${y}`)),w.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const S=e.text.replace(/\r\n?/g,`
`).split(`
`),M=np(e.fontSize,e.lineHeight),_=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=EF(e.fontFamily,e.fontSize,M),C=RF(e.text)?"rtl":"ltr",x=e.textAlign==="center"?"middle":e.textAlign==="right"||C==="rtl"?"end":"start";for(let P=0;P<S.length;P++){const D=i.ownerDocument.createElementNS(tt,"text");D.textContent=S[P],D.setAttribute("x",`${_}`),D.setAttribute("y",`${P*M+T}`),D.setAttribute("font-family",qm(e)),D.setAttribute("font-size",`${e.fontSize}px`),D.setAttribute("fill",e.strokeColor),D.setAttribute("text-anchor",x),D.setAttribute("style","white-space: pre;"),D.setAttribute("direction",C),D.setAttribute("dominant-baseline","alphabetic"),w.appendChild(D)}const R=s1(e,U,[w],a.frameRendering,t);E(R||w)}else throw new Error(`Unimplemented type ${e.type}`)}},z6e=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!fs(o)).forEach(o=>{if(!o.isDeleted){if(ue(o)&&o.containerId&&t.has(o.containerId))return;try{A2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=ke(o,t);a&&A2(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>fs(o)).forEach(o=>{if(!o.isDeleted)try{A2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},H6e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=dt({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Te(e,{text:r,width:t})},V6e=(e,t)=>{const n=[];for(const i of e){if(Ee(i)){let r=Kr({x:i.x,y:i.y-Dt.nameOffsetY,fontFamily:qe.Helvetica,fontSize:Dt.nameFontSize,lineHeight:Dt.nameLineHeight,strokeColor:t.exportWithDarkMode?Dt.nameColorDarkTheme:Dt.nameColorLightTheme,text:kB(i)});r.y-=r.height,r=H6e(r,i.width),n.push(r)}n.push(i)}return n},dG=(e,t)=>(t=t||ea().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),fG=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=w9(e,t):n.enabled&&n.name?r=V6e(e,{exportWithDarkMode:i}):r=e,r},hG=async(e,t,n,{exportBackground:i,exportPadding:r=sg,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Wa.loadElementsFonts(e)})=>{await l();const c=dG(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=fG({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=x_(o?[o]:E9(u),r),{canvas:p,scale:U=1}=a(h,m),E=ea(),{imageCache:y}=await lz({imageCache:new Map,fileIds:cz(u).map(v=>v.fileId),files:n});return uG({canvas:p,rc:jc.canvas(p),elementsMap:jo(we(u)),allElementsMap:jo(we(Kc(e))),visibleElements:u,scale:U,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:E.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Ce.DARK:Ce.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:y,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},M1=e=>document.createComment(` ${e} `),I_=async(e,t,n,i)=>{const r=dG((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:s=sg,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=fG({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=x_(u?[u]:E9(d),s),U=-f+s,E=-h+s,y=document.createElementNS(tt,"svg");y.setAttribute("version","1.1"),y.setAttribute("xmlns",tt),y.setAttribute("viewBox",`0 0 ${m} ${p}`),y.setAttribute("width",`${m*l}`),y.setAttribute("height",`${p*l}`),o&&y.setAttribute("filter",Bw);const v=y.ownerDocument.createElementNS(tt,"defs"),w=y.ownerDocument.createElementNS(tt,"metadata");if(y.appendChild(M1("svg-source:excalidraw")),y.appendChild(w),y.appendChild(v),c)try{$6e({metadataElement:w,payload:Eg(e,t,n||{},"local")})}catch(R){console.error(R)}const S=y9(e);if(S.length){const R=we(e);for(const P of S){const D=y.ownerDocument.createElementNS(tt,"clipPath");D.setAttribute("id",P.id);const[$,z,V,G]=Oe(P,R),Y=(V-$)/2-(P.x-$),X=(G-z)/2-(P.y-z),Z=y.ownerDocument.createElementNS(tt,"rect");Z.setAttribute("transform",`translate(${P.x+U} ${P.y+E}) rotate(${P.angle} ${Y} ${X})`),Z.setAttribute("width",`${P.width}`),Z.setAttribute("height",`${P.height}`),u||(Z.setAttribute("rx",`${Dt.radius}`),Z.setAttribute("ry",`${Dt.radius}`)),D.appendChild(Z),v.appendChild(D)}}const M=i!=null&&i.skipInliningFonts?[]:await Wa.generateFontFaceDeclarations(e),_=`
      `,T=y.ownerDocument.createElementNS(tt,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${_}${M.join(_)}`)),v.appendChild(T),t.exportBackground&&a){const R=y.ownerDocument.createElementNS(tt,"rect");R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("width",`${m}`),R.setAttribute("height",`${p}`),R.setAttribute("fill",a),y.appendChild(R)}const C=jc.svg(y),x=(i==null?void 0:i.renderEmbeddables)??!1;return z6e(d,jo(we(d)),C,y,n||{},{offsetX:U,offsetY:E,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:x,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:x?new Map(d.filter(R=>Ee(R)).map(R=>[R.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),y},$6e=({payload:e,metadataElement:t})=>{const n=K$(JSON.stringify(q$({text:e})),!0);t.appendChild(M1(`payload-type:${ve.excalidraw}`)),t.appendChild(M1("payload-version:2")),t.appendChild(M1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(M1("payload-end"))},G6e=({svg:e})=>{if(e.includes(`payload-type:${ve.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),r=((n==null?void 0:n[1])||"1")!=="1";try{const s=Z$(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===vs.excalidraw)return s;throw new Error("FAILED")}return Q$(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},x_=(e,t)=>{const[n,i,r,s]=mt(e),o=Bi(n,r)+t*2,a=Bi(i,s)+t*2;return[n,i,o,a]},X6e=(e,t,n)=>{const[,,i,r]=x_(e,t).map(s=>Math.trunc(s*n));return[i,r]},Y6e={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},j6e=e=>Object.keys(qe).includes(e)?qe[e]:Yc,Qd=(e,t)=>{if(!t)return null;const n=t.focus||0;return de(e)?Ob(t)?{...t,focus:n,fixedPoint:T5(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Cl=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||rr(),fillStyle:e.fillStyle||on.fillStyle,strokeWidth:e.strokeWidth||on.strokeWidth,strokeStyle:e.strokeStyle??on.strokeStyle,roughness:e.roughness??on.roughness,opacity:e.opacity==null?on.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||on.strokeColor,backgroundColor:e.backgroundColor||on.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Md(e.type)?dn.LEGACY:dn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??ag(),link:e.link?Yr(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...YB(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},W6e=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=j6e(d)}const i=typeof e.text=="string"&&e.text||"",r=e.lineHeight||(e.height?koe(e):Mc(e.fontFamily));return e=Cl(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||Km,verticalAlign:e.verticalAlign||Ub,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:r}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=Aa(e)),e;case"freedraw":return Cl(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Cl(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:s=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[I(0,0),I(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=ce.getNormalizeElementPointsAndCoords(e)),Cl(e,{type:e.type==="draw"?"line":e.type,startBinding:Qd(e,e.startBinding),endBinding:Qd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:c,x:a,y:l,...ln(e)?{polygon:z7(e.points)?e.polygon??!1:!1}:{},..._h(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[I(0,0),I(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=ce.getNormalizeElementPointsAndCoords(e));const p={type:e.type,startBinding:Qd(e,e.startBinding),endBinding:Qd(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,..._h(m)};return de(e)?Cl(e,{...p,elbowed:!0,startBinding:Qd(e,e.startBinding),endBinding:Qd(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Cl(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Cl(e,{});case"magicframe":case"frame":return Cl(e,{name:e.name??null})}return null},K6e=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),ue(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},Z6e=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=xe(n)?0:(n==null?void 0:n.angle)??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},q6e=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},pd=(e,t,n)=>{const i=new Set,r=t?we(t):null,s=Kc((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!fc(l)){let c=W6e(l);if(c){const u=r==null?void 0:r.get(l.id);u&&u.version>c.version&&(c=Aa(c,u.version)),i.has(c.id)&&(c={...c,id:rr()}),i.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;const o=we(s);for(const a of s)a.frameId&&q6e(a,o),ue(a)&&a.containerId?Z6e(a,o):a.boundElements&&K6e(a,o),n.refreshDimensions&&ue(a)&&Object.assign(a,iz(a,Vn(a,o),o)),Ie(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!xe(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!xe(a))&&(a.endBinding=null));return s.map(a=>{if(de(a)&&!iB(a)&&!pB(a.points))return{...a,...cg(a,o,{points:[I(0,0),a.points[a.points.length-1]]}),index:a.index};if(de(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[I(0,0),I(0,-10),I(l.width/2+5,-10),I(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},Q6e=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},DR={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??Q6e("defaultSidebarDockedPreference",e,t)]},gG=(e,t)=>{var r;e=e||{};const n=ea(),i={};for(const s of Object.keys(DR))if(s in e){const[o,a]=DR[s](e,n);i[o]=a}for(const[s,o]of Object.entries(n)){const a=e[s],l=t?t[s]:void 0;i[s]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...Wt(n,i.activeTool.type&&Y6e[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:Fa(s0(e.zoom)?e.zoom:((r=e.zoom)==null?void 0:r.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:ws.name}:i.openSidebar,gridSize:lue(s0(e.gridSize)?e.gridSize:yb),gridStep:yH(s0(e.gridStep)?e.gridStep:gF),editingFrame:null}},Ud=(e,t,n,i)=>({elements:pd(e==null?void 0:e.elements,n,i),appState:gG(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),NR=e=>{const t=pd(Ot(e.elements),null);return t.length?{...e,elements:t}:null},ay=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=NR({status:t,elements:i,id:rr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=NR({...r,id:r.id||rr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},mG=async e=>{let t;if(e.type===ve.png)try{return await(await pe(()=>Promise.resolve().then(()=>jG),void 0,import.meta.url)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Tu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Tu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===ve.svg)try{return G6e({svg:t})}catch(n){throw n.message==="INVALID"?new Tu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Tu("Error: cannot restore image")}return t},pG=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},J6e=e=>e==="png"||e==="svg",C_=e=>{const t=pG(e);return t==="png"||t==="svg"},UG=e=>!!e&&Object.values(vh).includes(e),Gu=e=>{const{type:t}=e||{};return UG(t)},bG=async(e,t,n,i)=>{const r=await mG(e);let s;try{try{s=JSON.parse(r)}catch(o){throw Gu(e)?new Tu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(L6e(s))return{type:ve.excalidraw,data:Ud({elements:vz(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...r$(s.appState||{}),...t?tm(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(iG(s))return{type:ve.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof Tu?o:new Error("Error: invalid file")}},A_=async(e,t,n,i)=>{const r=await bG(e,t,n,i);if(r.type!==ve.excalidraw)throw new Error("Error: invalid file");return r.data},yG=(e,t="unpublished")=>{const n=JSON.parse(e);if(!iG(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return ay(i,t)},e5e=async(e,t="unpublished")=>yG(await mG(e),t),gm=async e=>new Promise(async(t,n)=>{try{Jm(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new jde("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),t5e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await ec(e));return DF(new Uint8Array(t))}catch(t){return console.error(t),QF(40)}},EG=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),n5e=(e,t)=>`data:${t};base64,${K$(d6(e),!0)}`,i5e=e=>Z$(e.slice(e.indexOf(",")+1)),vG=async(e,t)=>{if(e.type===ve.svg)return e;const[n,i]=await Promise.all([pe(()=>import("./pica--E3AsWNs.js").then(s=>s.p),__vite__mapDeps([2,3]),import.meta.url).then(s=>s.default),pe(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([]),import.meta.url).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Gu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},OR=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:ve.svg}),r5e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Gu(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},s5e=async e=>{const t=e.dataTransfer.files.item(0),n=await o5e(e);return{file:t?await M_(t):null,fileHandle:n}},o5e=async e=>{if(Ld)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},PR=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=ve.png:n.startsWith(i.jpg)?t=ve.jpg:n.startsWith(i.gif)&&(t=ve.gif),t},R1=(e,t,n)=>new File([e],n||"",{type:t}),M_=async e=>{var t,n;if(e.type){if(Gu(e)){const i=await ec(e),r=PR(i);r&&r!==e.type&&(e=R1(i,r,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=R1(await ec(e),ve.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=R1(await ec(e),ve.excalidraw,e.name);else{const i=await ec(e),r=PR(i);r&&(e=R1(i,r,e.name))}return e},ec=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s;if(!((s=r.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),js=32,Rt=12,Uc=256,wG=50,bu="NOT_SPREADSHEET",mm="VALID_SPREADSHEET",k1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},BE=(e,t)=>e.slice(1).every(n=>k1(n[t])!==null),FR=e=>{const t=e[0].length;if(t>2)return{type:bu,reason:"More than 2 columns"};if(t===1){if(!BE(e,0))return{type:bu,reason:"Value is not numeric"};const l=k1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>k1(u[0]));return c.length<2?{type:bu,reason:"Less than two rows"}:{type:mm,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=BE(e,0),i=BE(e,1);if(!n&&!i)return{type:bu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=k1(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:bu,reason:"Less than 2 rows"}:{type:mm,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>k1(l[s]))}}},a5e=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},l5e=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:bu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:bu,reason:"All rows don't have same number of columns"};const r=FR(t);if(r.type!==mm){const s=FR(a5e(t));if(s.type===mm)return s}return r},g6=xie(Tie),no={fillStyle:"hachure",fontFamily:Yc,fontSize:Ul,opacity:100,roughness:1,strokeColor:Be.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:zr.MIDDLE,locked:!1},_G=e=>{const t=(js+Rt)*e.values.length+Rt,n=Uc+Rt*2;return{chartWidth:t,chartHeight:n}},c5e=(e,t,n,i,r)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>Kr({groupIds:[i],backgroundColor:r,...no,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(js+Rt)+Rt*2,y:n+Rt/2,width:js,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},u5e=(e,t,n,i,r)=>{const s=Kr({groupIds:[i],backgroundColor:r,...no,x:t-Rt,y:n-Rt,text:"0",textAlign:"right"}),o=Kr({groupIds:[i],backgroundColor:r,...no,x:t-Rt,y:n-Uc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},d5e=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=_G(e),a=hc({backgroundColor:r,groupIds:[i],...no,type:"line",x:t,y:n,width:s,points:[I(0,0),I(s,0)]}),l=hc({backgroundColor:r,groupIds:[i],...no,type:"line",x:t,y:n,height:o,points:[I(0,0),I(0,-280)]}),c=hc({backgroundColor:r,groupIds:[i],...no,type:"line",x:t,y:n-Uc-Rt,strokeStyle:"dotted",width:s,opacity:wG,points:[I(0,0),I(s,0)]});return[a,l,c]},TG=(e,t,n,i,r,s)=>{const{chartWidth:o}=_G(e),a=e.title?Kr({backgroundColor:r,groupIds:[i],...no,text:e.title,x:t+o/2,y:n-Uc-Rt*2-Ul,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...c5e(e,t,n,i,r),...u5e(e,t,n,i,r),...d5e(e,t,n,i,r)]},f5e=(e,t,n)=>{const i=Math.max(...e.values),r=rr(),s=g6[Math.floor(Math.random()*g6.length)];return[...e.values.map((a,l)=>{const c=a/i*Uc;return Qo({backgroundColor:s,groupIds:[r],...no,type:"rectangle",x:t+l*(js+Rt)+Rt,y:n-c-Rt,width:js,height:c})}),...TG(e,t,n,r,s)]},h5e=(e,t,n)=>{const i=Math.max(...e.values),r=rr(),s=g6[Math.floor(Math.random()*g6.length)];let o=0;const a=[];for(const p of e.values){const U=o*(js+Rt),E=-(p/i)*Uc;a.push([U,E]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=hc({backgroundColor:s,groupIds:[r],...no,type:"line",x:t+Rt+js/2,y:n-Rt,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,U)=>{const E=U*(js+Rt)+Rt/2,y=-(p/i)*Uc+Rt/2;return Qo({backgroundColor:s,groupIds:[r],...no,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+E+js/2,y:n+y-Rt*2,width:Rt,height:Rt})}),m=e.values.map((p,U)=>{const E=U*(js+Rt)+Rt/2,y=p/i*Uc+Rt/2+Rt;return hc({backgroundColor:s,groupIds:[r],...no,type:"line",x:t+E+js/2+Rt/2,y:n-y,height:y,strokeStyle:"dotted",opacity:wG,points:[I(0,0),I(0,y)]})});return[...TG(e,t,n,r,s),f,...m,...h]},g5e=(e,t,n,i)=>e==="line"?h5e(t,n,i):f5e(t,n,i),R_="clipboard"in navigator&&"writeText"in navigator.clipboard,k_="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,m5e=e=>!!([vs.excalidraw,vs.excalidrawClipboard,vs.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),p5e=({types:e,files:t})=>{var i,r,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((i=n.clipboardData)==null||i.setData(a,l),((r=n.clipboardData)==null?void 0:r.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},U5e=({elements:e,files:t})=>{const n=we(e),i=new Set(e.filter(a=>Ee(a)));let r=!1;const s=e.reduce((a,l)=>(In(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:vs.excalidrawClipboard,elements:e.map(a=>{if(yr(a,n)&&!i.has(yr(a,n))){const l=Lc(a);return mi(l,n,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},b5e=async(e,t,n)=>{await qc(U5e({elements:e,files:t}),n)},y5e=e=>{const t=l5e(e);return t.type===mm?{spreadsheet:t.spreadsheet}:null};function SG(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const r=(n=i.textContent)==null?void 0:n.trim();r&&t.push({type:"text",value:r})}else if(i instanceof HTMLImageElement){const r=i.getAttribute("src");r&&r.startsWith("http")&&t.push({type:"imageUrl",value:r})}else t=t.concat(SG(i));return t}const E5e=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(ve.html);if(!t)return null;try{const i=new DOMParser().parseFromString(t,ve.html),r=SG(i.body);if(r.length)return{type:"mixedContent",value:r}}catch(i){console.error(`error in parseHTMLFromPaste: ${i.message}`)}return null},v5e=async()=>{var n,i,r,s;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((r=navigator.clipboard)==null?void 0:r.readText());if(a)return{[ve.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(PF(Vie,a))try{if(a===ve.text||a===ve.html)e[a]=await(await o.getType(a)).text();else if(UG(a)){const l=await o.getType(a),c=R1(l,a,void 0);e[a]=c}else throw new Zs(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof Zs?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},w5e=async(e,t=!1)=>{var n,i;try{const r=!t&&e&&E5e(e);return r?r.value.every(o=>o.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(ve.text))||r.value.map(o=>o.value).join(`
`).trim()}:r:{type:"text",value:(((i=e.clipboardData)==null?void 0:i.getData(ve.text))||"").trim()}}catch{return{type:"text",value:""}}},IG=async(e,t=!1)=>{const n=await w5e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&y5e(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===vs.excalidrawClipboardWithAPI;if(m5e(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},_5e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[ve.png]:e})])}catch(t){if(Jm(e))await navigator.clipboard.write([new window.ClipboardItem({[ve.png]:await e})]);else throw t}},qc=async(e,t)=>{var n,i;if(R_)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if((n=t.clipboardData)==null||n.setData(ve.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(ve.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!T5e(e))throw new Error("Error copying to clipboard.")},T5e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},ly=(e,{selectedElementIds:t},n)=>{e=Ot(e);const i=n&&$n(e,{selectedElementIds:t});let r=null,s=i?Fe(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&Ee(s[0])?(r=s[0],s=w9(e,r)):s.length>1&&(s=Fe(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Xa(s)}},cy=async(e,t,n,i,{exportBackground:r,exportPadding:s=sg,viewBackgroundColor:o,name:a=n.name||bF,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=I_(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return h6(d.then(f=>new Blob([tre+f.outerHTML],{type:ve.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[vh.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await qc(f)}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return}}const u=hG(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=gm(u);return n.exportEmbedScene&&(d=d.then(f=>pe(()=>Promise.resolve().then(()=>jG),void 0,import.meta.url).then(({encodePngMetadata:h})=>h({blob:f,metadata:Eg(t,n,i,"local")})))),h6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[vh.png],fileHandle:l})}else if(e==="clipboard")try{const d=gm(u);await _5e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):X0&&d.name==="TypeError"?new Error(`${k("alerts.couldNotCopyToClipboard")}

${k("hints.firefox_clipboard_write")}`):new Error(k("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},S5e=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=pG(o);if(!o||!J6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=ly(e,t,!1);return await cy(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},I5e=se({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:W.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(YUe,{label:k("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),x5e=se({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:W.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Ot(e),s=$n(i,t)?Fe(i,t):i;return g(he,{children:zw.map(o=>{const[a,l]=X6e(s,sg,o),c=`${k("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(He,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),C5e=se({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:W.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(b_,{checked:e.exportBackground,onChange:n=>t(n),children:k("imageExportDialog.label.withBackground")})}),xG=se({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:W.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>O(b_,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[k("imageExportDialog.label.embedScene"),g(dd,{label:k("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:Mue})})]})}),m6=se({name:"saveToActiveFile",label:"buttons.save",icon:O5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=C_(t.fileHandle)?await S5e(e,t,i.files,i.getName()):await nG(e,t,i.files,i.getName());return{captureUpdate:W.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s!=null&&s.name?k("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):k("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:W.EVENTUALLY}}},keyTest:e=>e.key===H.S&&e[H.CTRL_OR_CMD]&&!e.shiftKey}),CG=se({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:O5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await nG(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:W.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:k("toast.fileSaved")}}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:W.EVENTUALLY}}},keyTest:e=>e.key===H.S&&e.shiftKey&&e[H.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(He,{type:"button",icon:Sue,title:k("buttons.saveAs"),"aria-label":k("buttons.saveAs"),showAriaLabel:ii().editor.isMobile,hidden:!Ld,onClick:()=>e(null),"data-testid":"save-as-button"})}),L4=se({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await k6e(t,e);return{elements:r,appState:s,files:o,captureUpdate:W.IMMEDIATELY}}catch(r){return(r==null?void 0:r.name)==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:W.EVENTUALLY}}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.O}),A5e=se({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:W.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(XUe,{value:e.exportWithDarkMode?Ce.DARK:Ce.LIGHT,onChange:n=>{t(n===Ce.DARK)},title:k("imageExportDialog.label.darkMode")})})});let AG="{}";const M5e=se({name:"copyStyles",label:"labels.copyStyles",icon:FH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&sr(s)){const o=ke(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(AG=JSON.stringify(r)),{appState:{...t,toast:{message:k("toast.copyStyles")}},captureUpdate:W.EVENTUALLY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.C}),R5e=se({name:"pasteStyles",label:"labels.pasteStyles",icon:FH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(AG),s=r[0],o=r[1];if(!nB(s))return{elements:e,captureUpdate:W.EVENTUALLY};const a=Fe(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(ue(c)&&c.containerId&&(u=o),!u)return c;let d=Te(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?Coe(u.roundness.type,c)?u.roundness:Aoe(c):null});if(ue(d)){const f=u.fontSize||Ul,h=u.fontFamily||Yc;d=Te(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||Km,lineHeight:u.lineHeight||Mc(h)});let m=null;d.containerId&&(m=a.find(p=>ue(d)&&p.id===d.containerId)||null),Yi(d,m,i.scene)}return d.type==="arrow"&&xe(u)&&(d=Te(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),Ee(c)&&(d=Te(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:W.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.V});se({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:W.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(He,{type:"button",icon:SH,"aria-label":k("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});se({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:W.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(He,{visible:N9(t,Ot(e)),type:"button",icon:Iue,"aria-label":k("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const L_=se({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:wue,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var r,s;return((r=t.openDialog)==null?void 0:r.name)==="help"&&i(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:W.EVENTUALLY}},keyTest:e=>e.key===H.QUESTION_MARK}),k5e=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&Z0(r,n),!0))return!0}return!1},BR=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!k5e(i)&&!LB(i)},L5e=se({name:"group",label:"labels.group",icon:e=>g(iM,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=E9(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:W.EVENTUALLY};const s=$u(t);if(s.length===1){const U=s[0],E=new Set(At(e,U).map(w=>w.id)),y=new Set(r.map(w=>w.id));if(new Set([...Array.from(E),...Array.from(y)]).size===E.size)return{appState:t,elements:e,captureUpdate:W.EVENTUALLY}}let o=[...e];new Set(r.map(U=>U.frameId)).size>1&&ole(r).forEach((E,y)=>{I5(E,i.scene.getNonDeletedElementsMap())});const l=rr(),c=we(r);o=o.map(U=>c.get(U.id)?Te(U,{groupIds:ele(U.groupIds,l,t.editingGroupId)}):U);const u=At(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(U=>!Z0(U,l)),p=so([...m,...u,...h],we(u));return{appState:{...t,...TB(l,{...t,selectedGroupIds:{}},Ot(o))},elements:p,captureUpdate:W.IMMEDIATELY}},predicate:(e,t,n,i)=>BR(e,t,i),keyTest:e=>!e.shiftKey&&e[H.CTRL_OR_CMD]&&e.key===H.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!BR(e,t,i),type:"button",icon:g(iM,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.group")} — ${Q("CtrlOrCmd+G")}`,"aria-label":k("labels.group"),visible:$n(Ot(e),t)})}),D5e=se({name:"ungroup",label:"labels.ungroup",icon:e=>g(rM,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=$u(t),s=we(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:W.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Bt(f)&&a.push(f.id);const h=tle(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Te(f,{groupIds:h})});const l=Oi(t,Ot(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return y9(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=dg(o,zo(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:W.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[H.CTRL_OR_CMD]&&e.key===H.G.toUpperCase(),predicate:(e,t)=>$u(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(He,{type:"button",hidden:$u(t).length===0,icon:g(rM,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.ungroup")} — ${Q("CtrlOrCmd+Shift+G")}`,"aria-label":k("labels.ungroup"),visible:$n(Ot(e),t)})}),MG=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function N5e(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const uy=(e,t)=>`hsl(${Math.abs(N5e((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,O5e=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},P5e=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=uy(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===wu.IDLE||m===wu.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const U=n.theme===Ce.DARK?"#2f6330":Hie,E=c==null?void 0:c.isSpeaking;E&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=uU,e.strokeStyle=uU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const y=t.remotePointerUsernames.get(s)||"";if(!f&&y){e.font="600 12px sans-serif";const v=(E?a+0:a)+u/2,w=(E?l+0:l)+d+2,S=5,M=3,_=e.measureText(y),T=_.actualBoundingBoxDescent+_.actualBoundingBoxAscent,C=Math.max(T,12),x=v-1,R=w-1,P=_.width+2+S*2+2,D=C+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(x,R,P,D,8),e.fillStyle=h,e.fill(),e.strokeStyle=uU,e.stroke(),E&&(e.beginPath(),e.roundRect(x-2,R-2,P+4,D+4,8),e.strokeStyle=U,e.stroke())):MG(e,x,R,P,D,8,uU),e.fillStyle=zie,e.fillText(y,v+S+1,w+M+_.actualBoundingBoxAscent+Math.floor((C-T)/2)+2),E){e.fillStyle=U;const $=8,z=8,V=5;e.fillRect(x+P+z,R+(D/2-$/2),2,$),e.fillRect(x+P+z+V,R+(D/2-$*2/2),2,$*2),e.fillRect(x+P+z+V*2,R+(D/2-$/2),2,$)}}e.restore(),e.closePath()}},zR=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=O5e(n),[o,a]=L.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:me("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};se({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:W.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:W.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=uy(i,r),l=me({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?O("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:k("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:k("userList.hint.micMuted"),children:Lde}):g("div",{title:k("userList.hint.inCall"),children:kde}):null;return s?O("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(zR,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),O("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:k("userList.hint.followStatus"),children:j9}),c]})]}):O("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(zR,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const F5e=se({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of UF)if(r.some(o=>o.type===s))return{captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:k(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:rr(),status:"unpublished",elements:r.map(Lc),created:Date.now()},...s])).then(()=>({captureUpdate:W.EVENTUALLY,appState:{...t,toast:{message:k("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),Zr=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ee(i))},vg=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Lle(r,i,n.scene),o=we(s);return Ah(e.map(a=>o.get(a.id)||a),t,n)};se({name:"alignTop",label:"labels.alignTop",icon:qA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"start",axis:"y"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:qA,onClick:()=>n(null),title:`${k("labels.alignTop")} — ${Q("CtrlOrCmd+Shift+Up")}`,"aria-label":k("labels.alignTop"),visible:$n(Ot(e),t)})});se({name:"alignBottom",label:"labels.alignBottom",icon:QA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"end",axis:"y"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:QA,onClick:()=>n(null),title:`${k("labels.alignBottom")} — ${Q("CtrlOrCmd+Shift+Down")}`,"aria-label":k("labels.alignBottom"),visible:$n(Ot(e),t)})});se({name:"alignLeft",label:"labels.alignLeft",icon:JA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"start",axis:"x"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:JA,onClick:()=>n(null),title:`${k("labels.alignLeft")} — ${Q("CtrlOrCmd+Shift+Left")}`,"aria-label":k("labels.alignLeft"),visible:$n(Ot(e),t)})});se({name:"alignRight",label:"labels.alignRight",icon:eM,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"end",axis:"x"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:eM,onClick:()=>n(null),title:`${k("labels.alignRight")} — ${Q("CtrlOrCmd+Shift+Right")}`,"aria-label":k("labels.alignRight"),visible:$n(Ot(e),t)})});se({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:tM,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"center",axis:"y"}),captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:tM,onClick:()=>n(null),title:k("labels.centerVertically"),"aria-label":k("labels.centerVertically"),visible:$n(Ot(e),t)})});se({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:nM,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Zr(t,i),perform:(e,t,n,i)=>({appState:t,elements:vg(e,t,i,{position:"center",axis:"x"}),captureUpdate:W.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!Zr(t,i),type:"button",icon:nM,onClick:()=>n(null),title:k("labels.centerHorizontally"),"aria-label":k("labels.centerHorizontally"),visible:$n(Ot(e),t)})});const RG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Ee(i))},kG=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Kle(r,n.scene.getNonDeletedElementsMap(),i),o=we(s);return Ah(e.map(a=>o.get(a.id)||a),t,n)};se({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:kG(e,t,i,{axis:"x"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!RG(t,i),type:"button",icon:Due,onClick:()=>n(null),title:`${k("labels.distributeHorizontally")} — ${Q("Alt+H")}`,"aria-label":k("labels.distributeHorizontally"),visible:$n(Ot(e),t)})});se({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:kG(e,t,i,{axis:"y"}),captureUpdate:W.IMMEDIATELY}),keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(He,{hidden:!RG(t,i),type:"button",icon:Nue,onClick:()=>n(null),title:`${k("labels.distributeVertically")} — ${Q("Alt+V")}`,"aria-label":k("labels.distributeVertically"),visible:$n(Ot(e),t)})});const B5e=se({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Pde,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Ah(LG(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:W.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Je.H}),z5e=se({name:"flipVertical",label:"labels.flipVertical",icon:Ode,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Ah(LG(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:W.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Je.V&&!e[H.CTRL_OR_CMD]}),LG=(e,t,n,i,r)=>{const s=Fe(Ot(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=H5e(s,t,n,i,r),a=we(o);return e.map(l=>a.get(l.id)||l)},H5e=(e,t,n,i,r)=>{if(e.every(h=>xe(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Te(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=_s(e);uz(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,Lc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Hb(e.filter(Ie),Vu(n),[],r.scene,n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>de(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=_s(e),[d,f]=[s-c,o-u];return l.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),e},M2=se({name:"copy",label:"labels.copy",icon:h4,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await b5e(r,i.files,n)}catch(s){return{captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:W.EVENTUALLY}},keyTest:void 0}),HR=se({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await v5e()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),X0?{captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:k("hints.firefox_clipboard_write")}}:{captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(p5e({types:r}))}catch(s){return console.error(s),{captureUpdate:W.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:W.EVENTUALLY}},keyTest:void 0}),VR=se({name:"cut",label:"labels.cut",icon:yde,trackEvent:{category:"element"},perform:(e,t,n,i)=>(M2.perform(e,t,n,i),jH.perform(e,t,null,i)),keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.X}),$R=se({name:"copyAsSvg",label:"labels.copyAsSvg",icon:Fde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:W.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=ly(e,t,!0);try{await cy("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:k("toast.copyToClipboardAsSvg",{exportSelection:o.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:W.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:W.EVENTUALLY}}},predicate:e=>R_&&e.length>0,keywords:["svg","clipboard","copy"]}),GR=se({name:"copyAsPng",label:"labels.copyAsPng",icon:Bde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:W.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=ly(e,t,!0);try{return await cy("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:k("toast.copyToClipboardAsPng",{exportSelection:r.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:W.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:W.EVENTUALLY}}},predicate:e=>k_&&e.length>0,keyTest:e=>e.code===Je.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),XR=se({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{qc(uB(r))}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return{captureUpdate:W.EVENTUALLY}},predicate:(e,t,n,i)=>R_&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(ue),keywords:["text","clipboard","copy"]}),YR=se({name:"gridMode",icon:$de,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:W.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[H.CTRL_OR_CMD]&&e.code===Je.QUOTE}),D4=se({name:"zenMode",label:"buttons.zenMode",icon:Hde,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:W.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.Z}),V5e=se({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:zde,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:W.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.S}),N4=se({name:"stats",label:"stats.fullTitle",icon:Nde,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:W.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.SLASH}),$5e=se({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>sr(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{var l;const a=ke(o,s);if(a){const{width:c,height:u}=Hn(a.originalText,dt(a),a.lineHeight),d=Moe(o.id);oB(o.id);const{x:f,y:h}=lg(o,a,s);i.scene.mutateElement(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),i.scene.mutateElement(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:W.IMMEDIATELY}}}),G5e=se({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=ue(r[0])||ue(r[1]);let o;if(Hu(r[0])?o=r[0]:Hu(r[1])&&(o=r[1]),s&&o&&ke(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;ue(r[0])&&Hu(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),i.scene.mutateElement(s,{containerId:o.id,verticalAlign:zr.MIDDLE,textAlign:j0.CENTER,autoResize:!0,angle:xe(o)?0:(o==null?void 0:o.angle)??0}),i.scene.mutateElement(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return Yi(s,o,i.scene),Pb(o.id,a),{elements:X5e(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:W.IMMEDIATELY}}}),X5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),so(i,we([t,n])),i},Y5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),so(i,we([t,n])),i},j5e=se({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.some(o=>ue(o));return r.length>0&&s},perform:(e,t,n,i)=>{var a;const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const l of r)if(ue(l)){const c=Qo({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Md("rectangle")?dn.ADAPTIVE_RADIUS:dn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Fn,y:l.y-Fn,width:od(l.width,"rectangle"),height:od(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);s.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&i.scene.mutateElement(f,{startBinding:h,endBinding:m})})}i.scene.mutateElement(l,{containerId:c.id,verticalAlign:zr.MIDDLE,boundElements:null,textAlign:j0.CENTER,autoResize:!0}),Yi(l,c,i.scene),s=Y5e([...s,c],c,l),o[c.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:W.IMMEDIATELY}}}),D_=380,W5e=42,O4=5,DG=85,K5e=500;let P4=!1;const kU=new Map,Z5e=({element:e,scene:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=t.getNonDeletedElementsMap(),a=bp(),l=Up(),c=ii(),u=e.link||"",[d,f]=L.useState(u),h=L.useRef(null),m=a.showHyperlinkPopup==="editor",p=L.useCallback(()=>{var S;if(!h.current)return;const w=Yr(h.current.value)||null;if(!e.link&&w&&st("hyperlink","create"),fr(e)){if(((S=a.activeEmbeddable)==null?void 0:S.element)===e&&n({activeEmbeddable:null}),!w){t.mutateElement(e,{link:null}),s(e,!1);return}if(!p2(w,l.validateEmbeddable))w&&r({message:k("toast.unableToEmbed"),closable:!0}),e.link&&kU.set(e.id,e.link),t.mutateElement(e,{link:w}),s(e,!1);else{const{width:M,height:_}=e,T=Of(w);(T==null?void 0:T.error)instanceof URIError&&r({message:k("toast.unrecognizedLinkFormat"),closable:!0});const C=T?T.intrinsicSize.w/T.intrinsicSize.h:1,x=kU.get(e.id)!==e.link;t.mutateElement(e,{...x?{width:(T==null?void 0:T.type)==="video"?M>_?M:_*C:M,height:(T==null?void 0:T.type)==="video"&&M>_?M/C:_}:{},link:w}),s(e,!0),kU.has(e.id)&&kU.delete(e.id)}}else t.mutateElement(e,{link:w})},[e,t,r,l.validateEmbeddable,a.activeEmbeddable,n,s]);L.useLayoutEffect(()=>()=>{p()},[p]),L.useEffect(()=>{m&&(h!=null&&h.current)&&!(c.viewport.isMobile||c.isTouchScreen)&&h.current.select()},[m,c.viewport.isMobile,c.isTouchScreen]),L.useEffect(()=>{let w=null;const S=M=>{if(m)return;w&&clearTimeout(w),J5e(e,o,a,I(M.clientX,M.clientY))&&(w=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},K5e))};return window.addEventListener(ee.POINTER_MOVE,S,!1),()=>{window.removeEventListener(ee.POINTER_MOVE,S,!1),w&&clearTimeout(w)}},[a,e,m,n,o]);const U=L.useCallback(()=>{st("hyperlink","delete"),t.mutateElement(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e,t]),E=()=>{st("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:y,y:v}=NG(e,a,o);return a.contextMenu||a.selectedElementsAreBeingDragged||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:O("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${v}px`,left:`${y}px`,width:D_,padding:O4},children:[m?g("input",{className:me("excalidraw-hyperlinkContainer-input"),placeholder:k("labels.link.hint"),ref:h,value:d,onChange:w=>f(w.target.value),autoFocus:!0,onKeyDown:w=>{w.stopPropagation(),w[H.CTRL_OR_CMD]&&w.key===H.K&&w.preventDefault(),(w.key===H.ENTER||w.key===H.ESCAPE)&&(p(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:Yr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:VF(e.link)?"_self":"_blank",onClick:w=>{if(e.link&&i){const S=OF(ee.EXCALIDRAW_LINK,w.nativeEvent);i({...e,link:Yr(e.link)},S),S.defaultPrevented&&w.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:k("labels.link.empty")}),O("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!m&&g(He,{type:"button",title:k("buttons.edit"),"aria-label":k("buttons.edit"),label:k("buttons.edit"),onClick:E,className:"excalidraw-hyperlinkContainer--edit",icon:N5}),g(He,{type:"button",title:k("labels.linkToElement"),"aria-label":k("labels.linkToElement"),label:k("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:GH}),u&&!fr(e)&&g(He,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:ad})]})]})},NG=(e,t,n)=>{const[i,r]=Oe(e,n),{x:s,y:o}=Hr({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-D_/2,l=o-t.offsetTop-DG;return{x:a,y:l}},jR=(e,t)=>{var r;const n=Fe(e,t);return fr(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"};let y0=null;const q5e=(e,t,n)=>{y0&&clearTimeout(y0),y0=window.setTimeout(()=>Q5e(e,t,n),Kie)},Q5e=(e,t,n)=>{if(!e.link)return;const i=g0();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=Qf(e.link)?k("labels.link.goToElement"):e.link;const[r,s,o,a]=Oe(e,n),[l,c,u,d]=S_([r,s,o,a],e.angle,t),f=Hr({sceneX:l,sceneY:c},t);s$(i,{left:f.x,top:f.y,width:u,height:d},"top"),st("hyperlink","tooltip","link-icon"),P4=!0},WR=()=>{y0&&clearTimeout(y0),P4&&(P4=!1,g0().classList.remove("excalidraw-tooltip--visible"))},J5e=(e,t,n,[i,r])=>{const{x:s,y:o}=xt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(_5(I(s,o),e,t))return!1;const[l,c,u]=Oe(e,t);if(s>=l&&s<=u&&o>=c-DG&&o<=c)return!1;const{x:d,y:f}=NG(e,n,t);return!(i>=d-a&&i<=d+D_+O4*2+a&&r>=f-a&&r<=f+a+O4*2+W5e)},OG=se({name:"hyperlink",label:(e,t)=>jR(e,t),icon:e6,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:W.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.K,predicate:(e,t)=>Fe(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Fe(e,t);return g(He,{type:"button",icon:e6,"aria-label":k(jR(e,t)),title:`${fr(e[0])?k("labels.link.labelEmbed"):k("labels.link.label")} - ${Q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),zE=e=>e.every(t=>!t.locked),PG=se({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return zE(i)?"labels.elementLock.lock":"labels.elementLock.unlock"},icon:(e,t)=>{const n=Fe(t,e);return zE(n)?H9:D5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=zE(r),o=we(r),a=r.length>1&&g9(r),c=r.length===1||a?null:rr();let u={...t.lockedMultiSelections};if(s)u={...t.lockedMultiSelections,...c?{[c]:!0}:{}};else if(a){const E=r[0].groupIds.at(-1);delete u[E]}const d=e.map(E=>{if(!o.has(E.id))return E;let y=E.groupIds;return s?c&&(y=[...y,c]):y=y.filter(v=>!t.lockedMultiSelections[v]),Te(E,{locked:s,groupIds:y.length!==E.groupIds.length?y:E.groupIds})}),f=we(d),h=s?{}:Object.fromEntries(r.map(E=>[E.id,!0])),m=r.map(E=>f.get(E.id)||E),p=s?{}:ap(m,t),U=s?c||(a?r[0].groupIds.at(-1):r[0].id):null;return{elements:d,appState:{...t,selectedElementIds:h,selectedGroupIds:p,selectedLinearElement:s?null:t.selectedLinearElement,lockedMultiSelections:u,activeLockedId:U},captureUpdate:W.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===H.L&&e[H.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),eye=se({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:D5,predicate:(e,t)=>Fe(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(o=>o.locked),i=e.map(o=>{if(o.locked){const a=o.groupIds.filter(l=>!t.lockedMultiSelections[l]);return Te(o,{locked:!1,groupIds:o.groupIds.length!==a.length?a:o.groupIds})}return o}),r=we(i),s=n.map(o=>r.get(o.id)||o);return{elements:i,appState:{...t,selectedElementIds:Object.fromEntries(n.map(o=>[o.id,!0])),selectedGroupIds:ap(s,t),lockedMultiSelections:{},activeLockedId:null},captureUpdate:W.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var FG={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(FG);var tye=FG.exports;const nye=gl(tye),iye=8,rye=10,L1=["rectangle","diamond","ellipse"],D1=["line","sharpArrow","curvedArrow","elbowArrow"],sye=new Set(L1),oye=new Set(D1),Oh=e=>sye.has(e),p6=e=>e==="arrow"||oye.has(e),_a=Xt(null),pm=new Map,Um=new Map,aye=({app:e})=>{const t=e.scene.getSelectedElements(e.state),n=L.useRef(null);return L.useEffect(()=>{if(t.length===0){e.updateEditorAtom(_a,null);return}const i=dy(t);i&&!n.current?n.current=i:(n.current&&!i||n.current&&i!==n.current)&&(e.updateEditorAtom(_a,null),n.current=null)},[t,e]),L.useEffect(()=>()=>{pm.clear(),Um.clear()},[]),g(lye,{app:e,elements:t})},lye=({app:e,elements:t})=>{const n=dy(t),i=L.useMemo(()=>n==="generic"?HG(t):[],[n,t]),r=L.useMemo(()=>n==="linear"?B4(t):[],[n,t]),s=n==="generic"?i.every(d=>d.type===i[0].type):n==="linear"?r.every(d=>Kf(d)===Kf(r[0])):!1,[o,a]=L.useState({x:0,y:0}),l=L.useRef(""),c=L.useRef(null);L.useEffect(()=>{const d=[...i,...r].sort((U,E)=>U.id.localeCompare(E.id)),f=`
      ${e.state.scrollX}${e.state.scrollY}${e.state.offsetTop}${e.state.offsetLeft}${e.state.zoom.value}${d.map(U=>U.id).join(",")}`;if(f===l.current)return;l.current=f;let h;if(d.length===1){const[U,,,E,y,v]=Oe(d[0],e.scene.getNonDeletedElementsMap());h=q(I(U,E),I(y,v),d[0].angle)}else{const{minX:U,maxY:E}=_s(d);h=I(U,E)}const{x:m,y:p}=Hr({sceneX:h[0],sceneY:h[1]},e.state);a({x:m,y:p})},[i,r,e.scene,e.state]),L.useEffect(()=>{for(const d of r){const f=F4(d.id,hye(d));Um.has(f)||Um.set(f,d)}},[r]),L.useEffect(()=>{for(const d of i)if(!pm.has(d.id)){const f=ke(d,e.scene.getNonDeletedElementsMap());f&&pm.set(d.id,{fontSize:f.fontSize})}},[i,e.scene]);const u=n==="linear"?[["line",TH],["sharpArrow",zH],["curvedArrow",VH],["elbowArrow",HH]]:n==="generic"?[["rectangle",vH],["diamond",wH],["ellipse",_H]]:[];return g("div",{ref:c,tabIndex:-1,style:{position:"absolute",top:`${o.y+(rye+8)*e.state.zoom.value-e.state.offsetTop}px`,left:`${o.x-e.state.offsetLeft-iye}px`,zIndex:2},className:Ac.CONVERT_ELEMENT_TYPE_POPUP,children:u.map(([d,f])=>{const h=s&&(n==="generic"&&i[0].type===d||n==="linear"&&Kf(r[0])===d);return g(He,{className:"Shape",type:"radio",icon:f,checked:h,name:"convertElementType-option",title:d,keyBindingLabel:"","aria-label":d,"data-testid":`toolbar-${d}`,onChange:()=>{var m;e.state.activeTool.type!==d&&st("convertElementType",d,"ui"),BG(e,{conversionType:n,nextType:d}),(m=c.current)==null||m.focus()}},`${t[0].id}${t[0].version}_${d}`)})})},cye=(e,t,n)=>{const i=Zo(e,t),r=sp(e,t),s=Wc(t.text,dt(t),i);let o=Hn(s,dt(t),t.lineHeight),a=t.fontSize;for(;(o.width>i||o.height>r)&&a>0;){a-=1;const l={...t,fontSize:a};o=Hn(t.text,dt(l),t.lineHeight)}mi(t,n.getNonDeletedElementsMap(),{fontSize:a,width:o.width,height:o.height}),Yi(t,e,n)},BG=(e,{conversionType:t,nextType:n,direction:i="right"})=>{var a;if(!t)return!1;const r=e.scene.getSelectedElements(e.state),s=r.reduce((l,c)=>({...l,[c.id]:!0}),{}),o=i==="right"?1:-1;if(t==="generic"){const l=HG(r),u=l.every(d=>d.type===l[0].type)?L1.indexOf(l[0].type):-1;if(n=n??L1[(u+L1.length+o)%L1.length],n&&Oh(n)){const d={};for(const h of l){const m=ZR(h,n,e);d[m.id]=m}const f=[];for(const h of e.scene.getElementsIncludingDeleted())d[h.id]?f.push(d[h.id]):f.push(h);e.scene.replaceAllElements(f);for(const h of Object.values(d)){const m=ke(h,e.scene.getNonDeletedElementsMap());m&&(pm.get(h.id)&&mi(m,e.scene.getNonDeletedElementsMap(),{fontSize:((a=pm.get(h.id))==null?void 0:a.fontSize)??m.fontSize}),cye(h,m,e.scene))}e.setState(h=>({selectedElementIds:s,activeTool:Wt(h,{type:"selection"})}))}}if(t==="linear"){const l=B4(r);if(!n){const u=zF(l,Kf),d=u?D1.indexOf(u):-1;n=D1[(d+D1.length+o)%D1.length]}if(p6(n)){const u=[],d=e.scene.getElementsMapIncludingDeleted();for(const f of l){const h=Um.get(F4(f.id,n));if(h&&Kf(h)===n)d.set(h.id,h),u.push(h);else{const m=ZR(f,n,e);d.set(m.id,m),u.push(m)}}e.scene.replaceAllElements(d);for(const f of u)if(Ie(f))if(de(f)){const h=uye(f);if(h.length<2)continue;const m=[];for(let U=1;U<h.length-2;U++)m.push({start:h[U],end:h[U+1],index:U+1});const p=cg(f,e.scene.getNonDeletedElementsMap(),{points:h,fixedSegments:m});mi(f,e.scene.getNonDeletedElementsMap(),{...p,endArrowhead:"arrow"})}else{const h=Fre(["line","sharpArrow","curvedArrow"],m=>Um.get(F4(f.id,m)));if(h){const m=h.points;e.scene.mutateElement(f,{points:m})}}}const c=B4(e.scene.getSelectedElements(e.state));e.setState(u=>({selectedElementIds:s,selectedLinearElement:c.length===1?new ce(c[0],e.scene.getNonDeletedElementsMap()):null,activeTool:Wt(u,{type:"selection"})}))}return!0},dy=e=>{if(e.length===0)return null;let t=!1;for(const n of e){if(Oh(n.type))return"generic";zG(n)&&(t=!0)}return t?"linear":null},zG=e=>Ie(e)&&(!xe(e)||!iB(e)&&!sr(e)),F4=(e,t)=>`${e}:${t}`,HG=e=>e.filter(t=>Oh(t.type)),B4=e=>e.filter(t=>zG(t)),LU=20,uf=(e,t)=>e[0]===t[0],HE=(e,t)=>e[1]===t[1],KR=(e,t)=>uf(e,t)?Math.abs(e[1]-t[1]):Math.abs(e[0]-t[0]),uye=e=>{const t=[e.points[0]],n=dye(e.points);for(let s=1;s<n.length;++s){const o=t[t.length-1],a=[...n[s]];Math.abs(a[0]-o[0])<LU?a[0]=o[0]:Math.abs(a[1]-o[1])<LU&&(a[1]=o[1]),uf(o,a)||HE(o,a)||t.push(I(o[0],a[1])),t.push(a)}const i=[t[0]];for(let s=1;s<t.length-1;++s)uf(t[s-1],t[s])&&uf(t[s],t[s+1])||HE(t[s-1],t[s])&&HE(t[s],t[s+1])||i.push(t[s]);i.push(t[t.length-1]);const r=[i[0]];for(let s=1;s<i.length-1;++s){const o=r[r.length-1],a=i[s],l=i[s+1],c=uf(o,a),u=uf(a,l);if(c!==u){const d=KR(o,a),f=KR(a,l);if(d<LU||f<LU){if(f<d)c?l[0]=o[0]:l[1]=o[1];else if(u)for(let h=r.length-1;h>=0&&r[h][0]===o[0];--h)r[h][0]=a[0];else for(let h=r.length-1;h>=0&&r[h][1]===o[1];--h)r[h][1]=a[1];continue}}r.push(a)}return r.push(i[i.length-1]),r},dye=e=>{if(e.length===0)return[];const t=[e[0]];for(let n=1;n<e.length;n++){const[i,r]=t[t.length-1],[s,o]=e[n];(i!==s||r!==o)&&t.push(e[n])}return t},ZR=(e,t,n)=>{if(!fye(e.type,t)||e.type===t)return e;if($t.delete(e),Oh(t)){const i=Aa(Qo({...e,type:t,roundness:t==="diamond"&&e.roundness?{type:Md(t)?dn.ADAPTIVE_RADIUS:dn.PROPORTIONAL_RADIUS}:e.roundness}));return K0(i,n.scene),i}if(p6(t))switch(t){case"line":return Aa(hc({...e,type:"line"}));case"sharpArrow":return Aa(Jf({...e,type:"arrow",elbowed:!1,roundness:null,startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"curvedArrow":return Aa(Jf({...e,type:"arrow",elbowed:!1,roundness:{type:dn.PROPORTIONAL_RADIUS},startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"elbowArrow":return Aa(Jf({...e,type:"arrow",elbowed:!0,fixedSegments:null,roundness:null}))}return Yo(t,`unhandled conversion type: ${t}`),e},fye=(e,t)=>!!(Oh(e)&&Oh(t)||p6(e)&&p6(t)),hye=e=>Ie(e)?Kf(e):e.type,gye=se({name:"toggleShapeSwitch",label:"labels.shapeSwitch",icon:()=>null,viewMode:!0,trackEvent:{category:"shape_switch",action:"toggle"},keywords:["change","switch","swap"],perform(e,t,n,i){return Pr.set(_a,{type:"panel"}),{captureUpdate:W.NEVER}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>dy(e)!==null}),VG=se({name:"copyElementLink",label:"labels.copyElementLink",icon:up,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=Fe(e,t);try{if(window.location){const s=tz(r,t);return s?(await qc(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):ez(s.id,s.type)),{appState:{toast:{message:k("toast.elementLinkCopied"),closable:!0}},captureUpdate:W.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:W.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:W.EVENTUALLY}},predicate:(e,t)=>Qb(Fe(e,t))}),mye=se({name:"linkToElement",label:"labels.linkToElement",icon:GH,perform:(e,t,n,i)=>{const r=Fe(e,t);return r.length!==1||!Qb(r)?{elements:e,appState:t,app:i,captureUpdate:W.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Fe(e,t)[0].id}},captureUpdate:W.IMMEDIATELY}},predicate:(e,t,n,i)=>{var s;const r=Fe(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&r.length===1&&Qb(r)},trackEvent:!1}),pye={toggleTheme:[Q("Shift+Alt+D")],saveScene:[Q("CtrlOrCmd+S")],loadScene:[Q("CtrlOrCmd+O")],clearCanvas:[Q("CtrlOrCmd+Delete")],imageExport:[Q("CtrlOrCmd+Shift+E")],commandPalette:[Q("CtrlOrCmd+/"),Q("CtrlOrCmd+Shift+P")],cut:[Q("CtrlOrCmd+X")],copy:[Q("CtrlOrCmd+C")],paste:[Q("CtrlOrCmd+V")],copyStyles:[Q("CtrlOrCmd+Alt+C")],pasteStyles:[Q("CtrlOrCmd+Alt+V")],selectAll:[Q("CtrlOrCmd+A")],deleteSelectedElements:[Q("Delete")],duplicateSelection:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)],sendBackward:[Q("CtrlOrCmd+[")],bringForward:[Q("CtrlOrCmd+]")],sendToBack:[Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Q("Shift+Alt+C")],group:[Q("CtrlOrCmd+G")],ungroup:[Q("CtrlOrCmd+Shift+G")],gridMode:[Q("CtrlOrCmd+'")],zenMode:[Q("Alt+Z")],objectsSnapMode:[Q("Alt+S")],stats:[Q("Alt+/")],addToLibrary:[],flipHorizontal:[Q("Shift+H")],flipVertical:[Q("Shift+V")],viewMode:[Q("Alt+R")],hyperlink:[Q("CtrlOrCmd+K")],toggleElementLock:[Q("CtrlOrCmd+Shift+L")],resetZoom:[Q("CtrlOrCmd+0")],zoomOut:[Q("CtrlOrCmd+-")],zoomIn:[Q("CtrlOrCmd++")],zoomToFitSelection:[Q("Shift+3")],zoomToFit:[Q("Shift+1")],zoomToFitSelectionInViewport:[Q("Shift+2")],toggleEraserTool:[Q("E")],toggleHandTool:[Q("H")],setFrameAsActiveTool:[Q("F")],saveFileToDisk:[Q("CtrlOrCmd+S")],saveToActiveFile:[Q("CtrlOrCmd+S")],toggleShortcuts:[Q("?")],searchMenu:[Q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Xi=(e,t=0)=>{const n=pye[e];return n&&n.length>0?n[t]||n[0]:""},Uye="\\u0300-\\u036f",bye="\\ufe20-\\ufe2f",yye="\\u20d0-\\u20ff",Eye=Uye+bye+yye,vye=`[${Eye}]`,wye=RegExp(vye,"g"),_ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tye={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},qR=e=>e.replace(_ye,t=>Tye[t]||t).replace(wye,""),$G=()=>{const[e,t]=L.useState(null),n=L.useCallback(i=>t(i),[]);return[e,n]};var fy={},Sye=Iye;function Iye(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var xye=Cye;function Cye(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}fy.encode=Sye;fy.decode=xye;var Aye=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},N_={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(N_);var Mye=Aye,Rye=N_,kye=Nye,wo=new Uint8Array(4),Lye=new Int32Array(wo.buffer),Dye=new Uint32Array(wo.buffer);function Nye(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];Dye[0]=l,r[n++]=wo[3],r[n++]=wo[2],r[n++]=wo[1],r[n++]=wo[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(Mye(a)),f=Rye.buf(d);Lye[0]=f,r[n++]=wo[3],r[n++]=wo[2],r[n++]=wo[1],r[n++]=wo[0]}return r}const Oye=gl(kye);var Pye=N_,Fye=Hye,_o=new Uint8Array(4),Bye=new Int32Array(_o.buffer),zye=new Uint32Array(_o.buffer);function Hye(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){_o[3]=e[i++],_o[2]=e[i++],_o[1]=e[i++],_o[0]=e[i++];var r=zye[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];_o[3]=e[i++],_o[2]=e[i++],_o[1]=e[i++],_o[0]=e[i++];var l=Bye[0],c=Pye.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const GG=gl(Fye),XG=async e=>{const n=GG(new Uint8Array(await ec(e))).find(i=>i.name==="tEXt");return n?fy.decode(n.data):null},YG=async({blob:e,metadata:t})=>{const n=GG(new Uint8Array(await ec(e))),i=fy.encode(ve.excalidraw,JSON.stringify(q$({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([Oye(n)],{type:ve.png})},Vye=async e=>{const t=await XG(e);if((t==null?void 0:t.keyword)===ve.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===vs.excalidraw)return t.text;throw new Error("FAILED")}return Q$(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},jG=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:Vye,encodePngMetadata:YG,getTEXtChunk:XG},Symbol.toStringTag,{value:"Module"})),hy=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=Ud({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return hG(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),U=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=f*U,{canvas:h,scale:U}}const m=(r==null?void 0:r(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},$ye=async e=>{var r;let{mimeType:t=ve.png,quality:n}=e;t===ve.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${ve.png}" mimeType`),t==="image/jpg"&&(t=ve.jpg),t===ve.jpg&&!((r=e.appState)!=null&&r.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${ve.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await hy(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((s,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===ve.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await YG({blob:a,metadata:Eg(e.elements,e.appState,e.files||{},"local")})),s(a)},t,n)})},WG=async({elements:e,appState:t=ea(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=Ud({elements:e,appState:t},null,null),u={...c,exportPadding:i};return I_(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},KG=Xt(new Map),QR=async e=>await WG({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Be.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),Gye=(e,t,n)=>{const[i,r]=L.useState();return L.useEffect(()=>{if(t)if(e){const s=n.get(e);s?r(s):(async()=>{var a;const o=await QR(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),r(o))})()}else(async()=>{const s=await QR(t);r(s)})()},[e,t,n,r]),i},ZG=()=>{const[e]=fn(KG);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},Xye=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],qG=new $s,bm=Xt({status:"loaded",isInitialized:!1,libraryItems:[]}),o1=e=>Xa(e),Yye=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),jye=(e,t)=>{const n=[];for(const i of t)Yye(e,i)&&n.push(i);return[...n,...e]},QG=(e,t)=>{const n=we(t),i={deletedItems:new Map,addedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=we(e);for(const s of t)r.has(s.id)||i.addedItems.set(s.id,s);return i};class Wye{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=o1(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)Pr.set(bm,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Pr.set(bm,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=o1(this.currLibraryItems);const s=o1(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,s),qG.trigger(QG(r,s),s)}catch(r){console.error(r)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Pr.set(KG,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(o1(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:ws.name,tab:Eb}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await e5e(c,o):u=ay(c,o),!i||window.confirm(k("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?jye(this.currLibraryItems,u):u)):l(new kh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=o1(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const JG=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,U)=>{const{height:E}=_s(U.elements);return Math.max(p,E)},0),s=h=>{let m=0,p=0,U=0;for(const E of e){if(m%n===0&&(p=0),p===h){const{width:y}=_s(E.elements);U=Math.max(U,y)}m++,p++}return U};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:U,height:E}=_s(h.elements),y=(c-U)/2,v=(l-E)/2;i.push(...h.elements.map(w=>({...w,x:w.x+o+y-m,y:w.y+a+v-p}))),o+=c+50,u++,d++}return i},Kye=(e,t=Xye)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},z4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(M7.addLibrary)||new URLSearchParams(window.location.search).get(A7.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},zl=class zl{static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(ay((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?zl.queue.push(r):r()}constructor(t){this.adapter=t}getLibraryItems(t){return zl.getLibraryItems(this.adapter,t,!1)}};zl.queue=new are,zl.run=async(t,n)=>{const i=new zl(t);return zl.queue.push(()=>n(i))};let sh=zl,E0=0,U6=0;const H4=e=>O9(e.map(t=>`${t.id}:${Ez(t.elements)}`).sort().join()),JR=async(e,t)=>{try{return U6++,await sh.run(e,async n=>{const i=we(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);const s=r.concat(Array.from(i.values())),o=H4(s);return o!==E0&&await e.save({libraryItems:s}),E0=o,s})}finally{U6--}},Zye=e=>{const{excalidrawAPI:t}=e,n=L.useRef(e);n.current=e;const i=L.useRef(!1);L.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=Ww(a),Kye(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(M7.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(M7.addLibrary),window.history.replaceState({},Va,`#${d.toString()}`)}else if(window.location.search.includes(A7.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(A7.addLibrary),window.history.replaceState({},Va,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=z4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=z4();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=y5();l?c.resolve(Rc(l.load).then(async u=>{let d=null;try{if(!u)return sh.getLibraryItems(a,"load");d=ay(u.libraryItems||[],"published");const f=await JR(a,QG([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),sh.getLibraryItems(a,"load")))):c.resolve(Rc(sh.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return E0=H4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(ee.HASHCHANGE,s),()=>{window.removeEventListener(ee.HASHCHANGE,s)}},[t]),L.useEffect(()=>{const r=qG.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&E0!==H4(a)&&await JR(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:k("errors.saveLibraryError")}})}}),s=o=>{U6&&Yw(o)};return window.addEventListener(ee.BEFORE_UNLOAD,s),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,s),r(),E0=0,U6=0}},[])},qye=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${m5.excalidrawLibrary}`,target:"_excalidraw_libraries",children:k("labels.libraries")})},eX=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>O("div",{className:me("library-menu-control-buttons",s),style:i,children:[g(qye,{id:n,libraryReturnUrl:e,theme:t}),r]}),Qye=Xt(0),Jye=e=>{const[t,n]=fn(Qye);return L.useEffect(()=>{const{current:i}=e;if(!i)return;const r=Do(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},Ph=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return O("button",{className:me("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(ol,{})})]})},tX=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=k("buttons.confirm"),cancelText:s=k("buttons.cancel"),className:o="",...a}=e,l=An(),c=k5(O_),{container:u}=aa();return O(qr,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,O("div",{className:"confirm-dialog-buttons",children:[g(Ph,{label:s,onClick:()=>{l({openMenu:null}),c(!1),_n.flushSync(()=>{n()}),u==null||u.focus()}}),g(Ph,{label:r,onClick:()=>{l({openMenu:null}),c(!1),_n.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class Xu{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(Xu,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(Xu,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const e8e=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,t8e=/{{([\w-]+)}}/,n8e=/<([\w-]+)>/,i8e=/<\/([\w-]+)>/,r8e=(e,t)=>{const n=[{name:"",children:[]}];return e.split(e8e).filter(Boolean).forEach(i=>{const r=i.match(n8e),s=i.match(i8e),o=i.match(t8e);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=oe.createElement(oe.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},Ur=({i18nKey:e,children:t,...n})=>{const{t:i}=En();return oe.createElement(oe.Fragment,{},...r8e(i(e),n))},s8e=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=Dre(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=fi.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await hy({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=fi.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await vG(new File([await gm(o)],"preview",{type:ve.png}),{outputType:ve.jpg,maxWidthOrHeight:5e3})},o8e=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=L.useRef(null),o=L.useRef(null);return L.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await WG({elements:e.elements,appState:{...t,viewBackgroundColor:fi.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),O("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:k("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(He,{"aria-label":k("buttons.remove"),type:"button",icon:gg,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:k("buttons.remove")}),O("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[O("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[O("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:fi.gray[6]},children:k("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},a8e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=L.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=L.useState(!1);L.useEffect(()=>{const v=Xu.get(i0.PUBLISH_LIBRARY);v&&l(v)},[]);const[d,f]=L.useState(t.slice());L.useEffect(()=>{f(t.slice())},[t]);const h=v=>{l({...a,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),u(!0);const w=[];let S=!1;if(d.forEach(R=>{let P="";R.name||(P=k("publishDialog.errors.required"),S=!0),w.push({...R,error:P})}),S){f(w),u(!1);return}const M=await s8e(d),_={type:vs.excalidrawLibrary,version:m5.excalidrawLibrary,source:Ow(),libraryItems:d},T=JSON.stringify(_,null,2),C=new Blob([T],{type:"application/json"}),x=new FormData;x.append("excalidrawLib",C),x.append("previewImage",M),x.append("previewImageType",M.type),x.append("title",a.name),x.append("authorName",a.authorName),x.append("githubHandle",a.githubHandle),x.append("name",a.name),x.append("description",a.description),x.append("twitterHandle",a.twitterHandle),x.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:x}).then(R=>R.ok?R.json().then(({url:P})=>{Xu.delete(i0.PUBLISH_LIBRARY),i({url:P,authorName:a.authorName,items:d})}):R.json().catch(()=>{throw new Error(R.statusText||"something went wrong")}).then(P=>{throw new Error(P.message||R.statusText||"something went wrong")}),R=>{console.error(R),r(R),u(!1)}).catch(R=>{console.error(R),r(R),u(!1)})},p=()=>{const v=[];return d.forEach((w,S)=>{v.push(g("div",{className:"single-library-item-wrapper",children:g(o8e,{libItem:w,appState:n,index:S,onChange:(M,_)=>{const T=d.slice();T[_].name=M,f(T)},onRemove:o})},S))}),g("div",{className:"selected-library-items",children:v})},U=L.useCallback(()=>{s(d),Xu.set(i0.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),E=!!t.length,y=t.some(v=>v.status==="published");return g(qr,{onCloseRequest:U,title:k("publishDialog.title"),className:"publish-library",children:E?O("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(Ur,{i18nKey:"publishDialog.noteDescription",link:v=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener",children:v})})}),g("span",{className:"publish-library-note",children:g(Ur,{i18nKey:"publishDialog.noteGuidelines",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("div",{className:"publish-library-note",children:k("publishDialog.noteItems")}),y&&g("span",{className:"publish-library-note publish-library-warning",children:k("publishDialog.republishWarning")}),p(),O("div",{className:"publish-library__fields",children:[O("label",{children:[O("div",{children:[g("span",{children:k("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:k("publishDialog.placeholder.libraryName")})]}),O("label",{style:{alignItems:"flex-start"},children:[O("div",{children:[g("span",{children:k("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:k("publishDialog.placeholder.libraryDesc")})]}),O("label",{children:[O("div",{children:[g("span",{children:k("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:k("publishDialog.placeholder.authorName")})]}),O("label",{children:[g("span",{children:k("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:k("publishDialog.placeholder.githubHandle")})]}),O("label",{children:[g("span",{children:k("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:k("publishDialog.placeholder.twitterHandle")})]}),O("label",{children:[g("span",{children:k("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:k("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:k("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(Ur,{i18nKey:"publishDialog.noteLicense",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),O("div",{className:"publish-library__buttons",children:[g(Ph,{label:k("buttons.cancel"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),g(Ph,{type:"submit",label:k("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:k("publishDialog.atleastOneLibItem")})})},l8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:me("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),c8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:me("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),bs={Row:l8e,Col:c8e},nX=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r})=>{const s=ii(),o=L.useRef(null),a=X5({onClickOutside:t});u_(o,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),L.useEffect(()=>{const c=d=>{var f;d.key===H.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(ee.KEYDOWN,c,u),()=>{document.removeEventListener(ee.KEYDOWN,c,u)}},[a]);const l=me(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return g(QV.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:r,"data-testid":"dropdown-menu",children:s.editor.isMobile?g(bs.Col,{className:"dropdown-menu-container",children:e}):g(eo,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};nX.displayName="DropdownMenuContent";const u8e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),v0=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noopener",...l})=>{const c=e$(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:a||"noopener",className:JV(s,o),title:l.title??l["aria-label"],onClick:c,children:g(qV,{icon:e,shortcut:t,children:i})})};v0.displayName="DropdownMenuItemLink";const iX=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});iX.displayName="DropdownMenuSeparator";const rX=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=ii(),o=me(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};rX.displayName="DropdownMenuTrigger";const d8e=e=>{const t=oe.Children.toArray(e).find(n=>oe.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},f8e=e=>{const t=oe.Children.toArray(e).find(n=>oe.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},Qe=({children:e,open:t})=>{const n=d8e(e),i=f8e(e);return O(he,{children:[n,t&&i]})};Qe.Trigger=rX;Qe.Content=nX;Qe.Item=Tr;Qe.ItemLink=v0;Qe.ItemCustom=u8e;Qe.Group=o6;Qe.Separator=iX;Qe.displayName="DropdownMenu";const h8e=(e,t)=>e.filter(n=>t.includes(n.id)),g8e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=fn(bm),[c,u]=fn(O_),d=()=>{const x=t.length?k("alerts.removeItemsFromsLibrary",{count:t.length}):k("alerts.resetLibrary"),R=t.length?k("confirmDialog.removeItemsFromLib"):k("confirmDialog.resetLibrary");return g(tX,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:R,children:g("p",{children:x})})},[f,h]=L.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(x=>t.includes(x.id)):l.libraryItems,U=k(m?"buttons.remove":"buttons.resetLibrary"),[E,y]=L.useState(!1),[v,w]=L.useState(null),S=L.useCallback(()=>O(qr,{onCloseRequest:()=>w(null),title:k("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(Ur,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:x=>g("a",{href:v==null?void 0:v.url,target:"_blank",rel:"noopener noreferrer",children:x})})}),g(He,{type:"button",title:k("buttons.close"),"aria-label":k("buttons.close"),label:k("buttons.close"),onClick:()=>w(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[w,v]),M=(x,R)=>{y(!1),w({url:x.url,authorName:x.authorName});const P=R.slice();P.forEach(D=>{t.includes(D.id)&&(D.status="published")}),n.setLibrary(P)},_=async()=>{try{await n.updateLibrary({libraryItems:T_({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(x){if((x==null?void 0:x.name)==="AbortError"){console.warn(x);return}e({errorMessage:k("errors.importLibraryError")})}},T=async()=>{const x=m?p:await n.getLatestLibrary();D6e(x).catch(kF).catch(R=>{e({errorMessage:R.message})})},C=()=>O(Qe,{open:c,children:[g(Qe.Trigger,{onToggle:()=>u(!c),children:uue}),O(Qe.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(Qe.Item,{onSelect:_,icon:X9,"data-testid":"lib-dropdown--load",children:k("buttons.load")}),!!p.length&&g(Qe.Item,{onSelect:T,icon:O5,"data-testid":"lib-dropdown--export",children:k("buttons.export")}),!!p.length&&g(Qe.Item,{onSelect:()=>h(!0),icon:ad,children:U}),m&&g(Qe.Item,{icon:bde,onSelect:()=>y(!0),"data-testid":"lib-dropdown--remove",children:k("buttons.publishLibrary")})]})]});return O("div",{className:me("library-menu-dropdown-container",a),children:[C(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),E&&g(a8e,{onClose:()=>y(!1),libraryItems:h8e(l.libraryItems,t),appState:o,onSuccess:x=>M(x,l.libraryItems),onError:x=>window.alert(x),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:x=>s(t.filter(R=>R!==x))}),v&&S()]})},ek=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=ho(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=ZG(),o=Ai(),a=An(),[l]=fn(bm),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:k("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(g8e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function m8e(){return[!1,L.useCallback(t=>t(),[])]}const p8e=oe.useTransition||m8e,U8e=L.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=L.useRef(null),c=Gye(e,t,a);L.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=L.useState(!1),f=ii().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:cue});return O("div",{className:me("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:me("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(b_,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),b8e=()=>g("div",{className:"library-unit library-unit--skeleton"}),tk=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),VE=L.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=p8e(),[l,c]=L.useState(0);return L.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(he,{children:e.map((u,d)=>d<l?g(U8e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:r,svgCache:s,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(b8e,{},d))})}),y8e=17,E8e=64;function v8e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=L.useRef(null),d=Jye(u);L.useEffect(()=>{var x;d>0&&((x=u.current)==null||x.scrollTo(0,d))},[]);const{svgCache:f}=ZG(),h=L.useMemo(()=>t.filter(x=>x.status!=="published"),[t]),m=L.useMemo(()=>t.filter(x=>x.status==="published"),[t]),p=!t.length&&!r.length,U=!r.length&&!h.length&&!m.length,[E,y]=L.useState(null),v=L.useCallback((x,R)=>{const P=!c.includes(x),D=[...h,...m];if(P){if(R.shiftKey&&E){const $=D.findIndex(Y=>Y.id===E),z=D.findIndex(Y=>Y.id===x);if($===-1||z===-1){l([...c,x]);return}const V=we(c),G=D.reduce((Y,X,Z)=>((Z>=$&&Z<=z||V.has(X.id))&&Y.push(X.id),Y),[]);l(G)}else l([...c,x]);y(x)}else y(null),l(c.filter($=>$!==x))},[E,l,m,c,h]),w=L.useCallback(x=>{let R;return c.includes(x)?R=t.filter(P=>c.includes(P.id)):R=t.filter(P=>P.id===x),R.map(P=>({...P,elements:Zb({type:"everything",elements:P.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),S=L.useCallback((x,R)=>{R.dataTransfer.setData(ve.excalidrawlib,rG(w(x)))},[w]),M=L.useCallback(x=>x?c.includes(x):!1,[c]),_=L.useCallback(()=>{n(r)},[r,n]),T=L.useCallback(x=>{x&&i(w(x))},[w,i]),C=f.size>=t.length?E8e:y8e;return O("div",{className:"library-menu-items-container",style:r.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!U&&g(ek,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),O(bs.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[O(he,{children:[!U&&g("div",{className:"library-menu-items-container__header",children:k("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(ol,{})}),!r.length&&!h.length?O("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:k("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?k("library.hint_emptyPrivateLibrary"):k("library.hint_emptyLibrary")})]}):O(tk,{children:[r.length>0&&g(VE,{itemsRenderedPerBatch:C,items:[{id:null,elements:r}],onItemSelectToggle:v,onItemDrag:S,onClick:_,isItemSelected:M,svgCache:f}),g(VE,{itemsRenderedPerBatch:C,items:h,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:M,svgCache:f})]})]}),O(he,{children:[(m.length>0||r.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:k("labels.excalidrawLib")}),m.length>0?g(tk,{children:g(VE,{itemsRenderedPerBatch:C,items:m,onItemSelectToggle:v,onItemDrag:S,onClick:T,isItemSelected:M,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:k("library.noItems")}):null]}),p&&g(eX,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:g(ek,{selectedItems:c,onSelectItems:l})})]})]})}const O_=Xt(!1),nk=({children:e})=>g("div",{className:"layer-ui__library",children:e}),w8e=L.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=fn(bm),d=L.useCallback(m=>{(async(U,E)=>{st("element","addToLibrary","ui");for(const v of UF)if(U.some(w=>w.type===v))return i({errorMessage:k(`errors.libraryElementTypeError.${v}`)});const y=[{status:"unpublished",elements:U,id:rr(),created:Date.now()},...E];n(),s.setLibrary(y).catch(()=>{i({errorMessage:k("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=L.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(nk,{children:g("div",{className:"layer-ui__library-message",children:O("div",{children:[g(ol,{size:"2em"}),g("span",{children:k("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return O(nk,{children:[g(v8e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(eX,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),$E=(e,t)=>({elements:e,pending:Fe(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),_8e=(e,t)=>{const n=by(),[i,r]=L.useState(()=>$E(n,e.selectedElementIds)),s=L.useRef(new Map);return L.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),L.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{var l;if(!Gi(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),$E(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==s.current.get(c))return $E(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},T8e=L.memo(()=>{const e=ho(),{onInsertElements:t}=e,n=Up(),i=Ai(),r=An(),[s,o]=L.useState([]),a=L.useMemo(()=>e.library,[e.library]),l=_8e(i,e),c=L.useCallback(d=>{t(JG(d))},[t]),u=L.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(w8e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),S8e=e=>{const{closeOnClickOutside:t=!0}=e,n=YV({className:"excalidraw-modal-container"}),i=L.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===H.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return _n.createPortal(O("div",{className:me("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function I8e(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const qr=e=>{const[t,n]=$G(),[i]=L.useState(document.activeElement),{id:r}=aa(),s=ii().viewport.isMobile;L.useEffect(()=>{if(!t)return;const c=D7(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===H.TAB){const f=D7(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=An(),a=k5(O_),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(S8e,{className:me("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:I8e(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:O(eo,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:k("buttons.close"),"aria-label":k("buttons.close"),type:"button",children:gg}),g("div",{className:"Dialog__content",children:e.children})]})})},Fh=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:E5(s.onClick,o=>{t()}),type:e,className:me("excalidraw-button",r,{selected:n}),...s,children:i}),Bh=L.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=L.useRef(null);L.useImperativeHandle(d,()=>f.current),L.useLayoutEffect(()=>{var p,U;s&&((p=f.current)==null||p.focus(),(U=f.current)==null||U.select())},[s]);const[h,m]=L.useState(!1);return O("div",{className:me("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var p;(p=f.current)==null||p.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),O("div",{className:me("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:me({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:r,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e==null?void 0:e(p.target.value),onKeyDown:o}),a&&g(Fh,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?Cde:j9})]})]})}),P_=[{icon:pue,value:"selection",key:H.V,numericKey:H[1],fillable:!0},{icon:vH,value:"rectangle",key:H.R,numericKey:H[2],fillable:!0},{icon:wH,value:"diamond",key:H.D,numericKey:H[3],fillable:!0},{icon:_H,value:"ellipse",key:H.O,numericKey:H[4],fillable:!0},{icon:Uue,value:"arrow",key:H.A,numericKey:H[5],fillable:!0},{icon:TH,value:"line",key:H.L,numericKey:H[6],fillable:!0},{icon:N5,value:"freedraw",key:[H.P,H.X],numericKey:H[7],fillable:!1},{icon:V9,value:"text",key:H.T,numericKey:H[8],fillable:!1},{icon:yue,value:"image",key:null,numericKey:H[9],fillable:!1},{icon:Eue,value:"eraser",key:H.E,numericKey:H[0],fillable:!1}],x8e=e=>{const t=P_.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null};var C8e={};const ik=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(C8e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},A8e=e=>e?ik(e):ik;var sX={exports:{}},oX={},aX={exports:{}},lX={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh=L;function M8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var R8e=typeof Object.is=="function"?Object.is:M8e,k8e=zh.useState,L8e=zh.useEffect,D8e=zh.useLayoutEffect,N8e=zh.useDebugValue;function O8e(e,t){var n=t(),i=k8e({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return D8e(function(){r.value=n,r.getSnapshot=t,GE(r)&&s({inst:r})},[e,n,t]),L8e(function(){return GE(r)&&s({inst:r}),e(function(){GE(r)&&s({inst:r})})},[e]),N8e(n),n}function GE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!R8e(e,n)}catch{return!0}}function P8e(e,t){return t()}var F8e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P8e:O8e;lX.useSyncExternalStore=zh.useSyncExternalStore!==void 0?zh.useSyncExternalStore:F8e;aX.exports=lX;var B8e=aX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy=L,z8e=B8e;function H8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var V8e=typeof Object.is=="function"?Object.is:H8e,$8e=z8e.useSyncExternalStore,G8e=gy.useRef,X8e=gy.useEffect,Y8e=gy.useMemo,j8e=gy.useDebugValue;oX.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=G8e(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Y8e(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,V8e(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=$8e(e,s[0],s[1]);return X8e(function(){o.hasValue=!0,o.value=a},[a]),j8e(a),a};sX.exports=oX;var W8e=sX.exports;const K8e=gl(W8e);var cX={};const{useDebugValue:Z8e}=oe,{useSyncExternalStoreWithSelector:q8e}=K8e;let rk=!1;const Q8e=e=>e;function J8e(e,t=Q8e,n){(cX?"production":void 0)!=="production"&&n&&!rk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rk=!0);const i=q8e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Z8e(i),i}const sk=e=>{(cX?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?A8e(e):e,n=(i,r)=>J8e(t,i,r);return Object.assign(n,t),n},eEe=e=>e?sk(e):sk;var ok,ak;const lk=typeof window<"u"&&((ok=window.document)!=null&&ok.createElement||((ak=window.navigator)==null?void 0:ak.product)==="ReactNative")?oe.useLayoutEffect:oe.useEffect;function bo(){const e=eEe(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return lk(()=>{n(r=>({version:r.version+1}))},[]),lk(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return oe.createElement(oe.Fragment,null,t)}}}const uX=oe.createContext(null),cr=()=>oe.useContext(uX),tEe=Cz(),nEe=()=>oe.useMemo(()=>({MainMenuTunnel:bo(),WelcomeScreenMenuHintTunnel:bo(),WelcomeScreenToolbarHintTunnel:bo(),WelcomeScreenHelpHintTunnel:bo(),WelcomeScreenCenterTunnel:bo(),FooterCenterTunnel:bo(),DefaultSidebarTriggerTunnel:bo(),DefaultSidebarTabTriggersTunnel:bo(),OverwriteConfirmDialogTunnel:bo(),TTDDialogTriggerTunnel:bo(),tunnelsJotai:tEe}),[]),dX=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const r of t)if(r.type!==n){n=null;break}return X7(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(r=>X7(r.type))},fX=(e,t)=>Mh(e.activeTool.type)||t.some(n=>Mh(n.type)),hX=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const r=CB(t,e);let s=!1;r.length===2&&(sr(r[0])||sr(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=ii(),l=document.documentElement.getAttribute("dir")==="rtl",c=Mh(e.activeTool.type)&&!Us(e.currentItemBackgroundColor)||r.some(m=>Mh(m.type)&&!Us(m.backgroundColor)),u=r.length===1||s,d=!e.editingLinearElement&&r.length===1&&Ie(r[0])&&!de(r[0]),f=!e.croppingElementId&&r.length===1&&wt(r[0]),h=!s&&Zr(e,i);return O("div",{className:"selected-shape-actions",children:[g("div",{children:dX(e,r)&&n("changeStrokeColor")}),fX(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(JC(e.activeTool.type)||r.some(m=>JC(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(eA(e.activeTool.type)||r.some(m=>eA(m.type)))&&O(he,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(Y7(e.activeTool.type)||r.some(m=>Y7(m.type)))&&g(he,{children:n("changeRoundness")}),(tA(e.activeTool.type)||r.some(m=>tA(m.type)))&&g(he,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(ue))&&O(he,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||Koe(r,t))&&n("changeTextAlign")]}),Woe(r,t)&&n("changeVerticalAlign"),(jb(e.activeTool.type)||r.some(m=>jb(m.type)))&&g(he,{children:n("changeArrowhead")}),n("changeOpacity"),O("fieldset",{children:[g("legend",{children:k("labels.layers")}),O("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&O("fieldset",{children:[g("legend",{children:k("labels.align")}),O("div",{className:"buttonList",children:[l?O(he,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):O(he,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),O("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&O("fieldset",{children:[g("legend",{children:k("labels.actions")}),O("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},gX=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[r,s]=L.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="lasso",c=e.type==="embeddable",{TTDDialogTriggerTunnel:u}=cr();return O(he,{children:[P_.map(({value:d,icon:f,key:h,numericKey:m,fillable:p},U)=>{var w;if(((w=i.tools)==null?void 0:w[d])===!1)return null;const E=k(`toolBar.${d}`),y=h&&a0(typeof h=="string"?h:h[0]),v=y?`${y} ${k("helpDialog.or")} ${m}`:`${m}`;return g(He,{className:me("Shape",{fillable:p}),type:"radio",icon:f,checked:e.type===d,name:"editor-current-shape",title:`${a0(E)} — ${v}`,keyBindingLabel:m||y,"aria-label":a0(E),"aria-keyshortcuts":v,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:S})=>{!t.penDetected&&S==="pen"&&n.togglePenMode(!0),d==="selection"&&(t.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:S})=>{t.activeTool.type!==d&&st("toolbar",d,"ui"),d==="image"?n.setActiveTool({type:d}):n.setActiveTool({type:d})}},d)}),g("div",{className:"App-toolbar__divider"}),O(Qe,{open:r,children:[g(Qe.Trigger,{className:me("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!r),title:k("toolBar.extraTools"),children:o?t6:c?$A:a&&!n.props.isCollaborating?U4:l?f4:Ide}),O(Qe.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:t6,shortcut:H.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:k("toolBar.frame")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:$A,"data-testid":"toolbar-embeddable",selected:c,children:k("toolBar.embeddable")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:U4,"data-testid":"toolbar-laser",selected:a,shortcut:H.K.toLocaleUpperCase(),children:k("toolBar.laser")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:f4,"data-testid":"toolbar-lasso",selected:l,children:k("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(u.Out,{}),g(Qe.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:OH,"data-testid":"toolbar-embeddable",children:k("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(he,{children:O(Qe.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:PH,"data-testid":"toolbar-magicframe",children:[k("toolBar.magicframe"),g(Qe.Item.Badge,{children:"AI"})]})})]})]})]})},iEe=({renderAction:e,zoom:t})=>g(bs.Col,{gap:1,className:Ac.ZOOM_ACTIONS,children:O(bs.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),rEe=({renderAction:e,className:t})=>O("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(dd,{label:k("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:O(dd,{label:k("buttons.redo"),children:[" ",e("redo")]})})]}),sEe=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:me("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(D4),children:k("buttons.exitZenMode")}),oEe=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),ck=e=>{const t=L.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},my=Xt(null),aEe=()=>{const[e,t]=fn(my),n=Sr();return e&&e==="clearCanvas"?g(tX,{onConfirm:()=>{n.executeAction(m0),t(null)},onCancel:()=>t(null),title:k("clearCanvasDialog.title"),children:O("p",{className:"clear-canvas__content",children:[" ",k("alerts.clearReset")]})}):null},lEe={...a6,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(a6,"commandPalette")}},cEe=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:lEe},Symbol.toStringTag,{value:"Module"})),uEe=Xt(null),nt={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},dEe=e=>{switch(e){case nt.app:return 1;case nt.export:return 2;case nt.editor:return 3;case nt.tools:return 4;case nt.elements:return 5;case nt.links:return 6;default:return 10}},R2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return O("div",{className:me("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},mX=e=>!e.altKey&&e[H.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===H.P||e.key===H.SLASH),uk=Object.assign(e=>{var i;const t=Ai(),n=An();return L.useEffect(()=>{const r=s=>{mX(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&st("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(ee.KEYDOWN,r,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,r,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(fEe,{...e})},{defaultItems:cEe});function fEe({customCommandPaletteItems:e}){const t=ho(),n=Ai(),i=An(),r=Up(),s=Sr(),[o,a]=fn(uEe),[l,c]=L.useState(null),u=L.useRef(null),d=X5({uiAppState:n,customCommandPaletteItems:e,appProps:r});L.useEffect(()=>{const{uiAppState:M,customCommandPaletteItems:_,appProps:T}=d,C=D=>{let $="";return D.label&&(typeof D.label=="function"?$=k(D.label(t.scene.getNonDeletedElements(),M,t)):$=k(D.label)),$},x=D=>typeof D.icon=="function"?D.icon(M,t.scene.getNonDeletedElements()):D.icon;let R=[];const P=(D,$,z)=>{const V={label:C(D),icon:x(D),category:$,shortcut:Xi(D.name),keywords:D.keywords,predicate:D.predicate,viewMode:D.viewMode,perform:()=>{s.executeAction(D,"commandPalette")}};return z?z(V,D):V};if(M&&t.scene&&s){const D=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,s.actions.togglePolygon,OG,VG,mye].map(X=>P(X,nt.elements,(Z,Ue)=>({...Z,predicate:Ue.predicate?Ue.predicate:(re,be,Ye,je)=>Fe(re,be).length>0}))),$=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool,s.actions.toggleLassoTool].map(X=>P(X,nt.tools)),z=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(X=>P(X,nt.editor)),V=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(X=>P(X,nt.export));R=[...D,...z,{label:C(m0),icon:x(m0),shortcut:Xi(m0.name),category:nt.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Pr.set(my,"clearCanvas")}},{label:k("buttons.exportImage"),category:nt.export,icon:CH,shortcut:Xi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...V];const G=[{label:k("toolBar.library"),category:nt.app,icon:z9,viewMode:!1,perform:()=>{M.openSidebar?i({openSidebar:null}):i({openSidebar:{name:ws.name,tab:ws.defaultTab}})}},{label:k("search.title"),category:nt.app,icon:ld,viewMode:!0,perform:()=>{s.executeAction(pX)}},{label:k("labels.shapeSwitch"),category:nt.elements,icon:b4,perform:()=>{s.executeAction(gye)}},{label:k("labels.changeStroke"),keywords:["color","outline"],category:nt.elements,icon:lE,viewMode:!1,predicate:(X,Z)=>{const Ue=Fe(X,Z);return Ue.length>0&&dX(Z,Ue)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:k("labels.changeBackground"),keywords:["color","fill"],icon:lE,category:nt.elements,viewMode:!1,predicate:(X,Z)=>{const Ue=Fe(X,Z);return Ue.length>0&&fX(Z,Ue)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:k("labels.canvasBackground"),keywords:["color"],icon:lE,category:nt.editor,viewMode:!1,perform:()=>{i(X=>({openMenu:X.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...P_.reduce((X,Z)=>{var Yn;const{value:Ue,icon:re,key:be,numericKey:Ye}=Z;if(((Yn=T.UIOptions.tools)==null?void 0:Yn[Ue])===!1)return X;const St=be&&a0(typeof be=="string"?be:be[0])||Ye,hn={label:k(`toolBar.${Ue}`),category:nt.tools,shortcut:St,icon:re,keywords:["toolbar"],viewMode:!1,perform:({event:pi})=>{Ue==="image"?t.setActiveTool({type:Ue}):t.setActiveTool({type:Ue})}};return X.push(hn),X},[]),...$,{label:k("toolBar.lock"),category:nt.tools,icon:M.activeTool.locked?H9:D5,shortcut:H.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${k("labels.textToDiagram")}...`,category:nt.tools,icon:Mde,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${k("toolBar.mermaidToExcalidraw")}...`,category:nt.tools,icon:OH,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"mermaid"}}))}}],Y=[...R,...G,..._||[]].map(X=>{var Z;return{...X,icon:X.icon||b4,order:X.order??dEe(X.category),haystack:`${qR(X.label.toLocaleLowerCase())} ${((Z=X.keywords)==null?void 0:Z.join(" "))||""}`}});c(Y),a(Y.find(X=>X.label===(o==null?void 0:o.label))??null)}},[d,t,s,c,o==null?void 0:o.label,a,i]);const[f,h]=L.useState(""),[m,p]=L.useState(null),[U,E]=L.useState({}),y=M=>{i({openDialog:null},M),h("")},v=(M,_)=>{var T;((T=n.openDialog)==null?void 0:T.name)==="commandPalette"&&(_.stopPropagation(),_.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),y(()=>{M.perform({actionManager:s,event:_}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},w=ck(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,r,t):M.predicate===void 0||M.predicate),S=ck(M=>{var x;const _=pu(M.target)||mX(M)||M.key===H.ESCAPE;if(_&&M.key!==H.ARROW_UP&&M.key!==H.ARROW_DOWN&&M.key!==H.ENTER)return;const T=Object.values(U).flat(),C=o&&!f&&w(o);if(M.key===H.ARROW_UP){M.preventDefault();const R=T.findIndex($=>$.label===(m==null?void 0:m.label));if(C){if(R===0){p(o);return}if(m===o){const $=T[T.length-1];$&&p($);return}}let P;R===-1?P=T.length-1:P=R===0?T.length-1:(R-1)%T.length;const D=T[P];D&&p(D);return}if(M.key===H.ARROW_DOWN){M.preventDefault();const R=T.findIndex($=>$.label===(m==null?void 0:m.label));if(C){if(!m||R===T.length-1){p(o);return}if(m===o){const $=T[0];$&&p($);return}}const P=(R+1)%T.length,D=T[P];D&&p(D);return}if(M.key===H.ENTER&&m&&setTimeout(()=>{v(m,M)}),!_){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(x=u==null?void 0:u.current)==null||x.focus();return}M.preventDefault()}});return L.useEffect(()=>(window.addEventListener(ee.KEYDOWN,S,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,S,{capture:!0})),[S]),L.useEffect(()=>{if(!l)return;const M=x=>{const R={};for(const P of x)R[P.category]?R[P.category].push(P):R[P.category]=[P];return R};let _=l.filter(w).sort((x,R)=>x.order-R.order);const T=!f&&o&&w(o);if(!f){E(M(T?_.filter(x=>x.label!==(o==null?void 0:o.label)):_)),p(T?o:_[0]||null);return}const C=qR(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));_=nye.filter(C,_,{extract:x=>x.haystack}).sort((x,R)=>R.score-x.score).map(x=>x.original),E(M(_)),p(_[0]??null)},[f,l,w,o]),O(qr,{onCloseRequest:()=>y(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Bh,{value:f,placeholder:k("commandPalette.search.placeholder"),onChange:M=>{h(M)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&O("div",{className:"shortcuts-wrapper",children:[g(R2,{shortcut:"↑↓",children:k("commandPalette.shortcuts.select")}),g(R2,{shortcut:"↵",children:k("commandPalette.shortcuts.confirm")}),g(R2,{shortcut:Q("Esc"),children:k("commandPalette.shortcuts.close")})]}),O("div",{className:"commands",children:[o&&!f&&O("div",{className:"command-category",children:[O("div",{className:"command-category-title",children:[k("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:Rde})]}),g(dk,{command:o,isSelected:o.label===(m==null?void 0:m.label),onClick:M=>v(o,M),disabled:!w(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(U).length>0?Object.keys(U).map((M,_)=>O("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:M}),U[M].map(T=>g(dk,{command:T,isSelected:T.label===(m==null?void 0:m.label),onClick:C=>v(T,C),onMouseMove:()=>p(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},M)):l?O("div",{className:"no-match",children:[g("div",{className:"icon",children:ld})," ",k("commandPalette.search.noMatch")]}):null]})]})}const dk=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o})=>{const a=()=>{};return O("div",{className:me("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:r,onMouseMove:n?a:i,title:n?k("commandPalette.itemNotAvailable"):"",children:[O("div",{className:"name",children:[e.icon&&g(W5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&g(R2,{shortcut:e.shortcut})]})},hEe=se({name:"toggleLinearEditor",category:nt.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&r.length===1&&Ie(r[0])&&!de(r[0]))},perform(e,t,n,i){var o;const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===r.id?null:new ce(r,we(e));return{appState:{...t,editingLinearElement:s},captureUpdate:W.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],r=k(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(He,{type:"button",icon:Gde,title:r,"aria-label":r,onClick:()=>t(null)})}});se({name:"togglePolygon",category:nt.elements,icon:BA,keywords:["loop"],label:(e,t,n)=>!n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds}).some(s=>!ln(s)||!s.polygon)?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds});return r.length>0&&r.every(s=>ln(s)&&s.points.length>=4)},perform(e,t,n,i){const r=i.scene.getSelectedElements(t);if(r.some(l=>!ln(l)))return!1;const s=r,o=s.some(l=>!l.polygon),a=we(s);return{elements:e.map(l=>!a.has(l.id)||!ln(l)?l:Te(l,{backgroundColor:o?l.backgroundColor:"transparent",..._9(l,o)})),appState:t,captureUpdate:W.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds});if(i.length===0||i.some(o=>!ln(o)||!o.polygon||o.points.length<3))return null;const r=i.every(o=>ln(o)&&o.polygon),s=k(r?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon");return g(K9,{icon:BA,title:s,"aria-label":s,active:r,onClick:()=>t(null),style:{marginLeft:"auto"}})}});const pX=se({name:"searchMenu",icon:ld,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var r,s;if(t.openDialog)return!1;if(((r=t.openSidebar)==null?void 0:r.name)===ws.name&&t.openSidebar.tab===Fu){const o=(s=i.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${Ac.SEARCH_MENU_INPUT_WRAPPER} input`);return o==null||o.focus(),o==null||o.select(),!1}return{appState:{...t,openSidebar:{name:ws.name,tab:Fu},openDialog:null},captureUpdate:W.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.F}),gEe=se({name:"cropEditor",label:"helpDialog.cropStart",icon:oM,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:W.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&wt(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=k("helpDialog.cropStart");return g(He,{type:"button",icon:oM,title:i,"aria-label":i,onClick:()=>t(null)})}}),UX=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&Ee(n[0])},mEe=se({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(Ee(r)){const s=Rs(Ot(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:W.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:W.EVENTUALLY}},predicate:(e,t,n,i)=>UX(t,i)}),pEe=se({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return Ee(r)?{elements:RB(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:W.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:W.EVENTUALLY}},predicate:(e,t,n,i)=>UX(t,i)});se({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:W.EVENTUALLY}),checked:e=>e.frameRendering.enabled});se({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:t6,viewMode:!1,perform:(e,t,n,i)=>{const r=Wt(t,{type:"frame"});return vo(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:Wt(t,{type:"frame"})},captureUpdate:W.EVENTUALLY}},keyTest:e=>!e[H.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===H.F});const UEe=se({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Fe(e,t);return r.length>0&&!r.some(s=>Ee(s))},perform:(e,t,n,i)=>{const r=Fe(e,t),s=i.scene.getNonDeletedElementsMap(),[o,a,l,c]=mt(r,s),u=16,d=M9({x:o-u,y:a-u,width:l-o+u*2,height:c-a+u*2});if(t.editingGroupId){const h=At(r,t.editingGroupId);for(const m of h){const p=m.groupIds.indexOf(t.editingGroupId);mi(m,s,{groupIds:m.groupIds.slice(0,p)})}}return{elements:u0([...i.scene.getElementsIncludingDeleted(),d],r,d,t),appState:{selectedElementIds:{[d.id]:!0}},captureUpdate:W.IMMEDIATELY}}});class DU extends WB{applyTo(t,n,i){const[r,s]=this.elements.applyTo(t,i.elements,{excludedProperties:new Set(["version","versionNonce"])}),[o,a]=this.appState.applyTo(n,r);return[r,o,s||a]}static calculate(t,n){return super.calculate(t,n)}static inverse(t){return super.inverse(t)}static applyLatestChanges(t,n,i,r){return super.applyLatestChanges(t,n,i,r)}}class b6{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class Cu{constructor(t){F(this,"onHistoryChangedEmitter",new $s);F(this,"undoStack",[]);F(this,"redoStack",[]);this.store=t}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t){if(t.isEmpty()||t instanceof DU)return;const n=DU.inverse(t);this.undoStack.push(n),n.elements.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new b6(this.isUndoStackEmpty,this.isRedoStackEmpty))}undo(t,n){return this.perform(t,n,()=>Cu.pop(this.undoStack),i=>Cu.push(this.redoStack,i))}redo(t,n){return this.perform(t,n,()=>Cu.pop(this.redoStack),i=>Cu.push(this.undoStack,i))}perform(t,n,i,r){try{let s=i();if(s===null)return;const o=W.IMMEDIATELY;let a=this.store.snapshot,l=t,c=n,u=!1;for(;s;){try{[l,c,u]=s.applyTo(l,c,a);const d=a.elements,f=a.maybeClone(o,l,c),h=Zf.create(a,f),m=DU.applyLatestChanges(s,d,l);m.isEmpty()||(this.store.scheduleMicroAction({action:o,change:h,delta:m}),s=m),a=f}finally{r(s)}if(u)break;s=i()}return[l,c]}finally{this.onHistoryChangedEmitter.trigger(new b6(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n){const i=DU.inverse(n);return t.push(i)}}const bX=(e,t)=>{const[n,i]=L.useState(t);return L.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},yX=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:W.EVENTUALLY};const[r,s]=i,o=C9(Array.from(r.values()));return{appState:s,elements:o,captureUpdate:W.NEVER}}return{captureUpdate:W.EVENTUALLY}},bEe=e=>({name:"undo",label:"buttons.undo",icon:XA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>yX(r,n,()=>e.undo(we(t),n)),keyTest:t=>t[H.CTRL_OR_CMD]&&R7(t,H.Z)&&!t.shiftKey,PanelComponent:({updateData:t,data:n})=>{const{isUndoStackEmpty:i}=bX(e.onHistoryChangedEmitter,new b6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(He,{type:"button",icon:XA,"aria-label":k("buttons.undo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),yEe=e=>({name:"redo",label:"buttons.redo",icon:YA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>yX(r,n,()=>e.redo(we(t),n)),keyTest:t=>t[H.CTRL_OR_CMD]&&t.shiftKey&&R7(t,H.Z)||aF&&t.ctrlKey&&!t.shiftKey&&R7(t,H.Y),PanelComponent:({updateData:t,data:n})=>{const{isRedoStackEmpty:i}=bX(e.onHistoryChangedEmitter,new b6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(He,{type:"button",icon:YA,"aria-label":k("buttons.redo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),EEe=se({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Fe(e,t);return r.length===1&&ue(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=Fe(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&ue(s)){const o=Hn(s.originalText,dt(s),s.lineHeight);return Te(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:W.IMMEDIATELY}}}),fk=se({name:"viewMode",label:"labels.viewMode",icon:j9,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:W.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===Je.R}),XE=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&st(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class vEe{constructor(t,n,i,r){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{XE(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n,renderAction:this.renderAction})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=s=>{if(Jm(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return XE(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();XE(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}}class wEe{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const hk=e=>{const t=Array.from(e.values());return{x:mk(t,n=>n.x)/t.length,y:mk(t,n=>n.y)/t.length}},gk=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),mk=(e,t)=>e.reduce((n,i)=>n+t(i),0),_Ee=8,pk=99999,py=e=>_Ee/e,qi=class qi{};F(qi,"referenceSnapPoints",null),F(qi,"visibleGaps",null),F(qi,"setReferenceSnapPoints",t=>{qi.referenceSnapPoints=t}),F(qi,"getReferenceSnapPoints",()=>qi.referenceSnapPoints),F(qi,"setVisibleGaps",t=>{qi.visibleGaps=t}),F(qi,"getVisibleGaps",()=>qi.visibleGaps),F(qi,"destroy",()=>{qi.referenceSnapPoints=null,qi.visibleGaps=null});let Gs=qi;const ym=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Pc=({event:e,app:t,selectedElements:n})=>e?t.state.activeTool.type!=="lasso"&&(t.state.objectsSnapModeEnabled&&!e[H.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[H.CTRL_OR_CMD]&&!ym(t)):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,TEe=(e,t,n=.01)=>Math.abs(e-t)<=n,Em=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Oe(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=q(I(a,l+m),I(d,f),o.angle),U=q(I(a+h,l),I(d,f),o.angle),E=q(I(c,l+m),I(d,f),o.angle),y=q(I(a+h,u),I(d,f),o.angle),v=I(d,f);s=n?[p,U,E,y]:[p,U,E,y,v]}else{const p=q(I(a,l),I(d,f),o.angle),U=q(I(c,l),I(d,f),o.angle),E=q(I(a,u),I(d,f),o.angle),y=q(I(c,u),I(d,f),o.angle),v=I(d,f);s=n?[p,U,E,y]:[p,U,E,y,v]}}else if(e.length>1){const[o,a,l,c]=I9(e,r??{x:0,y:0}),u=l-o,d=c-a,f=I(o,a),h=I(l,a),m=I(o,c),p=I(l,c),U=I(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,U]}return s.map(o=>I(en(o[0]),en(o[1])))},EX=(e,t,n,i)=>{const r=t.filter(s=>Ee(s)).map(s=>s.id);return xB(e,t,n,i).filter(s=>!(s.frameId&&r.includes(s.frameId)))},SEe=(e,t,n,i)=>{const r=EX(e,t,n,i),s=S5(r,i).filter(d=>!(d.length===1&&Bt(d[0]))).map(d=>mt(d).map(f=>en(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>pk)break e;const m=o[h],[,p,U,E]=f,[y,v,,w]=m;U<y&&Cb(Pi(p,E),Pi(v,w))&&a.push({startBounds:f,endBounds:m,startSide:[I(U,p),I(U,E)],endSide:[I(y,v),I(y,w)],length:y-U,overlap:Ab(Pi(p,E),Pi(v,w))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>pk)break e;const m=c[h],[p,,U,E]=f,[y,v,w]=m;E<v&&Cb(Pi(p,U),Pi(y,w))&&u.push({startBounds:f,endBounds:m,startSide:[I(p,E),I(U,E)],endSide:[I(y,v),I(w,v)],length:v-E,overlap:Ab(Pi(p,U),Pi(y,w))})}}return{horizontalGaps:a,verticalGaps:u}},Uk=(e,t,n,i,r,s,o)=>{if(!Pc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Gs.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=I9(e,t).map(U=>en(U)),m=(u+f)/2,p=(d+h)/2;for(const U of l){if(!Cb(Pi(d,h),U.overlap))continue;const E=U.startSide[0][0]+U.length/2,y=en(E-m);if(U.length>f-u&&Math.abs(y)<=o.x){Math.abs(y)<o.x&&(r.length=0),o.x=Math.abs(y);const x={type:"gap",direction:"center_horizontal",gap:U,offset:y};r.push(x);continue}const[,,w]=U.endBounds,S=u-w,M=en(U.length-S);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(r.length=0),o.x=Math.abs(M);const x={type:"gap",direction:"side_right",gap:U,offset:M};r.push(x);continue}const[_,,,]=U.startBounds,T=_-f,C=en(T-U.length);if(Math.abs(C)<=o.x){Math.abs(C)<o.x&&(r.length=0),o.x=Math.abs(C);const x={type:"gap",direction:"side_left",gap:U,offset:C};r.push(x);continue}}for(const U of c){if(!Cb(Pi(u,f),U.overlap))continue;const E=U.startSide[0][1]+U.length/2,y=en(E-p);if(U.length>h-d&&Math.abs(y)<=o.y){Math.abs(y)<o.y&&(s.length=0),o.y=Math.abs(y);const x={type:"gap",direction:"center_vertical",gap:U,offset:y};s.push(x);continue}const[,w,,]=U.startBounds,S=w-h,M=en(S-U.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);const x={type:"gap",direction:"side_top",gap:U,offset:M};s.push(x);continue}const[,,,_]=U.endBounds,T=en(d-_),C=U.length-T;if(Math.abs(C)<=o.y){Math.abs(C)<o.y&&(s.length=0),o.y=Math.abs(C);const x={type:"gap",direction:"side_bottom",gap:U,offset:C};s.push(x);continue}}}},IEe=(e,t,n,i)=>{const r=EX(e,t,n,i);return S5(r,i).filter(s=>!(s.length===1&&Bt(s[0]))).flatMap(s=>Em(s,i))},Hh=(e,t,n,i,r,s,o)=>{if(!Pc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Gs.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},xEe=(e,t,n,i,r)=>{var U,E;const s=n.state,o=Fe(e,s);if(!Pc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=en(t.x),t.y=en(t.y);const a=[],l=[],c=py(s.zoom.value),u={x:c,y:c},d=Em(o,r,{dragOffset:t});Hh(o,d,n,i,a,l,u),Uk(o,t,n,i,a,l,u);const f={x:((U=a[0])==null?void 0:U.offset)??0,y:((E=l[0])==null?void 0:E.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:en(t.x+f.x),y:en(t.y+f.y)};Hh(o,Em(o,r,{dragOffset:h}),n,i,a,l,u),Uk(o,h,n,i,a,l,u);const m=F_(a,l),p=AEe(o,h,[...a,...l].filter(y=>y.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},en=e=>Math.round(e*10**6)/10**6,bk=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},F_=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=en(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>I(en(o[0]),en(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=en(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>I(en(o[0]),en(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:bk(s.map(o=>I(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:bk(s.map(o=>I(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},CEe=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[en(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},AEe=(e,t,n)=>{const[i,r,s,o]=I9(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,U]=l.gap.endBounds,E=Ab(Pi(r,o),l.gap.overlap),y=Ab(Pi(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(l.gap.startSide[0][0],v),I(i,v)]},{type:"gap",direction:"horizontal",points:[I(s,v),I(l.gap.endSide[0][0],v)]})}break}case"center_vertical":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,l.gap.startSide[0][1]),I(v,r)]},{type:"gap",direction:"vertical",points:[I(v,o),I(v,l.gap.endSide[0][1])]})}break}case"side_right":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(d,v),I(h,v)]},{type:"gap",direction:"horizontal",points:[I(p,v),I(i,v)]})}break}case"side_left":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"horizontal",points:[I(s,v),I(c,v)]},{type:"gap",direction:"horizontal",points:[I(d,v),I(h,v)]})}break}case"side_top":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,o),I(v,u)]},{type:"gap",direction:"vertical",points:[I(v,f),I(v,m)]})}break}case"side_bottom":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[I(v,f),I(v,m)]},{type:"gap",direction:"vertical",points:[I(v,U),I(v,r)]})}break}}}return CEe(a.map(l=>({...l,points:l.points.map(c=>I(en(c[0]),en(c[1])))})))},yk=(e,t,n,i,r,s)=>{var M,_;if(!Pc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!TEe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=mt(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(I(l,a),I(l,c));break}case"w":{u.push(I(o,a),I(o,c));break}case"n":{u.push(I(o,a),I(l,a));break}case"s":{u.push(I(o,c),I(l,c));break}case"ne":{u.push(I(l,a));break}case"nw":{u.push(I(o,a));break}case"se":{u.push(I(l,c));break}case"sw":{u.push(I(o,c));break}}const d=py(n.state.zoom.value),f={x:d,y:d},h=[],m=[];Hh(t,u,n,i,h,m,f);const p={x:((M=h[0])==null?void 0:M.offset)??0,y:((_=m[0])==null?void 0:_.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[U,E,y,v]=mt(e).map(T=>en(T)),w=[I(U,E),I(U,v),I(y,E),I(y,v)];Hh(e,w,n,i,h,m,f);const S=F_(h,m);return{snapOffset:p,snapLines:S}},MEe=(e,t,n,i,r,s)=>{var m,p;if(!Pc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[I(i.x+r.x,i.y+r.y)],a=py(t.state.zoom.value),l={x:a,y:a},c=[],u=[];Hh([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=Em([e],s,{boundingBoxCorners:!0,omitCenter:!0});Hh([e],f,t,n,c,u,l);const h=F_(c,u);return{snapOffset:d,snapLines:h}},REe=(e,t,n,i,r)=>{if(!Pc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=xB(e,[],t.state,r),o=py(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=Em([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,I(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,I(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},kEe=e=>e===Wn.rectangle||e===Wn.ellipse||e===Wn.diamond||e===Wn.frame||e===Wn.magicframe||e===Wn.image||e===Wn.text,NU={width:100,height:0},tc=100,LEe=(e,t,n)=>{const i=Kr({x:0,y:0,textAlign:j0.CENTER,verticalAlign:zr.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),Yi(i,e,n),[e,i]},Ek=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??tc,d=(t==null?void 0:t.height)??tc;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),s=Kr({x:h,y:m,type:"text",...f,...t,text:U}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=Qo({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:Yo(e,`Unhandled element start type "${t.type}"`,!0)}qo(e,s,"start",r)}}if(n){const u=(n==null?void 0:n.height)??tc,d=(n==null?void 0:n.width)??tc;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=Kr({x:h,y:m,type:"text",...f,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=Qo({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:Yo(e,`Unhandled element end type "${p}"`,!0)}qo(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Xa(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,ce.getNormalizeElementPointsAndCoords({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class DEe{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>Kc(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>jo(we(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const V4=(e,t)=>{var l,c,u;if(!e)return[];const n=Xa(e),i=new DEe,r=new Map,s=new Map;for(const d of n){let f;const h=d.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(d,{id:rr()}),d.type){case"rectangle":case"ellipse":case"diamond":{const p=(l=d==null?void 0:d.label)!=null&&l.text&&d.width===void 0?0:(d==null?void 0:d.width)||tc,U=(c=d==null?void 0:d.label)!=null&&c.text&&d.height===void 0?0:(d==null?void 0:d.height)||tc;f=Qo({...d,width:p,height:U});break}case"line":{const p=d.width||NU.width,U=d.height||NU.height;f=hc({width:p,height:U,points:[I(0,0),I(p,U)],...d});break}case"arrow":{const p=d.width||NU.width,U=d.height||NU.height;f=Jf({width:p,height:U,endArrowhead:"arrow",points:[I(0,0),I(p,U)],...d,type:"arrow"}),Object.assign(f,_h(f.points));break}case"text":{const p=(d==null?void 0:d.fontFamily)||Yc,U=(d==null?void 0:d.fontSize)||Ul,E=(d==null?void 0:d.lineHeight)||Mc(p),y=d.text??"",v=Ih(y),w=Hn(v,dt({fontFamily:p,fontSize:U}),E);f=Kr({width:w.width,height:w.height,fontFamily:p,fontSize:U,...d});break}case"image":{f=rz({width:(d==null?void 0:d.width)||tc,height:(d==null?void 0:d.height)||tc,...d});break}case"frame":{f=M9({x:0,y:0,...d});break}case"magicframe":{f=J7({x:0,y:0,...d});break}case"freedraw":case"iframe":case"embeddable":{f=d;break}default:f=d,Yo(d,`Unhandled element type "${d.type}"`,!0)}i.getElement(f.id)?console.error(`Duplicate id found for ${f.id}`):(i.add(f),r.set(f.id,d),h&&s.set(h,f.id))}const o=i.getElementsMap(),a=new qb(o);for(const[d,f]of r){const h=i.getElement(d);switch(f.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((u=f.label)!=null&&u.text){let[m,p]=LEe(h,f==null?void 0:f.label,a);if(i.add(m),i.add(p),xe(m)){const U=f.type==="arrow"?f==null?void 0:f.start:void 0,E=f.type==="arrow"?f==null?void 0:f.end:void 0;if(U&&U.id){const S=s.get(U.id);S&&Object.assign(U,{id:S})}if(E&&E.id){const S=s.get(E.id);S&&Object.assign(E,{id:S})}const{linearElement:y,startBoundElement:v,endBoundElement:w}=Ek(m,U,E,i,a);m=y,i.add(y),i.add(v),i.add(w)}}else switch(f.type){case"arrow":{const{start:m,end:p}=f;if(m&&m.id){const v=s.get(m.id);Object.assign(m,{id:v})}if(p&&p.id){const v=s.get(p.id);Object.assign(p,{id:v})}const{linearElement:U,startBoundElement:E,endBoundElement:y}=Ek(h,m,p,i,a);i.add(U),i.add(E),i.add(y);break}}break}}}for(const[d,f]of r){if(f.type!=="frame"&&f.type!=="magicframe")continue;const h=i.getElement(d);if(!h)throw new Error(`Excalidraw element with id ${d} doesn't exist`);const m=[];f.children.forEach(T=>{var R;const C=s.get(T);if(!C)throw new Error(`Element with ${T} wasn't mapped correctly`);const x=i.getElement(C);if(!x)throw new Error(`Frame element with id ${C} doesn't exist`);Object.assign(x,{frameId:h.id}),(R=x==null?void 0:x.boundElements)==null||R.forEach(P=>{const D=i.getElement(P.id);if(!D)throw new Error(`Bound element with id ${P.id} doesn't exist`);Object.assign(D,{frameId:h.id}),m.push(D)}),m.push(x)});let[p,U,E,y]=mt(m);const v=10;p=p-v,U=U-v,E=E+v,y=y+v;const w=(h==null?void 0:h.x)||p,S=(h==null?void 0:h.y)||U,M=(h==null?void 0:h.width)||E-p,_=(h==null?void 0:h.height)||y-U;Object.assign(h,{x:w,y:S,width:M,height:_})}return i.getElements()},NEe="#ff6b6b",OEe="#ff0000",vk=1,wk=2,PEe=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===Ce.LIGHT||t.zenModeEnabled?NEe:OEe,i=(t.zenModeEnabled?vk*1.5:vk)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,BEe(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,zEe(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,FEe(r,e,t));e.restore()},FEe=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];ns(i,r,t)}for(const i of e.points)vX(i,n,t)},BEe=(e,t,n)=>{vX(e.points[0],n,t),n.zenModeEnabled||ns(e.points[0],e.points[1],t)},vX=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?wk*1.5:wk)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},ns=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},zEe=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||ns(I(e[0],e[1]-s),I(e[0],e[1]+s),r),ns(I(l[0]-a,l[1]-o),I(l[0]-a,l[1]+o),r),ns(I(l[0]+a,l[1]-o),I(l[0]+a,l[1]+o),r),i.zenModeEnabled||(ns(I(t[0],t[1]-s),I(t[0],t[1]+s),r),ns(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||ns(I(e[0]-s,e[1]),I(e[0]+s,e[1]),r),ns(I(l[0]-o,l[1]-a),I(l[0]+o,l[1]-a),r),ns(I(l[0]-o,l[1]+a),I(l[0]+o,l[1]+a),r),i.zenModeEnabled||(ns(I(t[0]-s,t[1]),I(t[0]+s,t[1]),r),ns(e,t,r))}},xo=4,os=6,HEe="rgba(0,0,0,0.3)",VEe=(e,t,n,i)=>{if(!e.size)return{horizontal:null,vertical:null};const[r,s,o,a]=mt(e),l=t/i.zoom.value,c=n/i.zoom.value,u={top:parseInt(hU("sat"))||0,bottom:parseInt(hU("sab"))||0,left:parseInt(hU("sal"))||0,right:parseInt(hU("sar"))||0},d=em().rtl,f=-i.scrollX+u.left,h=-i.scrollY+u.top,m=f+l-u.right,p=h+c-u.bottom,U=Math.min(r,f),E=Math.min(s,h),y=Math.max(o,m),v=Math.max(a,p),w=o-r,S=a-s,M=y-U,_=v-E,T=Math.max(xo*2,u.left+u.right)+os*2,C=t*(l/M)-T,x=Math.max(xo*2,u.top+u.bottom)+os*2,R=n*(c/_)-x,P=M>w?M*i.zoom.value/(C+T):t/(C+T),D=_>S?_*i.zoom.value/(R+x):n/(R+x);return{horizontal:f===U&&m===y?null:{x:Math.max(u.left,xo)+os+(f-U)/M*t,y:n-os-Math.max(xo,u.bottom),width:C,height:os,deltaMultiplier:P},vertical:h===E&&p===v?null:{x:d?Math.max(u.left,xo):t-os-Math.max(u.right,xo),y:Math.max(u.top,xo)+os+(h-E)/_*n,width:os,height:R,deltaMultiplier:D}}},_k=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},$Ee=(e,t)=>{Kn(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;Kn(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),wX(n,e,t),e.restore()},GEe=(e,t,n)=>{var a,l;const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(r))return;const s=ce.getElement(i,n);if(!s)return;const o=ce.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),wX(o,e,t),e.restore()},wX=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",iy(t,e[0],e[1],ce.POINT_HANDLE_SIZE/n.zoom.value,!1)},YE=(e,t,n,i,r,s,o)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),iy(e,n[0],n[1],(o?i*(t.editingLinearElement?1.5:2):i)/t.zoom.value,!s,!o||r)},XEe=(e,t,n,i)=>{const r=ug(t,t.width,t.height,i);switch(e.fillStyle="rgba(0,0,0,.05)",t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":O6e(e,t,n,r);break;case"diamond":F6e(e,r,t,n);break;case"ellipse":{const[s,o,a,l]=Oe(t,n),c=a-s,u=l-o;e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=r-Ct,P6e(e,c+r+Ct,u+r+Ct,s+c/2,o+u/2,t.angle);break}}},YEe=(e,t,n,i)=>{const[r,s,o]=t,a=ug(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=ce.getPointAtIndexGlobalCoordinates(r,c,n);iy(e,u,d,a,!0)})},_X=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,U=(n.padding??rd*2)/t.zoom.value,E=8/t.zoom.value,y=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const v=l.length;for(let w=0;w<v;++w)e.strokeStyle=l[w],d&&e.setLineDash([E,y+(E+y)*(v-1)]),e.lineDashOffset=(E+y)*w,oy(e,r-U,s-U,h+U*2,m+U*2,c,u,i);e.restore()},jEe=(e,t,n,i)=>{const r=Array.isArray(n)?YEe:XEe;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},WEe=(e,t,n,i)=>{const[r,s,o,a]=Oe(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Dt.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),oy(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,Dt.radius/t.zoom.value),e.restore()},Tk=(e,t,n,i)=>{const{colors:r=["rgb(0,118,255)"],dashed:s=!1}=i||{},o=n.filter(u=>u.groupIds.length===0),a=n.filter(u=>u.groupIds.length>0),l=u=>{const[d,f,h,m]=mt(u);return{angle:0,x1:d,x2:h,y1:f,y2:m,selectionColors:r,dashed:s,cx:d+(h-d)/2,cy:f+(m-f)/2,activeEmbeddable:!1}},c=u=>{const d=At(n,u);return l(d)};Object.entries(ap(a,t)).filter(([u,d])=>d).map(([u,d])=>u).map(u=>c(u)).concat(o.map(u=>l([u]))).forEach(u=>_X(e,t,u))},jE=(e,t,n,i)=>{var c;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=ce.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=ce,o=t.editingLinearElement?s:s/2,a=de(n),l=ln(n);if(r.forEach((u,d)=>{var m,p,U,E;if(a&&d!==0&&d!==r.length-1)return;const f=d>0&&(d!==r.length-1||!l||!n.polygon)&&As(u,d===r.length-1?r[0]:r[d-1],2/t.zoom.value);let h=!!((p=(m=t.editingLinearElement)==null?void 0:m.selectedPointsIndices)!=null&&p.includes(d));l&&n.polygon&&!h&&d===n.points.length-1&&((E=(U=t.editingLinearElement)==null?void 0:U.selectedPointsIndices)!=null&&E.includes(0))&&(h=!0),YE(e,t,u,o,h,!1,f)}),de(n)){const u=((c=n.fixedSegments)==null?void 0:c.map(d=>d.index))||[];r.slice(0,-1).forEach((d,f)=>{ce.isSegmentTooShort(n,r[f+1],r[f],f,t.zoom)||YE(e,t,I((d[0]+r[f+1][0])/2,(d[1]+r[f+1][1])/2),s/2,!1,!u.includes(f+1),!1)})}else ce.getEditorMidPoints(n,i,t).filter((d,f,h)=>d!==null&&!(de(n)&&(f===0||f===h.length-1))).forEach(d=>{(t.editingLinearElement||r.length===2)&&YE(e,t,d,s/2,!1,!0,!1)});e.restore()},Sk=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?iy(e,a+c/2,l+u/2,c/2,!0):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):oy(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},KEe=(e,t,n,i,r)=>{const[s,o,,,a,l]=Oe(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),U=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,U]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,U]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-U]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-U]]].forEach(y=>{const[[v,w],[S,M],[_,T],[C,x],[R,P]]=y;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(v+S,w+M),e.lineTo(v+_,w+T),e.stroke(),e.beginPath(),e.moveTo(v+C,w+x),e.lineTo(v+R,w+P),e.stroke(),e.restore()}),e.restore()},ZEe=(e,t,n,i)=>{t.save();const r=rd*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},TX=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,device:l})=>{var p,U,E,y;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=ry(e,s),d=sy({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(v=>{var w;((w=o.editingLinearElement)==null?void 0:w.elementId)===v.id&&v&&(f=v)}),f&&jE(d,o,f,t),o.selectionElement&&!o.isCropping)try{gle(o.selectionElement,d,o,a.selectionColor)}catch(v){console.error(v)}if(o.editingTextElement&&ue(o.editingTextElement)){const v=r.get(o.editingTextElement.id);v&&!v.autoResize&&ZEe(v,d,o,a.selectionColor)}if(o.isBindingEnabled&&o.suggestedBindings.filter(v=>v!=null).forEach(v=>{jEe(d,o,v,t)}),o.frameToHighlight&&WEe(d,o,o.frameToHighlight,t),o.elementsToHighlight&&Tk(d,o,o.elementsToHighlight),o.activeLockedId){const v=r.get(o.activeLockedId),w=v?[v]:At(r,o.activeLockedId);Tk(d,o,w,{colors:["#ced4da"],dashed:!0})}const h=i.some(v=>Ee(v));if(i.length===1&&((p=o.editingLinearElement)==null?void 0:p.elementId)===i[0].id&&jE(d,o,i[0],t),o.selectedLinearElement){const v=o.selectedLinearElement,w=i.find(S=>S.id===v.elementId);v.segmentMidPointHoveredCoords?$Ee(d,o):(de(w)?v.hoverPointIndex===0||v.hoverPointIndex===w.points.length-1:v.hoverPointIndex>=0)&&GEe(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const v=hz(i,o),w=i.length===1&&Ie(i[0]);w&&((U=o.selectedLinearElement)==null?void 0:U.elementId)===i[0].id&&!i[0].locked&&jE(d,o,i[0],t);const S=a.selectionColor||fi.black;if(v){const M=we(i),_=[];for(const C of t.values()){const x=[],R=a.remoteSelectedElementIds.get(C.id);if(w&&de(C)&&(C.startBinding||C.endBinding)||(M.has(C.id)&&!SB(o,C)&&x.push(S),R&&x.push(...R.map(P=>uy(P,o.collaborators.get(P))))),x.length){const[P,D,$,z,V,G]=Oe(C,t,!0);_.push({angle:C.angle,x1:P,y1:D,x2:$,y2:z,selectionColors:C.locked?["#ced4da"]:x,dashed:!!R||C.locked,cx:V,cy:G,activeEmbeddable:((E=o.activeEmbeddable)==null?void 0:E.element)===C&&o.activeEmbeddable.state==="active",padding:C.id===o.croppingElementId||wt(C)?0:void 0})}}const T=C=>{const x=At(t,C),[R,P,D,$]=mt(x);_.push({angle:0,x1:R,x2:D,y1:P,y2:$,selectionColors:x.some(z=>z.locked)?["#ced4da"]:[fi.black],dashed:!0,cx:R+(D-R)/2,cy:P+($-P)/2,activeEmbeddable:!1})};for(const C of $u(o))T(C);o.editingGroupId&&T(o.editingGroupId),_.forEach(C=>_X(d,o,C))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=fi.white;const M=fz(i[0],o.zoom,t,"mouse",f0(l));if(!o.viewModeEnabled&&v&&!ue(o.editingTextElement)&&!o.croppingElementId&&Sk(d,a,o,M,i[0].angle),o.croppingElementId&&!o.isCropping){const _=t.get(o.croppingElementId);_&&wt(_)&&KEe(d,a,o,_,t)}}else if(i.length>1&&!o.isRotating&&!i.some(M=>M.locked)){const M=rd*2/o.zoom.value;d.fillStyle=fi.white;const[_,T,C,x]=mt(i,t),R=d.getLineDash();d.setLineDash([2/o.zoom.value]);const P=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=S,oy(d,_-M,T-M,C-_+M*2,x-T+M*2,(_+C)/2,(T+x)/2,0),d.lineWidth=P,d.setLineDash(R);const D=D9([_,T,C,x,(_+C)/2,(T+x)/2],0,o.zoom,"mouse",h?{...f0(l),rotation:!0}:f0(l));i.some($=>!$.locked)&&Sk(d,a,o,D,0)}d.restore()}(y=o.searchMatches)==null||y.matches.forEach(({id:v,focus:w,matchedLines:S})=>{const M=t.get(v);if(M){const[_,T,,,C,x]=Oe(M,t,!0);d.save(),o.theme===Ce.LIGHT?w?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":w?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)";const R=Ee(M)?o.zoom.value:1;d.translate(o.scrollX,o.scrollY),d.translate(C,x),d.rotate(M.angle),S.forEach(P=>{(P.showOnCanvas||w)&&d.fillRect(_+P.offsetX/R-C,T+P.offsetY/R-x,P.width/R,P.height/R)}),d.restore()}}),PEe(d,o),d.restore(),P5e({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=VEe(t,c,u,o),d.save(),d.fillStyle=HEe,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(v=>{v&&MG(d,v.x,v.y,v.width,v.height,os/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},SX=og(e=>{var n;const t=TX(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),qEe=(e,t)=>{if(t){SX(e);return}const n=TX(e);return e.callback(n),n};class Ik{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())Kb(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s})=>{const o=jo(new Map);for(const a of i)s!==a.id&&(!r||r.type!=="text"||a.id!==r.id)&&o.set(a.id,a);return o};return jre(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,sceneNonce:f})=>{const h=this.scene.getNonDeletedElements(),m=n({elements:h,editingTextElement:u,newElementId:d}),p=t({elementsMap:m,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:m,visibleElements:p}})})());this.scene=t}destroy(){SX.cancel(),cG.cancel(),this.getRenderableElements.clear()}}const QEe=5,JEe=(e,t,n)=>{const[i,r]=Oe(e,n),{x:s,y:o}=Hr({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},xk=({children:e,element:t,elementsMap:n})=>{const i=bp();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=JEe(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:QEe},children:e})};function e3e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t3e={};e3e(t3e,"LaserPointer",()=>E6);function mn([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function N1([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function Mn([e,t,n],i){return[e*i,t*i,n*i]}function Jd([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Li([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function n3e(e,t,n){return mn(e,Mn(N1(t,e),n))}function Ck(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function Ak(e){return Math.atan2(Math.sin(e),Math.cos(e))}function Mk([e,t]){return Math.sqrt(e**2+t**2)}function oh([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function i3e(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=oh(e[n-1],e[n]);return t+=oh(e[e.length-2],e[e.length-1]),t}const r3e=(e,t,n)=>Math.max(t,Math.min(n,e));function s3e(e,t,n){const i=oh(t,n);if(i===0)return oh(e,t);const r=r3e(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return oh(s,e)}function y6(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=s3e(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...y6([n,...e.slice(1,s),o],t).slice(0,-1),o,...y6([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}const Hl=class Hl{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Hl.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=n3e(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),i3e(this.tailPoints)>Hl.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=y6(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const _=n[0],T=this.getSize(t,_[2],0,i,0);if(T<.5)return[];const C=[];for(let x=0;x<=Math.PI*2;x+=Math.PI/16)C.push(mn(_,Mn(Li([1,0,0],x),T)));return C.push(mn(_,Mn([1,0,0],this.getSize(t,_[2],0,i,0)))),C}if(i===2){const _=n[0],T=n[1],C=this.getSize(t,_[2],0,i,0),x=this.getSize(t,T[2],0,i,0);if(C<.5||x<.5)return[];const R=[],P=Ck(_,[_[0],_[1]-100,_[2]],T);for(let D=P;D<=Math.PI+P;D+=Math.PI/16)R.push(mn(_,Mn(Li([1,0,0],D),C)));for(let D=Math.PI+P;D<=Math.PI*2+P;D+=Math.PI/16)R.push(mn(T,Mn(Li([1,0,0],D),x)));return R.push(R[0]),R}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let _=1;_<i-1;_++){const T=n[_-1],C=n[_],x=n[_+1];let R=C[2];const P=oh(T,C);c+=P,o=a+(P-a)*.2;const D=this.getSize(t,R,_,i,c);if(D===0){l=_+1;continue}const $=Jd(N1(T,C)),z=Jd(N1(x,C)),V=Li($,Math.PI/2),G=Li($,-Math.PI/2),Y=Li(z,Math.PI/2),X=Li(z,-Math.PI/2),Z=mn(C,Mn(V,D)),Ue=mn(C,Mn(G,D)),re=mn(C,Mn(Y,D)),be=mn(C,Mn(X,D)),Ye=mn(V,X),je=mn(G,Y),St=mn(C,Mn(Mk(Ye)===0?$:Jd(Ye),D)),hn=mn(C,Mn(Mk(je)===0?z:Jd(je),D)),Yn=Ak(Ck(C,T,x)),pi=Hl.constants.cornerDetectionMaxAngle/180*Math.PI*Hl.constants.cornerDetectionVariance(o);if(Math.abs(Yn)<pi){const $e=Math.abs(Ak(Math.PI-Yn));if($e===0)continue;if(Yn<0){s.push(Ue,hn);for(let ot=0;ot<=$e;ot+=$e/4)r.push(mn(C,Li(Mn(V,D),ot)));for(let ot=$e;ot>=0;ot-=$e/4)s.push(mn(C,Li(Mn(V,D),ot)));s.push(hn,re)}else{r.push(Z,St);for(let ot=0;ot<=$e;ot+=$e/4)s.push(mn(C,Li(Mn(V,-D),-ot)));for(let ot=$e;ot>=0;ot-=$e/4)r.push(mn(C,Li(Mn(V,-D),-ot)));r.push(St,be)}}else r.push(St),s.push(hn);a=o}if(l>=i-2)if(this.options.keepHead){const _=n[i-1],T=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)T.push(mn(_,Mn(Li([1,0,0],C),this.options.size)));return T.push(mn(_,Mn([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=Jd(N1(d,u)),p=Jd(N1(f,h)),U=Li(m,-Math.PI/2),E=Li(p,Math.PI/2),y=this.getSize(t,u[2],0,i,0),v=[],w=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),S=[];if(y>1){for(let _=0;_<=Math.PI;_+=Math.PI/16)v.unshift(mn(u,Li(Mn(U,y),-_)));v.unshift(mn(u,Mn(U,-y)))}else v.push(u);for(let _=0;_<=Math.PI*3;_+=Math.PI/16)S.push(mn(h,Li(Mn(E,-w),-_)));const M=[...v,...r,...S.reverse(),...s.reverse()];return v.length>0&&M.push(v[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?y6(M,this.options.simplify):M}};Hl.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Hl.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let E6=Hl;class v6{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");F(this,"trailAnimation");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(tt,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(tt,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new E6(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([s,o])=>{const a=Hr({sceneX:s,sceneY:o},n);return[a.x,a.y]}),r=this.trailAnimation?i.slice(0,i.length/2):i;return Wre(r,!0)}}class o3e{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new v6(t,n,{...this.getTrailOptions(),fill:()=>Oie})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(tl(s),tl(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new v6(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=n.pointer)==null?void 0:r.laserColor)||uy(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const Jt=e=>t=>{_n.unstable_batchedUpdates(e,t)},WE=e=>og(t=>{_n.unstable_batchedUpdates(e,t)}),B_=(()=>{let e;try{const n=L.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),a3e=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},l3e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(z,V)=>{if(!V.style.fontFamily||!V.style.fontSize)return!1;const G=V.style.fontFamily.replace(/"/g,"");return qm({fontFamily:z.fontFamily})!==G||`${z.fontSize}px`!==V.style.fontSize},u=()=>{const z=a.state,V=a.scene.getElement(e);if(!V)return;const{textAlign:G,verticalAlign:Y}=V,X=a.scene.getNonDeletedElementsMap();if(V&&ue(V)){let Z=V.x,Ue=V.y;const re=Vn(V,a.scene.getNonDeletedElementsMap());let be=V.width,Ye=V.height,je=V.width,St=V.height;if(re&&V.containerId){if(xe(re)){const Ir=ce.getBoundTextElementPosition(re,V,X);Z=Ir.x,Ue=Ir.y}const Ls=c(V,d);let Ds;if(Ls?Ds=Pb(re.id,re.height):(Ds=Sh[re.id],Ds||(Ds=Pb(re.id,re.height))),je=Zo(re,V),St=sp(re,V),!xe(re)&&Ye>St){const Ir=od(Ye,re.type);a.scene.mutateElement(re,{height:Ir});return}else if(!xe(re)&&re.height>Ds.height&&Ye<St){const Ir=od(Ye,re.type);a.scene.mutateElement(re,{height:Ir})}else{const{y:Ir}=lg(re,V,X);Ue=Ir}}const[hn,Yn]=i(Z,Ue),pi=d.selectionStart,$e=d.selectionEnd,ot=d.value.length;if(pi===$e&&$e!==ot){const Ls=ot-$e;d.selectionStart=d.value.length-Ls,d.selectionEnd=d.value.length-Ls}re?be+=.5:(je=(z.width-8-hn)/z.zoom.value,be=Math.min(be,je)),Ye*=1.05;const rn=dt(V),Qr=(z.height-Yn)/z.zoom.value;Object.assign(d.style,{font:rn,lineHeight:V.lineHeight,width:`${be}px`,height:`${Ye}px`,left:`${hn}px`,top:`${Yn}px`,transform:a3e(be,Ye,joe(V,re),z,je,Qr),textAlign:G,verticalAlign:Y,color:V.strokeColor,opacity:V.opacity/100,filter:"var(--theme-filter)",maxHeight:`${Qr}px`}),d.scrollTop=0,a.scene.mutateElement(V,{x:Z,y:Ue})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Bt(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async z=>{const V=await IG(z,!0);if(!V.text)return;const G=Ih(V.text);if(!G)return;const Y=Vn(r,a.scene.getNonDeletedElementsMap()),X=dt({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(Y){const Z=ke(Y,a.scene.getNonDeletedElementsMap()),Ue=Wc(`${d.value}${G}`,X,Zo(Y,Z)),re=s9(Ue,X);d.style.width=`${re}px`}},d.oninput=()=>{const z=Ih(d.value);if(d.value!==z){const V=d.selectionStart;d.value=z,d.selectionStart=V,d.selectionEnd=V}t(d.value)}),d.onkeydown=z=>{if(!z.shiftKey&&PM.keyTest(z))z.preventDefault(),a.actionManager.executeAction(PM),u();else if(!z.shiftKey&&FM.keyTest(z))z.preventDefault(),a.actionManager.executeAction(FM),u();else if(!z.shiftKey&&BM.keyTest(z))z.preventDefault(),a.actionManager.executeAction(BM),u();else if(LM.keyTest(z))a.actionManager.executeAction(LM);else if(DM.keyTest(z))a.actionManager.executeAction(DM);else if(z.key===H.ESCAPE)z.preventDefault(),S=!0,M();else if(m6.keyTest(z))z.preventDefault(),M(),a.actionManager.executeAction(m6);else if(z.key===H.ENTER&&z[H.CTRL_OR_CMD]){if(z.preventDefault(),z.isComposing||z.keyCode===229)return;S=!0,M()}else if(z.key===H.TAB||z[H.CTRL_OR_CMD]&&(z.code===Je.BRACKET_LEFT||z.code===Je.BRACKET_RIGHT)){if(z.preventDefault(),z.isComposing)return;z.shiftKey||z.code===Je.BRACKET_LEFT?y():E(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),U=new RegExp(`^ {1,${m}}`),E=()=>{const{selectionStart:z,selectionEnd:V}=d,G=v();let Y=d.value;G.forEach(X=>{const Z=Y.slice(0,X),Ue=Y.slice(X);Y=`${Z}${p}${Ue}`}),d.value=Y,d.selectionStart=z+m,d.selectionEnd=V+m*G.length},y=()=>{const{selectionStart:z,selectionEnd:V}=d,G=v(),Y=[];let X=d.value;G.forEach(Z=>{const Ue=X.slice(Z,Z+m).match(U);if(Ue){const re=X.slice(0,Z),be=X.slice(Z+Ue[0].length);X=`${re}${be}`,Y.push(Z)}}),d.value=X,Y.length&&(z>Y[Y.length-1]?d.selectionStart=Math.max(z-m,Y[Y.length-1]):d.selectionStart=z,d.selectionEnd=Math.max(d.selectionStart,V-m*Y.length))},v=()=>{let{selectionStart:z,selectionEnd:V,value:G}=d;const Y=G.slice(0,z).match(/[^\n]*$/)[0].length;return z=z-Y,G.slice(z,V).split(`
`).reduce((Z,Ue,re,be)=>Z.concat(re?Z[re-1]+be[re-1].length+1:z),[]).reverse()},w=z=>{z.target instanceof HTMLCanvasElement&&(z.preventDefault(),z.stopPropagation())};let S=!1;const M=()=>{var G;if(D)return;D=!0,_();const z=a.scene.getElement(r.id);if(!z)return;const V=Vn(z,a.scene.getNonDeletedElementsMap());if(V){if(d.value.trim()){const Y=Ko(V);!Y||Y!==r.id?a.scene.mutateElement(V,{boundElements:(V.boundElements||[]).concat({type:"text",id:r.id})}):xe(V)&&Aa(V)}else a.scene.mutateElement(V,{boundElements:(G=V.boundElements)==null?void 0:G.filter(Y=>!ue(Y))});Yi(z,V,a.scene)}n({viaKeyboard:S,nextOriginalText:d.value})},_=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,$&&$.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",w,!0),window.removeEventListener("pointerdown",x),window.removeEventListener("pointerup",T),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),R(),P(),d.remove()},T=z=>{window.removeEventListener("pointerup",T);const V=z==null?void 0:z.target,G=V instanceof HTMLElement&&V.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,G||d.focus()})},C=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",M)},x=z=>{const V=z==null?void 0:z.target;if(z.button===Rl.WHEEL){V instanceof HTMLTextAreaElement&&(z.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(z)),C();return}const G=V instanceof HTMLElement&&V.classList.contains("properties-trigger");(z.target instanceof HTMLElement||z.target instanceof SVGElement)&&z.target.closest(`.${Ac.SHAPE_ACTIONS_MENU}, .${Ac.ZOOM_ACTIONS}`)&&!pu(z.target)||G?C():z.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{M()})},R=a.scene.onUpdate(()=>{var V;u(),!!((V=document.activeElement)!=null&&V.closest(".properties-content"))||d.focus()}),P=a.onScrollChangeEmitter.on(()=>{u()});let D=!1;l&&d.select(),T();let $=null;return s&&"ResizeObserver"in window?($=new window.ResizeObserver(()=>{u()}),$.observe(s)):window.addEventListener("resize",u),d.onpointerdown=z=>z.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",x,{capture:!0})}),window.addEventListener("beforeunload",M),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d),M},c3e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function KE(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function u3e(e,t,n){const i=KE(t,n);if(i===0)return KE(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),KE(e,d3e(t,n,r))}function d3e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function f3e(e,t){return $4(e,0,e.length,t)}function $4(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=u3e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?($4(e,t,c+1,i,s),$4(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}const h3e=e=>{const{lassoPath:t,elements:n,elementsMap:i,elementsSegments:r,intersectedElements:s,enclosedElements:o,simplifyDistance:a}=e;let l=t;a&&(l=f3e(t,a));const c=n.filter(f=>!f.locked);o.clear(),s.clear();const u=t.reduce((f,h)=>[Math.min(f[0],h[0]),Math.min(f[1],h[1]),Math.max(f[2],h[0]),Math.max(f[3],h[1])],[1/0,1/0,-1/0,-1/0]);for(const f of c){const h=xi(f,i);hg(u,h)&&!s.has(f.id)&&!o.has(f.id)&&(g3e(l,f,r)?o.add(f.id):m3e(l,f,i)&&s.add(f.id))}return{selectedElementIds:[...s,...o]}},g3e=(e,t,n)=>{const i=xb(e),r=n.get(t.id);return r?r.some(s=>s.some(o=>Sre(o,i))):!1},m3e=(e,t,n)=>{const i=e.slice(1).map((s,o)=>Ae(e[o],s)).concat([Ae(e[e.length-1],e[0])]),r=ke(t,n);return i.some(s=>rl(t,n,s,0,!0).length>0||!!r&&rl({...r,...lg(t,r,n)},n,s,0,!0).length>0)};class p3e extends v6{constructor(n,i){super(n,i,{animateTrail:!0,streamline:.4,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/(1/0)),l=(5e3-Math.min(5e3,r.totalLength-r.currentIndex))/5e3;return Math.min(tl(l),tl(a))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"});F(this,"intersectedElements",new Set);F(this,"enclosedElements",new Set);F(this,"elementsSegments",null);F(this,"canvasTranslate",null);F(this,"keepPreviousSelection",!1);F(this,"selectElementsFromIds",n=>{this.app.setState(i=>{const r=n.reduce((l,c)=>(l[c]=!0,l),{});if(this.keepPreviousSelection)for(const l of Object.keys(i.selectedElementIds))r[l]=!0;for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&ue(c)){const u=Vn(c,this.app.scene.getNonDeletedElementsMap());u&&(r[u.id]=!0,delete r[c.id])}}for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&Ee(c)){const u=Rs(this.app.scene.getNonDeletedElementsMap(),c.id);for(const d of u)delete r[d.id]}}const s=Oi({editingGroupId:i.editingGroupId,selectedElementIds:r},this.app.scene.getNonDeletedElements(),i,this.app),o=[...Object.keys(s.selectedElementIds)],a=[...Object.keys(s.selectedGroupIds)];return{selectedElementIds:s.selectedElementIds,selectedGroupIds:s.selectedGroupIds,selectedLinearElement:o.length===1&&!a.length&&Ie(this.app.scene.getNonDeletedElement(o[0]))?new ce(this.app.scene.getNonDeletedElement(o[0]),this.app.scene.getNonDeletedElementsMap()):null}})});F(this,"addPointToPath",(n,i,r=!1)=>{super.addPointToPath(n,i),this.keepPreviousSelection=r,this.updateSelection()});F(this,"updateSelection",()=>{var r,s;const n=(s=(r=super.getCurrentTrail())==null?void 0:r.originalPoints)==null?void 0:s.map(o=>I(o[0],o[1])),i={scrollX:this.app.state.scrollX,scrollY:this.app.state.scrollY,zoom:this.app.state.zoom.value};if(!this.elementsSegments||!Gi(i,this.canvasTranslate??{})){this.canvasTranslate=i,this.elementsSegments=new Map;const o=we(this.app.visibleElements);for(const a of this.app.visibleElements){const l=W7(a,o);this.elementsSegments.set(a.id,l)}}if(n){const{selectedElementIds:o}=h3e({lassoPath:n,elements:this.app.visibleElements,elementsMap:this.app.scene.getNonDeletedElementsMap(),elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(o)}})}startPath(n,i,r=!1){this.endPath(),super.startPath(n,i),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=r,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}class U3e extends v6{constructor(n,i){super(n,i,{streamline:.2,size:5,keepHead:!0,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/200),l=(10-Math.min(10,r.totalLength-r.currentIndex))/10;return Math.min(tl(l),tl(a))},fill:()=>i.state.theme===Ce.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});F(this,"elementsToErase",new Set);F(this,"groupsToErase",new Set)}startPath(n,i){this.endPath(),super.startPath(n,i),this.elementsToErase.clear()}addPointToPath(n,i,r=!1){return super.addPointToPath(n,i),this.updateElementsToBeErased(r)}updateElementsToBeErased(n){var a,l;const i=((l=(a=super.getCurrentTrail())==null?void 0:a.originalPoints)==null?void 0:l.map(c=>I(c[0],c[1])))||[];if(i.length<2)return[];const r=Ae(i[i.length-1],i[i.length-2]),s=this.app.visibleElements.filter(c=>!c.locked),o=we(s);for(const c of s)if(n&&this.elementsToErase.has(c.id)){if(Rk(r,c,o)){const d=c.groupIds.at(-1);if(this.groupsToErase.has(d)){const f=At(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.delete(h.id);this.groupsToErase.delete(d)}if(Bt(c)&&this.elementsToErase.delete(c.containerId),sr(c)){const f=Ko(c);f&&this.elementsToErase.delete(f)}this.elementsToErase.delete(c.id)}}else if(!n&&!this.elementsToErase.has(c.id)&&Rk(r,c,o)){const d=c.groupIds.at(-1);if(!this.groupsToErase.has(d)){const f=At(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.add(h.id);this.groupsToErase.add(d)}if(sr(c)){const f=Ko(c);f&&this.elementsToErase.add(f)}Bt(c)&&this.elementsToErase.add(c.containerId),this.elementsToErase.add(c.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear()}}const Rk=(e,t,n)=>{const i=e[1];if(Fb(t)&&a9(i,t,n))return!0;const r=ke(t,n);return rl(t,n,e,0,!0).length>0||!!r&&rl({...r,...lg(t,r,n)},n,e,0,!0).length>0},b3e=()=>O("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(Ur,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Ur,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Ur,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(Ur,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>O("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),y3e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=L.useRef(null);L.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{var m,p,U;if(h.key===H.TAB){const E=D7(d),{activeElement:y}=document,v=E.findIndex(w=>w===y);y===d?(h.shiftKey?(m=E[E.length-1])==null||m.focus():E[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):v===0&&h.shiftKey?((p=E[E.length-1])==null||p.focus(),h.preventDefault(),h.stopImmediatePropagation()):v===E.length-1&&!h.shiftKey&&((U=E[0])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=L.useRef(null);return L.useLayoutEffect(()=>{var d,f;if(r&&c.current&&n!=null&&t!=null){const h=c.current,{width:m,height:p}=h.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},m>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+m-s>a?h.style.left=`${a-m-10}px`:h.style.left=`${t}px`,p>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+p-o>l?h.style.top=`${l-p}px`:h.style.top=`${n}px`}},[n,t,r,a,l,s,o]),L.useEffect(()=>{if(i){const d=f=>{var h;(h=c.current)!=null&&h.contains(f.target)||_n.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},jn="separator",E3e=oe.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=bp(),o=by(),a=t.reduce((l,c)=>(c&&(c===jn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(y3e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===jn)return!a[c-1]||a[c-1]===jn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=k(l.label(o,s,e.app)):d=k(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:O("button",{type:"button",className:me("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?Xi(u):""})]})},c)})})})}),v3e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:O("div",{className:"follow-mode__badge",children:[O("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:gg})]})}),IX=({delay:e,theme:t})=>{const[n,i]=L.useState(!!e);return L.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:O("div",{className:me("LoadingMessage",{"LoadingMessage--dark":t===Ce.DARK}),children:[g("div",{children:g(ol,{})}),g("div",{className:"LoadingMessage-text",children:k("labels.loadingScene")})]})},w3e="medium",kk={CHECKED:H9,UNCHECKED:D5},xX=e=>O("label",{className:me("ToolIcon ToolIcon__lock",`ToolIcon_size_${w3e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?kk.CHECKED:kk.UNCHECKED})]}),CX=({children:e,side:t,className:n})=>g("div",{className:me("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),AX=e=>g(He,{className:me("Shape",{fillable:!1}),type:"radio",icon:NH,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:H.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":H.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),_3e=({appState:e,isMobile:t,device:n,app:i})=>{var u,d;const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===ws.name&&e.openSidebar.tab===Fu&&((d=e.searchMatches)!=null&&d.matches.length))return k("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Io(e))return k("hints.eraserRevert");if(r.type==="arrow"||r.type==="line")return l?k("hints.linearElementMulti"):r.type==="arrow"?k("hints.arrowTool",{arrowShortcut:Q("A")}):k("hints.linearElement");if(r.type==="freedraw")return k("hints.freeDraw");if(r.type==="text")return k("hints.text");if(r.type==="embeddable")return k("hints.embeddable");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const f=c[0];return Ie(f)&&f.points.length===2?k("hints.lockAngle"):wt(f)?k("hints.resizeImage"):k("hints.resize")}if(o&&a==="mouse")return k("hints.rotate");if(c.length===1&&ue(c[0]))return k("hints.text_selected");if(e.editingTextElement)return k("hints.text_editing");if(e.croppingElementId)return k("hints.leaveCropEditor");if(c.length===1&&wt(c[0]))return k("hints.enterCropEditor");if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return[k("hints.deepBoxSelect")];if(ym(i)&&e.selectedElementsAreBeingDragged)return k("hints.disableSnapping");if(!c.length&&!t)return[k("hints.canvasPanning")];if(c.length===1){if(Ie(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?k("hints.lineEditor_pointSelected"):k("hints.lineEditor_nothingSelected"):ln(c[0])?k("hints.lineEditor_line_info"):k("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Hu(c[0]))return w5(c[0])?yce(c[0],i.scene.getNonDeletedElementsMap())?[k("hints.bindTextToElement"),k("hints.createFlowchart")]:[k("hints.bindTextToElement"),k("hints.createFlowchart")]:k("hints.bindTextToElement")}}return null},MX=({appState:e,isMobile:t,device:n,app:i})=>{const r=_3e({appState:e,isMobile:t,device:n,app:i});if(!r)return null;const s=Array.isArray(r)?r.map(o=>Q(o).replace(/\. ?$/,"")).join(". "):Q(r);return g("div",{className:"HintViewer",children:g("span",{children:s})})},T3e="medium",RX=e=>e.penDetected?O("label",{className:me("ToolIcon ToolIcon__penMode",`ToolIcon_size_${T3e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:bue})]}):null,vm=({heading:e,children:t,...n})=>{const{id:i}=aa(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:k(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):O(he,{children:[r,t]})})},S3e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:r,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{var v,w;const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:U}=cr(),E=()=>O(CX,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(vm,{heading:"shapes",children:S=>{var M;return g(bs.Col,{gap:4,align:"center",children:O(bs.Row,{gap:1,className:"App-toolbar-container",children:[O(eo,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[S,g(bs.Row,{gap:1,children:g(gX,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),O("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&g(U.Out,{}),g(RX,{checked:e.penMode,onChange:()=>o(null),title:k("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(xX,{checked:e.activeTool.locked,onChange:r,title:k("toolBar.lock"),isMobile:!0}),g(AX,{checked:Nh(e),onChange:()=>s(),title:k("toolBar.hand"),isMobile:!0})]})]})})}}),g(MX,{appState:e,isMobile:!0,device:u,app:h})]}),y=()=>{var S;return e.viewModeEnabled||((S=e.openDialog)==null?void 0:S.name)==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):O("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),O("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return O(he,{children:[c(),!e.viewModeEnabled&&((v=e.openDialog)==null?void 0:v.name)!=="elementLinkSelector"&&E(),g("div",{className:"App-bottom-bar",style:{marginBottom:os+xo*2,marginLeft:os+xo*2,marginRight:os+xo*2},children:O(eo,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((w=e.openDialog)==null?void 0:w.name)!=="elementLinkSelector"&&N9(e,t)?g(vm,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(hX,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,O("footer",{className:"App-toolbar",children:[y(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(S=>({...tm(t,S)}))},children:k("buttons.scrollBackToContent")})]})]})})]})},Lk=e=>{const t=L.useRef(null),[n,i]=L.useState(null);return L.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=g5e(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>{var a;s=await I_(r,{exportBackground:!1,viewBackgroundColor:fi.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},I3e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=ho(),r=oe.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),st("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(qr,{size:"small",onCloseRequest:r,title:k("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:O("div",{className:"container",children:[g(Lk,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g(Lk,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},x3e=4,C3e=8,A3e=({shouldWrap:e,children:t,username:n})=>e?g(dd,{label:n||"Unknown user",children:t}):g(he,{children:t}),ZE=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(A3e,{username:t.username,shouldWrap:r,children:a},n)},M3e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],kX=oe.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=Sr(),s=new Map;n.forEach((p,U)=>{const E=p.id||U;s.set(E,{...p,socketId:U})});const o=Array.from(s.values()).filter(p=>{var U;return(U=p.username)==null?void 0:U.trim()}),[a,l]=oe.useState(""),c=o.filter(p=>{var U;return(U=p.username)==null?void 0:U.toLowerCase().includes(a)}),u=oe.useRef(null);L.useLayoutEffect(()=>{if(u.current){const p=E=>{const y=Math.max(1,Math.min(8,Math.floor(E/38)));f(y)};if(p(u.current.clientWidth),!x7)return;const U=new ResizeObserver(E=>{for(const y of E){const{width:v}=y.contentRect;p(v)}});return U.observe(u.current),()=>{U.disconnect()}}},[]);const[d,f]=oe.useState(x3e),m=o.slice(0,d-1).map(p=>ZE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:me("UserList UserList_mobile",e),children:o.map(p=>ZE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:O("div",{className:me("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&O($5,{children:[O(G5,{className:"UserList__more",children:["+",o.length-d+1]}),g(c_,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:O(eo,{padding:2,children:[o.length>=C3e&&g(KV,{placeholder:k("quickSearch.placeholder"),onChange:l}),g(ZV,{className:"dropdown-menu UserList__collaborators",placeholder:k("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:k("userList.hint.text")}),c.map(p=>ZE({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g($V,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!Gi(r,s,M3e))return!1}return!0}),R3e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${k("helpDialog.title")} — ?`,"aria-label":k("helpDialog.title"),children:$9}),LX=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=cr(),o=ii(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return O("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:me("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(bs.Col,{gap:2,children:O(vm,{heading:"canvasActions",children:[g(iEe,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(rEe,{renderAction:t.renderAction,className:me("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(oEe,{renderAction:t.renderAction,className:me("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:me("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:O("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(R3e,{onClick:()=>t.executeAction(L_)})]})}),g(sEe,{actionManager:t,showExitZenModeBtn:n})]})};LX.displayName="Footer";const DX=oe.createContext({}),NX=({children:e,className:t})=>{const n=ii(),i=L.useContext(DX),r=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return O("div",{className:me("sidebar__header",t),"data-testid":"sidebar-header",children:[e,O("div",{className:"sidebar__header__buttons",children:[r&&g(dd,{label:k("labels.sidebarLock"),children:g(Fh,{onSelect:()=>{var s;return(s=i.onDock)==null?void 0:s.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":k("labels.sidebarLock"),children:due})}),g(Fh,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":k("buttons.close"),children:gg})]})]})};NX.displayName="SidebarHeader";function k3e(e){const t=e+"CollectionProvider",[n,i]=dp(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,U=oe.useRef(null),E=oe.useRef(new Map).current;return g(r,{scope:m,itemMap:E,collectionRef:U,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=oe.forwardRef((h,m)=>{const{scope:p,children:U}=h,E=s(a,p),y=ao(m,E.collectionRef);return g(nm,{ref:y,children:U})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=oe.forwardRef((h,m)=>{const{scope:p,children:U,...E}=h,y=oe.useRef(null),v=ao(m,y),w=s(c,p);return oe.useEffect(()=>(w.itemMap.set(y,{ref:y,...E}),()=>void w.itemMap.delete(y))),g(nm,{[u]:"",ref:v,children:U})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return oe.useCallback(()=>{const U=m.collectionRef.current;if(!U)return[];const E=Array.from(U.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,S)=>E.indexOf(w.ref.current)-E.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var L3e=L.createContext(void 0);function OX(e){const t=L.useContext(L3e);return e||t||"ltr"}var qE="rovingFocusGroup.onEntryFocus",D3e={bubbles:!1,cancelable:!0},Uy="RovingFocusGroup",[G4,PX,N3e]=k3e(Uy),[O3e,FX]=dp(Uy,[N3e]),[P3e,F3e]=O3e(Uy),BX=L.forwardRef((e,t)=>g(G4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(G4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(B3e,{...e,ref:t})})}));BX.displayName=Uy;var B3e=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=L.useRef(null),h=ao(t,f),m=OX(s),[p=null,U]=o_({prop:o,defaultProp:a,onChange:l}),[E,y]=L.useState(!1),v=al(c),w=PX(n),S=L.useRef(!1),[M,_]=L.useState(0);return L.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(qE,v),()=>T.removeEventListener(qE,v)},[v]),g(P3e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:L.useCallback(T=>U(T),[U]),onItemShiftTab:L.useCallback(()=>y(!0),[]),onFocusableItemAdd:L.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:L.useCallback(()=>_(T=>T-1),[]),children:g(lr.div,{tabIndex:E||M===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Ii(e.onMouseDown,()=>{S.current=!0}),onFocus:Ii(e.onFocus,T=>{const C=!S.current;if(T.target===T.currentTarget&&C&&!E){const x=new CustomEvent(qE,D3e);if(T.currentTarget.dispatchEvent(x),!x.defaultPrevented){const R=w().filter(V=>V.focusable),P=R.find(V=>V.active),D=R.find(V=>V.id===p),z=[P,D,...R].filter(Boolean).map(V=>V.ref.current);VX(z,u)}}S.current=!1}),onBlur:Ii(e.onBlur,()=>y(!1))})})}),zX="RovingFocusGroupItem",HX=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=Z9(),l=s||a,c=F3e(zX,n),u=c.currentTabStopId===l,d=PX(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return L.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(G4.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(lr.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ii(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:Ii(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ii(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=V3e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let E=d().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")E.reverse();else if(p==="prev"||p==="next"){p==="prev"&&E.reverse();const y=E.indexOf(m.currentTarget);E=c.loop?$3e(E,y+1):E.slice(y+1)}setTimeout(()=>VX(E))}})})})});HX.displayName=zX;var z3e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function H3e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function V3e(e,t,n){const i=H3e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return z3e[i]}function VX(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function $3e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var G3e=BX,X3e=HX,z_="Tabs",[Y3e,Pxe]=dp(z_,[FX]),$X=FX(),[j3e,H_]=Y3e(z_),GX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=OX(a),[d,f]=o_({prop:i,onChange:r,defaultProp:s});return g(j3e,{scope:n,baseId:Z9(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(lr.div,{dir:u,"data-orientation":o,...c,ref:t})})});GX.displayName=z_;var XX="TabsList",YX=L.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=H_(XX,n),o=$X(n);return g(G3e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(lr.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});YX.displayName=XX;var jX="TabsTrigger",WX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=H_(jX,n),a=$X(n),l=qX(o.baseId,i),c=QX(o.baseId,i),u=i===o.value;return g(X3e,{asChild:!0,...a,focusable:!r,active:u,children:g(lr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:Ii(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Ii(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Ii(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});WX.displayName=jX;var KX="TabsContent",ZX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=H_(KX,n),l=qX(a.baseId,i),c=QX(a.baseId,i),u=i===a.value,d=L.useRef(u);return L.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(H5,{present:r||u,children:({present:f})=>g(lr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});ZX.displayName=KX;function qX(e,t){return`${e}-trigger-${t}`}function QX(e,t){return`${e}-content-${t}`}var JX=GX,eY=YX,tY=WX,nY=ZX;const iY=({children:e,tab:t,onSelect:n,...i})=>g(tY,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});iY.displayName="SidebarTabTrigger";const rY=({children:e,...t})=>g(eY,{className:"sidebar-triggers",...t,children:e});rY.displayName="SidebarTabTriggers";const sY=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{var u;const l=An(),c=Ai();return O("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),s==null||s(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),O("div",{className:me("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};sY.displayName="SidebarTrigger";const oY=({children:e,...t})=>{const n=Ai(),i=An();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g(JX,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};oY.displayName="SidebarTabs";const aY=({tab:e,children:t,...n})=>g(nY,{...n,value:e,"data-testid":e,children:t});aY.displayName="SidebarTab";const V_=Xt(!1),lY=L.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=An(),l=k5(V_);L.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=L.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=l2(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=L.useRef(null);L.useImperativeHandle(o,()=>u.current);const d=ii(),f=L.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return u_(u,L.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),L.useEffect(()=>{const h=m=>{m.key===H.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(ee.KEYDOWN,h),()=>{document.removeEventListener(ee.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(eo,{...s,className:me("sidebar",{"sidebar--docked":i},r),ref:u,children:g(DX.Provider,{value:c.current,children:t})})});lY.displayName="SidebarInner";const To=Object.assign(L.forwardRef((e,t)=>{var l;const n=Ai(),{onStateChange:i}=e,r=L.useRef(n.openSidebar);L.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=r==null?void 0:r.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=r==null?void 0:r.current)==null?void 0:d.name)!==e.name||((f=r.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==r.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=L.useState(!1);return L.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((l=n.openSidebar)==null?void 0:l.name)===e.name?L.createElement(lY,{...e,ref:t,key:e.name}):null}),{Header:NX,TabTriggers:rY,TabTrigger:iY,Tabs:oY,Tab:aY,Trigger:sY});To.displayName="Sidebar";const pp=(e,t)=>{const n=Xt(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=cr(),[,o]=s(n),a=L.useRef({preferHost:!1,counter:0});return L.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},cY=Xt({active:!1});async function X4({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{Pr.set(cY,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const uY=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>O("div",{className:me("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},dY=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=ii();return O(he,{children:[O("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(uY,{name:s,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};dY.displayName="DropdownMenuItemContentRadio";const fY=()=>{const{t:e}=En(),t=Sr(),n=by();return t.isActionEnabled(L4)?g(Tr,{icon:X9,onSelect:async()=>{(!n.length||await X4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(Ur,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(L4)},"data-testid":"load-button",shortcut:Xi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};fY.displayName="LoadScene";const hY=()=>{const{t:e}=En(),t=Sr();return t.isActionEnabled(m6)?g(Tr,{shortcut:Xi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(m6),icon:Tue,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};hY.displayName="SaveToActiveFile";const gY=()=>{const e=An(),{t}=En();return g(Tr,{icon:CH,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Xi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};gY.displayName="SaveAsImage";const mY=e=>{const t=An(),{t:n}=En();return g(Tr,{icon:b4,"data-testid":"command-palette-button",onSelect:()=>{st("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Xi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};mY.displayName="CommandPalette";const pY=e=>{const{t}=En(),n=Sr();return g(Tr,{icon:ld,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(pX)},shortcut:Xi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};pY.displayName="SearchMenu";const UY=()=>{const{t:e}=En(),t=Sr();return g(Tr,{"data-testid":"help-menu-item",icon:$9,onSelect:()=>t.executeAction(L_),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};UY.displayName="Help";const bY=()=>{const{t:e}=En(),t=k5(my);return Sr().isActionEnabled(m0)?g(Tr,{icon:ad,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};bY.displayName="ClearCanvas";const yY=e=>{const{t}=En(),n=Ai(),i=Sr(),r=Xi("toggleTheme");return i.isActionEnabled(a6)?e!=null&&e.allowSystemTheme?g(dY,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Ce.LIGHT,label:m4,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:Ce.DARK,label:g4,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:Vde,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(Tr,{onSelect:s=>{if(s.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===Ce.DARK?Ce.LIGHT:Ce.DARK);else return i.executeAction(a6)},icon:n.theme===Ce.DARK?m4:g4,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===Ce.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Ce.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};yY.displayName="ToggleTheme";const EY=()=>{const{t:e}=En(),t=Ai(),n=Sr(),i=Up();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:O("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};EY.displayName="ChangeCanvasBackground";const vY=()=>{const{t:e}=En(),t=An();return g(Tr,{icon:O5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};vY.displayName="Export";const wY=()=>{const{t:e}=En();return O(he,{children:[g(v0,{icon:G9,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(v0,{icon:xH,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(v0,{icon:IH,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};wY.displayName="Socials";const _Y=({onSelect:e,isCollaborating:t})=>{const{t:n}=En();return g(Tr,{"data-testid":"collab-button",icon:Y9,className:me({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};_Y.displayName="LiveCollaborationTrigger";const W3e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:EY,ClearCanvas:bY,CommandPalette:mY,Export:vY,Help:UY,LiveCollaborationTrigger:_Y,LoadScene:fY,SaveAsImage:gY,SaveToActiveFile:hY,SearchMenu:pY,Socials:wY,ToggleTheme:yY},Symbol.toStringTag,{value:"Module"})),jt=Object.assign(pp("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=cr(),i=ii(),r=Ai(),s=An(),o=i.editor.isMobile?void 0:()=>s({openMenu:null});return g(n.In,{children:O(Qe,{open:r.openMenu==="canvas",children:[g(Qe.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:SH}),O(Qe.Content,{onClickOutside:o,onSelect:E5(t,()=>{s({openMenu:null})}),children:[e,i.editor.isMobile&&r.collaborators.size>0&&O("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:k("labels.collaborators")}),g(kX,{mobile:!0,collaborators:r.collaborators,userToFollow:((a=r.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Qe.Trigger,Item:Qe.Item,ItemLink:Qe.ItemLink,ItemCustom:Qe.ItemCustom,Group:Qe.Group,Separator:Qe.Separator,DefaultItems:W3e}),io=L.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=L.useState(!1),h=async p=>{const U=n==null?void 0:n(p);if(Jm(U)){const E=window.setTimeout(()=>{f(!0)},50);try{await U}catch(y){if(y instanceof kh)console.warn(y);else throw y}finally{clearTimeout(E),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:me("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:O("div",{className:"ExcButton__contents",children:[m==="loading"?g(ol,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:_de}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),$_=({title:e,children:t,actionLabel:n,onClick:i})=>O("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(io,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),K3e=()=>{const{t:e}=En(),t=Sr(),n=An();return g($_,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(xG,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},Z3e=()=>{const{t:e}=En(),t=Sr();return g($_,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(CG,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},Dk=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:K3e,SaveToDisk:Z3e}),Au=Object.assign(pp("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=cr(),[n,i]=fn(cY);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(qr,{onCloseRequest:r,title:!1,size:916,children:O("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),O("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:Tde}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(io,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(Dk,{children:e})]})})})}),{Actions:Dk,Action:$_});var q3e="Expected a function",Nk=NaN,Q3e="[object Symbol]",J3e=/^\s+|\s+$/g,e7e=/^[-+]0x[0-9a-f]+$/i,t7e=/^0b[01]+$/i,n7e=/^0o[0-7]+$/i,i7e=parseInt,r7e=typeof Ma=="object"&&Ma&&Ma.Object===Object&&Ma,s7e=typeof self=="object"&&self&&self.Object===Object&&self,o7e=r7e||s7e||Function("return this")(),a7e=Object.prototype,l7e=a7e.toString,c7e=Math.max,u7e=Math.min,QE=function(){return o7e.Date.now()};function d7e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(q3e);t=Ok(t)||0,Y4(n)&&(u=!!n.leading,d="maxWait"in n,s=d?c7e(Ok(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var _=i,T=r;return i=r=void 0,c=M,o=e.apply(T,_),o}function m(M){return c=M,a=setTimeout(E,t),u?h(M):o}function p(M){var _=M-l,T=M-c,C=t-_;return d?u7e(C,s-T):C}function U(M){var _=M-l,T=M-c;return l===void 0||_>=t||_<0||d&&T>=s}function E(){var M=QE();if(U(M))return y(M);a=setTimeout(E,p(M))}function y(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function w(){return a===void 0?o:y(QE())}function S(){var M=QE(),_=U(M);if(i=arguments,r=this,l=M,_){if(a===void 0)return m(l);if(d)return a=setTimeout(E,t),h(l)}return a===void 0&&(a=setTimeout(E,t)),o}return S.cancel=v,S.flush=w,S}function Y4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function f7e(e){return!!e&&typeof e=="object"}function h7e(e){return typeof e=="symbol"||f7e(e)&&l7e.call(e)==Q3e}function Ok(e){if(typeof e=="number")return e;if(h7e(e))return Nk;if(Y4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Y4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(J3e,"");var n=t7e.test(e);return n||n7e.test(e)?i7e(e.slice(2),n?2:8):e7e.test(e)?Nk:+e}var g7e=d7e;const m7e=gl(g7e),p7e=Xt(""),TY=Xt(null),U7e=350,b7e=()=>{const e=ho(),t=An(),n=L.useRef(null),[i,r]=fn(p7e),s=i.trim(),[o,a]=L.useState(!1),[l,c]=L.useState({nonce:null,items:[]}),u=L.useRef(null),d=L.useRef(void 0),[f,h]=fn(TY),m=e.scene.getNonDeletedElementsMap();L.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,Bk(s,e,(v,w)=>{c({nonce:Ms(),items:v}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:v.length?{focusedId:null,matches:v.map(S=>({id:S.element.id,focus:!1,matchedLines:S.matchedLines}))}:null})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(v=>v===null?0:(v+1)%l.items.length)},U=()=>{l.items.length>0&&h(v=>v===null?0:v-1<0?l.items.length-1:v-1)};L.useEffect(()=>{t(v=>{var S,M;return v.searchMatches?{searchMatches:{focusedId:f!==null&&((M=(S=v.searchMatches)==null?void 0:S.matches[f])==null?void 0:M.id)||null,matches:v.searchMatches.matches.map((_,T)=>T===f?{..._,focus:!0}:{..._,focus:!1})}}:null})},[f,t]),L.useEffect(()=>{var v,w,S,M;if(l.items.length>0&&f!==null){const _=l.items[f];if(_){const T=e.state.zoom.value,C=Kr({text:_.searchQuery,x:_.element.x+(((v=_.matchedLines[0])==null?void 0:v.offsetX)??0),y:_.element.y+(((w=_.matchedLines[0])==null?void 0:w.offsetY)??0),width:(S=_.matchedLines[0])==null?void 0:S.width,height:(M=_.matchedLines[0])==null?void 0:M.height,fontSize:Ee(_.element)?Dt.nameFontSize:_.element.fontSize,fontFamily:Ee(_.element)?qe.Assistant:_.element.fontFamily}),x=14,R=C.fontSize,P=R*T<x;if(!m2([C],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||P){let D;P?R>=x?D={fitToContent:!0}:D={fitToViewport:!0,maxZoom:$a(x/R,1)}:D={fitToContent:!0},e.scrollToContent(C,{animate:!0,duration:300,...D,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),L.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:null}),a(!1)},[t,h]);const E=X5({goToNextItem:p,goToPreviousItem:U,searchMatches:l});L.useEffect(()=>{const v=w=>{var S,M,_;if(w.key===H.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){w.preventDefault(),w.stopPropagation(),t({openSidebar:null});return}if(w[H.CTRL_OR_CMD]&&w.key===H.F){if(w.preventDefault(),w.stopPropagation(),e.state.openDialog)return;(S=n.current)!=null&&S.matches(":focus")||(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(_=n.current)==null||_.select())}w.target instanceof HTMLElement&&w.target.closest(".layer-ui__search")&&E.searchMatches.items.length&&(w.key===H.ENTER&&(w.stopPropagation(),E.goToNextItem()),w.key===H.ARROW_UP?(w.stopPropagation(),E.goToPreviousItem()):w.key===H.ARROW_DOWN&&(w.stopPropagation(),E.goToNextItem()))};return Qt(window,ee.KEYDOWN,v,{capture:!0,passive:!1})},[t,E,e]);const y=`${l.items.length} ${l.items.length===1?k("search.singleResult"):k("search.multipleResults")}`;return O("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Bh,{className:Ac.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:k("search.placeholder"),icon:ld,onChange:v=>{r(v),a(!0);const w=v.trim();Bk(w,e,(S,M)=>{c({nonce:Ms(),items:S}),h(M),u.current=w,d.current=e.scene.getSceneNonce(),t({searchMatches:S.length?{focusedId:null,matches:S.map(_=>({id:_.element.id,focus:!1,matchedLines:_.matchedLines}))}:null}),a(!1)})},selectOnRender:!0})}),O("div",{className:"layer-ui__search-count",children:[l.items.length>0&&O(he,{children:[f!==null&&f>-1?O("div",{children:[f+1," / ",y]}):g("div",{children:y}),O("div",{className:"result-nav",children:[g(Fh,{onSelect:()=>{p()},className:"result-nav-btn",children:$H}),g(Fh,{onSelect:()=>{U()},className:"result-nav-btn",children:Yde})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:k("search.noMatch")})]}),g(v7e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},Pk=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:me("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(L.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},y7e=e=>{const t=L.useMemo(()=>e.matches.items.filter(i=>Ee(i.element)),[e.matches]),n=L.useMemo(()=>e.matches.items.filter(i=>ue(i.element)),[e.matches]);return O("div",{children:[t.length>0&&O("div",{className:"layer-ui__search-result-container",children:[O("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:t6}),g("div",{children:k("search.frames")})]}),t.map((i,r)=>g(Pk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r===e.focusIndex,onClick:()=>e.onItemClick(r)},i.element.id+i.index)),n.length>0&&g("div",{className:"layer-ui__divider"})]}),n.length>0&&O("div",{className:"layer-ui__search-result-container",children:[O("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:V9}),g("div",{children:k("search.texts")})]}),n.map((i,r)=>g(Pk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r+t.length===e.focusIndex,onClick:()=>e.onItemClick(r+t.length)},i.element.id+i.index))]})]})},E7e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,v7e=L.memo(y7e,E7e),Fk=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},w7e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},_7e=(e,t,n)=>{const r=w7e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Hn(h,dt(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const w=Hn(d.line,dt(e),e.lineHeight),S=e.textAlign==="center"?(e.width-w.width)/2:e.width-w.width;p.width+=S}const{width:U,height:E}=Hn(m,dt(e),e.lineHeight),y=p.width,v=d.lineNumber*p.height;u.push({offsetX:y,offsetY:v,width:U,height:E,showOnCanvas:!0}),l+=f}}return u},T7e=(e,t,n,i)=>{const r=e.name??v9(e),s=r.slice(n,n+t.length),o=r.slice(0,n),a=dt({fontSize:Dt.nameFontSize,fontFamily:qe.Assistant}),l=Mc(qe.Assistant),c=Hn(o,a,l);o===""&&(c.width=0);const u=Hn(s,a,l),d=c.width,f=-c.height-Dt.strokeWidth,h=u.width;return[{offsetX:d,offsetY:f,width:h,height:u.height,showOnCanvas:d+h<=e.width*i}]},S7e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),Bk=m7e((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements(),r=i.filter(f=>ue(f)),s=i.filter(f=>Ee(f));r.sort((f,h)=>f.y-h.y),s.sort((f,h)=>f.y-h.y);const o=[],a=new RegExp(S7e(e),"gi");for(const f of r){let h=null;const m=f.originalText;for(;(h=a.exec(m))!==null;){const p=Fk(m,h.index,e),U=_7e(f,e,h.index);U.length>0&&o.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const l=[];for(const f of s){let h=null;const m=f.name??v9(f);for(;(h=a.exec(m))!==null;){const p=Fk(m,h.index,e),U=T7e(f,e,h.index,t.state.zoom.value);U.length>0&&l.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const c=new Set(t.visibleElements.map(f=>f.id)),u=[...l,...o],d=u.findIndex(f=>c.has(f.element.id))??null;n(u,d)},U7e),SY=pp("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=cr();return g(t.In,{children:g(To.Trigger,{...e,className:"default-sidebar-trigger",name:ws.name})})});SY.displayName="DefaultSidebarTrigger";const IY=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=cr();return g(t.In,{children:e})};IY.displayName="DefaultTabTriggers";const zk=Object.assign(pp("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{var c;const s=Ai(),o=An(),{DefaultSidebarTabTriggersTunnel:a}=cr(),l=((c=s.openSidebar)==null?void 0:c.tab)===Fu;return L.createElement(To,{...r,name:"default",key:"default",className:me("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:E5(n,u=>{o({defaultSidebarDockedPreference:u})})},O(To.Tabs,{children:[g(To.Header,{children:O(To.TabTriggers,{children:[g(To.TabTrigger,{tab:Fu,children:ld}),g(To.TabTrigger,{tab:Eb,children:z9}),g(a.Out,{})]})}),g(To.Tab,{tab:Eb,children:g(T8e,{})}),g(To.Tab,{tab:Fu,children:g(b7e,{})}),e]}))}),{Trigger:SY,TabTriggers:IY}),xY=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=L.useRef(null),s=L.useRef(i);return s.current=i,L.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{var c;l[H.CTRL_OR_CMD]&&l.key===H.ENTER&&(l.preventDefault(),(c=s.current)==null||c.call(s))};return o.focus(),o.addEventListener(ee.KEYDOWN,a),()=>{o.removeEventListener(ee.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,ref:r})},I7e=({error:e})=>O("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),CY=({error:e,canvasRef:t,loaded:n})=>O("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(I7e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(ol,{size:"2rem"})]}),w6=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>O("div",{className:"ttd-dialog-panel",children:[O("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s==null?void 0:s()]}),t,O("div",{className:me("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[O(Fh,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[O("div",{className:me({invisible:r}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),r&&g(ol,{})]}),!i&&!r&&(o==null?void 0:o()),a==null?void 0:a()]})]}),AY=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),MY=()=>O("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("Enter")})]}),x7e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},RY=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){x7e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:V4(c,{regenerateIds:!0}),files:u};const d=await hy({elements:r.current.elements,files:r.current.files,exportPadding:sg,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await gm(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},G_=e=>{Xu.set(i0.MERMAID_TO_EXCALIDRAW,e)},kY=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&G_(n))},C7e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Hk=el(G_,300),A7e=({mermaidToExcalidrawLib:e})=>{const[t,n]=L.useState(()=>Xu.get(i0.MERMAID_TO_EXCALIDRAW)||C7e),i=L.useDeferredValue(t.trim()),[r,s]=L.useState(null),o=L.useRef(null),a=L.useRef({elements:[],files:null}),l=ho();L.useEffect(()=>{RY({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),Hk(i)},[i,e]),L.useEffect(()=>()=>{Hk.flush()},[]);const c=()=>{kY({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return O(he,{children:[g("div",{className:"ttd-dialog-desc",children:g(Ur,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),O(AY,{children:[g(w6,{label:k("mermaid.syntax"),children:g(xY,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(w6,{label:k("mermaid.preview"),panelAction:{action:()=>{c()},label:k("mermaid.button"),icon:b2},renderSubmitShortcut:()=>g(MY,{}),children:g(CY,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},LY=e=>{const t=An(),n=L.useRef(null),i=L.useRef(0);return g(JX,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{var o;if(!r)return;const s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){const a=s.offsetHeight||0;a>i.current&&(i.current=a,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&PF(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};LY.displayName="TTDDialogTabs";const DY=({children:e,...t})=>g(eY,{className:"ttd-dialog-triggers",...t,children:e});DY.displayName="TTDDialogTabTriggers";const j4=({children:e,tab:t,onSelect:n,...i})=>g(tY,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});j4.displayName="TTDDialogTabTrigger";const W4=({tab:e,children:t,...n})=>g(nY,{...n,value:e,children:t});W4.displayName="TTDDialogTab";const JE=3,ef=1e3,M7e=Xt(null),R7e=Xt(null),NY=e=>{var n;const t=Ai();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(k7e,{...e,tab:t.openDialog.tab})},k7e=pp("TTDDialogBase",({tab:e,...t})=>{const n=ho(),i=An(),r=L.useRef(null),[s,o]=fn(R7e),[a,l]=L.useState((s==null?void 0:s.prompt)??""),c=a.trim(),u=M=>{l(M.target.value),o(_=>({generatedResponse:(_==null?void 0:_.generatedResponse)??null,prompt:M.target.value}))},[d,f]=L.useState(!1),[h,m]=fn(M7e),p=async()=>{if(c.length>ef||c.length<JE||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<JE&&S(new Error(`Prompt is too short (min ${JE} characters)`)),c.length>ef&&S(new Error(`Prompt is too long (max ${ef} characters)`));return}try{f(!0),st("ai","generate","ttd");const{generatedResponse:M,error:_,rateLimit:T,rateLimitRemaining:C}=await t.onTextSubmit(c);if(typeof M=="string"&&o(x=>({generatedResponse:M,prompt:(x==null?void 0:x.prompt)??null})),s0(T)&&s0(C)&&m({rateLimit:T,rateLimitRemaining:C}),_){S(_);return}if(!M){S(new Error("Generation failed"));return}try{await RY({canvasRef:r,data:v,mermaidToExcalidrawLib:E,setError:S,mermaidDefinition:M}),st("ai","mermaid parse success","ttd")}catch(x){console.info(`%cTTD mermaid render errror: ${x.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${x.message}`,"color: yellow"),st("ai","mermaid parse failed","ttd"),S(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let _=M.message;(!_||_==="Failed to fetch")&&(_="Request failed"),S(new Error(_))}finally{f(!1)}},U=L.useRef(p);U.current=p;const[E,y]=L.useState({loaded:!1,api:pe(()=>import("./index-foVEfX0v.js").then(M=>M.b6),__vite__mapDeps([]),import.meta.url)});L.useEffect(()=>{(async()=>{await E.api,y(_=>({..._,loaded:!0}))})()},[E.api]);const v=L.useRef({elements:[],files:null}),[w,S]=L.useState(null);return g(qr,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:O(LY,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:k("mermaid.title")}):O(DY,{children:[g(j4,{tab:"text-to-diagram",children:O("div",{style:{display:"flex",alignItems:"center"},children:[k("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(j4,{tab:"mermaid",children:"Mermaid"})]}),g(W4,{className:"ttd-dialog-content",tab:"mermaid",children:g(A7e,{mermaidToExcalidrawLib:E})}),!("__fallback"in t)&&O(W4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),O(AY,{children:[g(w6,{label:k("labels.prompt"),panelAction:{action:p,label:"Generate",icon:b2},onTextSubmitInProgess:d,panelActionDisabled:c.length>ef||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?O("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(MY,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return O("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(G_(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(W5,{icon:b2})]});const M=c.length/ef;return M>.8?O("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",ef]}):null},children:g(xY,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),g(w6,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),kY({app:n,data:v})},label:"Insert",icon:b2},children:g(CY,{canvasRef:r,error:w,loaded:E.loaded})})]})]})]})})}),L7e=.01,K4=10,ul=(e,t)=>!(t==="angle"&&Ee(e)),zi=(e,t)=>{const n=e+t/2;return n-n%t},_6=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),wm=(e,t,n,i,r,s=!0)=>{const o=i.getNonDeletedElementsMap(),a=o.get(n.id);if(!a)return;const[l,c]=[n.x+n.width/2,n.y+n.height/2],[u,d]=q(I(n.x,n.y),I(l,c),n.angle),f=e-u,h=t-d,[m,p]=q(I(e,t),I(l+f,c+h),-n.angle);i.mutateElement(a,{x:m,y:p},{informMutation:s,isDragging:!1}),K0(a,i);const U=ke(n,r);if(U){const E=o.get(U.id);E&&i.mutateElement(E,{x:U.x+f,y:U.y+h},{informMutation:s,isDragging:!1})}if(Ee(n)){const E=Rs(r,n.id);E.forEach(y=>{const v=o.get(y.id);if(!v)return;const[w,S]=[y.x+y.width/2,y.y+y.height/2],[M,_]=q(I(y.x,y.y),I(w,S),y.angle),T=Math.round(M+f),C=Math.round(_+h),[x,R]=q(I(T,C),I(w+f,S+h),-y.angle);i.mutateElement(v,{x,y:R},{informMutation:s,isDragging:!1}),K0(v,i,{simultaneouslyUpdated:E})})}},X_=(e,t)=>{const i=$u(t).map(r=>At(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!Ch(r)).forEach(r=>{i.push({[r.id]:!0})}),i},bl=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1,dragFinishedCallback:d})=>{const f=ho(),h=An(),m=L.useRef(null),p=L.useRef(null),[U,E]=L.useState(i.toString()),y=L.useRef(null);y.current||(y.current={originalAppState:Xa(c),originalElements:r,lastUpdatedValue:U,updatePending:!1}),L.useEffect(()=>{const S=i.toString();E(S),y.current.lastUpdatedValue=S},[i]);const v=(S,M,_)=>{if(!y.current.updatePending)return!1;y.current.updatePending=!1;const T=Number(S);if(isNaN(T)){E(i.toString());return}const C=Number(T.toFixed(2)),x=Number(i);(isNaN(x)||Math.abs(C-x)>=L7e)&&(y.current.lastUpdatedValue=S,n({accumulatedChange:0,instantChange:0,originalElements:M,originalElementsMap:f.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:C,property:a,originalAppState:_,setInputValue:R=>E(String(R)),app:f,setAppState:h}),f.syncActionResult({captureUpdate:W.IMMEDIATELY}))},w=L.useRef({});return w.current.handleInputValue=v,L.useEffect(()=>{const S=m.current,M=w.current;return()=>{var T;const _=S==null?void 0:S.value;_&&((T=M.handleInputValue)==null||T.call(M,_,y.current.originalElements,y.current.originalAppState)),window.removeEventListener(ee.POINTER_MOVE,M.onPointerMove,!1),window.removeEventListener(ee.POINTER_UP,M.onPointerUp,!1)}},[s]),s?O("div",{className:me("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:p,onPointerDown:S=>{if(m.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(m.current.value);let M=null,_=f.scene.getNonDeletedElements().reduce(($,z)=>($.set(z.id,Lc(z)),$),new Map),T=r.map($=>_.get($.id));const C=Xa(c);let x=0,R=0;const P=$=>{if(M&&_!==null&&T!==null){const z=$.clientX-M.x;z!==0&&(R+=z,Math.abs(R)>=u&&(R=Math.sign(R)*Math.floor(Math.abs(R)/u),x+=R,n({accumulatedChange:x,instantChange:R,originalElements:T,originalElementsMap:_,shouldKeepAspectRatio:o,shouldChangeByStepSize:$.shiftKey,property:a,scene:l,originalAppState:C,setInputValue:V=>E(String(V)),app:f,setAppState:h}),R=0))}M={x:$.clientX,y:$.clientY}},D=()=>{window.removeEventListener(ee.POINTER_MOVE,P,!1),f.syncActionResult({captureUpdate:W.IMMEDIATELY}),d==null||d({app:f,setAppState:h,originalElements:T,originalAppState:C}),M=null,x=0,R=0,T=null,_=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(ee.POINTER_UP,D,!1)};w.current.onPointerMove=P,w.current.onPointerUp=D,window.addEventListener(ee.POINTER_MOVE,P,!1),window.addEventListener(ee.POINTER_UP,D,!1)}},onPointerEnter:()=>{p.current&&(p.current.style.cursor="ew-resize")},children:t?g(W5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:S=>{if(s){const M=S.target;M instanceof HTMLInputElement&&S.key===H.ENTER&&(v(M.value,r,c),f.focusContainer())}},ref:m,value:U,onChange:S=>{y.current.updatePending=!0,E(S.target.value)},onFocus:S=>{S.target.select(),y.current.originalElements=r,y.current.originalAppState=Xa(c)},onBlur:S=>{U?s&&v(S.target.value,y.current.originalElements,y.current.originalAppState):E(i.toString())},disabled:!s})]}):null},D7e=15,N7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o&&!de(o)){const a=s.get(o.id);if(!a)return;if(i!==void 0){const h=Bu(i);r.mutateElement(a,{angle:h}),K0(a,r);const m=ke(a,s);m&&!xe(a)&&r.mutateElement(m,{angle:h});return}const l=Math.round(p5(o.angle)*100)/100,c=Math.round(e);let u=(l+c)%360;n&&(u=zi(u,D7e)),u=u<0?u+360:u;const d=Bu(u);r.mutateElement(a,{angle:d}),K0(a,r);const f=ke(a,s);f&&!xe(a)&&r.mutateElement(f,{angle:d})}},O7e=({element:e,scene:t,appState:n,property:i})=>g(bl,{label:"A",icon:DH,value:Math.round(p5(e.angle)%360*100)/100,elements:[e],dragInputCallback:N7e,editable:ul(e,"angle"),scene:t,appState:n,property:i}),Vk=5,P7e=({property:e,scene:t,appState:n,setAppState:i})=>g(bl,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?zi(l.gridStep+Vk*Math.sign(s),Vk):l.gridStep+s),c?(c=yH(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),$k=10,F7e=e=>e.type==="image",B7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c,app:u,setAppState:d})=>{const f=c.getNonDeletedElementsMap(),h=t[0],m=f.get(h.id);if(h&&m){const p=i||F7e(h),U=h.width/h.height;if(a.croppingElementId===h.id){const E=f.get(h.id);if(!E||!wt(E)||!E.crop)return;const y=E.crop;let v={...y};const w=E.scale[0]===-1,S=E.scale[1]===-1,{width:M,height:_}=il(E),T=y.naturalWidth/M,C=y.naturalHeight/_,x=w?y.width+y.x:y.naturalWidth-y.x,R=S?y.height+y.y:y.naturalHeight-y.y,P=ri*T,D=ri*C;if(s!==void 0){if(o==="width"){const Y=s*T,X=Ge(Y,P,x);v={...v,width:X,x:w?y.x+y.width-X:y.x}}else if(o==="height"){const Y=s*C,X=Ge(Y,D,R);v={...v,height:X,y:S?y.y+y.height-X:y.y}}c.mutateElement(E,{crop:v,width:v.width/(y.naturalWidth/M),height:v.height/(y.naturalHeight/_)});return}const $=o==="width"?l:0,z=o==="height"?l:0,V=Ge(y.width+$,P,x),G=Ge(y.height+z,P,R);v={...y,x:w?y.x+y.width-V:y.x,y:S?y.y+y.height-G:y.y,width:V,height:G},c.mutateElement(E,{crop:v,width:v.width/(y.naturalWidth/M),height:v.height/(y.naturalHeight/_)});return}if(s!==void 0){const E=Math.max(o==="width"?s:p?s*U:h.width,ss),y=Math.max(o==="height"?s:p?s/U:h.height,ss);if(J0(E,y,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),Ee(m)){const v=zo(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap()),w=dg(c.getElementsIncludingDeleted(),v,m,u);c.replaceAllElements(w)}return}{const E=o==="width"?e:0,y=o==="height"?e:0;let v=Math.max(0,h.width+E);o==="width"&&(r?v=zi(v,$k):v=Math.round(v));let w=Math.max(0,h.height+y);if(o==="height"&&(r?w=zi(w,$k):w=Math.round(w)),p&&(o==="width"?w=Math.round(v/U*100)/100:v=Math.round(w*U*100)/100),w=Math.max(ss,w),v=Math.max(ss,v),J0(v,w,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),Ee(m)){const S=zo(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap());d({elementsToHighlight:S})}}}},z7e=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n==null?void 0:n[0],o=s&&r.get(s.id);if(o&&Ee(o)){const a=zo(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=dg(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},Gk=({property:e,element:t,scene:n,appState:i})=>{let r=$a(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&wt(t)&&t.crop){const{width:s,height:o}=il(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=$a(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=$a(t.crop.height*a,2)}}return g(bl,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:B7e,value:r,editable:ul(t,e),scene:n,appState:i,property:e,dragFinishedCallback:z7e})},Xk=4,H7e=4,V7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!ue(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),Xk);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,Xk),n&&(l=zi(l,H7e))}l&&(r.mutateElement(a,{fontSize:l}),Yi(a,r.getContainerElement(a),r))}},$7e=({element:e,scene:t,appState:n,property:i})=>{const r=ue(e)?e:sr(e)?ke(e,t.getNonDeletedElementsMap()):null;return r?g(bl,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:V7e,icon:P5,appState:n,scene:t,property:i}):null},G7e=15,X7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!Ch(c)&&ul(c,r)),l=t.filter(c=>!Ch(c)&&ul(c,r));if(i!==void 0){const c=Bu(i);for(const u of a){if(!u)continue;s.mutateElement(u,{angle:c});const d=ke(u,o);d&&!xe(u)&&s.mutateElement(d,{angle:c})}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(p5(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=zi(m,G7e)),m=m<0?m+360:m;const p=Bu(m);s.mutateElement(u,{angle:p});const U=ke(u,o);U&&!xe(u)&&s.mutateElement(U,{angle:p})}s.triggerUpdate()},Y7e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!Ch(l)&&ul(l,"angle")),s=r.map(l=>Math.round(p5(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>ul(l,"angle"));return g(bl,{label:"A",icon:DH,value:o,elements:e,dragInputCallback:X7e,editable:a,appState:n,scene:t,property:i})},tf=10,j7e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...R9(i,o,a,!1),...ue(i)?{fontSize:i.fontSize*n}:{}}},W7e=(e,t,n,i,r,s,o,a)=>{const l=a.getNonDeletedElementsMap(),c=j7e(e,t,i,s);a.mutateElement(r,c);const u=ke(s,o);if(u){const d=u.fontSize*i;br(r,a,{newSize:{width:c.width,height:c.height}});const f=l.get(u.id);f&&ue(f)&&(a.mutateElement(f,{fontSize:d}),rp(r,a,n==="width"?"e":"s",!0))}},Yk=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];W7e(r[0],r[1],s,u,h,f,l,c)}},K7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a,setAppState:l,app:c})=>{const u=o.getNonDeletedElementsMap(),d=X_(t,i);if(s!==void 0){for(const p of d){const U=_6(p,u,n);if(U.length>1){const E=U.map(P=>P.latest),y=U.map(P=>P.original),[v,w,S,M]=mt(y),_=S-v,T=M-w,C=_/T,x=Math.max(ss,a==="width"?Math.max(0,s):_),R=Math.max(ss,a==="height"?Math.max(0,s):T);Yk(x,R,T,C,I(v,w),a,E,y,n,o)}else{const[E]=U,y=E==null?void 0:E.latest,v=E==null?void 0:E.original;if(y&&v&&ul(y,a)){let w=a==="width"?Math.max(0,s):y.width;a==="width"&&(r?w=zi(w,tf):w=Math.round(w));let S=a==="height"?Math.max(0,s):y.height;if(a==="height"&&(r?S=zi(S,tf):S=Math.round(S)),w=Math.max(ss,w),S=Math.max(ss,S),J0(w,S,y,v,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),Ee(y)){const M=zo(o.getElementsIncludingDeleted(),y,i,o.getNonDeletedElementsMap()),_=dg(o.getElementsIncludingDeleted(),M,y,c);o.replaceAllElements(_)}}}}o.triggerUpdate();return}const f=a==="width"?e:0,h=a==="height"?e:0,m=[];for(const p of d){const U=_6(p,u,n);if(U.length>1){const E=U.map(P=>P.latest),y=U.map(P=>P.original),[v,w,S,M]=mt(y),_=S-v,T=M-w,C=_/T;let x=Math.max(0,_+f);a==="width"&&(r?x=zi(x,tf):x=Math.round(x));let R=Math.max(0,T+h);a==="height"&&(r?R=zi(R,tf):R=Math.round(R)),x=Math.max(ss,x),R=Math.max(ss,R),Yk(x,R,T,C,I(v,w),a,E,y,n,o)}else{const[E]=U,y=E==null?void 0:E.latest,v=E==null?void 0:E.original;if(y&&v&&ul(y,a)){let w=Math.max(0,v.width+f);a==="width"&&(r?w=zi(w,tf):w=Math.round(w));let S=Math.max(0,v.height+h);if(a==="height"&&(r?S=zi(S,tf):S=Math.round(S)),w=Math.max(ss,w),S=Math.max(ss,S),J0(w,S,y,v,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),Ee(y)){const M=zo(o.getElementsIncludingDeleted(),y,i,o.getNonDeletedElementsMap());m.push(...M)}}}}l({elementsToHighlight:m}),o.triggerUpdate()},Z7e=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n==null?void 0:n[0],o=s&&r.get(s.id);if(o&&Ee(o)){const a=zo(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=dg(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},jk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=L.useMemo(()=>i.map(c=>{const u=_6(c,n);if(u.length>1){const[f,h,m,p]=mt(u.map(U=>U.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(bl,{label:e==="width"?"W":"H",elements:t,dragInputCallback:K7e,value:a,editable:l,appState:s,property:e,scene:r,dragFinishedCallback:Z7e})},Wk=4,q7e=4,Q7e=(e,t)=>e.reduce((n,i)=>{if(!i||Ch(i))return n;if(ue(i))return n.push(i),n;if(sr(i)){const r=ke(i,t);if(r)return n.push(r),n}return n},[]),J7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),Wk);for(const l of o)r.mutateElement(l,{fontSize:a}),Yi(l,r.getContainerElement(l),r);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,Wk);n&&(m=zi(m,q7e)),r.mutateElement(u,{fontSize:m}),Yi(u,r.getContainerElement(u),r)}r.triggerUpdate()}},e4e=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=Q7e(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(bl,{label:"F",icon:P5,elements:s,dragInputCallback:J7e,value:a,editable:l,scene:t,property:i,appState:n})},t4e=(e,t,n,i,r,s)=>{for(let o=0;o<i.length;o++){const a=i[o],[l,c]=[a.x+a.width/2,a.y+a.height/2],[u,d]=q(I(a.x,a.y),I(l,c),a.angle),f=e==="x"?Math.round(u+t):u,h=e==="y"?Math.round(d+n):d;wm(f,h,a,s,r,!1)}},n4e=(e,t,n,i,r)=>{const s=r.getNonDeletedElementsMap(),[o,a,,]=mt(n),l=e-o,c=t-a;for(let u=0;u<n.length;u++){const d=n[u],f=s.get(d.id);if(f&&(!ue(f)||!f.containerId)){const[h,m]=[f.x+f.width/2,f.y+f.height/2],[p,U]=q(I(f.x,f.y),I(h,m),f.angle);wm(p+l,U+c,d,r,i,!1)}}},i4e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{var f,h;const l=o.getNonDeletedElementsMap();if(r!==void 0){for(const m of X_(t,a)){const p=_6(m,l,n);if(p.length>1){const[U,E,,]=mt(p.map(w=>w.latest));n4e(s==="x"?r:U,s==="y"?r:E,p.map(w=>w.original),n,o)}else{const U=(f=p[0])==null?void 0:f.original,E=(h=p[0])==null?void 0:h.latest;if(U&&E&&ul(E,s)){const[y,v]=[U.x+U.width/2,U.y+U.height/2],[w,S]=q(I(U.x,U.y),I(y,v),U.angle);wm(s==="x"?r:w,s==="y"?r:S,U,o,n,!1)}}}o.triggerUpdate();return}const c=i?zi(e,K4):e;t4e(s,s==="x"?c:0,s==="y"?c:0,t,n,o),o.triggerUpdate()},Kk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=L.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,U]=mt(c);return Math.round((e==="x"?p:U)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(I(u.x,u.y),I(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(bl,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:i4e,value:a,property:e,scene:r,appState:s})},r4e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=n[0],[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(I(u.x,u.y),I(d,f),u.angle);if(l.croppingElementId===u.id){const v=c.get(u.id);if(!v||!wt(v)||!v.crop)return;const w=v.crop;let S=w;const M=v.scale[0]===-1,_=v.scale[1]===-1,{width:T,height:C}=il(v);if(s!==void 0){if(o==="x"){const P=s*(w.naturalWidth/T);M?S={...w,x:Ge(w.naturalWidth-P-w.width,0,w.naturalWidth-w.width)}:S={...w,x:Ge(s*(w.naturalWidth/T),0,w.naturalWidth-w.width)}}o==="y"&&(S={...w,y:Ge(s*(w.naturalHeight/C),0,w.naturalHeight-w.height)}),a.mutateElement(v,{crop:S});return}const x=(o==="x"?t:0)*(M?-1:1),R=(o==="y"?t:0)*(_?-1:1);S={...w,x:Ge(w.x+x,0,w.naturalWidth-w.width),y:Ge(w.y+R,0,w.naturalHeight-w.height)},a.mutateElement(v,{crop:S});return}if(s!==void 0){wm(o==="x"?s:h,o==="y"?s:m,u,a,i);return}const p=o==="x"?e:0,U=o==="y"?e:0,E=o==="x"?Math.round(r?zi(u.x+p,K4):h+p):h,y=o==="y"?Math.round(r?zi(u.y+U,K4):m+U):m;wm(E,y,u,a,i)},Zk=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=q(I(t.x,t.y),I(t.x+t.width/2,t.y+t.height/2),t.angle);let a=$a(e==="x"?s:o,2);if(r.croppingElementId===t.id&&wt(t)&&t.crop){const l=woe(t);l&&(a=$a(e==="x"?l.x:l.y,2))}return g(bl,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:r4e,scene:i,value:a,property:e,appState:r})},s4e=50,Ta=e=>{const t=bp(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=ym(e.app);return g(o4e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},Ht=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:me("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});Ht.displayName="StatsRow";const T6=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});T6.displayName="StatsRows";Ta.StatsRow=Ht;Ta.StatsRows=T6;const o4e=L.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=An(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&wt(d),m=h?il(d):null,[p,U]=L.useState({width:0,height:0}),E=L.useMemo(()=>Do(w=>{const S=mt(w);U({width:Math.round(S[2])-Math.round(S[0]),height:Math.round(S[3])-Math.round(S[1])})},s4e),[]);L.useEffect(()=>{E(l)},[s,l,E]),L.useEffect(()=>()=>E.cancel(),[E]);const y=L.useMemo(()=>X_(i,r),[i,r]),v=L.useMemo(()=>LB(i),[i]);return g("div",{className:"exc-stats",children:O(eo,{padding:3,children:[O("div",{className:"title",children:[g("h2",{children:k("stats.title")}),g("div",{className:"close",onClick:t,children:gg})]}),O(C4,{label:g("h3",{children:k("stats.generalStats")}),open:!!(r.stats.panels&Af.generalStats),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Af.generalStats}})),children:[O(T6,{children:[g(Ht,{heading:!0,children:k("stats.scene")}),O(Ht,{columns:2,children:[g("div",{children:k("stats.shapes")}),g("div",{children:l.length})]}),O(Ht,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:p.width})]}),O(Ht,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:p.height})]}),o&&O(he,{children:[g(Ht,{heading:!0,children:"Canvas"}),g(Ht,{children:g(P7e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n==null?void 0:n(l,r)]}),!v&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(C4,{label:g("h3",{children:k("stats.elementProperties")}),open:!!(r.stats.panels&Af.elementProperties),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Af.elementProperties}})),children:O(T6,{children:[d&&O(he,{children:[h&&g(Ht,{heading:!0,children:k("labels.unCroppedDimension")}),r.croppingElementId&&wt(d)&&m&&O(Ht,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:$a(m.width,2)})]}),r.croppingElementId&&wt(d)&&m&&O(Ht,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:$a(m.height,2)})]}),g(Ht,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?k("labels.imageCropping"):k(`element.${d.type}`)}),g(Ht,{children:g(Zk,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(Ht,{children:g(Zk,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(Ht,{children:g(Gk,{property:"width",element:d,scene:a,appState:r})}),g(Ht,{children:g(Gk,{property:"height",element:d,scene:a,appState:r})}),!de(d)&&g(Ht,{children:g(O7e,{property:"angle",element:d,scene:a,appState:r})}),g(Ht,{children:g($7e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&O(he,{children:[g9(f)&&g(Ht,{heading:!0,children:k("element.group")}),O(Ht,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:k("stats.shapes")}),g("div",{children:i.length})]}),g(Ht,{children:g(Kk,{property:"x",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Ht,{children:g(Kk,{property:"y",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Ht,{children:g(jk,{property:"width",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Ht,{children:g(jk,{property:"height",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Ht,{children:g(Y7e,{property:"angle",elements:f,scene:a,appState:r})}),g(Ht,{children:g(e4e,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),a4e=({sourceElementId:e,onClose:t,appState:n,scene:i,generateLinkForSelection:r=ez})=>{var f;const s=i.getNonDeletedElementsMap(),o=((f=s.get(e))==null?void 0:f.link)??null,[a,l]=L.useState(o),[c,u]=L.useState(!1);L.useEffect(()=>{const h=Fe(s,n);let m=o;if(h.length>0&&r){const p=tz(h,n);p&&(m=Yr(r(p.id,p.type)))}l(m)},[s,n,n.selectedElementIds,o,r]);const d=L.useCallback(()=>{var h;if(a&&a!==((h=s.get(e))==null?void 0:h.link)){const m=s.get(e);m&&i.mutateElement(m,{link:a})}if(!a&&c&&e){const m=s.get(e);m&&i.mutateElement(m,{link:null})}t==null||t()},[e,a,s,c,i,t]);return L.useEffect(()=>{const h=m=>{var p,U;((p=n.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&m.key===H.ENTER&&d(),((U=n.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&m.key===H.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n,t,d]),O("div",{className:"ElementLinkDialog",children:[O("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:k("elementLink.title")}),g("p",{children:k("elementLink.desc")})]}),O("div",{className:"ElementLinkDialog__input",children:[g(Bh,{value:a??"",onChange:h=>{c||u(!0),l(h)},onKeyDown:h=>{h.key===H.ENTER&&d()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&a&&g(He,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:()=>{l(null),u(!0)},className:"ElementLinkDialog__remove",icon:ad})]}),O("div",{className:"ElementLinkDialog__actions",children:[g(Ph,{label:k("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g(Ph,{label:k("buttons.confirm"),onClick:d,actionType:"primary"})]})]})},Y_=({children:e,onClose:t})=>{const[n,i]=L.useState(!!e),{container:r}=aa(),s=oe.useCallback(()=>{i(!1),t&&t(),r==null||r.focus()},[t,r]);return g(he,{children:n&&g(qr,{size:"small",onCloseRequest:s,title:k("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},l4e=()=>O("div",{className:"HelpDialog__header",children:[O("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:GA}),k("helpDialog.documentation")]}),O("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:GA}),k("helpDialog.blog")]}),O("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:G9}),k("helpDialog.github")]}),O("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:BH}),"YouTube"]})]}),c4e=e=>O(he,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),e3=e=>O("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*u4e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const d4e=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),ge=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(f4e,{children:d4e(o)},o)));return O("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...u4e(i,n?k("helpDialog.or"):null)]})]})},f4e=e=>g("kbd",{className:"HelpDialog__key",...e}),h4e=({onClose:e})=>{const t=oe.useCallback(()=>{e&&e()},[e]);return g(he,{children:O(qr,{onCloseRequest:t,title:k("helpDialog.title"),className:"HelpDialog",children:[g(l4e,{}),O(c4e,{title:k("helpDialog.shortcuts"),children:[O(e3,{className:"HelpDialog__island--tools",caption:k("helpDialog.tools"),children:[g(ge,{label:k("toolBar.hand"),shortcuts:[H.H]}),g(ge,{label:k("toolBar.selection"),shortcuts:[H.V,H[1]]}),g(ge,{label:k("toolBar.rectangle"),shortcuts:[H.R,H[2]]}),g(ge,{label:k("toolBar.diamond"),shortcuts:[H.D,H[3]]}),g(ge,{label:k("toolBar.ellipse"),shortcuts:[H.O,H[4]]}),g(ge,{label:k("toolBar.arrow"),shortcuts:[H.A,H[5]]}),g(ge,{label:k("toolBar.line"),shortcuts:[H.L,H[6]]}),g(ge,{label:k("toolBar.freedraw"),shortcuts:[H.P,H[7]]}),g(ge,{label:k("toolBar.text"),shortcuts:[H.T,H[8]]}),g(ge,{label:k("toolBar.image"),shortcuts:[H[9]]}),g(ge,{label:k("toolBar.eraser"),shortcuts:[H.E,H[0]]}),g(ge,{label:k("toolBar.frame"),shortcuts:[H.F]}),g(ge,{label:k("toolBar.laser"),shortcuts:[H.K]}),g(ge,{label:k("labels.eyeDropper"),shortcuts:[H.I,"Shift+S","Shift+G"]}),g(ge,{label:k("helpDialog.editLineArrowPoints"),shortcuts:[Q("CtrlOrCmd+Enter")]}),g(ge,{label:k("helpDialog.editText"),shortcuts:[Q("Enter")]}),g(ge,{label:k("helpDialog.textNewLine"),shortcuts:[Q("Enter"),Q("Shift+Enter")]}),g(ge,{label:k("helpDialog.textFinish"),shortcuts:[Q("Esc"),Q("CtrlOrCmd+Enter")]}),g(ge,{label:k("helpDialog.curvedArrow"),shortcuts:["A",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(ge,{label:k("helpDialog.curvedLine"),shortcuts:["L",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(ge,{label:k("helpDialog.cropStart"),shortcuts:[k("helpDialog.doubleClick"),Q("Enter")],isOr:!0}),g(ge,{label:k("helpDialog.cropFinish"),shortcuts:[Q("Enter"),Q("Escape")],isOr:!0}),g(ge,{label:k("toolBar.lock"),shortcuts:[H.Q]}),g(ge,{label:k("helpDialog.preventBinding"),shortcuts:[Q("CtrlOrCmd")]}),g(ge,{label:k("toolBar.link"),shortcuts:[Q("CtrlOrCmd+K")]}),g(ge,{label:k("toolBar.convertElementType"),shortcuts:["Tab","Shift+Tab"],isOr:!0})]}),O(e3,{className:"HelpDialog__island--view",caption:k("helpDialog.view"),children:[g(ge,{label:k("buttons.zoomIn"),shortcuts:[Q("CtrlOrCmd++")]}),g(ge,{label:k("buttons.zoomOut"),shortcuts:[Q("CtrlOrCmd+-")]}),g(ge,{label:k("buttons.resetZoom"),shortcuts:[Q("CtrlOrCmd+0")]}),g(ge,{label:k("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(ge,{label:k("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(ge,{label:k("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(ge,{label:k("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(ge,{label:k("buttons.zenMode"),shortcuts:[Q("Alt+Z")]}),g(ge,{label:k("buttons.objectsSnapMode"),shortcuts:[Q("Alt+S")]}),g(ge,{label:k("labels.toggleGrid"),shortcuts:[Q("CtrlOrCmd+'")]}),g(ge,{label:k("labels.viewMode"),shortcuts:[Q("Alt+R")]}),g(ge,{label:k("labels.toggleTheme"),shortcuts:[Q("Alt+Shift+D")]}),g(ge,{label:k("stats.fullTitle"),shortcuts:[Q("Alt+/")]}),g(ge,{label:k("search.title"),shortcuts:[Xi("searchMenu")]}),g(ge,{label:k("commandPalette.title"),shortcuts:X0?[Xi("commandPalette")]:[Xi("commandPalette"),Xi("commandPalette",1)]})]}),O(e3,{className:"HelpDialog__island--editor",caption:k("helpDialog.editor"),children:[g(ge,{label:k("helpDialog.createFlowchart"),shortcuts:[Q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(ge,{label:k("helpDialog.navigateFlowchart"),shortcuts:[Q("Alt+Arrow Key")],isOr:!0}),g(ge,{label:k("labels.moveCanvas"),shortcuts:[Q(`Space+${k("helpDialog.drag")}`),Q(`Wheel+${k("helpDialog.drag")}`)],isOr:!0}),g(ge,{label:k("buttons.clearReset"),shortcuts:[Q("CtrlOrCmd+Delete")]}),g(ge,{label:k("labels.delete"),shortcuts:[Q("Delete")]}),g(ge,{label:k("labels.cut"),shortcuts:[Q("CtrlOrCmd+X")]}),g(ge,{label:k("labels.copy"),shortcuts:[Q("CtrlOrCmd+C")]}),g(ge,{label:k("labels.paste"),shortcuts:[Q("CtrlOrCmd+V")]}),g(ge,{label:k("labels.pasteAsPlaintext"),shortcuts:[Q("CtrlOrCmd+Shift+V")]}),g(ge,{label:k("labels.selectAll"),shortcuts:[Q("CtrlOrCmd+A")]}),g(ge,{label:k("labels.multiSelect"),shortcuts:[Q(`Shift+${k("helpDialog.click")}`)]}),g(ge,{label:k("helpDialog.deepSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.click")}`)]}),g(ge,{label:k("helpDialog.deepBoxSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.drag")}`)]}),(k_||X0)&&g(ge,{label:k("labels.copyAsPng"),shortcuts:[Q("Shift+Alt+C")]}),g(ge,{label:k("labels.copyStyles"),shortcuts:[Q("CtrlOrCmd+Alt+C")]}),g(ge,{label:k("labels.pasteStyles"),shortcuts:[Q("CtrlOrCmd+Alt+V")]}),g(ge,{label:k("labels.sendToBack"),shortcuts:[Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(ge,{label:k("labels.bringToFront"),shortcuts:[Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(ge,{label:k("labels.sendBackward"),shortcuts:[Q("CtrlOrCmd+[")]}),g(ge,{label:k("labels.bringForward"),shortcuts:[Q("CtrlOrCmd+]")]}),g(ge,{label:k("labels.alignTop"),shortcuts:[Q("CtrlOrCmd+Shift+Up")]}),g(ge,{label:k("labels.alignBottom"),shortcuts:[Q("CtrlOrCmd+Shift+Down")]}),g(ge,{label:k("labels.alignLeft"),shortcuts:[Q("CtrlOrCmd+Shift+Left")]}),g(ge,{label:k("labels.alignRight"),shortcuts:[Q("CtrlOrCmd+Shift+Right")]}),g(ge,{label:k("labels.duplicateSelection"),shortcuts:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)]}),g(ge,{label:k("helpDialog.toggleElementLock"),shortcuts:[Q("CtrlOrCmd+Shift+L")]}),g(ge,{label:k("buttons.undo"),shortcuts:[Q("CtrlOrCmd+Z")]}),g(ge,{label:k("buttons.redo"),shortcuts:aF?[Q("CtrlOrCmd+Y"),Q("CtrlOrCmd+Shift+Z")]:[Q("CtrlOrCmd+Shift+Z")]}),g(ge,{label:k("labels.group"),shortcuts:[Q("CtrlOrCmd+G")]}),g(ge,{label:k("labels.ungroup"),shortcuts:[Q("CtrlOrCmd+Shift+G")]}),g(ge,{label:k("labels.flipHorizontal"),shortcuts:[Q("Shift+H")]}),g(ge,{label:k("labels.flipVertical"),shortcuts:[Q("Shift+V")]}),g(ge,{label:k("labels.showStroke"),shortcuts:[Q("S")]}),g(ge,{label:k("labels.showBackground"),shortcuts:[Q("G")]}),g(ge,{label:k("labels.showFonts"),shortcuts:[Q("Shift+F")]}),g(ge,{label:k("labels.decreaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+<")]}),g(ge,{label:k("labels.increaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+>")]})]})]})]})})},g4e=2e3,j_=()=>{const[e,t]=L.useState(null),n=L.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},g4e)},r=L.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},OU=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:me("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),m4e="filter"in document.createElement("canvas").getContext("2d"),p4e=()=>O("div",{children:[g("h3",{children:k("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:k("canvasError.canvasTooBig")})}),O("em",{children:["(",k("canvasError.canvasTooBigTip"),")"]})]}),U4e=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=$n(t,e),[a,l]=L.useState(s),[c,u]=L.useState(o),[d,f]=L.useState(e.exportBackground),[h,m]=L.useState(e.exportWithDarkMode),[p,U]=L.useState(e.exportEmbedScene),[E,y]=L.useState(e.exportScale),v=L.useRef(null),[w,S]=L.useState(null),{onCopy:M,copyStatus:_,resetCopyStatus:T}=j_();L.useEffect(()=>{T()},[a,d,h,E,p,T]);const{exportedElements:C,exportingFrame:x}=ly(t,e,c);return L.useEffect(()=>{const R=v.current;if(!R)return;const P=R.offsetWidth,D=R.offsetHeight;P&&hy({elements:C,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:E,exportEmbedScene:p},files:n,exportPadding:sg,maxWidthOrHeight:Math.max(P,D),exportingFrame:x}).then($=>(S(null),gm($).then(()=>{R.replaceChildren($)}).catch(z=>{throw z.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):z}))).catch($=>{console.error($),S($)})},[e,n,C,x,a,d,h,E,p]),O("div",{className:"ImageExportModal",children:[g("h3",{children:k("imageExportDialog.header")}),O("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:v,children:w&&g(p4e,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!Ld&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:R=>{l(R.target.value),i.executeAction(I5e,"ui",R.target.value)}})})]}),O("div",{className:"ImageExportModal__settings",children:[g("h3",{children:k("imageExportDialog.header")}),o&&g(a1,{label:k("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(OU,{name:"exportOnlySelected",checked:c,onChange:R=>{u(R)}})}),g(a1,{label:k("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(OU,{name:"exportBackgroundSwitch",checked:d,onChange:R=>{f(R),i.executeAction(C5e,"ui",R)}})}),m4e&&g(a1,{label:k("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(OU,{name:"exportDarkModeSwitch",checked:h,onChange:R=>{m(R),i.executeAction(A5e,"ui",R)}})}),g(a1,{label:k("imageExportDialog.label.embedScene"),tooltip:k("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(OU,{name:"exportEmbedSwitch",checked:p,onChange:R=>{U(R),i.executeAction(xG,"ui",R)}})}),g(a1,{label:k("imageExportDialog.label.scale"),name:"exportScale",children:g(uY,{name:"exportScale",value:E,onChange:R=>{y(R),i.executeAction(x5e,"ui",R)},choices:zw.map(R=>({value:R,label:`${R}×`}))})}),O("div",{className:"ImageExportModal__settings__buttons",children:[g(io,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToPng"),onClick:()=>r(H8.png,C,{exportingFrame:x}),icon:sM,children:k("imageExportDialog.button.exportToPng")}),g(io,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToSvg"),onClick:()=>r(H8.svg,C,{exportingFrame:x}),icon:sM,children:k("imageExportDialog.button.exportToSvg")}),(k_||X0)&&g(io,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.copyPngToClipboard"),status:_,onClick:async()=>{await r(H8.clipboard,C,{exportingFrame:x}),M()},icon:up,children:k("imageExportDialog.button.copyPngToClipboard")})]})]})]})},a1=({label:e,children:t,tooltip:n,name:i})=>O("div",{className:"ImageExportModal__settings__setting",title:e,children:[O("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(dd,{label:n,long:!0,children:Ede})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),b4e=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=L.useState(()=>({appStateSnapshot:Xa(t),elementsSnapshot:Xa(e)}));return g(qr,{onCloseRequest:s,size:"wide",title:!1,children:g(U4e,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},Z4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":fi[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":fi[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":fi[t][9]},children:e}),y4e=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:O("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&O(Z4,{color:"lime",children:[g("div",{className:"Card-icon",children:Cue}),g("h2",{children:k("exportDialog.disk_title")}),O("div",{className:"Card-details",children:[k("exportDialog.disk_details"),!Ld&&r.renderAction("changeProjectName")]}),g(He,{className:"Card-button",type:"button",title:k("exportDialog.disk_button"),"aria-label":k("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(CG,"ui")}})]}),l&&O(Z4,{color:"pink",children:[g("div",{className:"Card-icon",children:e6}),g("h2",{children:k("exportDialog.link_title")}),g("div",{className:"Card-details",children:k("exportDialog.link_details")}),g(He,{className:"Card-button",type:"button",title:k("exportDialog.link_button"),"aria-label":k("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{st("export","link",`ui (${Qm()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},E4e=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{var l;const a=oe.useCallback(()=>{o({openDialog:null})},[o]);return g(he,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g(qr,{onCloseRequest:a,title:k("buttons.export"),children:g(y4e,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},v4e="small",w4e=e=>O("label",{className:me("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${v4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:U4})]}),_4e=({UIOptions:e})=>O(jt,{__fallback:!0,children:[g(jt.DefaultItems.LoadScene,{}),g(jt.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(jt.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(jt.DefaultItems.SaveAsImage,{}),g(jt.DefaultItems.SearchMenu,{}),g(jt.DefaultItems.Help,{}),g(jt.DefaultItems.ClearCanvas,{}),g(jt.Separator,{}),g(jt.Group,{title:"Excalidraw links",children:g(jt.DefaultItems.Socials,{})}),g(jt.Separator,{}),g(jt.DefaultItems.ToggleTheme,{}),g(jt.DefaultItems.ChangeCanvasBackground,{})]}),T4e=()=>O(Au,{__fallback:!0,children:[g(Au.Actions.SaveToDisk,{}),g(Au.Actions.ExportToImage,{})]}),S4e=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:U,isCollaborating:E,generateLinkForSelection:y})=>{var V,G,Y;const v=ii(),w=nEe(),S=w.tunnelsJotai.Provider,[M,_]=fn(Y5),T=()=>f.canvasActions.export?g(E4e,{elements:r,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:s,setAppState:i}):null,C=()=>{var X;return!f.canvasActions.saveAsImage||((X=t.openDialog)==null?void 0:X.name)!=="imageExport"?null:g(b4e,{elements:r,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:U.getName()})},x=()=>O("div",{style:{position:"relative"},children:[g(w.MainMenuTunnel.Out,{}),m&&g(w.WelcomeScreenMenuHintTunnel.Out,{})]}),R=()=>g(vm,{heading:"selectedShapeActions",className:me("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(eo,{className:Ac.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(hX,{appState:t,elementsMap:U.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:U})})}),P=()=>{var Ue,re,be,Ye,je;const X=N9(t,r),Z=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((Ue=t.openDialog)==null?void 0:Ue.name)!=="elementLinkSelector";return g(CX,{side:"top",children:O("div",{className:"App-menu App-menu_top",children:[O(bs.Col,{gap:6,className:me("App-menu_top__left"),children:[x(),X&&R()]}),!t.viewModeEnabled&&((re=t.openDialog)==null?void 0:re.name)!=="elementLinkSelector"&&g(vm,{heading:"shapes",className:"shapes-section",children:St=>O("div",{style:{position:"relative"},children:[m&&g(w.WelcomeScreenToolbarHintTunnel.Out,{}),g(bs.Col,{gap:4,align:"start",children:O(bs.Row,{gap:1,className:me("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[O(eo,{padding:1,className:me("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(MX,{appState:t,isMobile:v.editor.isMobile,device:v,app:U}),St,O(bs.Row,{gap:1,children:[g(RX,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:k("toolBar.penMode"),penDetected:t.penDetected}),g(xX,{checked:t.activeTool.locked,onChange:o,title:k("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(AX,{checked:Nh(t),onChange:()=>a(),title:k("toolBar.hand"),isMobile:!0}),g(gX,{appState:t,activeTool:t.activeTool,UIOptions:f,app:U})]})]}),E&&g(eo,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(w4e,{title:k("toolBar.laser"),checked:t.activeTool.type===Wn.laser,onChange:()=>U.setActiveTool({type:Wn.laser}),isMobile:!0})})]})})]})}),O("div",{className:me("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(kX,{collaborators:t.collaborators,userToFollow:((be=t.userToFollow)==null?void 0:be.socketId)||null}),u==null?void 0:u(v.editor.isMobile,t),!t.viewModeEnabled&&((Ye=t.openDialog)==null?void 0:Ye.name)!=="elementLinkSelector"&&(!$||((je=t.openSidebar)==null?void 0:je.name)!==ws.name)&&g(w.DefaultSidebarTriggerTunnel.Out,{}),Z&&g(Ta,{app:U,onClose:()=>{e.executeAction(N4)},renderCustomStats:d})]})]})})},D=()=>g(zk,{__fallback:!0,onDock:X=>{st("sidebar",`toggleDock (${X?"dock":"undock"})`,`(${v.editor.isMobile?"mobile":"desktop"})`)}}),$=Mz(V_),z=O(he,{children:[p,g(_4e,{UIOptions:f}),g(zk.Trigger,{__fallback:!0,icon:z9,title:a0(k("toolBar.library")),onToggle:X=>{X&&st("sidebar",`${ws.name} (open)`,`button (${v.editor.isMobile?"mobile":"desktop"})`)},tab:ws.defaultTab,children:k("toolBar.library")}),g(T4e,{}),((V=t.openDialog)==null?void 0:V.name)==="ttd"&&g(NY,{__fallback:!0}),t.isLoading&&g(IX,{delay:250}),t.errorMessage&&g(Y_,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),M&&!v.editor.isMobile&&g(Pge,{colorPickerType:M.colorPickerType,onCancel:()=>{_(null)},onChange:(X,Z,Ue,{altKey:re})=>{if(!(X!=="elementBackground"&&X!=="elementStroke"))if(Ue.length){for(const be of Ue)mi(be,we(r),{[re&&M.swapPreviewOnAlt?X==="elementBackground"?"strokeColor":"backgroundColor":X==="elementBackground"?"backgroundColor":"strokeColor"]:Z}),$t.delete(be);U.scene.triggerUpdate()}else i(X==="elementBackground"?{currentItemBackgroundColor:Z}:{currentItemStrokeColor:Z})},onSelect:(X,Z)=>{var Ue;_(re=>re!=null&&re.keepOpenOnAlt&&Z.altKey?re:null),(Ue=M==null?void 0:M.onSelect)==null||Ue.call(M,X,Z)}}),((G=t.openDialog)==null?void 0:G.name)==="help"&&g(h4e,{onClose:()=>{i({openDialog:null})}}),g(aEe,{}),((Y=t.openDialog)==null?void 0:Y.name)==="elementLinkSelector"&&g(a4e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},scene:U.scene,appState:t,generateLinkForSelection:y}),g(w.OverwriteConfirmDialogTunnel.Out,{}),C(),T(),t.pasteDialog.shown&&g(I3e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.editor.isMobile&&g(S3e,{app:U,appState:t,elements:r,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:C,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:D,device:v,renderWelcomeScreen:m,UIOptions:f}),!v.editor.isMobile&&O(he,{children:[O("div",{className:"layer-ui__wrapper",style:t.openSidebar&&$&&v.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(w.WelcomeScreenCenterTunnel.Out,{}),P(),g(LX,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(X=>({...tm(r,X)}))},children:k("buttons.scrollBackToContent")})]}),D()]})]});return g(XV.Provider,{value:t,children:g(S,{children:g(uX.Provider,{value:w,children:z})})})},qk=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},I4e=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return Gi(qk(i),qk(o),{selectedElementIds:Gi,selectedGroupIds:Gi})&&Gi(r,a)},x4e=oe.memo(S4e,I4e),C4e="small",t3=e=>O("label",{className:me("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${C4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),A4e=({trails:e})=>{const t=L.useRef(null);return L.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},M4e=e=>{const t=L.useRef(!1);return L.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,i=new Map,r=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))r.has(d)||r.set(d,[]),r.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&s.set(u,c.username),c.userState&&o.set(u,c.userState),i.set(u,Hr({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";qEe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:r,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:e.renderScrollbars},device:e.device,callback:e.renderInteractiveSceneCallback},B_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?Tt.GRAB:Tt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:k("labels.drawingCanvas")})},Qk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches,activeLockedId:e.activeLockedId}),R4e=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements||e.renderScrollbars!==t.renderScrollbars?!1:Gi(Qk(e.appState),Qk(t.appState)),k4e=oe.memo(M4e,R4e),L4e=e=>{const t=L.useRef(null),n=L.useRef(!1);return L.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static"));const s=`${e.appState.width}px`,o=`${e.appState.height}px`;r.style.width!==s&&(r.style.width=s),r.style.height!==o&&(r.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;r.width!==a&&(r.width=a),r.height!==l&&(r.height=l),uG({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},B_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},Jk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),D4e=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Gi(Jk(e.appState),Jk(t.appState))&&Gi(e.renderConfig,t.renderConfig),N4e=oe.memo(L4e,D4e),OY=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{if(e){const[l,c]=ry(e,s),u=sy({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?fu(n,i,r,t,u,a,o):u.clearRect(0,0,l,c)}},O4e=og(e=>{OY(e)},{trailing:!0}),P4e=(e,t)=>{if(t){O4e(e);return}OY(e)},F4e=e=>{const t=L.useRef(null);return L.useEffect(()=>{t.current&&P4e({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},B_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},B4e=5e3,z4e=({message:e,onClose:t,closable:n=!1,duration:i=B4e,style:r})=>{const s=L.useRef(0),o=i!==1/0,a=L.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return L.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),O("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(He,{icon:gg,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},H4e=({app:e,activeLockedId:t})=>{const n=e.scene.getElement(t),i=n?[n]:At(e.scene.getNonDeletedElementsMap(),t);if(i.length===0)return null;const[r,s]=mt(i),{x:o,y:a}=Hr({sceneX:r,sceneY:s},e.state);return g("div",{className:"UnlockPopup",style:{bottom:`${e.state.height+12-a+e.state.offsetTop}px`,left:`${o-e.state.offsetLeft}px`},onClick:()=>{_n.flushSync(()=>{const l=ap(i,e.state);e.setState({selectedElementIds:i.reduce((c,u)=>({...c,[u.id]:!0}),{}),selectedGroupIds:l,activeLockedId:null})}),e.actionManager.executeAction(PG)},title:k("labels.elementLock.unlock"),children:fue})},PY=oe.createContext(null),FY=oe.createContext(null),BY={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},W_=oe.createContext(BY);W_.displayName="DeviceContext";const K_=oe.createContext({container:null,id:null});K_.displayName="ExcalidrawContainerContext";const Z_=oe.createContext([]);Z_.displayName="ExcalidrawElementsContext";const q_=oe.createContext({...ea(),width:0,height:0,offsetLeft:0,offsetTop:0});q_.displayName="ExcalidrawAppStateContext";const Q_=oe.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});Q_.displayName="ExcalidrawSetAppStateContext";const J_=oe.createContext(null);J_.displayName="ExcalidrawActionManagerContext";const ho=()=>L.useContext(PY),Up=()=>L.useContext(FY),ii=()=>L.useContext(W_),aa=()=>L.useContext(K_),by=()=>L.useContext(Z_),bp=()=>L.useContext(q_),An=()=>L.useContext(Q_),Sr=()=>L.useContext(J_);let l1=!1,n3=0,ou=!1,c1=!1,i3=!1,u1={horizontal:null,vertical:null},Al=0,d1=!1;const r3=new Map;let PU=!1,eL=0,tL=!1,au=null;const ft={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class eT extends oe.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"device",BY);F(this,"excalidrawContainerRef",oe.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new bce);F(this,"flowChartNavigator",new Uce);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new wEe);F(this,"laserTrails",new o3e(this.animationFrameHandler,this));F(this,"eraserTrail",new U3e(this.animationFrameHandler,this));F(this,"lassoTrail",new p3e(this.animationFrameHandler,this));F(this,"onChangeEmitter",new $s);F(this,"onPointerDownEmitter",new $s);F(this,"onPointerUpEmitter",new $s);F(this,"onUserFollowEmitter",new $s);F(this,"onScrollChangeEmitter",new $s);F(this,"missingPointerEventCleanupEmitter",new $s);F(this,"onRemoveEventListenersEmitter",new $s);F(this,"updateEditorAtom",(n,...i)=>{const r=Pr.set(n,...i);return this.triggerRender(),r});F(this,"getEffectiveGridSize",()=>ym(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),$t.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(r=>{if(fr(r)){if(n.add(r.id),!this.embedsValidationStatus.has(r.id)){i=!0;const s=p2(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,s)}}else Bl(r)&&n.add(r.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((r,s)=>{n.has(s)||this.iFrameRefs.delete(s)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const r=document.getElementById(this.getFrameNameDOMId(n));if(r){const s=r.getBoundingClientRect(),o=xt({clientX:s.x,clientY:s.y},this.state),a=xt({clientX:s.right,clientY:s.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&this.scene.mutateElement(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{var s;if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===Ce.DARK,i=this.scene.getNonDeletedFramesLikes(),r=i.length>0&&(s=this.state.searchMatches)!=null&&s.focusedId&&Ee(this.scene.getElement(this.state.searchMatches.focusedId))?this.state.searchMatches.matches.find(o=>o.focus):null;return i.map(o=>{if(!Kb(o,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===o.id&&this.resetEditingFrame(o),null;const{x:a,y:l}=Hr({sceneX:o.x,sceneY:o.y},this.state),c=6;let u;const d=kB(o);if(o.id===this.state.editingFrame){const f=d;u=g("input",{autoFocus:!0,value:f,onChange:h=>{this.scene.mutateElement(o,{name:h.target.value})},onFocus:h=>h.target.select(),onBlur:()=>this.resetEditingFrame(o),onKeyDown:h=>{(h.key===H.ESCAPE||h.key===H.ENTER)&&this.resetEditingFrame(o)},style:{background:this.state.viewBackgroundColor,filter:n?Bw:"none",zIndex:2,border:"none",display:"block",padding:`${c}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:`${Dt.nameFontSize}px`,transform:`translate(-${c}px, ${c}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-a-c}px`},size:f.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else u=d;return g("div",{id:this.getFrameNameDOMId(o),style:{position:"absolute",bottom:`${this.state.height+Dt.nameOffsetY-l+this.state.offsetTop}px`,left:`${a-this.state.offsetLeft}px`,zIndex:2,fontSize:Dt.nameFontSize,color:n?Dt.nameColorDarkTheme:Dt.nameColorLightTheme,lineHeight:Dt.nameLineHeight,width:"max-content",maxWidth:(r==null?void 0:r.id)===o.id&&(r!=null&&r.focus)?"none":`${o.width*this.state.zoom.value}px`,overflow:o.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Tt.MOVE,pointerEvents:this.state.viewModeEnabled?uu.disabled:uu.enabled},onPointerDown:f=>this.handleCanvasPointerDown(f),onWheel:f=>this.handleWheel(f),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:o.id})},children:u},o.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElementsMapIncludingDeleted",()=>this.scene.getElementsMapIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,r)=>{st("export",n,"ui");const s=await cy(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(kF).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&s&&C_(s)&&this.setState({fileHandle:s})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?this.scene.mutateElement(n,{customData:{generationData:void 0}},{informMutation:!1,isDragging:!1}):this.scene.mutateElement(n,{customData:{generationData:i}},{informMutation:!1,isDragging:!1}),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Wn.magicframe}),st("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&f2(n[0])&&n[0];if(!i&&n.some(s=>Ee(s)||s.frameId)){this.setActiveTool({type:Wn.magicframe});return}st("ai","tool-select (existing selection)","d2c");let r;if(i)r=i;else{const[s,o,a,l]=mt(n),c=50;r=J7({...Dt,x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(r);for(const u of n)this.scene.mutateElement(u,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}});F(this,"openEyeDropper",({type:n})=>{this.updateEditorAtom(Y5,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,r)=>{const s=n==="background"&&r.altKey||n==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?s?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:W.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:W.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Te(a,{[s?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:W.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});F(this,"syncActionResult",Jt(n=>{var s,o,a,l,c,u;if(this.unmounted||n===!1)return;this.store.scheduleAction(n.captureUpdate);let i=!1,r=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||r||this.state.contextMenu){let d=((s=n==null?void 0:n.appState)==null?void 0:s.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||Ce.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),r=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&r&&n.elements.forEach(U=>{(r==null?void 0:r.id)===U.id&&r!==U&&a4(U)&&ue(U)&&(r=U)}),r!=null&&r.isDeleted&&(r=null),this.setState(U=>{const E=n.appState||{};return{...U,...E,contextMenu:null,editingTextElement:r,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}i||this.scene.triggerUpdate()}));F(this,"onBlur",Jt(()=>{ou=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",Jt(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...ea(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var r;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async s=>{if(!s.files.length)return;const o=s.files[0],a=await o.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),o)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(s=>{console.error(s)})}catch(s){console.error(s),n={appState:{errorMessage:s.message||"Encountered an error during importing or restoring scene data"}}}const i=Ud(n,null,null,{repairBindings:!0});i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((r=i.appState)==null?void 0:r.openSidebar)||this.state.openSidebar,activeTool:i.appState.activeTool.type==="image"?{...i.appState.activeTool,type:"selection"}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...tm(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:W.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(s=>{this.fonts.onLoaded(s)}),Qf(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"isMobileBreakpoint",(n,i)=>n<Zie||i<Qie&&n<qie);F(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:i,clientHeight:r}=document.body,s=this.device.viewport,o=l2(s,{isLandscape:i>r,isMobile:this.isMobileBreakpoint(i,r)});return s!==o?(this.device={...this.device,viewport:o},!0):!1});F(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:r}=n.getBoundingClientRect(),s=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Jie,o=this.device.editor,a=l2(o,{isMobile:this.isMobileBreakpoint(i,r),canFitSidebar:i>s});return o!==a?(this.device={...this.device,editor:a},!0):!1});F(this,"onResize",Jt(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>$t.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),x7||this.refreshEditorBreakpoints(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:r})=>{i&&(u1=i);const s=this.state.editingTextElement?!1:!n&&r.size>0;this.state.scrolledOutside!==s&&this.setState({scrolledOutside:s}),this.scheduleImageRefresh()});F(this,"onScroll",el(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===i&&r.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},Wie));F(this,"onCut",Jt(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||pu(n.target)||(this.actionManager.executeAction(VR,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",Jt(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||pu(n.target)||(this.actionManager.executeAction(M2,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(lF&&n.preventDefault(),!l1){l1=!0,clearTimeout(n3),n3=window.setTimeout(eT.resetTapTwice,Gie);return}if(l1&&n.touches.length===1){const i=n.touches[0];this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY}),l1=!1,clearTimeout(n3)}n.touches.length===2&&this.setState({selectedElementIds:yt({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:yt(this.state.previousSelectedElementIds,this.state)}):ft.pointers.clear()});F(this,"pasteFromClipboard",Jt(async n=>{var d,f;const i=!!PU,r=document.activeElement,s=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(r);if(n&&!s)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||pu(r)))return;const{x:a,y:l}=xt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await IG(n,i);if(!c&&!i){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:i,sceneX:a,sceneY:l});if(u.text){const h=u.text.trim();h.startsWith("<svg")&&h.endsWith("</svg>")&&(c=OR(h))}}if(Gu(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}this.createImageElement({sceneX:a,sceneY:l,imageFile:c});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(h){console.error(h)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!i)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const h=u.programmaticAPI?V4(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:h,files:u.files||null,position:"cursor",retainSeed:i})}else if(u.text){if(u.text&&c3e(u.text)){const p=await pe(()=>import("./index-foVEfX0v.js").then(U=>U.b6),__vite__mapDeps([]),import.meta.url);try{const{elements:U,files:E}=await p.parseMermaidToExcalidraw(u.text),y=V4(U,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:y,files:E,position:"cursor"});return}catch(U){console.warn(`parsing pasted text as mermaid definition failed: ${U.message}`)}}const h=FF(u.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=h.map(p=>hce(p)).filter(p=>{var U;return p2(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||((U=Of(p))==null?void 0:U.type)==="video")});if(!PU&&m.length>0&&m.length===h.length){const p=[];for(const U of m){const E=p[p.length-1],y=this.insertEmbeddableElement({sceneX:E?E.x+E.width+20:a,sceneY:l,link:Yr(U)});y&&p.push(y)}p.length&&(this.store.scheduleCapture(),this.setState({selectedElementIds:Object.fromEntries(p.map(U=>[U.id,!0]))}));return}this.addTextFromPaste(u.text,i)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var T,C;const i=pd(n.elements,null,void 0),[r,s,o,a]=mt(i),l=Bi(r,o)/2,c=Bi(s,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=xt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[U,E]=Rn(m,p,this.getEffectiveGridSize()),{duplicatedElements:y}=Zb({type:"everything",elements:i.map(x=>Te(x,{x:x.x+U-r,y:x.y+E-s})),randomizeSeed:!n.retainSeed}),v=this.scene.getElementsIncludingDeleted();let w=[...v,...y];w=((C=(T=this.props).onDuplicate)==null?void 0:C.call(T,w,v))||w,so(w,we(y));const M=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(M){const x=cle(y,M);u0(w,x,M,this.state)}this.scene.replaceAllElements(w),y.forEach(x=>{if(ue(x)&&Bt(x)){const R=Vn(x,this.scene.getElementsMapIncludingDeleted());Yi(x,R,this.scene)}}),Rie&&Wa.loadElementsFonts(y).then(x=>{this.fonts.onLoaded(x)}),n.files&&this.addMissingFiles(n.files);const _=m9(y);this.store.scheduleCapture(),this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Pr.get(V_)?this.state.openSidebar:null,...Oi({editingGroupId:null,selectedElementIds:_.reduce((x,R)=>(Bt(R)||(x[R.id]=!0),x),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(y,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{Al&&this.resetContextMenuTimer(),ft.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||st("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...Wt(this.state,i.activeTool.locked?{type:"selection"}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const r=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(r==null?void 0:r.enabled)??i.frameRendering.enabled,clip:(r==null?void 0:r.clip)??i.frameRendering.clip,name:(r==null?void 0:r.name)??i.frameRendering.name,outline:(r==null?void 0:r.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(GUe)});F(this,"zoomCanvas",n=>{this.setState({...Su({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Fa(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(Qf(n)?c=Jle(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):Qf(n)&&this.setState({toast:{message:k("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const r=Array.isArray(n)?n:[n];let s=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=K5({canvasOffsets:i.canvasOffsets,targetElements:r,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});s=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=tm(r,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=Lre({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:s.value},interpolateValue:(h,m,p,U)=>{if(U==="zoom")return h*Math.pow(m/h,tl(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:s})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const r=await i.blob(),s=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(s,null),await n.delete("shared-file"),window.history.replaceState(null,Va,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",Jt(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const r=i?{}:{...this.files},s={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!r[a.id]&&(s[a.id]=a,r[a.id]=a,a.mimeType===ve.svg))try{const l=n5e(SA(i5e(a.dataURL)),ve.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=r,{addedFiles:s}});F(this,"updateScene",Jt(n=>{const{elements:i,appState:r,collaborators:s,captureUpdate:o}=n;if(o){const a=i||void 0,l=r?qf({...this.store.snapshot.appState,...r}):void 0;this.store.scheduleMicroAction({action:o,elements:a,appState:l})}r&&this.setState(r),i&&this.scene.replaceAllElements(i),s&&this.setState({collaborators:s})}));F(this,"mutateElement",(n,i,r=!0)=>this.scene.mutateElement(n,i,{informMutation:r,isDragging:!1}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:r})=>{var a,l;let s;r===void 0?s=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:s=r?n:null;const o=s?{name:s}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!s});F(this,"updateCurrentCursorPosition",Jt(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),r=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),s=16;return em().rtl?{top:n+s,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width),0)+s,bottom:s,left:Math.max((i==null?void 0:i.right)??0,0)+s}:{top:n+s,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+s,0),bottom:s,left:Math.max((r==null?void 0:r.right)??0,0)+s}});F(this,"onKeyDown",Jt(n=>{var o,a,l,c,u;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(d,f){const h=d[f];return typeof h=="function"?h.bind(d):f==="key"?n.shiftKey?d.key.toUpperCase():d.key.toLowerCase():h}})),!k7(n.target)){if((n.key===H.ESCAPE||n.key===H.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const d=Fe(this.scene.getNonDeletedElementsMap(),this.state);if(d.length===1&&wt(d[0])&&n.key===H.ENTER){this.startImageCropping(d[0]);return}if(n.key===H.ESCAPE)this.updateEditorAtom(_a,null);else if(n.key===H.TAB&&(document.activeElement===((o=this.excalidrawContainerRef)==null?void 0:o.current)||(a=document.activeElement)!=null&&a.classList.contains(Ac.CONVERT_ELEMENT_TYPE_POPUP))){n.preventDefault();const h=dy(d);((l=Pr.get(_a))==null?void 0:l.type)==="panel"&&BG(this,{conversionType:h,direction:n.shiftKey?"left":"right"})&&this.store.scheduleCapture(),h&&this.updateEditorAtom(_a,{type:"panel"})}if(n.key===H.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const f=_1(n.key);if(n[H.CTRL_OR_CMD]&&f&&!n.shiftKey){n.preventDefault();const h=Fe(this.scene.getNonDeletedElementsMap(),this.state);h.length===1&&w5(h[0])&&this.flowChartCreator.createNodes(h[0],this.state,TA(n.key),this.scene),(c=this.flowChartCreator.pendingNodes)!=null&&c.length&&!m2(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const h=Fe(this.scene.getNonDeletedElementsMap(),this.state);if(h.length===1&&f){n.preventDefault();const m=this.flowChartNavigator.exploreByDirection(h[0],this.scene.getNonDeletedElementsMap(),TA(n.key));if(m){this.setState(U=>({selectedElementIds:yt({[m]:!0},U)}));const p=this.scene.getNonDeletedElementsMap().get(m);p&&!m2([p],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(p,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[H.CTRL_OR_CMD]&&n.key===H.P&&!n.shiftKey&&!n.altKey){this.setToast({message:k("commandPalette.shortcutHint",{shortcut:Xi("commandPalette")})}),n.preventDefault();return}if(n[H.CTRL_OR_CMD]&&n.key.toLowerCase()===H.V&&(PU=n.shiftKey,clearTimeout(eL),eL=window.setTimeout(()=>{PU=!1},100)),n[H.CTRL_OR_CMD]&&pu(n.target)&&(n.code===Je.MINUS||n.code===Je.EQUAL)){n.preventDefault();return}if(pu(n.target)&&n.key!==H.ESCAPE||_1(n.key)&&k7(n.target))return;if(n.key===H.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===H.E&&n.shiftKey&&n[H.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===H.PAGE_UP||n.key===H.PAGE_DOWN){let d=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===H.PAGE_DOWN&&(d=-d),n.shiftKey?this.translateCanvas(f=>({scrollX:f.scrollX+d})):this.translateCanvas(f=>({scrollY:f.scrollY+d}))}if(((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[H.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),_1(n.key)){let d=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const f=d.find(de),h=new Set;d.filter(de).filter(E=>{const y=E.startBinding&&!d.some(w=>{var S;return w.id===((S=E.startBinding)==null?void 0:S.elementId)}),v=E.endBinding&&!d.some(w=>{var S;return w.id===((S=E.endBinding)==null?void 0:S.elementId)});return y||v}).forEach(E=>h.add(E.id)),d=d.filter(E=>!h.has(E.id));const m=this.getEffectiveGridSize()&&(n.shiftKey?aC:this.getEffectiveGridSize())||(n.shiftKey?Die:aC);let p=0,U=0;n.key===H.ARROW_LEFT?p=-m:n.key===H.ARROW_RIGHT?p=m:n.key===H.ARROW_UP?U=-m:n.key===H.ARROW_DOWN&&(U=m),d.forEach(E=>{this.scene.mutateElement(E,{x:E.x+p,y:E.y+U},{informMutation:!1,isDragging:!1}),br(E,this.scene,{simultaneouslyUpdated:d})}),this.setState({suggestedBindings:eE(d.filter(E=>E.id!==(f==null?void 0:f.id)||m!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===H.ENTER){const d=this.scene.getSelectedElements(this.state);if(d.length===1){const f=d[0];if(n[H.CTRL_OR_CMD]||ln(f))Ie(f)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==f.id)&&(this.store.scheduleCapture(),de(f)||this.setState({editingLinearElement:new ce(f,this.scene.getNonDeletedElementsMap())}));else if(ue(f)||qoe(f)){let h;ue(f)||(h=f);const m=Q8(f,this.state,this.scene.getNonDeletedElementsMap()),p=m.x,U=m.y;this.startTextEditing({sceneX:p,sceneY:U,container:h}),n.preventDefault();return}else Ee(f)&&this.setState({editingFrame:f.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const d=x8e(n.key);d?(this.state.activeTool.type!==d&&st("toolbar",d,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),d==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(f=>({currentItemArrowType:f.currentItemArrowType===oi.sharp?oi.round:f.currentItemArrowType===oi.round?oi.elbow:oi.sharp})),this.setActiveTool({type:d}),n.stopPropagation()):n.key===H.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===H.SPACE&&ft.pointers.size===0&&(ou=!0,It(this.interactiveCanvas,Tt.GRAB),n.preventDefault()),(n.key===H.G||n.key===H.S)&&!n.altKey&&!n[H.CTRL_OR_CMD]){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;n.key===H.G&&(Mh(this.state.activeTool.type)||d.some(f=>Mh(f.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===H.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[H.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===H.F){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;(this.state.activeTool.type==="text"||d.find(f=>ue(f)||ke(f,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===H.K&&!n.altKey&&!n[H.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[H.CTRL_OR_CMD]&&(n.key===H.BACKSPACE||n.key===H.DELETE)&&this.updateEditorAtom(my,"clearCanvas");const i=n.key.toLocaleLowerCase(),r=i===H.S&&n.shiftKey,s=n.key===H.I||i===H.G&&n.shiftKey;(r||s)&&this.openEyeDropper({type:r?"stroke":"background"})}));F(this,"onKeyUp",Jt(n=>{var i,r,s,o;if(n.key===H.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?It(this.interactiveCanvas,Tt.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?Eo(this.interactiveCanvas):(vo(this.interactiveCanvas,this.state),this.setState({selectedElementIds:yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),ou=!1),!n[H.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),_1(n.key)&&(Hb(this.scene.getSelectedElements(this.state).filter(Ie),Vu(this.state),((r=this.state.selectedLinearElement)==null?void 0:r.selectedPointsIndices)??[],this.scene,this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:W.IMMEDIATELY})),!n[H.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:yt({[a.id]:!0},l)})),m2([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:W.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",(n,i=!1)=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const r=Wt(this.state,n);r.type==="hand"?It(this.interactiveCanvas,Tt.GRAB):ou||vo(this.interactiveCanvas,{...this.state,activeTool:r}),Rre(document.activeElement)&&this.focusContainer(),n9(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageAction(),this.setState(s=>{const o={snapLines:s.snapLines.length?[]:s.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.scheduleCapture(),r.type==="lasso"?{...s,activeTool:r,...i?{}:{selectedElementIds:yt({},s),selectedGroupIds:yt({},s),editingGroupId:null,multiElement:null},...o}:r.type!=="selection"?{...s,activeTool:r,selectedElementIds:yt({},s),selectedGroupIds:yt({},s),editingGroupId:null,multiElement:null,...o}:{...s,activeTool:r,...o}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{It(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{Eo(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>ft.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${k("labels.untitled")}-${yC()}`);F(this,"onGestureStart",Jt(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:yt({},this.state),activeEmbeddable:null}),ft.initialScale=this.state.zoom.value}));F(this,"onGestureChange",Jt(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=ft.initialScale;i&&this.setState(r=>({...Su({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Fa(i*n.scale)},r)}))}));F(this,"onGestureEnd",Jt(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:yt(this.state.previousSelectedElementIds,this.state)}),ft.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:r=!0,container:s,autoEdit:o=!0})=>{let a=!1,l=r&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s);s&&l&&(ke(s,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?ue(u[0])?c=u[0]:s?c=ke(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Mc(d),h=this.state.currentItemFontSize;if(!c&&a&&s&&!xe(s)){const E=lB(dt({fontSize:h,fontFamily:d}),f),y=cB(h,f),v=Math.max(s.height,y),w=Math.max(s.width,E);this.scene.mutateElement(s,{height:v,width:w}),n=s.x+w/2,i=s.y+v/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||Kr({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?zr.MIDDLE:Ub,containerId:a?s==null?void 0:s.id:void 0,groupIds:(s==null?void 0:s.groupIds)??[],lineHeight:f,angle:s?xe(s)?0:s.angle:0,frameId:m?m.id:null});if(!c&&a&&s&&this.scene.mutateElement(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(s&&a){const U=this.scene.getElementIndex(s.id);this.scene.insertElementAtIndex(p,U+1)}else this.scene.insertElement(p);o||c||s?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.scheduleCapture(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.scheduleCapture(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{var a;if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const i=this.scene.getSelectedElements(this.state);let{x:r,y:s}=xt(n,this.state);if(i.length===1&&Ie(i[0])){const l=i[0];if((n[H.CTRL_OR_CMD]&&Toe(l)||ln(l))&&((a=this.state.editingLinearElement)==null?void 0:a.elementId)!==l.id){this.store.scheduleCapture(),this.setState({editingLinearElement:new ce(l,this.scene.getNonDeletedElementsMap())});return}else if(this.state.selectedLinearElement&&de(i[0])){const c=ce.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),u=c?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):-1;if(u&&u>-1){this.store.scheduleCapture(),ce.deleteFixedSegment(i[0],this.scene,u);const d=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),f=d?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,d,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:f,value:c,added:!1}},segmentMidPointHoveredCoords:d}});return}}else if(this.state.editingLinearElement&&this.state.editingLinearElement.elementId===l.id&&ln(l))return}if(i.length===1&&wt(i[0])){this.startImageCropping(i[0]);return}if(Eo(this.interactiveCanvas),$u(this.state).length>0){const l=this.getElementAtPosition(r,s),c=l&&Jae(l,this.state.selectedGroupIds);if(c){this.store.scheduleCapture(),this.setState(u=>({...u,...Oi({editingGroupId:c,selectedElementIds:{[l.id]:!0}},this.scene.getNonDeletedElements(),u,this)}));return}}if(Eo(this.interactiveCanvas),!n[H.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const l=this.getElementAtPosition(r,s);if(fs(l)){this.setState({activeEmbeddable:{element:l,state:"active"}});return}if(!this.state.editingLinearElement){const c=this.getTextBindableContainerAtPosition(r,s);if(c&&(sr(c)||!Us(c.backgroundColor)||cf({point:I(r,s),element:c,elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(c)}))){const u=Q8(c,this.state,this.scene.getNonDeletedElementsMap());r=u.x,s=u.y}this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:c})}}});F(this,"getElementLinkAtPosition",(n,i)=>{if(i&&i.locked)return;const r=this.scene.getNonDeletedElements();let s=-1;for(let o=r.length-1;o>=0;o--){const a=r[o];if(i&&a.id===i.id&&(s=o),a.link&&o>=s&&FE(a,this.scene.getNonDeletedElementsMap(),this.state,I(n.x,n.y),this.device.editor.isMobile))return a}});F(this,"redirectToLink",(n,i)=>{const r=gt(I(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),I(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||r>C7)return;const s=xt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=FE(this.hitLinkElement,o,this.state,I(s.x,s.y),this.device.editor.isMobile),l=xt(this.lastPointerUpEvent,this.state),c=FE(this.hitLinkElement,o,this.state,I(l.x,l.y),this.device.editor.isMobile);if(a&&c){WR();let u=this.hitLinkElement.link;if(u){u=Yr(u);let d;if(this.props.onLinkOpen&&(d=OF(ee.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=VF(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(s=>KC(n,s,i));return r.length?r[r.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var m,p,U,E,y,v;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,ft.pointers.has(n.pointerId)&&ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=ft.initialScale;if(ft.pointers.size===2&&ft.lastCenter&&i&&ft.initialDistance){const w=hk(ft.pointers),S=w.x-ft.lastCenter.x,M=w.y-ft.lastCenter.y;ft.lastCenter=w;const _=gk(Array.from(ft.pointers.values())),T=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:_/ft.initialDistance,C=T?Fa(i*T):this.state.zoom.value;this.setState(x=>{const R=Su({viewportX:w.x,viewportY:w.y,nextZoom:C},x);this.translateCanvas({zoom:R.zoom,scrollX:R.scrollX+2*(S/C),scrollY:R.scrollY+2*(M/C),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else ft.lastCenter=ft.initialDistance=ft.initialScale=null;if(ou||c1||i3||Nh(this.state))return;const s=_k(u1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(s?Eo(this.interactiveCanvas):vo(this.interactiveCanvas,this.state));const o=xt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&kEe(this.state.activeTool.type)){const{originOffset:w,snapLines:S}=REe(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(M=>{const _=Kg(M.snapLines,S),T=M.originSnapOffset?Kg(M.originSnapOffset,w):w;return M.snapLines===_&&M.originSnapOffset===T?null:{snapLines:_,originSnapOffset:T}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(w=>w.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const w=ce.handlePointerMove(n,a,l,this);w&&w!==this.state.editingLinearElement&&_n.flushSync(()=>{this.setState({editingLinearElement:w})}),(w==null?void 0:w.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(o,w.elbowed):_n.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(tB(this.state.activeTool.type)){const{newElement:w}=this.state;Oa(w,!1)?this.setState({suggestedBindings:H7(w,[o],this.scene,this.state.zoom,this.state.startBoundElement)}):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:w}=this.state,{x:S,y:M}=w,{points:_,lastCommittedPoint:T}=w,C=_[_.length-1];if(vo(this.interactiveCanvas,this.state),C===T)gt(I(a-S,l-M),C)>=o2?this.scene.mutateElement(w,{points:[..._,I(a-S,l-M)]},{informMutation:!1,isDragging:!1}):It(this.interactiveCanvas,Tt.POINTER);else if(_.length>2&&T&&gt(I(a-S,l-M),T)<o2)It(this.interactiveCanvas,Tt.POINTER),this.scene.mutateElement(w,{points:_.slice(0,-1)},{informMutation:!1,isDragging:!1});else{const[x,R]=Rn(a,l,n[H.CTRL_OR_CMD]||de(w)?null:this.getEffectiveGridSize()),[P,D]=(w==null?void 0:w.lastCommittedPoint)??[0,0];let $=x-S-P,z=R-M-D;r0(n)&&({width:$,height:z}=K7(P+S,D+M,x,R)),Wo(_,this.state.zoom.value)&&It(this.interactiveCanvas,Tt.POINTER),this.scene.mutateElement(w,{points:[..._.slice(0,-1),I(P+$,D+z)]},{isDragging:!0,informMutation:!1}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!s&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"&&!(d.length===1&&de(d[0]))){const w=CA(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(w&&w.transformHandleType){It(this.interactiveCanvas,MA(w));return}}}else if(d.length>1&&!s&&((p=this.state.openDialog)==null?void 0:p.name)!=="elementLinkSelector"){const w=AA(mt(d),a,l,this.state.zoom,n.pointerType,this.device);if(w){It(this.interactiveCanvas,MA({transformHandleType:w}));return}}const f=this.getElementAtPosition(a,l,{preferSelected:!0,includeLockedElements:!0});let h=null;f&&f.locked?h=null:h=f,this.hitLinkElement=this.getElementLinkAtPosition(o,f),!Io(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(It(this.interactiveCanvas,Tt.POINTER),q5e(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(WR(),h&&(h.link||fr(h))&&this.state.selectedElementIds[h.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?It(this.interactiveCanvas,ue(h)?Tt.TEXT:Tt.CROSSHAIR):this.state.viewModeEnabled?It(this.interactiveCanvas,Tt.GRAB):((U=this.state.openDialog)==null?void 0:U.name)==="elementLinkSelector"?It(this.interactiveCanvas,Tt.AUTO):s?It(this.interactiveCanvas,Tt.AUTO):this.state.selectedLinearElement&&(h==null?void 0:h.id)===this.state.selectedLinearElement.elementId?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[H.CTRL_OR_CMD]?It(this.interactiveCanvas,Tt.AUTO):(h||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(h!=null&&h.locked)&&(h&&fs(h)&&this.isIframeLikeElementCenter(h,n,a,l)?(It(this.interactiveCanvas,Tt.POINTER),this.setState({activeEmbeddable:{element:h,state:"hover"}})):(!h||!de(h)||!(h.startBinding||h.endBinding))&&(It(this.interactiveCanvas,Tt.MOVE),((E=this.state.activeEmbeddable)==null?void 0:E.state)==="hover"&&this.setState({activeEmbeddable:null})))),((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&h?this.setState(w=>({hoveredElementIds:Kg(w.hoveredElementIds,Oi({editingGroupId:w.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),w,this).selectedElementIds)})):((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"&&!h&&this.setState(w=>({hoveredElementIds:Kg(w.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i)=>{const r=this.eraserTrail.addPointToPath(i.x,i.y,n.altKey);this.elementsPendingErasure=new Set(r),this.triggerRender()});F(this,"handleTouchMove",n=>{d1=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches&&{focusedId:null,matches:m.searchMatches.matches.map(p=>({...p,focus:!1}))}})),this.updateEditorAtom(TY,null)),Pr.get(_a)&&this.updateEditorAtom(_a,null),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:yt(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,U)=>(p[U]=this.state.selectedElementIds[U],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?W.EVENTUALLY:W.NEVER});return}const r=document.getSelection();if(r!=null&&r.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=l2(this.device,{isTouchScreen:!0})),c1||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===Rl.ERASER&&this.state.activeTool.type!==Wn.eraser){this.setState({activeTool:Wt(this.state,{type:Wn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),U==null||U(),Io(this.state)&&this.setState({activeTool:Wt(this.state,{...this.state.activeTool.lastActiveTool||{type:Wn.selection},lastActiveToolBeforeEraser:null})})},p=Qt(window,ee.POINTER_UP,m,{once:!0});let U;requestAnimationFrame(()=>{U=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==Rl.MAIN&&n.button!==Rl.TOUCH&&n.button!==Rl.ERASER||ft.pointers.size>1)return;const s=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,s)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,s))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;this.state.activeTool.type==="lasso"?this.lassoTrail.startPath(s.origin.x,s.origin.y,n.shiftKey):this.state.activeTool.type==="text"?this.handleTextOnPointerDown(n,s):this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line"?this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="custom"?vo(this.interactiveCanvas,this.state):this.state.activeTool.type===Wn.frame||this.state.activeTool.type===Wn.magicframe?this.createFrameElementOnPointerDown(s,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(s.lastCoords.x,s.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.state.activeTool.type!=="image"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,s),(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,s),this.onPointerDownEmitter.trigger(this.state.activeTool,s,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(s.lastCoords.x,s.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(s),l=this.onPointerUpFromPointerDownHandler(s),c=this.onKeyDownFromPointerDownHandler(s),u=this.onKeyUpFromPointerDownHandler(s);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(ee.POINTER_MOVE,a),window.addEventListener(ee.POINTER_UP,l),window.addEventListener(ee.KEYDOWN,c),window.addEventListener(ee.KEYUP,u),s.eventListeners.onMove=a,s.eventListeners.onUp=l,s.eventListeners.onKeyUp=u,s.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var s;this.removePointer(n),this.lastPointerUpEvent=n;const i=xt({clientX:n.clientX,clientY:n.clientY},this.state),r=n.timeStamp-(((s=this.lastPointerDownEvent)==null?void 0:s.timeStamp)??0);if(this.device.editor.isMobile&&r<300){const o=this.getElementAtPosition(i.x,i.y);if(fs(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.device.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y,{includeLockedElements:!0});this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&fs(this.hitLinkElement)&&!aG(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,I(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(d1=!1,Al?d1=!0:Al=window.setTimeout(()=>{Al=0,d1||this.handleCanvasContextMenu(n)},Xie))});F(this,"resetContextMenuTimer",()=>{clearTimeout(Al),Al=0,d1=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{au==null||au(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(ft.pointers.size<=1&&(n.button===Rl.WHEEL||n.button===Rl.MAIN&&ou||Nh(this.state)||this.state.viewModeEnabled)))return!1;c1=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);It(this.interactiveCanvas,Tt.GRABBING);let{clientX:s,clientY:o}=n;const a=WE(c=>{const u=s-c.clientX,d=o-c.clientY;if(s=c.clientX,o=c.clientY,r&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(ee.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(ee.PASTE,f),window.removeEventListener(ee.POINTER_UP,h)},100)};document.body.addEventListener(ee.PASTE,f),window.addEventListener(ee.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=Jt(au=()=>{au=null,c1=!1,ou||(this.state.viewModeEnabled?It(this.interactiveCanvas,Tt.GRAB):vo(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,a),window.removeEventListener(ee.POINTER_UP,l),window.removeEventListener(ee.BLUR,l),a.flush()});return window.addEventListener(ee.BLUR,l),window.addEventListener(ee.POINTER_MOVE,a,{passive:!0}),window.addEventListener(ee.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var r;if(this.state.activeTool.type==="selection"){const s=this.scene.getNonDeletedElements(),o=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!de(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=CA(s,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType))}else a.length>1&&(i.resize.handleType=AA(mt(a),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.device));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=Ga(Ice(i.resize.handleType,a,o,i.origin.x,i.origin.y)),a.length===1&&Ie(a[0])&&a[0].points.length===2&&(i.resize.arrowDirection=xce(i.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const h=this.state.editingLinearElement||this.state.selectedLinearElement,m=ce.handlePointerDown(n,this,this.store,i.origin,h,this.scene);if(m.hitElement&&(i.hit.element=m.hitElement),m.linearElementEditor&&(this.setState({selectedLinearElement:m.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:m.linearElementEditor})),m.didAddPoint)return!0}const l=this.getElementsAtPosition(i.origin.x,i.origin.y,{includeLockedElements:!0}),c=l.filter(h=>!h.locked),u=this.getElementAtPosition(i.origin.x,i.origin.y,{allHitElements:l});if((!u||u.id!==this.state.activeLockedId)&&this.setState({activeLockedId:null}),u&&u.locked&&!c.some(h=>this.state.selectedElementIds[h.id])?i.hit.element=null:i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,u),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((r=i.hit.element)==null?void 0:r.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=c;const d=i.hit.element,f=i.hit.allHitElements.some(h=>this.isASelectedElement(h));if((d===null||!f)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(d),this.state.editingLinearElement)this.setState({selectedElementIds:yt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(d!=null){if(n[H.CTRL_OR_CMD])return n.altKey||(this.state.selectedElementIds[d.id]||(i.hit.wasAddedToSelection=!0),this.setState(h=>({...Qae(h,d),previousSelectedElementIds:this.state.selectedElementIds}))),!1;this.state.selectedElementIds[d.id]||(this.state.editingGroupId&&!Z0(d,this.state.editingGroupId)&&this.setState({selectedElementIds:yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!f&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(h=>{var U;let m={...h.selectedElementIds,[d.id]:!0};const p=[];if(Object.keys(h.selectedElementIds).forEach(E=>{const y=this.scene.getElement(E);y&&p.push(y)}),Ee(d))Rs(p,d.id).forEach(E=>{delete m[E.id]});else if(d.frameId)m[d.frameId]&&delete m[d.id];else{const E=d.groupIds,y=new Set(E.flatMap(v=>At(this.scene.getNonDeletedElements(),v)).filter(v=>Ee(v)).map(v=>v.id));y.size>0&&p.forEach(v=>{v.frameId&&y.has(v.frameId)&&(delete m[v.id],v.groupIds.flatMap(w=>At(this.scene.getNonDeletedElements(),w)).forEach(w=>{delete m[w.id]}))})}return((U=h.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&(d.groupIds.some(E=>h.selectedGroupIds[E])||(m={[d.id]:!0})),{...Oi({editingGroupId:h.editingGroupId,selectedElementIds:m},this.scene.getNonDeletedElements(),h,this),showHyperlinkPopup:d.link||fr(d)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let r=i.origin.x,s=i.origin.y;const o=this.getElementAtPosition(r,s,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(r,s);sr(o)&&(a=o,r=o.x+o.width/2,s=o.y+o.height/2),this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),Eo(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Wt(this.state,{type:"selection"})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,r)=>{const[s,o]=Rn(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),l=n.pressure===.5,c=ice({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[I(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:yt(f,d)}});const u=ja(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:r,height:s})=>{var c;const[o,a]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=ece({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:s});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:r})=>{var c;const[s,o]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Of(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:k("toast.unrecognizedLinkFormat"),closable:!0});const l=bA({type:"embeddable",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.insertElement(l),l});F(this,"createImageElement",async({sceneX:n,sceneY:i,addToFrameUnderCursor:r=!0,imageFile:s})=>{var f;const[o,a]=Rn(n,i,(f=this.lastPointerDownEvent)!=null&&f[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=r?this.getTopLayerFrameAtSceneCoords({x:o,y:a}):null,c=100/this.state.zoom.value,u=rz({type:"image",strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:l?l.id:null,x:o-c/2,y:a-c/2,width:c,height:c});return await this.insertImageElement(u,s)});F(this,"handleLinearElementOnPointerDown",(n,i,r)=>{if(this.state.multiElement){const{multiElement:s}=this.state;if(s.type==="line"&&Wo(s.points,this.state.zoom.value)){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Fs);return}if(de(s)&&s.points.length>1){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Fs);return}const{x:o,y:a,lastCommittedPoint:l}=s;if(s.points.length>1&&l&&gt(I(r.origin.x-o,r.origin.y-a),l)<o2){this.actionManager.executeAction(Fs);return}this.setState(c=>({selectedElementIds:yt({...c.selectedElementIds,[s.id]:!0},c)})),this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),It(this.interactiveCanvas,Tt.POINTER)}else{const[s,o]=Rn(r.origin.x,r.origin.y,n[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?Jf({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===oi.round?{type:dn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===oi.elbow,fixedSegments:this.state.currentItemArrowType===oi.elbow?[]:null}):hc({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:dn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:yt(p,m)}}),this.scene.mutateElement(f,{points:[...f.points,I(0,0)]});const h=ja(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,de(f),de(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[r,s]=Rn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=bA({type:"embeddable",...a}):l=Qo({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[r,s]=Rn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:r,y:s,opacity:this.state.currentItemOpacity,locked:!1,...Dt},a=i===Wn.magicframe?J7(o):M9(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||Bt(r)&&this.elementsPendingErasure.has(r.containerId)?(n=!0,Te(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,n&&(this.store.scheduleCapture(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async(n,i)=>{var l,c,u;if(!Gu(i))throw new Error(k("errors.unsupportedFileType"));const r=i.type;if(It(this.interactiveCanvas,"wait"),r===ve.svg)try{i=OR(SA(await i.text()),i.name)}catch(d){throw console.warn(d),new Error(k("errors.svgImageInsertError"))}const s=await(((c=(l=this.props).generateIdForFile)==null?void 0:c.call(l,i))||t5e(i));if(!s)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(k("errors.imageInsertError"));const o=this.files[s];if(!(o!=null&&o.dataURL)){try{i=await vG(i,{maxWidthOrHeight:ere})}catch(d){console.error("Error trying to resizing image file on insertion",d)}if(i.size>fC)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(fC/1024/1024)}MB`}))}const a=((u=this.files[s])==null?void 0:u.dataURL)||await EG(i);return new Promise(async(d,f)=>{var h,m;try{let p=this.getLatestInitializedImageElement(n,s);if(this.addMissingFiles([{mimeType:r,id:s,dataURL:a,created:Date.now(),lastRetrieved:Date.now()}]),!this.imageCache.get(s)){this.addNewImagesToImageCache();const{erroredFiles:E}=await this.updateImageCache([p]);if(E.size)throw new Error("Image cache update resulted with an error.")}const U=await((h=this.imageCache.get(s))==null?void 0:h.image);if(U&&((m=this.state.newElement)==null?void 0:m.id)!==p.id){p=this.getLatestInitializedImageElement(n,s);const E=this.getImageNaturalDimensions(p,U);Object.assign(p,E)}d(p)}catch(p){console.error(p),f(new Error(k("errors.imageInsertError")))}})});F(this,"getLatestInitializedImageElement",(n,i)=>{const r=this.scene.getElement(n.id)??n;return Te(r,{fileId:i})});F(this,"insertImageElement",async(n,i)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{const r=await this.initializeImage(n,i),s=this.scene.getElementsIncludingDeleted().map(o=>o.id===r.id?r:o);return this.updateScene({captureUpdate:W.IMMEDIATELY,elements:s,appState:{selectedElementIds:yt({[r.id]:!0},this.state)}}),r}catch(r){return this.store.scheduleAction(W.NEVER),this.scene.mutateElement(n,{isDeleted:!0}),this.actionManager.executeAction(Fs),this.setState({errorMessage:r.message||k("errors.imageInsertError")}),null}});F(this,"onImageAction",async()=>{try{const n=this.state.width/2+this.state.offsetLeft,i=this.state.height/2+this.state.offsetTop,{x:r,y:s}=xt({clientX:n,clientY:i},this.state),o=await T_({description:"Image",extensions:Object.keys(vh)});await this.createImageElement({sceneX:r,sceneY:s,addToFrameUnderCursor:!1,imageFile:o}),this.setState({},()=>{this.actionManager.executeAction(Fs)})}catch(n){n.name!=="AbortError"?console.error(n):console.warn(n),this.setState({newElement:null,activeTool:Wt(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Fs)})}});F(this,"getImageNaturalDimensions",(n,i)=>{const r=Math.max(this.state.height-120,160),s=Math.min(r,Math.floor(this.state.height*.5)/this.state.zoom.value),o=Math.min(i.naturalHeight,s),a=o*(i.naturalWidth/i.naturalHeight),l=n.x+n.width/2-a/2,c=n.y+n.height/2-o/2;return{x:l,y:c,width:a,height:o,crop:null}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:r,erroredFiles:s}=await lz({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});return s.size&&(this.store.scheduleAction(W.NEVER),this.scene.replaceAllElements(n.map(o=>In(o)&&s.has(o.fileId)?Te(o,{status:"error"}):o))),{updatedFiles:r,erroredFiles:s}});F(this,"addNewImagesToImageCache",async(n=cz(this.scene.getNonDeletedElements()),i=this.files)=>{const r=n.filter(s=>!s.isDeleted&&!this.imageCache.has(s.fileId));if(r.length){const{updatedFiles:s}=await this.updateImageCache(r,i);if(s.size)for(const o of r)s.has(o.fileId)&&$t.delete(o);s.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",Do(()=>{this.addNewImagesToImageCache()},$ie));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=yae(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const r=ja(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:r!=null?[r]:[]})});F(this,"handleInteractiveCanvasRef",n=>{var i,r;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(ee.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(ee.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(ee.TOUCH_START,this.onTouchStart),(r=this.interactiveCanvas)==null||r.removeEventListener(ee.TOUCH_END,this.onTouchEnd))});F(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:i,fileHandle:r}=await s5e(n),{x:s,y:o}=xt(n,this.state);try{if(Gu(i)&&this.isToolSupported("image")){if((i==null?void 0:i.type)===ve.png||(i==null?void 0:i.type)===ve.svg)try{const f=await A_(i,this.state,this.scene.getElementsIncludingDeleted(),r);this.syncActionResult({...f,appState:{...f.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:W.IMMEDIATELY});return}catch(f){if(f.name!=="EncodingError")throw new Error(k("alerts.couldNotLoadInvalidFile"))}this.createImageElement({sceneX:s,sceneY:o,imageFile:i});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(ve.excalidrawlib);if(a&&typeof a=="string"){try{const f=yG(a);this.addElementsFromPasteOrLibrary({elements:JG(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(i&&await this.loadFileToCanvas(i,r),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&p2(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=Of(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:s,sceneY:o,link:Yr(f)});h&&(this.store.scheduleCapture(),this.setState({selectedElementIds:{[h.id]:!0}}))}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await M_(n);try{const r=this.scene.getElementsIncludingDeleted();let s;try{s=await bG(n,this.state,r,i)}catch(o){const a=o instanceof Tu;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:k("errors.imageToolNotSupported")});return}const l=k(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!s)return;s.type===ve.excalidraw?(Kc(r.concat(s.data.elements)),this.store.scheduleMicroAction({action:W.NEVER,elements:r,appState:void 0}),this.setState({isLoading:!0}),this.syncActionResult({...s.data,appState:{...s.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:W.IMMEDIATELY})):s.type===ve.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:k("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==Rl.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:i,y:r}=xt(n,this.state),s=this.getElementAtPosition(i,r,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:r},o),l=s||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;st("contextMenu","openContextMenu",l),this.setState({...s&&!this.state.selectedElementIds[s.id]?{...this.state,...Oi({editingGroupId:this.state.editingGroupId,selectedElementIds:{[s.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:Ie(s)?new ce(s,this.scene.getNonDeletedElementsMap()):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,r=!0)=>{var m,p,U;const s=this.state.selectionElement,o=n.lastCoords;if(s&&this.state.activeTool.type!=="eraser"){UA({newElement:s,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Bi(n.origin.x,o.x),height:Bi(n.origin.y,o.y),shouldMaintainAspectRatio:Wg(i),shouldResizeFromCenter:!1,scene:this.scene,zoom:this.state.zoom.value,informMutation:!1});return}const a=this.state.newElement;if(!a)return;let[l,c]=Rn(o.x,o.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=In(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=MEe(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((U=this.state.originSnapOffset)==null?void 0:U.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),UA({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Bi(n.originInGrid.x,l),height:Bi(n.originInGrid.y,c),shouldMaintainAspectRatio:wt(a)?!Wg(i):Wg(i),shouldResizeFromCenter:hC(i),zoom:this.state.zoom.value,scene:this.scene,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:r}),this.setState({newElement:a}),(this.state.activeTool.type===Wn.frame||this.state.activeTool.type===Wn.magicframe)&&this.setState({elementsToHighlight:zo(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const r=n.resize.handleType,s=n.lastCoords,[o,a]=Rn(s.x-n.resize.offset.x,s.y-n.resize.offset.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(r&&l&&wt(l)){const u=n.originalElements.get(l.id),d=In(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&wt(u)&&d&&!(d instanceof Promise)){const[f,h]=Rn(s.x,s.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:U}=yk([l],[u],this,i,m,r);this.scene.mutateElement(l,boe(l,this.scene.getNonDeletedElementsMap(),r,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),br(l,this.scene,{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:r&&r!=="rotation",snapLines:U})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const r=this.scene.getSelectedElements(this.state),s=r.filter(d=>Ee(d)),o=n.resize.handleType;if(s.length>0&&o==="rotation"||r.length===1&&de(r[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Rn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(s.forEach(d=>{Rs(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Rn(a.x,a.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,r);const{snapOffset:p,snapLines:U}=yk(r,Fe(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:U})}if(wce(n.originalElements,o,r,this.scene,r0(i),hC(i),r.some(d=>wt(d))?!Wg(i):Wg(i),l,c,n.resize.center.x,n.resize.center.y)){const d=eE(r,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return s.forEach(h=>{zo(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];return i.push(GR,$R),n==="canvas"?this.state.viewModeEnabled?[...i,YR,D4,fk,N4]:[HR,jn,GR,$R,XR,jn,Jde,eye,jn,YR,V5e,D4,fk,N4]:(i.push(XR),this.state.viewModeEnabled?[M2,...i]:[jn,VR,M2,HR,jn,mEe,pEe,UEe,jn,gEe,jn,...i,jn,M5e,R5e,jn,L5e,EEe,$5e,G5e,j5e,D5e,jn,F5e,jn,Kde,Zde,qde,Qde,jn,B5e,z5e,jn,hEe,jn,OG,VG,jn,efe,PG,jn,jH])});F(this,"handleWheel",Jt(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[H.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),c1)return;const{deltaX:i,deltaY:r}=n;if(n.metaKey||n.ctrlKey){const s=Math.sign(r),o=g5*100,a=Math.abs(r);let l=r;a>o&&(l=o*s);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-s*Math.min(1,a/20),this.translateCanvas(u=>({...Su({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Fa(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:s,scrollX:o})=>({scrollX:o-(r||i)/s.value}));return}this.translateCanvas(({zoom:s,scrollX:o,scrollY:a})=>({scrollX:o-i/s.value,scrollY:a-r/s.value}))}));F(this,"savePointer",(n,i,r)=>{var l,c;if(!n||!i)return;const{x:s,y:o}=xt({clientX:n,clientY:i},this.state),a={x:s,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:r,pointersMap:ft.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",el(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const r=this.excalidrawContainerRef.current,{width:s,height:o,left:a,top:l}=r.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(s===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:s,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=ea(),{excalidrawAPI:r,viewModeEnabled:s=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${k("labels.untitled")}-${yC()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:s,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=QF(),this.library=new Wye(this),this.actionManager=new vEe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new qb,this.canvas=document.createElement("canvas"),this.rc=jc.canvas(this.canvas),this.renderer=new Ik(this.scene),this.visibleElements=[],this.store=new Ble(this),this.history=new Cu(this.store),r){const d={updateScene:this.updateScene,mutateElement:this.mutateElement,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,getSceneElementsMapIncludingDeleted:this.getSceneElementsMapIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onIncrement:f=>this.store.onStoreIncrementEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof r=="function"?r(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Wa(this.scene),this.history=new Cu(this.store),this.actionManager.registerAll(y4),this.actionManager.registerAction(bEe(this.history)),this.actionManager.registerAction(yEe(this.history))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let r=null;const s=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!s)break;for(const o of s)o.contentWindow===n.source&&(r=o.contentWindow);r==null||r.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const r=i.id,s=i.info.playerState;Object.values(cU).includes(s)&&r3.set(r,s)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var r,s,o,a;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===n&&((s=this.state.activeEmbeddable)==null?void 0:s.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Bl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=r3.get(n.id);switch(l||(r3.set(n.id,cU.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case cU.PLAYING:case cU.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,r,s){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&r>=n.x+n.width/3&&r<=n.x+2*n.width/3&&s>=n.y+n.height/3&&s<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,r=this.state.height,s=this.scene.getNonDeletedElements().filter(o=>fr(o)&&this.embedsValidationStatus.get(o.id)===!0||Bl(o));return g(he,{children:s.map(o=>{var p,U,E,y,v,w,S,M,_;const{x:a,y:l}=Hr({sceneX:o.x,sceneY:o.y},this.state),c=Kb(o,i,r,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Bl(o)){f=null;const T=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(T.status==="done"){const C=T.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>C}}else if(T.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>d0(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Ce.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let C;T.code==="ERR_GENERATION_INTERRUPTED"?C="Generation was interrupted...":C=T.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>d0(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Be.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${C}</h3>
                  `)}}}else f=Of(Ww(o.link||""));const h=((U=this.state.activeEmbeddable)==null?void 0:U.element)===o&&((E=this.state.activeEmbeddable)==null?void 0:E.state)==="active",m=((y=this.state.activeEmbeddable)==null?void 0:y.element)===o&&((v=this.state.activeEmbeddable)==null?void 0:v.state)==="hover";return g("div",{className:me("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:PB(o,yr(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?yF:1),"--embeddable-radius":`${nr(Math.min(o.width,o.height),o)}px`},children:O("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?uu.enabled:uu.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:k("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(fr(o)?(M=(S=this.props).renderEmbeddable)==null?void 0:M.call(S,o,this.state):null)??g("iframe",{ref:T=>this.cacheEmbeddableRef(o,T),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(_=f==null?void 0:f.sandbox)!=null&&_.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var f,h,m,p,U,E,y,v,w;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderCustomStats:r}=this.props,s=this.scene.getSceneNonce(),{elementsMap:o,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:s,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(f=this.state.newElement)==null?void 0:f.id});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0],d=((h=Pr.get(_a))==null?void 0:h.type)==="panel";return g("div",{className:me("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((m=this.state.openDialog)==null?void 0:m.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?uu.disabled:uu.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(PY.Provider,{value:this,children:g(FY.Provider,{value:this.props,children:g(K_.Provider,{value:this.excalidrawContainerValue,children:g(W_.Provider,{value:this.device,children:g(Q_.Provider,{value:this.setAppState,children:g(q_.Provider,{value:this.state,children:O(Z_.Provider,{value:this.scene.getNonDeletedElements(),children:[O(J_.Provider,{value:this.actionManager,children:[g(x4e,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:em().code,renderTopRightUI:i,renderCustomStats:r,showExitZenModeBtn:typeof((p=this.props)==null?void 0:p.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(A4e,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),n.length===1&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(Z5e,{element:u,scene:this.scene,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&f2(u)&&g(xk,{element:u,elementsMap:o,children:g(t3,{title:k("labels.convertToCode"),icon:PH,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&Bl(u)&&((y=(E=u.customData)==null?void 0:E.generationData)==null?void 0:y.status)==="done"&&O(xk,{element:u,elementsMap:o,children:[g(t3,{title:k("labels.copySource"),icon:up,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),g(t3,{title:"Enter fullscreen",icon:xde,checked:!1,onChange:()=>{const S=this.getHTMLIFrameElement(u);if(S)try{S.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(M){console.warn(M),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(z4e,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(E3e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:S=>{this.setState({contextMenu:null},()=>{this.focusContainer(),S==null||S()})}}),g(N4e,{canvas:this.canvas,rc:this.rc,elementsMap:o,allElementsMap:l,visibleElements:a,sceneNonce:s,selectionNonce:(v=this.state.selectionElement)==null?void 0:v.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:ym(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(F4e,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:o,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(k4e,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:o,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:s,selectionNonce:(w=this.state.selectionElement)==null?void 0:w.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderScrollbars:this.props.renderScrollbars===!0,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(v3e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames(),this.state.activeLockedId&&g(H4e,{app:this,activeLockedId:this.state.activeLockedId}),d&&g(aye,{app:this})]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const r=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}const s=w9(this.scene.getNonDeletedElements(),n).filter(l=>!f2(l));if(!s.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),st("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),st("ai","generate (start)","d2c");try{const{html:l}=await r({frame:n,children:s});if(st("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){st("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,r;((r=(i=n.customData)==null?void 0:i.generationData)==null?void 0:r.status)==="done"&&(qc(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(r=>{In(r)&&i[r.fileId]&&(this.imageCache.delete(r.fileId),$t.delete(r))})}async componentDidMount(){var r;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onDurableIncrementEmitter.on(s=>{this.history.record(s.delta)});const{onIncrement:n}=this.props;n&&this.store.onStoreIncrementEmitter.on(s=>{n(s)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),x7&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(r=this.resizeObserver)==null||r.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),kie()&&!Roe()&&this.setState({errorMessage:g(b3e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new qb,this.fonts=new Wa(this.scene),this.renderer=new Ik(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),this.store.onDurableIncrementEmitter.clear(),$t.destroy(),Gs.destroy(),clearTimeout(Al),$n.clearCache(),Oi.clearCache(),Al=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(Qt(document,ee.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(Qt(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),Qt(window,ee.MESSAGE,this.onWindowMessage,!1),Qt(document,ee.POINTER_UP,this.removePointer,{passive:!1}),Qt(document,ee.COPY,this.onCopy,{passive:!1}),Qt(document,ee.KEYUP,this.onKeyUp,{passive:!0}),Qt(document,ee.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),Qt(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),Qt(document,ee.GESTURE_START,this.onGestureStart,!1),Qt(document,ee.GESTURE_CHANGE,this.onGestureChange,!1),Qt(document,ee.GESTURE_END,this.onGestureEnd,!1),Qt(window,ee.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(Qt(document,ee.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),Qt(document,ee.PASTE,this.pasteFromClipboard,{passive:!1}),Qt(document,ee.CUT,this.onCut,{passive:!1}),Qt(window,ee.RESIZE,this.onResize,!1),Qt(window,ee.UNLOAD,this.onUnload,!1),Qt(window,ee.BLUR,this.onBlur,!1),Qt(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),Qt(this.excalidrawContainerRef.current,ee.DRAG_OVER,this.disableEvent,!1),Qt(this.excalidrawContainerRef.current,ee.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(Qt(Bre(this.excalidrawContainerRef.current),ee.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var a,l,c,u,d,f,h,m,p,U;this.updateEmbeddables();const r=this.scene.getElementsIncludingDeleted(),s=this.scene.getElementsMapIncludingDeleted();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Io(this.state)&&this.setState({activeTool:Wt(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&l$(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),Io(i)&&!Io(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((c=i.openDialog)==null?void 0:c.name)==="elementLinkSelector"||((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector")&&((d=i.openDialog)==null?void 0:d.name)!==((f=this.state.openDialog)==null?void 0:f.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===Ce.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Fs)}),(m=this.state.editingTextElement)!=null&&m.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null}),this.store.commit(s,this.state),this.state.isLoading||((U=(p=this.props).onChange)==null||U.call(p,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){l1=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:r,sceneY:s}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(o.map(async f=>{try{return{file:await r5e(f)}}catch(h){let m=h.message;return h.cause==="FETCH_ERROR"?m=k("errors.failedToFetchImage"):h.cause==="UNSUPPORTED"&&(m=k("errors.unsupportedFileType")),{errorMessage:m}}}));let l=s,c=!1;const u={};for(const f of a)if(f.file){const h=await this.createImageElement({sceneX:r,sceneY:l,imageFile:f.file});h&&(c||(c=!0,l-=h.height/2),this.scene.mutateElement(h,{y:l},{informMutation:!1,isDragging:!1}),l=h.y+h.height+25,u[h.id]=!0)}this.setState({selectedElementIds:yt(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:r,y:s}=xt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Km,verticalAlign:Ub,locked:!1},a=dt({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Mc(o.fontFamily),[c,,u]=XB(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=s;const m=i?[n]:n.split(`
`),p=m.reduce((U,E,y)=>{var w;const v=Ih(E).trim();if(v.length){const S=this.getTopLayerFrameAtSceneCoords({x:r,y:h});let M=Hn(v,a,l);const _=M.width>d,T=_?Wc(v,a,d):v;M=_?Hn(T,a,l):M;const C=r-M.width/2,x=h-M.height/2,R=Kr({...o,x:C,y:x,text:T,originalText:v,lineHeight:l,autoResize:!_,frameId:S?S.id:null});U.push(R),h+=R.height+f}else((w=m[y-1])==null?void 0:w.trim())&&(h+=np(o.fontSize,l)+f);return U},[]);p.length!==0&&(this.scene.insertElements(p),this.store.scheduleCapture(),this.setState({selectedElementIds:yt(Object.fromEntries(p.map(U=>[U.id,!0])),this.state)}),!i&&p.length>1&&tL===!1&&!this.device.editor.isMobile&&(this.setToast({message:k("toast.pasteAsSingleElement",{shortcut:Q("CtrlOrCmd+Shift+V")}),duration:5e3}),tL=!0))}handleTextWysiwyg(n,{isExistingElement:i=!1}){const r=this.scene.getElementsMapIncludingDeleted(),s=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&ue(l)?Te(l,{originalText:o,isDeleted:a??l.isDeleted,...iz(l,Vn(l,r),r,o)}):l)])};l3e({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=Hr({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:Jt(o=>{s(o,!1),a4(n)&&br(n,this.scene)}),onSubmit:Jt(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(s(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;_n.flushSync(()=>{this.setState(u=>({selectedElementIds:yt({...u.selectedElementIds,[c]:!0},u)}))})}l&&_B(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.scheduleCapture(),_n.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&vo(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),s(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const r=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return r&&ue(r)&&!r.isDeleted?r:null}getElementAtPosition(n,i,r){let s=[];if(r&&"allHitElements"in r?s=(r==null?void 0:r.allHitElements)||[]:s=this.getElementsAtPosition(n,i,{includeBoundTextElement:r==null?void 0:r.includeBoundTextElement,includeLockedElements:r==null?void 0:r.includeLockedElements}),s.length>1){if(r!=null&&r.preferSelected){for(let a=s.length-1;a>-1;a--)if(this.state.selectedElementIds[s[a].id])return s[a]}const o=s[s.length-1];return cf({point:I(n,i),element:o,threshold:this.getElementHitThreshold(o)/2,elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:Ee(o)?this.frameNameBoundsCache.get(o):null})?o:s[s.length-2]}return s.length===1?s[0]:null}getElementsAtPosition(n,i,r){const s=[],o=this.scene.getNonDeletedElementsMap();return(r!=null&&r.includeBoundTextElement&&(r!=null&&r.includeLockedElements)?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(l=>((r==null?void 0:r.includeLockedElements)||!l.locked)&&((r==null?void 0:r.includeBoundTextElement)||!(ue(l)&&l.containerId)))).filter(l=>this.hitElement(n,i,l)).filter(l=>{const c=yr(l,o);return c&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?KC({x:n,y:i},c,o):!0}).filter(l=>Bl(l)?(s.push(l),!1):!0).concat(s)}getElementHitThreshold(n){return Math.max(n.strokeWidth/2+.1,.85*(lC/this.state.zoom.value))}hitElement(n,i,r,s=!0){return s&&this.state.selectedElementIds[r.id]&&hz([r],this.state)&&_5(I(n,i),r,this.scene.getNonDeletedElementsMap(),this.getElementHitThreshold(r))||dB(I(n,i),r,this.scene.getNonDeletedElementsMap())?!0:cf({point:I(n,i),element:r,threshold:this.getElementHitThreshold(r),elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:Ee(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(n,i){const r=this.scene.getNonDeletedElements(),s=this.scene.getSelectedElements(this.state);if(s.length===1)return Hu(s[0],!1)?s[0]:null;let o=null;for(let a=r.length-1;a>=0;--a){if(r[a].isDeleted)continue;const[l,c,u,d]=Oe(r[a],this.scene.getNonDeletedElementsMap());if(xe(r[a])&&cf({point:I(n,i),element:r[a],elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(r[a])})){o=r[a];break}else if(l<n&&n<u&&c<i&&i<d){o=r[a];break}}return Hu(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,r){const s=this.scene.getNonDeletedElementsMap(),o=ce.getElement(n.elementId,s);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;cf({point:I(i,r),element:o,elementsMap:s,threshold:this.getElementHitThreshold(o)})?(a=ce.getPointIndexUnderCursor(o,s,this.state.zoom,i,r),l=ce.getSegmentMidpointHitCoords(n,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),(de(o)?a===0||a===o.points.length-1:a>=0)||l?It(this.interactiveCanvas,Tt.POINTER):this.hitElement(i,r,o)&&(!de(o)||!(o.startBinding||o.endBinding))&&It(this.interactiveCanvas,Tt.MOVE)):this.hitElement(i,r,o)&&(!de(o)||!(o.startBinding||o.endBinding))&&It(this.interactiveCanvas,Tt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),ce.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else It(this.interactiveCanvas,Tt.AUTO)}updateGestureOnPointerDown(n){ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),ft.pointers.size===2&&(ft.lastCenter=hk(ft.pointers),ft.initialScale=this.state.zoom.value,ft.initialDistance=gk(Array.from(ft.pointers.values())))}initialPointerDownState(n){const i=xt(n,this.state),r=this.scene.getSelectedElements(this.state),[s,o,a,l]=mt(r),c=r.findIndex(de)===0;return{origin:i,withCmdOrCtrl:n[H.CTRL_OR_CMD],originInGrid:Ga(Rn(i.x,i.y,n[H.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:_k(u1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,Lc(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+s)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,r)},drag:{hasOccurred:!1,offset:null,origin:{...i}},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;i3=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const r=WE(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),s=Jt(()=>{au=null,i3=!1,vo(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,r),window.removeEventListener(ee.POINTER_UP,s),r.flush()});return au=s,window.addEventListener(ee.POINTER_MOVE,r),window.addEventListener(ee.POINTER_UP,s),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const r=Math.max(lC/this.state.zoom.value,1),[s,o,a,l]=mt(i);return n.x>s-r&&n.x<a+r&&n.y>o-r&&n.y<l+r}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:Md(n)?dn.ADAPTIVE_RADIUS:dn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,r=!1){Pc({event:n,app:this,selectedElements:i})&&(r||!Gs.getReferenceSnapPoints())&&Gs.setReferenceSnapPoints(IEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,r=!1){Pc({event:n,app:this,selectedElements:i})&&(r||!Gs.getVisibleGaps())&&Gs.setVisibleGaps(SEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return Jt(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return Jt(i=>{i.key===H.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return WE(i=>{var f,h,m,p,U,E;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const r=xt(i,this.state);if(this.state.activeLockedId&&this.setState({activeLockedId:null}),this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[y,v]=Rn(r.x,r.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let w=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(w<0){const M=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:y,y:v},this.state,this.scene.getNonDeletedElementsMap());w=M?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,M,this.scene.getNonDeletedElementsMap()):-1}const S=ce.moveFixedSegment(this.state.selectedLinearElement,w,y,v,this.scene);_n.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:S.segmentMidPointHoveredCoords,pointerDownState:S.pointerDownState}})});return}const s=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=r,n.drag.offset===null&&(n.drag.offset=Ga(Qle(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(Io(this.state)){this.handleEraser(i,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);const[a,l]=Rn(r.x,r.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&gt(I(r.x,r.y),I(n.origin.x,n.origin.y))<C7)return;if(n.resize.isResizing&&(n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const y=this.state.editingLinearElement||this.state.selectedLinearElement;if(ce.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,c)){const w=ce.addMidpoint(this.state.selectedLinearElement,r,this,!i[H.CTRL_OR_CMD],this.scene);if(!w)return;_n.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(y.pointerDownState.segmentMidpoint.value!==null&&!y.pointerDownState.segmentMidpoint.added)return;const v=ce.handlePointDragging(i,this,r.x,r.y,y);if(v){n.lastCoords.x=r.x,n.lastCoords.y=r.y,n.drag.hasOccurred=!0,this.setState(v);return}}const u=n.hit.allHitElements.some(y=>this.isASelectedElement(y)),d=this.state.editingLinearElement&&i.shiftKey&&this.state.editingLinearElement.elementId===((h=n.hit.element)==null?void 0:h.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d&&this.state.activeTool.type!=="lasso"){const y=this.scene.getSelectedElements(this.state);if(y.every(M=>M.locked))return;const v=y.find(M=>Ee(M)),w=this.getTopLayerFrameAtSceneCoords(r),S=w&&!v?w:null;if(this.state.frameToHighlight!==S&&_n.flushSync(()=>{this.setState({frameToHighlight:S})}),n.drag.hasOccurred=!0,y.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((m=this.state.activeEmbeddable)==null?void 0:m.state)!=="active"){const M={x:r.x-n.drag.origin.x,y:r.y-n.drag.origin.y},_=[...n.originalElements.values()],T=i.shiftKey;if(T){const R=Math.abs(M.x),P=Math.abs(M.y),D=T&&R<P,$=T&&R>P;D&&(M.x=0),$&&(M.y=0)}if(this.state.croppingElementId){const R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&wt(R)&&R.crop!==null&&n.hit.element===R){const P=R.crop,D=In(R)&&((p=this.imageCache.get(R.fileId))==null?void 0:p.image);if(D&&!(D instanceof Promise)){const $=xn(an(r.x-s.x,r.y-s.y),Math.max(this.state.zoom.value,2)),[z,V,G,Y,X,Z]=Oe(R,c),Ue=le(q(I(z,V),I(X,Z),R.angle)),re=le(q(I(G,V),I(X,Z),R.angle)),be=le(q(I(z,Y),I(X,Z),R.angle)),Ye=Cs(wb(re,Ue)),je=Cs(wb(be,Ue)),St=an(o0($,Ye),o0($,je)),hn={...P,x:Ge(P.x-St[0]*Math.sign(R.scale[0]),0,D.naturalWidth-P.width),y:Ge(P.y-St[1]*Math.sign(R.scale[1]),0,D.naturalHeight-P.height)};this.scene.mutateElement(R,{crop:hn});return}}}this.maybeCacheVisibleGaps(i,y),this.maybeCacheReferenceSnapPoints(i,y);const{snapOffset:C,snapLines:x}=xEe(_,M,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:x}),this.state.editingFrame||Zle(n,y,M,this.scene,C,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(y.length!==1||!de(y[0]))&&this.setState({suggestedBindings:eE(y,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const R=this.scene.getElementsIncludingDeleted(),P=n.hit.element,D=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});P&&n.hit.wasAddedToSelection&&!D.find(re=>re.id===P.id)&&D.push(P);const $=new Map(D.map(re=>[re.id,re])),{duplicatedElements:z,duplicateElementsMap:V,elementsWithDuplicates:G,origIdToDuplicateId:Y}=Zb({type:"in-place",elements:R,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:$,overrides:({duplicateElement:re,origElement:be})=>({frameId:re.frameId??be.frameId,seed:Ms()})});z.forEach(re=>{n.originalElements.set(re.id,Lc(re))});const X=G.map(re=>{if($.has(re.id)){const be=n.originalElements.get(re.id);if(be)return Te(re,{x:be.x,y:be.y})}return re}),Z=(E=(U=this.props).onDuplicate)==null?void 0:E.call(U,X,R),Ue=so(Z||X,we(z));_n.flushSync(()=>{if(n.hit.element){const re=Y.get(n.hit.element.id),be=re&&V.get(re);n.hit.element=be||null}n.hit.allHitElements=n.hit.allHitElements.reduce((re,be)=>{const Ye=Y.get(be.id),je=Ye&&V.get(Ye);return je&&re.push(je),re},[]),n.drag.origin=xt(i,this.state),this.setState(re=>({...AB(z,this.scene.getNonDeletedElements(),re)})),this.scene.replaceAllElements(Ue),this.maybeCacheVisibleGaps(i,D,!0),this.maybeCacheReferenceSnapPoints(i,D,!0)})}return}}if(this.state.selectionElement)n.lastCoords.x=r.x,n.lastCoords.y=r.y,i.altKey?_n.flushSync(()=>{this.setActiveTool({type:"lasso",fromSelection:!0},i.shiftKey),this.lassoTrail.startPath(n.origin.x,n.origin.y,i.shiftKey),this.setAppState({selectionElement:null})}):this.maybeDragNewGenericElement(n,i);else if(this.state.activeTool.type==="lasso")!i.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",n),n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(r.x,r.y,i.shiftKey);else{const y=this.state.newElement;if(!y)return;if(y.type==="freedraw"){const v=y.points,w=r.x-y.x,S=r.y-y.y,M=v.length>0&&v[v.length-1];if(!(M&&M[0]===w&&M[1]===S)){const T=y.simulatePressure?y.pressures:[...y.pressures,i.pressure];this.scene.mutateElement(y,{points:[...v,I(w,S)],pressures:T},{informMutation:!1,isDragging:!1}),this.setState({newElement:y})}}else if(Ie(y)){n.drag.hasOccurred=!0;const v=y.points;let w=a-y.x,S=l-y.y;r0(i)&&v.length===2&&({width:w,height:S}=K7(y.x,y.y,r.x,r.y)),v.length===1?this.scene.mutateElement(y,{points:[...v,I(w,S)]},{informMutation:!1,isDragging:!1}):(v.length===2||v.length>1&&de(y))&&this.scene.mutateElement(y,{points:[...v.slice(0,-1),I(w,S)]},{isDragging:!0,informMutation:!1}),this.setState({newElement:y}),Oa(y,!1)&&this.setState({suggestedBindings:H7(y,[r],this.scene,this.state.zoom,this.state.startBoundElement)})}else n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const y=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)ce.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let v=!0;!i.shiftKey&&$n(y,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(S=>Oi({...S,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),S,this)):v=!1);const w=this.state.selectionElement?p9(y,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(S=>{const M={...v&&S.selectedElementIds,...w.reduce((_,T)=>(_[T.id]=!0,_),{})};return n.hit.element&&(w.length?delete M[n.hit.element.id]:M[n.hit.element.id]=!0),S=v?S:{...S,selectedGroupIds:{},editingGroupId:null},{...Oi({editingGroupId:S.editingGroupId,selectedElementIds:M},this.scene.getNonDeletedElements(),S,this),selectedLinearElement:w.length===1&&Ie(w[0])?new ce(w[0],this.scene.getNonDeletedElementsMap()):null,showHyperlinkPopup:w.length===1&&(w[0].link||fr(w[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){var r,s;if(i.scrollbars.isOverHorizontal){const o=n.clientX,a=o-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-a*(((r=u1.horizontal)==null?void 0:r.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.x=o,!0}if(i.scrollbars.isOverVertical){const o=n.clientY,a=o-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-a*(((s=u1.vertical)==null?void 0:s.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.y=o,!0}return!1}onPointerUpFromPointerDownHandler(n){return Jt(i=>{var y,v,w,S,M,_,T,C,x,R,P,D;this.removePointer(i),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:r,resizingElement:s,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState($=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Kg($.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Gs.setReferenceSnapPoints(null),Gs.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up");const f=n.hit.allHitElements,h=xt({clientX:i.clientX,clientY:i.clientY},this.state);if(this.state.activeTool.type==="selection"&&!n.boxSelection.hasOccurred&&!n.resize.isResizing&&!f.some($=>this.state.selectedElementIds[$.id])){const $=this.getElementAtPosition(h.x,h.y,{includeLockedElements:!0});this.store.scheduleCapture(),$!=null&&$.locked?this.setState({activeLockedId:$.groupIds.length>0?$.groupIds.at(-1)||"":$.id}):this.setState({activeLockedId:null})}else this.setState({activeLockedId:null});this.setState({selectedElementsAreBeingDragged:!1});const m=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((v=(y=n.hit)==null?void 0:y.element)!=null&&v.id)){const $=m.get(n.hit.element.id);ro($)&&((w=$.boundElements)==null||w.filter(z=>z.type==="arrow").map(z=>m.get(z.id)).filter(z=>de(z)).forEach(z=>{z&&this.scene.mutateElement(z,{})}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((M=(S=n.hit)==null?void 0:S.element)==null?void 0:M.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Fs);else{const $=ce.handlePointerUp(i,this.state.editingLinearElement,this.state,this.scene);$!==this.state.editingLinearElement&&this.setState({editingLinearElement:$,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const $=ce.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());$&&this.scene.mutateElement($,{})}((T=(_=n.hit)==null?void 0:_.element)==null?void 0:T.id)!==this.state.selectedLinearElement.elementId?this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null}):this.state.selectedLinearElement.isDragging&&this.actionManager.executeAction(Fs,"ui",{event:i,sceneCoords:h})}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(ee.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(ee.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(ee.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(ee.KEYUP,n.eventListeners.onKeyUp),(x=(C=this.props)==null?void 0:C.onPointerUp)==null||x.call(C,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(r==null?void 0:r.type)==="freedraw"){const $=xt(i,this.state),z=r.points;let V=$.x-r.x,G=$.y-r.y;V===z[0][0]&&G===z[0][1]&&(G+=1e-4,V+=1e-4);const Y=r.simulatePressure?[]:[...r.pressures,i.pressure];this.scene.mutateElement(r,{points:[...z,I(V,G)],pressures:Y,lastCommittedPoint:I(V,G)}),this.actionManager.executeAction(Fs);return}if(Ie(r)){r.points.length>1&&this.store.scheduleCapture();const $=xt(i,this.state);!n.drag.hasOccurred&&r&&!a?(this.scene.mutateElement(r,{points:[...r.points,I($.x-r.x,$.y-r.y)]},{informMutation:!1,isDragging:!1}),this.setState({multiElement:r,newElement:r})):n.drag.hasOccurred&&!a&&(Vu(this.state)&&Oa(r,!1)&&this.actionManager.executeAction(Fs,"ui",{event:i,sceneCoords:h}),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(z=>({newElement:null})):(Eo(this.interactiveCanvas),this.setState(z=>({newElement:null,activeTool:Wt(this.state,{type:"selection"}),selectedElementIds:yt({...z.selectedElementIds,[r.id]:!0},z),selectedLinearElement:new ce(r,this.scene.getNonDeletedElementsMap())}))),this.scene.triggerUpdate());return}if(ue(r)){const $=i9(dt({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<$&&this.scene.mutateElement(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(l.type!=="selection"&&r&&fc(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter($=>$.id!==r.id),appState:{newElement:null},captureUpdate:W.NEVER});return}if(Ee(r)){const $=ale(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(u0(this.scene.getElementsMapIncludingDeleted(),$,r,this.state))}if(r&&(this.scene.mutateElement(r,YB(r),{informMutation:!1,isDragging:!1}),this.scene.triggerUpdate()),n.drag.hasOccurred){const $=xt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const z=this.scene.getElement(this.state.selectedLinearElement.elementId);if(z!=null&&z.frameId){const V=yr(z,m);V&&z&&(kc(z,V,this.scene.getNonDeletedElementsMap())||(this.scene.mutateElement(z,{groupIds:[]}),I5([z],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const z=this.getTopLayerFrameAtSceneCoords($),V=this.scene.getSelectedElements(this.state);let G=this.scene.getElementsMapIncludingDeleted();const Y=X=>{if(X.length>0){for(const Z of X){const Ue=Z.groupIds.indexOf(this.state.editingGroupId);this.scene.mutateElement(Z,{groupIds:Z.groupIds.slice(0,Ue)},{informMutation:!1,isDragging:!1})}G.forEach(Z=>{Z.groupIds.length&&At(G,Z.groupIds[Z.groupIds.length-1]).length<2&&this.scene.mutateElement(Z,{groupIds:[]},{informMutation:!1,isDragging:!1})}),this.setState({editingGroupId:null})}};if(z&&!this.state.selectedElementIds[z.id]){const X=V.filter(Z=>Z.frameId!==z.id&&Yb(Z,G,this.state));this.state.editingGroupId&&Y(X),G=u0(G,X,z,this.state)}else if(!z&&this.state.editingGroupId){const X=V.filter(Z=>Z.frameId&&!Yb(Z,G,this.state));Y(X)}G=Ah(G,this.state,this),this.scene.replaceAllElements(G)}}if(s&&this.store.scheduleCapture(),s&&fc(s)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter($=>$.id!==s.id),captureUpdate:W.NEVER}),n.resize.isResizing){let $=Ah(this.scene.getElementsIncludingDeleted(),this.state,this);const z=this.scene.getSelectedElements(this.state).filter(V=>Ee(V));for(const V of z)$=dg($,zo(this.scene.getElementsIncludingDeleted(),V,this.state,m),V,this);this.scene.replaceAllElements($)}const p=n.hit.element;((R=this.state.selectedLinearElement)==null?void 0:R.elementId)!==(p==null?void 0:p.id)&&Ie(p)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new ce(p,this.scene.getNonDeletedElementsMap())}),(!o||o&&(!p&&!d||p&&p.id!==o))&&this.finishImageCropping();const U=this.lastPointerDownEvent,E=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Io(this.state)&&U&&E){if(this.eraserTrail.endPath(),gt(I(U.clientX,U.clientY),I(E.clientX,E.clientY))===0){const z=xt({clientX:E.clientX,clientY:E.clientY},this.state);this.getElementsAtPosition(z.x,z.y).forEach(G=>this.elementsPendingErasure.add(G.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(p&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&this.state.activeTool.type!=="lasso"&&(i.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[p.id]?SB(this.state,p)?this.setState($=>{const z={...$.selectedElementIds};for(const V of p.groupIds.flatMap(G=>At(this.scene.getNonDeletedElements(),G)))delete z[V.id];return{selectedGroupIds:{...$.selectedElementIds,...p.groupIds.map(V=>({[V]:!1})).reduce((V,G)=>({...V,...G}),{})},selectedElementIds:yt(z,$)}}):(P=this.state.selectedLinearElement)!=null&&P.isDragging||this.setState($=>{const z={...$.selectedElementIds};delete z[p.id];const V=Fe(this.scene.getNonDeletedElements(),{selectedElementIds:z});return{...Oi({editingGroupId:$.editingGroupId,selectedElementIds:z},this.scene.getNonDeletedElements(),$,this),selectedLinearElement:V.length===1&&Ie(V[0])?new ce(V[0],this.scene.getNonDeletedElementsMap()):$.selectedLinearElement}}):p.frameId&&this.state.selectedElementIds[p.frameId]?this.setState($=>{var V;const z={...$.selectedElementIds,[p.id]:!0};return delete z[p.frameId],(((V=this.scene.getElement(p.frameId))==null?void 0:V.groupIds)??[]).flatMap(G=>At(this.scene.getNonDeletedElements(),G)).forEach(G=>{delete z[G.id]}),{...Oi({editingGroupId:$.editingGroupId,selectedElementIds:z},this.scene.getNonDeletedElements(),$,this),showHyperlinkPopup:p.link||fr(p)?"info":!1}}):this.setState($=>({selectedElementIds:yt({...$.selectedElementIds,[p.id]:!0},$)})):this.setState($=>{var z;return{...Oi({editingGroupId:$.editingGroupId,selectedElementIds:{[p.id]:!0}},this.scene.getNonDeletedElements(),$,this),selectedLinearElement:Ie(p)&&((z=$.selectedLinearElement)==null?void 0:z.elementId)!==p.id?new ce(p,this.scene.getNonDeletedElementsMap()):$.selectedLinearElement}})),this.state.activeTool.type!=="lasso"&&!(p&&de(p))&&!n.drag.hasOccurred&&!this.state.isResizing&&(p&&nae({point:I(n.origin.x,n.origin.y),element:p,elementsMap:m,threshold:this.getElementHitThreshold(p),frameNameBound:Ee(p)?this.frameNameBoundsCache.get(p):null},m)||!p&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),It(this.interactiveCanvas,Tt.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&r&&this.setState($=>({selectedElementIds:yt({...$.selectedElementIds,[r.id]:!0},$),showHyperlinkPopup:fr(r)&&!r.link?"editor":$.showHyperlinkPopup})),(l.type!=="selection"||$n(this.scene.getNonDeletedElements(),this.state)||!Gi(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.scheduleCapture(),n.drag.hasOccurred&&!this.state.selectedLinearElement||c||u||d){const $=this.scene.getSelectedElements(this.state).filter(Ie);Hb($,Vu(this.state),((D=this.state.selectedLinearElement)==null?void 0:D.selectedPointsIndices)??[],this.scene,this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"&&(l.type!=="lasso"||l.type==="lasso"&&l.fromSelection)?(Eo(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:Wt(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),p&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&ft.pointers.size<=1&&fs(p)&&this.isIframeLikeElementCenter(p,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(p)})}clearSelection(n){this.setState(i=>({selectedElementIds:yt({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&Z0(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:yt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,r,s){if(s){let o=s.x+s.width/2,a=s.y+s.height/2;const l=Q8(s,r,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<Nie){const{x:d,y:f}=Hr({sceneX:o,sceneY:a},r);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:r,top:s}=i.getBoundingClientRect();return{offsetLeft:r,offsetTop:s}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=L5.find(i=>i.code===this.props.langCode)||Rd;await pH(n),this.setAppState({})}}const V4e=e=>{const[t,n]=L.useState(!0);return L.useEffect(()=>{const i=async()=>{await pH(r),n(!1)},r=L5.find(s=>s.code===e.langCode)||Rd;i()},[e.langCode]),t?g(IX,{theme:e.theme}):e.children},zY=({children:e})=>{const{FooterCenterTunnel:t}=cr(),n=Ai();return g(t.In,{children:g("div",{className:me("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};zY.displayName="FooterCenter";const $4e=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),G4e=()=>O("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),HY=({style:e,size:t="small",withText:n})=>O("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g($4e,{}),n&&g(G4e,{})]}),tT=({icon:e,shortcut:t,children:n})=>{const i=ii();return O(he,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};tT.displayName="WelcomeScreenMenuItemContent";const yp=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(tT,{icon:n,shortcut:i,children:t})});yp.displayName="WelcomeScreenMenuItem";const VY=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noopener",children:g(tT,{icon:n,shortcut:i,children:e})});VY.displayName="WelcomeScreenMenuItemLink";const go=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=cr();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||O(he,{children:[g(nT,{}),g(iT,{children:k("welcomeScreen.defaults.center_heading")}),O(rT,{children:[g(oT,{}),g(sT,{})]})]})})})};go.displayName="Center";const nT=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(HY,{withText:!0})});nT.displayName="Logo";const iT=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});iT.displayName="Heading";const rT=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});rT.displayName="Menu";const sT=()=>{const e=Sr();return g(yp,{onSelect:()=>e.executeAction(L_),shortcut:"?",icon:$9,children:k("helpDialog.title")})};sT.displayName="MenuItemHelp";const oT=()=>{const e=Ai(),t=Sr();return e.viewModeEnabled?null:g(yp,{onSelect:()=>t.executeAction(L4),shortcut:Xi("loadScene"),icon:X9,children:k("buttons.load")})};oT.displayName="MenuItemLoadScene";const $Y=({onSelect:e})=>{const{t}=En();return g(yp,{shortcut:null,onSelect:e,icon:Y9,children:t("labels.liveCollaboration")})};$Y.displayName="MenuItemLiveCollaborationTrigger";go.Logo=nT;go.Heading=iT;go.Menu=rT;go.MenuItem=yp;go.MenuItemLink=VY;go.MenuItemHelp=sT;go.MenuItemLoadScene=oT;go.MenuItemLiveCollaborationTrigger=$Y;const aT=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=cr();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[hue,g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.menuHint")})]})})};aT.displayName="MenuHint";const lT=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=cr();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.toolbarHint")}),mue]})})};lT.displayName="ToolbarHint";const cT=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=cr();return g(t.In,{children:O("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||k("welcomeScreen.defaults.helpHint")}),gue]})})};cT.displayName="HelpHint";const Ar=e=>g(he,{children:e.children||O(he,{children:[g(go,{}),g(aT,{}),g(lT,{}),g(cT,{})]})});Ar.displayName="WelcomeScreen";Ar.Center=go;Ar.Hints={MenuHint:aT,ToolbarHint:lT,HelpHint:cT};const GY=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},X4e=(e,t,n)=>{var i,r,s;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((r=e.resizingElement)==null?void 0:r.id)||t.id===((s=e.newElement)==null?void 0:s.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},Y4e=Do((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const i=Kc(e.map(r=>({...r})));x9(i,{shouldThrow:NF(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),uT=(e,t,n)=>{const i=we(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=X4e(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=C9(r);return Y4e(o,e,t),Kc(o),o},XY=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=cr(),i=An();return g(n.In,{children:O(Qe.Item,{onSelect:()=>{st("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??Ade,children:[e??k("labels.textToDiagram"),g(Qe.Item.Badge,{children:"AI"})]})})};XY.displayName="TTDDialogTrigger";const j4e=e=>{const t=ho();return L.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};GY();const W4e=e=>{var Z,Ue,re,be;const{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s=!1,onPointerUpdate:o,renderTopRightUI:a,langCode:l=Rd.code,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,onPaste:U,detectScroll:E=!0,handleKeyboardGlobally:y=!1,onLibraryChange:v,autoFocus:w=!1,generateIdForFile:S,onLinkOpen:M,generateLinkForSelection:_,onPointerDown:T,onPointerUp:C,onScrollChange:x,onDuplicate:R,children:P,validateEmbeddable:D,renderEmbeddable:$,aiEnabled:z,showDeprecatedFonts:V,renderScrollbars:G}=e,Y=(Z=e.UIOptions)==null?void 0:Z.canvasActions,X={...e.UIOptions,canvasActions:{...dC.canvasActions,...Y},tools:{image:((re=(Ue=e.UIOptions)==null?void 0:Ue.tools)==null?void 0:re.image)??!0}};return Y!=null&&Y.export&&(X.canvasActions.export.saveFileToDisk=((be=Y.export)==null?void 0:be.saveFileToDisk)??dC.canvasActions.export.saveFileToDisk),X.canvasActions.toggleTheme===null&&typeof h>"u"&&(X.canvasActions.toggleTheme=!0),L.useEffect(()=>{(async()=>{await pe(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]),import.meta.url)})();const je=St=>{typeof St.scale=="number"&&St.scale!==1&&St.preventDefault()};return document.addEventListener("touchmove",je,{passive:!1}),()=>{document.removeEventListener("touchmove",je)}},[]),g(iue,{store:Pr,children:g(V4e,{langCode:l,theme:h,children:g(eT,{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s,onPointerUpdate:o,renderTopRightUI:a,langCode:l,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,UIOptions:X,onPaste:U,detectScroll:E,handleKeyboardGlobally:y,onLibraryChange:v,autoFocus:w,generateIdForFile:S,onLinkOpen:M,generateLinkForSelection:_,onPointerDown:T,onPointerUp:C,onScrollChange:x,onDuplicate:R,validateEmbeddable:D,renderEmbeddable:$,aiEnabled:z!==!1,showDeprecatedFonts:V,renderScrollbars:G,children:P})})})},K4e=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,U,E;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((U=i==null?void 0:i.canvasActions)==null?void 0:U[h])===((E=o==null?void 0:o.canvasActions)==null?void 0:E[h])}):i[d]===o[d])&&Gi(r,a)},YY=oe.memo(W4e,K4e);YY.displayName="Excalidraw";const Z4e=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=En(),[,r]=L.useState(!1),s=L.useRef(0),o=L.useRef(null),a=async()=>{var u;try{await qc(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=j_();return g(qr,{onCloseRequest:t,title:!1,size:"small",children:O("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),O("div",{className:"ShareableLinkDialog__linkRow",children:[g(Bh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(io,{size:"large",label:i("buttons.copyLink"),icon:up,status:c,onClick:()=>{l(),a()}})]}),O("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},q4e=300,Q4e=5e3,J4e=300,eve=500,nL=2e4,tve=50,nve=33,ive=24*60*60*1e3,dT=3*1024*1024,rve=31536e3,k2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Qi=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Qi||{});const jY={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},sve=10,yn={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},ove={AUTH_STATE_COOKIE:"excplus-auth"},fT=document.cookie.includes(ove.AUTH_STATE_COOKIE),ave=e=>{try{localStorage.setItem(yn.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},WY=()=>{try{const e=localStorage.getItem(yn.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},KY=()=>{let e=null,t=null;try{e=localStorage.getItem(yn.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(yn.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=wz(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...ea(),...i$(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},ZY=()=>{try{const e=localStorage.getItem(yn.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},lve=()=>{try{const e=localStorage.getItem(yn.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(yn.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+ZY()}catch(e){return console.error(e),0}},cve=500,iL=el(e=>{e({scene:ZY(),total:lve()})},cve),uve=e=>{const[t,n]=L.useState({scene:0,total:0});L.useEffect(()=>{iL(o=>{n(o)})},[e.elements,e.appState]),L.useEffect(()=>()=>iL.cancel(),[]);const i=L7();let r,s;return i!==hF?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=k("stats.versionNotAvailable"),O(Ta.StatsRows,{order:-1,children:[g(Ta.StatsRow,{heading:!0,children:k("stats.version")}),O(Ta.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await qc(L7()),e.setToast(k("toast.copyToClipboard"))}catch{}},title:k("stats.versionCopy"),children:[s,g("br",{}),r]}),g(Ta.StatsRow,{heading:!0,children:k("stats.storage")}),O(Ta.StatsRow,{columns:2,children:[g("div",{children:k("stats.scene")}),g("div",{children:vC(t.scene,1)})]}),O(Ta.StatsRow,{columns:2,children:[g("div",{children:k("stats.total")}),g("div",{children:vC(t.total,1)})]})]})},Dl=cp(),dve=(e,t)=>{const[n,i]=Rh(e);return L.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class qY{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=In(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>In(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>In(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const hT=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await eG(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},O1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>In(t)&&e.erroredFiles.has(t.fileId)?Te(t,{status:"error"}):t),captureUpdate:W.NEVER})};var rL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},fve=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},JY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(QY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fve(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new hve;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gve=function(e){const t=QY(e);return JY.encodeByteArray(t,!0)},S6=function(e){return gve(e).replace(/\./g,"")},mve=function(e){try{return JY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uve=()=>pve().__FIREBASE_DEFAULTS__,bve=()=>{if(typeof process>"u"||typeof rL>"u")return;const e=rL.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},yve=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mve(e[1]);return t&&JSON.parse(t)},gT=()=>{try{return Uve()||bve()||yve()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Eve=e=>{var t,n;return(n=(t=gT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ej=e=>{const t=Eve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},tj=()=>{var e;return(e=gT())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[S6(JSON.stringify(n)),S6(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _ve(){var e;const t=(e=gT())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tve(){return!_ve()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sve(){try{return typeof indexedDB=="object"}catch{return!1}}function Ive(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xve="FirebaseError";class Dd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=xve,Object.setPrototypeOf(this,Dd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ij.prototype.create)}}class ij{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Cve(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Dd(r,a,i)}}function Cve(e,t){return e.replace(Ave,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Ave=/\{\$([^}]+)}/g;function q4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(sL(s)&&sL(o)){if(!q4(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function sL(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){return e&&e._delegate?e._delegate:e}class Vh{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new vve;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kve(t))try{this.getOrInitializeService({instanceIdentifier:hu})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=hu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=hu){return this.instances.has(t)}getOptions(t=hu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Rve(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=hu){return this.component?this.component.multipleInstances?t:hu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rve(e){return e===hu?void 0:e}function kve(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Mve(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(lt||(lt={}));const Dve={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},Nve=lt.INFO,Ove={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},Pve=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=Ove[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rj{constructor(t){this.name=t,this._logLevel=Nve,this._logHandler=Pve,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Dve[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...t),this._logHandler(this,lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...t),this._logHandler(this,lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...t),this._logHandler(this,lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...t),this._logHandler(this,lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...t),this._logHandler(this,lt.ERROR,...t)}}const Fve=(e,t)=>t.some(n=>e instanceof n);let oL,aL;function Bve(){return oL||(oL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zve(){return aL||(aL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sj=new WeakMap,Q4=new WeakMap,oj=new WeakMap,s3=new WeakMap,mT=new WeakMap;function Hve(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(bc(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&sj.set(n,e)}).catch(()=>{}),mT.set(t,e),t}function Vve(e){if(Q4.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Q4.set(e,t)}let J4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Q4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||oj.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $ve(e){J4=e(J4)}function Gve(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(o3(this),t,...n);return oj.set(i,t.sort?t.sort():[t]),bc(i)}:zve().includes(e)?function(...t){return e.apply(o3(this),t),bc(sj.get(this))}:function(...t){return bc(e.apply(o3(this),t))}}function Xve(e){return typeof e=="function"?Gve(e):(e instanceof IDBTransaction&&Vve(e),Fve(e,Bve())?new Proxy(e,J4):e)}function bc(e){if(e instanceof IDBRequest)return Hve(e);if(s3.has(e))return s3.get(e);const t=Xve(e);return t!==e&&(s3.set(e,t),mT.set(t,e)),t}const o3=e=>mT.get(e);function Yve(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=bc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(bc(o.result),l.oldVersion,l.newVersion,bc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jve=["get","getKey","getAll","getAllKeys","count"],Wve=["put","add","delete","clear"],a3=new Map;function lL(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(a3.get(t))return a3.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Wve.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jve.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return a3.set(t,s),s}$ve(e=>({...e,get:(t,n,i)=>lL(t,n)||e.get(t,n,i),has:(t,n)=>!!lL(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kve{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zve(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Zve(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ev="@firebase/app",cL="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new rj("@firebase/app"),qve="@firebase/app-compat",Qve="@firebase/analytics-compat",Jve="@firebase/analytics",ewe="@firebase/app-check-compat",twe="@firebase/app-check",nwe="@firebase/auth",iwe="@firebase/auth-compat",rwe="@firebase/database",swe="@firebase/data-connect",owe="@firebase/database-compat",awe="@firebase/functions",lwe="@firebase/functions-compat",cwe="@firebase/installations",uwe="@firebase/installations-compat",dwe="@firebase/messaging",fwe="@firebase/messaging-compat",hwe="@firebase/performance",gwe="@firebase/performance-compat",mwe="@firebase/remote-config",pwe="@firebase/remote-config-compat",Uwe="@firebase/storage",bwe="@firebase/storage-compat",ywe="@firebase/firestore",Ewe="@firebase/vertexai",vwe="@firebase/firestore-compat",wwe="firebase",_we="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="[DEFAULT]",Twe={[ev]:"fire-core",[qve]:"fire-core-compat",[Jve]:"fire-analytics",[Qve]:"fire-analytics-compat",[twe]:"fire-app-check",[ewe]:"fire-app-check-compat",[nwe]:"fire-auth",[iwe]:"fire-auth-compat",[rwe]:"fire-rtdb",[swe]:"fire-data-connect",[owe]:"fire-rtdb-compat",[awe]:"fire-fn",[lwe]:"fire-fn-compat",[cwe]:"fire-iid",[uwe]:"fire-iid-compat",[dwe]:"fire-fcm",[fwe]:"fire-fcm-compat",[hwe]:"fire-perf",[gwe]:"fire-perf-compat",[mwe]:"fire-rc",[pwe]:"fire-rc-compat",[Uwe]:"fire-gcs",[bwe]:"fire-gcs-compat",[ywe]:"fire-fst",[vwe]:"fire-fst-compat",[Ewe]:"fire-vertex","fire-js":"fire-js",[wwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Map,Swe=new Map,nv=new Map;function uL(e,t){try{e.container.addComponent(t)}catch(n){dl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _m(e){const t=e.name;if(nv.has(t))return dl.debug(`There were multiple attempts to register component ${t}.`),!1;nv.set(t,e);for(const n of I6.values())uL(n,e);for(const n of Swe.values())uL(n,e);return!0}function aj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function lj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iwe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yc=new ij("app","Firebase",Iwe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=_we;function uj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:tv,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw yc.create("bad-app-name",{appName:String(r)});if(n||(n=tj()),!n)throw yc.create("no-options");const s=I6.get(r);if(s){if(q4(n,s.options)&&q4(i,s.config))return s;throw yc.create("duplicate-app",{appName:r})}const o=new Lve(r);for(const l of nv.values())o.addComponent(l);const a=new xwe(n,i,o);return I6.set(r,a),a}function dj(e=tv){const t=I6.get(e);if(!t&&e===tv&&tj())return uj();if(!t)throw yc.create("no-app",{appName:e});return t}function Ec(e,t,n){var i;let r=(i=Twe[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dl.warn(a.join(" "));return}_m(new Vh(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cwe="firebase-heartbeat-database",Awe=1,Tm="firebase-heartbeat-store";let l3=null;function fj(){return l3||(l3=Yve(Cwe,Awe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Tm)}catch(n){console.warn(n)}}}}).catch(e=>{throw yc.create("idb-open",{originalErrorMessage:e.message})})),l3}async function Mwe(e){try{const n=(await fj()).transaction(Tm),i=await n.objectStore(Tm).get(hj(e));return await n.done,i}catch(t){if(t instanceof Dd)dl.warn(t.message);else{const n=yc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});dl.warn(n.message)}}}async function dL(e,t){try{const i=(await fj()).transaction(Tm,"readwrite");await i.objectStore(Tm).put(t,hj(e)),await i.done}catch(n){if(n instanceof Dd)dl.warn(n.message);else{const i=yc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dl.warn(i.message)}}}function hj(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rwe=1024,kwe=30;class Lwe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nwe(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fL();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>kwe){const o=Owe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){dl.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fL(),{heartbeatsToSend:i,unsentEntries:r}=Dwe(this._heartbeatsCache.heartbeats),s=S6(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return dl.warn(n),""}}}function fL(){return new Date().toISOString().substring(0,10)}function Dwe(e,t=Rwe){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),hL(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),hL(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Nwe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sve()?Ive().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Mwe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dL(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dL(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function hL(e){return S6(JSON.stringify({version:2,heartbeats:e})).length}function Owe(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pwe(e){_m(new Vh("platform-logger",t=>new Kve(t),"PRIVATE")),_m(new Vh("heartbeat",t=>new Lwe(t),"PRIVATE")),Ec(ev,cL,e),Ec(ev,cL,"esm2017"),Ec("fire-js","")}Pwe("");var Fwe="firebase",Bwe="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ec(Fwe,Bwe,"app");var gL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vc,gj;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,T){function C(){}C.prototype=T.prototype,_.D=T.prototype,_.prototype=new C,_.prototype.constructor=_,_.C=function(x,R,P){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return T.prototype[R].apply(x,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,C){C||(C=0);var x=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)x[R]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(R=0;16>R;++R)x[R]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=_.g[0],C=_.g[1],R=_.g[2];var P=_.g[3],D=T+(P^C&(R^P))+x[0]+3614090360&4294967295;T=C+(D<<7&4294967295|D>>>25),D=P+(R^T&(C^R))+x[1]+3905402710&4294967295,P=T+(D<<12&4294967295|D>>>20),D=R+(C^P&(T^C))+x[2]+606105819&4294967295,R=P+(D<<17&4294967295|D>>>15),D=C+(T^R&(P^T))+x[3]+3250441966&4294967295,C=R+(D<<22&4294967295|D>>>10),D=T+(P^C&(R^P))+x[4]+4118548399&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(R^T&(C^R))+x[5]+1200080426&4294967295,P=T+(D<<12&4294967295|D>>>20),D=R+(C^P&(T^C))+x[6]+2821735955&4294967295,R=P+(D<<17&4294967295|D>>>15),D=C+(T^R&(P^T))+x[7]+4249261313&4294967295,C=R+(D<<22&4294967295|D>>>10),D=T+(P^C&(R^P))+x[8]+1770035416&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(R^T&(C^R))+x[9]+2336552879&4294967295,P=T+(D<<12&4294967295|D>>>20),D=R+(C^P&(T^C))+x[10]+4294925233&4294967295,R=P+(D<<17&4294967295|D>>>15),D=C+(T^R&(P^T))+x[11]+2304563134&4294967295,C=R+(D<<22&4294967295|D>>>10),D=T+(P^C&(R^P))+x[12]+1804603682&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(R^T&(C^R))+x[13]+4254626195&4294967295,P=T+(D<<12&4294967295|D>>>20),D=R+(C^P&(T^C))+x[14]+2792965006&4294967295,R=P+(D<<17&4294967295|D>>>15),D=C+(T^R&(P^T))+x[15]+1236535329&4294967295,C=R+(D<<22&4294967295|D>>>10),D=T+(R^P&(C^R))+x[1]+4129170786&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^R&(T^C))+x[6]+3225465664&4294967295,P=T+(D<<9&4294967295|D>>>23),D=R+(T^C&(P^T))+x[11]+643717713&4294967295,R=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(R^P))+x[0]+3921069994&4294967295,C=R+(D<<20&4294967295|D>>>12),D=T+(R^P&(C^R))+x[5]+3593408605&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^R&(T^C))+x[10]+38016083&4294967295,P=T+(D<<9&4294967295|D>>>23),D=R+(T^C&(P^T))+x[15]+3634488961&4294967295,R=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(R^P))+x[4]+3889429448&4294967295,C=R+(D<<20&4294967295|D>>>12),D=T+(R^P&(C^R))+x[9]+568446438&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^R&(T^C))+x[14]+3275163606&4294967295,P=T+(D<<9&4294967295|D>>>23),D=R+(T^C&(P^T))+x[3]+4107603335&4294967295,R=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(R^P))+x[8]+1163531501&4294967295,C=R+(D<<20&4294967295|D>>>12),D=T+(R^P&(C^R))+x[13]+2850285829&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^R&(T^C))+x[2]+4243563512&4294967295,P=T+(D<<9&4294967295|D>>>23),D=R+(T^C&(P^T))+x[7]+1735328473&4294967295,R=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(R^P))+x[12]+2368359562&4294967295,C=R+(D<<20&4294967295|D>>>12),D=T+(C^R^P)+x[5]+4294588738&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^R)+x[8]+2272392833&4294967295,P=T+(D<<11&4294967295|D>>>21),D=R+(P^T^C)+x[11]+1839030562&4294967295,R=P+(D<<16&4294967295|D>>>16),D=C+(R^P^T)+x[14]+4259657740&4294967295,C=R+(D<<23&4294967295|D>>>9),D=T+(C^R^P)+x[1]+2763975236&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^R)+x[4]+1272893353&4294967295,P=T+(D<<11&4294967295|D>>>21),D=R+(P^T^C)+x[7]+4139469664&4294967295,R=P+(D<<16&4294967295|D>>>16),D=C+(R^P^T)+x[10]+3200236656&4294967295,C=R+(D<<23&4294967295|D>>>9),D=T+(C^R^P)+x[13]+681279174&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^R)+x[0]+3936430074&4294967295,P=T+(D<<11&4294967295|D>>>21),D=R+(P^T^C)+x[3]+3572445317&4294967295,R=P+(D<<16&4294967295|D>>>16),D=C+(R^P^T)+x[6]+76029189&4294967295,C=R+(D<<23&4294967295|D>>>9),D=T+(C^R^P)+x[9]+3654602809&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^R)+x[12]+3873151461&4294967295,P=T+(D<<11&4294967295|D>>>21),D=R+(P^T^C)+x[15]+530742520&4294967295,R=P+(D<<16&4294967295|D>>>16),D=C+(R^P^T)+x[2]+3299628645&4294967295,C=R+(D<<23&4294967295|D>>>9),D=T+(R^(C|~P))+x[0]+4096336452&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~R))+x[7]+1126891415&4294967295,P=T+(D<<10&4294967295|D>>>22),D=R+(T^(P|~C))+x[14]+2878612391&4294967295,R=P+(D<<15&4294967295|D>>>17),D=C+(P^(R|~T))+x[5]+4237533241&4294967295,C=R+(D<<21&4294967295|D>>>11),D=T+(R^(C|~P))+x[12]+1700485571&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~R))+x[3]+2399980690&4294967295,P=T+(D<<10&4294967295|D>>>22),D=R+(T^(P|~C))+x[10]+4293915773&4294967295,R=P+(D<<15&4294967295|D>>>17),D=C+(P^(R|~T))+x[1]+2240044497&4294967295,C=R+(D<<21&4294967295|D>>>11),D=T+(R^(C|~P))+x[8]+1873313359&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~R))+x[15]+4264355552&4294967295,P=T+(D<<10&4294967295|D>>>22),D=R+(T^(P|~C))+x[6]+2734768916&4294967295,R=P+(D<<15&4294967295|D>>>17),D=C+(P^(R|~T))+x[13]+1309151649&4294967295,C=R+(D<<21&4294967295|D>>>11),D=T+(R^(C|~P))+x[4]+4149444226&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~R))+x[11]+3174756917&4294967295,P=T+(D<<10&4294967295|D>>>22),D=R+(T^(P|~C))+x[2]+718787259&4294967295,R=P+(D<<15&4294967295|D>>>17),D=C+(P^(R|~T))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+P&4294967295}i.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var C=T-this.blockSize,x=this.B,R=this.h,P=0;P<T;){if(R==0)for(;P<=C;)r(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<T;)if(x[R++]=_.charCodeAt(P++),R==this.blockSize){r(this,x),R=0;break}}else for(;P<T;)if(x[R++]=_[P++],R==this.blockSize){r(this,x),R=0;break}}this.h=R,this.o+=T},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var C=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=C&255,C/=256;for(this.u(_),_=Array(16),T=C=0;4>T;++T)for(var x=0;32>x;x+=8)_[C++]=this.g[T]>>>x&255;return _};function s(_,T){var C=a;return Object.prototype.hasOwnProperty.call(C,_)?C[_]:C[_]=T(_)}function o(_,T){this.h=T;for(var C=[],x=!0,R=_.length-1;0<=R;R--){var P=_[R]|0;x&&P==T||(C[R]=P,x=!1)}this.g=C}var a={};function l(_){return-128<=_&&128>_?s(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return U(c(-_));for(var T=[],C=1,x=0;_>=C;x++)T[x]=_/C|0,C*=4294967296;return new o(T,0)}function u(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return U(u(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(T,8)),x=d,R=0;R<_.length;R+=8){var P=Math.min(8,_.length-R),D=parseInt(_.substring(R,R+P),T);8>P?(P=c(Math.pow(T,P)),x=x.j(P).add(c(D))):(x=x.j(C),x=x.add(c(D)))}return x}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-U(this).m();for(var _=0,T=1,C=0;C<this.g.length;C++){var x=this.i(C);_+=(0<=x?x:4294967296+x)*T,T*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+U(this).toString(_);for(var T=c(Math.pow(_,6)),C=this,x="";;){var R=w(C,T).g;C=E(C,R.j(T));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(_);if(C=R,m(C))return P+x;for(;6>P.length;)P="0"+P;x=P+x}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function p(_){return _.h==-1}e.l=function(_){return _=E(this,_),p(_)?-1:m(_)?0:1};function U(_){for(var T=_.g.length,C=[],x=0;x<T;x++)C[x]=~_.g[x];return new o(C,~_.h).add(f)}e.abs=function(){return p(this)?U(this):this},e.add=function(_){for(var T=Math.max(this.g.length,_.g.length),C=[],x=0,R=0;R<=T;R++){var P=x+(this.i(R)&65535)+(_.i(R)&65535),D=(P>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);x=D>>>16,P&=65535,D&=65535,C[R]=D<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(_,T){return _.add(U(T))}e.j=function(_){if(m(this)||m(_))return d;if(p(this))return p(_)?U(this).j(U(_)):U(U(this).j(_));if(p(_))return U(this.j(U(_)));if(0>this.l(h)&&0>_.l(h))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,C=[],x=0;x<2*T;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<_.g.length;R++){var P=this.i(x)>>>16,D=this.i(x)&65535,$=_.i(R)>>>16,z=_.i(R)&65535;C[2*x+2*R]+=D*z,y(C,2*x+2*R),C[2*x+2*R+1]+=P*z,y(C,2*x+2*R+1),C[2*x+2*R+1]+=D*$,y(C,2*x+2*R+1),C[2*x+2*R+2]+=P*$,y(C,2*x+2*R+2)}for(x=0;x<T;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=T;x<2*T;x++)C[x]=0;return new o(C,0)};function y(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function v(_,T){this.g=_,this.h=T}function w(_,T){if(m(T))throw Error("division by zero");if(m(_))return new v(d,d);if(p(_))return T=w(U(_),T),new v(U(T.g),U(T.h));if(p(T))return T=w(_,U(T)),new v(U(T.g),T.h);if(30<_.g.length){if(p(_)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var C=f,x=T;0>=x.l(_);)C=S(C),x=S(x);var R=M(C,1),P=M(x,1);for(x=M(x,2),C=M(C,2);!m(x);){var D=P.add(x);0>=D.l(_)&&(R=R.add(C),P=D),x=M(x,1),C=M(C,1)}return T=E(_,R.j(T)),new v(R,T)}for(R=d;0<=_.l(T);){for(C=Math.max(1,Math.floor(_.m()/T.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),P=c(C),D=P.j(T);p(D)||0<D.l(_);)C-=x,P=c(C),D=P.j(T);m(P)&&(P=f),R=R.add(P),_=E(_,D)}return new v(R,_)}e.A=function(_){return w(this,_).h},e.and=function(_){for(var T=Math.max(this.g.length,_.g.length),C=[],x=0;x<T;x++)C[x]=this.i(x)&_.i(x);return new o(C,this.h&_.h)},e.or=function(_){for(var T=Math.max(this.g.length,_.g.length),C=[],x=0;x<T;x++)C[x]=this.i(x)|_.i(x);return new o(C,this.h|_.h)},e.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),C=[],x=0;x<T;x++)C[x]=this.i(x)^_.i(x);return new o(C,this.h^_.h)};function S(_){for(var T=_.g.length+1,C=[],x=0;x<T;x++)C[x]=_.i(x)<<1|_.i(x-1)>>>31;return new o(C,_.h)}function M(_,T){var C=T>>5;T%=32;for(var x=_.g.length-C,R=[],P=0;P<x;P++)R[P]=0<T?_.i(P+C)>>>T|_.i(P+C+1)<<32-T:_.i(P+C);return new o(R,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gj=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,vc=o}).apply(typeof gL<"u"?gL:typeof self<"u"?self:typeof window<"u"?window:{});var FU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mj,P1,pj,L2,iv,Uj,bj,yj;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,A,N){return b==Array.prototype||b==Object.prototype||(b[A]=N.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof FU=="object"&&FU];for(var A=0;A<b.length;++A){var N=b[A];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var i=n(this);function r(b,A){if(A)e:{var N=i;b=b.split(".");for(var B=0;B<b.length-1;B++){var K=b[B];if(!(K in N))break e;N=N[K]}b=b[b.length-1],B=N[b],A=A(B),A!=B&&A!=null&&t(N,b,{configurable:!0,writable:!0,value:A})}}function s(b,A){b instanceof String&&(b+="");var N=0,B=!1,K={next:function(){if(!B&&N<b.length){var J=N++;return{value:A(J,b[J]),done:!1}}return B=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}r("Array.prototype.values",function(b){return b||function(){return s(this,function(A,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(b){var A=typeof b;return A=A!="object"?A:b?Array.isArray(b)?"array":A:"null",A=="array"||A=="object"&&typeof b.length=="number"}function c(b){var A=typeof b;return A=="object"&&b!=null||A=="function"}function u(b,A,N){return b.call.apply(b.bind,arguments)}function d(b,A,N){if(!b)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,B),b.apply(A,K)}}return function(){return b.apply(A,arguments)}}function f(b,A,N){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(b,A){var N=Array.prototype.slice.call(arguments,1);return function(){var B=N.slice();return B.push.apply(B,arguments),b.apply(this,B)}}function m(b,A){function N(){}N.prototype=A.prototype,b.aa=A.prototype,b.prototype=new N,b.prototype.constructor=b,b.Qb=function(B,K,J){for(var fe=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)fe[Pt-2]=arguments[Pt];return A.prototype[K].apply(B,fe)}}function p(b){const A=b.length;if(0<A){const N=Array(A);for(let B=0;B<A;B++)N[B]=b[B];return N}return[]}function U(b,A){for(let N=1;N<arguments.length;N++){const B=arguments[N];if(l(B)){const K=b.length||0,J=B.length||0;b.length=K+J;for(let fe=0;fe<J;fe++)b[K+fe]=B[fe]}else b.push(B)}}class E{constructor(A,N){this.i=A,this.j=N,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function y(b){return/^[\s\xa0]*$/.test(b)}function v(){var b=a.navigator;return b&&(b=b.userAgent)?b:""}function w(b){return w[" "](b),b}w[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(b,A,N){for(const B in b)A.call(N,b[B],B,b)}function _(b,A){for(const N in b)A.call(void 0,b[N],N,b)}function T(b){const A={};for(const N in b)A[N]=b[N];return A}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(b,A){let N,B;for(let K=1;K<arguments.length;K++){B=arguments[K];for(N in B)b[N]=B[N];for(let J=0;J<C.length;J++)N=C[J],Object.prototype.hasOwnProperty.call(B,N)&&(b[N]=B[N])}}function R(b){var A=1;b=b.split(":");const N=[];for(;0<A&&b.length;)N.push(b.shift()),A--;return b.length&&N.push(b.join(":")),N}function P(b){a.setTimeout(()=>{throw b},0)}function D(){var b=X;let A=null;return b.g&&(A=b.g,b.g=b.g.next,b.g||(b.h=null),A.next=null),A}class ${constructor(){this.h=this.g=null}add(A,N){const B=z.get();B.set(A,N),this.h?this.h.next=B:this.g=B,this.h=B}}var z=new E(()=>new V,b=>b.reset());class V{constructor(){this.next=this.g=this.h=null}set(A,N){this.h=A,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,X=new $,Z=()=>{const b=a.Promise.resolve(void 0);G=()=>{b.then(Ue)}};var Ue=()=>{for(var b;b=D();){try{b.h.call(b.g)}catch(N){P(N)}var A=z;A.j(b),100>A.h&&(A.h++,b.next=A.g,A.g=b)}Y=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(b,A){this.type=b,this.g=this.target=A,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,A=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const N=()=>{};a.addEventListener("test",N,A),a.removeEventListener("test",N,A)}catch{}return b}();function je(b,A){if(be.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var N=this.type=b.type,B=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=A,A=b.relatedTarget){if(S){e:{try{w(A.nodeName);var K=!0;break e}catch{}K=!1}K||(A=null)}}else N=="mouseover"?A=b.fromElement:N=="mouseout"&&(A=b.toElement);this.relatedTarget=A,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:St[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&je.aa.h.call(this)}}m(je,be);var St={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function pi(b,A,N,B,K){this.listener=b,this.proxy=null,this.src=A,this.type=N,this.capture=!!B,this.ha=K,this.key=++Yn,this.da=this.fa=!1}function $e(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function ot(b){this.src=b,this.g={},this.h=0}ot.prototype.add=function(b,A,N,B,K){var J=b.toString();b=this.g[J],b||(b=this.g[J]=[],this.h++);var fe=Qr(b,A,B,K);return-1<fe?(A=b[fe],N||(A.fa=!1)):(A=new pi(A,this.src,J,!!B,K),A.fa=N,b.push(A)),A};function rn(b,A){var N=A.type;if(N in b.g){var B=b.g[N],K=Array.prototype.indexOf.call(B,A,void 0),J;(J=0<=K)&&Array.prototype.splice.call(B,K,1),J&&($e(A),b.g[N].length==0&&(delete b.g[N],b.h--))}}function Qr(b,A,N,B){for(var K=0;K<b.length;++K){var J=b[K];if(!J.da&&J.listener==A&&J.capture==!!N&&J.ha==B)return K}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Ds={};function Ir(b,A,N,B,K){if(Array.isArray(A)){for(var J=0;J<A.length;J++)Ir(b,A[J],N,B,K);return null}return N=iS(N),b&&b[hn]?b.K(A,N,c(B)?!!B.capture:!1,K):Ly(b,A,N,!1,B,K)}function Ly(b,A,N,B,K,J){if(!A)throw Error("Invalid event type");var fe=c(K)?!!K.capture:!!K,Pt=Oy(b);if(Pt||(b[Ls]=Pt=new ot(b)),N=Pt.add(A,N,B,fe,J),N.proxy)return N;if(B=Dy(),N.proxy=B,B.src=b,B.listener=N,b.addEventListener)Ye||(K=fe),K===void 0&&(K=!1),b.addEventListener(A.toString(),B,K);else if(b.attachEvent)b.attachEvent(nS(A.toString()),B);else if(b.addListener&&b.removeListener)b.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Dy(){function b(N){return A.call(b.src,b.listener,N)}const A=cK;return b}function Qc(b,A,N,B,K){if(Array.isArray(A))for(var J=0;J<A.length;J++)Qc(b,A[J],N,B,K);else B=c(B)?!!B.capture:!!B,N=iS(N),b&&b[hn]?(b=b.i,A=String(A).toString(),A in b.g&&(J=b.g[A],N=Qr(J,N,B,K),-1<N&&($e(J[N]),Array.prototype.splice.call(J,N,1),J.length==0&&(delete b.g[A],b.h--)))):b&&(b=Oy(b))&&(A=b.g[A.toString()],b=-1,A&&(b=Qr(A,N,B,K)),(N=-1<b?A[b]:null)&&Ny(N))}function Ny(b){if(typeof b!="number"&&b&&!b.da){var A=b.src;if(A&&A[hn])rn(A.i,b);else{var N=b.type,B=b.proxy;A.removeEventListener?A.removeEventListener(N,B,b.capture):A.detachEvent?A.detachEvent(nS(N),B):A.addListener&&A.removeListener&&A.removeListener(B),(N=Oy(A))?(rn(N,b),N.h==0&&(N.src=null,A[Ls]=null)):$e(b)}}}function nS(b){return b in Ds?Ds[b]:Ds[b]="on"+b}function cK(b,A){if(b.da)b=!0;else{A=new je(A,this);var N=b.listener,B=b.ha||b.src;b.fa&&Ny(b),b=N.call(B,A)}return b}function Oy(b){return b=b[Ls],b instanceof ot?b:null}var Py="__closure_events_fn_"+(1e9*Math.random()>>>0);function iS(b){return typeof b=="function"?b:(b[Py]||(b[Py]=function(A){return b.handleEvent(A)}),b[Py])}function Mi(){re.call(this),this.i=new ot(this),this.M=this,this.F=null}m(Mi,re),Mi.prototype[hn]=!0,Mi.prototype.removeEventListener=function(b,A,N,B){Qc(this,b,A,N,B)};function Wi(b,A){var N,B=b.F;if(B)for(N=[];B;B=B.F)N.push(B);if(b=b.M,B=A.type||A,typeof A=="string")A=new be(A,b);else if(A instanceof be)A.target=A.target||b;else{var K=A;A=new be(B,b),x(A,K)}if(K=!0,N)for(var J=N.length-1;0<=J;J--){var fe=A.g=N[J];K=Sp(fe,B,!0,A)&&K}if(fe=A.g=b,K=Sp(fe,B,!0,A)&&K,K=Sp(fe,B,!1,A)&&K,N)for(J=0;J<N.length;J++)fe=A.g=N[J],K=Sp(fe,B,!1,A)&&K}Mi.prototype.N=function(){if(Mi.aa.N.call(this),this.i){var b=this.i,A;for(A in b.g){for(var N=b.g[A],B=0;B<N.length;B++)$e(N[B]);delete b.g[A],b.h--}}this.F=null},Mi.prototype.K=function(b,A,N,B){return this.i.add(String(b),A,!1,N,B)},Mi.prototype.L=function(b,A,N,B){return this.i.add(String(b),A,!0,N,B)};function Sp(b,A,N,B){if(A=b.i.g[String(A)],!A)return!0;A=A.concat();for(var K=!0,J=0;J<A.length;++J){var fe=A[J];if(fe&&!fe.da&&fe.capture==N){var Pt=fe.listener,Ui=fe.ha||fe.src;fe.fa&&rn(b.i,fe),K=Pt.call(Ui,B)!==!1&&K}}return K&&!B.defaultPrevented}function rS(b,A,N){if(typeof b=="function")N&&(b=f(b,N));else if(b&&typeof b.handleEvent=="function")b=f(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:a.setTimeout(b,A||0)}function sS(b){b.g=rS(()=>{b.g=null,b.i&&(b.i=!1,sS(b))},b.l);const A=b.h;b.h=null,b.m.apply(null,A)}class uK extends re{constructor(A,N){super(),this.m=A,this.l=N,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:sS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ig(b){re.call(this),this.h=b,this.g={}}m(Ig,re);var oS=[];function aS(b){M(b.g,function(A,N){this.g.hasOwnProperty(N)&&Ny(A)},b),b.g={}}Ig.prototype.N=function(){Ig.aa.N.call(this),aS(this)},Ig.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fy=a.JSON.stringify,dK=a.JSON.parse,fK=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function By(){}By.prototype.h=null;function lS(b){return b.h||(b.h=b.i())}function cS(){}var xg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zy(){be.call(this,"d")}m(zy,be);function Hy(){be.call(this,"c")}m(Hy,be);var Jc={},uS=null;function Ip(){return uS=uS||new Mi}Jc.La="serverreachability";function dS(b){be.call(this,Jc.La,b)}m(dS,be);function Cg(b){const A=Ip();Wi(A,new dS(A))}Jc.STAT_EVENT="statevent";function fS(b,A){be.call(this,Jc.STAT_EVENT,b),this.stat=A}m(fS,be);function Ki(b){const A=Ip();Wi(A,new fS(A,b))}Jc.Ma="timingevent";function hS(b,A){be.call(this,Jc.Ma,b),this.size=A}m(hS,be);function Ag(b,A){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},A)}function Mg(){this.g=!0}Mg.prototype.xa=function(){this.g=!1};function hK(b,A,N,B,K,J){b.info(function(){if(b.g)if(J)for(var fe="",Pt=J.split("&"),Ui=0;Ui<Pt.length;Ui++){var Ut=Pt[Ui].split("=");if(1<Ut.length){var Ri=Ut[0];Ut=Ut[1];var ki=Ri.split("_");fe=2<=ki.length&&ki[1]=="type"?fe+(Ri+"="+Ut+"&"):fe+(Ri+"=redacted&")}}else fe=null;else fe=J;return"XMLHTTP REQ ("+B+") [attempt "+K+"]: "+A+`
`+N+`
`+fe})}function gK(b,A,N,B,K,J,fe){b.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+K+"]: "+A+`
`+N+`
`+J+" "+fe})}function Bd(b,A,N,B){b.info(function(){return"XMLHTTP TEXT ("+A+"): "+pK(b,N)+(B?" "+B:"")})}function mK(b,A){b.info(function(){return"TIMEOUT: "+A})}Mg.prototype.info=function(){};function pK(b,A){if(!b.g)return A;if(!A)return null;try{var N=JSON.parse(A);if(N){for(b=0;b<N.length;b++)if(Array.isArray(N[b])){var B=N[b];if(!(2>B.length)){var K=B[1];if(Array.isArray(K)&&!(1>K.length)){var J=K[0];if(J!="noop"&&J!="stop"&&J!="close")for(var fe=1;fe<K.length;fe++)K[fe]=""}}}}return Fy(N)}catch{return A}}var xp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vy;function Cp(){}m(Cp,By),Cp.prototype.g=function(){return new XMLHttpRequest},Cp.prototype.i=function(){return{}},Vy=new Cp;function yl(b,A,N,B){this.j=b,this.i=A,this.l=N,this.R=B||1,this.U=new Ig(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mS}function mS(){this.i=null,this.g="",this.h=!1}var pS={},$y={};function Gy(b,A,N){b.L=1,b.v=kp(la(A)),b.m=N,b.P=!0,US(b,null)}function US(b,A){b.F=Date.now(),Ap(b),b.A=la(b.v);var N=b.A,B=b.R;Array.isArray(B)||(B=[String(B)]),RS(N.i,"t",B),b.C=0,N=b.j.J,b.h=new mS,b.g=KS(b.j,N?A:null,!b.m),0<b.O&&(b.M=new uK(f(b.Y,b,b.g),b.O)),A=b.U,N=b.g,B=b.ca;var K="readystatechange";Array.isArray(K)||(K&&(oS[0]=K.toString()),K=oS);for(var J=0;J<K.length;J++){var fe=Ir(N,K[J],B||A.handleEvent,!1,A.h||A);if(!fe)break;A.g[fe.key]=fe}A=b.H?T(b.H):{},b.m?(b.u||(b.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,A)):(b.u="GET",b.g.ea(b.A,b.u,null,A)),Cg(),hK(b.i,b.u,b.A,b.l,b.R,b.m)}yl.prototype.ca=function(b){b=b.target;const A=this.M;A&&ca(b)==3?A.j():this.Y(b)},yl.prototype.Y=function(b){try{if(b==this.g)e:{const ki=ca(this.g);var A=this.g.Ba();const Vd=this.g.Z();if(!(3>ki)&&(ki!=3||this.g&&(this.h.h||this.g.oa()||FS(this.g)))){this.J||ki!=4||A==7||(A==8||0>=Vd?Cg(3):Cg(2)),Xy(this);var N=this.g.Z();this.X=N;t:if(bS(this)){var B=FS(this.g);b="";var K=B.length,J=ca(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){eu(this),Rg(this);var fe="";break t}this.h.i=new a.TextDecoder}for(A=0;A<K;A++)this.h.h=!0,b+=this.h.i.decode(B[A],{stream:!(J&&A==K-1)});B.length=0,this.h.g+=b,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=N==200,gK(this.i,this.u,this.A,this.l,this.R,ki,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Ui=this.g;if((Pt=Ui.g?Ui.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Pt)){var Ut=Pt;break t}}Ut=null}if(N=Ut)Bd(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yy(this,N);else{this.o=!1,this.s=3,Ki(12),eu(this),Rg(this);break e}}if(this.P){N=!0;let Ns;for(;!this.J&&this.C<fe.length;)if(Ns=UK(this,fe),Ns==$y){ki==4&&(this.s=4,Ki(14),N=!1),Bd(this.i,this.l,null,"[Incomplete Response]");break}else if(Ns==pS){this.s=4,Ki(15),Bd(this.i,this.l,fe,"[Invalid Chunk]"),N=!1;break}else Bd(this.i,this.l,Ns,null),Yy(this,Ns);if(bS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ki!=4||fe.length!=0||this.h.h||(this.s=1,Ki(16),N=!1),this.o=this.o&&N,!N)Bd(this.i,this.l,fe,"[Invalid Chunked Response]"),eu(this),Rg(this);else if(0<fe.length&&!this.W){this.W=!0;var Ri=this.j;Ri.g==this&&Ri.ba&&!Ri.M&&(Ri.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Qy(Ri),Ri.M=!0,Ki(11))}}else Bd(this.i,this.l,fe,null),Yy(this,fe);ki==4&&eu(this),this.o&&!this.J&&(ki==4?XS(this.j,this):(this.o=!1,Ap(this)))}else DK(this.g),N==400&&0<fe.indexOf("Unknown SID")?(this.s=3,Ki(12)):(this.s=0,Ki(13)),eu(this),Rg(this)}}}catch{}finally{}};function bS(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function UK(b,A){var N=b.C,B=A.indexOf(`
`,N);return B==-1?$y:(N=Number(A.substring(N,B)),isNaN(N)?pS:(B+=1,B+N>A.length?$y:(A=A.slice(B,B+N),b.C=B+N,A)))}yl.prototype.cancel=function(){this.J=!0,eu(this)};function Ap(b){b.S=Date.now()+b.I,yS(b,b.I)}function yS(b,A){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Ag(f(b.ba,b),A)}function Xy(b){b.B&&(a.clearTimeout(b.B),b.B=null)}yl.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(mK(this.i,this.A),this.L!=2&&(Cg(),Ki(17)),eu(this),this.s=2,Rg(this)):yS(this,this.S-b)};function Rg(b){b.j.G==0||b.J||XS(b.j,b)}function eu(b){Xy(b);var A=b.M;A&&typeof A.ma=="function"&&A.ma(),b.M=null,aS(b.U),b.g&&(A=b.g,b.g=null,A.abort(),A.ma())}function Yy(b,A){try{var N=b.j;if(N.G!=0&&(N.g==b||jy(N.h,b))){if(!b.K&&jy(N.h,b)&&N.G==3){try{var B=N.Da.g.parse(A)}catch{B=null}if(Array.isArray(B)&&B.length==3){var K=B;if(K[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<b.F)Fp(N),Op(N);else break e;qy(N),Ki(18)}}else N.za=K[1],0<N.za-N.T&&37500>K[2]&&N.F&&N.v==0&&!N.C&&(N.C=Ag(f(N.Za,N),6e3));if(1>=wS(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else nu(N,11)}else if((b.K||N.g==b)&&Fp(N),!y(A))for(K=N.Da.g.parse(A),A=0;A<K.length;A++){let Ut=K[A];if(N.T=Ut[0],Ut=Ut[1],N.G==2)if(Ut[0]=="c"){N.K=Ut[1],N.ia=Ut[2];const Ri=Ut[3];Ri!=null&&(N.la=Ri,N.j.info("VER="+N.la));const ki=Ut[4];ki!=null&&(N.Aa=ki,N.j.info("SVER="+N.Aa));const Vd=Ut[5];Vd!=null&&typeof Vd=="number"&&0<Vd&&(B=1.5*Vd,N.L=B,N.j.info("backChannelRequestTimeoutMs_="+B)),B=N;const Ns=b.g;if(Ns){const zp=Ns.g?Ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zp){var J=B.h;J.g||zp.indexOf("spdy")==-1&&zp.indexOf("quic")==-1&&zp.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Wy(J,J.h),J.h=null))}if(B.D){const Jy=Ns.g?Ns.g.getResponseHeader("X-HTTP-Session-Id"):null;Jy&&(B.ya=Jy,Yt(B.I,B.D,Jy))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-b.F,N.j.info("Handshake RTT: "+N.R+"ms")),B=N;var fe=b;if(B.qa=WS(B,B.J?B.ia:null,B.W),fe.K){_S(B.h,fe);var Pt=fe,Ui=B.L;Ui&&(Pt.I=Ui),Pt.B&&(Xy(Pt),Ap(Pt)),B.g=fe}else $S(B);0<N.i.length&&Pp(N)}else Ut[0]!="stop"&&Ut[0]!="close"||nu(N,7);else N.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?nu(N,7):Zy(N):Ut[0]!="noop"&&N.l&&N.l.ta(Ut),N.v=0)}}Cg(4)}catch{}}var bK=class{constructor(b,A){this.g=b,this.map=A}};function ES(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vS(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function wS(b){return b.h?1:b.g?b.g.size:0}function jy(b,A){return b.h?b.h==A:b.g?b.g.has(A):!1}function Wy(b,A){b.g?b.g.add(A):b.h=A}function _S(b,A){b.h&&b.h==A?b.h=null:b.g&&b.g.has(A)&&b.g.delete(A)}ES.prototype.cancel=function(){if(this.i=TS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function TS(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let A=b.i;for(const N of b.g.values())A=A.concat(N.D);return A}return p(b.i)}function yK(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(l(b)){for(var A=[],N=b.length,B=0;B<N;B++)A.push(b[B]);return A}A=[],N=0;for(B in b)A[N++]=b[B];return A}function EK(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(l(b)||typeof b=="string"){var A=[];b=b.length;for(var N=0;N<b;N++)A.push(N);return A}A=[],N=0;for(const B in b)A[N++]=B;return A}}}function SS(b,A){if(b.forEach&&typeof b.forEach=="function")b.forEach(A,void 0);else if(l(b)||typeof b=="string")Array.prototype.forEach.call(b,A,void 0);else for(var N=EK(b),B=yK(b),K=B.length,J=0;J<K;J++)A.call(void 0,B[J],N&&N[J],b)}var IS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vK(b,A){if(b){b=b.split("&");for(var N=0;N<b.length;N++){var B=b[N].indexOf("="),K=null;if(0<=B){var J=b[N].substring(0,B);K=b[N].substring(B+1)}else J=b[N];A(J,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function tu(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof tu){this.h=b.h,Mp(this,b.j),this.o=b.o,this.g=b.g,Rp(this,b.s),this.l=b.l;var A=b.i,N=new Dg;N.i=A.i,A.g&&(N.g=new Map(A.g),N.h=A.h),xS(this,N),this.m=b.m}else b&&(A=String(b).match(IS))?(this.h=!1,Mp(this,A[1]||"",!0),this.o=kg(A[2]||""),this.g=kg(A[3]||"",!0),Rp(this,A[4]),this.l=kg(A[5]||"",!0),xS(this,A[6]||"",!0),this.m=kg(A[7]||"")):(this.h=!1,this.i=new Dg(null,this.h))}tu.prototype.toString=function(){var b=[],A=this.j;A&&b.push(Lg(A,CS,!0),":");var N=this.g;return(N||A=="file")&&(b.push("//"),(A=this.o)&&b.push(Lg(A,CS,!0),"@"),b.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&b.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&b.push("/"),b.push(Lg(N,N.charAt(0)=="/"?TK:_K,!0))),(N=this.i.toString())&&b.push("?",N),(N=this.m)&&b.push("#",Lg(N,IK)),b.join("")};function la(b){return new tu(b)}function Mp(b,A,N){b.j=N?kg(A,!0):A,b.j&&(b.j=b.j.replace(/:$/,""))}function Rp(b,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);b.s=A}else b.s=null}function xS(b,A,N){A instanceof Dg?(b.i=A,xK(b.i,b.h)):(N||(A=Lg(A,SK)),b.i=new Dg(A,b.h))}function Yt(b,A,N){b.i.set(A,N)}function kp(b){return Yt(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function kg(b,A){return b?A?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function Lg(b,A,N){return typeof b=="string"?(b=encodeURI(b).replace(A,wK),N&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function wK(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var CS=/[#\/\?@]/g,_K=/[#\?:]/g,TK=/[#\?]/g,SK=/[#\?@]/g,IK=/#/g;function Dg(b,A){this.h=this.g=null,this.i=b||null,this.j=!!A}function El(b){b.g||(b.g=new Map,b.h=0,b.i&&vK(b.i,function(A,N){b.add(decodeURIComponent(A.replace(/\+/g," ")),N)}))}e=Dg.prototype,e.add=function(b,A){El(this),this.i=null,b=zd(this,b);var N=this.g.get(b);return N||this.g.set(b,N=[]),N.push(A),this.h+=1,this};function AS(b,A){El(b),A=zd(b,A),b.g.has(A)&&(b.i=null,b.h-=b.g.get(A).length,b.g.delete(A))}function MS(b,A){return El(b),A=zd(b,A),b.g.has(A)}e.forEach=function(b,A){El(this),this.g.forEach(function(N,B){N.forEach(function(K){b.call(A,K,B,this)},this)},this)},e.na=function(){El(this);const b=Array.from(this.g.values()),A=Array.from(this.g.keys()),N=[];for(let B=0;B<A.length;B++){const K=b[B];for(let J=0;J<K.length;J++)N.push(A[B])}return N},e.V=function(b){El(this);let A=[];if(typeof b=="string")MS(this,b)&&(A=A.concat(this.g.get(zd(this,b))));else{b=Array.from(this.g.values());for(let N=0;N<b.length;N++)A=A.concat(b[N])}return A},e.set=function(b,A){return El(this),this.i=null,b=zd(this,b),MS(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[A]),this.h+=1,this},e.get=function(b,A){return b?(b=this.V(b),0<b.length?String(b[0]):A):A};function RS(b,A,N){AS(b,A),0<N.length&&(b.i=null,b.g.set(zd(b,A),p(N)),b.h+=N.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],A=Array.from(this.g.keys());for(var N=0;N<A.length;N++){var B=A[N];const J=encodeURIComponent(String(B)),fe=this.V(B);for(B=0;B<fe.length;B++){var K=J;fe[B]!==""&&(K+="="+encodeURIComponent(String(fe[B]))),b.push(K)}}return this.i=b.join("&")};function zd(b,A){return A=String(A),b.j&&(A=A.toLowerCase()),A}function xK(b,A){A&&!b.j&&(El(b),b.i=null,b.g.forEach(function(N,B){var K=B.toLowerCase();B!=K&&(AS(this,B),RS(this,K,N))},b)),b.j=A}function CK(b,A){const N=new Mg;if(a.Image){const B=new Image;B.onload=h(vl,N,"TestLoadImage: loaded",!0,A,B),B.onerror=h(vl,N,"TestLoadImage: error",!1,A,B),B.onabort=h(vl,N,"TestLoadImage: abort",!1,A,B),B.ontimeout=h(vl,N,"TestLoadImage: timeout",!1,A,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=b}else A(!1)}function AK(b,A){const N=new Mg,B=new AbortController,K=setTimeout(()=>{B.abort(),vl(N,"TestPingServer: timeout",!1,A)},1e4);fetch(b,{signal:B.signal}).then(J=>{clearTimeout(K),J.ok?vl(N,"TestPingServer: ok",!0,A):vl(N,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(K),vl(N,"TestPingServer: error",!1,A)})}function vl(b,A,N,B,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),B(N)}catch{}}function MK(){this.g=new fK}function RK(b,A,N){const B=N||"";try{SS(b,function(K,J){let fe=K;c(K)&&(fe=Fy(K)),A.push(B+J+"="+encodeURIComponent(fe))})}catch(K){throw A.push(B+"type="+encodeURIComponent("_badmap")),K}}function Lp(b){this.l=b.Ub||null,this.j=b.eb||!1}m(Lp,By),Lp.prototype.g=function(){return new Dp(this.l,this.j)},Lp.prototype.i=function(b){return function(){return b}}({});function Dp(b,A){Mi.call(this),this.D=b,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Dp,Mi),e=Dp.prototype,e.open=function(b,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=A,this.readyState=1,Og(this)},e.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(A.body=b),(this.D||a).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ng(this)),this.readyState=0},e.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Og(this)),this.g&&(this.readyState=3,Og(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kS(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function kS(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}e.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var A=b.value?b.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!b.done}))&&(this.response=this.responseText+=A)}b.done?Ng(this):Og(this),this.readyState==3&&kS(this)}},e.Ra=function(b){this.g&&(this.response=this.responseText=b,Ng(this))},e.Qa=function(b){this.g&&(this.response=b,Ng(this))},e.ga=function(){this.g&&Ng(this)};function Ng(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Og(b)}e.setRequestHeader=function(b,A){this.u.append(b,A)},e.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],A=this.h.entries();for(var N=A.next();!N.done;)N=N.value,b.push(N[0]+": "+N[1]),N=A.next();return b.join(`\r
`)};function Og(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Dp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function LS(b){let A="";return M(b,function(N,B){A+=B,A+=":",A+=N,A+=`\r
`}),A}function Ky(b,A,N){e:{for(B in N){var B=!1;break e}B=!0}B||(N=LS(N),typeof b=="string"?N!=null&&encodeURIComponent(String(N)):Yt(b,A,N))}function gn(b){Mi.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(gn,Mi);var kK=/^https?$/i,LK=["POST","PUT"];e=gn.prototype,e.Ha=function(b){this.J=b},e.ea=function(b,A,N,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);A=A?A.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vy.g(),this.v=this.o?lS(this.o):lS(Vy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(b),!0),this.B=!1}catch(J){DS(this,J);return}if(b=N||"",N=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var K in B)N.set(K,B[K]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const J of B.keys())N.set(J,B.get(J));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(N.keys()).find(J=>J.toLowerCase()=="content-type"),K=a.FormData&&b instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LK,A,void 0))||B||K||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,fe]of N)this.g.setRequestHeader(J,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{PS(this),this.u=!0,this.g.send(b),this.u=!1}catch(J){DS(this,J)}};function DS(b,A){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=A,b.m=5,NS(b),Np(b)}function NS(b){b.A||(b.A=!0,Wi(b,"complete"),Wi(b,"error"))}e.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,Wi(this,"complete"),Wi(this,"abort"),Np(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Np(this,!0)),gn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?OS(this):this.bb())},e.bb=function(){OS(this)};function OS(b){if(b.h&&typeof o<"u"&&(!b.v[1]||ca(b)!=4||b.Z()!=2)){if(b.u&&ca(b)==4)rS(b.Ea,0,b);else if(Wi(b,"readystatechange"),ca(b)==4){b.h=!1;try{const fe=b.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var N;if(!(N=A)){var B;if(B=fe===0){var K=String(b.D).match(IS)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),B=!kK.test(K?K.toLowerCase():"")}N=B}if(N)Wi(b,"complete"),Wi(b,"success");else{b.m=6;try{var J=2<ca(b)?b.g.statusText:""}catch{J=""}b.l=J+" ["+b.Z()+"]",NS(b)}}finally{Np(b)}}}}function Np(b,A){if(b.g){PS(b);const N=b.g,B=b.v[0]?()=>{}:null;b.g=null,b.v=null,A||Wi(b,"ready");try{N.onreadystatechange=B}catch{}}}function PS(b){b.I&&(a.clearTimeout(b.I),b.I=null)}e.isActive=function(){return!!this.g};function ca(b){return b.g?b.g.readyState:0}e.Z=function(){try{return 2<ca(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(b){if(this.g){var A=this.g.responseText;return b&&A.indexOf(b)==0&&(A=A.substring(b.length)),dK(A)}};function FS(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function DK(b){const A={};b=(b.g&&2<=ca(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<b.length;B++){if(y(b[B]))continue;var N=R(b[B]);const K=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const J=A[K]||[];A[K]=J,J.push(N)}_(A,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pg(b,A,N){return N&&N.internalChannelParams&&N.internalChannelParams[b]||A}function BS(b){this.Aa=0,this.i=[],this.j=new Mg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pg("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pg("baseRetryDelayMs",5e3,b),this.cb=Pg("retryDelaySeedMs",1e4,b),this.Wa=Pg("forwardChannelMaxRetries",2,b),this.wa=Pg("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new ES(b&&b.concurrentRequestLimit),this.Da=new MK,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=BS.prototype,e.la=8,e.G=1,e.connect=function(b,A,N,B){Ki(0),this.W=b,this.H=A||{},N&&B!==void 0&&(this.H.OSID=N,this.H.OAID=B),this.F=this.X,this.I=WS(this,null,this.W),Pp(this)};function Zy(b){if(zS(b),b.G==3){var A=b.U++,N=la(b.I);if(Yt(N,"SID",b.K),Yt(N,"RID",A),Yt(N,"TYPE","terminate"),Fg(b,N),A=new yl(b,b.j,A),A.L=2,A.v=kp(la(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(A.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=A.v,N=!0),N||(A.g=KS(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Ap(A)}jS(b)}function Op(b){b.g&&(Qy(b),b.g.cancel(),b.g=null)}function zS(b){Op(b),b.u&&(a.clearTimeout(b.u),b.u=null),Fp(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&a.clearTimeout(b.s),b.s=null)}function Pp(b){if(!vS(b.h)&&!b.s){b.s=!0;var A=b.Ga;G||Z(),Y||(G(),Y=!0),X.add(A,b),b.B=0}}function NK(b,A){return wS(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=A.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Ag(f(b.Ga,b,A),YS(b,b.B)),b.B++,!0)}e.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const K=new yl(this,this.j,b);let J=this.o;if(this.S&&(J?(J=T(J),x(J,this.S)):J=this.S),this.m!==null||this.O||(K.H=J,J=null),this.P)e:{for(var A=0,N=0;N<this.i.length;N++){t:{var B=this.i[N];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(A+=B,4096<A){A=N;break e}if(A===4096||N===this.i.length-1){A=N+1;break e}}A=1e3}else A=1e3;A=VS(this,K,A),N=la(this.I),Yt(N,"RID",b),Yt(N,"CVER",22),this.D&&Yt(N,"X-HTTP-Session-Id",this.D),Fg(this,N),J&&(this.O?A="headers="+encodeURIComponent(String(LS(J)))+"&"+A:this.m&&Ky(N,this.m,J)),Wy(this.h,K),this.Ua&&Yt(N,"TYPE","init"),this.P?(Yt(N,"$req",A),Yt(N,"SID","null"),K.T=!0,Gy(K,N,null)):Gy(K,N,A),this.G=2}}else this.G==3&&(b?HS(this,b):this.i.length==0||vS(this.h)||HS(this))};function HS(b,A){var N;A?N=A.l:N=b.U++;const B=la(b.I);Yt(B,"SID",b.K),Yt(B,"RID",N),Yt(B,"AID",b.T),Fg(b,B),b.m&&b.o&&Ky(B,b.m,b.o),N=new yl(b,b.j,N,b.B+1),b.m===null&&(N.H=b.o),A&&(b.i=A.D.concat(b.i)),A=VS(b,N,1e3),N.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),Wy(b.h,N),Gy(N,B,A)}function Fg(b,A){b.H&&M(b.H,function(N,B){Yt(A,B,N)}),b.l&&SS({},function(N,B){Yt(A,B,N)})}function VS(b,A,N){N=Math.min(b.i.length,N);var B=b.l?f(b.l.Na,b.l,b):null;e:{var K=b.i;let J=-1;for(;;){const fe=["count="+N];J==-1?0<N?(J=K[0].g,fe.push("ofs="+J)):J=0:fe.push("ofs="+J);let Pt=!0;for(let Ui=0;Ui<N;Ui++){let Ut=K[Ui].g;const Ri=K[Ui].map;if(Ut-=J,0>Ut)J=Math.max(0,K[Ui].g-100),Pt=!1;else try{RK(Ri,fe,"req"+Ut+"_")}catch{B&&B(Ri)}}if(Pt){B=fe.join("&");break e}}}return b=b.i.splice(0,N),A.D=b,B}function $S(b){if(!b.g&&!b.u){b.Y=1;var A=b.Fa;G||Z(),Y||(G(),Y=!0),X.add(A,b),b.v=0}}function qy(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Ag(f(b.Fa,b),YS(b,b.v)),b.v++,!0)}e.Fa=function(){if(this.u=null,GS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Ag(f(this.ab,this),b)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ki(10),Op(this),GS(this))};function Qy(b){b.A!=null&&(a.clearTimeout(b.A),b.A=null)}function GS(b){b.g=new yl(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var A=la(b.qa);Yt(A,"RID","rpc"),Yt(A,"SID",b.K),Yt(A,"AID",b.T),Yt(A,"CI",b.F?"0":"1"),!b.F&&b.ja&&Yt(A,"TO",b.ja),Yt(A,"TYPE","xmlhttp"),Fg(b,A),b.m&&b.o&&Ky(A,b.m,b.o),b.L&&(b.g.I=b.L);var N=b.g;b=b.ia,N.L=1,N.v=kp(la(A)),N.m=null,N.P=!0,US(N,b)}e.Za=function(){this.C!=null&&(this.C=null,Op(this),qy(this),Ki(19))};function Fp(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function XS(b,A){var N=null;if(b.g==A){Fp(b),Qy(b),b.g=null;var B=2}else if(jy(b.h,A))N=A.D,_S(b.h,A),B=1;else return;if(b.G!=0){if(A.o)if(B==1){N=A.m?A.m.length:0,A=Date.now()-A.F;var K=b.B;B=Ip(),Wi(B,new hS(B,N)),Pp(b)}else $S(b);else if(K=A.s,K==3||K==0&&0<A.X||!(B==1&&NK(b,A)||B==2&&qy(b)))switch(N&&0<N.length&&(A=b.h,A.i=A.i.concat(N)),K){case 1:nu(b,5);break;case 4:nu(b,10);break;case 3:nu(b,6);break;default:nu(b,2)}}}function YS(b,A){let N=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(N*=2),N*A}function nu(b,A){if(b.j.info("Error code "+A),A==2){var N=f(b.fb,b),B=b.Xa;const K=!B;B=new tu(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mp(B,"https"),kp(B),K?CK(B.toString(),N):AK(B.toString(),N)}else Ki(2);b.G=0,b.l&&b.l.sa(A),jS(b),zS(b)}e.fb=function(b){b?(this.j.info("Successfully pinged google.com"),Ki(2)):(this.j.info("Failed to ping google.com"),Ki(1))};function jS(b){if(b.G=0,b.ka=[],b.l){const A=TS(b.h);(A.length!=0||b.i.length!=0)&&(U(b.ka,A),U(b.ka,b.i),b.h.i.length=0,p(b.i),b.i.length=0),b.l.ra()}}function WS(b,A,N){var B=N instanceof tu?la(N):new tu(N);if(B.g!="")A&&(B.g=A+"."+B.g),Rp(B,B.s);else{var K=a.location;B=K.protocol,A=A?A+"."+K.hostname:K.hostname,K=+K.port;var J=new tu(null);B&&Mp(J,B),A&&(J.g=A),K&&Rp(J,K),N&&(J.l=N),B=J}return N=b.D,A=b.ya,N&&A&&Yt(B,N,A),Yt(B,"VER",b.la),Fg(b,B),B}function KS(b,A,N){if(A&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=b.Ca&&!b.pa?new gn(new Lp({eb:N})):new gn(b.pa),A.Ha(b.J),A}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZS(){}e=ZS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Bp(){}Bp.prototype.g=function(b,A){return new xr(b,A)};function xr(b,A){Mi.call(this),this.g=new BS(A),this.l=b,this.h=A&&A.messageUrlParams||null,b=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(b?b["X-WebChannel-Content-Type"]=A.messageContentType:b={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(b?b["X-WebChannel-Client-Profile"]=A.va:b={"X-WebChannel-Client-Profile":A.va}),this.g.S=b,(b=A&&A.Sb)&&!y(b)&&(this.g.m=b),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!y(A)&&(this.g.D=A,b=this.h,b!==null&&A in b&&(b=this.h,A in b&&delete b[A])),this.j=new Hd(this)}m(xr,Mi),xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Zy(this.g)},xr.prototype.o=function(b){var A=this.g;if(typeof b=="string"){var N={};N.__data__=b,b=N}else this.u&&(N={},N.__data__=Fy(b),b=N);A.i.push(new bK(A.Ya++,b)),A.G==3&&Pp(A)},xr.prototype.N=function(){this.g.l=null,delete this.j,Zy(this.g),delete this.g,xr.aa.N.call(this)};function qS(b){zy.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var A=b.__sm__;if(A){e:{for(const N in A){b=N;break e}b=void 0}(this.i=b)&&(b=this.i,A=A!==null&&b in A?A[b]:void 0),this.data=A}else this.data=b}m(qS,zy);function QS(){Hy.call(this),this.status=1}m(QS,Hy);function Hd(b){this.g=b}m(Hd,ZS),Hd.prototype.ua=function(){Wi(this.g,"a")},Hd.prototype.ta=function(b){Wi(this.g,new qS(b))},Hd.prototype.sa=function(b){Wi(this.g,new QS)},Hd.prototype.ra=function(){Wi(this.g,"b")},Bp.prototype.createWebChannel=Bp.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,yj=function(){return new Bp},bj=function(){return Ip()},Uj=Jc,iv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xp.NO_ERROR=0,xp.TIMEOUT=8,xp.HTTP_ERROR=6,L2=xp,gS.COMPLETE="complete",pj=gS,cS.EventType=xg,xg.OPEN="a",xg.CLOSE="b",xg.ERROR="c",xg.MESSAGE="d",Mi.prototype.listen=Mi.prototype.K,P1=cS,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,mj=gn}).apply(typeof FU<"u"?FU:typeof self<"u"?self:typeof window<"u"?window:{});const mL="@firebase/firestore",pL="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new rj("@firebase/firestore");function df(){return bd.logLevel}function ye(e,...t){if(bd.logLevel<=lt.DEBUG){const n=t.map(pT);bd.debug(`Firestore (${wg}): ${e}`,...n)}}function fl(e,...t){if(bd.logLevel<=lt.ERROR){const n=t.map(pT);bd.error(`Firestore (${wg}): ${e}`,...n)}}function $h(e,...t){if(bd.logLevel<=lt.WARN){const n=t.map(pT);bd.warn(`Firestore (${wg}): ${e}`,...n)}}function pT(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e="Unexpected state"){const t=`FIRESTORE (${wg}) INTERNAL ASSERTION FAILED: `+e;throw fl(t),new Error(t)}function zt(e,t){e||Me()}function et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Dd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zwe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Fi.UNAUTHENTICATED))}shutdown(){}}class Hwe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vwe{constructor(t){this.t=t,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){zt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new wc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wc,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(zt(typeof i.accessToken=="string"),new Ej(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return zt(t===null||typeof t=="string"),new Fi(t)}}class $we{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Gwe{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new $we(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UL{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xwe{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,lj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){zt(this.o===void 0);const i=s=>{s.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new UL(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(zt(typeof n.token=="string"),this.R=n.token,new UL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ywe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Ywe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function ct(e,t){return e<t?-1:e>t?1:0}function Gh(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=-62135596800,yL=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*yL);return new gi(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<bL)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yL}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-bL;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(t){return new De(t)}static min(){return new De(new gi(0,0))}static max(){return new De(new gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="__name__";class Co{constructor(t,n,i){n===void 0?n=0:n>t.length&&Me(),i===void 0?i=t.length-n:i>t.length-n&&Me(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Co.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Co?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Co.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=Co.isNumericId(t),r=Co.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Co.extractNumericId(t).compare(Co.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vc.fromString(t.substring(4,t.length-2))}}class tn extends Co{construct(t,n,i){return new tn(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new tn(n)}static emptyPath(){return new tn([])}}const jwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Co{construct(t,n,i){return new Hi(t,n,i)}static isValidIdentifier(t){return jwe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EL}static keyField(){return new Hi([EL])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Hi(n)}static emptyPath(){return new Hi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.path=t}static fromPath(t){return new Re(tn.fromString(t))}static fromName(t){return new Re(tn.fromString(t).popFirst(5))}static empty(){return new Re(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&tn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return tn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Re(new tn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function Wwe(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=De.fromTimestamp(i===1e9?new gi(n+1,0):new gi(n,i));return new Fc(r,Re.empty(),t)}function Kwe(e){return new Fc(e.readTime,e.key,Sm)}class Fc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Fc(De.min(),Re.empty(),Sm)}static max(){return new Fc(De.max(),Re.empty(),Sm)}}function Zwe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Re.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qwe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qwe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(e){if(e.code!==ie.FAILED_PRECONDITION||e.message!==qwe)throw e;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ne((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.reject(n)}static resolve(t){return new ne((n,i)=>{n(t)})}static reject(t){return new ne((n,i)=>{i(t)})}static waitFor(t){return new ne((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=ne.resolve(!1);for(const i of t)n=n.next(r=>r?ne.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new ne((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new ne((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function Jwe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _g(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Ey.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9e=-1;function Ep(e){return e==null}function x6(e){return e===0&&1/e==-1/0}function t9e(e){return typeof e=="number"&&Number.isInteger(e)&&!x6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="";function n9e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vL(t)),t=i9e(e.get(n),t);return vL(t)}function i9e(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case wj:n+="";break;default:n+=s}}return n}function vL(e){return e+wj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _j(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){this.comparator=t,this.root=n||vi.EMPTY}insert(t,n){return new Cn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new BU(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new BU(this.root,t,this.comparator,!1)}getReverseIterator(){return new BU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new BU(this.root,t,this.comparator,!0)}}class BU{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vi{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??vi.RED,this.left=r??vi.EMPTY,this.right=s??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new vi(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return vi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const t=this.left.check();if(t!==this.right.check())throw Me();return t+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1;vi.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(t,n,i,r,s){return this}insert(t,n,i){return new vi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _L(this.data.getIterator())}getIteratorFrom(t){return new _L(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ei)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ei(this.comparator);return n.data=t,n}}class _L{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t){this.fields=t,t.sort(Hi.comparator)}static empty(){return new ys([])}unionWith(t){let n=new ei(Hi.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ys(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Gh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Tj("Invalid base64 string: "+s):s}}(t);return new Ci(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Ci(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const r9e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(e){if(zt(!!e),typeof e=="string"){let t=0;const n=r9e.exec(e);if(zt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tn(e.seconds),nanos:Tn(e.nanos)}}function Tn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function zc(e){return typeof e=="string"?Ci.fromBase64String(e):Ci.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="server_timestamp",Ij="__type__",xj="__previous_value__",Cj="__local_write_time__";function UT(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ij])===null||n===void 0?void 0:n.stringValue)===Sj}function vy(e){const t=e.mapValue.fields[xj];return UT(t)?vy(t):t}function Im(e){const t=Bc(e.mapValue.fields[Cj].timestampValue);return new gi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9e{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const C6="(default)";class xm{constructor(t,n){this.projectId=t,this.database=n||C6}static empty(){return new xm("","")}get isDefaultDatabase(){return this.database===C6}isEqual(t){return t instanceof xm&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="__type__",o9e="__max__",zU={mapValue:{}},Mj="__vector__",A6="value";function Hc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?UT(e)?4:l9e(e)?9007199254740991:a9e(e)?10:11:Me()}function ta(e,t){if(e===t)return!0;const n=Hc(e);if(n!==Hc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Im(e).isEqual(Im(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Bc(r.timestampValue),a=Bc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return zc(r.bytesValue).isEqual(zc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Tn(r.geoPointValue.latitude)===Tn(s.geoPointValue.latitude)&&Tn(r.geoPointValue.longitude)===Tn(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Tn(r.integerValue)===Tn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Tn(r.doubleValue),a=Tn(s.doubleValue);return o===a?x6(o)===x6(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Gh(e.arrayValue.values||[],t.arrayValue.values||[],ta);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(wL(o)!==wL(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ta(o[l],a[l])))return!1;return!0}(e,t);default:return Me()}}function Cm(e,t){return(e.values||[]).find(n=>ta(n,t))!==void 0}function Xh(e,t){if(e===t)return 0;const n=Hc(e),i=Hc(t);if(n!==i)return ct(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Tn(s.integerValue||s.doubleValue),l=Tn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return TL(e.timestampValue,t.timestampValue);case 4:return TL(Im(e),Im(t));case 5:return ct(e.stringValue,t.stringValue);case 6:return function(s,o){const a=zc(s),l=zc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ct(a[c],l[c]);if(u!==0)return u}return ct(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ct(Tn(s.latitude),Tn(o.latitude));return a!==0?a:ct(Tn(s.longitude),Tn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return SL(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[A6])===null||a===void 0?void 0:a.arrayValue,m=(l=f[A6])===null||l===void 0?void 0:l.arrayValue,p=ct(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:SL(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===zU.mapValue&&o===zU.mapValue)return 0;if(s===zU.mapValue)return 1;if(o===zU.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ct(l[d],u[d]);if(f!==0)return f;const h=Xh(a[l[d]],c[u[d]]);if(h!==0)return h}return ct(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Me()}}function TL(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Bc(e),i=Bc(t),r=ct(n.seconds,i.seconds);return r!==0?r:ct(n.nanos,i.nanos)}function SL(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Xh(n[r],i[r]);if(s)return s}return ct(n.length,i.length)}function Yh(e){return rv(e)}function rv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Bc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return zc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Re.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=rv(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${rv(n.fields[o])}`;return r+"}"}(e.mapValue):Me()}function D2(e){switch(Hc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=vy(e);return t?16+D2(t):16;case 5:return 2*e.stringValue.length;case 6:return zc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+D2(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Nd(i.fields,(s,o)=>{r+=s.length+D2(o)}),r}(e.mapValue);default:throw Me()}}function sv(e){return!!e&&"integerValue"in e}function bT(e){return!!e&&"arrayValue"in e}function IL(e){return!!e&&"nullValue"in e}function xL(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function c3(e){return!!e&&"mapValue"in e}function a9e(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Aj])===null||n===void 0?void 0:n.stringValue)===Mj}function w0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=w0(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=w0(e.arrayValue.values[n]);return t}return Object.assign({},e)}function l9e(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===o9e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.value=t}static empty(){return new gr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!c3(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=w0(n)}setAll(t){let n=Hi.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=w0(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());c3(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ta(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];c3(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Nd(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new gr(w0(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ui(t,0,De.min(),De.min(),De.min(),gr.empty(),0)}static newFoundDocument(t,n,i,r){return new ui(t,1,n,De.min(),i,r,0)}static newNoDocument(t,n){return new ui(t,2,n,De.min(),De.min(),gr.empty(),0)}static newUnknownDocument(t,n){return new ui(t,3,n,De.min(),De.min(),gr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(t,n){this.position=t,this.inclusive=n}}function CL(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=Re.comparator(Re.fromName(o.referenceValue),n.key):i=Xh(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function AL(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ta(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(t,n="asc"){this.field=t,this.dir=n}}function c9e(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{}class Jn extends Rj{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new d9e(t,n,i):n==="array-contains"?new g9e(t,i):n==="in"?new m9e(t,i):n==="not-in"?new p9e(t,i):n==="array-contains-any"?new U9e(t,i):new Jn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new f9e(t,i):new h9e(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xh(n,this.value)):n!==null&&Hc(this.value)===Hc(n)&&this.matchesComparison(Xh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends Rj{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new na(t,n)}matches(t){return kj(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function kj(e){return e.op==="and"}function Lj(e){return u9e(e)&&kj(e)}function u9e(e){for(const t of e.filters)if(t instanceof na)return!1;return!0}function ov(e){if(e instanceof Jn)return e.field.canonicalString()+e.op.toString()+Yh(e.value);if(Lj(e))return e.filters.map(t=>ov(t)).join(",");{const t=e.filters.map(n=>ov(n)).join(",");return`${e.op}(${t})`}}function Dj(e,t){return e instanceof Jn?function(i,r){return r instanceof Jn&&i.op===r.op&&i.field.isEqual(r.field)&&ta(i.value,r.value)}(e,t):e instanceof na?function(i,r){return r instanceof na&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Dj(o,r.filters[a]),!0):!1}(e,t):void Me()}function Nj(e){return e instanceof Jn?function(n){return`${n.field.canonicalString()} ${n.op} ${Yh(n.value)}`}(e):e instanceof na?function(n){return n.op.toString()+" {"+n.getFilters().map(Nj).join(" ,")+"}"}(e):"Filter"}class d9e extends Jn{constructor(t,n,i){super(t,n,i),this.key=Re.fromName(i.referenceValue)}matches(t){const n=Re.comparator(t.key,this.key);return this.matchesComparison(n)}}class f9e extends Jn{constructor(t,n){super(t,"in",n),this.keys=Oj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class h9e extends Jn{constructor(t,n){super(t,"not-in",n),this.keys=Oj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Oj(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Re.fromName(i.referenceValue))}class g9e extends Jn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bT(n)&&Cm(n.arrayValue,this.value)}}class m9e extends Jn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Cm(this.value.arrayValue,n)}}class p9e extends Jn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Cm(this.value.arrayValue,n)}}class U9e extends Jn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Cm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9e{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function ML(e,t=null,n=[],i=[],r=null,s=null,o=null){return new b9e(e,t,n,i,r,s,o)}function yT(e){const t=et(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>ov(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ep(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Yh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Yh(i)).join(",")),t.le=n}return t.le}function ET(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!c9e(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Dj(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!AL(e.startAt,t.startAt)&&AL(e.endAt,t.endAt)}function av(e){return Re.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function y9e(e,t,n,i,r,s,o,a){return new wy(e,t,n,i,r,s,o,a)}function vT(e){return new wy(e)}function RL(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function E9e(e){return e.collectionGroup!==null}function _0(e){const t=et(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ei(Hi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new R6(s,i))}),n.has(Hi.keyField().canonicalString())||t.he.push(new R6(Hi.keyField(),i))}return t.he}function Vo(e){const t=et(e);return t.Pe||(t.Pe=v9e(t,_0(e))),t.Pe}function v9e(e,t){if(e.limitType==="F")return ML(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new R6(r.field,s)});const n=e.endAt?new M6(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new M6(e.startAt.position,e.startAt.inclusive):null;return ML(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function lv(e,t,n){return new wy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _y(e,t){return ET(Vo(e),Vo(t))&&e.limitType===t.limitType}function Pj(e){return`${yT(Vo(e))}|lt:${e.limitType}`}function ff(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Nj(r)).join(", ")}]`),Ep(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Yh(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Yh(r)).join(",")),`Target(${i})`}(Vo(e))}; limitType=${e.limitType})`}function Ty(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Re.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of _0(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=CL(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,_0(i),r)||i.endAt&&!function(o,a,l){const c=CL(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,_0(i),r))}(e,t)}function w9e(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fj(e){return(t,n)=>{let i=!1;for(const r of _0(e)){const s=_9e(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function _9e(e,t,n){const i=e.field.isKeyField()?Re.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Xh(l,c):Me()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Nd(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return _j(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9e=new Cn(Re.comparator);function Vc(){return T9e}const Bj=new Cn(Re.comparator);function F1(...e){let t=Bj;for(const n of e)t=t.insert(n.key,n);return t}function S9e(e){let t=Bj;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Mu(){return T0()}function zj(){return T0()}function T0(){return new Od(e=>e.toString(),(e,t)=>e.isEqual(t))}const I9e=new ei(Re.comparator);function pt(...e){let t=I9e;for(const n of e)t=t.add(n);return t}const x9e=new ei(ct);function C9e(){return x9e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:x6(t)?"-0":t}}function Hj(e){return{integerValue:""+e}}function A9e(e,t){return t9e(t)?Hj(t):wT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this._=void 0}}function M9e(e,t,n){return e instanceof k6?function(r,s){const o={fields:{[Ij]:{stringValue:Sj},[Cj]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&UT(s)&&(s=vy(s)),s&&(o.fields[xj]=s),{mapValue:o}}(n,t):e instanceof Am?Vj(e,t):e instanceof Mm?$j(e,t):function(r,s){const o=k9e(r,s),a=kL(o)+kL(r.Ie);return sv(o)&&sv(r.Ie)?Hj(a):wT(r.serializer,a)}(e,t)}function R9e(e,t,n){return e instanceof Am?Vj(e,t):e instanceof Mm?$j(e,t):n}function k9e(e,t){return e instanceof L6?function(i){return sv(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class k6 extends Sy{}class Am extends Sy{constructor(t){super(),this.elements=t}}function Vj(e,t){const n=Gj(t);for(const i of e.elements)n.some(r=>ta(r,i))||n.push(i);return{arrayValue:{values:n}}}class Mm extends Sy{constructor(t){super(),this.elements=t}}function $j(e,t){let n=Gj(t);for(const i of e.elements)n=n.filter(r=>!ta(r,i));return{arrayValue:{values:n}}}class L6 extends Sy{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function kL(e){return Tn(e.integerValue||e.doubleValue)}function Gj(e){return bT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function L9e(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Am&&r instanceof Am||i instanceof Mm&&r instanceof Mm?Gh(i.elements,r.elements,ta):i instanceof L6&&r instanceof L6?ta(i.Ie,r.Ie):i instanceof k6&&r instanceof k6}(e.transform,t.transform)}class gs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new gs}static exists(t){return new gs(void 0,t)}static updateTime(t){return new gs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function N2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Iy{}function Xj(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new _T(e.key,gs.none()):new vp(e.key,e.data,gs.none());{const n=e.data,i=gr.empty();let r=new ei(Hi.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Pd(e.key,i,new ys(r.toArray()),gs.none())}}function D9e(e,t,n){e instanceof vp?function(r,s,o){const a=r.value.clone(),l=DL(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Pd?function(r,s,o){if(!N2(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=DL(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Yj(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function S0(e,t,n,i){return e instanceof vp?function(s,o,a,l){if(!N2(s.precondition,o))return a;const c=s.value.clone(),u=NL(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Pd?function(s,o,a,l){if(!N2(s.precondition,o))return a;const c=NL(s.fieldTransforms,l,o),u=o.data;return u.setAll(Yj(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return N2(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function LL(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Gh(i,r,(s,o)=>L9e(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vp extends Iy{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pd extends Iy{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Yj(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function DL(e,t,n){const i=new Map;zt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,R9e(o,a,n[r]))}return i}function NL(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,M9e(s,o,t))}return i}class _T extends Iy{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jj extends Iy{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9e{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&D9e(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=S0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=S0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=zj();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=Xj(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pt())}isEqual(t){return this.batchId===t.batchId&&Gh(this.mutations,t.mutations,(n,i)=>LL(n,i))&&Gh(this.baseMutations,t.baseMutations,(n,i)=>LL(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9e{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9e{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn,at;function F9e(e){switch(e){case ie.OK:return Me();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Me()}}function Wj(e){if(e===void 0)return fl("GRPC error has no .code"),ie.UNKNOWN;switch(e){case kn.OK:return ie.OK;case kn.CANCELLED:return ie.CANCELLED;case kn.UNKNOWN:return ie.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ie.INTERNAL;case kn.UNAVAILABLE:return ie.UNAVAILABLE;case kn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case kn.NOT_FOUND:return ie.NOT_FOUND;case kn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case kn.ABORTED:return ie.ABORTED;case kn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case kn.DATA_LOSS:return ie.DATA_LOSS;default:return Me()}}(at=kn||(kn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9e=new vc([4294967295,4294967295],0);function OL(e){const t=B9e().encode(e),n=new gj;return n.update(t),new Uint8Array(n.digest())}function PL(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new vc([n,i],0),new vc([r,s],0)]}class TT{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new B1(`Invalid padding: ${n}`);if(i<0)throw new B1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new B1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new B1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=vc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(vc.fromNumber(i)));return r.compare(z9e)===1&&(r=new vc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=OL(t),[i,r]=PL(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new TT(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=OL(t),[i,r]=PL(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class B1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,wp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new xy(De.min(),r,new Cn(ct),Vc(),pt())}}class wp{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new wp(i,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class Kj{constructor(t,n){this.targetId=t,this.ge=n}}class Zj{constructor(t,n,i=Ci.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class FL{constructor(){this.pe=0,this.ye=BL(),this.we=Ci.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=pt(),n=pt(),i=pt();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Me()}}),new wp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=BL()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,zt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class H9e{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Vc(),this.$e=HU(),this.Ke=HU(),this.Ue=new Cn(ct)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Me()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(av(s))if(i===0){const o=new Re(s.path);this.ze(n,o,ui.newNoDocument(o,De.min()))}else zt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=zc(i).toUint8Array()}catch(l){if(l instanceof Tj)return $h("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TT(o,r,s)}catch(l){return $h(l instanceof B1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&av(a.target)){const l=new Re(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,ui.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=pt();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new xy(t,n,this.Ue,this.Qe,i);return this.Qe=Vc(),this.$e=HU(),this.Ke=HU(),this.Ue=new Cn(ct),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new FL,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new ei(ct),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new ei(ct),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new FL),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function HU(){return new Cn(Re.comparator)}function BL(){return new Cn(Re.comparator)}const V9e={asc:"ASCENDING",desc:"DESCENDING"},$9e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G9e={and:"AND",or:"OR"};class X9e{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function cv(e,t){return e.useProto3Json||Ep(t)?t:{value:t}}function D6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qj(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Y9e(e,t){return D6(e,t.toTimestamp())}function Ka(e){return zt(!!e),De.fromTimestamp(function(n){const i=Bc(n);return new gi(i.seconds,i.nanos)}(e))}function ST(e,t){return uv(e,t).canonicalString()}function uv(e,t){const n=function(r){return new tn(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Qj(e){const t=tn.fromString(e);return zt(iW(t)),t}function N6(e,t){return ST(e.databaseId,t.path)}function I0(e,t){const n=Qj(t);if(n.get(1)!==e.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Re(eW(n))}function Jj(e,t){return ST(e.databaseId,t)}function j9e(e){const t=Qj(e);return t.length===4?tn.emptyPath():eW(t)}function zL(e){return new tn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eW(e){return zt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function HL(e,t,n){return{name:N6(e,t),fields:n.value.mapValue.fields}}function W9e(e,t){return"found"in t?function(i,r){zt(!!r.found),r.found.name,r.found.updateTime;const s=I0(i,r.found.name),o=Ka(r.found.updateTime),a=r.found.createTime?Ka(r.found.createTime):De.min(),l=new gr({mapValue:{fields:r.found.fields}});return ui.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){zt(!!r.missing),zt(!!r.readTime);const s=I0(i,r.missing),o=Ka(r.readTime);return ui.newNoDocument(s,o)}(e,t):Me()}function K9e(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Me()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(zt(u===void 0||typeof u=="string"),Ci.fromBase64String(u||"")):(zt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ci.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?ie.UNKNOWN:Wj(c.code);return new Se(u,c.message||"")}(o);n=new Zj(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=I0(e,i.document.name),s=Ka(i.document.updateTime),o=i.document.createTime?Ka(i.document.createTime):De.min(),a=new gr({mapValue:{fields:i.document.fields}}),l=ui.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new O2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=I0(e,i.document),s=i.readTime?Ka(i.readTime):De.min(),o=ui.newNoDocument(r,s),a=i.removedTargetIds||[];n=new O2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=I0(e,i.document),s=i.removedTargetIds||[];n=new O2([],s,r,null)}else{if(!("filter"in t))return Me();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new P9e(r,s),a=i.targetId;n=new Kj(a,o)}}return n}function Z9e(e,t){let n;if(t instanceof vp)n={update:HL(e,t.key,t.value)};else if(t instanceof _T)n={delete:N6(e,t.key)};else if(t instanceof Pd)n={update:HL(e,t.key,t.data),updateMask:r_e(t.fieldMask)};else{if(!(t instanceof jj))return Me();n={verify:N6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof k6)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Am)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof L6)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Me()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Y9e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Me()}(e,t.precondition)),n}function q9e(e,t){return{documents:[Jj(e,t.path)]}}function Q9e(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Jj(e,r);const s=function(c){if(c.length!==0)return nW(na.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:hf(f.field),direction:t_e(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cv(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function J9e(e){let t=j9e(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){zt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=tW(d);return f instanceof na&&Lj(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new R6(gf(m.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ep(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new M6(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new M6(h,f)}(n.endAt)),y9e(t,r,o,s,a,"F",l,c)}function e_e(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function tW(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=gf(n.unaryFilter.field);return Jn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=gf(n.unaryFilter.field);return Jn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gf(n.unaryFilter.field);return Jn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gf(n.unaryFilter.field);return Jn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(e):e.fieldFilter!==void 0?function(n){return Jn.create(gf(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return na.create(n.compositeFilter.filters.map(i=>tW(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}}(n.compositeFilter.op))}(e):Me()}function t_e(e){return V9e[e]}function n_e(e){return $9e[e]}function i_e(e){return G9e[e]}function hf(e){return{fieldPath:e.canonicalString()}}function gf(e){return Hi.fromServerFormat(e.fieldPath)}function nW(e){return e instanceof Jn?function(n){if(n.op==="=="){if(xL(n.value))return{unaryFilter:{field:hf(n.field),op:"IS_NAN"}};if(IL(n.value))return{unaryFilter:{field:hf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xL(n.value))return{unaryFilter:{field:hf(n.field),op:"IS_NOT_NAN"}};if(IL(n.value))return{unaryFilter:{field:hf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hf(n.field),op:n_e(n.op),value:n.value}}}(e):e instanceof na?function(n){const i=n.getFilters().map(r=>nW(r));return i.length===1?i[0]:{compositeFilter:{op:i_e(n.op),filters:i}}}(e):Me()}function r_e(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function iW(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,n,i,r,s=De.min(),o=De.min(),a=Ci.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new nc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_e{constructor(t){this.Tt=t}}function o_e(e){const t=J9e({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?lv(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_e{constructor(){this.Tn=new l_e}addToCollectionParentIndex(t,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(t,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ne.resolve()}deleteFieldIndex(t,n){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,n){return ne.resolve()}getDocumentsMatchingTarget(t,n){return ne.resolve(null)}getIndexType(t,n){return ne.resolve(0)}getFieldIndexes(t,n){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,n){return ne.resolve(Fc.min())}getMinOffsetFromCollectionGroup(t,n){return ne.resolve(Fc.min())}updateCollectionGroup(t,n,i){return ne.resolve()}updateIndexEntries(t,n){return ne.resolve()}}class l_e{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ei(tn.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ei(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rW=41943040;class hr{static withCacheSize(t){return new hr(t,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(rW,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new jh(0)}static Un(){return new jh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="LruGarbageCollector",c_e=1048576;function GL([e,t],[n,i]){const r=ct(e,n);return r===0?ct(t,i):r}class u_e{constructor(t){this.Hn=t,this.buffer=new ei(GL),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();GL(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d_e{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){ye($L,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_g(n)?ye($L,"Ignoring IndexedDB error during garbage collection: ",n):await yy(n)}await this.er(3e5)})}}class f_e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ne.resolve(Ey.ae);const i=new u_e(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(VL)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VL):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),df()<=lt.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function h_e(e,t){return new f_e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(){this.changes=new Od(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ui.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_e{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&S0(i.mutation,r,ys.empty(),gi.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,pt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=pt()){const r=Mu();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=F1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Mu();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,pt()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Vc();const o=T0(),a=function(){return T0()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Pd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),S0(u.mutation,c,u.mutation.getFieldMask(),gi.now())):o.set(c.key,ys.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new m_e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=T0();let r=new Cn((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||ys.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||pt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=zj();u.forEach(f=>{if(!s.has(f)){const h=Xj(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ne.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):E9e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):ne.resolve(Mu());let a=Sm,l=s;return o.next(c=>ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,pt())).next(u=>({batchId:a,changes:S9e(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Re(n)).next(i=>{let r=F1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=F1();return this.indexManager.getCollectionParents(t,s).next(a=>ne.forEach(a,l=>{const c=function(d,f){return new wy(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ui.newInvalidDocument(u)))});let a=F1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&S0(u.mutation,c,ys.empty(),gi.now()),Ty(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ka(r.createTime)}}(n)),ne.resolve()}getNamedQuery(t,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:o_e(r.bundledQuery),readTime:Ka(r.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_e{constructor(){this.overlays=new Cn(Re.comparator),this.Rr=new Map}getOverlay(t,n){return ne.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Mu();return ne.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),ne.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(t,n,i){const r=Mu(),s=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ne.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Cn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Mu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Mu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ne.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new O9e(n,i));let s=this.Rr.get(n);s===void 0&&(s=pt(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_e{constructor(){this.sessionToken=Ci.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Vr=new ei(ai.mr),this.gr=new ei(ai.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new ai(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new ai(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Re(new tn([])),i=new ai(n,t),r=new ai(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Re(new tn([])),i=new ai(n,t),r=new ai(n,t+1);let s=pt();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ai(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ai{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Re.comparator(t.key,n.key)||ct(t.Cr,n.Cr)}static pr(t,n){return ct(t.Cr,n.Cr)||Re.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ei(ai.mr)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N9e(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ai(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(t,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?e9e:this.Fr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ai(n,0),r=new ai(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ei(ct);return n.forEach(r=>{const s=new ai(r,0),o=new ai(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Re.isDocumentKey(s)||(s=s.child(""));const o=new ai(new Re(s),0);let a=new ei(ct);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),ne.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){zt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(n.mutations,r=>{const s=new ai(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new ai(n,0),r=this.Mr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_e{constructor(t){this.kr=t,this.docs=function(){return new Cn(Re.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():ui.newInvalidDocument(n))}getEntries(t,n){let i=Vc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ui.newInvalidDocument(r))}),ne.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Vc();const o=n.path,a=new Re(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Zwe(Kwe(u),i)<=0||(r.has(u.key)||Ty(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Me()}qr(t,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new w_e(this)}getSize(t){return ne.resolve(this.size)}}class w_e extends g_e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),ne.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __e{constructor(t){this.persistence=t,this.Qr=new Od(n=>yT(n),ET),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new IT,this.targetCount=0,this.Ur=jh.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ne.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new jh(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(t,n){return this.zn(n),ne.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ne.waitFor(s).next(()=>r)}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ne.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ne.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ne.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ne.resolve(i)}containsKey(t,n){return ne.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new Ey(0),this.zr=!1,this.zr=!0,this.jr=new y_e,this.referenceDelegate=t(this),this.Hr=new __e(this),this.indexManager=new a_e,this.remoteDocumentCache=function(r){return new v_e(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new s_e(n),this.Yr=new U_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new b_e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new E_e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){ye("MemoryPersistence","Starting transaction:",t);const r=new T_e(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class T_e extends Qwe{constructor(t){super(),this.currentSequenceNumber=t}}class xT{constructor(t){this.persistence=t,this.ti=new IT,this.ni=null}static ri(t){return new xT(t)}get ii(){if(this.ni)return this.ni;throw Me()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ne.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const r=Re.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,De.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class O6{constructor(t,n){this.persistence=t,this.oi=new Od(i=>n9e(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=h_e(this,n)}static ri(t,n){return new O6(t,n)}Zr(){}Xr(t){return ne.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ne.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?ne.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,De.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=D2(t.data.value)),n}ar(t,n,i){return ne.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return ne.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=pt(),r=pt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new CT(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Tve()?8:Jwe(wve())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new S_e;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(df()<=lt.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ff(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(df()<=lt.DEBUG&&ye("QueryEngine","Query:",ff(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(df()<=lt.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ff(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vo(n))):ne.resolve())}rs(t,n){if(RL(n))return ne.resolve(null);let i=Vo(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=lv(n,null,"F"),i=Vo(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=pt(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,lv(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return RL(n)||r.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?ne.resolve(null):(df()<=lt.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ff(n)),this.hs(t,o,n,Wwe(r,Sm)).next(a=>a))})}cs(t,n){let i=new ei(Fj(t));return n.forEach((r,s)=>{Ty(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return df()<=lt.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ff(n)),this.ns.getDocumentsMatchingQuery(t,n,Fc.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="LocalStore",x_e=3e8;class C_e{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new Cn(ct),this.Is=new Od(s=>yT(s),ET),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new p_e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function A_e(e,t,n,i){return new C_e(e,t,n,i)}async function oW(e,t){const n=et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=pt();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function aW(e){const t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function M_e(e,t){const n=et(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Ci.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,U,E){return p.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=x_e?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Vc(),c=pt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(R_e(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(De.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function R_e(e,t,n){let i=pt(),r=pt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Vc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ye(AT,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function k_e(e,t){const n=et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,ne.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new nc(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function dv(e,t,n){const i=et(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!_g(o))throw o;ye(AT,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function XL(e,t,n){const i=et(e);let r=De.min(),s=pt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=et(l),f=d.Is.get(u);return f!==void 0?ne.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Vo(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:De.min(),n?s:pt())).next(a=>(L_e(i,w9e(t),a),{documents:a,gs:s})))}function L_e(e,t,n){let i=e.Es.get(t)||De.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class YL{constructor(){this.activeTargetIds=C9e()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class D_e{constructor(){this.ho=new YL,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new YL,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="ConnectivityMonitor";class WL{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ye(jL,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){ye(jL,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VU=null;function fv(){return VU===null?VU=function(){return 268435456+Math.round(2147483648*Math.random())}():VU++,"0x"+VU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="RestConnection",O_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P_e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===C6?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=fv(),a=this.bo(t,n.toUriEncodedString());ye(u3,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(ye(u3,`Received RPC '${t}' ${o}: `,c),c),c=>{throw $h(u3,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=O_e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="WebChannelConnection";class B_e extends P_e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=fv();return new Promise((o,a)=>{const l=new mj;l.setWithCredentials(!0),l.listenOnce(pj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case L2.NO_ERROR:const u=l.getResponseJson();ye(Di,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case L2.TIMEOUT:ye(Di,`RPC '${t}' ${s} timed out`),a(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case L2.HTTP_ERROR:const d=l.getStatus();if(ye(Di,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(U){const E=U.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(E)>=0?E:ie.UNKNOWN}(h.status);a(new Se(m,h.message))}else a(new Se(ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{ye(Di,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);ye(Di,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=fv(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=yj(),a=bj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");ye(Di,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new F_e({Fo:U=>{h?ye(Di,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(f||(ye(Di,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),ye(Di,`RPC '${t}' stream ${r} sending:`,U),d.send(U))},Mo:()=>d.close()}),p=(U,E,y)=>{U.listen(E,v=>{try{y(v)}catch(w){setTimeout(()=>{throw w},0)}})};return p(d,P1.EventType.OPEN,()=>{h||(ye(Di,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,P1.EventType.CLOSE,()=>{h||(h=!0,ye(Di,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,P1.EventType.ERROR,U=>{h||(h=!0,$h(Di,`RPC '${t}' stream ${r} transport errored:`,U),m.Ko(new Se(ie.UNAVAILABLE,"The operation could not be completed")))}),p(d,P1.EventType.MESSAGE,U=>{var E;if(!h){const y=U.data[0];zt(!!y);const v=y,w=(v==null?void 0:v.error)||((E=v[0])===null||E===void 0?void 0:E.error);if(w){ye(Di,`RPC '${t}' stream ${r} received error:`,w);const S=w.status;let M=function(C){const x=kn[C];if(x!==void 0)return Wj(x)}(S),_=w.message;M===void 0&&(M=ie.INTERNAL,_="Unknown error status: "+S+" with message "+w.message),h=!0,m.Ko(new Se(M,_)),d.close()}else ye(Di,`RPC '${t}' stream ${r} received:`,y),m.Uo(y)}}),p(a,Uj.STAT_EVENT,U=>{U.stat===iv.PROXY?ye(Di,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===iv.NOPROXY&&ye(Di,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function d3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(e){return new X9e(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="PersistentStream";class z_e{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new MT(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(fl(n.toString()),fl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new Se(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return ye(KL,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(ye(KL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H_e extends z_e{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=K9e(this.serializer,t),i=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Ka(o.readTime):De.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=zL(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=av(l)?{documents:q9e(s,l)}:{query:Q9e(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qj(s,o.resumeToken);const c=cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=D6(s,o.snapshotVersion.toTimestamp());const c=cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=e_e(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=zL(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_e{}class $_e extends V_e{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,uv(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Se(ie.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,uv(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class G_e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fl(n),this.N_=!1):ye("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RemoteStore";class X_e{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{Tp(this)&&(ye(Wh,"Restarting streams for network reachability change."),await async function(l){const c=et(l);c.W_.add(4),await _p(c),c.j_.set("Unknown"),c.W_.delete(4),await Ay(c)}(this))})}),this.j_=new G_e(i,r)}}async function Ay(e){if(Tp(e))for(const t of e.G_)await t(!0)}async function _p(e){for(const t of e.G_)await t(!1)}function lW(e,t){const n=et(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),DT(n)?LT(n):Tg(n).c_()&&kT(n,t))}function RT(e,t){const n=et(e),i=Tg(n);n.U_.delete(t),i.c_()&&cW(n,t),n.U_.size===0&&(i.c_()?i.P_():Tp(n)&&n.j_.set("Unknown"))}function kT(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(De.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tg(e).y_(t)}function cW(e,t){e.H_.Ne(t),Tg(e).w_(t)}function LT(e){e.H_=new H9e({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Tg(e).start(),e.j_.B_()}function DT(e){return Tp(e)&&!Tg(e).u_()&&e.U_.size>0}function Tp(e){return et(e).W_.size===0}function uW(e){e.H_=void 0}async function Y_e(e){e.j_.set("Online")}async function j_e(e){e.U_.forEach((t,n)=>{kT(e,t)})}async function W_e(e,t){uW(e),DT(e)?(e.j_.q_(t),LT(e)):e.j_.set("Unknown")}async function K_e(e,t,n){if(e.j_.set("Online"),t instanceof Zj&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){ye(Wh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ZL(e,i)}else if(t instanceof O2?e.H_.We(t):t instanceof Kj?e.H_.Ze(t):e.H_.je(t),!n.isEqual(De.min()))try{const i=await aW(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Ci.EMPTY_BYTE_STRING,u.snapshotVersion)),cW(s,l);const d=new nc(u.target,l,c,u.sequenceNumber);kT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){ye(Wh,"Failed to raise snapshot:",i),await ZL(e,i)}}async function ZL(e,t,n){if(!_g(t))throw t;e.W_.add(1),await _p(e),e.j_.set("Offline"),n||(n=()=>aW(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ye(Wh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Ay(e)})}async function qL(e,t){const n=et(e);n.asyncQueue.verifyOperationInProgress(),ye(Wh,"RemoteStore received new credentials");const i=Tp(n);n.W_.add(3),await _p(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Ay(n)}async function Z_e(e,t){const n=et(e);t?(n.W_.delete(2),await Ay(n)):t||(n.W_.add(2),await _p(n),n.j_.set("Unknown"))}function Tg(e){return e.J_||(e.J_=function(n,i,r){const s=et(n);return s.M_(),new H_e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:Y_e.bind(null,e),No:j_e.bind(null,e),Lo:W_e.bind(null,e),p_:K_e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),DT(e)?LT(e):e.j_.set("Unknown")):(await e.J_.stop(),uW(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new wc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new NT(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dW(e,t){if(fl("AsyncQueue",`${t}: ${e}`),_g(e))return new Se(ie.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{static emptySet(t){return new ah(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Re.comparator(n.key,i.key):(n,i)=>Re.comparator(n.key,i.key),this.keyedMap=F1(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ah)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new ah;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.Z_=new Cn(Re.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Me():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Kh{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Kh(t,n,ah.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_y(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class Q_e{constructor(){this.queries=JL(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=et(n),s=r.queries;r.queries=JL(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function JL(){return new Od(e=>Pj(e),_y)}async function J_e(e,t){const n=et(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new q_e,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=dW(o,`Initialization of query '${ff(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&OT(n)}async function eTe(e,t){const n=et(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tTe(e,t){const n=et(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&OT(n)}function nTe(e,t,n){const i=et(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function OT(e){e.ia.forEach(t=>{t.next()})}var hv,eD;(eD=hv||(hv={}))._a="default",eD.Cache="cache";class iTe{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Kh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Kh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==hv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(t){this.key=t}}class hW{constructor(t){this.key=t}}class rTe{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=pt(),this.mutatedKeys=pt(),this.ya=Fj(t),this.wa=new ah(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new QL,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=Ty(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let U=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),U=!0):this.va(f,h)||(i.track({type:2,doc:h}),U=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),U=!0):f&&!h&&(i.track({type:1,doc:f}),U=!0,(l||c)&&(a=!0)),U&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Kh(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new QL,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=pt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new hW(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new fW(i))}),n}Oa(t){this.fa=t.gs,this.pa=pt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Kh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const PT="SyncEngine";class sTe{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class oTe{constructor(t){this.key=t,this.Ba=!1}}class aTe{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Od(a=>Pj(a),_y),this.qa=new Map,this.Qa=new Set,this.$a=new Cn(Re.comparator),this.Ka=new Map,this.Ua=new IT,this.Wa={},this.Ga=new Map,this.za=jh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lTe(e,t,n=!0){const i=bW(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await gW(i,t,n,!0),r}async function cTe(e,t){const n=bW(e);await gW(n,t,!0,!1)}async function gW(e,t,n,i){const r=await k_e(e.localStore,Vo(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await uTe(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&lW(e.remoteStore,r),a}async function uTe(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,U,E,y){let v=U.view.ba(E);v.ls&&(v=await XL(p.localStore,U.query,!1).then(({documents:_})=>U.view.ba(_,v)));const w=y&&y.targetChanges.get(U.targetId),S=y&&y.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(v,p.isPrimaryClient,w,S);return nD(p,U.targetId,M.Ma),M.snapshot}(e,d,f,h);const s=await XL(e.localStore,t,!0),o=new rTe(t,s.gs),a=o.ba(s.documents),l=wp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);nD(e,n,c.Ma);const u=new sTe(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function dTe(e,t,n){const i=et(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!_y(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await dv(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&RT(i.remoteStore,r.targetId),gv(i,r.targetId)}).catch(yy)):(gv(i,r.targetId),await dv(i.localStore,r.targetId,!0))}async function fTe(e,t){const n=et(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),RT(n.remoteStore,i.targetId))}async function mW(e,t){const n=et(e);try{const i=await M_e(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(zt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?zt(o.Ba):r.removedDocuments.size>0&&(zt(o.Ba),o.Ba=!1))}),await UW(n,i,t)}catch(i){await yy(i)}}function tD(e,t,n){const i=et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=et(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&OT(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function hTe(e,t,n){const i=et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new Cn(Re.comparator);o=o.insert(s,ui.newNoDocument(s,De.min()));const a=pt().add(s),l=new xy(De.min(),new Map,new Cn(ct),o,a);await mW(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),FT(i)}else await dv(i.localStore,t,!1).then(()=>gv(i,t,n)).catch(yy)}function gv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||pW(e,i)})}function pW(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(RT(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),FT(e))}function nD(e,t,n){for(const i of n)i instanceof fW?(e.Ua.addReference(i.key,t),gTe(e,i)):i instanceof hW?(ye(PT,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||pW(e,i.key)):Me()}function gTe(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(ye(PT,"New document in limbo: "+n),e.Qa.add(i),FT(e))}function FT(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Re(tn.fromString(t)),i=e.za.next();e.Ka.set(i,new oTe(n)),e.$a=e.$a.insert(n,i),lW(e.remoteStore,new nc(Vo(vT(n.path)),i,"TargetPurposeLimboResolution",Ey.ae))}}async function UW(e,t,n){const i=et(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=CT.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=et(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(c,f=>ne.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ne.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!_g(d))throw d;ye(AT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function mTe(e,t){const n=et(e);if(!n.currentUser.isEqual(t)){ye(PT,"User change. New user:",t.toKey());const i=await oW(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Se(ie.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await UW(n,i.Rs)}}function pTe(e,t){const n=et(e),i=n.Ka.get(t);if(i&&i.Ba)return pt().add(i.key);{let r=pt();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function bW(e){const t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pTe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hTe.bind(null,t),t.La.p_=tTe.bind(null,t.eventManager),t.La.Ja=nTe.bind(null,t.eventManager),t}class P6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Cy(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return A_e(this.persistence,new I_e,t.initialUser,this.serializer)}Xa(t){return new sW(xT.ri,this.serializer)}Za(t){return new D_e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}P6.provider={build:()=>new P6};class UTe extends P6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){zt(this.persistence.referenceDelegate instanceof O6);const i=this.persistence.referenceDelegate.garbageCollector;return new d_e(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new sW(i=>O6.ri(i,n),this.serializer)}}class mv{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mTe.bind(null,this.syncEngine),await Z_e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Q_e}()}createDatastore(t){const n=Cy(t.databaseInfo.databaseId),i=function(s){return new B_e(s)}(t.databaseInfo);return function(s,o,a,l){return new $_e(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new X_e(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>tD(this.syncEngine,n,0),function(){return WL.D()?new WL:new N_e}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new aTe(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=et(r);ye(Wh,"RemoteStore shutting down."),s.W_.add(5),await _p(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mv.provider={build:()=>new mv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bTe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):fl("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yTe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=et(r),a={documents:s.map(d=>N6(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,tn.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=W9e(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());zt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new _T(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Re.fromPath(i);this.mutations.push(new jj(r,this.precondition(r)))}),await async function(i,r){const s=et(i),o={writes:r.map(a=>Z9e(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,tn.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Me();n=De.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Se(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(De.min())?gs.exists(!1):gs.updateTime(n):gs.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(De.min()))throw new Se(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(n)}return gs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ETe{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new MT(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new yTe(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!Ep(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!F9e(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="FirestoreClient";class vTe{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Fi.UNAUTHENTICATED,this.clientId=vj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{ye($c,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ye($c,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new wc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=dW(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function f3(e,t){e.asyncQueue.verifyOperationInProgress(),ye($c,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await oW(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function iD(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wTe(e);ye($c,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>qL(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>qL(t.remoteStore,r)),e._onlineComponents=t}async function wTe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ye($c,"Using user provided OfflineComponentProvider");try{await f3(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;$h("Error using user provided cache. Falling back to memory cache: "+n),await f3(e,new P6)}}else ye($c,"Using default OfflineComponentProvider"),await f3(e,new UTe(void 0));return e._offlineComponents}async function yW(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ye($c,"Using user provided OnlineComponentProvider"),await iD(e,e._uninitializedComponentsProvider._online)):(ye($c,"Using default OnlineComponentProvider"),await iD(e,new mv))),e._onlineComponents}function _Te(e){return yW(e).then(t=>t.datastore)}async function TTe(e){const t=await yW(e),n=t.eventManager;return n.onListen=lTe.bind(null,t.syncEngine),n.onUnlisten=dTe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cTe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fTe.bind(null,t.syncEngine),n}function STe(e,t,n={}){const i=new wc;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new bTe({next:f=>{u.su(),o.enqueueAndForget(()=>eTe(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Se(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Se(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new iTe(vT(a.path),u,{includeMetadataChanges:!0,Ta:!0});return J_e(s,d)}(await TTe(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ITe(e,t,n){if(!n)throw new Se(ie.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xTe(e,t,n,i){if(t===!0&&i===!0)throw new Se(ie.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function sD(e){if(!Re.isDocumentKey(e))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function BT(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Me()}function F6(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=BT(e);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="firestore.googleapis.com",oD=!0;class aD{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vW,this.ssl=oD}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:oD;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=rW;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<c_e)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xTe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EW((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zT{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aD(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new zwe;switch(i.type){case"firstParty":return new Gwe(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=rD.get(n);i&&(ye("ComponentProvider","Removing Datastore"),rD.delete(n),i.terminate())}(this),Promise.resolve()}}function CTe(e,t,n,i={}){var r;const s=(e=F6(e,zT))._getSettings(),o=`${t}:${n}`;if(s.host!==vW&&s.host!==o&&$h("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Fi.MOCK_USER;else{a=nj(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Fi(c)}e._authCredentials=new Hwe(new Ej(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new HT(this.firestore,t,this._query)}}class Ss{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ss(this.firestore,t,this._key)}}class Rm extends HT{constructor(t,n,i){super(t,n,vT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ss(this.firestore,null,new Re(t))}withConverter(t){return new Rm(this.firestore,t,this._path)}}function wW(e,t,...n){if(e=uo(e),arguments.length===1&&(t=vj.newId()),ITe("doc","path",t),e instanceof zT){const i=tn.fromString(t,...n);return sD(i),new Ss(e,null,new Re(i))}{if(!(e instanceof Ss||e instanceof Rm))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(tn.fromString(t,...n));return sD(i),new Ss(e.firestore,e instanceof Rm?e.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="AsyncQueue";class cD{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new MT(this,"async_queue_retry"),this.Su=()=>{const i=d3();i&&ye(lD,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=d3();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=d3();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new wc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!_g(t))throw t;ye(lD,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw fl("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=NT.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Me()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class VT extends zT{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new cD,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cD(t),this._firestoreClient=void 0,await t}}}function ATe(e,t){const n=typeof e=="object"?e:dj(),i=typeof e=="string"?e:C6,r=aj(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=ej("firestore");s&&CTe(r,...s)}return r}function _W(e){if(e._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||MTe(e),e._firestoreClient}function MTe(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new s9e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,EW(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new vTe(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hl(Ci.fromBase64String(t))}catch(n){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new hl(Ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RTe=/^__.*__$/;class kTe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Pd(t,this.data,this.fieldMask,n,this.fieldTransforms):new vp(t,this.data,n,this.fieldTransforms)}}class TW{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Pd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function SW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class YT{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new YT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return B6(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(SW(this.Lu)&&RTe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class LTe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Cy(t)}ju(t,n,i,r=!1){return new YT({Lu:t,methodName:n,zu:i,path:Hi.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DTe(e){const t=e._freezeSettings(),n=Cy(e._databaseId);return new LTe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NTe(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);jT("Data must be an object, but it was:",o,i);const a=IW(i,o);let l,c;if(s.merge)l=new ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=pv(t,d,n);if(!o.contains(f))throw new Se(ie.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);CW(u,f)||u.push(f)}l=new ys(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new kTe(new gr(a),l,c)}class Ry extends $T{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ry}}function OTe(e,t,n,i){const r=e.ju(1,t,n);jT("Data must be an object, but it was:",r,i);const s=[],o=gr.empty();Nd(i,(l,c)=>{const u=WT(t,l,n);c=uo(c);const d=r.Ku(u);if(c instanceof Ry)s.push(u);else{const f=ky(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new ys(s);return new TW(o,a,r.fieldTransforms)}function PTe(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[pv(t,i,n)],l=[r];if(s.length%2!=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(pv(t,s[f])),l.push(s[f+1]);const c=[],u=gr.empty();for(let f=a.length-1;f>=0;--f)if(!CW(c,a[f])){const h=a[f];let m=l[f];m=uo(m);const p=o.Ku(h);if(m instanceof Ry)c.push(h);else{const U=ky(m,p);U!=null&&(c.push(h),u.set(h,U))}}const d=new ys(c);return new TW(u,d,o.fieldTransforms)}function ky(e,t){if(xW(e=uo(e)))return jT("Unsupported field value:",t,e),IW(e,t);if(e instanceof $T)return function(i,r){if(!SW(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=ky(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=uo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return A9e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=gi.fromDate(i);return{timestampValue:D6(r.serializer,s)}}if(i instanceof gi){const s=new gi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:D6(r.serializer,s)}}if(i instanceof GT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hl)return{bytesValue:qj(r.serializer,i._byteString)};if(i instanceof Ss){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ST(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof XT)return function(o,a){return{mapValue:{fields:{[Aj]:{stringValue:Mj},[A6]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return wT(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${BT(i)}`)}(e,t)}function IW(e,t){const n={};return _j(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nd(e,(i,r)=>{const s=ky(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function xW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof gi||e instanceof GT||e instanceof hl||e instanceof Ss||e instanceof $T||e instanceof XT)}function jT(e,t,n){if(!xW(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=BT(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function pv(e,t,n){if((t=uo(t))instanceof My)return t._internalPath;if(typeof t=="string")return WT(e,t);throw B6("Field path arguments must be of type string or ",e,!1,void 0,n)}const FTe=new RegExp("[~\\*/\\[\\]]");function WT(e,t,n){if(t.search(FTe)>=0)throw B6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new My(...t.split("."))._internalPath}catch{throw B6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function B6(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Se(ie.INVALID_ARGUMENT,a+e+l)}function CW(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new BTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(AW("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BTe extends z6{data(){return super.data()}}function AW(e,t){return typeof t=="string"?WT(e,t):t instanceof My?t._internalPath:t._delegate._internalPath}class MW{convertValue(t,n="none"){switch(Hc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Me()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Nd(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[A6].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Tn(o.doubleValue));return new XT(s)}convertGeoPoint(t){return new GT(Tn(t.latitude),Tn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=vy(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Im(t));default:return null}}convertTimestamp(t){const n=Bc(t);return new gi(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=tn.fromString(t);zt(iW(i));const r=new xm(i.get(1),i.get(3)),s=new Re(i.popFirst(5));return r.isEqual(n)||fl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zTe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class HTe extends MW{constructor(t){super(),this.firestore=t}convertBytes(t){return new hl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class KT extends z6{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new VTe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(AW("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class VTe extends KT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Te(e){e=F6(e,Ss);const t=F6(e.firestore,VT);return STe(_W(t),e._key).then(n=>GTe(t,e,n))}class kW extends MW{constructor(t){super(),this.firestore=t}convertBytes(t){return new hl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,n)}}function GTe(e,t,n){const i=n.docs.get(t._key),r=new kW(e);return new KT(e,r,t._key,i,new RW(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XTe={maxAttempts:5};function z1(e,t){if((e=uo(e)).firestore!==t)throw new Se(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YTe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=DTe(t)}get(t){const n=z1(t,this._firestore),i=new HTe(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Me();const s=r[0];if(s.isFoundDocument())return new z6(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new z6(this._firestore,i,n._key,null,n.converter);throw Me()})}set(t,n,i){const r=z1(t,this._firestore),s=zTe(r.converter,n,i),o=NTe(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=z1(t,this._firestore);let o;return o=typeof(n=uo(n))=="string"||n instanceof My?PTe(this._dataReader,"Transaction.update",s._key,n,i,r):OTe(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=z1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jTe extends YTe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=z1(t,this._firestore),i=new kW(this._firestore);return super.get(t).then(r=>new KT(this._firestore,i,n._key,r._document,new RW(!1,!1),n.converter))}}function WTe(e,t,n){e=F6(e,VT);const i=Object.assign(Object.assign({},XTe),n);return function(s){if(s.maxAttempts<1)throw new Se(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new wc;return s.asyncQueue.enqueueAndForget(async()=>{const c=await _Te(s);new ETe(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(_W(e),r=>t(new jTe(e,r)),i)}(function(t,n=!0){(function(r){wg=r})(cj),_m(new Vh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new VT(new Vwe(i.getProvider("auth-internal")),new Xwe(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xm(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ec(mL,pL,t),Ec(mL,pL,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW="firebasestorage.googleapis.com",DW="storageBucket",KTe=2*60*1e3,ZTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends Dd{constructor(t,n,i=0){super(h3(t),`Firebase Storage: ${n} (${h3(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return h3(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gn||(Gn={}));function h3(e){return"storage/"+e}function ZT(){const e="An unknown error occurred, please check the error payload for server response.";return new Xn(Gn.UNKNOWN,e)}function qTe(e){return new Xn(Gn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function QTe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xn(Gn.UNAUTHENTICATED,e)}function JTe(){return new Xn(Gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eSe(e){return new Xn(Gn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function tSe(){return new Xn(Gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nSe(){return new Xn(Gn.CANCELED,"User canceled the upload/download.")}function iSe(e){return new Xn(Gn.INVALID_URL,"Invalid URL '"+e+"'.")}function rSe(e){return new Xn(Gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function sSe(){return new Xn(Gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DW+"' property when initializing the app?")}function oSe(){return new Xn(Gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function aSe(e){return new Xn(Gn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uv(e){return new Xn(Gn.INVALID_ARGUMENT,e)}function NW(){return new Xn(Gn.APP_DELETED,"The Firebase app was deleted.")}function lSe(e){return new Xn(Gn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x0(e,t){return new Xn(Gn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function f1(e){throw new Xn(Gn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Vr.makeFromUrl(t,n)}catch{return new Vr(t,"")}if(i.path==="")return i;throw rSe(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===LW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",E=new RegExp(`^https?://${p}/${r}/${U}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<v.length;w++){const S=v[w],M=S.regex.exec(t);if(M){const _=M[S.indices.bucket];let T=M[S.indices.path];T||(T=""),i=new Vr(_,T),S.postModify(i);break}}if(i==null)throw iSe(t);return i}}class cSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uSe(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...U){c||(c=!0,t.apply(null,U))}function d(U){r=setTimeout(()=>{r=null,e(h,l())},U)}function f(){s&&clearTimeout(s)}function h(U,...E){if(c){f();return}if(U){f(),u.call(null,U,...E);return}if(l()||o){f(),u.call(null,U,...E);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,d(v)}let m=!1;function p(U){m||(m=!0,f(),!c&&(r!==null?(U||(a=2),clearTimeout(r),d(0)):U||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function dSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(e){return e!==void 0}function hSe(e){return typeof e=="object"&&!Array.isArray(e)}function OW(e){return typeof e=="string"||e instanceof String}function uD(e){return qT()&&e instanceof Blob}function qT(){return typeof Blob<"u"}function dD(e,t,n,i){if(i<t)throw Uv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Uv(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gSe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function mSe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Yu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Yu||(Yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pSe(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class USe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new $U(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Yu.NO_ERROR,l=s.getStatus();if(!a||pSe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Yu.ABORT;i(!1,new $U(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new $U(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());fSe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=ZT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?NW():nSe();o(l)}else{const l=tSe();o(l)}};this.canceled_?n(!1,new $U(!1,null,!0)):this.backoffId_=uSe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&dSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $U{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function bSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ySe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function ESe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function wSe(e,t,n,i,r,s,o=!0){const a=mSe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return ESe(c,t),bSe(c,n),ySe(c,s),vSe(c,i),new USe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Se(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function TSe(...e){const t=_Se();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(qT())return new Blob(e);throw new Xn(Gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SSe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ISe(e){if(typeof atob>"u")throw aSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class g3{constructor(t,n){this.data=t,this.contentType=n||null}}function xSe(e,t){switch(e){case Oo.RAW:return new g3(PW(t));case Oo.BASE64:case Oo.BASE64URL:return new g3(FW(e,t));case Oo.DATA_URL:return new g3(ASe(t),MSe(t))}throw ZT()}function PW(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function CSe(e){let t;try{t=decodeURIComponent(e)}catch{throw x0(Oo.DATA_URL,"Malformed data URL.")}return PW(t)}function FW(e,t){switch(e){case Oo.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw x0(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Oo.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw x0(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ISe(t)}catch(r){throw r.message.includes("polyfill")?r:x0(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class BW{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw x0(Oo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=RSe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function ASe(e){const t=new BW(e);return t.base64?FW(Oo.BASE64,t.rest):CSe(t.rest)}function MSe(e){return new BW(e).contentType}function RSe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){let i=0,r="";uD(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(uD(this.data_)){const i=this.data_,r=SSe(i,t,n);return r===null?null:new Wl(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Wl(i,!0)}}static getBlob(...t){if(qT()){const n=t.map(i=>i instanceof Wl?i.data_:i);return new Wl(TSe.apply(null,n))}else{const n=t.map(o=>OW(o)?xSe(Oo.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Wl(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSe(e){let t;try{t=JSON.parse(e)}catch{return null}return hSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LSe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function DSe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function zW(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NSe(e,t){return t}class Zi{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||NSe}}let GU=null;function OSe(e){return!OW(e)||e.length<2?e:zW(e)}function PSe(){if(GU)return GU;const e=[];e.push(new Zi("bucket")),e.push(new Zi("generation")),e.push(new Zi("metageneration")),e.push(new Zi("name","fullPath",!0));function t(s,o){return OSe(o)}const n=new Zi("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Zi("size");return r.xform=i,e.push(r),e.push(new Zi("timeCreated")),e.push(new Zi("updated")),e.push(new Zi("md5Hash",null,!0)),e.push(new Zi("cacheControl",null,!0)),e.push(new Zi("contentDisposition",null,!0)),e.push(new Zi("contentEncoding",null,!0)),e.push(new Zi("contentLanguage",null,!0)),e.push(new Zi("contentType",null,!0)),e.push(new Zi("metadata","customMetadata",!0)),GU=e,GU}function FSe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new Vr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function BSe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return FSe(i,e),i}function zSe(e,t,n){const i=kSe(t);return i===null?null:BSe(e,i,n)}function HSe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class VSe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Se(e){if(!e)throw ZT()}function GSe(e,t){function n(i,r){const s=zSe(e,r,t);return $Se(s!==null),s}return n}function XSe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=JTe():r=QTe():n.getStatus()===402?r=qTe(e.bucket):n.getStatus()===403?r=eSe(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function YSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function jSe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=YSe(null,t)),i}function WSe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=jSe(t,i,r),u=HSe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Wl.getBlob(d,i,f);if(h===null)throw oSe();const m={name:c.fullPath},p=gSe(s,e.host,e._protocol),U="POST",E=e.maxUploadRetryTime,y=new VSe(p,U,GSe(e,n),E);return y.urlParams=m,y.headers=o,y.body=h.uploadData(),y.errorHandler=XSe(t),y}class KSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw f1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw f1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw f1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw f1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw f1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ZSe extends KSe{initXhr(){this.xhr_.responseType="text"}}function qSe(){return new ZSe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n){this._service=t,n instanceof Vr?this._location=n:this._location=Vr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new yd(t,n)}get root(){const t=new Vr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zW(this._location.path)}get storage(){return this._service}get parent(){const t=LSe(this._location.path);if(t===null)return null;const n=new Vr(this._location.bucket,t);return new yd(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw lSe(t)}}function QSe(e,t,n){e._throwIfRoot("uploadBytes");const i=WSe(e.storage,e._location,PSe(),new Wl(t,!0),n);return e.storage.makeRequestWithTokens(i,qSe).then(r=>({metadata:r,ref:e}))}function JSe(e,t){const n=DSe(e._location.path,t),i=new Vr(e._location.bucket,n);return new yd(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eIe(e){return/^[A-Za-z]+:\/\//.test(e)}function tIe(e,t){return new yd(e,t)}function HW(e,t){if(e instanceof QT){const n=e;if(n._bucket==null)throw sSe();const i=new yd(n,n._bucket);return t!=null?HW(i,t):i}else return t!==void 0?JSe(e,t):e}function nIe(e,t){if(t&&eIe(t)){if(e instanceof QT)return tIe(e,t);throw Uv("To use ref(service, url), the first argument must be a Storage instance.")}else return HW(e,t)}function fD(e,t){const n=t==null?void 0:t[DW];return n==null?null:Vr.makeFromBucketSpec(n,e)}function iIe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:nj(r,e.app.options.projectId))}class QT{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=LW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KTe,this._maxUploadRetryTime=ZTe,this._requests=new Set,r!=null?this._bucket=Vr.makeFromBucketSpec(r,this._host):this._bucket=fD(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,t):this._bucket=fD(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){dD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){dD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yd(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new cSe(NW());{const o=wSe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const hD="@firebase/storage",gD="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW="storage";function $W(e,t,n){return e=uo(e),QSe(e,t,n)}function GW(e,t){return e=uo(e),nIe(e,t)}function rIe(e=dj(),t){e=uo(e);const i=aj(e,VW).getImmediate({identifier:t}),r=ej("storage");return r&&sIe(i,...r),i}function sIe(e,t,n,i={}){iIe(e,t,n,i)}function oIe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new QT(n,i,r,t,cj)}function aIe(){_m(new Vh(VW,oIe,"PUBLIC").setMultipleInstances(!0)),Ec(hD,gD,""),Ec(hD,gD,"esm2017")}aIe();let H6;try{H6=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),H6={}}let m3=null,p3=null,U3=null;const XW=()=>(m3||(m3=uj(H6)),m3),YW=()=>(p3||(p3=ATe(XW())),p3),lIe=()=>(U3||(U3=rIe(XW())),U3),jW=async()=>lIe(),cIe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await ny(e,i);return{ciphertext:r,iv:s}},bv=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await hm(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)},yu=class yu{};F(yu,"cache",new WeakMap),F(yu,"get",t=>yu.cache.get(t)),F(yu,"set",(t,n)=>{yu.cache.set(t,Yl(n))});let km=yu;const WW=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=Yl(t);return km.get(e.socket)===n}return!0},JT=async({prefix:e,files:t})=>{const n=await jW(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=GW(n,`${e}/${s}`);await $W(a,o,{cacheControl:`public, max-age=${rve}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},mD=async(e,t)=>{const n=Yl(e),{ciphertext:i,iv:r}=await cIe(t,e);return{sceneVersion:n,ciphertext:hl.fromUint8Array(new Uint8Array(i)),iv:hl.fromUint8Array(r)}},uIe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||WW(e,t))return null;const o=YW(),a=wW(o,"scenes",i),l=await WTe(o,async u=>{const d=await u.get(a);if(!d.exists()){const U=await mD(t,r);return u.set(a,U),U}const f=d.data(),h=ic(pd(await bv(f,r),null)),m=ic(uT(t,h,n)),p=await mD(m,r);return u.update(a,p),p}),c=ic(pd(await bv(l,r),null));return km.set(s,c),c},dIe=async(e,t,n)=>{const i=YW(),r=wW(i,"scenes",e),s=await $Te(r);if(!s.exists())return null;const o=s.data(),a=ic(pd(await bv(o,t),null));return n&&km.set(n,a),a},KW=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${H6.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await tG(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||ve.binary,id:s,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},ZW=e=>e.isDeleted?e.updated>Date.now()-ive:!fc(e),ic=e=>e.filter(t=>ZW(t)),fIe="https://json.excalidraw.com/api/v2/",hIe="https://json.excalidraw.com/api/v2/post/",gIe=async()=>{const e=new Uint8Array(sve);return window.crypto.getRandomValues(e),DF(e)},qW=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,pD=e=>{const t=new URL(e).hash;return qW.test(t)},mIe=e=>{const n=new URL(e).hash.match(qW);return n&&n[2].length!==22?(window.alert(k("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},pIe=async()=>{const e=await gIe(),t=await __();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},UIe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,bIe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,x2),o=e.slice(x2,e.byteLength);n=await hm(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(x2);n=await hm(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},yIe=async(e,t)=>{try{const n=await fetch(`${fIe}${e}`);if(!n.ok)return window.alert(k("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await tG(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),bIe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(k("alerts.importBackendFailed")),console.error(n),{}}},UD=async(e,t,n)=>{let i;return e!=null&&t!=null?i=Ud(await yIe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):i=Ud(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},EIe=async(e,t,n)=>{const i=await __("string"),r=await eG(new TextEncoder().encode(Eg(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)In(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await hT({files:s,encryptionKey:i,maxBytes:dT}),l=await(await fetch(hIe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await JT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:k("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}};function vIe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Fd(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function eS(e,t){const n=vIe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Fd(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let b3;function Sg(){return b3||(b3=eS("keyval-store","keyval")),b3}function wIe(e,t=Sg()){return t("readonly",n=>Fd(n.get(e)))}function QW(e,t,n=Sg()){return n("readwrite",i=>(i.put(t,e),Fd(i.transaction)))}function _Ie(e,t=Sg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Fd(n.transaction)))}function TIe(e,t=Sg()){return t("readonly",n=>Promise.all(e.map(i=>Fd(n.get(i)))))}function SIe(e,t=Sg()){return t("readwrite",n=>(n.delete(e),Fd(n.transaction)))}function IIe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Fd(n.transaction)))}function xIe(e=Sg()){const t=[];return IIe(e,n=>t.push([n.key,n.value])).then(()=>t)}class CIe{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const V6={[yn.VERSION_DATA_STATE]:-1,[yn.VERSION_FILES]:-1},bD=e=>JSON.parse(localStorage.getItem(e)||"-1")>V6[e],JW=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),V6[e]=t}catch(n){console.error("error while updating browser state verison",n)}},AIe=()=>{try{for(const e of Object.keys(V6))localStorage.setItem(e,JSON.stringify(-1)),V6[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},C0=eS("files-db","files-store");class MIe extends qY{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await xIe(C0).then(i=>{for(const[r,s]of i)(!s.lastRetrieved||Date.now()-s.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(r)&&SIe(r,C0)})})}}const RIe=(e,t)=>{var n;try{const i=i$(t);((n=i.openSidebar)==null?void 0:n.name)===ws.name&&i.openSidebar.tab===Fu&&(i.openSidebar=null),localStorage.setItem(yn.LOCAL_STORAGE_ELEMENTS,JSON.stringify(wz(e))),localStorage.setItem(yn.LOCAL_STORAGE_APP_STATE,JSON.stringify(i)),JW(yn.VERSION_DATA_STATE)}catch(i){console.error(i)}},bi=class bi{};F(bi,"_save",el(async(t,n,i,r)=>{RIe(t,n),await bi.fileStorage.saveFiles({elements:t,files:i}),r()},q4e)),F(bi,"save",(t,n,i,r)=>{bi.isSavePaused()||bi._save(t,n,i,r)}),F(bi,"flushSave",()=>{bi._save.flush()}),F(bi,"locker",new CIe),F(bi,"pauseSave",t=>{bi.locker.lock(t)}),F(bi,"resumeSave",t=>{bi.locker.unlock(t)}),F(bi,"isSavePaused",()=>document.hidden||bi.locker.isLocked()),F(bi,"fileStorage",new MIe({getFiles(t){return TIe(t,C0).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{_Ie(s,C0)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return JW(yn.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await QW(r,s,C0),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}}));let Ei=bi;const zs=class zs{static async load(){return await wIe(zs.key,zs.store)||null}static save(t){return QW(zs.key,t,zs.store)}};F(zs,"idb_name",yn.IDB_LIBRARY),F(zs,"key","libraryData"),F(zs,"store",eS(`${zs.idb_name}-db`,`${zs.idb_name}-store`));let $6=zs;class kIe{static load(){const t=localStorage.getItem(yn.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(yn.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const yD=Xt({message:null,nonce:0});class LIe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",Do(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Te(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:W.NEVER})},J4e));F(this,"broadcastScene",async(t,n,i)=>{if(t===Qi.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&ZW(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Qi.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Qi.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const r={type:Qi.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(r,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(k2.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),st("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(Qi.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var r;if(this.isOpen()){const s=JSON.stringify(t),o=new TextEncoder().encode(s),{encryptedBuffer:a,iv:l}=await ny(this.roomKey,o);(r=this.socket)==null||r.emit(n?k2.SERVER_VOLATILE:k2.SERVER,i??this.roomId,a,l)}}}var DIe={};const eK=Xt(null),yv=Xt(!1),tK=Xt(!1),nK=Xt(null);class NIe extends L.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{Dl.set(tK,!window.navigator.onLine)});F(this,"isCollaborating",()=>Dl.get(yv));F(this,"setIsCollaborating",n=>{Dl.set(yv,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",Jt(n=>{const i=ic(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!WW(this.portal,i))&&(this.saveCollabRoomToFirebase(i),DIe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Yw(n):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await uIe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const r=/is longer than.*?bytes/.test(i.message)?k("errors.collabSaveFailed_sizeExceeded"):k("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[r]||!this.isCollaborating())&&(this.setErrorDialog(r),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[r]:!0}})),this.isCollaborating()&&this.setErrorIndicator(r),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(ic(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)Ei.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(k("alerts.collabStopOverridePrompt"))){AIe(),window.history.pushState({},Va,window.location.origin),this.destroySocketClient(),Ei.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>wt(r)&&r.status==="saved"?Te(r,{status:"pending"}):r);this.excalidrawAPI.updateScene({elements:i,captureUpdate:W.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),Ei.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(r=>In(r)&&!this.fileManager.isFileTracked(r.fileId)&&!r.isDeleted&&(n.forceFetchFiles?r.status!=="pending"||Date.now()-r.updated>1e4:r.status==="saved")).map(r=>r.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,r)=>{try{const s=await hm(n,i,r),o=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(o)}catch(s){return window.alert(k("alerts.decryptFailed")),console.error(s),{type:Qi.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||pe(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([]),import.meta.url).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,r;n?{roomId:i,roomKey:r}=n:({roomId:i,roomKey:r}=await pIe(),window.history.pushState({},Va,UIe({roomId:i,roomKey:r})));const s=y5();this.setIsCollaborating(!0),Ei.pauseSave("collaboration");const{default:o}=await pe(()=>import("./index-ChGp7972.js"),__vite__mapDeps([]),import.meta.url),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{s.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),i,r),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>wt(c)&&c.status==="saved"?Te(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:W.NEVER}),this.saveCollabRoomToFirebase(ic(l))}return this.socketInitializationTimer=window.setTimeout(a,Q4e),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Qi.INVALID_RESPONSE:return;case Qi.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),s.resolve({elements:h,scrollToContent:!0})}break}case Qi.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Qi.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,U=u.payload.socketId||u.payload.socketID;this.updateCollaborator(U,{pointer:f,button:h,selectedElementIds:p,username:m});break}case Qi.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:c$({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Qi.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:Yo(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});s.resolve(l)}),this.portal.socket.on(k2.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),s});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const r=await dIe(i.roomId,i.roomKey,this.portal.socket);if(r)return this.setLastBroadcastedOrReceivedSceneVersion(Yl(r)),{elements:r,scrollToContent:!0}}catch(r){console.error(r)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),r=this.excalidrawAPI.getAppState(),s=pd(n,null),o=uT(i,s,r);return this.setLastBroadcastedOrReceivedSceneVersion(Yl(o)),o});F(this,"loadImageFiles",Do(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),O1({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},eve));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:W.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,cC),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,uC))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(wu.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,cC),this.activeIntervalId=window.setInterval(this.reportActive,uC),this.onIdleStateChange(wu.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(wu.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(wu.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(ee.POINTER_MOVE,this.onPointerMove),document.addEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const r=new Map(this.collaborators),s=Object.assign({},r.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});r.set(n,s),this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",Do(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},nve));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:XB(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{Yl(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Qi.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=Yl(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",Do(()=>{this.portal.broadcastScene(Qi.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,Yl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},nL));F(this,"queueSaveToFirebase",Do(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(ic(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},nL,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),ave(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),Dl.set(nK,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{Dl.set(yD,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{Dl.set(yD,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:WY()||"",activeRoomLink:null},this.portal=new LIe(this),this.fileManager=new qY({getFiles:async i=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new kh;return KW(`files/rooms/${r}`,s,i)},saveFiles:async({addedFiles:i})=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new kh;const{savedFiles:o,erroredFiles:a}=await JT({prefix:`${jY.collabFiles}/${r}`,files:await hT({files:i,encryptionKey:s,maxBytes:dT})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(ee.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=og(this.relayVisibleSceneBounds),r=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),r()},this.onOfflineStatusToggle();const s={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Dl.set(eK,s)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(ee.UNLOAD,this.onUnload),window.removeEventListener(ee.POINTER_MOVE,this.onPointerMove),window.removeEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var r;const i=new Map;for(const s of n)i.set(s,Object.assign({},this.collaborators.get(s),{isCurrentUser:s===((r=this.portal.socket)==null?void 0:r.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(he,{children:n!=null&&g(Y_,{onClose:()=>this.setErrorDialog(null),children:n})})}}const OIe=()=>fT?g("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noopener",className:"plus-button",children:"Go to Excalidraw+"}):null,PIe=oe.memo(({onChange:e})=>g(zY,{children:g("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:g(OIe,{})})}));function FIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function BIe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Lm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zIe(e){var t=BIe(e,"string");return Lm(t)=="symbol"?t:t+""}function HIe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,zIe(i.key),i)}}function VIe(e,t,n){return t&&HIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var iK=[],$Ie=iK.forEach,GIe=iK.slice;function XIe(e){return $Ie.call(GIe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var ED=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,YIe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!ED.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!ED.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},vD={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=YIe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},jIe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=vD.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&vD.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},WIe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},h1=null,wD=function(){if(h1!==null)return h1;try{h1=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{h1=!1}return h1},KIe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&wD()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&wD()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},g1=null,_D=function(){if(g1!==null)return g1;try{g1=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{g1=!1}return g1},ZIe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&_D()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&_D()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},qIe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},QIe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},JIe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},exe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function txe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var rK=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};FIe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return VIe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=XIe(i,this.options||{},txe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(jIe),this.addDetector(WIe),this.addDetector(KIe),this.addDetector(ZIe),this.addDetector(qIe),this.addDetector(QIe),this.addDetector(JIe),this.addDetector(exe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();rK.type="languageDetector";const tS=new rK;tS.init({languageUtils:{}});const sK=()=>{var i;const e=tS.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=L5.find(r=>r.code.startsWith(t)))==null?void 0:i.code:null)||Rd.code},oK=Xt(sK()),nxe=()=>{const[e,t]=Rh(oK);return L.useEffect(()=>{tS.cacheUserLanguage(e)},[e]),[e,t]},ixe=({style:e})=>{const{t,langCode:n}=En(),i=F9(oK);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:L5.map(r=>g("option",{value:r.code,children:r.label},r.code))})},rxe=oe.memo(e=>O(jt,{children:[g(jt.DefaultItems.LoadScene,{}),g(jt.DefaultItems.SaveToActiveFile,{}),g(jt.DefaultItems.Export,{}),g(jt.DefaultItems.SaveAsImage,{}),g(jt.DefaultItems.Help,{}),g(jt.DefaultItems.ClearCanvas,{}),g(jt.Separator,{}),g(jt.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(jt.ItemCustom,{children:g(ixe,{style:{width:"100%"}})}),g(jt.DefaultItems.ChangeCanvasBackground,{})]})),sxe=oe.memo(e=>{const{t}=En();let n;return fT?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:uu.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),O(Ar,{children:[g(Ar.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(Ar.Hints.ToolbarHint,{}),g(Ar.Hints.HelpHint,{}),O(Ar.Center,{children:[g(Ar.Center.Logo,{}),g(Ar.Center.Heading,{children:n}),O(Ar.Center.Menu,{children:[g(Ar.Center.MenuItemLoadScene,{}),g(Ar.Center.MenuItemHelp,{})]})]})]})}),Ev=async(e,t,n,i)=>{const r=await jW(),s=`${AF(12)}`,o=await __(),a=await ny(o,Eg(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:ve.binary}),c=GW(r,`/migrations/scenes/${s}`);await $W(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)In(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await hT({files:u,encryptionKey:o,maxBytes:dT});await JT({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},oxe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=En();return O(Z4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(HY,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(He,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{st("export","eplus",`ui (${Qm()})`),await Ev(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class axe extends oe.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const r={};for(const[s,o]of Object.entries({...localStorage}))try{r[s]=JSON.parse(o)}catch{r[s]=o}xw(s=>{s.setExtras(i);const o=Rw(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(r)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await pe(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]),import.meta.url)).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:O("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(Ur,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),O("div",{className:"ErrorSplash-paragraph align-center",children:[g(Ur,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),O("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),k("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),O("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:k("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(Ur,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:O("div",{className:"ErrorSplash-details",children:[g("label",{children:k("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const aK=Xt({isOpen:!1}),lxe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?Rue:n?Lue:AH},cxe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=En(),[,r]=L.useState(!1),s=L.useRef(0),o=L.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=j_(),u=async()=>{var f;try{await qc(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return O(he,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Bh,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===H.ENTER&&n()}),O("div",{className:"ShareDialog__active__linkRow",children:[g(Bh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(io,{size:"large",variant:"icon",label:"Share",icon:lxe(),className:"ShareDialog__active__share",onClick:d}),g(io,{size:"large",label:i("buttons.copyLink"),icon:up,status:c,onClick:()=>{u(),l()}})]}),O("div",{className:"ShareDialog__active__description",children:[O("p",{children:[O("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(io,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:wde,onClick:()=>{st("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},uxe=e=>{const{t}=En(),{collabAPI:n}=e,i=n?O(he,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),O("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(io,{size:"large",label:t("roomDialog.button_startSession"),icon:vde,onClick:()=>{st("share","room creation",`ui (${Qm()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return O(he,{children:[i,e.type==="share"&&O(he,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(io,{size:"large",label:t("exportDialog.link_button"),icon:e6,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},dxe=e=>{const t=R5(nK);return g(qr,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(cxe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(uxe,{...e})})})},fxe=e=>{const[t,n]=Rh(aK),{openDialog:i}=Ai();return L.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(dxe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},TD=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},hxe=()=>{const[e,t]=L.useState(()=>localStorage.getItem(yn.LOCAL_STORAGE_THEME)||Ce.LIGHT),[n,i]=L.useState(Ce.LIGHT);return L.useEffect(()=>{const r=TD(),s=a=>{i(a.matches?Ce.DARK:Ce.LIGHT)};e==="system"&&(r==null||r.addEventListener("change",s));const o=a=>{!a[H.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===Je.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===Ce.DARK?Ce.LIGHT:Ce.DARK))};return document.addEventListener(ee.KEYDOWN,o,{capture:!0}),()=>{r==null||r.removeEventListener("change",s),document.removeEventListener(ee.KEYDOWN,o,{capture:!0})}},[e,n,t]),L.useLayoutEffect(()=>{var r;localStorage.setItem(yn.LOCAL_STORAGE_THEME,e),i(e==="system"?(r=TD())!=null&&r.matches?Ce.DARK:Ce.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},gxe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},mxe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},pxe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},SD=(e,t,n)=>{e.forEach(i=>{switch(!0){case Tre(i.data):gxe(t,n.zoom.value,i.data,i.color);break;case Ure(i.data):mxe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},Uxe=(e,t,n,i)=>{var a,l,c,u;const[r,s]=ry(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=sy({canvas:e,scale:n,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),pxe(o,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=bxe();SD(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{SD(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},bxe=()=>{var n,i,r;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((r=window.visualDebug)==null?void 0:r.currentFrame)??0]:[0,0]},yxe=og((e,t,n,i)=>{Uxe(e,t,n,i)},{trailing:!0}),Exe=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},vxe=({appState:e,scale:t,ref:n})=>{const{width:i,height:r}=e,s=L.useRef(null);return L.useImperativeHandle(n,()=>s.current,[s]),g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:s,children:"Debug Canvas"})},wxe=({excalidrawAPI:e})=>O(he,{children:[g(j4e,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await $ye({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:ve.jpg}),s=await EG(r),o=uB(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Zre(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(NY,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),_xe="REQUEST_SCENE",XU="https://app.excalidraw.com",Txe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new Zs("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new Zs("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await Ei.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof Zs?n:new Zs("Failed to parse scene data.")}},Sxe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new Zs("Invalid JWT format");const s=xR(i),o=xR(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},Ixe=()=>{const e=L.useRef(!1);return L.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==XU)throw new Zs("Invalid origin");if(n.data.type===_xe){if(!n.data.jwt)throw new Zs("JWT is missing");try{try{await Sxe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new Zs("Failed to verify JWT")}const i=await Txe({rawAppStateString:localStorage.getItem(yn.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(yn.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:XU})}catch(i){const r={type:"ERROR",message:i instanceof Zs?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:XU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,XU)}return()=>{window.removeEventListener("message",t)}},[]),null};var xxe={};GY();window.EXCALIDRAW_THROTTLE_RENDER=!0;let mf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),mf=e});let lK=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(lK=!0)}catch{}const ID={title:k("overwriteConfirm.modal.shareableLink.title"),description:g(Ur,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:k("overwriteConfirm.modal.shareableLink.button"),color:"danger"},vv=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=KY();let o=await UD(null,null,s),a=mIe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await X4(ID))i&&(o=await UD(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},Va,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>vv(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},Va,window.location.origin)}else if(r){window.history.replaceState({},Va,window.location.origin);const d=r[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await A_(await f.blob(),null,null);if(!o.elements.length||await X4(ID))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:k("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...gG({...f==null?void 0:f.appState,theme:((c=s==null?void 0:s.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:uT((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},Cxe=()=>{const[e,t]=L.useState(""),n=Yre(),{editorTheme:i,appTheme:r,setAppTheme:s}=hxe(),[o,a]=nxe(),l=L.useRef({promise:null});l.current.promise||(l.current.promise=y5());const c=L.useRef(null);L.useEffect(()=>{st("load","frame",Qm()),setTimeout(()=>{st("load","version",L7())},jie)},[]);const[u,d]=$G(),[,f]=Rh(aK),[h]=Rh(eK),[m]=dve(yv,()=>pD(window.location.href));Zye({excalidrawAPI:u,adapter:$6,migrationAdapter:kIe});const[,p]=L.useState(!1);L.useEffect(()=>{},[u]),L.useEffect(()=>{if(!u||!n&&!h)return;const C=(z,V=!1)=>{var G;if(z.scene)if(h!=null&&h.isCollaborating())z.scene.elements&&h.fetchImageFilesFromFirebase({elements:z.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:Y,erroredFiles:X})=>{u.addFiles(Y),O1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})});else{const Y=((G=z.scene.elements)==null?void 0:G.reduce((X,Z)=>In(Z)?X.concat(Z.fileId):X,[]))||[];z.isExternalScene?KW(`${jY.shareLinkFiles}/${z.id}`,z.key,Y).then(({loadedFiles:X,erroredFiles:Z})=>{u.addFiles(X),O1({excalidrawAPI:u,erroredFiles:Z,elements:u.getSceneElementsIncludingDeleted()})}):V&&(Y.length&&Ei.fileStorage.getFiles(Y).then(({loadedFiles:X,erroredFiles:Z})=>{X.length&&u.addFiles(X),O1({excalidrawAPI:u,erroredFiles:Z,elements:u.getSceneElementsIncludingDeleted()})}),Ei.fileStorage.clearObsoleteFiles({currentFileIds:Y}))}};vv({collabAPI:h,excalidrawAPI:u}).then(async z=>{C(z,!0),l.current.promise.resolve(z.scene)});const x=async z=>{z.preventDefault(),z4()||(h!=null&&h.isCollaborating()&&!pD(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),vv({collabAPI:h,excalidrawAPI:u}).then(G=>{C(G),G.scene&&u.updateScene({...G.scene,...Ud(G.scene,null,null,{repairBindings:!0}),captureUpdate:W.IMMEDIATELY})}))},R=setTimeout(()=>document.title=Va,Yie),P=el(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(bD(yn.VERSION_DATA_STATE)){const z=KY(),V=WY();a(sK()),u.updateScene({...z,captureUpdate:W.NEVER}),$6.load().then(G=>{G&&u.updateLibrary({libraryItems:G.libraryItems})}),h==null||h.setUsername(V||"")}if(bD(yn.VERSION_FILES)){const z=u.getSceneElementsIncludingDeleted(),V=u.getFiles(),G=(z==null?void 0:z.reduce((Y,X)=>In(X)&&!V[X.fileId]?Y.concat(X.fileId):Y,[]))||[];G.length&&Ei.fileStorage.getFiles(G).then(({loadedFiles:Y,erroredFiles:X})=>{Y.length&&u.addFiles(Y),O1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})})}}},tve),D=()=>{Ei.flushSave()},$=z=>{(z.type===ee.BLUR||document.hidden)&&Ei.flushSave(),(z.type===ee.VISIBILITY_CHANGE||z.type===ee.FOCUS)&&P()};return window.addEventListener(ee.HASHCHANGE,x,!1),window.addEventListener(ee.UNLOAD,D,!1),window.addEventListener(ee.BLUR,$,!1),document.addEventListener(ee.VISIBILITY_CHANGE,$,!1),window.addEventListener(ee.FOCUS,$,!1),()=>{window.removeEventListener(ee.HASHCHANGE,x,!1),window.removeEventListener(ee.UNLOAD,D,!1),window.removeEventListener(ee.BLUR,$,!1),window.removeEventListener(ee.FOCUS,$,!1),document.removeEventListener(ee.VISIBILITY_CHANGE,$,!1),clearTimeout(R)}},[n,h,u,a]),L.useEffect(()=>{const C=x=>{Ei.flushSave(),u&&Ei.fileStorage.shouldPreventUnload(u.getSceneElements())&&(xxe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Yw(x):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(ee.BEFORE_UNLOAD,C),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,C)}},[u]);const U=(C,x,R)=>{h!=null&&h.isCollaborating()&&h.syncElements(C),Ei.isSavePaused()||Ei.save(C,x,R,()=>{if(u){let P=!1;const D=u.getSceneElementsIncludingDeleted().map($=>{if(Ei.fileStorage.shouldUpdateImageElementStatus($)){const z=Te($,{status:"saved"});return z!==$&&(P=!0),z}return $});P&&u.updateScene({elements:D,captureUpdate:W.NEVER})}}),c.current&&u&&yxe(c.current,x,window.devicePixelRatio,()=>p(P=>!P))},[E,y]=L.useState(null),v=async(C,x,R)=>{if(C.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));try{const{url:P,errorMessage:D}=await EIe(C,{...x,viewBackgroundColor:x.exportBackground?x.viewBackgroundColor:ea().viewBackgroundColor},R);if(D)throw new Error(D);P&&y(P)}catch(P){if(P.name!=="AbortError"){const{width:D,height:$}=x;throw console.error(P,{width:D,height:$,devicePixelRatio:window.devicePixelRatio}),new Error(P.message)}}},w=(C,x)=>g(uve,{setToast:R=>u.setToast({message:R}),appState:x,elements:C}),S=R5(tK),M=L.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(lK)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const _={label:"Excalidraw+",category:nt.links,predicate:!0,icon:g("div",{style:{width:14},children:zA}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},T={label:"Sign up",category:nt.links,predicate:!0,icon:g("div",{style:{width:14},children:zA}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return g("div",{style:{height:"100%"},className:me("excalidraw-app",{"is-collaborating":m}),children:O(YY,{excalidrawAPI:d,onChange:U,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h==null?void 0:h.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:v,renderCustomUI:u?(C,x,R)=>g(oxe,{elements:C,appState:x,files:R,name:u.getName(),onError:P=>{u==null||u.updateScene({appState:{errorMessage:P.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:w,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:C=>null,onLinkOpen:(C,x)=>{C.link&&Qf(C.link)&&(x.preventDefault(),u==null||u.scrollToContent(C.link,{animate:!0}))},children:[g(rxe,{onCollabDialogOpen:M,isCollaborating:m,isCollabEnabled:!n,theme:r,setTheme:C=>s(C),refresh:()=>p(C=>!C)}),g(sxe,{onCollabDialogOpen:M,isCollabEnabled:!n}),O(Au,{children:[g(Au.Actions.ExportToImage,{}),g(Au.Actions.SaveToDisk,{}),u&&g(Au.Action,{title:k("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:k("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{Ev(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:k("overwriteConfirm.action.excalidrawPlus.description")})]}),g(PIe,{onChange:()=>u==null?void 0:u.refresh()}),u&&g(wxe,{excalidrawAPI:u}),g(XY,{}),m&&S&&g("div",{className:"collab-offline-warning",children:k("alerts.collabOfflineWarning")}),E&&g(Z4e,{link:E,onCloseRequest:()=>y(null),setErrorMessage:t}),u&&!n&&g(NIe,{excalidrawAPI:u}),g(fxe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await v(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(C){t(C.message)}}}),e&&g(Y_,{onClose:()=>t(""),children:e}),g(uk,{customCommandPaletteItems:[{label:k("labels.liveCollaboration"),category:nt.app,keywords:["team","multiplayer","share","public","session","invite"],icon:Y9,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:k("roomDialog.button_stopSession"),category:nt.app,predicate:()=>!!(h!=null&&h.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:k("labels.share"),category:nt.app,predicate:!0,icon:AH,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:G9,category:nt.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.followUs"),icon:xH,category:nt.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.discordChat"),category:nt.links,predicate:!0,icon:IH,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:BH,category:nt.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...fT?[{...T,label:"Sign in / Go to Excalidraw+"}]:[_,T],{label:k("overwriteConfirm.action.excalidrawPlus.button"),category:nt.export,icon:kue,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&Ev(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...uk.defaultItems.toggleTheme,perform:()=>{s(i===Ce.DARK?Ce.LIGHT:Ce.DARK)}},{label:k("labels.installPWA"),category:nt.app,predicate:()=>!!mf,perform:()=>{mf&&(mf.prompt(),mf.userChoice.then(()=>{mf=null}))}}]}),Exe()&&u&&g(vxe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},Axe=()=>window.location.pathname==="/excalidraw-plus-export"?g(Ixe,{}):g(axe,{children:g(Jce,{store:Dl,children:g(Cxe,{})})});window.__EXCALIDRAW_SHA__="";const Mxe=document.getElementById("root"),Rxe=OQ.createRoot(Mxe);BQ();Rxe.render(g(L.StrictMode,{children:g(Axe,{})}));export{pe as _,Ma as c,gl as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./subset-worker.chunk-CVR6pt27.js","./subset-shared.chunk-D3ioWSie.js","./pica--E3AsWNs.js","./_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-CLrNXYGf.js.map
