var _K=Object.defineProperty;var TK=(e,t,n)=>t in e?_K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(TK(e,typeof t!="symbol"?t+"":t,n),n);function SK(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fD={exports:{}},O6={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IK=Symbol.for("react.transitional.element"),xK=Symbol.for("react.fragment");function hD(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:IK,type:e,key:i,ref:t!==void 0?t:null,props:n}}O6.Fragment=xK;O6.jsx=hD;O6.jsxs=hD;fD.exports=O6;var pv=fD.exports;const ge=pv.Fragment,g=pv.jsx,P=pv.jsxs;var gD={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv=Symbol.for("react.transitional.element"),CK=Symbol.for("react.portal"),AK=Symbol.for("react.fragment"),MK=Symbol.for("react.strict_mode"),RK=Symbol.for("react.profiler"),kK=Symbol.for("react.consumer"),LK=Symbol.for("react.context"),DK=Symbol.for("react.forward_ref"),OK=Symbol.for("react.suspense"),NK=Symbol.for("react.memo"),mD=Symbol.for("react.lazy"),zS=Symbol.iterator;function PK(e){return e===null||typeof e!="object"?null:(e=zS&&e[zS]||e["@@iterator"],typeof e=="function"?e:null)}var pD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UD=Object.assign,bD={};function Qh(e,t,n){this.props=e,this.context=t,this.refs=bD,this.updater=n||pD}Qh.prototype.isReactComponent={};Qh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yD(){}yD.prototype=Qh.prototype;function bv(e,t,n){this.props=e,this.context=t,this.refs=bD,this.updater=n||pD}var yv=bv.prototype=new yD;yv.constructor=bv;UD(yv,Qh.prototype);yv.isPureReactComponent=!0;var HS=Array.isArray,fn={H:null,A:null,T:null,S:null},ED=Object.prototype.hasOwnProperty;function Ev(e,t,n,i,r,s){return n=s.ref,{$$typeof:Uv,type:e,key:t,ref:n!==void 0?n:null,props:s}}function FK(e,t){return Ev(e.type,t,void 0,void 0,void 0,e.props)}function vv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uv}function BK(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var VS=/\/+/g;function jy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BK(""+e.key):t.toString(36)}function $S(){}function zK(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then($S,$S):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function af(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Uv:case CK:o=!0;break;case mD:return o=e._init,af(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+jy(e,0):i,HS(r)?(n="",o!=null&&(n=o.replace(VS,"$&/")+"/"),af(r,t,n,"",function(c){return c})):r!=null&&(vv(r)&&(r=FK(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(VS,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(HS(e))for(var l=0;l<e.length;l++)i=e[l],s=a+jy(i,l),o+=af(i,t,n,s,r);else if(l=PK(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+jy(i,l++),o+=af(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return af(zK(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Np(e,t,n){if(e==null)return e;var i=[],r=0;return af(e,i,"","",function(s){return t.call(n,s,r++)}),i}function HK(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var GS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function VK(){}We.Children={map:Np,forEach:function(e,t,n){Np(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Np(e,function(){t++}),t},toArray:function(e){return Np(e,function(t){return t})||[]},only:function(e){if(!vv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=Qh;We.Fragment=AK;We.Profiler=RK;We.PureComponent=bv;We.StrictMode=MK;We.Suspense=OK;We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fn;We.act=function(){throw Error("act(...) is not supported in production builds of React.")};We.cache=function(e){return function(){return e.apply(null,arguments)}};We.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=UD({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!ED.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return Ev(e.type,r,void 0,void 0,s,i)};We.createContext=function(e){return e={$$typeof:LK,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:kK,_context:e},e};We.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)ED.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return Ev(e,s,void 0,void 0,null,r)};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:DK,render:e}};We.isValidElement=vv;We.lazy=function(e){return{$$typeof:mD,_payload:{_status:-1,_result:e},_init:HK}};We.memo=function(e,t){return{$$typeof:NK,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=fn.T,n={};fn.T=n;try{var i=e(),r=fn.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(VK,GS)}catch(s){GS(s)}finally{fn.T=t}};We.unstable_useCacheRefresh=function(){return fn.H.useCacheRefresh()};We.use=function(e){return fn.H.use(e)};We.useActionState=function(e,t,n){return fn.H.useActionState(e,t,n)};We.useCallback=function(e,t){return fn.H.useCallback(e,t)};We.useContext=function(e){return fn.H.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e,t){return fn.H.useDeferredValue(e,t)};We.useEffect=function(e,t){return fn.H.useEffect(e,t)};We.useId=function(){return fn.H.useId()};We.useImperativeHandle=function(e,t,n){return fn.H.useImperativeHandle(e,t,n)};We.useInsertionEffect=function(e,t){return fn.H.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return fn.H.useLayoutEffect(e,t)};We.useMemo=function(e,t){return fn.H.useMemo(e,t)};We.useOptimistic=function(e,t){return fn.H.useOptimistic(e,t)};We.useReducer=function(e,t,n){return fn.H.useReducer(e,t,n)};We.useRef=function(e){return fn.H.useRef(e)};We.useState=function(e){return fn.H.useState(e)};We.useSyncExternalStore=function(e,t,n){return fn.H.useSyncExternalStore(e,t,n)};We.useTransition=function(){return fn.H.useTransition()};We.version="19.0.0";gD.exports=We;var D=gD.exports;const ae=dl(D),$K=SK({__proto__:null,default:ae},[D]);var vD={exports:{}},N6={},wD={exports:{}},_D={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,G){var j=z.length;z.push(G);e:for(;0<j;){var X=j-1>>>1,q=z[X];if(0<r(q,G))z[X]=G,z[j]=q,j=X;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var G=z[0],j=z.pop();if(j!==G){z[0]=j;e:for(var X=0,q=z.length,fe=q>>>1;X<fe;){var ie=2*(X+1)-1,Ue=z[ie],Ve=ie+1,$e=z[Ve];if(0>r(Ue,j))Ve<q&&0>r($e,Ue)?(z[X]=$e,z[Ve]=j,X=Ve):(z[X]=Ue,z[ie]=j,X=ie);else if(Ve<q&&0>r($e,j))z[X]=$e,z[Ve]=j,X=Ve;else break e}}return G}function r(z,G){var j=z.sortIndex-G.sortIndex;return j!==0?j:z.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,U=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var G=n(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=z)i(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(c)}}function v(z){if(p=!1,w(z),!m)if(n(l)!==null)m=!0,$();else{var G=n(c);G!==null&&V(v,G.startTime-z)}}var x=!1,M=-1,_=5,T=-1;function I(){return!(e.unstable_now()-T<_)}function C(){if(x){var z=e.unstable_now();T=z;var G=!0;try{e:{m=!1,p&&(p=!1,y(M),M=-1),h=!0;var j=f;try{t:{for(w(z),d=n(l);d!==null&&!(d.expirationTime>z&&I());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var q=X(d.expirationTime<=z);if(z=e.unstable_now(),typeof q=="function"){d.callback=q,w(z),G=!0;break t}d===n(l)&&i(l),w(z)}else i(l);d=n(l)}if(d!==null)G=!0;else{var fe=n(c);fe!==null&&V(v,fe.startTime-z),G=!1}}break e}finally{d=null,f=j,h=!1}G=void 0}}finally{G?R():x=!1}}}var R;if(typeof E=="function")R=function(){E(C)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,k=N.port2;N.port1.onmessage=C,R=function(){k.postMessage(null)}}else R=function(){U(C,0)};function $(){x||(x=!0,R())}function V(z,G){M=U(function(){z(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,$())},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var j=f;f=G;try{return z()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=f;f=z;try{return G()}finally{f=j}},e.unstable_scheduleCallback=function(z,G,j){var X=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?X+j:X):j=X,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,z={id:u++,callback:G,priorityLevel:z,startTime:j,expirationTime:q,sortIndex:-1},j>X?(z.sortIndex=j,t(c,z),n(l)===null&&z===n(c)&&(p?(y(M),M=-1):p=!0,V(v,j-X))):(z.sortIndex=q,t(l,z),m||h||(m=!0,$())),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var G=f;return function(){var j=f;f=G;try{return z.apply(this,arguments)}finally{f=j}}}})(_D);wD.exports=_D;var GK=wD.exports,TD={exports:{}},rr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XK=D;function SD(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function yl(){}var Qi={d:{f:yl,r:function(){throw Error(SD(522))},D:yl,C:yl,L:yl,m:yl,X:yl,S:yl,M:yl},p:0,findDOMNode:null},jK=Symbol.for("react.portal");function YK(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jK,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var F1=XK.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function P6(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qi;rr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(SD(299));return YK(e,t,null,n)};rr.flushSync=function(e){var t=F1.T,n=Qi.p;try{if(F1.T=null,Qi.p=2,e)return e()}finally{F1.T=t,Qi.p=n,Qi.d.f()}};rr.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Qi.d.C(e,t))};rr.prefetchDNS=function(e){typeof e=="string"&&Qi.d.D(e)};rr.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=P6(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Qi.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};rr.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=P6(t.as,t.crossOrigin);Qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Qi.d.M(e)};rr.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=P6(n,t.crossOrigin);Qi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};rr.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=P6(t.as,t.crossOrigin);Qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Qi.d.m(e)};rr.requestFormReset=function(e){Qi.d.r(e)};rr.unstable_batchedUpdates=function(e,t){return e(t)};rr.useFormState=function(e,t,n){return F1.H.useFormState(e,t,n)};rr.useFormStatus=function(){return F1.H.useHostTransitionStatus()};rr.version="19.0.0";function ID(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ID)}catch(e){console.error(e)}}ID(),TD.exports=rr;var Sn=TD.exports;const WK=dl(Sn);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=GK,xD=D,KK=Sn;function te(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function CD(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var ZK=Symbol.for("react.element"),Pp=Symbol.for("react.transitional.element"),f1=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),AD=Symbol.for("react.strict_mode"),d3=Symbol.for("react.profiler"),qK=Symbol.for("react.provider"),MD=Symbol.for("react.consumer"),Ma=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),f3=Symbol.for("react.suspense"),h3=Symbol.for("react.suspense_list"),_v=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),RD=Symbol.for("react.offscreen"),QK=Symbol.for("react.memo_cache_sentinel"),XS=Symbol.iterator;function Ng(e){return e===null||typeof e!="object"?null:(e=XS&&e[XS]||e["@@iterator"],typeof e=="function"?e:null)}var JK=Symbol.for("react.client.reference");function g3(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===JK?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ef:return"Fragment";case f1:return"Portal";case d3:return"Profiler";case AD:return"StrictMode";case f3:return"Suspense";case h3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ma:return(e.displayName||"Context")+".Provider";case MD:return(e._context.displayName||"Context")+".Consumer";case wv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _v:return t=e.displayName||null,t!==null?t:g3(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return g3(e(t))}catch{}}return null}var je=xD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nn=Object.assign,Yy,jS;function h1(e){if(Yy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yy=t&&t[1]||"",jS=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yy+e+jS}var Wy=!1;function Ky(e,t){if(!e||Wy)return"";Wy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{Wy=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?h1(n):""}function eZ(e){switch(e.tag){case 26:case 27:case 5:return h1(e.type);case 16:return h1("Lazy");case 13:return h1("Suspense");case 19:return h1("SuspenseList");case 0:case 15:return e=Ky(e.type,!1),e;case 11:return e=Ky(e.type.render,!1),e;case 1:return e=Ky(e.type,!0),e;default:return""}}function YS(e){try{var t="";do t+=eZ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Jh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function WS(e){if(Jh(e)!==e)throw Error(te(188))}function tZ(e){var t=e.alternate;if(!t){if(t=Jh(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return WS(r),e;if(s===i)return WS(r),t;s=s.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function LD(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=LD(e),t!==null)return t;e=e.sibling}return null}var g1=Array.isArray,tn=KK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Du={pending:!1,data:null,method:null,action:null},m3=[],vf=-1;function ta(e){return{current:e}}function hi(e){0>vf||(e.current=m3[vf],m3[vf]=null,vf--)}function cn(e,t){vf++,m3[vf]=e.current,e.current=t}var Po=ta(null),Sm=ta(null),nc=ta(null),R2=ta(null);function k2(e,t){switch(cn(nc,t),cn(Sm,e),cn(Po,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?KI(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=KI(e),t=XN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}hi(Po),cn(Po,t)}function ch(){hi(Po),hi(Sm),hi(nc)}function p3(e){e.memoizedState!==null&&cn(R2,e);var t=Po.current,n=XN(t,e.type);t!==n&&(cn(Sm,e),cn(Po,n))}function L2(e){Sm.current===e&&(hi(Po),hi(Sm)),R2.current===e&&(hi(R2),Nm._currentValue=Du)}var U3=Object.prototype.hasOwnProperty,Tv=ni.unstable_scheduleCallback,Zy=ni.unstable_cancelCallback,nZ=ni.unstable_shouldYield,iZ=ni.unstable_requestPaint,Fo=ni.unstable_now,rZ=ni.unstable_getCurrentPriorityLevel,DD=ni.unstable_ImmediatePriority,OD=ni.unstable_UserBlockingPriority,D2=ni.unstable_NormalPriority,sZ=ni.unstable_LowPriority,ND=ni.unstable_IdlePriority,oZ=ni.log,aZ=ni.unstable_setDisableYieldValue,R0=null,Hr=null;function lZ(e){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(R0,e,void 0,(e.current.flags&128)===128)}catch{}}function Yl(e){if(typeof oZ=="function"&&aZ(e),Hr&&typeof Hr.setStrictMode=="function")try{Hr.setStrictMode(R0,e)}catch{}}var Vr=Math.clz32?Math.clz32:dZ,cZ=Math.log,uZ=Math.LN2;function dZ(e){return e>>>=0,e===0?32:31-(cZ(e)/uZ|0)|0}var Fp=128,Bp=4194304;function lu(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function F6(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=lu(n):(s&=a,s!==0?i=lu(s):e||(o=a&~o,o!==0&&(i=lu(o))))):(a=n&~r,a!==0?i=lu(a):s!==0?i=lu(s):e||(o=n&~o,o!==0&&(i=lu(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function k0(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function fZ(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PD(){var e=Fp;return Fp<<=1,!(Fp&4194176)&&(Fp=128),e}function FD(){var e=Bp;return Bp<<=1,!(Bp&62914560)&&(Bp=4194304),e}function qy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function L0(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hZ(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Vr(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&BD(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function BD(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Vr(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function zD(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Vr(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function HD(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function VD(){var e=tn.p;return e!==0?e:(e=window.event,e===void 0?32:tP(e.type))}function gZ(e,t){var n=tn.p;try{return tn.p=e,t()}finally{tn.p=n}}var Gc=Math.random().toString(36).slice(2),Bi="__reactFiber$"+Gc,Er="__reactProps$"+Gc,eg="__reactContainer$"+Gc,b3="__reactEvents$"+Gc,mZ="__reactListeners$"+Gc,pZ="__reactHandles$"+Gc,KS="__reactResources$"+Gc,Im="__reactMarker$"+Gc;function Sv(e){delete e[Bi],delete e[Er],delete e[b3],delete e[mZ],delete e[pZ]}function vu(e){var t=e[Bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eg]||n[Bi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qI(e);e!==null;){if(n=e[Bi])return n;e=qI(e)}return t}e=n,n=e.parentNode}return null}function tg(e){if(e=e[Bi]||e[eg]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function m1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(te(33))}function Vf(e){var t=e[KS];return t||(t=e[KS]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ci(e){e[Im]=!0}var $D=new Set,GD={};function Sd(e,t){uh(e,t),uh(e+"Capture",t)}function uh(e,t){for(GD[e]=t,e=0;e<t.length;e++)$D.add(t[e])}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UZ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ZS={},qS={};function bZ(e){return U3.call(qS,e)?!0:U3.call(ZS,e)?!1:UZ.test(e)?qS[e]=!0:(ZS[e]=!0,!1)}function zU(e,t,n){if(bZ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function zp(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function la(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function rs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yZ(e){var t=XD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function O2(e){e._valueTracker||(e._valueTracker=yZ(e))}function jD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=XD(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function N2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var EZ=/[\n"\\]/g;function as(e){return e.replace(EZ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function y3(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+rs(t)):e.value!==""+rs(t)&&(e.value=""+rs(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?E3(e,o,rs(t)):n!=null?E3(e,o,rs(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+rs(a):e.removeAttribute("name")}function YD(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+rs(n):"",t=t!=null?""+rs(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function E3(e,t,n){t==="number"&&N2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function $f(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+rs(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function WD(e,t,n){if(t!=null&&(t=""+rs(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+rs(n):""}function KD(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(te(92));if(g1(i)){if(1<i.length)throw Error(te(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=rs(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function dh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vZ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function QS(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||vZ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ZD(e,t,n){if(t!=null&&typeof t!="object")throw Error(te(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&QS(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&QS(e,s,t[s])}function Iv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wZ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_Z=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function HU(e){return _Z.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var v3=null;function xv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wf=null,Gf=null;function JS(e){var t=tg(e);if(t&&(e=t.stateNode)){var n=e[Er]||null;e:switch(e=t.stateNode,t.type){case"input":if(y3(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+as(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Er]||null;if(!r)throw Error(te(90));y3(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&jD(i)}break e;case"textarea":WD(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&$f(e,!!n.multiple,t,!1)}}}var Qy=!1;function qD(e,t,n){if(Qy)return e(t,n);Qy=!0;try{var i=e(t);return i}finally{if(Qy=!1,(wf!==null||Gf!==null)&&(W6(),wf&&(t=wf,e=Gf,Gf=wf=null,JS(t),e)))for(t=0;t<e.length;t++)JS(e[t])}}function xm(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Er]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var w3=!1;if(ja)try{var Pg={};Object.defineProperty(Pg,"passive",{get:function(){w3=!0}}),window.addEventListener("test",Pg,Pg),window.removeEventListener("test",Pg,Pg)}catch{w3=!1}var Wl=null,Cv=null,VU=null;function QD(){if(VU)return VU;var e,t=Cv,n=t.length,i,r="value"in Wl?Wl.value:Wl.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return VU=r.slice(e,1<i?1-i:void 0)}function $U(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hp(){return!0}function eI(){return!1}function wr(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hp:eI,this.isPropagationStopped=eI,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hp)},persist:function(){},isPersistent:Hp}),t}var Id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B6=wr(Id),D0=nn({},Id,{view:0,detail:0}),TZ=wr(D0),Jy,e8,Fg,z6=nn({},D0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Av,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fg&&(Fg&&e.type==="mousemove"?(Jy=e.screenX-Fg.screenX,e8=e.screenY-Fg.screenY):e8=Jy=0,Fg=e),Jy)},movementY:function(e){return"movementY"in e?e.movementY:e8}}),tI=wr(z6),SZ=nn({},z6,{dataTransfer:0}),IZ=wr(SZ),xZ=nn({},D0,{relatedTarget:0}),t8=wr(xZ),CZ=nn({},Id,{animationName:0,elapsedTime:0,pseudoElement:0}),AZ=wr(CZ),MZ=nn({},Id,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RZ=wr(MZ),kZ=nn({},Id,{data:0}),nI=wr(kZ),LZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OZ[e])?!!t[e]:!1}function Av(){return NZ}var PZ=nn({},D0,{key:function(e){if(e.key){var t=LZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$U(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Av,charCode:function(e){return e.type==="keypress"?$U(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$U(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FZ=wr(PZ),BZ=nn({},z6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iI=wr(BZ),zZ=nn({},D0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Av}),HZ=wr(zZ),VZ=nn({},Id,{propertyName:0,elapsedTime:0,pseudoElement:0}),$Z=wr(VZ),GZ=nn({},z6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XZ=wr(GZ),jZ=nn({},Id,{newState:0,oldState:0}),YZ=wr(jZ),WZ=[9,13,27,32],Mv=ja&&"CompositionEvent"in window,B1=null;ja&&"documentMode"in document&&(B1=document.documentMode);var KZ=ja&&"TextEvent"in window&&!B1,JD=ja&&(!Mv||B1&&8<B1&&11>=B1),rI=" ",sI=!1;function eO(e,t){switch(e){case"keyup":return WZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _f=!1;function ZZ(e,t){switch(e){case"compositionend":return tO(t);case"keypress":return t.which!==32?null:(sI=!0,rI);case"textInput":return e=t.data,e===rI&&sI?null:e;default:return null}}function qZ(e,t){if(_f)return e==="compositionend"||!Mv&&eO(e,t)?(e=QD(),VU=Cv=Wl=null,_f=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return JD&&t.locale!=="ko"?null:t.data;default:return null}}var QZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QZ[e.type]:t==="textarea"}function nO(e,t,n,i){wf?Gf?Gf.push(i):Gf=[i]:wf=i,t=Q2(t,"onChange"),0<t.length&&(n=new B6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var z1=null,Cm=null;function JZ(e){VN(e,0)}function H6(e){var t=m1(e);if(jD(t))return e}function aI(e,t){if(e==="change")return t}var iO=!1;if(ja){var n8;if(ja){var i8="oninput"in document;if(!i8){var lI=document.createElement("div");lI.setAttribute("oninput","return;"),i8=typeof lI.oninput=="function"}n8=i8}else n8=!1;iO=n8&&(!document.documentMode||9<document.documentMode)}function cI(){z1&&(z1.detachEvent("onpropertychange",rO),Cm=z1=null)}function rO(e){if(e.propertyName==="value"&&H6(Cm)){var t=[];nO(t,Cm,e,xv(e)),qD(JZ,t)}}function eq(e,t,n){e==="focusin"?(cI(),z1=t,Cm=n,z1.attachEvent("onpropertychange",rO)):e==="focusout"&&cI()}function tq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return H6(Cm)}function nq(e,t){if(e==="click")return H6(t)}function iq(e,t){if(e==="input"||e==="change")return H6(t)}function rq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jr=typeof Object.is=="function"?Object.is:rq;function Am(e,t){if(jr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!U3.call(t,r)||!jr(e[r],t[r]))return!1}return!0}function uI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dI(e,t){var n=uI(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uI(n)}}function sO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oO(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=N2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=N2(e.document)}return t}function Rv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sq(e,t){var n=oO(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&sO(t.ownerDocument.documentElement,t)){if(i!==null&&Rv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=dI(t,s);var o=dI(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var oq=ja&&"documentMode"in document&&11>=document.documentMode,Tf=null,_3=null,H1=null,T3=!1;function fI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;T3||Tf==null||Tf!==N2(i)||(i=Tf,"selectionStart"in i&&Rv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),H1&&Am(H1,i)||(H1=i,i=Q2(_3,"onSelect"),0<i.length&&(t=new B6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Tf)))}function iu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sf={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionrun:iu("Transition","TransitionRun"),transitionstart:iu("Transition","TransitionStart"),transitioncancel:iu("Transition","TransitionCancel"),transitionend:iu("Transition","TransitionEnd")},r8={},aO={};ja&&(aO=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function xd(e){if(r8[e])return r8[e];if(!Sf[e])return e;var t=Sf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in aO)return r8[e]=t[n];return e}var lO=xd("animationend"),cO=xd("animationiteration"),uO=xd("animationstart"),aq=xd("transitionrun"),lq=xd("transitionstart"),cq=xd("transitioncancel"),dO=xd("transitionend"),fO=new Map,hI="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ho(e,t){fO.set(e,t),Sd(t,[e])}var ts=[],If=0,kv=0;function V6(){for(var e=If,t=kv=If=0;t<e;){var n=ts[t];ts[t++]=null;var i=ts[t];ts[t++]=null;var r=ts[t];ts[t++]=null;var s=ts[t];if(ts[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&hO(n,r,s)}}function $6(e,t,n,i){ts[If++]=e,ts[If++]=t,ts[If++]=n,ts[If++]=i,kv|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Lv(e,t,n,i){return $6(e,t,n,i),P2(e)}function vc(e,t){return $6(e,null,null,t),P2(e)}function hO(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Vr(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function P2(e){if(50<J1)throw J1=0,j3=null,Error(te(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var xf={},gI=new WeakMap;function ls(e,t){if(typeof e=="object"&&e!==null){var n=gI.get(e);return n!==void 0?n:(t={value:e,source:t,stack:YS(t)},gI.set(e,t),t)}return{value:e,source:t,stack:YS(t)}}var Cf=[],Af=0,F2=null,B2=0,ss=[],os=0,Ou=null,Ra=1,ka="";function cu(e,t){Cf[Af++]=B2,Cf[Af++]=F2,F2=e,B2=t}function gO(e,t,n){ss[os++]=Ra,ss[os++]=ka,ss[os++]=Ou,Ou=e;var i=Ra;e=ka;var r=32-Vr(i)-1;i&=~(1<<r),n+=1;var s=32-Vr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ra=1<<32-Vr(t)+r|n<<r|i,ka=s+e}else Ra=1<<s|n<<r|i,ka=e}function Dv(e){e.return!==null&&(cu(e,1),gO(e,1,0))}function Ov(e){for(;e===F2;)F2=Cf[--Af],Cf[Af]=null,B2=Cf[--Af],Cf[Af]=null;for(;e===Ou;)Ou=ss[--os],ss[os]=null,ka=ss[--os],ss[os]=null,Ra=ss[--os],ss[os]=null}var Zi=null,vi=null,St=!1,zs=null,Co=!1,S3=Error(te(519));function Wu(e){var t=Error(te(418,""));throw Mm(ls(t,e)),S3}function mI(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Bi]=e,t[Er]=i,n){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(n=0;n<Lm.length;n++)st(Lm[n],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),YD(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),O2(t);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),KD(t,i.value,i.defaultValue,i.children),O2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||GN(t.textContent,n)?(i.popover!=null&&(st("beforetoggle",t),st("toggle",t)),i.onScroll!=null&&st("scroll",t),i.onScrollEnd!=null&&st("scrollend",t),i.onClick!=null&&(t.onclick=Z6),t=!0):t=!1,t||Wu(e)}function pI(e){for(Zi=e.return;Zi;)switch(Zi.tag){case 3:case 27:Co=!0;return;case 5:case 13:Co=!1;return;default:Zi=Zi.return}}function Bg(e){if(e!==Zi)return!1;if(!St)return pI(e),St=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||J3(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&vi&&Wu(e),pI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){vi=Zs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}vi=null}}else vi=Zi?Zs(e.stateNode.nextSibling):null;return!0}function O0(){vi=Zi=null,St=!1}function Mm(e){zs===null?zs=[e]:zs.push(e)}var V1=Error(te(460)),mO=Error(te(474)),I3={then:function(){}};function UI(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vp(){}function pO(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Vp,Vp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===V1?Error(te(483)):e;default:if(typeof t.status=="string")t.then(Vp,Vp);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(te(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===V1?Error(te(483)):e}throw $1=t,V1}}var $1=null;function bI(){if($1===null)throw Error(te(459));var e=$1;return $1=null,e}var Xf=null,Rm=0;function $p(e){var t=Rm;return Rm+=1,Xf===null&&(Xf=[]),pO(Xf,e,t)}function zg(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gp(e,t){throw t.$$typeof===ZK?Error(te(525)):(e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function yI(e){var t=e._init;return t(e._payload)}function UO(e){function t(y,E){if(e){var w=y.deletions;w===null?(y.deletions=[E],y.flags|=16):w.push(E)}}function n(y,E){if(!e)return null;for(;E!==null;)t(y,E),E=E.sibling;return null}function i(y){for(var E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function r(y,E){return y=sc(y,E),y.index=0,y.sibling=null,y}function s(y,E,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<E?(y.flags|=33554434,E):w):(y.flags|=33554434,E)):(y.flags|=1048576,E)}function o(y){return e&&y.alternate===null&&(y.flags|=33554434),y}function a(y,E,w,v){return E===null||E.tag!==6?(E=p8(w,y.mode,v),E.return=y,E):(E=r(E,w),E.return=y,E)}function l(y,E,w,v){var x=w.type;return x===Ef?u(y,E,w.props.children,v,w.key):E!==null&&(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ll&&yI(x)===E.type)?(E=r(E,w.props),zg(E,w),E.return=y,E):(E=WU(w.type,w.key,w.props,null,y.mode,v),zg(E,w),E.return=y,E)}function c(y,E,w,v){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=U8(w,y.mode,v),E.return=y,E):(E=r(E,w.children||[]),E.return=y,E)}function u(y,E,w,v,x){return E===null||E.tag!==7?(E=Pu(w,y.mode,v,x),E.return=y,E):(E=r(E,w),E.return=y,E)}function d(y,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=p8(""+E,y.mode,w),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pp:return w=WU(E.type,E.key,E.props,null,y.mode,w),zg(w,E),w.return=y,w;case f1:return E=U8(E,y.mode,w),E.return=y,E;case Ll:var v=E._init;return E=v(E._payload),d(y,E,w)}if(g1(E)||Ng(E))return E=Pu(E,y.mode,w,null),E.return=y,E;if(typeof E.then=="function")return d(y,$p(E),w);if(E.$$typeof===Ma)return d(y,Xp(y,E),w);Gp(y,E)}return null}function f(y,E,w,v){var x=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return x!==null?null:a(y,E,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pp:return w.key===x?l(y,E,w,v):null;case f1:return w.key===x?c(y,E,w,v):null;case Ll:return x=w._init,w=x(w._payload),f(y,E,w,v)}if(g1(w)||Ng(w))return x!==null?null:u(y,E,w,v,null);if(typeof w.then=="function")return f(y,E,$p(w),v);if(w.$$typeof===Ma)return f(y,E,Xp(y,w),v);Gp(y,w)}return null}function h(y,E,w,v,x){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return y=y.get(w)||null,a(E,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Pp:return y=y.get(v.key===null?w:v.key)||null,l(E,y,v,x);case f1:return y=y.get(v.key===null?w:v.key)||null,c(E,y,v,x);case Ll:var M=v._init;return v=M(v._payload),h(y,E,w,v,x)}if(g1(v)||Ng(v))return y=y.get(w)||null,u(E,y,v,x,null);if(typeof v.then=="function")return h(y,E,w,$p(v),x);if(v.$$typeof===Ma)return h(y,E,w,Xp(E,v),x);Gp(E,v)}return null}function m(y,E,w,v){for(var x=null,M=null,_=E,T=E=0,I=null;_!==null&&T<w.length;T++){_.index>T?(I=_,_=null):I=_.sibling;var C=f(y,_,w[T],v);if(C===null){_===null&&(_=I);break}e&&_&&C.alternate===null&&t(y,_),E=s(C,E,T),M===null?x=C:M.sibling=C,M=C,_=I}if(T===w.length)return n(y,_),St&&cu(y,T),x;if(_===null){for(;T<w.length;T++)_=d(y,w[T],v),_!==null&&(E=s(_,E,T),M===null?x=_:M.sibling=_,M=_);return St&&cu(y,T),x}for(_=i(_);T<w.length;T++)I=h(_,y,T,w[T],v),I!==null&&(e&&I.alternate!==null&&_.delete(I.key===null?T:I.key),E=s(I,E,T),M===null?x=I:M.sibling=I,M=I);return e&&_.forEach(function(R){return t(y,R)}),St&&cu(y,T),x}function p(y,E,w,v){if(w==null)throw Error(te(151));for(var x=null,M=null,_=E,T=E=0,I=null,C=w.next();_!==null&&!C.done;T++,C=w.next()){_.index>T?(I=_,_=null):I=_.sibling;var R=f(y,_,C.value,v);if(R===null){_===null&&(_=I);break}e&&_&&R.alternate===null&&t(y,_),E=s(R,E,T),M===null?x=R:M.sibling=R,M=R,_=I}if(C.done)return n(y,_),St&&cu(y,T),x;if(_===null){for(;!C.done;T++,C=w.next())C=d(y,C.value,v),C!==null&&(E=s(C,E,T),M===null?x=C:M.sibling=C,M=C);return St&&cu(y,T),x}for(_=i(_);!C.done;T++,C=w.next())C=h(_,y,T,C.value,v),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?T:C.key),E=s(C,E,T),M===null?x=C:M.sibling=C,M=C);return e&&_.forEach(function(N){return t(y,N)}),St&&cu(y,T),x}function U(y,E,w,v){if(typeof w=="object"&&w!==null&&w.type===Ef&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pp:e:{for(var x=w.key;E!==null;){if(E.key===x){if(x=w.type,x===Ef){if(E.tag===7){n(y,E.sibling),v=r(E,w.props.children),v.return=y,y=v;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ll&&yI(x)===E.type){n(y,E.sibling),v=r(E,w.props),zg(v,w),v.return=y,y=v;break e}n(y,E);break}else t(y,E);E=E.sibling}w.type===Ef?(v=Pu(w.props.children,y.mode,v,w.key),v.return=y,y=v):(v=WU(w.type,w.key,w.props,null,y.mode,v),zg(v,w),v.return=y,y=v)}return o(y);case f1:e:{for(x=w.key;E!==null;){if(E.key===x)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(y,E.sibling),v=r(E,w.children||[]),v.return=y,y=v;break e}else{n(y,E);break}else t(y,E);E=E.sibling}v=U8(w,y.mode,v),v.return=y,y=v}return o(y);case Ll:return x=w._init,w=x(w._payload),U(y,E,w,v)}if(g1(w))return m(y,E,w,v);if(Ng(w)){if(x=Ng(w),typeof x!="function")throw Error(te(150));return w=x.call(w),p(y,E,w,v)}if(typeof w.then=="function")return U(y,E,$p(w),v);if(w.$$typeof===Ma)return U(y,E,Xp(y,w),v);Gp(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(n(y,E.sibling),v=r(E,w),v.return=y,y=v):(n(y,E),v=p8(w,y.mode,v),v.return=y,y=v),o(y)):n(y,E)}return function(y,E,w,v){try{Rm=0;var x=U(y,E,w,v);return Xf=null,x}catch(_){if(_===V1)throw _;var M=fs(29,_,null,y.mode);return M.lanes=v,M.return=y,M}finally{}}}var Ku=UO(!0),bO=UO(!1),fh=ta(null),z2=ta(0);function EI(e,t){e=Ka,cn(z2,e),cn(fh,t),Ka=e|t.baseLanes}function x3(){cn(z2,Ka),cn(fh,fh.current)}function Nv(){Ka=z2.current,hi(fh),hi(z2)}var _s=ta(null),Bo=null;function zl(e){var t=e.alternate;cn(Qn,Qn.current&1),cn(_s,e),Bo===null&&(t===null||fh.current!==null||t.memoizedState!==null)&&(Bo=e)}function yO(e){if(e.tag===22){if(cn(Qn,Qn.current),cn(_s,e),Bo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bo=e)}}else Hl()}function Hl(){cn(Qn,Qn.current),cn(_s,_s.current)}function La(e){hi(_s),Bo===e&&(Bo=null),hi(Qn)}var Qn=ta(0);function H2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uq=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},dq=ni.unstable_scheduleCallback,fq=ni.unstable_NormalPriority,qn={$$typeof:Ma,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pv(){return{controller:new uq,data:new Map,refCount:0}}function N0(e){e.refCount--,e.refCount===0&&dq(fq,function(){e.controller.abort()})}var G1=null,C3=0,hh=0,jf=null;function hq(e,t){if(G1===null){var n=G1=[];C3=0,hh=ow(),jf={status:"pending",value:void 0,then:function(i){n.push(i)}}}return C3++,t.then(vI,vI),t}function vI(){if(--C3===0&&G1!==null){jf!==null&&(jf.status="fulfilled");var e=G1;G1=null,hh=0,jf=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gq(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var wI=je.S;je.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&hq(e,t),wI!==null&&wI(e,t)};var Nu=ta(null);function Fv(){var e=Nu.current;return e!==null?e:Wt.pooledCache}function GU(e,t){t===null?cn(Nu,Nu.current):cn(Nu,t.pool)}function EO(){var e=Fv();return e===null?null:{parent:qn._currentValue,pool:e}}var wc=0,Ke=null,Nt=null,On=null,V2=!1,Yf=!1,Zu=!1,$2=0,km=0,Wf=null,mq=0;function _n(){throw Error(te(321))}function Bv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function zv(e,t,n,i,r,s){return wc=s,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,je.H=e===null||e.memoizedState===null?Cd:Xc,Zu=!1,s=n(i,r),Zu=!1,Yf&&(s=wO(t,n,i,r)),vO(e),s}function vO(e){je.H=Vo;var t=Nt!==null&&Nt.next!==null;if(wc=0,On=Nt=Ke=null,V2=!1,km=0,Wf=null,t)throw Error(te(300));e===null||di||(e=e.dependencies,e!==null&&j2(e)&&(di=!0))}function wO(e,t,n,i){Ke=e;var r=0;do{if(Yf&&(Wf=null),km=0,Yf=!1,25<=r)throw Error(te(301));if(r+=1,On=Nt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}je.H=Ad,s=t(n,i)}while(Yf);return s}function pq(){var e=je.H,t=e.useState()[0];return t=typeof t.then=="function"?P0(t):t,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(Ke.flags|=1024),t}function Hv(){var e=$2!==0;return $2=0,e}function Vv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function $v(e){if(V2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}V2=!1}wc=0,On=Nt=Ke=null,Yf=!1,km=$2=0,Wf=null}function ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?Ke.memoizedState=On=e:On=On.next=e,On}function Hn(){if(Nt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var t=On===null?Ke.memoizedState:On.next;if(t!==null)On=t,Nt=e;else{if(e===null)throw Ke.alternate===null?Error(te(467)):Error(te(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},On===null?Ke.memoizedState=On=e:On=On.next=e}return On}var G6;G6=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function P0(e){var t=km;return km+=1,Wf===null&&(Wf=[]),e=pO(Wf,e,t),t=Ke,(On===null?t.memoizedState:On.next)===null&&(t=t.alternate,je.H=t===null||t.memoizedState===null?Cd:Xc),e}function X6(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return P0(e);if(e.$$typeof===Ma)return zi(e)}throw Error(te(438,String(e)))}function Gv(e){var t=null,n=Ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=G6(),Ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=QK;return t.index++,n}function Ya(e,t){return typeof t=="function"?t(e):t}function XU(e){var t=Hn();return Xv(t,Nt,e)}function Xv(e,t,n){var i=e.queue;if(i===null)throw Error(te(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(mt&d)===d:(wc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===hh&&(u=!0);else if((wc&f)===f){c=c.next,f===hh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,Ke.lanes|=f,Tc|=f;d=c.action,Zu&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,Ke.lanes|=d,Tc|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!jr(s,e.memoizedState)&&(di=!0,u&&(n=jf,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function s8(e){var t=Hn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);jr(s,t.memoizedState)||(di=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function _O(e,t,n){var i=Ke,r=Hn(),s=St;if(s){if(n===void 0)throw Error(te(407));n=n()}else n=t();var o=!jr((Nt||r).memoizedState,n);if(o&&(r.memoizedState=n,di=!0),r=r.queue,jv(IO.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||On!==null&&On.memoizedState.tag&1){if(i.flags|=2048,gh(9,SO.bind(null,i,r,n,t),{destroy:void 0},null),Wt===null)throw Error(te(349));s||wc&60||TO(i,t,n)}return n}function TO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t=G6(),Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function SO(e,t,n,i){t.value=n,t.getSnapshot=i,xO(t)&&CO(e)}function IO(e,t,n){return n(function(){xO(t)&&CO(e)})}function xO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jr(e,n)}catch{return!0}}function CO(e){var t=vc(e,2);t!==null&&er(t,e,2)}function A3(e){var t=ur();if(typeof e=="function"){var n=e;if(e=n(),Zu){Yl(!0);try{n()}finally{Yl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t}function AO(e,t,n,i){return e.baseState=n,Xv(e,Nt,typeof i=="function"?i:Ya)}function Uq(e,t,n,i,r){if(Y6(e))throw Error(te(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};je.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,MO(t,s)):(s.next=n.next,t.pending=n.next=s)}}function MO(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=je.T,o={};je.T=o;try{var a=n(r,i),l=je.S;l!==null&&l(o,a),_I(e,t,a)}catch(c){M3(e,t,c)}finally{je.T=s}}else try{s=n(r,i),_I(e,t,s)}catch(c){M3(e,t,c)}}function _I(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){TI(e,t,i)},function(i){return M3(e,t,i)}):TI(e,t,n)}function TI(e,t,n){t.status="fulfilled",t.value=n,RO(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,MO(e,n)))}function M3(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,RO(t),t=t.next;while(t!==i)}e.action=null}function RO(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function kO(e,t){return t}function LO(e,t){if(St){var n=Wt.formState;if(n!==null){e:{var i=Ke;if(St){if(vi){t:{for(var r=vi,s=Co;r.nodeType!==8;){if(!s){r=null;break t}if(r=Zs(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){vi=Zs(r.nextSibling),i=r.data==="F!";break e}}Wu(i)}i=!1}i&&(t=n[0])}}return n=ur(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kO,lastRenderedState:t},n.queue=i,n=ZO.bind(null,Ke,i),i.dispatch=n,i=A3(!1),s=Zv.bind(null,Ke,!1,i.queue),i=ur(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=Uq.bind(null,Ke,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function DO(e){var t=Hn();return OO(t,Nt,e)}function OO(e,t,n){t=Xv(e,t,kO)[0],e=XU(Ya)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?P0(t):t;var i=Hn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(Ke.flags|=2048,gh(9,bq.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function bq(e,t){e.action=t}function NO(e){var t=Hn(),n=Nt;if(n!==null)return OO(t,n,e);Hn(),t=t.memoizedState,n=Hn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function gh(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=Ke.updateQueue,t===null&&(t=G6(),Ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function PO(){return Hn().memoizedState}function jU(e,t,n,i){var r=ur();Ke.flags|=e,r.memoizedState=gh(1|t,n,{destroy:void 0},i===void 0?null:i)}function j6(e,t,n,i){var r=Hn();i=i===void 0?null:i;var s=r.memoizedState.inst;Nt!==null&&i!==null&&Bv(i,Nt.memoizedState.deps)?r.memoizedState=gh(t,n,s,i):(Ke.flags|=e,r.memoizedState=gh(1|t,n,s,i))}function SI(e,t){jU(8390656,8,e,t)}function jv(e,t){j6(2048,8,e,t)}function FO(e,t){return j6(4,2,e,t)}function BO(e,t){return j6(4,4,e,t)}function zO(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function HO(e,t,n){n=n!=null?n.concat([e]):null,j6(4,4,zO.bind(null,t,e),n)}function Yv(){}function VO(e,t){var n=Hn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Bv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $O(e,t){var n=Hn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Bv(t,i[1]))return i[0];if(i=e(),Zu){Yl(!0);try{e()}finally{Yl(!1)}}return n.memoizedState=[i,t],i}function Wv(e,t,n){return n===void 0||wc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=RN(),Ke.lanes|=e,Tc|=e,n)}function GO(e,t,n,i){return jr(n,t)?n:fh.current!==null?(e=Wv(e,n,i),jr(e,t)||(di=!0),e):wc&42?(e=RN(),Ke.lanes|=e,Tc|=e,t):(di=!0,e.memoizedState=n)}function XO(e,t,n,i,r){var s=tn.p;tn.p=s!==0&&8>s?s:8;var o=je.T,a={};je.T=a,Zv(e,!1,t,n);try{var l=r(),c=je.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=gq(l,i);X1(e,t,u,$r(e))}else X1(e,t,i,$r(e))}catch(d){X1(e,t,{then:function(){},status:"rejected",reason:d},$r())}finally{tn.p=s,je.T=o}}function yq(){}function R3(e,t,n,i){if(e.tag!==5)throw Error(te(476));var r=jO(e).queue;XO(e,r,t,Du,n===null?yq:function(){return YO(e),n(i)})}function jO(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Du,baseState:Du,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:Du},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function YO(e){var t=jO(e).next.queue;X1(e,t,{},$r())}function Kv(){return zi(Nm)}function WO(){return Hn().memoizedState}function KO(){return Hn().memoizedState}function Eq(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=$r();e=ic(n);var i=rc(t,e,n);i!==null&&(er(i,t,n),Y1(i,t,n)),t={cache:Pv()},e.payload=t;return}t=t.return}}function vq(e,t,n){var i=$r();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Y6(e)?qO(t,n):(n=Lv(e,t,n,i),n!==null&&(er(n,e,i),QO(n,t,i)))}function ZO(e,t,n){var i=$r();X1(e,t,n,i)}function X1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y6(e))qO(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,jr(a,o))return $6(e,t,r,0),Wt===null&&V6(),!1}catch{}finally{}if(n=Lv(e,t,r,i),n!==null)return er(n,e,i),QO(n,t,i),!0}return!1}function Zv(e,t,n,i){if(i={lane:2,revertLane:ow(),action:i,hasEagerState:!1,eagerState:null,next:null},Y6(e)){if(t)throw Error(te(479))}else t=Lv(e,n,i,2),t!==null&&er(t,e,2)}function Y6(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function qO(e,t){Yf=V2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function QO(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,zD(e,n)}}var Vo={readContext:zi,use:X6,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n};Vo.useCacheRefresh=_n;Vo.useMemoCache=_n;Vo.useHostTransitionStatus=_n;Vo.useFormState=_n;Vo.useActionState=_n;Vo.useOptimistic=_n;var Cd={readContext:zi,use:X6,useCallback:function(e,t){return ur().memoizedState=[e,t===void 0?null:t],e},useContext:zi,useEffect:SI,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,jU(4194308,4,zO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jU(4194308,4,e,t)},useInsertionEffect:function(e,t){jU(4,2,e,t)},useMemo:function(e,t){var n=ur();t=t===void 0?null:t;var i=e();if(Zu){Yl(!0);try{e()}finally{Yl(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ur();if(n!==void 0){var r=n(t);if(Zu){Yl(!0);try{n(t)}finally{Yl(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=vq.bind(null,Ke,e),[i.memoizedState,e]},useRef:function(e){var t=ur();return e={current:e},t.memoizedState=e},useState:function(e){e=A3(e);var t=e.queue,n=ZO.bind(null,Ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yv,useDeferredValue:function(e,t){var n=ur();return Wv(n,e,t)},useTransition:function(){var e=A3(!1);return e=XO.bind(null,Ke,e.queue,!0,!1),ur().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ke,r=ur();if(St){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Wt===null)throw Error(te(349));mt&60||TO(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,SI(IO.bind(null,i,s,e),[e]),i.flags|=2048,gh(9,SO.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=ur(),t=Wt.identifierPrefix;if(St){var n=ka,i=Ra;n=(i&~(1<<32-Vr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=$2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ur().memoizedState=Eq.bind(null,Ke)}};Cd.useMemoCache=Gv;Cd.useHostTransitionStatus=Kv;Cd.useFormState=LO;Cd.useActionState=LO;Cd.useOptimistic=function(e){var t=ur();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Zv.bind(null,Ke,!0,n),n.dispatch=t,[e,t]};var Xc={readContext:zi,use:X6,useCallback:VO,useContext:zi,useEffect:jv,useImperativeHandle:HO,useInsertionEffect:FO,useLayoutEffect:BO,useMemo:$O,useReducer:XU,useRef:PO,useState:function(){return XU(Ya)},useDebugValue:Yv,useDeferredValue:function(e,t){var n=Hn();return GO(n,Nt.memoizedState,e,t)},useTransition:function(){var e=XU(Ya)[0],t=Hn().memoizedState;return[typeof e=="boolean"?e:P0(e),t]},useSyncExternalStore:_O,useId:WO};Xc.useCacheRefresh=KO;Xc.useMemoCache=Gv;Xc.useHostTransitionStatus=Kv;Xc.useFormState=DO;Xc.useActionState=DO;Xc.useOptimistic=function(e,t){var n=Hn();return AO(n,Nt,e,t)};var Ad={readContext:zi,use:X6,useCallback:VO,useContext:zi,useEffect:jv,useImperativeHandle:HO,useInsertionEffect:FO,useLayoutEffect:BO,useMemo:$O,useReducer:s8,useRef:PO,useState:function(){return s8(Ya)},useDebugValue:Yv,useDeferredValue:function(e,t){var n=Hn();return Nt===null?Wv(n,e,t):GO(n,Nt.memoizedState,e,t)},useTransition:function(){var e=s8(Ya)[0],t=Hn().memoizedState;return[typeof e=="boolean"?e:P0(e),t]},useSyncExternalStore:_O,useId:WO};Ad.useCacheRefresh=KO;Ad.useMemoCache=Gv;Ad.useHostTransitionStatus=Kv;Ad.useFormState=NO;Ad.useActionState=NO;Ad.useOptimistic=function(e,t){var n=Hn();return Nt!==null?AO(n,Nt,e,t):(n.baseState=e,[e,n.queue.dispatch])};function o8(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var k3={isMounted:function(e){return(e=e._reactInternals)?Jh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=$r(),r=ic(i);r.payload=t,n!=null&&(r.callback=n),t=rc(e,r,i),t!==null&&(er(t,e,i),Y1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=$r(),r=ic(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=rc(e,r,i),t!==null&&(er(t,e,i),Y1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$r(),i=ic(n);i.tag=2,t!=null&&(i.callback=t),t=rc(e,i,n),t!==null&&(er(t,e,n),Y1(t,e,n))}};function II(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Am(n,i)||!Am(r,s):!0}function xI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&k3.enqueueReplaceState(t,t.state,null)}function qu(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=nn({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var G2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function JO(e){G2(e)}function eN(e){console.error(e)}function tN(e){G2(e)}function X2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function CI(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function L3(e,t,n){return n=ic(n),n.tag=3,n.payload={element:null},n.callback=function(){X2(e,t)},n}function nN(e){return e=ic(e),e.tag=3,e}function iN(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){CI(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){CI(t,n,i),typeof r!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function wq(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&F0(t,n,r,!0),n=_s.current,n!==null){switch(n.tag){case 13:return Bo===null?W3():n.alternate===null&&En===0&&(En=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===I3?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),y8(e,i,r)),!1;case 22:return n.flags|=65536,i===I3?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),y8(e,i,r)),!1}throw Error(te(435,n.tag))}return y8(e,i,r),W3(),!1}if(St)return t=_s.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==S3&&(e=Error(te(422),{cause:i}),Mm(ls(e,n)))):(i!==S3&&(t=Error(te(423),{cause:i}),Mm(ls(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=ls(i,n),r=L3(e.stateNode,i,r),f8(e,r),En!==4&&(En=2)),!1;var s=Error(te(520),{cause:i});if(s=ls(s,n),q1===null?q1=[s]:q1.push(s),En!==4&&(En=2),t===null)return!0;i=ls(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=L3(n.stateNode,i,e),f8(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(oc===null||!oc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=nN(r),iN(r,e,n,i),f8(n,r),!1}n=n.return}while(n!==null);return!1}var rN=Error(te(461)),di=!1;function bi(e,t,n,i){t.child=e===null?bO(t,null,n,i):Ku(t,e.child,n,i)}function AI(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return Qu(t),i=zv(e,t,n,o,s,r),a=Hv(),e!==null&&!di?(Vv(e,t,r),Wa(e,t,r)):(St&&a&&Dv(t),t.flags|=1,bi(e,t,i,r),t.child)}function MI(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!tw(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,sN(e,t,s,i,r)):(e=WU(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!qv(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Am,n(o,i)&&e.ref===t.ref)return Wa(e,t,r)}return t.flags|=1,e=sc(s,i),e.ref=t.ref,e.return=t,t.child=e}function sN(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Am(s,i)&&e.ref===t.ref)if(di=!1,t.pendingProps=i=s,qv(e,r))e.flags&131072&&(di=!0);else return t.lanes=e.lanes,Wa(e,t,r)}return D3(e,t,n,i,r)}function oN(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(j1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return RI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&GU(t,o!==null?o.cachePool:null),o!==null?EI(t,o):x3(),yO(t);else return t.lanes=t.childLanes=536870912,RI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(GU(t,o.cachePool),EI(t,o),Hl(),t.memoizedState=null):(e!==null&&GU(t,null),x3(),Hl());return bi(e,t,r,n),t.child}function RI(e,t,n,i){var r=Fv();return r=r===null?null:{parent:qn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&GU(t,null),x3(),yO(t),e!==null&&F0(e,t,i,!0),null}function j1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function D3(e,t,n,i,r){return Qu(t),n=zv(e,t,n,i,void 0,r),i=Hv(),e!==null&&!di?(Vv(e,t,r),Wa(e,t,r)):(St&&i&&Dv(t),t.flags|=1,bi(e,t,n,r),t.child)}function kI(e,t,n,i,r,s){return Qu(t),t.updateQueue=null,n=wO(t,i,n,r),vO(e),i=Hv(),e!==null&&!di?(Vv(e,t,s),Wa(e,t,s)):(St&&i&&Dv(t),t.flags|=1,bi(e,t,n,s),t.child)}function LI(e,t,n,i,r){if(Qu(t),t.stateNode===null){var s=xf,o=n.contextType;typeof o=="object"&&o!==null&&(s=zi(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=k3,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Qv(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?zi(o):xf,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(o8(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&k3.enqueueReplaceState(s,s.state,null),K1(t,i,s,r),W1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=qu(n,a);s.props=l;var c=s.context,u=n.contextType;o=xf,typeof u=="object"&&u!==null&&(o=zi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&xI(t,s,i,o),Dl=!1;var f=t.memoizedState;s.state=f,K1(t,i,s,r),W1(),c=t.memoizedState,a||f!==c||Dl?(typeof d=="function"&&(o8(t,n,d,i),c=t.memoizedState),(l=Dl||II(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,z3(e,t),o=t.memoizedProps,u=qu(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=xf,typeof c=="object"&&c!==null&&(l=zi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&xI(t,s,i,l),Dl=!1,f=t.memoizedState,s.state=f,K1(t,i,s,r),W1();var h=t.memoizedState;o!==d||f!==h||Dl||e!==null&&e.dependencies!==null&&j2(e.dependencies)?(typeof a=="function"&&(o8(t,n,a,i),h=t.memoizedState),(u=Dl||II(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&j2(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,j1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=Ku(t,e.child,null,r),t.child=Ku(t,null,n,r)):bi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Wa(e,t,r),e}function DI(e,t,n,i){return O0(),t.flags|=256,bi(e,t,n,i),t.child}var a8={dehydrated:null,treeContext:null,retryLane:0};function l8(e){return{baseLanes:e,cachePool:EO()}}function c8(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hs),e}function aN(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(Qn.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(St){if(r?zl(t):Hl(),St){var a=vi,l;if(l=a){e:{for(l=a,a=Co;l.nodeType!==8;){if(!a){a=null;break e}if(l=Zs(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:Ou!==null?{id:Ra,overflow:ka}:null,retryLane:536870912},l=fs(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Zi=t,vi=null,l=!0):l=!1}l||Wu(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;La(t)}return a=i.children,i=i.fallback,r?(Hl(),r=t.mode,a=N3({mode:"hidden",children:a},r),i=Pu(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=l8(n),r.childLanes=c8(e,o,n),t.memoizedState=a8,i):(zl(t),O3(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(zl(t),t.flags&=-257,t=u8(e,t,n)):t.memoizedState!==null?(Hl(),t.child=e.child,t.flags|=128,t=null):(Hl(),r=i.fallback,a=t.mode,i=N3({mode:"visible",children:i.children},a),r=Pu(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ku(t,e.child,null,n),i=t.child,i.memoizedState=l8(n),i.childLanes=c8(e,o,n),t.memoizedState=a8,t=r);else if(zl(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(te(419)),i.stack="",i.digest=o,Mm({value:i,source:null,stack:null}),t=u8(e,t,n)}else if(di||F0(e,t,n,!1),o=(n&e.childLanes)!==0,di||o){if(o=Wt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,vc(e,i),er(o,e,i),rN}a.data==="$?"||W3(),t=u8(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=Pq.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,vi=Zs(a.nextSibling),Zi=t,St=!0,zs=null,Co=!1,e!==null&&(ss[os++]=Ra,ss[os++]=ka,ss[os++]=Ou,Ra=e.id,ka=e.overflow,Ou=t),t=O3(t,i.children),t.flags|=4096);return t}return r?(Hl(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=sc(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=sc(c,r):(r=Pu(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=l8(n):(l=a.cachePool,l!==null?(c=qn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=EO(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=c8(e,o,n),t.memoizedState=a8,i):(zl(t),n=e.child,e=n.sibling,n=sc(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function O3(e,t){return t=N3({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function N3(e,t){return AN(e,t,0,null)}function u8(e,t,n){return Ku(t,e.child,null,n),e=O3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function OI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),F3(e.return,t,n)}function d8(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function lN(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(bi(e,t,i.children,n),i=Qn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&OI(e,n,t);else if(e.tag===19)OI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(cn(Qn,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&H2(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),d8(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&H2(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}d8(t,!0,n,null,s);break;case"together":d8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tc|=t.lanes,!(n&t.childLanes))if(e!==null){if(F0(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=sc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&j2(e)))}function _q(e,t,n){switch(t.tag){case 3:k2(t,t.stateNode.containerInfo),Vl(t,qn,e.memoizedState.cache),O0();break;case 27:case 5:p3(t);break;case 4:k2(t,t.stateNode.containerInfo);break;case 10:Vl(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(zl(t),t.flags|=128,null):n&t.child.childLanes?aN(e,t,n):(zl(t),e=Wa(e,t,n),e!==null?e.sibling:null);zl(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(F0(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return lN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),cn(Qn,Qn.current),i)break;return null;case 22:case 23:return t.lanes=0,oN(e,t,n);case 24:Vl(t,qn,e.memoizedState.cache)}return Wa(e,t,n)}function cN(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)di=!0;else{if(!qv(e,n)&&!(t.flags&128))return di=!1,_q(e,t,n);di=!!(e.flags&131072)}else di=!1,St&&t.flags&1048576&&gO(t,B2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")tw(i)?(e=qu(i,e),t.tag=1,t=LI(null,t,i,e,n)):(t.tag=0,t=D3(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===wv){t.tag=11,t=AI(null,t,i,e,n);break e}else if(r===_v){t.tag=14,t=MI(null,t,i,e,n);break e}}throw t=g3(i)||i,Error(te(306,t,""))}}return t;case 0:return D3(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=qu(i,t.pendingProps),LI(e,t,i,r,n);case 3:e:{if(k2(t,t.stateNode.containerInfo),e===null)throw Error(te(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,z3(e,t),K1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Vl(t,qn,s),s!==r.cache&&B3(t,[qn],n,!0),W1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=DI(e,t,s,n);break e}else if(s!==i){i=ls(Error(te(424)),t),Mm(i),t=DI(e,t,s,n);break e}else for(vi=Zs(t.stateNode.containerInfo.firstChild),Zi=t,St=!0,zs=null,Co=!0,n=bO(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(O0(),s===i){t=Wa(e,t,n);break e}bi(e,t,s,n)}t=t.child}return t;case 26:return j1(e,t),e===null?(n=JI(t.type,null,t.pendingProps,null))?t.memoizedState=n:St||(n=t.type,e=t.pendingProps,i=J2(nc.current).createElement(n),i[Bi]=t,i[Er]=e,wi(i,n,e),ci(i),t.stateNode=i):t.memoizedState=JI(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return p3(t),e===null&&St&&(i=t.stateNode=YN(t.type,t.pendingProps,nc.current),Zi=t,Co=!0,vi=Zs(i.firstChild)),i=t.pendingProps.children,e!==null||St?bi(e,t,i,n):t.child=Ku(t,null,i,n),j1(e,t),t.child;case 5:return e===null&&St&&((r=i=vi)&&(i=Jq(i,t.type,t.pendingProps,Co),i!==null?(t.stateNode=i,Zi=t,vi=Zs(i.firstChild),Co=!1,r=!0):r=!1),r||Wu(t)),p3(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,J3(r,s)?i=null:o!==null&&J3(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=zv(e,t,pq,null,null,n),Nm._currentValue=r),j1(e,t),bi(e,t,i,n),t.child;case 6:return e===null&&St&&((e=n=vi)&&(n=eQ(n,t.pendingProps,Co),n!==null?(t.stateNode=n,Zi=t,vi=null,e=!0):e=!1),e||Wu(t)),null;case 13:return aN(e,t,n);case 4:return k2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ku(t,null,i,n):bi(e,t,i,n),t.child;case 11:return AI(e,t,t.type,t.pendingProps,n);case 7:return bi(e,t,t.pendingProps,n),t.child;case 8:return bi(e,t,t.pendingProps.children,n),t.child;case 12:return bi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Vl(t,t.type,i.value),bi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Qu(t),r=zi(r),i=i(r),t.flags|=1,bi(e,t,i,n),t.child;case 14:return MI(e,t,t.type,t.pendingProps,n);case 15:return sN(e,t,t.type,t.pendingProps,n);case 19:return lN(e,t,n);case 22:return oN(e,t,n);case 24:return Qu(t),i=zi(qn),e===null?(r=Fv(),r===null&&(r=Wt,s=Pv(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},Qv(t),Vl(t,qn,r)):(e.lanes&n&&(z3(e,t),K1(t,null,null,n),W1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Vl(t,qn,i)):(i=s.cache,Vl(t,qn,i),i!==r.cache&&B3(t,[qn],n,!0))),bi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(te(156,t.tag))}var P3=ta(null),Md=null,Da=null;function Vl(e,t,n){cn(P3,t._currentValue),t._currentValue=n}function Pa(e){e._currentValue=P3.current,hi(P3)}function F3(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function B3(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),F3(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(te(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),F3(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function F0(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(te(387));if(o=o.memoizedProps,o!==null){var a=r.type;jr(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===R2.current){if(o=r.alternate,o===null)throw Error(te(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Nm):e=[Nm])}r=r.return}e!==null&&B3(t,e,n,i),t.flags|=262144}function j2(e){for(e=e.firstContext;e!==null;){if(!jr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qu(e){Md=e,Da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zi(e){return uN(Md,e)}function Xp(e,t){return Md===null&&Qu(e),uN(e,t)}function uN(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Da===null){if(e===null)throw Error(te(308));Da=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Da=Da.next=t;return n}var Dl=!1;function Qv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function z3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ic(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,hn&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=P2(e),hO(e,null,n),t}return $6(e,i,t,n),P2(e)}function Y1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,zD(e,n)}}function f8(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var H3=!1;function W1(){if(H3){var e=jf;if(e!==null)throw e}}function K1(e,t,n,i){H3=!1;var r=e.updateQueue;Dl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(mt&f)===f:(i&f)===f){f!==0&&f===hh&&(H3=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var U=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(U,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(U,d,f):m,f==null)break e;d=nn({},d,f);break e;case 2:Dl=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Tc|=o,e.lanes=o,e.memoizedState=d}}function dN(e,t){if(typeof e!="function")throw Error(te(191,e));e.call(t)}function fN(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)dN(n[e],t)}function B0(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Vt(t,t.return,a)}}function _c(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Vt(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Vt(t,t.return,c)}}function hN(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{fN(t,n)}catch(i){Vt(e,e.return,i)}}}function gN(e,t,n){n.props=qu(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Vt(e,t,i)}}function wu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Vt(e,t,s)}}function Dr(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Vt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Vt(e,t,r)}else n.current=null}function mN(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Vt(e,e.return,r)}}function NI(e,t,n){try{var i=e.stateNode;Wq(i,e.type,n,t),i[Er]=t}catch(r){Vt(e,e.return,r)}}function pN(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function h8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function V3(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Z6));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(V3(e,t,n),e=e.sibling;e!==null;)V3(e,t,n),e=e.sibling}function Y2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(Y2(e,t,n),e=e.sibling;e!==null;)Y2(e,t,n),e=e.sibling}var wa=!1,yn=!1,g8=!1,PI=typeof WeakSet=="function"?WeakSet:Set,li=null,FI=!1;function Tq(e,t){if(e=e.containerInfo,q3=ib,e=oO(e),Rv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Q3={focusedElem:e,selectionRange:n},ib=!1,li=t;li!==null;)if(t=li,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,li=e;else for(;li!==null;){switch(t=li,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=qu(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Vt(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)e7(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":e7(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(te(163))}if(e=t.sibling,e!==null){e.return=t.return,li=e;break}li=t.return}return m=FI,FI=!1,m}function UN(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ua(e,n),i&4&&B0(5,n);break;case 1:if(ua(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Vt(n,n.return,a)}else{var r=qu(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Vt(n,n.return,a)}}i&64&&hN(n),i&512&&wu(n,n.return);break;case 3:if(ua(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{fN(i,e)}catch(a){Vt(n,n.return,a)}}break;case 26:ua(e,n),i&512&&wu(n,n.return);break;case 27:case 5:ua(e,n),t===null&&i&4&&mN(n),i&512&&wu(n,n.return);break;case 12:ua(e,n);break;case 13:ua(e,n),i&4&&EN(e,n);break;case 22:if(r=n.memoizedState!==null||wa,!r){t=t!==null&&t.memoizedState!==null||yn;var s=wa,o=yn;wa=r,(yn=t)&&!o?Cl(e,n,(n.subtreeFlags&8772)!==0):ua(e,n),wa=s,yn=o}i&512&&(n.memoizedProps.mode==="manual"?wu(n,n.return):Dr(n,n.return));break;default:ua(e,n)}}function bN(e){var t=e.alternate;t!==null&&(e.alternate=null,bN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Sv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ln=null,Ar=!1;function ca(e,t,n){for(n=n.child;n!==null;)yN(e,t,n),n=n.sibling}function yN(e,t,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(R0,n)}catch{}switch(n.tag){case 26:yn||Dr(n,t),ca(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:yn||Dr(n,t);var i=Ln,r=Ar;for(Ln=n.stateNode,ca(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Sv(n),Ln=i,Ar=r;break;case 5:yn||Dr(n,t);case 6:r=Ln;var s=Ar;if(Ln=null,ca(e,t,n),Ln=r,Ar=s,Ln!==null)if(Ar)try{e=Ln,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Vt(n,t,o)}else try{Ln.removeChild(n.stateNode)}catch(o){Vt(n,t,o)}break;case 18:Ln!==null&&(Ar?(t=Ln,n=n.stateNode,t.nodeType===8?I8(t.parentNode,n):t.nodeType===1&&I8(t,n),Bm(t)):I8(Ln,n.stateNode));break;case 4:i=Ln,r=Ar,Ln=n.stateNode.containerInfo,Ar=!0,ca(e,t,n),Ln=i,Ar=r;break;case 0:case 11:case 14:case 15:yn||_c(2,n,t),yn||_c(4,n,t),ca(e,t,n);break;case 1:yn||(Dr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&gN(n,t,i)),ca(e,t,n);break;case 21:ca(e,t,n);break;case 22:yn||Dr(n,t),yn=(i=yn)||n.memoizedState!==null,ca(e,t,n),yn=i;break;default:ca(e,t,n)}}function EN(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bm(e)}catch(n){Vt(t,t.return,n)}}function Sq(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new PI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new PI),t;default:throw Error(te(435,e.tag))}}function m8(e,t){var n=Sq(e);t.forEach(function(i){var r=Fq.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Zr(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:Ln=a.stateNode,Ar=!1;break e;case 3:Ln=a.stateNode.containerInfo,Ar=!0;break e;case 4:Ln=a.stateNode.containerInfo,Ar=!0;break e}a=a.return}if(Ln===null)throw Error(te(160));yN(s,o,r),Ln=null,Ar=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)vN(t,e),t=t.sibling}var Ps=null;function vN(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zr(t,e),qr(e),i&4&&(_c(3,e,e.return),B0(3,e),_c(5,e,e.return));break;case 1:Zr(t,e),qr(e),i&512&&(yn||n===null||Dr(n,n.return)),i&64&&wa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Ps;if(Zr(t,e),qr(e),i&512&&(yn||n===null||Dr(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Im]||s[Bi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),wi(s,i,n),s[Bi]=e,ci(s),i=s;break e;case"link":var o=tx("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),wi(s,i,n),r.head.appendChild(s);break;case"meta":if(o=tx("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),wi(s,i,n),r.head.appendChild(s);break;default:throw Error(te(468,i))}s[Bi]=e,ci(s),i=s}e.stateNode=i}else nx(r,e.type,e.stateNode);else e.stateNode=ex(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?nx(r,e.type,e.stateNode):ex(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&NI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[Im]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);wi(r,d,s),r[Bi]=e,r[Er]=s}catch(m){Vt(e,e.return,m)}}case 5:if(Zr(t,e),qr(e),i&512&&(yn||n===null||Dr(n,n.return)),e.flags&32){r=e.stateNode;try{dh(r,"")}catch(m){Vt(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,NI(e,r,n!==null?n.memoizedProps:r)),i&1024&&(g8=!0);break;case 6:if(Zr(t,e),qr(e),i&4){if(e.stateNode===null)throw Error(te(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Vt(e,e.return,m)}}break;case 3:if(ZU=null,r=Ps,Ps=eb(t.containerInfo),Zr(t,e),Ps=r,qr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Bm(t.containerInfo)}catch(m){Vt(e,e.return,m)}g8&&(g8=!1,wN(e));break;case 4:i=Ps,Ps=eb(e.stateNode.containerInfo),Zr(t,e),qr(e),Ps=i;break;case 12:Zr(t,e),qr(e);break;case 13:Zr(t,e),qr(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(rw=Fo()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,m8(e,i)));break;case 22:if(i&512&&(yn||n===null||Dr(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=wa,d=yn,wa=u||l,yn=d||c,Zr(t,e),yn=d,wa=u,qr(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=wa||yn,n===null||c||t||lf(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Vt(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Vt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,m8(e,n))));break;case 19:Zr(t,e),qr(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,m8(e,i)));break;case 21:break;default:Zr(t,e),qr(e)}}function qr(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(pN(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 27:var r=i.stateNode,s=h8(e);Y2(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(dh(o,""),i.flags&=-33);var a=h8(e);Y2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=h8(e);V3(e,c,l);break;default:throw Error(te(161))}}}catch(u){Vt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wN(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wN(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)UN(e,t.alternate,t),t=t.sibling}function lf(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:_c(4,t,t.return),lf(t);break;case 1:Dr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&gN(t,t.return,n),lf(t);break;case 26:case 27:case 5:Dr(t,t.return),lf(t);break;case 22:Dr(t,t.return),t.memoizedState===null&&lf(t);break;default:lf(t)}e=e.sibling}}function Cl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Cl(r,s,n),B0(4,s);break;case 1:if(Cl(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Vt(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)dN(l[r],a)}catch(c){Vt(i,i.return,c)}}n&&o&64&&hN(s),wu(s,s.return);break;case 26:case 27:case 5:Cl(r,s,n),n&&i===null&&o&4&&mN(s),wu(s,s.return);break;case 12:Cl(r,s,n);break;case 13:Cl(r,s,n),n&&o&4&&EN(r,s);break;case 22:s.memoizedState===null&&Cl(r,s,n),wu(s,s.return);break;default:Cl(r,s,n)}t=t.sibling}}function Jv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&N0(n))}function ew(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&N0(e))}function El(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_N(e,t,n,i),t=t.sibling}function _N(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:El(e,t,n,i),r&2048&&B0(9,t);break;case 3:El(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&N0(e)));break;case 12:if(r&2048){El(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Vt(t,t.return,l)}}else El(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?El(e,t,n,i):Z1(e,t):s._visibility&4?El(e,t,n,i):(s._visibility|=4,cf(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Jv(t.alternate,t);break;case 24:El(e,t,n,i),r&2048&&ew(t.alternate,t);break;default:El(e,t,n,i)}}function cf(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:cf(s,o,a,l,r),B0(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?cf(s,o,a,l,r):Z1(s,o):(u._visibility|=4,cf(s,o,a,l,r)),r&&c&2048&&Jv(o.alternate,o);break;case 24:cf(s,o,a,l,r),r&&c&2048&&ew(o.alternate,o);break;default:cf(s,o,a,l,r)}t=t.sibling}}function Z1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Z1(n,i),r&2048&&Jv(i.alternate,i);break;case 24:Z1(n,i),r&2048&&ew(i.alternate,i);break;default:Z1(n,i)}t=t.sibling}}var p1=8192;function Yd(e){if(e.subtreeFlags&p1)for(e=e.child;e!==null;)TN(e),e=e.sibling}function TN(e){switch(e.tag){case 26:Yd(e),e.flags&p1&&e.memoizedState!==null&&hQ(Ps,e.memoizedState,e.memoizedProps);break;case 5:Yd(e);break;case 3:case 4:var t=Ps;Ps=eb(e.stateNode.containerInfo),Yd(e),Ps=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=p1,p1=16777216,Yd(e),p1=t):Yd(e));break;default:Yd(e)}}function SN(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Hg(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];li=i,xN(i,e)}SN(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)IN(e),e=e.sibling}function IN(e){switch(e.tag){case 0:case 11:case 15:Hg(e),e.flags&2048&&_c(9,e,e.return);break;case 3:Hg(e);break;case 12:Hg(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,YU(e)):Hg(e);break;default:Hg(e)}}function YU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];li=i,xN(i,e)}SN(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:_c(8,t,t.return),YU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,YU(t));break;default:YU(t)}e=e.sibling}}function xN(e,t){for(;li!==null;){var n=li;switch(n.tag){case 0:case 11:case 15:_c(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:N0(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,li=i;else e:for(n=e;li!==null;){i=li;var r=i.sibling,s=i.return;if(bN(i),i===n){li=null;break e}if(r!==null){r.return=s,li=r;break e}li=s}}}function Iq(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,n,i){return new Iq(e,t,n,i)}function tw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sc(e,t){var n=e.alternate;return n===null?(n=fs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function CN(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function WU(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")tw(e)&&(o=1);else if(typeof e=="string")o=dQ(e,n,Po.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ef:return Pu(n.children,r,s,t);case AD:o=8,r|=24;break;case d3:return e=fs(12,n,t,r|2),e.elementType=d3,e.lanes=s,e;case f3:return e=fs(13,n,t,r),e.elementType=f3,e.lanes=s,e;case h3:return e=fs(19,n,t,r),e.elementType=h3,e.lanes=s,e;case RD:return AN(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qK:case Ma:o=10;break e;case MD:o=9;break e;case wv:o=11;break e;case _v:o=14;break e;case Ll:o=16,i=null;break e}o=29,n=Error(te(130,e===null?"null":typeof e,"")),i=null}return t=fs(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Pu(e,t,n,i){return e=fs(7,e,i,t),e.lanes=n,e}function AN(e,t,n,i){e=fs(22,e,i,t),e.elementType=RD,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(te(456));if(!(r._pendingVisibility&2)){var o=vc(s,2);o!==null&&(r._pendingVisibility|=2,er(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(te(456));if(r._pendingVisibility&2){var o=vc(s,2);o!==null&&(r._pendingVisibility&=-3,er(o,s,2))}}};return e.stateNode=r,e}function p8(e,t,n){return e=fs(6,e,null,t),e.lanes=n,e}function U8(e,t,n){return t=fs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function da(e){e.flags|=4}function BI(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!ZN(t)){if(t=_s.current,t!==null&&((mt&4194176)===mt?Bo!==null:(mt&62914560)!==mt&&!(mt&536870912)||t!==Bo))throw $1=I3,mO;e.flags|=8192}}function jp(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?FD():536870912,e.lanes|=t,mh|=t)}function Vg(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function xq(e,t,n){var i=t.pendingProps;switch(Ov(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return un(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Pa(qn),ch(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bg(t)?da(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zs!==null&&(Y3(zs),zs=null))),un(t),null;case 26:return n=t.memoizedState,e===null?(da(t),n!==null?(un(t),BI(t,n)):(un(t),t.flags&=-16777217)):n?n!==e.memoizedState?(da(t),un(t),BI(t,n)):(un(t),t.flags&=-16777217):(e.memoizedProps!==i&&da(t),un(t),t.flags&=-16777217),null;case 27:L2(t),n=nc.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return un(t),null}e=Po.current,Bg(t)?mI(t):(e=YN(r,i,n),t.stateNode=e,da(t))}return un(t),null;case 5:if(L2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return un(t),null}if(e=Po.current,Bg(t))mI(t);else{switch(r=J2(nc.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Bi]=t,e[Er]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(wi(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&da(t)}}return un(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(e=nc.current,Bg(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Zi,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Bi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||GN(e.nodeValue,n)),e||Wu(t)}else e=J2(e).createTextNode(i),e[Bi]=t,t.stateNode=e}return un(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Bg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(te(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[Bi]=t}else O0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),r=!1}else zs!==null&&(Y3(zs),zs=null),r=!0;if(!r)return t.flags&256?(La(t),t):(La(t),null)}if(La(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),jp(t,t.updateQueue),un(t),null;case 4:return ch(),e===null&&aw(t.stateNode.containerInfo),un(t),null;case 10:return Pa(t.type),un(t),null;case 19:if(hi(Qn),r=t.memoizedState,r===null)return un(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)Vg(r,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=H2(e),s!==null){for(t.flags|=128,Vg(r,!1),e=s.updateQueue,t.updateQueue=e,jp(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)CN(n,e),n=n.sibling;return cn(Qn,Qn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Fo()>W2&&(t.flags|=128,i=!0,Vg(r,!1),t.lanes=4194304)}else{if(!i)if(e=H2(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,jp(t,e),Vg(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!St)return un(t),null}else 2*Fo()-r.renderingStartTime>W2&&n!==536870912&&(t.flags|=128,i=!0,Vg(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Fo(),t.sibling=null,e=Qn.current,cn(Qn,i?e&1|2:e&1),t):(un(t),null);case 22:case 23:return La(t),Nv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),n=t.updateQueue,n!==null&&jp(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&hi(Nu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pa(qn),un(t),null;case 25:return null}throw Error(te(156,t.tag))}function Cq(e,t){switch(Ov(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pa(qn),ch(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return L2(t),null;case 13:if(La(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));O0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(Qn),null;case 4:return ch(),null;case 10:return Pa(t.type),null;case 22:case 23:return La(t),Nv(),e!==null&&hi(Nu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pa(qn),null;case 25:return null;default:return null}}function MN(e,t){switch(Ov(t),t.tag){case 3:Pa(qn),ch();break;case 26:case 27:case 5:L2(t);break;case 4:ch();break;case 13:La(t);break;case 19:hi(Qn);break;case 10:Pa(t.type);break;case 22:case 23:La(t),Nv(),e!==null&&hi(Nu);break;case 24:Pa(qn)}}var Aq={getCacheForType:function(e){var t=zi(qn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Mq=typeof WeakMap=="function"?WeakMap:Map,hn=0,Wt=null,qe=null,mt=0,Yt=0,Mr=null,_a=!1,ng=!1,nw=!1,Ka=0,En=0,Tc=0,Fu=0,iw=0,hs=0,mh=0,q1=null,Ao=null,$3=!1,rw=0,W2=1/0,K2=null,oc=null,Yp=!1,mu=null,Q1=0,G3=0,X3=null,J1=0,j3=null;function $r(){if(hn&2&&mt!==0)return mt&-mt;if(je.T!==null){var e=hh;return e!==0?e:ow()}return VD()}function RN(){hs===0&&(hs=!(mt&536870912)||St?PD():536870912);var e=_s.current;return e!==null&&(e.flags|=32),hs}function er(e,t,n){(e===Wt&&Yt===2||e.cancelPendingCommit!==null)&&(ph(e,0),Ta(e,mt,hs,!1)),L0(e,n),(!(hn&2)||e!==Wt)&&(e===Wt&&(!(hn&2)&&(Fu|=n),En===4&&Ta(e,mt,hs,!1)),na(e))}function kN(e,t,n){if(hn&6)throw Error(te(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||k0(e,t),r=i?Lq(e,t):b8(e,t,!0),s=i;do{if(r===0){ng&&!i&&Ta(e,t,0,!1);break}else if(r===6)Ta(e,t,0,!_a);else{if(n=e.current.alternate,s&&!Rq(n)){r=b8(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=q1;var l=a.current.memoizedState.isDehydrated;if(l&&(ph(a,o).flags|=256),o=b8(a,o,!1),o!==2){if(nw&&!l){a.errorRecoveryDisabledLanes|=s,Fu|=s,r=4;break e}s=Ao,Ao=r,s!==null&&Y3(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){ph(e,0),Ta(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(te(345));case 4:if((t&4194176)===t){Ta(i,t,hs,!_a);break e}break;case 2:Ao=null;break;case 3:case 5:break;default:throw Error(te(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=rw+300-Fo(),10<s)){if(Ta(i,t,hs,!_a),F6(i,0)!==0)break e;i.timeoutHandle=jN(zI.bind(null,i,n,Ao,K2,$3,t,hs,Fu,mh,_a,2,-0,0),s);break e}zI(i,n,Ao,K2,$3,t,hs,Fu,mh,_a,0,-0,0)}}break}while(!0);na(e)}function Y3(e){Ao===null?Ao=e:Ao.push.apply(Ao,e)}function zI(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(Om={stylesheets:null,count:0,unsuspend:fQ},TN(t),t=gQ(),t!==null)){e.cancelPendingCommit=t(VI.bind(null,e,n,i,r,o,a,l,1,d,f)),Ta(e,s,o,!c);return}VI(e,n,i,r,o,a,l,u,d,f)}function Rq(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!jr(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ta(e,t,n,i){t&=~iw,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Vr(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&BD(e,n,t)}function W6(){return hn&6?!0:(z0(0),!1)}function sw(){if(qe!==null){if(Yt===0)var e=qe.return;else e=qe,Da=Md=null,$v(e),Xf=null,Rm=0,e=qe;for(;e!==null;)MN(e.alternate,e),e=e.return;qe=null}}function ph(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zq(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),sw(),Wt=e,qe=n=sc(e.current,null),mt=t,Yt=0,Mr=null,_a=!1,ng=k0(e,t),nw=!1,mh=hs=iw=Fu=Tc=En=0,Ao=q1=null,$3=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Vr(i),s=1<<r;t|=e[r],i&=~s}return Ka=t,V6(),n}function LN(e,t){Ke=null,je.H=Vo,t===V1?(t=bI(),Yt=3):t===mO?(t=bI(),Yt=4):Yt=t===rN?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Mr=t,qe===null&&(En=1,X2(e,ls(t,e.current)))}function DN(){var e=je.H;return je.H=Vo,e===null?Vo:e}function ON(){var e=je.A;return je.A=Aq,e}function W3(){En=4,_a||(mt&4194176)!==mt&&_s.current!==null||(ng=!0),!(Tc&134217727)&&!(Fu&134217727)||Wt===null||Ta(Wt,mt,hs,!1)}function b8(e,t,n){var i=hn;hn|=2;var r=DN(),s=ON();(Wt!==e||mt!==t)&&(K2=null,ph(e,t)),t=!1;var o=En;e:do try{if(Yt!==0&&qe!==null){var a=qe,l=Mr;switch(Yt){case 8:sw(),o=6;break e;case 3:case 2:case 6:_s.current===null&&(t=!0);var c=Yt;if(Yt=0,Mr=null,Mf(e,a,l,c),n&&ng){o=0;break e}break;default:c=Yt,Yt=0,Mr=null,Mf(e,a,l,c)}}kq(),o=En;break}catch(u){LN(e,u)}while(!0);return t&&e.shellSuspendCounter++,Da=Md=null,hn=i,je.H=r,je.A=s,qe===null&&(Wt=null,mt=0,V6()),o}function kq(){for(;qe!==null;)NN(qe)}function Lq(e,t){var n=hn;hn|=2;var i=DN(),r=ON();Wt!==e||mt!==t?(K2=null,W2=Fo()+500,ph(e,t)):ng=k0(e,t);e:do try{if(Yt!==0&&qe!==null){t=qe;var s=Mr;t:switch(Yt){case 1:Yt=0,Mr=null,Mf(e,t,s,1);break;case 2:if(UI(s)){Yt=0,Mr=null,HI(t);break}t=function(){Yt===2&&Wt===e&&(Yt=7),na(e)},s.then(t,t);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:UI(s)?(Yt=0,Mr=null,HI(t)):(Yt=0,Mr=null,Mf(e,t,s,7));break;case 5:var o=null;switch(qe.tag){case 26:o=qe.memoizedState;case 5:case 27:var a=qe;if(!o||ZN(o)){Yt=0,Mr=null;var l=a.sibling;if(l!==null)qe=l;else{var c=a.return;c!==null?(qe=c,K6(c)):qe=null}break t}}Yt=0,Mr=null,Mf(e,t,s,5);break;case 6:Yt=0,Mr=null,Mf(e,t,s,6);break;case 8:sw(),En=6;break e;default:throw Error(te(462))}}Dq();break}catch(u){LN(e,u)}while(!0);return Da=Md=null,je.H=i,je.A=r,hn=n,qe!==null?0:(Wt=null,mt=0,V6(),En)}function Dq(){for(;qe!==null&&!nZ();)NN(qe)}function NN(e){var t=cN(e.alternate,e,Ka);e.memoizedProps=e.pendingProps,t===null?K6(e):qe=t}function HI(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=kI(n,t,t.pendingProps,t.type,void 0,mt);break;case 11:t=kI(n,t,t.pendingProps,t.type.render,t.ref,mt);break;case 5:$v(t);default:MN(n,t),t=qe=CN(t,Ka),t=cN(n,t,Ka)}e.memoizedProps=e.pendingProps,t===null?K6(e):qe=t}function Mf(e,t,n,i){Da=Md=null,$v(t),Xf=null,Rm=0;var r=t.return;try{if(wq(e,r,t,n,mt)){En=1,X2(e,ls(n,e.current)),qe=null;return}}catch(s){if(r!==null)throw qe=r,s;En=1,X2(e,ls(n,e.current)),qe=null;return}t.flags&32768?(St||i===1?e=!0:ng||mt&536870912?e=!1:(_a=e=!0,(i===2||i===3||i===6)&&(i=_s.current,i!==null&&i.tag===13&&(i.flags|=16384))),PN(t,e)):K6(t)}function K6(e){var t=e;do{if(t.flags&32768){PN(t,_a);return}e=t.return;var n=xq(t.alternate,t,Ka);if(n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);En===0&&(En=5)}function PN(e,t){do{var n=Cq(e.alternate,e);if(n!==null){n.flags&=32767,qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=n}while(e!==null);En=6,qe=null}function VI(e,t,n,i,r,s,o,a,l,c){var u=je.T,d=tn.p;try{tn.p=2,je.T=null,Oq(e,t,n,i,d,r,s,o,a,l,c)}finally{je.T=u,tn.p=d}}function Oq(e,t,n,i,r,s,o,a){do Kf();while(mu!==null);if(hn&6)throw Error(te(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=kv,hZ(e,i,c,s,o,a),e===Wt&&(qe=Wt=null,mt=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Yp||(Yp=!0,G3=c,X3=n,Bq(D2,function(){return Kf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=je.T,je.T=null,s=tn.p,tn.p=2,o=hn,hn|=4,Tq(e,l),vN(l,e),sq(Q3,e.containerInfo),ib=!!q3,Q3=q3=null,e.current=l,UN(e,l.alternate,l),iZ(),hn=o,tn.p=s,je.T=n):e.current=l,Yp?(Yp=!1,mu=e,Q1=i):FN(e,c),c=e.pendingLanes,c===0&&(oc=null),lZ(l.stateNode),na(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return Q1&3&&Kf(),c=e.pendingLanes,i&4194218&&c&42?e===j3?J1++:(J1=0,j3=e):J1=0,z0(0),null}function FN(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,N0(t)))}function Kf(){if(mu!==null){var e=mu,t=G3;G3=0;var n=HD(Q1),i=je.T,r=tn.p;try{if(tn.p=32>n?32:n,je.T=null,mu===null)var s=!1;else{n=X3,X3=null;var o=mu,a=Q1;if(mu=null,Q1=0,hn&6)throw Error(te(331));var l=hn;if(hn|=4,IN(o.current),_N(o,o.current,a,n),hn=l,z0(0,!1),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(R0,o)}catch{}s=!0}return s}finally{tn.p=r,je.T=i,FN(e,t)}}return!1}function $I(e,t,n){t=ls(n,t),t=L3(e.stateNode,t,2),e=rc(e,t,2),e!==null&&(L0(e,2),na(e))}function Vt(e,t,n){if(e.tag===3)$I(e,e,n);else for(;t!==null;){if(t.tag===3){$I(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oc===null||!oc.has(i))){e=ls(n,e),n=nN(2),i=rc(t,n,2),i!==null&&(iN(n,i,t,e),L0(i,2),na(i));break}}t=t.return}}function y8(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Mq;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(nw=!0,r.add(n),e=Nq.bind(null,e,t,n),t.then(e,e))}function Nq(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Wt===e&&(mt&n)===n&&(En===4||En===3&&(mt&62914560)===mt&&300>Fo()-rw?!(hn&2)&&ph(e,0):iw|=n,mh===mt&&(mh=0)),na(e)}function BN(e,t){t===0&&(t=FD()),e=vc(e,t),e!==null&&(L0(e,t),na(e))}function Pq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),BN(e,n)}function Fq(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(te(314))}i!==null&&i.delete(t),BN(e,n)}function Bq(e,t){return Tv(e,t)}var Z2=null,uf=null,K3=!1,q2=!1,E8=!1,Bu=0;function na(e){e!==uf&&e.next===null&&(uf===null?Z2=uf=e:uf=uf.next=e),q2=!0,K3||(K3=!0,Hq(zq))}function z0(e,t){if(!E8&&q2){E8=!0;do for(var n=!1,i=Z2;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Vr(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,GI(i,s))}else s=mt,s=F6(i,i===Wt?s:0),!(s&3)||k0(i,s)||(n=!0,GI(i,s));i=i.next}while(n);E8=!1}}function zq(){q2=K3=!1;var e=0;Bu!==0&&(Kq()&&(e=Bu),Bu=0);for(var t=Fo(),n=null,i=Z2;i!==null;){var r=i.next,s=zN(i,t);s===0?(i.next=null,n===null?Z2=r:n.next=r,r===null&&(uf=n)):(n=i,(e!==0||s&3)&&(q2=!0)),i=r}z0(e)}function zN(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Vr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=fZ(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Wt,n=mt,n=F6(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&Yt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Zy(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||k0(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Zy(i),HD(n)){case 2:case 8:n=OD;break;case 32:n=D2;break;case 268435456:n=ND;break;default:n=D2}return i=HN.bind(null,e),n=Tv(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Zy(i),e.callbackPriority=2,e.callbackNode=null,2}function HN(e,t){var n=e.callbackNode;if(Kf()&&e.callbackNode!==n)return null;var i=mt;return i=F6(e,e===Wt?i:0),i===0?null:(kN(e,i,t),zN(e,Fo()),e.callbackNode!=null&&e.callbackNode===n?HN.bind(null,e):null)}function GI(e,t){if(Kf())return null;kN(e,t,!0)}function Hq(e){qq(function(){hn&6?Tv(DD,e):e()})}function ow(){return Bu===0&&(Bu=PD()),Bu}function XI(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:HU(""+e)}function jI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Vq(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=XI((r[Er]||null).action),o=i.submitter;o&&(t=(t=o[Er]||null)?XI(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new B6("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Bu!==0){var l=o?jI(r,o):new FormData(r);R3(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?jI(r,o):new FormData(r),R3(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var v8=0;v8<hI.length;v8++){var w8=hI[v8],$q=w8.toLowerCase(),Gq=w8[0].toUpperCase()+w8.slice(1);ho($q,"on"+Gq)}ho(lO,"onAnimationEnd");ho(cO,"onAnimationIteration");ho(uO,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(aq,"onTransitionRun");ho(lq,"onTransitionStart");ho(cq,"onTransitionCancel");ho(dO,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);Sd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lm));function VN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){G2(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){G2(u)}r.currentTarget=null,s=l}}}}function st(e,t){var n=t[b3];n===void 0&&(n=t[b3]=new Set);var i=e+"__bubble";n.has(i)||($N(t,e,2,!1),n.add(i))}function _8(e,t,n){var i=0;t&&(i|=4),$N(n,e,i,t)}var Wp="_reactListening"+Math.random().toString(36).slice(2);function aw(e){if(!e[Wp]){e[Wp]=!0,$D.forEach(function(n){n!=="selectionchange"&&(Xq.has(n)||_8(n,!1,e),_8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wp]||(t[Wp]=!0,_8("selectionchange",!1,t))}}function $N(e,t,n,i){switch(tP(t)){case 2:var r=UQ;break;case 8:r=bQ;break;default:r=dw}n=r.bind(null,t,n,e),r=void 0,!w3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function T8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=vu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}qD(function(){var c=s,u=xv(n),d=[];e:{var f=fO.get(e);if(f!==void 0){var h=B6,m=e;switch(e){case"keypress":if($U(n)===0)break e;case"keydown":case"keyup":h=FZ;break;case"focusin":m="focus",h=t8;break;case"focusout":m="blur",h=t8;break;case"beforeblur":case"afterblur":h=t8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=IZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=HZ;break;case lO:case cO:case uO:h=AZ;break;case dO:h=$Z;break;case"scroll":case"scrollend":h=TZ;break;case"wheel":h=XZ;break;case"copy":case"cut":case"paste":h=RZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=iI;break;case"toggle":case"beforetoggle":h=YZ}var p=(t&4)!==0,U=!p&&(e==="scroll"||e==="scrollend"),y=p?f!==null?f+"Capture":null:f;p=[];for(var E=c,w;E!==null;){var v=E;if(w=v.stateNode,v=v.tag,v!==5&&v!==26&&v!==27||w===null||y===null||(v=xm(E,y),v!=null&&p.push(Dm(E,v,w))),U)break;E=E.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==v3&&(m=n.relatedTarget||n.fromElement)&&(vu(m)||m[eg]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?vu(m):null,m!==null&&(U=Jh(m),p=m.tag,m!==U||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=tI,v="onMouseLeave",y="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(p=iI,v="onPointerLeave",y="onPointerEnter",E="pointer"),U=h==null?f:m1(h),w=m==null?f:m1(m),f=new p(v,E+"leave",h,n,u),f.target=U,f.relatedTarget=w,v=null,vu(u)===c&&(p=new p(y,E+"enter",m,n,u),p.target=w,p.relatedTarget=U,v=p),U=v,h&&m)t:{for(p=h,y=m,E=0,w=p;w;w=Wd(w))E++;for(w=0,v=y;v;v=Wd(v))w++;for(;0<E-w;)p=Wd(p),E--;for(;0<w-E;)y=Wd(y),w--;for(;E--;){if(p===y||y!==null&&p===y.alternate)break t;p=Wd(p),y=Wd(y)}p=null}else p=null;h!==null&&YI(d,f,h,p,!1),m!==null&&U!==null&&YI(d,U,m,p,!0)}}e:{if(f=c?m1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=aI;else if(oI(f))if(iO)x=iq;else{x=tq;var M=eq}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Iv(c.elementType)&&(x=aI):x=nq;if(x&&(x=x(e,c))){nO(d,x,n,u);break e}M&&M(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&E3(f,"number",f.value)}switch(M=c?m1(c):window,e){case"focusin":(oI(M)||M.contentEditable==="true")&&(Tf=M,_3=c,H1=null);break;case"focusout":H1=_3=Tf=null;break;case"mousedown":T3=!0;break;case"contextmenu":case"mouseup":case"dragend":T3=!1,fI(d,n,u);break;case"selectionchange":if(oq)break;case"keydown":case"keyup":fI(d,n,u)}var _;if(Mv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else _f?eO(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(JD&&n.locale!=="ko"&&(_f||T!=="onCompositionStart"?T==="onCompositionEnd"&&_f&&(_=QD()):(Wl=u,Cv="value"in Wl?Wl.value:Wl.textContent,_f=!0)),M=Q2(c,T),0<M.length&&(T=new nI(T,e,null,n,u),d.push({event:T,listeners:M}),_?T.data=_:(_=tO(n),_!==null&&(T.data=_)))),(_=KZ?ZZ(e,n):qZ(e,n))&&(T=Q2(c,"onBeforeInput"),0<T.length&&(M=new nI("onBeforeInput","beforeinput",null,n,u),d.push({event:M,listeners:T}),M.data=_)),Vq(d,e,c,n,u)}VN(d,t)})}function Dm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Q2(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=xm(e,n),r!=null&&i.unshift(Dm(e,r,s)),r=xm(e,t),r!=null&&i.push(Dm(e,r,s))),e=e.return}return i}function Wd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function YI(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=xm(n,s),c!=null&&o.unshift(Dm(n,c,l))):r||(c=xm(n,s),c!=null&&o.push(Dm(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var jq=/\r\n?/g,Yq=/\u0000|\uFFFD/g;function WI(e){return(typeof e=="string"?e:""+e).replace(jq,`
`).replace(Yq,"")}function GN(e,t){return t=WI(t),WI(e)===t}function Z6(){}function Ot(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||dh(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&dh(e,""+i);break;case"className":zp(e,"class",i);break;case"tabIndex":zp(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":zp(e,n,i);break;case"style":ZD(e,i,s);break;case"data":if(t!=="object"){zp(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=HU(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Ot(e,t,"name",r.name,r,null),Ot(e,t,"formEncType",r.formEncType,r,null),Ot(e,t,"formMethod",r.formMethod,r,null),Ot(e,t,"formTarget",r.formTarget,r,null)):(Ot(e,t,"encType",r.encType,r,null),Ot(e,t,"method",r.method,r,null),Ot(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=HU(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Z6);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=HU(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":st("beforetoggle",e),st("toggle",e),zU(e,"popover",i);break;case"xlinkActuate":la(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":la(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":la(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":la(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":la(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":la(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":la(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":la(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":la(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":zU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wZ.get(n)||n,zU(e,n,i))}}function Z3(e,t,n,i,r,s){switch(n){case"style":ZD(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"children":typeof i=="string"?dh(e,i):(typeof i=="number"||typeof i=="bigint")&&dh(e,""+i);break;case"onScroll":i!=null&&st("scroll",e);break;case"onScrollEnd":i!=null&&st("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Z6);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!GD.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Er]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):zU(e,n,i)}}}function wi(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Ot(e,t,s,o,n,null)}}r&&Ot(e,t,"srcSet",n.srcSet,n,null),i&&Ot(e,t,"src",n.src,n,null);return;case"input":st("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(te(137,t));break;default:Ot(e,t,i,u,n,null)}}YD(e,s,a,l,c,o,r,!1),O2(e);return;case"select":st("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Ot(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?$f(e,!!i,t,!1):n!=null&&$f(e,!!i,n,!0);return;case"textarea":st("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(te(91));break;default:Ot(e,t,o,a,n,null)}KD(e,i,r,s),O2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ot(e,t,l,i,n,null)}return;case"dialog":st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(i=0;i<Lm.length;i++)st(Lm[i],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Ot(e,t,c,i,n,null)}return;default:if(Iv(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&Z3(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Ot(e,t,a,i,n,null))}function Wq(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||Ot(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(te(137,t));break;default:h!==d&&Ot(e,t,f,h,i,d)}}y3(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||Ot(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&Ot(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?$f(e,!!n,f,!1):!!i!=!!n&&(t!=null?$f(e,!!n,t,!0):$f(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Ot(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(te(91));break;default:r!==s&&Ot(e,t,o,r,i,s)}WD(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Ot(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ot(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&Ot(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(te(137,t));break;default:Ot(e,t,c,f,i,h)}return;default:if(Iv(t)){for(var U in n)f=n[U],n.hasOwnProperty(U)&&f!==void 0&&!i.hasOwnProperty(U)&&Z3(e,t,U,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||Z3(e,t,u,f,i,h);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&f!=null&&!i.hasOwnProperty(y)&&Ot(e,t,y,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||Ot(e,t,d,f,i,h)}var q3=null,Q3=null;function J2(e){return e.nodeType===9?e:e.ownerDocument}function KI(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XN(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function J3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var S8=null;function Kq(){var e=window.event;return e&&e.type==="popstate"?e===S8?!1:(S8=e,!0):(S8=null,!1)}var jN=typeof setTimeout=="function"?setTimeout:void 0,Zq=typeof clearTimeout=="function"?clearTimeout:void 0,ZI=typeof Promise=="function"?Promise:void 0,qq=typeof queueMicrotask=="function"?queueMicrotask:typeof ZI<"u"?function(e){return ZI.resolve(null).then(e).catch(Qq)}:jN;function Qq(e){setTimeout(function(){throw e})}function I8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),Bm(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Bm(t)}function e7(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":e7(n),Sv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Jq(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Im])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Zs(e.nextSibling),e===null)break}return null}function eQ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Zs(e.nextSibling),e===null))return null;return e}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function qI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function YN(e,t,n){switch(t=J2(n),e){case"html":if(e=t.documentElement,!e)throw Error(te(452));return e;case"head":if(e=t.head,!e)throw Error(te(453));return e;case"body":if(e=t.body,!e)throw Error(te(454));return e;default:throw Error(te(451))}}var Ts=new Map,QI=new Set;function eb(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var fl=tn.d;tn.d={f:tQ,r:nQ,D:iQ,C:rQ,L:sQ,m:oQ,X:lQ,S:aQ,M:cQ};function tQ(){var e=fl.f(),t=W6();return e||t}function nQ(e){var t=tg(e);t!==null&&t.tag===5&&t.type==="form"?YO(t):fl.r(e)}var ig=typeof document>"u"?null:document;function WN(e,t,n){var i=ig;if(i&&typeof t=="string"&&t){var r=as(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),QI.has(r)||(QI.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),wi(t,"link",e),ci(t),i.head.appendChild(t)))}}function iQ(e){fl.D(e),WN("dns-prefetch",e,null)}function rQ(e,t){fl.C(e,t),WN("preconnect",e,t)}function sQ(e,t,n){fl.L(e,t,n);var i=ig;if(i&&e&&t){var r='link[rel="preload"][as="'+as(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+as(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+as(n.imageSizes)+'"]')):r+='[href="'+as(e)+'"]';var s=r;switch(t){case"style":s=Uh(e);break;case"script":s=rg(e)}Ts.has(s)||(e=nn({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ts.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(H0(s))||t==="script"&&i.querySelector(V0(s))||(t=i.createElement("link"),wi(t,"link",e),ci(t),i.head.appendChild(t)))}}function oQ(e,t){fl.m(e,t);var n=ig;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+as(i)+'"][href="'+as(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=rg(e)}if(!Ts.has(s)&&(e=nn({rel:"modulepreload",href:e},t),Ts.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(V0(s)))return}i=n.createElement("link"),wi(i,"link",e),ci(i),n.head.appendChild(i)}}}function aQ(e,t,n){fl.S(e,t,n);var i=ig;if(i&&e){var r=Vf(i).hoistableStyles,s=Uh(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(H0(s)))a.loading=5;else{e=nn({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ts.get(s))&&lw(e,n);var l=o=i.createElement("link");ci(l),wi(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,KU(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function lQ(e,t){fl.X(e,t);var n=ig;if(n&&e){var i=Vf(n).hoistableScripts,r=rg(e),s=i.get(r);s||(s=n.querySelector(V0(r)),s||(e=nn({src:e,async:!0},t),(t=Ts.get(r))&&cw(e,t),s=n.createElement("script"),ci(s),wi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function cQ(e,t){fl.M(e,t);var n=ig;if(n&&e){var i=Vf(n).hoistableScripts,r=rg(e),s=i.get(r);s||(s=n.querySelector(V0(r)),s||(e=nn({src:e,async:!0,type:"module"},t),(t=Ts.get(r))&&cw(e,t),s=n.createElement("script"),ci(s),wi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function JI(e,t,n,i){var r=(r=nc.current)?eb(r):null;if(!r)throw Error(te(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Uh(n.href),n=Vf(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Uh(n.href);var s=Vf(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(H0(e)))&&!s._p&&(o.instance=s,o.state.loading=5),Ts.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ts.set(e,n),s||uQ(r,e,n,o.state))),t&&i===null)throw Error(te(528,""));return o}if(t&&i!==null)throw Error(te(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=rg(n),n=Vf(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,e))}}function Uh(e){return'href="'+as(e)+'"'}function H0(e){return'link[rel="stylesheet"]['+e+"]"}function KN(e){return nn({},e,{"data-precedence":e.precedence,precedence:null})}function uQ(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),wi(t,"link",n),ci(t),e.head.appendChild(t))}function rg(e){return'[src="'+as(e)+'"]'}function V0(e){return"script[async]"+e}function ex(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+as(n.href)+'"]');if(i)return t.instance=i,ci(i),i;var r=nn({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ci(i),wi(i,"style",r),KU(i,n.precedence,e),t.instance=i;case"stylesheet":r=Uh(n.href);var s=e.querySelector(H0(r));if(s)return t.state.loading|=4,t.instance=s,ci(s),s;i=KN(n),(r=Ts.get(r))&&lw(i,r),s=(e.ownerDocument||e).createElement("link"),ci(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),wi(s,"link",i),t.state.loading|=4,KU(s,n.precedence,e),t.instance=s;case"script":return s=rg(n.src),(r=e.querySelector(V0(s)))?(t.instance=r,ci(r),r):(i=n,(r=Ts.get(s))&&(i=nn({},n),cw(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ci(r),wi(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(te(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,KU(i,n.precedence,e));return t.instance}function KU(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function lw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function cw(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ZU=null;function tx(e,t,n){if(ZU===null){var i=new Map,r=ZU=new Map;r.set(n,i)}else r=ZU,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Im]||s[Bi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function nx(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function dQ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ZN(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Om=null;function fQ(){}function hQ(e,t,n){if(Om===null)throw Error(te(475));var i=Om;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Uh(n.href),s=e.querySelector(H0(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=tb.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,ci(s);return}s=e.ownerDocument||e,n=KN(n),(r=Ts.get(r))&&lw(n,r),s=s.createElement("link"),ci(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),wi(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=tb.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function gQ(){if(Om===null)throw Error(te(475));var e=Om;return e.stylesheets&&e.count===0&&t7(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&t7(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function tb(){if(this.count--,this.count===0){if(this.stylesheets)t7(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var nb=null;function t7(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,nb=new Map,t.forEach(mQ,e),nb=null,tb.call(e))}function mQ(e,t){if(!(t.state.loading&4)){var n=nb.get(e);if(n)var i=n.get(null);else{n=new Map,nb.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=tb.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Nm={$$typeof:Ma,Provider:null,Consumer:null,_currentValue:Du,_currentValue2:Du,_threadCount:0};function pQ(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qy(0),this.hiddenUpdates=qy(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function qN(e,t,n,i,r,s,o,a,l,c,u,d){return e=new pQ(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=fs(3,null,null,t),e.current=s,s.stateNode=e,t=Pv(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Qv(s),e}function QN(e){return e?(e=xf,e):xf}function JN(e,t,n,i,r,s){r=QN(r),i.context===null?i.context=r:i.pendingContext=r,i=ic(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=rc(e,i,t),n!==null&&(er(n,e,t),Y1(n,e,t))}function ix(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uw(e,t){ix(e,t),(e=e.alternate)&&ix(e,t)}function eP(e){if(e.tag===13){var t=vc(e,67108864);t!==null&&er(t,e,67108864),uw(e,67108864)}}var ib=!0;function UQ(e,t,n,i){var r=je.T;je.T=null;var s=tn.p;try{tn.p=2,dw(e,t,n,i)}finally{tn.p=s,je.T=r}}function bQ(e,t,n,i){var r=je.T;je.T=null;var s=tn.p;try{tn.p=8,dw(e,t,n,i)}finally{tn.p=s,je.T=r}}function dw(e,t,n,i){if(ib){var r=n7(i);if(r===null)T8(e,t,i,rb,n),rx(e,i);else if(EQ(r,e,t,n,i))i.stopPropagation();else if(rx(e,i),t&4&&-1<yQ.indexOf(e)){for(;r!==null;){var s=tg(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=lu(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Vr(o);a.entanglements[1]|=l,o&=~l}na(s),!(hn&6)&&(W2=Fo()+500,z0(0))}}break;case 13:a=vc(s,2),a!==null&&er(a,s,2),W6(),uw(s,2)}if(s=n7(i),s===null&&T8(e,t,i,rb,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else T8(e,t,i,null,n)}}function n7(e){return e=xv(e),fw(e)}var rb=null;function fw(e){if(rb=null,e=vu(e),e!==null){var t=Jh(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=kD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rb=e,null}function tP(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rZ()){case DD:return 2;case OD:return 8;case D2:case sZ:return 32;case ND:return 268435456;default:return 32}default:return 32}}var i7=!1,ac=null,lc=null,cc=null,Pm=new Map,Fm=new Map,$l=[],yQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rx(e,t){switch(e){case"focusin":case"focusout":ac=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Pm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fm.delete(t.pointerId)}}function $g(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=tg(t),t!==null&&eP(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function EQ(e,t,n,i,r){switch(t){case"focusin":return ac=$g(ac,e,t,n,i,r),!0;case"dragenter":return lc=$g(lc,e,t,n,i,r),!0;case"mouseover":return cc=$g(cc,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pm.set(s,$g(Pm.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Fm.set(s,$g(Fm.get(s)||null,e,t,n,i,r)),!0}return!1}function nP(e){var t=vu(e.target);if(t!==null){var n=Jh(t);if(n!==null){if(t=n.tag,t===13){if(t=kD(n),t!==null){e.blockedOn=t,gZ(e.priority,function(){if(n.tag===13){var i=$r(),r=vc(n,i);r!==null&&er(r,n,i),uw(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qU(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=n7(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);v3=i,n.target.dispatchEvent(i),v3=null}else return t=tg(n),t!==null&&eP(t),e.blockedOn=n,!1;t.shift()}return!0}function sx(e,t,n){qU(e)&&n.delete(t)}function vQ(){i7=!1,ac!==null&&qU(ac)&&(ac=null),lc!==null&&qU(lc)&&(lc=null),cc!==null&&qU(cc)&&(cc=null),Pm.forEach(sx),Fm.forEach(sx)}function Kp(e,t){e.blockedOn===t&&(e.blockedOn=null,i7||(i7=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,vQ)))}var Zp=null;function ox(e){Zp!==e&&(Zp=e,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,function(){Zp===e&&(Zp=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(fw(i||n)===null)continue;break}var s=tg(n);s!==null&&(e.splice(t,3),t-=3,R3(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Bm(e){function t(l){return Kp(l,e)}ac!==null&&Kp(ac,e),lc!==null&&Kp(lc,e),cc!==null&&Kp(cc,e),Pm.forEach(t),Fm.forEach(t);for(var n=0;n<$l.length;n++){var i=$l[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$l.length&&(n=$l[0],n.blockedOn===null);)nP(n),n.blockedOn===null&&$l.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[Er]||null;if(typeof s=="function")o||ox(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[Er]||null)a=o.formAction;else if(fw(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),ox(n)}}}function hw(e){this._internalRoot=e}q6.prototype.render=hw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));var n=t.current,i=$r();JN(n,i,e,t,null,null)};q6.prototype.unmount=hw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Kf(),JN(e.current,2,null,e,null,null),W6(),t[eg]=null}};function q6(e){this._internalRoot=e}q6.prototype.unstable_scheduleHydration=function(e){if(e){var t=VD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$l.length&&t!==0&&t<$l[n].priority;n++);$l.splice(n,0,e),n===0&&nP(e)}};var ax=xD.version;if(ax!=="19.0.0")throw Error(te(527,ax,"19.0.0"));tn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=tZ(t),e=e!==null?LD(e):null,e=e===null?null:e.stateNode,e};var wQ={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:je,findFiberByHostInstance:vu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qp.isDisabled&&qp.supportsFiber)try{R0=qp.inject(wQ),Hr=qp}catch{}}N6.createRoot=function(e,t){if(!CD(e))throw Error(te(299));var n=!1,i="",r=JO,s=eN,o=tN,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=qN(e,1,!1,null,null,n,i,r,s,o,a,null),e[eg]=t.current,aw(e.nodeType===8?e.parentNode:e),new hw(t)};N6.hydrateRoot=function(e,t,n){if(!CD(e))throw Error(te(299));var i=!1,r="",s=JO,o=eN,a=tN,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=qN(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=QN(null),n=t.current,i=$r(),r=ic(i),r.callback=null,rc(n,r,i),t.current.lanes=i,L0(t,i),na(t),e[eg]=t.current,aw(e),new q6(t)};N6.version="19.0.0";function iP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iP)}catch(e){console.error(e)}}iP(),vD.exports=N6;var _Q=vD.exports;const TQ="modulepreload",SQ=function(e,t){return new URL(e,t).href},lx={},be=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=SQ(o,i),o in lx)return;lx[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":TQ,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function IQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await be(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([]),import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{s?s("./sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const Lt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ft=globalThis,Rd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,zu="9.0.1";function Q6(){return J6(Ft),Ft}function J6(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||zu,t[zu]=t[zu]||{}}function e5(e,t,n=Ft){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[zu]=i[zu]||{};return r[e]||(r[e]=t())}const xQ="Sentry Logger ",sb=["debug","info","warn","error","log","assert","trace"],ob={};function sg(e){if(!("console"in Ft))return e();const t=Ft.console,n={},i=Object.keys(ob);i.forEach(r=>{const s=ob[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function CQ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Rd?sb.forEach(n=>{t[n]=(...i)=>{e&&sg(()=>{Ft.console[n](`${xQ}[${n}]:`,...i)})}}):sb.forEach(n=>{t[n]=()=>{}}),t}const Be=e5("logger",CQ),rP=50,Ju="?",cx=/\(error: (.*)\)/,ux=/captureMessage|captureException/;function sP(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=cx.test(l)?l.replace(cx,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=rP+r)break}}return MQ(s.slice(r))}}function AQ(e){return Array.isArray(e)?sP(...e):e}function MQ(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Qp(t).function||"")&&t.pop(),t.reverse(),ux.test(Qp(t).function||"")&&(t.pop(),ux.test(Qp(t).function||"")&&t.pop()),t.slice(0,rP).map(n=>({...n,filename:n.filename||Qp(t).filename,function:n.function||Ju}))}function Qp(e){return e[e.length-1]||{}}const x8="<anonymous>";function Sc(e){try{return!e||typeof e!="function"?x8:e.name||x8}catch{return x8}}function dx(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const QU={},fx={};function kd(e,t){QU[e]=QU[e]||[],QU[e].push(t)}function Ld(e,t){if(!fx[e]){fx[e]=!0;try{t()}catch(n){Rd&&Be.error(`Error while instrumenting ${e}`,n)}}}function qs(e,t){const n=e&&QU[e];if(n)for(const i of n)try{i(t)}catch(r){Rd&&Be.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Sc(i)}
Error:`,r)}}let C8=null;function RQ(e){const t="error";kd(t,e),Ld(t,kQ)}function kQ(){C8=Ft.onerror,Ft.onerror=function(e,t,n,i,r){return qs("error",{column:i,error:r,line:n,msg:e,url:t}),C8?C8.apply(this,arguments):!1},Ft.onerror.__SENTRY_INSTRUMENTED__=!0}let A8=null;function LQ(e){const t="unhandledrejection";kd(t,e),Ld(t,DQ)}function DQ(){A8=Ft.onunhandledrejection,Ft.onunhandledrejection=function(e){return qs("unhandledrejection",e),A8?A8.apply(this,arguments):!0},Ft.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const oP=Object.prototype.toString;function gw(e){switch(oP.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ed(e,Error)}}function og(e,t){return oP.call(e)===`[object ${t}]`}function aP(e){return og(e,"ErrorEvent")}function hx(e){return og(e,"DOMError")}function OQ(e){return og(e,"DOMException")}function Fa(e){return og(e,"String")}function mw(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function pw(e){return e===null||mw(e)||typeof e!="object"&&typeof e!="function"}function bh(e){return og(e,"Object")}function t5(e){return typeof Event<"u"&&ed(e,Event)}function NQ(e){return typeof Element<"u"&&ed(e,Element)}function PQ(e){return og(e,"RegExp")}function n5(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function FQ(e){return bh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ed(e,t){try{return e instanceof t}catch{return!1}}function lP(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const Uw=Ft,BQ=80;function cP(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||BQ;for(;n&&s++<i&&(c=zQ(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function zQ(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(Uw.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&Fa(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function bw(){try{return Uw.document.location.href}catch{return""}}function HQ(e){if(!Uw.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Zf(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ab(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{lP(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function VQ(e,t,n=!1){return Fa(e)?PQ(t)?t.test(e):Fa(t)?n?e===t:e.includes(t):!1:!1}function i5(e,t=[],n=!1){return t.some(i=>VQ(e,i,n))}function Nr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&uP(r,i);try{e[t]=r}catch{Rd&&Be.log(`Failed to replace method "${t}" in object`,e)}}function td(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Rd&&Be.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function uP(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,td(e,"__sentry_original__",t)}catch{}}function yw(e){return e.__sentry_original__}function dP(e){if(gw(e))return{message:e.message,name:e.name,stack:e.stack,...mx(e)};if(t5(e)){const t={type:e.type,target:gx(e.target),currentTarget:gx(e.currentTarget),...mx(e)};return typeof CustomEvent<"u"&&ed(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function gx(e){try{return NQ(e)?cP(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function mx(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function $Q(e,t=40){const n=Object.keys(dP(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return Zf(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Zf(s,t)}return""}function Pr(e){return r7(e,new Map)}function r7(e,t){if(GQ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=r7(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(r7(r,t))}),i}return e}function GQ(e){if(!bh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const fP=1e3;function $0(){return Date.now()/fP}function XQ(){const{performance:e}=Ft;if(!(e!=null&&e.now))return $0;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/fP}const Ba=XQ();function Us(){const e=Ft,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function hP(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Ol(e){const{message:t,event_id:n}=e;if(t)return t;const i=hP(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function s7(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function nd(e,t){const n=hP(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r==null?void 0:r.data,...t.data};n.mechanism.data=s}}function px(e){if(jQ(e))return!0;try{td(e,"__sentry_captured__",!0)}catch{}return!1}function jQ(e){try{return e.__sentry_captured__}catch{}}var ma;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(ma||(ma={}));function id(e){return new Ic(t=>{t(e)})}function lb(e){return new Ic((t,n)=>{n(e)})}class Ic{constructor(t){this._state=ma.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new Ic((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Ic((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===ma.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ma.RESOLVED&&n[1](this._value),this._state===ma.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===ma.PENDING){if(n5(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(ma.RESOLVED,s)},r=s=>{n(ma.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function YQ(e){const t=Ba(),n={sid:Us(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>KQ(n)};return e&&yh(n,e),n}function yh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ba(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Us()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function WQ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),yh(e,n)}function KQ(e){return Pr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function Ux(){return Us()}function gP(){return Us().substring(16)}function G0(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=G0(i[r],t[r],n-1));return i}const o7="_sentrySpan";function bx(e,t){t?td(e,o7,t):delete e[o7]}function yx(e){return e[o7]}const ZQ=100;class $o{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ux(),sampleRand:Math.random()}}clone(){const t=new $o;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,bx(t,yx(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&yh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof $o?n.getScopeData():bh(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,bx(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ux(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const i=typeof n=="number"?n:ZQ;if(i<=0)return this;const r={timestamp:$0(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:yx(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=G0(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||Us();if(!this._client)return Be.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=(i==null?void 0:i.event_id)||Us();if(!this._client)return Be.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||Us();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(Be.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function qQ(){return e5("defaultCurrentScope",()=>new $o)}function QQ(){return e5("defaultIsolationScope",()=>new $o)}class JQ{constructor(t,n){let i;t?i=t:i=new $o;let r;n?r=n:r=new $o,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return n5(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Eh(){const e=Q6(),t=J6(e);return t.stack=t.stack||new JQ(qQ(),QQ())}function eJ(e){return Eh().withScope(e)}function tJ(e,t){const n=Eh();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Ex(e){return Eh().withScope(()=>e(Eh().getIsolationScope()))}function nJ(){return{withIsolationScope:Ex,withScope:eJ,withSetScope:tJ,withSetIsolationScope:(e,t)=>Ex(t),getCurrentScope:()=>Eh().getScope(),getIsolationScope:()=>Eh().getIsolationScope()}}function Ew(e){const t=J6(e);return t.acs?t.acs:nJ()}function hl(){const e=Q6();return Ew(e).getCurrentScope()}function X0(){const e=Q6();return Ew(e).getIsolationScope()}function iJ(){return e5("globalScope",()=>new $o)}function vw(...e){const t=Q6(),n=Ew(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function Gi(){return hl().getClient()}function rJ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return Pr({trace_id:n,span_id:r||gP(),parent_span_id:i})}const sJ="sentry.source",oJ="sentry.sample_rate",aJ="sentry.op",lJ="sentry.origin",mP="sentry.profile_id",pP="sentry.exclusive_time",cJ=0,uJ=1,dJ="_sentryScope",fJ="_sentryIsolationScope";function UP(e){return{scope:e[dJ],isolationScope:e[fJ]}}function hJ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const gJ="sentry-",mJ=/^sentry-/;function pJ(e){const t=UJ(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(mJ)){const o=r.slice(gJ.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function UJ(e){if(!(!e||!Fa(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=vx(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):vx(e)}function vx(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const bJ=1;let wx=!1;function yJ(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:ww(e).parent_span_id,s=UP(e).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||gP():t;return Pr({parent_span_id:r,span_id:o,trace_id:n})}function _x(e){return typeof e=="number"?Tx(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Tx(e.getTime()):Ba()}function Tx(e){return e>9999999999?e/1e3:e}function ww(e){if(vJ(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(EJ(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return Pr({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:_x(r),timestamp:_x(o)||void 0,status:_J(l),op:i[aJ],origin:i[lJ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function EJ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function vJ(e){return typeof e.getSpanJSON=="function"}function wJ(e){const{traceFlags:t}=e.spanContext();return t===bJ}function _J(e){if(!(!e||e.code===cJ))return e.code===uJ?"ok":e.message||"unknown_error"}const TJ="_sentryRootSpan";function bP(e){return e[TJ]||e}function Sx(){wx||(sg(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),wx=!0)}function SJ(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Gi())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const _w="production",IJ="_frozenDsc";function yP(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=Pr({environment:n.environment||_w,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function xJ(e,t){const n=t.getPropagationContext();return n.dsc||yP(n.traceId,e)}function CJ(e){var m;const t=Gi();if(!t)return{};const n=bP(e),i=ww(n),r=i.data,s=n.spanContext().traceState,o=(s==null?void 0:s.get("sentry.sample_rate"))??r[oJ];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[IJ];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&pJ(c);if(u)return a(u);const d=yP(e.spanContext().traceId,t),f=r[sJ],h=i.description;return f!=="url"&&h&&(d.transaction=h),SJ()&&(d.sampled=String(wJ(n)),d.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((m=UP(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const AJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function MJ(e){return e==="http"||e==="https"}function Tw(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function RJ(e){const t=AJ.exec(e);if(!t){sg(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return EP({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function EP(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function kJ(e){if(!Rd)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Be.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?MJ(i)?t&&isNaN(parseInt(t,10))?(Be.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Be.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Be.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function LJ(e){const t=typeof e=="string"?RJ(e):EP(e);if(!(!t||!kJ(t)))return t}function pa(e,t=100,n=1/0){try{return a7("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function vP(e,t=3,n=100*1024){const i=pa(e,t);return PJ(i)>n?vP(e,t-1,n):i}function a7(e,t,n=1/0,i=1/0,r=FJ()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=DJ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return a7("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=dP(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=a7(h,m,l-1,i,r),d++}return o(t),u}function DJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(lP(t))return"[VueViewModel]";if(FQ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Sc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=OJ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function OJ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function NJ(e){return~-encodeURI(e).split(/%..|./).length}function PJ(e){return NJ(JSON.stringify(e))}function FJ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function r5(e,t=[]){return[e,t]}function BJ(e,t){const[n,i]=e;return[n,[...i,t]]}function Ix(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function l7(e){const t=J6(Ft);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function zJ(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[l7(i),s]:i.push(typeof s=="string"?l7(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(pa(a))}r(l)}}return typeof i=="string"?i:HJ(i)}function HJ(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function VJ(e){const t=typeof e.data=="string"?l7(e.data):e.data;return[Pr({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const $J={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function xx(e){return $J[e]}function wP(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function GJ(e,t,n,i){var s;const r=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:Tw(i)},...r&&{trace:Pr({...r})}}}function XJ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function jJ(e,t,n,i){const r=wP(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:Tw(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return r5(s,[o])}function YJ(e,t,n,i){const r=wP(n),s=e.type&&e.type!=="replay_event"?e.type:"event";XJ(e,n==null?void 0:n.sdk);const o=GJ(e,r,i,t);return delete e.sdkProcessingMetadata,r5(o,[[{type:s},e]])}function c7(e,t,n,i=0){return new Ic((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);Lt&&o.id&&a===null&&Be.log(`Event processor "${o.id}" dropped event`),n5(a)?a.then(l=>c7(e,l,n,i+1).then(r)).then(null,s):c7(e,a,n,i+1).then(r).then(null,s)}})}let Jp,Cx,eU;function WJ(e){const t=Ft._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return eU&&n.length===Cx||(Cx=n.length,eU=n.reduce((i,r)=>{Jp||(Jp={});const s=Jp[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[r];if(c&&u){i[c]=u,Jp[r]=[c,u];break}}}return i},{})),eU}function KJ(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;ZJ(e,t),i&&JJ(e,i),eee(e,n),qJ(e,r),QJ(e,s)}function Ax(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;tU(e,"extra",n),tU(e,"tags",i),tU(e,"user",r),tU(e,"contexts",s),e.sdkProcessingMetadata=G0(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function tU(e,t,n){e[t]=G0(e[t],n,1)}function ZJ(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=Pr(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Pr(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Pr(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=Pr(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function qJ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function QJ(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function JJ(e,t){e.contexts={trace:yJ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:CJ(t),...e.sdkProcessingMetadata};const n=bP(t),i=ww(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function eee(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function tee(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Us(),timestamp:t.timestamp||$0()},c=n.integrations||e.integrations.map(U=>U.name);nee(l,e),see(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&iee(l,e.stackParser);const u=aee(i,n.captureContext);n.mechanism&&nd(l,n.mechanism);const d=r?r.getEventProcessors():[],f=iJ().getScopeData();if(s){const U=s.getScopeData();Ax(f,U)}if(u){const U=u.getScopeData();Ax(f,U)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),KJ(l,f);const m=[...d,...f.eventProcessors];return c7(m,l,n).then(U=>(U&&ree(U),typeof o=="number"&&o>0?oee(U,o,a):U))}function nee(e,t){var l,c;const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||_w,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=Zf(e.message,s));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=Zf(o.value,s));const a=e.request;a!=null&&a.url&&(a.url=Zf(a.url,s))}function iee(e,t){var i,r;const n=WJ(t);(r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function ree(e){var i,r;const t={};if((r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,o])=>{n.push({type:"sourcemap",code_file:s,debug_id:o})})}function see(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function oee(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:pa(o.data,t,n)}}))},...e.user&&{user:pa(e.user,t,n)},...e.contexts&&{contexts:pa(e.contexts,t,n)},...e.extra&&{extra:pa(e.extra,t,n)}};return(r=e.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=pa(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:pa(o.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=pa(e.contexts.flags,3,n)),i}function aee(e,t){if(!t)return e;const n=e?e.clone():new $o;return n.update(t),n}function lee(e){if(e)return cee(e)?{captureContext:e}:dee(e)?{captureContext:e}:e}function cee(e){return e instanceof $o||typeof e=="function"}const uee=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function dee(e){return Object.keys(e).some(t=>uee.includes(t))}function Sw(e,t){return hl().captureException(e,lee(t))}function Mx(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return hl().captureMessage(e,n,i)}function _P(e,t){return hl().captureEvent(e,t)}function Rx(e){const t=X0(),n=hl(),{userAgent:i}=Ft.navigator||{},r=YQ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&yh(s,{status:"exited"}),TP(),t.setSession(r),r}function TP(){const e=X0(),n=hl().getSession()||e.getSession();n&&WQ(n),SP(),e.setSession()}function SP(){const e=X0(),t=Gi(),n=e.getSession();n&&t&&t.captureSession(n)}function kx(e=!1){if(e){TP();return}SP()}const fee="7";function hee(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function gee(e){return`${hee(e)}${e.projectId}/envelope/`}function mee(e,t){const n={sentry_version:fee};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function pee(e,t,n){return t||`${gee(e)}?${mee(e,n)}`}const Lx=[];function Uee(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function bee(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return Uee(i)}function yee(e,t){const n={};return t.forEach(i=>{i&&IP(e,i,n)}),n}function Dx(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function IP(e,t,n){if(n[t.name]){Lt&&Be.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Lx.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Lx.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}Lt&&Be.log(`Integration installed: ${t.name}`)}function Eee(e,t,n){const i=[{type:"client_report"},{timestamp:$0(),discarded_events:e}];return r5(t?{dsn:t}:{},[i])}class Hs extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function xP(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function vee(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Pr({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o==null?void 0:o[mP],exclusive_time:o==null?void 0:o[pP],measurements:e.measurements,is_segment:!0})}function wee(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[mP]:e.profile_id},...e.exclusive_time&&{[pP]:e.exclusive_time}}}},measurements:e.measurements};return Pr(t)}const Ox="Not capturing exception because it's already been captured.",Nx="Discarded session because of missing or non-string release";class _ee{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=LJ(t.dsn):Lt&&Be.warn("No DSN provided, client will not send events."),this._dsn){const n=pee(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=Us();if(px(t))return Lt&&Be.log(Ox),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:Us(),...i},o=mw(t)?t:String(t),a=pw(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=Us();if(n!=null&&n.originalException&&px(n.originalException))return Lt&&Be.log(Ox),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),yh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):id(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];IP(this,t,this._integrations),n||Dx(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=YJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=BJ(i,VJ(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=_w}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){Lt&&Be.warn(Nx);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){Lt&&Be.warn(Nx);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=jJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;Lt&&Be.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Lt&&Be.error("Error while sending envelope:",n),n)):(Lt&&Be.error("Transport disabled"),id({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=yee(this,t),Dx(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",r=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(yh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Ic(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),tee(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:rJ(i),...a.contexts};const l=xJ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=hl(),r=X0()){return Lt&&u7(t)&&Be.log(`Captured error event \`${xP(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{Lt&&(s instanceof Hs&&s.logLevel==="log"?Be.log(s.message):Be.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=CP(t),l=u7(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:hJ(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),lb(new Hs(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new Hs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=See(this,s,h,n);return Tee(p,u)}).then(h=>{var U;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const E=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw new Hs(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const y=((U=h.sdkProcessingMetadata)==null?void 0:U.spanCountBeforeProcessing)||0,E=h.spans?h.spans.length:0,w=y-E;w>0&&this.recordDroppedEvent("before_send","span",w)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const y="custom";h.transaction_info={...p,source:y}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof Hs?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Hs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Lt&&Be.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Lt&&Be.log("No outcomes to send");return}if(!this._dsn){Lt&&Be.log("No dsn provided, will not send outcomes");return}Lt&&Be.log("Sending outcomes:",t);const n=Eee(t,this._options.tunnel&&Tw(this._dsn));this.sendEnvelope(n)}}function Tee(e,t){const n=`${t} must return \`null\` or a valid event.`;if(n5(e))return e.then(i=>{if(!bh(i)&&i!==null)throw new Hs(n);return i},i=>{throw new Hs(`${t} rejected with ${i}`)});if(!bh(e)&&e!==null)throw new Hs(n);return e}function See(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if(u7(a)&&r)return r(a,i);if(CP(a)){if(o){const l=o(vee(a));if(l?a=G0(n,wee(l)):Sx(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(Sx(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function u7(e){return e.type===void 0}function CP(e){return e.type==="transaction"}function Iee(e,t){t.debug===!0&&(Lt?Be.enable():sg(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),hl().update(t.initialScope);const i=new e(t);return xee(i),i.init(),i}function xee(e){hl().setClient(e)}function Cee(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return lb(new Hs("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new Ic((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{id(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const Aee=60*1e3;function Mee(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?Aee:i-t}function Ree(e,t){return e[t]||e.all||0}function kee(e,t,n=Date.now()){return Ree(e,t)>n}function Lee(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+Mee(o,i):t===429&&(r.all=i+60*1e3);return r}const Dee=64;function Oee(e,t,n=Cee(e.bufferSize||Dee)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(Ix(o,(d,f)=>{const h=xx(f);kee(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return id({});const l=r5(o[0],a),c=d=>{Ix(l,(f,h)=>{e.recordDroppedEvent(d,xx(h))})},u=()=>t({body:zJ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Lt&&Be.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Lee(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Hs)return Lt&&Be.error("Skipped sending event because buffer is full."),c("queue_overflow"),id({});throw d})}return{send:s,flush:r}}function Nee(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Pee(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Fee(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:zu})),version:zu}),e._metadata=r}const Bee=100;function rd(e,t){const n=Gi(),i=X0();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=Bee}=n.getOptions();if(s<=0)return;const a={timestamp:$0(),...e},l=r?sg(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let Px;const zee="FunctionToString",Fx=new WeakMap,Hee=()=>({name:zee,setupOnce(){Px=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=yw(this),n=Fx.has(Gi())&&t!==void 0?t:this;return Px.apply(n,e)}}catch{}},setup(e){Fx.set(e,!0)}}),Vee=Hee,$ee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Gee="InboundFilters",Xee=(e={})=>({name:Gee,processEvent(t,n,i){const r=i.getOptions(),s=Yee(e,r);return Wee(t,s)?null:t}}),jee=Xee;function Yee(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:$ee],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function Wee(e,t){return t.ignoreInternal&&Jee(e)?(Lt&&Be.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ol(e)}`),!0):Kee(e,t.ignoreErrors)?(Lt&&Be.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ol(e)}`),!0):tte(e)?(Lt&&Be.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ol(e)}`),!0):Zee(e,t.ignoreTransactions)?(Lt&&Be.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ol(e)}`),!0):qee(e,t.denyUrls)?(Lt&&Be.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ol(e)}.
Url: ${cb(e)}`),!0):Qee(e,t.allowUrls)?!1:(Lt&&Be.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ol(e)}.
Url: ${cb(e)}`),!0)}function Kee(e,t){return e.type||!t||!t.length?!1:xP(e).some(n=>i5(n,t))}function Zee(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?i5(n,t):!1}function qee(e,t){if(!(t!=null&&t.length))return!1;const n=cb(e);return n?i5(n,t):!1}function Qee(e,t){if(!(t!=null&&t.length))return!0;const n=cb(e);return n?i5(n,t):!0}function Jee(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function ete(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function cb(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?ete(t):null}catch{return Lt&&Be.error(`Cannot extract url for event ${Ol(e)}`),null}}function tte(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function nte(e,t,n=250,i,r,s,o){var l;if(!((l=s.exception)!=null&&l.values)||!o||!ed(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=ite(d7(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function d7(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(ed(i[r],Error)){Bx(o,a);const c=e(t,i[r]),u=l.length;zx(c,r,u,a),l=d7(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(ed(c,Error)){Bx(o,a);const d=e(t,c),f=l.length;zx(d,`errors[${u}]`,f,a),l=d7(e,t,n,c,r,[d,...l],d,f)}}),l}function Bx(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function zx(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function ite(e,t){return e.map(n=>(n.value&&(n.value=Zf(n.value,t)),n))}function AP(e){const t="console";kd(t,e),Ld(t,rte)}function rte(){"console"in Ft&&sb.forEach(function(e){e in Ft.console&&Nr(Ft.console,e,function(t){return ob[e]=t,function(...n){qs("console",{args:n,level:e});const r=ob[e];r==null||r.apply(Ft.console,n)}})})}function MP(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const ste="CaptureConsole",ote=(e={})=>{const t=e.levels||sb,n=e.handled??!0;return{name:ste,setup(i){"console"in Ft&&AP(({args:r,level:s})=>{Gi()!==i||!t.includes(s)||lte(r,s,n)})}}},ate=ote;function lte(e,t,n){const i={level:MP(t),extra:{arguments:e}};vw(r=>{if(r.addEventProcessor(a=>(a.logger="console",nd(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${ab(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),Mx(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){Sw(s,i);return}const o=ab(e," ");Mx(o,i)})}const cte="Dedupe",ute=()=>{let e;return{name:cte,processEvent(t){if(t.type)return t;try{if(fte(t,e))return Lt&&Be.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},dte=ute;function fte(e,t){return t?!!(hte(e,t)||gte(e,t)):!1}function hte(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!kP(e,t)||!RP(e,t))}function gte(e,t){const n=Hx(t),i=Hx(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!kP(e,t)||!RP(e,t))}function RP(e,t){let n=dx(e),i=dx(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function kP(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function Hx(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function M8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function LP(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const ub=Ft;function mte(){return"history"in ub}function DP(){if(!("fetch"in ub))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function f7(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function pte(){var n;if(typeof EdgeRuntime=="string")return!0;if(!DP())return!1;if(f7(ub.fetch))return!0;let e=!1;const t=ub.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=f7(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){Rd&&Be.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function Ute(e,t){const n="fetch";kd(n,e),Ld(n,()=>bte(void 0,t))}function bte(e,t=!1){t&&!pte()||Nr(Ft,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=yte(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:Ba()*1e3,virtualError:r};return qs("fetch",{...a}),n.apply(Ft,i).then(async l=>(qs("fetch",{...a,endTimestamp:Ba()*1e3,response:l}),l),l=>{throw qs("fetch",{...a,endTimestamp:Ba()*1e3,error:l}),gw(l)&&l.stack===void 0&&(l.stack=r.stack,td(l,"framesToPop",1)),l})}})}function h7(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Vx(e){return typeof e=="string"?e:e?h7(e,"url")?e.url:e.toString?e.toString():"":""}function yte(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:Vx(n),method:h7(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:Vx(t),method:h7(t,"method")?String(t.method).toUpperCase():"GET"}}function Ete(){return"npm"}const Cn=Ft;let g7=0;function OP(){return g7>0}function vte(){g7++,setTimeout(()=>{g7--})}function vh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(yw(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>vh(o,t));return e.apply(this,s)}catch(s){throw vte(),vw(o=>{o.addEventProcessor(a=>(t.mechanism&&(s7(a,void 0),nd(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),Sw(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}uP(i,e),td(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function Iw(e,t){const n=xw(e,t),i={type:Ite(t),value:xte(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function wte(e,t,n,i){const r=Gi(),s=r==null?void 0:r.getOptions().normalizeDepth,o=kte(t),a={__serialized__:vP(t,s)};if(o)return{exception:{values:[Iw(e,o)]},extra:a};const l={exception:{values:[{type:t5(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:Mte(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=xw(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function R8(e,t){return{exception:{values:[Iw(e,t)]}}}function xw(e,t){const n=t.stacktrace||t.stack||"",i=Tte(t),r=Ste(t);try{return e(n,i,r)}catch{}return[]}const _te=/Minified React error #\d+;/i;function Tte(e){return e&&_te.test(e.message)?1:0}function Ste(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function NP(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Ite(e){const t=e==null?void 0:e.name;return!t&&NP(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function xte(e){const t=e==null?void 0:e.message;return NP(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Cte(e,t,n,i){const r=(n==null?void 0:n.syntheticException)||void 0,s=Cw(e,t,r,i);return nd(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),id(s)}function Ate(e,t,n="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=m7(e,t,s,r);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),id(o)}function Cw(e,t,n,i,r){let s;if(aP(t)&&t.error)return R8(e,t.error);if(hx(t)||OQ(t)){const o=t;if("stack"in t)s=R8(e,t);else{const a=o.name||(hx(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=m7(e,l,n,i),s7(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return gw(t)?R8(e,t):bh(t)||t5(t)?(s=wte(e,t,n,r),nd(s,{synthetic:!0}),s):(s=m7(e,t,n,i),s7(s,`${t}`),nd(s,{synthetic:!0}),s)}function m7(e,t,n,i){const r={};if(i&&n){const s=xw(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),nd(r,{synthetic:!0})}if(mw(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function Mte(e,{isUnhandledRejection:t}){const n=$Q(e),i=t?"promise rejection":"exception";return aP(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:t5(e)?`Event \`${Rte(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function Rte(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function kte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Lte extends _ee{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=Cn.SENTRY_SDK_SOURCE||Ete();Fee(n,"browser",["browser"],i),super(n),n.sendClientReports&&Cn.document&&Cn.document.addEventListener("visibilitychange",()=>{Cn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",Nee),this.on("beforeSendSession",Pee))}eventFromException(t,n){return Cte(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Ate(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const Dte=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,gr=Ft,Ote=1e3;let $x,p7,U7;function Nte(e){const t="dom";kd(t,e),Ld(t,Pte)}function Pte(){if(!gr.document)return;const e=qs.bind(null,"dom"),t=Gx(e,!0);gr.document.addEventListener("click",t,!1),gr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,o;const r=(s=gr[n])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Nr(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=Gx(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Nr(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function Fte(e){if(e.type!==p7)return!1;try{if(!e.target||e.target._sentryId!==U7)return!1}catch{}return!0}function Bte(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Gx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=zte(n);if(Bte(n.type,i))return;td(n,"_sentryCaptured",!0),i&&!i._sentryId&&td(i,"_sentryId",Us());const r=n.type==="keypress"?"input":n.type;Fte(n)||(e({event:n,name:r,global:t}),p7=n.type,U7=i?i._sentryId:void 0),clearTimeout($x),$x=gr.setTimeout(()=>{U7=void 0,p7=void 0},Ote)}}function zte(e){try{return e.target}catch{return null}}let nU;function PP(e){const t="history";kd(t,e),Ld(t,Hte)}function Hte(){if(gr.addEventListener("popstate",()=>{const t=gr.location.href,n=nU;if(nU=t,n===t)return;qs("history",{from:n,to:t})}),!mte())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=nU,s=String(i);if(nU=s,r===s)return;qs("history",{from:r,to:s})}return t.apply(this,n)}}Nr(gr.history,"pushState",e),Nr(gr.history,"replaceState",e)}const JU={};function Vte(e){const t=JU[e];if(t)return t;let n=gr[e];if(f7(n))return JU[e]=n.bind(gr);const i=gr.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){Dte&&Be.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(JU[e]=n.bind(gr))}function Xx(e){JU[e]=void 0}const U1="__sentry_xhr_v3__";function $te(e){const t="xhr";kd(t,e),Ld(t,Gte)}function Gte(){if(!gr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=Ba()*1e3,o=Fa(i[0])?i[0].toUpperCase():void 0,a=Xte(i[1]);if(!o||!a)return t.apply(n,i);n[U1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[U1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Ba()*1e3,startTimestamp:s,xhr:n,virtualError:r};qs("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[U1];return m&&Fa(f)&&Fa(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[U1];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:Ba()*1e3,xhr:n};return qs("xhr",s),t.apply(n,i)}})}function Xte(e){if(Fa(e))return e;try{return e.toString()}catch{}}function jte(e,t=Vte("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return Xx("fetch"),lb("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return Xx("fetch"),n-=o,i--,lb(l)}}return Oee(e,r)}const Yte=30,Wte=50;function b7(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?Ju:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const Kte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Zte=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qte=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qte=e=>{const t=Kte.exec(e);if(t){const[,i,r,s]=t;return b7(i,Ju,+r,+s)}const n=Zte.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=qte.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=FP(n[1]||Ju,n[2]);return b7(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},Jte=[Yte,Qte],ene=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tne=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nne=e=>{const t=ene.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=tne.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||Ju;return[r,i]=FP(r,i),b7(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},ine=[Wte,nne],rne=[Jte,ine],sne=sP(...rne),FP=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:Ju,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},zm=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,iU=1024,one="Breadcrumbs",ane=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:one,setup(n){t.console&&AP(dne(n)),t.dom&&Nte(une(n,t.dom)),t.xhr&&$te(fne(n)),t.fetch&&Ute(hne(n)),t.history&&PP(gne(n)),t.sentry&&n.on("beforeSendEvent",cne(n))}}},lne=ane;function cne(e){return function(n){Gi()===e&&rd({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ol(n)},{event:n})}}function une(e,t){return function(i){if(Gi()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>iU&&(zm&&Be.warn(`\`dom.maxStringLength\` cannot exceed ${iU}, but a value of ${a} was configured. Sentry will use ${iU} instead.`),a=iU),typeof o=="string"&&(o=[o]);try{const c=i.event,u=mne(c)?c.target:c;r=cP(u,{keyAttrs:o,maxStringLength:a}),s=HQ(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),rd(l,{event:i.event,name:i.name,global:i.global})}}function dne(e){return function(n){if(Gi()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:MP(n.level),message:ab(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${ab(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;rd(i,{input:n.args,level:n.level})}}function fne(e){return function(n){if(Gi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[U1];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=LP(l);rd({category:"xhr",data:u,type:"http",level:f},d)}}function hne(e){return function(n){if(Gi()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};rd({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=LP(s.status_code);rd({category:"fetch",data:s,type:"http",level:l},a)}}}function gne(e){return function(n){if(Gi()!==e)return;let i=n.from,r=n.to;const s=M8(Cn.location.href);let o=i?M8(i):void 0;const a=M8(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),rd({category:"navigation",data:{from:i,to:r}})}}function mne(e){return!!e&&!!e.target}const pne=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Une="BrowserApiErrors",bne=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Une,setupOnce(){t.setTimeout&&Nr(Cn,"setTimeout",jx),t.setInterval&&Nr(Cn,"setInterval",jx),t.requestAnimationFrame&&Nr(Cn,"requestAnimationFrame",Ene),t.XMLHttpRequest&&"XMLHttpRequest"in Cn&&Nr(XMLHttpRequest.prototype,"send",vne);const n=t.eventTarget;n&&(Array.isArray(n)?n:pne).forEach(wne)}}},yne=bne;function jx(e){return function(...t){const n=t[0];return t[0]=vh(n,{mechanism:{data:{function:Sc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ene(e){return function(t){return e.apply(this,[vh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Sc(e)},handled:!1,type:"instrument"}})])}}function vne(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Nr(n,r,function(s){const o={mechanism:{data:{function:r,handler:Sc(s)},handled:!1,type:"instrument"}},a=yw(s);return a&&(o.mechanism.data.handler=Sc(a)),vh(s,o)})}),e.apply(this,t)}}function wne(e){var i,r;const n=(i=Cn[e])==null?void 0:i.prototype;(r=n==null?void 0:n.hasOwnProperty)!=null&&r.call(n,"addEventListener")&&(Nr(n,"addEventListener",function(s){return function(o,a,l){try{_ne(a)&&(a.handleEvent=vh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Sc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,vh(a,{mechanism:{data:{function:"addEventListener",handler:Sc(a),target:e},handled:!1,type:"instrument"}}),l])}}),Nr(n,"removeEventListener",function(s){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&s.call(this,o,c,l)}catch{}return s.call(this,o,a,l)}}))}function _ne(e){return typeof e.handleEvent=="function"}const Tne=()=>({name:"BrowserSession",setupOnce(){if(typeof Cn.document>"u"){zm&&Be.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Rx({ignoreDuration:!0}),kx(),PP(({from:e,to:t})=>{e!==void 0&&e!==t&&(Rx({ignoreDuration:!0}),kx())})}}),Sne="GlobalHandlers",Ine=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Sne,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Cne(n),Yx("onerror")),t.onunhandledrejection&&(Ane(n),Yx("onunhandledrejection"))}}},xne=Ine;function Cne(e){RQ(t=>{const{stackParser:n,attachStacktrace:i}=BP();if(Gi()!==e||OP())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=kne(Cw(n,l||r,void 0,i,!1),s,o,a);c.level="error",_P(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Ane(e){LQ(t=>{const{stackParser:n,attachStacktrace:i}=BP();if(Gi()!==e||OP())return;const r=Mne(t),s=pw(r)?Rne(r):Cw(n,r,void 0,i,!0);s.level="error",_P(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Mne(e){if(pw(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Rne(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function kne(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=Fa(t)&&t.length>0?t:bw();return l.length===0&&l.push({colno:c,filename:d,function:Ju,in_app:!0,lineno:u}),e}function Yx(e){zm&&Be.log(`Global Handler attached: ${e}`)}function BP(){const e=Gi();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Lne=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!Cn.navigator&&!Cn.location&&!Cn.document)return;const t=((o=e.request)==null?void 0:o.url)||bw(),{referrer:n}=Cn.document||{},{userAgent:i}=Cn.navigator||{},r={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),Dne="cause",One=5,Nne="LinkedErrors",Pne=(e={})=>{const t=e.limit||One,n=e.key||Dne;return{name:Nne,preprocessEvent(i,r,s){const o=s.getOptions();nte(Iw,o.stackParser,o.maxValueLength,n,t,i,r)}}},Fne=Pne;function Bne(e){return[jee(),Vee(),yne(),lne(),xne(),Fne(),dte(),Lne(),Tne()]}function zne(e={}){var n;return{...{defaultIntegrations:Bne(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=Cn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...Hne(e)}}function Hne(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function Vne(){var l;const e=typeof Cn.window<"u"&&Cn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,r=bw()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&Cn===Cn.top&&s.some(c=>r.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function $ne(e={}){const t=zne(e);if(!t.skipBrowserExtensionCheck&&Vne()){zm&&sg(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}zm&&!DP()&&Be.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:AQ(t.stackParser||sne),integrations:bee(t),transport:t.transport||jte};return Iee(Lte,n)}function Gne(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var Xne={};const zP={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},jne=Xne.VITE_APP_DISABLE_SENTRY==="true",k8=!jne&&Object.keys(zP).find(e=>window.location.hostname.indexOf(e)>=0);$ne({dsn:k8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:k8?zP[k8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[ate({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:Gne().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class Yne{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,r=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(r))this.content[i]=n,this.content[t]=r,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=t+1<<1,o=s-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<r&&(a=o)}if(s<n){const c=this.content[s];this.scoreFunction(c)<(a===null?r:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const Wne="#ffffff",Kne="#000000",Zne=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],qne=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],Qne=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],Jne=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],eie=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],tie=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],nie=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],iie=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],rie=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],sie=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],oie=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],aie=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],lie=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],fi={white:Wne,black:Kne,gray:Zne,red:qne,pink:Qne,grape:Jne,violet:eie,indigo:tie,blue:nie,cyan:iie,teal:rie,green:sie,lime:oie,yellow:aie,orange:lie},HP=240,cie=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),uie=5,df=5,die=4,b1=4,y1=1,Ms=[0,2,4,6,8],Rs=(e,t)=>t.map(n=>fi[e][n]),He={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Rs("gray",Ms),red:Rs("red",Ms),pink:Rs("pink",Ms),grape:Rs("grape",Ms),violet:Rs("violet",Ms),blue:Rs("blue",Ms),cyan:Rs("cyan",Ms),teal:Rs("teal",Ms),green:Rs("green",Ms),yellow:Rs("yellow",Ms),orange:Rs("orange",Ms),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},VP=cie(He,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),$P=[He.black,He.red[b1],He.green[b1],He.blue[b1],He.yellow[b1]],GP=[He.transparent,He.red[y1],He.green[y1],He.blue[y1],He.yellow[y1]],XP=[He.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],fie={transparent:He.transparent,white:He.white,gray:He.gray,black:He.black,bronze:He.bronze,...VP},hie={transparent:He.transparent,white:He.white,gray:He.gray,black:He.black,bronze:He.bronze,...VP},gie=e=>[He.cyan[e],He.blue[e],He.violet[e],He.grape[e],He.pink[e],He.green[e],He.teal[e],He.yellow[e],He.orange[e],He.red[e]],mie=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Go=/Mac|iPod|iPhone|iPad/.test(navigator.platform),jP=/^Win/.test(navigator.platform),pie=/\b(android)\b/i.test(navigator.userAgent),Hm=typeof window<"u"&&"netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Uie=navigator.userAgent.indexOf("Chrome")!==-1,bie=!Uie&&navigator.userAgent.indexOf("Safari")!==-1,YP=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,yie=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},y7=typeof window<"u"&&"ResizeObserver"in window,za="Excalidraw",Eie=36,uu=10,e2=8,vie=5,Wx=1,wie=30,xc=Math.PI/12,_ie="red",_t={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Al={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},du={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var ee=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(ee||{});const rU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},WP={TEST:"test",DEVELOPMENT:"development"},Cc={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup"},Rf="Xiaolai",Vm="Segoe UI Emoji",ct={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},kf={[Rf]:100,[Vm]:1e3},KP=e=>{switch(e){case ct.Excalifont:return[Rf,Vm];default:return[Vm]}},Ae={LIGHT:"light",DARK:"dark"},Pt={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},Aw=1,gl=20,jc=ct.Excalifont,j0="left",db="top",ZP="{version}",sd=2,fb=2*sd,Tie=1e-5,Sie=2*fb-Tie,sU="#ffffff",Iie="#1e1e1e",xie="#a2f1a6",hb=20,qP=5,wh={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ye={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...wh},Cie=[ye.text,ye.html,...Object.values(wh)],L8={png:"png",svg:"svg",clipboard:"clipboard"},bs={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},Mw=()=>window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Aie=500,Mie=300,Rie=500,kie=1e4,Lie=3e4,Die=100,s5=.1,Rw=.1,kw=30,Oie=300,Kx=6e4,Zx=3e3,Lw="invert(93%) hue-rotate(180deg)",E7={addLibrary:"addLibrary"},v7={addLibrary:"addLibrary"},qx={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Nie=730,Pie=1e3,Fie=500,Bie=1229,Gg=2,Dw=[1,2,3],ag=10,zie=1440,Qx=4*1024*1024,rt="http://www.w3.org/2000/svg",Hie=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,QP=128,o5={excalidraw:2,excalidrawLibrary:2},Fn=5,Vie=.7,$ie=11,Fr={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},$m={LEFT:"left",CENTER:"center",RIGHT:"right"},Gie=20,D8=.25,Xie=32,gn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},JP={artist:1,cartoonist:2},O8={thin:1,bold:2,extraBold:4},dn={strokeColor:He.black,backgroundColor:He.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:JP.artist,opacity:100,locked:!1},gb="library",Hu="search",ys={name:"default",defaultTab:gb},eF=new Set(["iframe","embeddable","image"]),Zn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},em={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},tF="Untitled",Lf={generalStats:1,elementProperties:2},ns=1,oi={sharp:"sharp",round:"round",elbow:"elbow"},nF=.3,mb="element";var _u=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(_u||{});const _h={[ct.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[ct.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[ct["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[ct["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[ct.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[ct.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[ct.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[ct["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[ct.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[kf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[kf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},pu={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},Ow="local:",iF=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:r,descender:s}=((c=_h[e])==null?void 0:c.metrics)||_h[ct.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Ac=e=>{var n;const{lineHeight:t}=((n=_h[e])==null?void 0:n.metrics)||_h[ct.Excalifont].metrics;return t};class jie{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Rc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=c5();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const et={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},H={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Go?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},Yie=new Map([[H.Z,et.Z],[H.Y,et.Y]]),Wie=e=>/^[a-z]$/.test(e.toLowerCase()),w7=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=Yie.get(t);return!!(n&&!Wie(e.key)&&e.code===n)},E1=e=>e===H.ARROW_LEFT||e===H.ARROW_RIGHT||e===H.ARROW_DOWN||e===H.ARROW_UP,Jx=e=>e.altKey,Xg=e=>e.shiftKey,tm=e=>e.shiftKey,Mc=1e-4,Xe=(e,t,n)=>Math.min(Math.max(e,t),n),Ha=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},Kie=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},oU=(e,t)=>(e+t)/2,nm=e=>typeof e=="number"&&Number.isFinite(e),eC=(e,t,n=Mc)=>Math.abs(e-t)<n,pb=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Vu(e){return e*Math.PI/180}function a5(e){return e*180/Math.PI}function Zie(e){return Math.abs(Math.sin(2*e))<Mc}function Nn(e,t,n=0,i=0){return[e-n,t-i]}function se(e,t=[0,0]){return Nn(e[0]-t[0],e[1]-t[1])}function bt(e,t){return e[0]*t[1]-t[0]*e[1]}function tC(e,t){return e[0]*t[0]+e[1]*t[1]}function Kl(e,t){return[e[0]+t[0],e[1]+t[1]]}function Ub(e,t){return[e[0]-t[0],e[1]-t[1]]}function xt(e,t){return Nn(e[0]*t,e[1]*t)}function qie(e){return e[0]*e[0]+e[1]*e[1]}function Qie(e){return Math.sqrt(qie(e))}const Bn=e=>{const t=Qie(e);return t===0?Nn(0,0):Nn(e[0]/t,e[1]/t)},rF=e=>Nn(e[1],-e[0]);function S(e,t){return[e,t]}function Nw(e){return e.length===2?S(e[0],e[1]):void 0}function Re(e,t=S(0,0)){return S(t[0]+e[0],t[1]+e[1])}function Tu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function no(e,t){const n=Math.abs;return n(e[0]-t[0])<Mc&&n(e[1]-t[1])<Mc}function Z([e,t],[n,i],r){return S((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function bb(e,t=[0,0]){return S(e[0]+t[0],e[1]+t[1])}function l5(e,t){return S((e[0]+t[0])/2,(e[1]+t[1])/2)}function Je(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Sa(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const v1=(e,t,n)=>bb(t,xt(se(e,t),n)),sF=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function _7(e,t){return[e,t]}function Jie(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return S((a*s-l*i)/o,(n*l-r*a)/o)}return null}function _e(e,t){return[e,t]}const ere=e=>Array.isArray(e)&&e.length===2&&Tu(e[0])&&Tu(e[0]),od=(e,t,n=Mc)=>{const i=Pw(e,t);return i===0?!0:i<n},Pw=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,U;m<0?(p=r,U=s):m>1?(p=o,U=a):(p=r+m*u,U=s+m*d);const y=n-p,E=i-U;return Math.sqrt(y*y+E*E)};function ad(e,t,n){const i=Jie(_7(e[0],e[1]),_7(t[0],t[1]));return!i||!od(i,t,n)||!od(i,e,n)?null:i}function T7(e,t){return[e,t]}function tre(e,t){return[_e(e[0],S(e[1][0],e[0][1])),_e(S(e[1][0],e[0][1]),e[1]),_e(e[1],S(e[0][0],e[1][1])),_e(S(e[0][0],e[1][1]),e[0])].map(n=>ad(t,n)).filter(n=>!!n)}function Lo(e,t,n,i){return[e,t,n,i]}function nC(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function nre(e,t,n,i=.001,r=10){let s=1/0,o=0;for(;s>=i;){if(o>=r)return null;const a=e(t,n),l=[nC((p,U)=>e(p,U)[0],t,n),nC((p,U)=>e(p,U)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);s=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const qf=(e,t)=>S((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function oF(e,t){const n=ore(e);if(tre(T7(S(n[0],n[1]),S(n[2],n[3])),t).length===0)return[];const i=a=>S(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),r=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{const c=nre((f,h)=>{const m=qf(e,f),p=i(h);return[m[0]-p[0],m[1]-p[1]]},a,l);if(!c)return null;const[u,d]=c;return u<0||u>1||d<0||d>1?null:qf(e,u)};let o=s(r[0]);return o?[o]:(o=s(r[1]),o?[o]:(o=s(r[2]),o?[o]:[]))}function ire(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=Je(t,qf(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>Je(t,qf(e,c)));return l?qf(e,l):null}function aF(e,t){const n=ire(e,t);return n?Je(t,n):0}function rre(e){return Array.isArray(e)&&e.length===4&&Tu(e[0])&&Tu(e[1])&&Tu(e[2])&&Tu(e[3])}function sre([e,t,n,i],r){return Nn(-3*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*t[0]-6*r*(1-r)*t[0]-3*r*r*n[0]+6*r*(1-r)*n[0]+3*r*r*i[0],-3*(1-r)*(1-r)*e[1]+3*(1-r)*(1-r)*t[1]-6*r*(1-r)*t[1]-3*r*r*n[1]+6*r*(1-r)*n[1]+3*r*r*i[1])}function ore(e){const[t,n,i,r]=e,s=[t[0],n[0],i[0],r[0]],o=[t[1],n[1],i[1],r[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function iC(...e){return lF(e)}function Gm(e){return lF(e)}const rC=(e,t)=>{const n=e[0],i=e[1];let r=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s][0],l=t[s][1],c=t[o][0],u=t[o][1];(l>i&&u<=i||l<=i&&u>i)&&n<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r},are=(e,t)=>{const[n,i]=e;let r=0;for(let s=0;s<t.length;s++){const o=(s+1)%t.length,[a,l]=t[s],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&r++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&r--}return r!==0},lre=(e,t,n=Mc)=>{let i=!1;for(let r=0,s=t.length-1;r<s;r++)if(od(e,_e(t[r],t[r+1]),n)){i=!0;break}return i};function lF(e){return cre(e)?e:[...e,e[0]]}function cre(e){return no(e[0],e[e.length-1])}function Di(e,t){return jo([e,t])}const yb=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,Eb=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?jo([r,s]):null},aU=(e,[t,n])=>e>=t&&e<=n;function N8([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const Th=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},vb=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Rn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var cF={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Aa,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(cF);var ure=cF.exports;const dre=dl(ure);class sC{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new dre(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let uF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function fre(){return Math.floor(Math.random()*2**31)}class dF{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const oC=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},im=e=>e.charAt(0).toUpperCase()+e.slice(1),hre=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),S7=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,gre=e=>S7(e)||e instanceof Element&&!!e.closest("label, button"),Uu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Y0=({fontFamily:e})=>{for(const[t,n]of Object.entries(ct))if(n===e)return`${t}${KP(n).map(i=>`, ${i}`).join("")}`;return Vm},pt=({fontSize:e,fontFamily:t})=>`${e}px ${Y0({fontFamily:t})}`,Za=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},lg=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t!=null&&t.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},qa=e=>1-Math.pow(1-e,4),aC=(e,t,n)=>(t-e)*qa(n)+e,mre=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s==null||s());const h=Math.min(f-u,i),m=qa(h/i),p={};if(Object.keys(e).forEach(U=>{const y=U,E=(t[y]-e[y])*m+e[y];p[y]=E}),n(p),h<i){const U=h/i,y={};Object.keys(e).forEach(E=>{const w=E,v=e[w],x=t[w];let M;M=r?r(v,x,U,w):aC(v,x,U),M==null&&(M=aC(v,x,U)),y[w]=M}),n(y),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},pre=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Ni=(e,t)=>Math.abs(e-t),en=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},Q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Go?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Mt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Br=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},lU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Ure="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",bre="֑-߿יִ-﷽ﹰ-ﻼ",yre=new RegExp(`^[^${Ure}]*[${bre}]`),fF=e=>yre.test(e),js=e=>{const[t,n]=e;return{x:t,y:n}},hF=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},gF=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},bu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},Ere=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i!=null)return i}},Ys=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===He.transparent},P8=e=>e.fillStyle!=="solid"||Ys(e.backgroundColor),c5=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},lC=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},I7=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||ZP},vre=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},wre=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},Fw=e=>{e.preventDefault(),e.returnValue=""},mF=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),cg=()=>Date.now(),we=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),_re=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),fa=(e,t)=>e.reduce((n,i)=>(n[t?t(i):String(i)]=i,n),{}),Tre=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Nl=e=>Array.isArray(e)?e:e.values(),Sre=e=>Array.isArray(e)?e:Array.from(Nl(e)),Ire=()=>WP.TEST==="production",pF=()=>WP.DEVELOPMENT==="production",xre=()=>typeof process<"u"&&!0,UF=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),t2=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},W0=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Cre=()=>W0()==="iframe",K0=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,x7=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},cC=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Hi=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||cC(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||cC(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},u5=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Xo=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function Ur(e,t){if(!e)throw new Error(t)}const Are=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},bF=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Va=e=>JSON.parse(JSON.stringify(e)),jg=(e,t)=>Hi(e,t)?e:t;function sn(e,t,n,i){var r;return e?((r=e==null?void 0:e.addEventListener)==null||r.call(e,t,n,i),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,i)}):()=>{}}function Mre(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${oU(r[0],s[0]).toFixed(2)},${oU(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${oU(i[0],r[0]).toFixed(2)},${oU(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const yF=e=>e.replace(/\r?\n|\r/g,`
`),jo=e=>e,Rc=async(e,...t)=>new Promise(n=>{n(e(...t))}),Rre=(...e)=>Math.max(...e.map(t=>t?1:0))>0,kre=e=>{try{return JSON.parse(e)}catch{return null}},n2=e=>e.replace(/"/g,"&quot;"),F8=e=>Array.isArray(e)?e:[e],Xn=(e,t=0,n=0)=>{const{x:i,y:r,width:s,height:o}=e,a=i+s/2+t,l=r+o/2+n;return S(a,l)},Lre=e=>Array.isArray(e),EF=e=>Lre(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,vF=(e,t)=>{if(EF(e)===0)return null;const n=t||(r=>r);let i=null;for(const r of e){const s=n(r);if((i===null||i===s)&&s!=null)i=s;else return null}return i};let Dre=new dF(Date.now());const Yo=()=>Math.floor(Dre.next()*2**31),tr=()=>uF();var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});var wF=Bw.sanitizeUrl=void 0,Ore=/^([^\w]*)(javascript|data|vbscript)/im,Nre=/&#(\w+)(^\w|;)?/g,Pre=/&(newline|tab);/gi,Fre=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Bre=/^.+(:|&colon;)/gim,zre=[".","/"];function Hre(e){return zre.indexOf(e[0])>-1}function Vre(e){return e.replace(Nre,function(t,n){return String.fromCharCode(n)})}function $re(e){var t=Vre(e||"").replace(Pre,"").replace(Fre,"").trim();if(!t)return"about:blank";if(Hre(t))return t;var n=t.match(Bre);if(!n)return t;var i=n[0];return Ore.test(i)?"about:blank":t}wF=Bw.sanitizeUrl=$re;const Gr=e=>(e=e.trim(),e&&wF(n2(e))),_F=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),zw=e=>{if(e=Gr(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class Fs{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}function TF(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=TF(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function pe(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=TF(t))&&(i&&(i+=" "),i+=n);return i}var SF="Expected a function",uC=NaN,Gre="[object Symbol]",Xre=/^\s+|\s+$/g,jre=/^[-+]0x[0-9a-f]+$/i,Yre=/^0b[01]+$/i,Wre=/^0o[0-7]+$/i,Kre=parseInt,Zre=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa,qre=typeof self=="object"&&self&&self.Object===Object&&self,Qre=Zre||qre||Function("return this")(),Jre=Object.prototype,ese=Jre.toString,tse=Math.max,nse=Math.min,B8=function(){return Qre.Date.now()};function ise(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(SF);t=dC(t)||0,wb(n)&&(u=!!n.leading,d="maxWait"in n,s=d?tse(dC(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var _=i,T=r;return i=r=void 0,c=M,o=e.apply(T,_),o}function m(M){return c=M,a=setTimeout(y,t),u?h(M):o}function p(M){var _=M-l,T=M-c,I=t-_;return d?nse(I,s-T):I}function U(M){var _=M-l,T=M-c;return l===void 0||_>=t||_<0||d&&T>=s}function y(){var M=B8();if(U(M))return E(M);a=setTimeout(y,p(M))}function E(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function v(){return a===void 0?o:E(B8())}function x(){var M=B8(),_=U(M);if(i=arguments,r=this,l=M,_){if(a===void 0)return m(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=w,x.flush=v,x}function rse(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(SF);return wb(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ise(e,t,{leading:i,maxWait:t,trailing:r})}function wb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function sse(e){return!!e&&typeof e=="object"}function ose(e){return typeof e=="symbol"||sse(e)&&ese.call(e)==Gre}function dC(e){if(typeof e=="number")return e;if(ose(e))return uC;if(wb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Xre,"");var n=Yre.test(e);return n||Wre.test(e)?Kre(e.slice(2),n?2:8):jre.test(e)?uC:+e}var ase=rse;const Do=dl(ase);function C7(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function lse(e,t,n){const i=[];e.forEach(r=>i.push(...r)),C7(i,t,n)}function cse(e,t){return e[0]===t[0]&&e[1]===t[1]}function use(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)C7(c,a,r);const l=dse(o,s,i);if(r){for(const c of o)C7(c,a,-r);lse(l,a,-r)}return l}function dse(e,t,n){const i=[];for(const c of e){const u=[...c];cse(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function Z0(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),use(e,r,i,s||1)}class Hw{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=Z0(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function d5(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class fse extends Hw{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=Z0(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)d5([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class hse extends Hw{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class gse{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=Z0(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=d5(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,U=f-o+Math.random()*2*o,y=p-o+Math.random()*2*o,E=this.helper.ellipse(U,y,s,s,n);i.push(...E.ops)}}return{type:"fillSketch",ops:i}}}class mse{constructor(t){this.helper=t}fillPolygons(t,n){const i=Z0(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=d5(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,U=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],y=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(U[0],U[1],y[0],y[1],n))}}),s}}class pse{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=Z0(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=d5(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],U=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],y=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],y[0],y[1],i),...this.helper.doubleLineOps(y[0],y[1],U[0],U[1],i))}}),r}}const lr={};function Use(e,t){let n=e.fillStyle||"hachure";if(!lr[n])switch(n){case"zigzag":lr[n]||(lr[n]=new fse(t));break;case"cross-hatch":lr[n]||(lr[n]=new hse(t));break;case"dots":lr[n]||(lr[n]=new gse(t));break;case"dashed":lr[n]||(lr[n]=new mse(t));break;case"zigzag-line":lr[n]||(lr[n]=new pse(t));break;case"hachure":default:n="hachure",lr[n]||(lr[n]=new Hw(t));break}return lr[n]}const bse=0,A7=1,IF=2,cU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function yse(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:bse,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:A7,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:IF,text:""},t}function z8(e,t){return e.type===t}function Vw(e){const t=[],n=yse(e);let i="BOD",r=0,s=n[r];for(;!z8(s,IF);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=cU[s.text],i=s.text;else return Vw("M0,0"+e);else z8(s,A7)?o=cU[i]:(r++,o=cU[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(z8(c,A7))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof cU[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function xF(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function CF(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,U=r+2*(m-r)/3,y=d+2*(h-d)/3,E=f+2*(m-f)/3;t.push({key:"C",data:[p,U,y,E,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,U=r+2*(f-r)/3,y=h+2*(d-h)/3,E=m+2*(f-m)/3;t.push({key:"C",data:[p,U,y,E,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],U=u[5],y=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,U,y,U,y]}),i=U,r=y):(i!==U||r!==y)&&(AF(i,r,U,y,d,f,h,m,p).forEach(function(w){t.push({key:"C",data:w})}),i=U,r=y);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function Ese(e){return Math.PI*e/180}function Yg(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function AF(e,t,n,i,r,s,o,a,l,c){const u=Ese(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Yg(e,t,-u),[n,i]=Yg(n,i,-u);const N=(e-n)/2,k=(t-i)/2;let $=N*N/(r*r)+k*k/(s*s);$>1&&($=Math.sqrt($),r=$*r,s=$*s);const V=a===l?-1:1,z=r*r,G=s*s,j=z*G-z*k*k-G*N*N,X=z*k*k+G*N*N,q=V*Math.sqrt(Math.abs(j/X));m=q*r*k/s+(e+n)/2,p=q*-s*N/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let U=h-f;if(Math.abs(U)>Math.PI*120/180){const N=h,k=n,$=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=AF(n,i,k,$,r,s,o,0,l,[h,N,m,p])}U=h-f;const y=Math.cos(f),E=Math.sin(f),w=Math.cos(h),v=Math.sin(h),x=Math.tan(U/4),M=4/3*r*x,_=4/3*s*x,T=[e,t],I=[e+M*E,t-_*y],C=[n+M*v,i-_*w],R=[n,i];if(I[0]=2*T[0]-I[0],I[1]=2*T[1]-I[1],c)return[I,C,R].concat(d);{d=[I,C,R].concat(d);const N=[];for(let k=0;k<d.length;k+=3){const $=Yg(d[k][0],d[k][1],u),V=Yg(d[k+1][0],d[k+1][1],u),z=Yg(d[k+2][0],d[k+2][1],u);N.push([$[0],$[1],V[0],V[1],z[0],z[1]])}return N}}const vse={randOffset:Ise,randOffsetWithRange:xse,ellipse:Tse,doubleLineOps:Cse};function MF(e,t,n,i,r){return{type:"path",ops:Qa(e,t,n,i,r)}}function i2(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...Qa(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...Qa(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return MF(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function wse(e,t){return i2(e,!0,t)}function _se(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return wse(s,r)}function fC(e,t){let n=pC(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=pC(e,1.5*(1+t.roughness*.22),Ase(t));n=n.concat(i)}return{type:"path",ops:n}}function Tse(e,t,n,i,r){const s=RF(n,i,r);return M7(e,t,r,s).opset}function RF(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=De(o*l,n),a+=De(a*l,n),{increment:s,rx:o,ry:a}}function M7(e,t,n,i){const[r,s]=UC(i.increment,e,t,i.rx,i.ry,1,i.increment*_b(.1,_b(.4,1,n),n),n);let o=Tb(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=UC(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=Tb(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function hC(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=De(d*.01,l),f+=De(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,U=Math.min(p/2,(m-h)/2),y=bC(U,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const E=bC(U,c,u,d,f,h,m,1.5,l);y.push(...E)}return o&&(a?y.push(...Qa(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...Qa(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):y.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:y}}function gC(e,t){const n=CF(xF(Vw(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...Qa(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Mse(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...Qa(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function H8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+De(r,t),i[0][1]+De(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+De(r,t),i[o][1]+De(r,t)]})}}return{type:"fillPath",ops:n}}function ff(e,t){return Use(t,vse).fillPolygons(e,t)}function Sse(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=De(c*.01,o),u+=De(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),ff([m],o)}function Ise(e,t){return De(e,t)}function xse(e,t,n){return _b(e,t,n)}function Cse(e,t,n,i,r){return Qa(e,t,n,i,r,!0)}function Ase(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function kF(e){return e.randomizer||(e.randomizer=new dF(e.seed||0)),e.randomizer.next()}function _b(e,t,n,i=1){return n.roughness*i*(kF(n)*(t-e)+e)}function De(e,t,n=1){return _b(-e,e,t,n)}function Qa(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=mC(e,t,n,i,r,!0,!1);if(o)return a;const l=mC(e,t,n,i,r,!0,!0);return a.concat(l)}function mC(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+kF(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=De(h,r,c),m=De(m,r,c);const p=[],U=()=>De(d,r,c),y=()=>De(u,r,c),E=r.preserveVertices;return o?p.push({op:"move",data:[e+(E?0:U()),t+(E?0:U())]}):p.push({op:"move",data:[e+(E?0:De(u,r,c)),t+(E?0:De(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+U(),m+t+(i-t)*f+U(),h+e+2*(n-e)*f+U(),m+t+2*(i-t)*f+U(),n+(E?0:U()),i+(E?0:U())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+y(),m+t+(i-t)*f+y(),h+e+2*(n-e)*f+y(),m+t+2*(i-t)*f+y(),n+(E?0:y()),i+(E?0:y())]}),p}function pC(e,t,n){const i=[];i.push([e[0][0]+De(t,n),e[0][1]+De(t,n)]),i.push([e[0][0]+De(t,n),e[0][1]+De(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+De(t,n),e[r][1]+De(t,n)]),r===e.length-1&&i.push([e[r][0]+De(t,n),e[r][1]+De(t,n)]);return Tb(i,null,n)}function Tb(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...Qa(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function UC(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=De(.5,a)-Math.PI/2;u.push([De(s,a)+t+.9*i*Math.cos(d-e),De(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[De(s,a)+t+i*Math.cos(h),De(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([De(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),De(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([De(s,a)+t+.98*i*Math.cos(d+o),De(s,a)+n+.98*r*Math.sin(d+o)]),u.push([De(s,a)+t+.9*i*Math.cos(d+o*.5),De(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function bC(e,t,n,i,r,s,o,a,l){const c=s+De(.1,l),u=[];u.push([De(a,l)+t+.9*i*Math.cos(c-e),De(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([De(a,l)+t+i*Math.cos(d),De(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),Tb(u,null,l)}function Mse(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:De(c[0],a)),o[1]+(f?0:De(c[0],a))]}),u=f?[r,s]:[r+De(c[h],a),s+De(c[h],a)],l.push({op:"bcurveTo",data:[e+De(c[h],a),t+De(c[h],a),n+De(c[h],a),i+De(c[h],a),u[0],u[1]]});return l}function Wg(e){return[...e]}function Rse(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(Wg(e[0]),Wg(e[1]),Wg(e[2]),Wg(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(Wg(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function kse(e,t){return Math.sqrt(r2(e,t))}function r2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Lse(e,t,n){const i=r2(t,n);if(i===0)return r2(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),r2(e,fu(t,n,r))}function fu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Dse(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function R7(e,t,n,i){const r=i||[];if(Dse(e,t)<n){const s=e[t+0];r.length?kse(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=fu(o,a,.5),d=fu(a,l,.5),f=fu(l,c,.5),h=fu(u,d,.5),m=fu(d,f,.5),p=fu(h,m,.5);R7([o,u,h,p],0,n,r),R7([p,m,f,c],0,n,r)}return r}function LF(e,t){return Sb(e,0,e.length,t)}function Sb(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Lse(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(Sb(e,t,c+1,i,s),Sb(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function q0(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;R7(e,o,t,i)}return n&&n>0?Sb(i,0,i.length,n):i}function Ose(e,t,n){const i=Vw(e),r=CF(xF(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...q0(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=LF(f,n);h.length&&d.push(h)}return d}const xr="none";class Xm{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return fre()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[MF(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=_se(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(H8([c],o)):a.push(ff([c],o))}return o.stroke!==xr&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=RF(i,r,o),c=M7(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=M7(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(ff([c.estimatedPoints],o));return o.stroke!==xr&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[i2(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=hC(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=hC(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Sse(t,n,i,r,s,o,c));return c.stroke!==xr&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=fC(t,i);if(i.fill&&i.fill!==xr&&t.length>=3)if(i.fillStyle==="solid"){const o=fC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=Rse(t),a=q0(o,10,(1+i.roughness)/2);r.push(ff([a],i))}return i.stroke!==xr&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=i2(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(H8([t],i)):r.push(ff([t],i))),i.stroke!==xr&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==xr,o=i.stroke!==xr,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Ose(t,1,l),u=gC(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=gC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(H8(c,i));else r.push(ff(c,i));return o&&(a?c.forEach(d=>{r.push(i2(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:xr};break;case"fillPath":o={d:this.opsToPath(s),stroke:xr,strokeWidth:0,fill:i.fill||xr};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||xr,strokeWidth:i,fill:xr}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Nse{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Xm(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const uU="http://www.w3.org/2000/svg";class Pse{constructor(t,n){this.svg=t,this.gen=new Xm(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(uU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(uU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(uU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(uU,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const Yc={canvas(e,t){return new Nse(e,t)},svg(e,t){return new Pse(e,t)},generator(e){return new Xm(e)},newSeed(){return Xm.newSeed()}};let DF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const xn=e=>!!e&&e.type==="image"&&!!e.fileId,gt=e=>!!e&&e.type==="image",dr=e=>!!e&&e.type==="embeddable",Pl=e=>!!e&&e.type==="iframe",cs=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),ue=e=>e!=null&&e.type==="text",OF=e=>e!=null&&e.type==="frame",s2=e=>e!=null&&e.type==="magicframe",Te=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),io=e=>e!=null&&Fse(e.type),Fse=e=>e==="freedraw",Ce=e=>e!=null&&$w(e.type),Me=e=>e!=null&&e.type==="arrow",he=e=>Me(e)&&e.elbowed,Bse=e=>Me(e)&&!e.elbowed&&!e.roundness,zse=e=>Me(e)&&!e.elbowed&&e.roundness!==null,$w=e=>e==="arrow"||e==="line",Ia=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&NF(e.type),NF=e=>e==="arrow",ro=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Hse=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),$u=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Me(e)),PF=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Xo(t,null),!1}},f5=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",nr=e=>{var t;return $u(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Gt=e=>e!==null&&"containerId"in e&&e.containerId!==null&&ue(e),FF=e=>!!e.startBinding||!!e.endBinding,Dd=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",BF=e=>e==="line"||e==="arrow"||e==="diamond",Vse=(e,t)=>!!((e===gn.ADAPTIVE_RADIUS||e===gn.LEGACY)&&Dd(t.type)||e===gn.PROPORTIONAL_RADIUS&&BF(t.type)),$se=e=>BF(e.type)?{type:gn.PROPORTIONAL_RADIUS}:Dd(e.type)?{type:gn.ADAPTIVE_RADIUS}:null,Ib=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,Qf=e=>Bse(e)?"sharpArrow":zse(e)?"curvedArrow":he(e)?"elbowArrow":"line";function zF(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const Gse=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=Kl(se(e),xt(se(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,U=o*d,y=(s*s-o*o)*u**3/s,E=(o*o-s*s)*d**3/o,w=p-y,v=U-E,x=l-y,M=c-E,_=Math.hypot(v,w),T=Math.hypot(M,x);u=Math.min(1,Math.max(0,(x*_/T+y)/s)),d=Math.min(1,Math.max(0,(M*_/T+E)/o));const I=Math.hypot(d,u);u/=I,d/=I}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return Je(Re(a),S(f,h))};function Xse({center:e,halfWidth:t,halfHeight:n},[i,r]){const[s,o]=e,a=i[0]-s,l=i[1]-o,c=r[0]-s,u=r[1]-o,d=Math.pow(c-a,2)/Math.pow(t,2)+Math.pow(u-l,2)/Math.pow(n,2),f=2*(a*(c-a)/Math.pow(t,2)+l*(u-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,m=(-f+Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),p=(-f-Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),U=[S(a+m*(c-a)+s,l+m*(u-l)+o),S(a+p*(c-a)+s,l+p*(u-l)+o)].filter(y=>!isNaN(y[0])&&!isNaN(y[1]));return U.length===2&&no(U[0],U[1])?[U[0]]:U}function Gw(e,t=0){const n=Ji(Math.min(e.width,e.height),e);if(n<=0){const f=T7(S(e.x-t,e.y-t),S(e.x+e.width+t,e.y+e.height+t)),h=_e(S(f[0][0]+n,f[0][1]),S(f[1][0]-n,f[0][1])),m=_e(S(f[1][0],f[0][1]+n),S(f[1][0],f[1][1]-n)),p=_e(S(f[0][0]+n,f[1][1]),S(f[1][0]-n,f[1][1])),U=_e(S(f[0][0],f[1][1]-n),S(f[0][0],f[0][1]+n));return[[h,m,p,U],[]]}const i=Xn(e),r=T7(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),s=_e(S(r[0][0]+n,r[0][1]),S(r[1][0]-n,r[0][1])),o=_e(S(r[1][0],r[0][1]+n),S(r[1][0],r[1][1]-n)),a=_e(S(r[0][0]+n,r[1][1]),S(r[1][0]-n,r[1][1])),l=_e(S(r[0][0],r[1][1]-n),S(r[0][0],r[0][1]+n)),c=[xt(Bn(se(S(r[0][0]-t,r[0][1]-t),i)),t),xt(Bn(se(S(r[1][0]+t,r[0][1]-t),i)),t),xt(Bn(se(S(r[1][0]+t,r[1][1]+t),i)),t),xt(Bn(se(S(r[0][0]-t,r[1][1]+t),i)),t)],u=[Lo(Re(c[0],l[1]),Re(c[0],S(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1]))),Re(c[0],S(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1]))),Re(c[0],s[0])),Lo(Re(c[1],s[1]),Re(c[1],S(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1]))),Re(c[1],S(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1]))),Re(c[1],o[0])),Lo(Re(c[2],o[1]),Re(c[2],S(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1]))),Re(c[2],S(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1]))),Re(c[2],a[1])),Lo(Re(c[3],a[0]),Re(c[3],S(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1]))),Re(c[3],S(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1]))),Re(c[3],l[0]))];return[[_e(u[0][3],u[1][0]),_e(u[1][3],u[2][0]),_e(u[2][3],u[3][0]),_e(u[3][3],u[0][0])],u]}function Xw(e,t=0){var v;const[n,i,r,s,o,a,l,c]=Fb(e),u=Ji(Math.abs(n-l),e),d=Ji(Math.abs(s-i),e);if(((v=e.roundness)==null?void 0:v.type)==null){const[x,M,_,T]=[S(e.x+n,e.y+i-t),S(e.x+r+t,e.y+s),S(e.x+o,e.y+a+t),S(e.x+l-t,e.y+c)],I=_e(S(x[0]+u,x[1]+d),S(M[0]-u,M[1]-d)),C=_e(S(M[0]-u,M[1]+d),S(_[0]+u,_[1]-d)),R=_e(S(_[0]-u,_[1]-d),S(T[0]+u,T[1]+d)),N=_e(S(T[0]+u,T[1]-d),S(x[0]-u,x[1]+d));return[[I,C,R,N],[]]}const f=Xn(e),[h,m,p,U]=[S(e.x+n,e.y+i),S(e.x+r,e.y+s),S(e.x+o,e.y+a),S(e.x+l,e.y+c)],y=[xt(Bn(se(m,f)),t),xt(Bn(se(p,f)),t),xt(Bn(se(U,f)),t),xt(Bn(se(h,f)),t)],E=[Lo(Re(y[0],S(m[0]-u,m[1]-d)),Re(y[0],m),Re(y[0],m),Re(y[0],S(m[0]-u,m[1]+d))),Lo(Re(y[1],S(p[0]+u,p[1]-d)),Re(y[1],p),Re(y[1],p),Re(y[1],S(p[0]-u,p[1]-d))),Lo(Re(y[2],S(U[0]+u,U[1]+d)),Re(y[2],U),Re(y[2],U),Re(y[2],S(U[0]+u,U[1]-d))),Lo(Re(y[3],S(h[0]-u,h[1]+d)),Re(y[3],h),Re(y[3],h),Re(y[3],S(h[0]+u,h[1]+d)))];return[[_e(E[0][3],E[1][0]),_e(E[1][3],E[2][0]),_e(E[2][3],E[3][0]),_e(E[3][3],E[0][0])],E]}const xb=e=>{if(e.type==="arrow")return!1;const t=!Ys(e.backgroundColor)||nr(e)||cs(e)||ue(e);return e.type==="line"||e.type==="freedraw"?t&&el(e.points):t||gt(e)},hf=({x:e,y:t,element:n,shape:i,threshold:r=10,frameNameBound:s=null})=>{let o=xb(n)&&Zm(S(e,t),i)||J7(S(e,t),i,r);return!o&&s&&(o=Zm(S(e,t),{type:"polygon",data:lz(s).data})),o},jw=(e,t,n,i,r=0)=>{let[s,o,a,l]=so(n,i);return s-=r,o-=r,a+=r,l+=r,sF(S(s,o),S(e,t),S(a,l))},jse=(e,t)=>!hf(e)&&!HF(e.x,e.y,SB(e.element,t))&&jw(e.x,e.y,e.element,t),HF=(e,t,n)=>!!n&&Zm(S(e,t),n),k7=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Yse(e,t,n);case"diamond":return Wse(e,t,n);case"ellipse":return Kse(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},Yse=(e,t,n=0)=>{const i=Xn(e),r=Z(t[0],i,-e.angle),s=Z(t[1],i,-e.angle),[o,a]=Gw(e,n);return o.map(l=>ad(_e(r,s),l)).filter(l=>l!=null).map(l=>Z(l,i,e.angle)).concat(a.flatMap(l=>oF(l,_e(r,s))).filter(l=>l!=null).map(l=>Z(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>no(l,d))===c)},Wse=(e,t,n=0)=>{const i=Xn(e),r=Z(t[0],i,-e.angle),s=Z(t[1],i,-e.angle),[o,a]=Xw(e,n);return o.map(l=>ad(_e(r,s),l)).filter(l=>l!=null).map(l=>Z(l,i,e.angle)).concat(a.flatMap(l=>oF(l,_e(r,s))).filter(l=>l!=null).map(l=>Z(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>no(l,d))===c)},Kse=(e,t,n=0)=>{const i=Xn(e),r=Z(t[0],i,-e.angle),s=Z(t[1],i,-e.angle);return Xse(zF(i,e.width/2+n,e.height/2+n),_7(r,s)).map(o=>Z(o,i,e.angle))},h5=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Zse(e,t);case"diamond":return qse(e,t);case"ellipse":return Qse(e,t)}},Zse=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle),[r,s]=Gw(e);return Math.min(...r.map(o=>Pw(i,o)),...s.map(o=>aF(o,i)).filter(o=>o!==null))},qse=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle),[r,s]=Xw(e);return Math.min(...r.map(o=>Pw(i,o)),...s.map(o=>aF(o,i)).filter(o=>o!==null))},Qse=(e,t)=>{const n=Xn(e);return Gse(Z(t,n,-e.angle),zF(n,e.width/2,e.height/2))},Pn=[1,0],qi=[0,1],us=[-1,0],Gs=[0,-1],Sh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?Pn:t<=-r?us:n>i?qi:Gs},Rr=(e,t)=>Sh(se(e,t)),xa=(e,t)=>Oo(Rr(e,t)),zn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Oo=e=>zn(e,Pn)||zn(e,us),Jse=(e,t,n)=>{const i=g9(t),r=.95,s=Re(xt(se(Z(S(e.x+e.width/2,e.y),i,e.angle),i),r),i),o=Re(xt(se(Z(S(e.x+e.width,e.y+e.height/2),i,e.angle),i),r),i),a=Re(xt(se(Z(S(e.x+e.width/2,e.y+e.height),i,e.angle),i),r),i),l=Re(xt(se(Z(S(e.x,e.y+e.height/2),i,e.angle),i),r),i);if(bt(se(n,s),se(s,o))<=0&&bt(se(n,s),se(s,l))>0)return Rr(s,i);if(bt(se(n,o),se(o,a))<=0&&bt(se(n,o),se(o,s))>0)return Rr(o,i);if(bt(se(n,a),se(a,l))<=0&&bt(se(n,a),se(a,o))>0)return Rr(a,i);if(bt(se(n,l),se(l,s))<=0&&bt(se(n,l),se(l,a))>0)return Rr(l,i);if(bt(se(n,i),se(s,i))<=0&&bt(se(n,i),se(o,i))>0){const u=e.width>e.height?s:o;return Rr(u,i)}else if(bt(se(n,i),se(o,i))<=0&&bt(se(n,i),se(a,i))>0){const u=e.width>e.height?a:o;return Rr(u,i)}else if(bt(se(n,i),se(a,i))<=0&&bt(se(n,i),se(l,i))>0){const u=e.width>e.height?a:l;return Rr(u,i)}const c=e.width>e.height?s:l;return Rr(c,i)},Yw=(e,t,n)=>{const r=g9(t);if(e.type==="diamond")return Jse(e,t,n);const s=v1(S(t[0],t[1]),r,2),o=v1(S(t[2],t[1]),r,2),a=v1(S(t[0],t[3]),r,2),l=v1(S(t[2],t[3]),r,2);return N8([s,o,r],n)?Gs:N8([o,l,r],n)?Pn:N8([l,a,r],n)?qi:us},VF=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1];function yC(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function eoe(e){return[-e[0],-e[1]]}function Ns(e,t){return[e[0]+t[0],e[1]+t[1]]}function es(e,t){return[e[0]-t[0],e[1]-t[1]]}function Ls(e,t){return[e[0]*t,e[1]*t]}function toe(e,t){return[e[0]/t,e[1]/t]}function Kg(e){return[e[1],-e[0]]}function EC(e,t){return e[0]*t[0]+e[1]*t[1]}function noe(e,t){return e[0]===t[0]&&e[1]===t[1]}function ioe(e){return Math.hypot(e[0],e[1])}function roe(e){return e[0]*e[0]+e[1]*e[1]}function vC(e,t){return roe(es(e,t))}function $F(e){return toe(e,ioe(e))}function soe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Zg(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function L7(e,t,n){return Ns(e,Ls(es(t,e),n))}function wC(e,t,n){return Ns(e,Ls(t,n))}var{min:Kd,PI:ooe}=Math,_C=.275,qg=ooe+1e-4;function aoe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=G=>G,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=G=>G*(2-G)}=a,{cap:f=!0,easing:h=G=>--G*G*G+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,y=Math.pow(n*i,2),E=[],w=[],v=e.slice(0,10).reduce((G,j)=>{let X=j.pressure;if(s){let q=Kd(1,j.distance/n),fe=Kd(1,1-q);X=Kd(1,G+(fe-G)*(q*_C))}return(G+X)/2},e[0].pressure),x=yC(n,r,e[e.length-1].pressure,o),M,_=e[0].vector,T=e[0].point,I=T,C=T,R=I,N=!1;for(let G=0;G<e.length;G++){let{pressure:j}=e[G],{point:X,vector:q,distance:fe,runningLength:ie}=e[G];if(G<e.length-1&&m-ie<3)continue;if(r){if(s){let xe=Kd(1,fe/n),Ge=Kd(1,1-xe);j=Kd(1,v+(Ge-v)*(xe*_C))}x=yC(n,r,j,o)}else x=n/2;M===void 0&&(M=x);let Ue=ie<p?d(ie/p):1,Ve=m-ie<U?h((m-ie)/U):1;x=Math.max(.01,x*Math.min(Ue,Ve));let $e=(G<e.length-1?e[G+1]:e[G]).vector,nt=G<e.length-1?EC(q,$e):1,zt=EC(q,_)<0&&!N,Ct=nt!==null&&nt<0;if(zt||Ct){let xe=Ls(Kg(_),x);for(let Ge=1/13,qt=0;qt<=1;qt+=Ge)C=Zg(es(X,xe),X,qg*qt),E.push(C),R=Zg(Ns(X,xe),X,qg*-qt),w.push(R);T=C,I=R,Ct&&(N=!0);continue}if(N=!1,G===e.length-1){let xe=Ls(Kg(q),x);E.push(es(X,xe)),w.push(Ns(X,xe));continue}let Zt=Ls(Kg(L7($e,q,nt)),x);C=es(X,Zt),(G<=1||vC(T,C)>y)&&(E.push(C),T=C),R=Ns(X,Zt),(G<=1||vC(I,R)>y)&&(w.push(R),I=R),v=j,_=q}let k=e[0].point.slice(0,2),$=e.length>1?e[e.length-1].point.slice(0,2):Ns(e[0].point,[1,1]),V=[],z=[];if(e.length===1){if(!(p||U)||c){let G=wC(k,$F(Kg(es(k,$))),-(M||x)),j=[];for(let X=1/13,q=X;q<=1;q+=X)j.push(Zg(G,k,qg*2*q));return j}}else{if(!(p||U&&e.length===1))if(u)for(let j=1/13,X=j;X<=1;X+=j){let q=Zg(w[0],k,qg*X);V.push(q)}else{let j=es(E[0],w[0]),X=Ls(j,.5),q=Ls(j,.51);V.push(es(k,X),es(k,q),Ns(k,q),Ns(k,X))}let G=Kg(eoe(e[e.length-1].vector));if(U||p&&e.length===1)z.push($);else if(f){let j=wC($,G,x);for(let X=1/29,q=X;q<1;q+=X)z.push(Zg(j,$,qg*3*q))}else z.push(Ns($,Ls(G,x)),Ns($,Ls(G,x*.99)),es($,Ls(G,x*.99)),es($,Ls(G,x)))}return E.concat(z,w.reverse(),V)}function loe(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(L7(a[0],h,m/4))}a.length===1&&(a=[...a,[...Ns(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):L7(d.point,a[h],o);if(noe(d.point,m))continue;let p=soe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:$F(es(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function coe(e,t={}){return aoe(loe(e,t),t)}const ri=10,uoe=(e,t,n,i,r,s,o)=>{var C,R;const{width:a,height:l}=Ja(e),c=n/a,u=i/l,d=(((C=e.crop)==null?void 0:C.x)??0)/c,f=(((R=e.crop)==null?void 0:R.y)??0)/u,h=Z(S(r,s),Xn(e),-e.angle);r=h[0],s=h[1];let m=e.width,p=e.height,U=e.crop??{x:0,y:0,width:n,height:i,naturalWidth:n,naturalHeight:i};const y=U.height,E=U.width,w=e.scale[0]===-1,v=e.scale[1]===-1;let x=s-e.y,M=r-e.x;t.includes("n")&&(p=Xe(e.height-x,ri,v?l-f:e.height+f)),t.includes("s")&&(x=s-e.y-e.height,p=Xe(e.height+x,ri,v?e.height+f:l-f)),t.includes("e")&&(M=r-e.x-e.width,m=Xe(e.width+M,ri,w?e.width+d:a-d)),t.includes("w")&&(m=Xe(e.width-M,ri,w?a-d:e.width+d));const _=N=>{N.height=p*u,N.width=m*c};_(U);const T=(N,k)=>{_(k),N.includes("n")&&(v||(k.y+=y-k.height)),N.includes("s")&&v&&(k.y+=y-k.height),N.includes("e")&&w&&(k.x+=E-k.width),N.includes("w")&&(w||(k.x+=E-k.width))};switch(t){case"n":{if(o){const N=d+e.width/2,k=a-d-e.width/2,$=Math.min(N,k)*2;m=Xe(p*o,ri,$),p=m/o}T(t,U),o&&(U.x+=(E-U.width)/2);break}case"s":{if(o){const N=d+e.width/2,k=a-d-e.width/2,$=Math.min(N,k)*2;m=Xe(p*o,ri,$),p=m/o}T(t,U),o&&(U.x+=(E-U.width)/2);break}case"w":{if(o){const N=f+e.height/2,k=l-f-e.height/2,$=Math.min(N,k)*2;p=Xe(m/o,ri,$),m=p*o}T(t,U),o&&(U.y+=(y-U.height)/2);break}case"e":{if(o){const N=f+e.height/2,k=l-f-e.height/2,$=Math.min(N,k)*2;p=Xe(m/o,ri,$),m=p*o}T(t,U),o&&(U.y+=(y-U.height)/2);break}case"ne":{if(o)if(M>-x){const N=v?l-f:f+e.height;p=Xe(m/o,ri,N),m=p*o}else{const N=w?d+e.width:a-d;m=Xe(p*o,ri,N),p=m/o}T(t,U);break}case"nw":{if(o)if(M<x){const N=v?l-f:f+e.height;p=Xe(m/o,ri,N),m=p*o}else{const N=w?a-d:d+e.width;m=Xe(p*o,ri,N),p=m/o}T(t,U);break}case"se":{if(o)if(M>x){const N=v?f+e.height:l-f;p=Xe(m/o,ri,N),m=p*o}else{const N=w?d+e.width:a-d;m=Xe(p*o,ri,N),p=m/o}T(t,U);break}case"sw":{if(o)if(-M>x){const N=v?f+e.height:l-f;p=Xe(m/o,ri,N),m=p*o}else{const N=w?a-d:d+e.width;m=Xe(p*o,ri,N),p=m/o}T(t,U);break}}const I=doe(e,t,m,p,!!o);return eC(U.width,U.naturalWidth)&&eC(U.height,U.naturalHeight)&&(U=null),{x:I[0],y:I[1],width:m,height:p,crop:U}},doe=(e,t,n,i,r)=>{const[s,o,a,l]=uc(e,e.width,e.height,!0),c=S(s,o),u=S(a,l),d=l5(c,u),[f,h,m,p]=uc(e,n,i,!0),U=m-f,y=p-h;let E=[...c];if(["n","w","nw"].includes(t)&&(E=[u[0]-Math.abs(U),u[1]-Math.abs(y)]),t==="ne"){const T=[c[0],u[1]];E=[T[0],T[1]-Math.abs(y)]}if(t==="sw"){const T=[u[0],c[1]];E=[T[0]-Math.abs(U),T[1]]}r&&(["s","n"].includes(t)&&(E[0]=d[0]-U/2),["e","w"].includes(t)&&(E[1]=d[1]-y/2));const w=e.angle,v=Z(E,d,w),x=[E[0]+Math.abs(U)/2,E[1]+Math.abs(y)/2],M=Z(x,d,w);E=Z(v,M,-w);const _=[...E];return _[0]+=e.x-f,_[1]+=e.y-h,_},foe=(e,t)=>{if(e.crop){const{width:n,height:i}=Ja(e),[r,s,o,a,l,c]=Oe(e,t),u=se(Z(S(r,s),S(l,c),e.angle)),d=se(Z(S(o,s),S(l,c),e.angle)),f=Bn(Ub(d,u)),h=se(Z(S(r,a),S(l,c),e.angle)),m=Ub(h,u),p=Bn(m),{cropX:U,cropY:y}=hoe(e.crop,e.scale),E=Kl(Kl(u,xt(f,-U*n/e.crop.naturalWidth)),xt(p,-y*i/e.crop.naturalHeight)),w=Re(Kl(Kl(E,xt(f,n/2)),xt(p,i/2))),v=Z(Re(E),w,-e.angle);return{...e,x:v[0],y:v[1],width:n,height:i,crop:null}}return e},Ja=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},hoe=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},goe=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=Ja(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Ih={},Cb=(e,t)=>{const n=Ih[e]||(Ih[e]={height:t});return n.height=t,n},GF=e=>{Ih[e]&&delete Ih[e]},moe=e=>{var t;return((t=Ih[e])==null?void 0:t.height)??null},Vn=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=yoe(i,r,n);return{width:Zw(i,t),height:s}},XF="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),jF=(e,t)=>{const n=Eoe(e);return n===0?Vn(XF.split("").join(`
`),e,t).width+Fn*2:n+Fn*2},Ww=(e,t)=>Vn("",e,t).width+Fn*2,poe=()=>Zw(XF,pt({fontSize:gl,fontFamily:jc}))>0,xh=e=>yF(e).replace(/\t/g,"        "),Kw=e=>xh(e).split(`
`),Uoe=e=>{const t=Kw(e.text).length;return e.height/t/e.fontSize},Q0=(e,t)=>e*t,YF=(e,t)=>Q0(e,t)+Fn*2;let V8;class boe{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const ld=(e,t)=>(V8||(V8=new boe),V8.getLineWidth(e,t)),Zw=(e,t)=>{const n=Kw(e);let i=0;return n.forEach(r=>{i=Math.max(i,ld(r,t))}),i},yoe=(e,t,n)=>{const i=Kw(e).length;return Q0(t,n)*i},J0=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=ld(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),Eoe=e=>{const t=J0.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let $8,dU,G8;const voe=e=>($8||($8=Tt.class(...Object.values(Ua))),$8.test(e)),woe=()=>{if(!dU)try{dU=Toe()}catch{dU=_oe()}return dU},qw=()=>(G8||(G8=Soe()),G8),Qr={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},Ua={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},ru={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},_oe=()=>Tt.or(qw(),bn.On(Qr.HYPHEN,Qr.WHITESPACE,Ua.CHAR)),Toe=()=>Tt.or(qw(),bn.Before(Qr.WHITESPACE).Build(),bn.After(Qr.WHITESPACE,Qr.HYPHEN).Build(),bn.Before(Ua.CHAR,Ua.CURRENCY).NotPrecededBy(Qr.OPENING,Ua.OPENING).Build(),bn.After(Ua.CHAR).NotFollowedBy(Qr.HYPHEN,Qr.CLOSING,Ua.CLOSING).Build(),bn.BeforeMany(Ua.OPENING).NotPrecededBy(Qr.OPENING).Build(),bn.AfterMany(Ua.CLOSING).NotFollowedBy(Qr.CLOSING).Build(),bn.AfterMany(Qr.CLOSING).FollowedBy(Qr.OPENING).Build()),Soe=()=>Tt.group(Tt.or(ru.FLAG,Tt.and(ru.MOST,ru.JOINER,Tt.build(`(?:${ru.ZWJ.source}(?:${ru.FLAG.source}|${ru.ANY.source}${ru.JOINER.source}))*`)))),Tt={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>Tt.build(Tt.join(...e)),or:(...e)=>Tt.build(e.map(t=>t.source).join("|")),group:(...e)=>Tt.build(`(${Tt.join(...e)})`),class:(...e)=>Tt.build(`[${Tt.join(...e)}]`)},bn={On:(...e)=>{const t=Tt.join(...e);return Tt.build(`([${t}])`)},Before:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?=[${t}])`);return bn.Chain(n)},After:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?<=[${t}])`);return bn.Chain(n)},BeforeMany:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?<![${t}])(?=[${t}])`);return bn.Chain(n)},AfterMany:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?<=[${t}])(?![${t}])`);return bn.Chain(n)},NotBefore:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?![${t}])`);return bn.Chain(n)},NotAfter:(...e)=>{const t=Tt.join(...e),n=()=>Tt.build(`(?<![${t}])`);return bn.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=bn.After(...t).Build(),r=()=>Tt.and(i,n);return bn.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=bn.Before(...t).Build(),r=()=>Tt.and(n,i);return bn.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=bn.NotAfter(...t).Build(),r=()=>Tt.and(i,n);return bn.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=bn.NotBefore(...t).Build(),r=()=>Tt.and(n,i);return bn.Chain(r)}})},Ioe=e=>{const t=woe();return e.normalize("NFC").split(t).filter(Boolean)},Wc=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(ld(s,t)<=n){i.push(s);continue}const a=xoe(s,t,n);i.push(...a)}return i.join(`
`)},xoe=(e,t,n)=>{const i=[],s=Ioe(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=Moe(c)?a+J0.calculate(c,t):ld(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=Coe(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=ld(h,t),l=s.next()}}if(o){const c=Aoe(o,t,n);i.push(c)}return i},Coe=(e,t,n)=>{if(qw().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=J0.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},Aoe=(e,t,n)=>{if(!(ld(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=ld(r,t);for(const a of Array.from(s)){const l=J0.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},Moe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,$i=(e,t,n)=>{const i=n.getNonDeletedElementsMap();let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?Me(t)?0:t.angle:e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?Ko(t,e):e.width,s.text=Wc(e.originalText,pt(e),r));const o=Vn(s.text,pt(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=tp(t,e),l=Ko(t,e);if(!Me(t)&&o.height>a){const f=cd(o.height,t.type);n.mutateElement(t,{height:f}),Cb(t.id,f)}if(o.width>l){const f=cd(o.width,t.type);n.mutateElement(t,{width:f})}const c={...e,...s},{x:u,y:d}=g5(t,c,i);s.x=u,s.y=d}n.mutateElement(e,s)},ep=(e,t,n,i=!1)=>{const r=t.getNonDeletedElementsMap();if(!Wo(e))return;GF(e.id);const o=Ne(e,r);if(o&&o.text){if(!e)return;let a=o.text,l=o.height,c=o.width;const u=Ko(e,o),d=tp(e,o);let f=e.height;if(i||n!=="n"&&n!=="s"){a&&(a=Wc(o.originalText,pt(o),u));const h=Vn(a,pt(o),o.lineHeight);l=h.height,c=h.width}if(l>d){f=cd(l,e.type);const h=f-e.height,m=!Me(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-h:e.y;t.mutateElement(e,{height:f,y:m})}t.mutateElement(o,{text:a,width:c,height:l}),Me(e)||t.mutateElement(o,g5(e,o,r))}},g5=(e,t,n)=>{if(Me(e))return ce.getBoundTextElementPosition(e,t,n);const i=Roe(e),r=tp(e,t),s=Ko(e,t);let o,a;return t.verticalAlign===Fr.TOP?a=i.y:t.verticalAlign===Fr.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===$m.LEFT?o=i.x:t.textAlign===$m.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2),{x:o,y:a}},Wo=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(r=>r.type==="text"))==null?void 0:i.id)||null},Ne=(e,t)=>{if(!e)return null;const n=Wo(e);return n&&t.get(n)||null},$n=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,X8=(e,t,n)=>{if(!Me(e))return{x:e.x+e.width/2,y:e.y+e.height/2};const i=ce.getPointsGlobalCoordinates(e,n);if(i.length%2===1){const o=Math.floor(e.points.length/2),a=ce.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=ce.getEditorMidPoints(e,n,t)[r];return s||(s=ce.getSegmentMidPoint(e,i[r],i[r+1],r+1,n)),{x:s[0],y:s[1]}},Roe=e=>{let t=Fn,n=Fn;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},koe=(e,t)=>Me(t)?0:t?t.angle:e.angle,Loe=(e,t)=>e.some(n=>{if(Gt(n)){const i=$n(n,t);return!Me(i)}return!1}),Doe=(e,t)=>e.some(n=>{if(Gt(n)){const i=$n(n,t);return!Me(i)}return ue(n)}),Ooe=new Set(["rectangle","ellipse","diamond","arrow"]),Noe=e=>Ooe.has(e.type),cd=(e,t)=>{e=Math.ceil(e);const n=Fn*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Ko=(e,t)=>{const{width:n}=e;if(Me(e)){const i=((t==null?void 0:t.fontSize)??gl)*$ie;return Math.max(Vie*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},tp=(e,t)=>{const{height:n}=e;return Me(e)?n-Fn*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},WF=(e,t=`

`)=>e.reduce((i,r)=>(ue(r)&&i.push(r.text),i),[]).join(t);function TC(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function Poe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const Foe=1e-6;function SC(e,t){const n=se(e[1],e[0]),i=se(t,e[0]),r=bt(n,i);return Math.abs(r)<Foe}function j8(e,t){const n=se(e[1],e[0]),i=se(t,e[0]);return bt(n,i)<0}function IC(e,t){return SC(e,t[0])||SC(e,t[1])||(j8(e,t[0])?!j8(e,t[1]):j8(e,t[1]))}function Boe(e,t){return Poe(TC(e),TC(t))&&IC(e,t)&&IC(t,e)}const zoe=e=>e.type==="diamond"?[S(e.width/2,0),S(e.width,e.height/2),S(e.width/2,e.height),S(0,e.height/2)]:[S(0,0),S(0+e.width,0),S(0+e.width,e.height),S(0,e.height)],Hoe=e=>Ce(e)||io(e)?e.points:zoe(e),xC=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},Voe=e=>{const t=Hoe(e),{cx:n,cy:i}=xC(t),r=S(n,i),s=t.map(u=>Z(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=xC(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},$oe=(e,t)=>{const n=Voe(e);return(aU(n[0],Di(t[0],t[2]))||aU(t[0],Di(n[0],n[2])))&&(aU(n[1],Di(t[1],t[3]))||aU(t[1],Di(n[1],n[3])))},Goe=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;PF(t)&&(t=so(t,we(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const a of e){if(s.has(a.id))continue;if($oe(a,r)){if(s.add(a.id),a.boundElements)for(const c of a.boundElements)s.add(c.id);ue(a)&&a.containerId&&s.add(a.containerId),Me(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>s.has(a.id))},KF=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Li=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:it({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):ze(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:it(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),ZF=(e,t)=>qF(e,t)!=null,qF=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Gu=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),np=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...KF(s,n,e)}}}return n.selectedGroupIds},Xoe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),jm=(e,t)=>e.groupIds.includes(t),kt=(e,t)=>{const n=[];for(const i of e.values())jm(i,t)&&n.push(i);return n},joe=(e,t)=>e.groupIds.find(n=>t[n]),Yoe=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},Woe=(e,t)=>e.filter(n=>!t[n]),m5=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=Ne(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},Koe=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},Qw=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},Ch=e=>e.groupIds.length>0,Zoe=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},Jw=e=>{const t=new Set;return e.forEach(n=>{Te(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},e9=(e,t,n,i=!0)=>{const[r,s,o,a]=Oe(t,n);let l=e.filter(c=>{let[u,d,f,h]=so(c,n);const m=br(c,n);if(m){const[p,U,y,E]=so(m,n);u=Math.max(p,u),d=Math.max(U,d),f=Math.min(y,f),h=Math.min(E,h)}return c.locked===!1&&c.type!=="selection"&&!Gt(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?Jw(l):l,l=l.filter(c=>{const u=br(c,n);return u?kc(c,u,n):!0}),l},QF=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=Bb(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},Gn=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),ze=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Gt(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){r.push(s),i.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){const s=[];return r.forEach(o=>{Te(o)&&Ss(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},JF=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:ze(e,t,{includeBoundTextElement:!0}),it=(e,t)=>Hi(t.selectedElementIds,e)?t.selectedElementIds:e,qoe=(e,t)=>{var i;const n=e.filter(Ce);if(n.length===1){const r=n[0],s=((i=r.boundElements)==null?void 0:i.map(a=>a.id))??[];if(e.every(a=>a.id===r.id||s.includes(a.id)))return new ce(r,we(t))}return null},eB=(e,t,n)=>({selectedLinearElement:qoe(e,t),...Li({editingGroupId:n.editingGroupId,selectedElementIds:Jw(e).reduce((i,r)=>(Gt(r)||(i[r.id]=!0),i),{})},t,n,null)}),Qoe=(e,t,n)=>{const i=we(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId),a=s&&i.get(s);a&&mi(a,i,{frameId:o??null})}};function t9(e,t,n){const i=Pb(t,n),r=Pb(e,n);return i.some(o=>r.some(a=>Boe(o,a)))}const tB=(e,t,n)=>U5(e9(e,t,n,!1)).filter(i=>!Te(i)&&!i.frameId||i.frameId===t.id),n9=(e,t,n)=>e9([t],e,n).some(i=>i.id===t.id),ip=(e,t,n)=>{const[i,r,s,o]=Oe(t,n),[a,l,c,u]=yt(e);return i<=a&&r<=l&&s>=c&&o>=u},kc=(e,t,n)=>ip([e],t,n)||t9(e,t,n)||n9(e,t,n),CC=(e,t,n)=>{const[i,r,s,o]=Oe(t,n);return sF(S(i,r),S(e.x,e.y),S(s,o))},Joe=e=>{const t=new Map;for(const n of e){const i=Te(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,Ss(e,i))}return t},Ss=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},i9=e=>e.filter(t=>Te(t)),r9=e=>{const t=we(i9(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},o2=(e,t,n,i)=>{const r=Ss(e,t.id),s=new Set(r),o=new Set([...tB(e,t,i),...r.filter(f=>n9(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!t9(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=np(u,n);for(const[f,h]of Object.entries(d))if(h){const m=kt(e,f);if(ip(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(ue(f)&&f.containerId))},eae=(e,t,n)=>tae(U5(e,tB(e,t,n)),t,n),tae=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>kt(n,l)));o=!ip(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},br=(e,t)=>e.frameId&&t.get(e.frameId)||null,nae=(e,t)=>{const n=new Set,i=we(e);e=U5(e);for(const o of e)Te(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(Te(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=kt(e,a);if(l.some(c=>kc(c,t,i)))for(const c of l)s.push(c)}}else kc(o,t,i)&&s.push(o);return s},rm=(e,t,n,i)=>{const r=we(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)Te(c)&&c.id!==n.id&&l.add(c.id);for(const c of U5(e,t)){if(Te(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=Ne(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)mi(c,r,{frameId:n.id});return e},p5=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=Ne(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)mi(r,t,{frameId:null})},nB=(e,t)=>{const n=Ss(e,t.id);return p5(n,we(e)),e},iB=(e,t,n,i)=>rm(nB(e,n),t,n,i.state).slice(),Ah=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>kt(e,l)).forEach(l=>r.add(l));const s=new Set,o=we(e);return r.forEach(a=>{a.frameId&&!Te(a)&&!Ab(a,o,t)&&s.add(a)}),s.size>0&&p5(s,o),e},U5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)kt(e,o).some(a=>Te(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},D7=(e,t,n)=>{const i=ue(e)&&$n(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?br(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:br(i,t)},Ab=(e,t,n,i)=>{var l;const r=(i==null?void 0:i.targetFrame)??D7(e,t,n);if(!r)return!1;const s=ue(e)&&$n(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&s.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return kc(s,r,t);for(const c of s.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(s.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>kt(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(ze(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(Te(c))return o(!1),!1;for(const c of a)if(kc(c,r,t))return o(!0),!0;return!1},AC=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=t9(e,t,i)||n9(e,t,i);if(s){for(const o of e.groupIds)r==null||r.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!ip([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=Ab(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r==null||r.set(a,o)}for(const a of e.groupIds)r==null||r.set(a,o);return o}return!1},iae="Frame",rae="AI Frame",s9=e=>OF(e)?iae:rae,rB=e=>e.name===null?s9(e):e.name,o9=(e,t)=>Goe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),sB=e=>{const t=we(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},oB="invert(100%) hue-rotate(180deg) saturate(1.25)",aB=(e,t)=>xn(e)&&!t.imageCache.has(e.fileId),lB=(e,t,n)=>{var i;return n.theme===Ae.DARK&&xn(e)&&!aB(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==ye.svg},b5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},cB=(e,t,n,i,r=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Gie/100),s},sae=(e,t,n)=>{const s=b5(e),[o,a,l,c]=Oe(e,t),u=Ce(e)||io(e)?Ni(o,l):e.width,d=Ce(e)||io(e)?Ni(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},uB=(e,t,n,i,r)=>{var y,E;const s=document.createElement("canvas"),o=s.getContext("2d"),a=b5(e),{width:l,height:c,scale:u}=sae(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(Ce(e)||io(e)){const[w,v]=Oe(e,t);d=e.x>w?Ni(e.x,w)*window.devicePixelRatio*u:0,f=e.y>v?Ni(e.y,v)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=Yc.canvas(s);lB(e,i,r)&&(o.filter=oB),a2(e,h,o,i),o.restore();const m=Ne(e,t),p=document.createElement("canvas"),U=p.getContext("2d");if(Me(e)&&m){const[w,v,x,M]=Oe(e,t),_=Math.max(Ni(w,x),Ni(v,M));p.width=_*window.devicePixelRatio*u+a*u*10,p.height=_*window.devicePixelRatio*u+a*u*10,U.translate(p.width/2,p.height/2),U.rotate(e.angle),U.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,T,I]=Oe(m,t);U.rotate(-e.angle);const C=(p.width-s.width)/2,R=(p.height-s.height)/2,N=p.width/2-(T-w)*window.devicePixelRatio*u-C-a*u,k=p.height/2-(I-v)*window.devicePixelRatio*u-R-a*u;U.translate(-N,-k),U.clearRect(-(m.width/2+Fn)*window.devicePixelRatio*u,-(m.height/2+Fn)*window.devicePixelRatio*u,(m.width+Fn*2)*window.devicePixelRatio*u,(m.height+Fn*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((y=Ne(e,t))==null?void 0:y.version)||null,containingFrameOpacity:((E=br(e,t))==null?void 0:E.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:gt(e)?e.crop:null}},dB=typeof document<"u"?document.createElement("img"):{src:""};dB.src=`data:${ye.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const fB=typeof document<"u"?document.createElement("img"):{src:""};fB.src=`data:${ye.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const oae=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?fB:dB,e.width/2-i/2,e.height/2-i/2,i,i)},a2=(e,t,n,i,r)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw($t.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",$t.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=cae(e),a=$t.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=xn(e)?(s=i.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Ji(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else oae(e,n);break}default:if(ue(e)){const o=fF(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=pt(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=Q0(e.fontSize,e.lineHeight),d=iF(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},O7=new WeakMap,MC=(e,t,n,i)=>{var d;const r=n?i.zoom:{value:1},s=O7.get(e),o=s&&s.zoomValue!==r.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=Ne(e,t),l=(a==null?void 0:a.version)||null,c=gt(e)?e.crop:null,u=((d=br(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||Me(e)&&a&&e.angle!==s.angle){const f=uB(e,t,r,n,i);return f?(O7.set(e,f),f):null}return s},Y8=(e,t,n,i,r)=>{const s=e.element,o=b5(s),a=e.scale,[l,c,u,d]=Oe(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=Ne(s,r);if(Me(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!aB(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},aae=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},hu=(e,t,n,i,r,s,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=cB(e,br(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?nF:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=Pt.strokeWidth/o.zoom.value,r.strokeStyle=Pt.strokeColor,s2(e)&&(r.strokeStyle=o.theme===Ae.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,Pt.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if($t.generateElementShape(e,null),s.isExporting){const[c,u,d,f]=Oe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);r.save(),r.translate(h,m),r.rotate(e.angle),r.translate(-p,-U),a2(e,i,r,s),r.restore()}else{const c=MC(e,n,s,o);if(!c)return;Y8(c,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if($t.generateElementShape(e,s),s.isExporting){const[c,u,d,f]=Oe(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);if(ue(e)){const E=$n(e,t);if(Me(E)){const w=ce.getBoundTextElementPosition(E,e,t);p=(d-c)/2-(w.x-c),U=(f-u)/2-(w.y-u)}}r.save(),r.translate(h,m),lB(e,s,o)&&(r.filter="none");const y=Ne(e,t);if(Me(e)&&y){const E=document.createElement("canvas"),w=E.getContext("2d"),v=Math.max(Ni(c,d),Ni(u,f)),x=b5(e);E.width=v*o.exportScale+x*10*o.exportScale,E.height=v*o.exportScale+x*10*o.exportScale,w.translate(E.width/2,E.height/2),w.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),U=e.height/2-(e.y-u),w.rotate(e.angle);const M=Yc.canvas(E);w.translate(-p,-U),a2(e,M,w,s),w.translate(p,U),w.rotate(-e.angle);const[,,,,_,T]=Oe(y,t),I=(c+d)/2-_,C=(u+f)/2-T;w.translate(-I,-C),w.clearRect(-y.width/2,-y.height/2,y.width,y.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(E,-E.width/2,-E.height/2,E.width,E.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-p,-U),a2(e,i,r,s);r.restore()}else{const c=MC(e,n,s,o);if(!c)return;const u=r.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||Zie(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&gt(c.element)&&c.element.crop!==null){r.save(),r.globalAlpha=.1;const d=uB(foe(c.element,t),n,o.zoom,s,o);d&&Y8(d,r,s,o,n),r.restore()}Y8(c,r,s,o,n),r.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},hB=new WeakMap([]);function lae(e){const t=gB(e),n=new Path2D(t);return hB.set(e,n),n}function cae(e){return hB.get(e)}function gB(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return dae(coe(t,n))}function RC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const uae=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function dae(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,RC(i,s[0]),"L",s[0],"Z"):n.push(i,RC(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(uae,"$1")}const ki=class ki{};F(ki,"rg",new Xm),F(ki,"cache",new WeakMap),F(ki,"get",t=>ki.cache.get(t)),F(ki,"set",(t,n)=>ki.cache.set(t,n)),F(ki,"delete",t=>ki.cache.delete(t)),F(ki,"destroy",()=>{ki.cache=new WeakMap}),F(ki,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:ki.get(t);if(i!==void 0)return i;O7.delete(t);const r=Qae(t,ki.rg,n||{isExporting:!1,canvasBackgroundColor:He.white,embedsValidationStatus:null});return ki.cache.set(t,r),r});let $t=ki;const a9=1,Tn=40,fae=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>S(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=Rr(o,l[a-1]),u=Rr(l[a-1],l[a-2]);if(zn(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=S(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(Je(l[a-2],l[a-1])<a9){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=xa(o,l[a-1]);return r.push(S(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?$a(u9(d9(c9(e,l9(e,t,r.map(o=>S(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):$a(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},hae=(e,t,n)=>{var I,C;const i=t.map(R=>R.index),s=(((I=e.fixedSegments)==null?void 0:I.map(R=>R.index))??[]).findIndex(R=>!i.includes(R));if(s===-1||!((C=e.fixedSegments)!=null&&C[s]))return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:E,...w}=l9({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[S(0,0),S(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:v}=$a(u9(d9(c9(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredEndElement:E,...w})??[])),t,null,null),x=[];if(a)for(let R=0;R<a.index;R++)x.push(S(e.x+e.points[R][0],e.y+e.points[R][1]));if(v.forEach(R=>{x.push(S(e.x+(a?a.end[0]:0)+R[0],e.y+(a?a.end[1]:0)+R[1]))}),l)for(let R=l.index;R<e.points.length;R++)x.push(S(e.x+e.points[R][0],e.y+e.points[R][1]));const M=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,_=t.map(R=>R.index>o?{...R,index:R.index-M+(v.length-1)}:R),T=x.flatMap((R,N)=>{const k=x[N-1],$=x[N+1];if(k&&$){const V=Rr(R,k),z=Rr($,R);if(zn(V,z))return _.forEach(G=>{G.index>N&&(G.index-=1)}),[];if(zn(V,VF(z)))return _.forEach(G=>{G.index>N&&(G.index+=1)}),[R,R]}return[R]});return $a(T,_,!1,!1)},gae=(e,t,n,i,r,s)=>{var x,M;const o=t.map((_,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==_.index||(_.start[0]!==e.fixedSegments[T].start[0]&&_.end[0]!==e.fixedSegments[T].end[0])!=(_.start[1]!==e.fixedSegments[T].start[1]&&_.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(_=>_!==null).shift();if(o==null)return{points:e.points};const a=((x=e.fixedSegments)==null?void 0:x.findIndex(_=>_.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(_=>_.index===e.points.length-1))??-1,c=Je(t[o].start,t[o].end),u=c<Tn+5;if(a===-1&&t[o].index===1&&r){const _=Oo(n),I=(_?zn(n,Pn):zn(n,qi))?u?c/2:Tn:u?-c/2:-40;t[o].start=S(t[o].start[0]+(_?I:0),t[o].start[1]+(_?0:I))}if(l===-1&&t[o].index===e.points.length-1&&s){const _=Oo(i),I=(_?zn(i,Pn):zn(i,qi))?u?c/2:Tn:u?-c/2:-40;t[o].end=S(t[o].end[0]+(_?I:0),t[o].end[1]+(_?0:I))}const d=t.map(_=>({..._,start:S(e.x+_.start[0],e.y+_.start[1]),end:S(e.x+_.end[0],e.y+_.end[1])})),f=e.points.map((_,T)=>S(e.x+_[0],e.y+_[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,U=d[o].end,y=f[h-1]&&!no(f[h],f[h-1])?xa(f[h-1],f[h]):void 0,E=f[m+1]&&!no(f[m],f[m+1])?xa(f[m+1],f[m]):void 0;if(y!==void 0){const _=y?1:0;f[h-1][_]=p[_]}if(f[h]=p,f[m]=U,E!==void 0){const _=E?1:0;f[m+1][_]=U[_]}const w=d.findIndex(_=>_.index===h);if(w!==-1){const _=xa(d[w].end,d[w].start)?1:0;d[w].start[_]=p[_],d[w].end=p}const v=d.findIndex(_=>_.index===m+1);if(v!==-1){const _=xa(d[v].end,d[v].start)?1:0;d[v].end[_]=U[_],d[v].start=U}if(a===-1&&h===0){const _=r?Oo(n):xa(f[1],f[0]);f.unshift(S(_?p[0]:e.x+e.points[0][0],_?e.y+e.points[0][1]:p[1])),r&&f.unshift(S(e.x+e.points[0][0],e.y+e.points[0][1]));for(const T of d)T.index+=r?2:1}if(l===-1&&m===e.points.length-1){const _=Oo(i);f.push(S(_?U[0]:e.x+e.points[e.points.length-1][0],_?e.y+e.points[e.points.length-1][1]:U[1])),s&&f.push(S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return $a(f,d.map(_=>({..._,start:S(_.start[0]-e.x,_.start[1]-e.y),end:S(_.end[0]-e.x,_.end[1]-e.y)})),!1,!1)},mae=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((U,y)=>y===0||y===t.length-1?S(e.x+U[0],e.y+U[1]):S(e.x+e.points[y][0],e.y+e.points[y][1])),f=n.map(U=>({...U,start:S(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:S(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const U=d[c?2:1],y=d[c?3:2],E=Oo(i),w=Oo(Sh(se(U,y)));if(a&&E===w){const v=E?zn(i,Pn):zn(i,qi);if(h.unshift(S(w?s[0]+(v?Tn:-40):y[0],w?y[1]:s[1]+(v?Tn:-40))),h.unshift(S(E?s[0]+(v?Tn:-40):s[0],E?s[1]:s[1]+(v?Tn:-40))),!c){c=!0;for(const x of f)x.index>1&&(x.index+=1)}}else if(h.unshift(S(w?s[0]:U[0],w?U[1]:s[1])),c){c=!1;for(const v of f)v.index>1&&(v.index-=1)}h.unshift(s)}{const U=d[d.length-(u?3:2)],y=d[d.length-(u?4:3)],E=Oo(r),w=xa(y,U);if(l&&E===w){const v=E?zn(r,Pn):zn(r,qi);h.push(S(w?o[0]+(v?Tn:-40):y[0],w?y[1]:o[1]+(v?Tn:-40))),h.push(S(E?o[0]+(v?Tn:-40):o[0],E?o[1]:o[1]+(v?Tn:-40))),u||(u=!0)}else h.push(S(w?o[0]:U[0],w?U[1]:o[1])),u&&(u=!1)}return h.push(o),$a(h,f.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:S(U.start[0]-s[0],U.start[1]-s[1]),end:S(U.end[0]-s[0],U.end[1]-s[1])})),c,u)},cr=1e6,ug=(e,t,n,i)=>{var x,M,_,T,I,C,R,N,k,$,V,z,G,j,X,q,fe,ie,Ue,Ve,$e,nt,zt,Ct,Zt;if(e.points.length<2)return{points:n.points??e.points};(e.x<-1e6||e.x>cr||e.y<-1e6||e.y>cr||e.x+(((_=(M=n==null?void 0:n.points)==null?void 0:M[((x=n==null?void 0:n.points)==null?void 0:x.length)-1])==null?void 0:_[0])??0)<-1e6||e.x+(((C=(I=n==null?void 0:n.points)==null?void 0:I[((T=n==null?void 0:n.points)==null?void 0:T.length)-1])==null?void 0:C[0])??0)>cr||e.y+(((k=(N=n==null?void 0:n.points)==null?void 0:N[((R=n==null?void 0:n.points)==null?void 0:R.length)-1])==null?void 0:k[1])??0)<-1e6||e.y+(((z=(V=n==null?void 0:n.points)==null?void 0:V[(($=n==null?void 0:n.points)==null?void 0:$.length)-1])==null?void 0:z[1])??0)>cr||e.x+(((X=(j=e==null?void 0:e.points)==null?void 0:j[((G=e==null?void 0:e.points)==null?void 0:G.length)-1])==null?void 0:X[0])??0)<-1e6||e.x+(((ie=(fe=e==null?void 0:e.points)==null?void 0:fe[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:ie[0])??0)>cr||e.y+((($e=(Ve=e==null?void 0:e.points)==null?void 0:Ve[((Ue=e==null?void 0:e.points)==null?void 0:Ue.length)-1])==null?void 0:$e[1])??0)<-1e6||e.y+(((Ct=(zt=e==null?void 0:e.points)==null?void 0:zt[((nt=e==null?void 0:e.points)==null?void 0:nt.length)-1])==null?void 0:Ct[1])??0)>cr)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Xe(e.x,-1e6,cr),e.y=Xe(e.y,-1e6,cr),n.points&&(n.points=n.points.map(([xe,Ge])=>S(Xe(xe,-1e6,cr),Xe(Ge,-1e6,cr))));const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((xe,Ge)=>Ge===0?n.points[0]:Ge===e.points.length-1?n.points[1]:xe):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&Mb(c.elementId,t),f=u&&Mb(u.elementId,t),h=pB(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return $a(s.map(xe=>S(e.x+xe[0],e.y+xe[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:y,hoveredStartElement:E,hoveredEndElement:w,...v}=l9({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?$a(s.map(xe=>S(e.x+xe[0],e.y+xe[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?fae(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((xe,Ge)=>no(xe,e.points[Ge]??S(1/0,1/0)))&&h?{}:r.length===0?$a(u9(d9(c9(e,{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:y,hoveredEndElement:w,...v})??[])),r,null,null):(((Zt=e.fixedSegments)==null?void 0:Zt.length)??0)>r.length?hae(e,r,t):n.points?n.points&&n.fixedSegments?n:mae(e,s,r,m,p,U,y,E,w):gae(e,r,m,p,E,w)},l9=(e,t,n,i)=>{var x,M;const r=bb(n[0],Nn(e.x,e.y)),s=bb(n[n.length-1],Nn(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const _=Array.from(t.values());o=OC(r,t,_,i==null?void 0:i.zoom)||null,a=OC(s,t,_,i==null?void 0:i.zoom)||null}else o=e.startBinding&&Mb(e.startBinding.elementId,t)||null,a=e.endBinding&&Mb(e.endBinding.elementId,t)||null;const l=LC({...e,type:"arrow",elbowed:!0,points:n},"start",(x=e.startBinding)==null?void 0:x.fixedPoint,r,o,i==null?void 0:i.isDragging),c=LC({...e,type:"arrow",elbowed:!0,points:n},"end",(M=e.endBinding)==null?void 0:M.fixedPoint,s,a,i==null?void 0:i.isDragging),u=DC(l,c,o,r),d=DC(c,l,a,s),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?xo(o,vl(u,e.startArrowhead?Rt*6:Rt*2,1)):f,p=a?xo(a,vl(d,e.endArrowhead?Rt*6:Rt*2,1)):h,U=Mh(l,a?xo(a,vl(d,Tn,Tn)):h)||Mh(c,o?xo(o,vl(u,Tn,Tn)):f),y=mB(U?[f,h]:[m,p]),E=bae(U?f:m,U?h:p,y,U?vl(u,!o&&!a?0:Tn,0):vl(u,!o&&!a?0:Tn-(e.startArrowhead?Rt*6:Rt*2),Tn),U?vl(d,!o&&!a?0:Tn,0):vl(d,!o&&!a?0:Tn-(e.endArrowhead?Rt*6:Rt*2),Tn),U,o&&xo(o),a&&xo(a)),w=kC(E[0],u,l),v=kC(E[1],d,c);return{dynamicAABBs:E,startDonglePosition:w,startGlobalPoint:l,startHeading:u,endDonglePosition:v,endGlobalPoint:c,endHeading:d,commonBounds:y,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:U,startElementBounds:m,endElementBounds:p}},c9=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=yae(n,i||r,s,o||a,l,c),f=i&&fU(i,d),h=o&&fU(o,d),m=fU(a,d);m&&u&&(m.closed=!0);const p=fU(r,d);p&&e.startBinding&&(p.closed=!0);const U=f&&h&&(Mh(f.pos,n[1])||Mh(h.pos,n[0])),y=pae(f||p,h||m,d,s||Pn,l||Pn,U?[]:n);if(y){const E=y.map(w=>[w.pos[0],w.pos[1]]);return f&&E.unshift(r),h&&E.push(a),E}return null},vl=(e,t,n)=>{switch(e){case Gs:return[t,n,n,n];case Pn:return[n,t,n,n];case qi:return[n,n,t,n]}return[n,n,n,t]},pae=(e,t,n,i,r,s)=>{const o=W8(e.pos,t.pos),a=new Yne(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return Uae(e,l);l.closed=!0;const c=vae(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=v1(d.pos,l.pos,.5);if(Rre(...s.map(v=>Mh(f,v))))continue;const h=wae(u),m=l.parent?Sh(se(l.pos,l.parent.pos)):i,p=VF(m);if(zn(p,h)||NC(e.addr,d.addr)&&zn(h,i)||NC(t.addr,d.addr)&&zn(h,r))continue;const y=m!==h,E=l.g+W8(d.pos,l.pos)+(y?Math.pow(o,3):0),w=d.visited;if(!w||E<d.g){const v=Eae(d,t,h,r);d.visited=!0,d.parent=l,d.h=W8(t.pos,d.pos)+v*Math.pow(o,2),d.g=E,d.f=d.g+d.h,w?a.rescoreElement(d):a.push(d)}}}return null},Uae=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},W8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),bae=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,U,y]=r??[0,0,0,0],E=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],w=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-y):(c[0]+l[2])/2:t[0]>e[0]?t[0]-y:n[0]-y,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+U):(c[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],v=mB([E,w]);if(!s&&E[2]-E[0]+w[2]-w[0]>v[2]-v[0]+1e-11&&E[3]-E[1]+w[3]-w[1]>v[3]-v[1]+1e-11){const[x,M]=[(w[0]+w[2])/2,(w[1]+w[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const _=E[2]+(w[0]-E[2])/2,T=w[3]+(E[1]-w[3])/2;return bt(Nn(e[2]-x,e[1]-M),Nn(e[0]-x,e[3]-M))>0?[[E[0],E[1],_,E[3]],[_,w[1],w[2],w[3]]]:[[E[0],T,E[2],E[3]],[w[0],w[1],w[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const _=E[2]+(w[0]-E[2])/2,T=E[3]+(w[1]-E[3])/2;return bt(Nn(e[0]-x,e[1]-M),Nn(e[2]-x,e[3]-M))>0?[[E[0],E[1],E[2],T],[w[0],T,w[2],w[3]]]:[[E[0],E[1],_,E[3]],[_,w[1],w[2],w[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const _=w[2]+(E[0]-w[2])/2,T=E[3]+(w[1]-E[3])/2;return bt(Nn(e[2]-x,e[1]-M),Nn(e[0]-x,e[3]-M))>0?[[_,E[1],E[2],E[3]],[w[0],w[1],_,w[3]]]:[[E[0],E[1],E[2],T],[w[0],T,w[2],w[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const _=w[2]+(E[0]-w[2])/2,T=w[3]+(E[1]-w[3])/2;return bt(Nn(e[0]-x,e[1]-M),Nn(e[2]-x,e[3]-M))>0?[[_,E[1],E[2],E[3]],[w[0],w[1],_,w[3]]]:[[E[0],T,E[2],E[3]],[w[0],w[1],w[2],T]]}}return[E,w]},yae=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===us||n===Pn?a.add(t[1]):o.add(t[0]),r===us||r===Pn?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},kC=(e,t,n)=>{switch(t){case Gs:return S(n[0],e[1]);case Pn:return S(e[2],n[1]);case qi:return S(n[0],e[3])}return S(e[0],n[1])},Eae=(e,t,n,i)=>{if(i===Pn)switch(n){case Pn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Gs:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case us:return e.pos[1]===t.pos[1]?4:2}else if(i===us)switch(n){case Pn:return e.pos[1]===t.pos[1]?4:2;case Gs:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case us:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===Gs)switch(n){case Pn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Gs:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case qi:return e.pos[0]===t.pos[0]?4:2;case us:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===qi)switch(n){case Pn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Gs:return e.pos[0]===t.pos[0]?4:2;case qi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case us:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},vae=([e,t],n)=>[w1([e,t-1],n),w1([e+1,t],n),w1([e,t+1],n),w1([e-1,t],n)],w1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,fU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=w1([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},mB=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],Mb=(e,t)=>{const n=t.get(e);return n&&ro(n)?n:null},$a=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>bb(a,xt(se(e[0]),-1)));return(r<-1e6||r>cr||s<-1e6||s>cr||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>cr||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>cr)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,...Th(o)}),o=o.map(([a,l])=>S(Xe(a,-1e6,1e6),Xe(l,-1e6,1e6))),{points:o,x:Xe(r,-1e6,1e6),y:Xe(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Th(o),startIsSpecial:n,endIsSpecial:i}},u9=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},d9=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return Je(i,t)>a9}):e,wae=e=>{switch(e){case 0:return Gs;case 1:return Pn;case 2:return qi}return us},LC=(e,t,n,i,r,s)=>{if(s){if(r){const o=Wm(e,r,t);return Fae(r,o)}return i}if(r){const o=P7(n||[0,0],r);return Math.abs(h5(r,o)-Rt)>.01?Wm(e,r,t):o}return i},DC=(e,t,n,i)=>Oae(e,t,n,n&&xo(n,Array(4).fill(h5(n,e))),i),OC=(e,t,n,i)=>Ws(js(e),n,t,i,!0,!0),NC=(e,t)=>e[0]===t[0]&&e[1]===t[1],pB=(e,t=a9)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),mi=(e,t,n,i)=>{let r=!1;const{points:s,fixedSegments:o,startBinding:a,endBinding:l,fileId:c}=n;he(e)&&(Object.keys(n).length===0||typeof s<"u"||typeof o<"u"||typeof a<"u"||typeof l<"u")?n={...n,angle:0,...ug({...e,x:n.x||e.x,y:n.y||e.y},t,n,i)}:typeof s<"u"&&(n={...Th(s),...n});for(const u in n){const d=n[u];if(typeof d<"u"){if(e[u]===d&&(typeof d!="object"||d===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){const f=e[u],h=d;if(f[0]===h[0]&&f[1]===h[1])continue}else if(u==="points"){const f=e[u],h=d;if(f.length===h.length){let m=!1,p=f.length;for(;--p;){const U=f[p],y=h[p];if(U[0]!==y[0]||U[1]!==y[1]){m=!0;break}}if(!m)continue}}e[u]=d,r=!0}}return r&&((typeof n.height<"u"||typeof n.width<"u"||typeof c<"u"||typeof s<"u")&&$t.delete(e),e.version++,e.versionNonce=Yo(),e.updated=cg()),e},Ie=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,updated:cg(),version:e.version+1,versionNonce:Yo()}},Ca=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Yo(),e.updated=cg(),e),_ae=e=>!e[H.CTRL_OR_CMD],Su=e=>e.isBindingEnabled,Rt=5,UB=10,bB=4,Tae=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},y5=(e,t,n,i)=>{const r=new Set,s=new Set;PC(e,t,n,"start",r,s,i),PC(e,n,t,"end",r,s,i);const o=Array.from(s).filter(a=>!r.has(a));Tae(i,o).forEach(a=>{var l;i.mutateElement(a,{boundElements:(l=a.boundElements)==null?void 0:l.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},PC=(e,t,n,i,r,s,o)=>{if(t!=="keep"){if(t===null){const a=Aae(e,i,o);a!=null&&s.add(a);return}wB(e)?(n==null||(n==="keep"?!EB(e,t,i):i==="start"||n.id!==t.id))&&(gs(e,t,i,o),r.add(t.id)):(gs(e,t,i,o),r.add(t.id))}},Sae=(e,t,n,i)=>{var o,a;const r=_B(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){const l=n.get(s);if(ro(l)&&l2(l,r,n,i))return l}return null},yB=(e,t,n)=>["start","end"].map(i=>Sae(e,i,t,n)),Iae=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?Lb(e,"start",i,r,s):null:"keep",d=c?t?Lb(e,"end",i,r,s):null:"keep";return[u,d]},xae=(e,t,n,i,r)=>{if(he(e))return["keep","keep"];const[s,o]=yB(e,t,r),a=s&&i?Lb(e,"start",t,n,r):null,l=o&&i?Lb(e,"end",t,n,r):null;return[a,l]},Rb=(e,t,n,i,r)=>{e.forEach(s=>{const[o,a]=n!=null&&n.length?Iae(s,t,n??[],i.getNonDeletedElementsMap(),i.getNonDeletedElements(),r):xae(s,i.getNonDeletedElementsMap(),i.getNonDeletedElements(),t,r);y5(s,o,a,i)})},K8=(e,t,n)=>e.length>50?[]:e.filter(Ce).flatMap(i=>yB(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===(i==null?void 0:i.id)).length===0),N7=(e,t,n,i)=>{const r=i.getNonDeletedElements(),s=i.getNonDeletedElementsMap();t.startBoundElement!=null&&gs(e,t.startBoundElement,"start",i);const o=Ws(n,r,s,t.zoom,he(e),he(e));o!==null&&(EB(e,o,"end")||gs(e,o,"end",i))},Cae=(e,t)=>{let n=e.gap;const i=ud(t,t.width,t.height);return n>i&&(n=UB+bB),{...e,gap:n}},gs=(e,t,n,i)=>{if(!Me(e))return;let r={elementId:t.id,...Cae(kae(e,t,n,i.getNonDeletedElementsMap()),t)};he(e)&&(r={...r,...kb(e,t,n)}),i.mutateElement(e,{[n==="start"?"startBinding":"endBinding"]:r}),we(t.boundElements||[]).has(e.id)||i.mutateElement(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},EB=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return vB(e,i==null?void 0:i.elementId,t)},vB=(e,t,n)=>t===n.id&&wB(e),wB=e=>e.points.length<3,Aae=(e,t,n)=>{const i=t==="start"?"startBinding":"endBinding",r=e[i];return r==null?null:(n.mutateElement(e,{[i]:null}),r.elementId)},Ws=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=Rae(t,u=>ro(u,!1)&&l2(u,e,n,i,(r||!P8(u))&&!Te(u))).filter(u=>a?!1:(P8(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>l2(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return Mae(t,a=>ro(a,!1)&&l2(a,e,n,i,(r||!P8(a))&&!Te(a)))},Mae=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},Rae=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},kae=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=ce.getPointAtIndexGlobalCoordinates(e,s,i),l=ce.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:Hae(t,l,a),gap:Math.max(1,h5(t,a))}},yr=(e,t,n)=>{if(!ro(e))return;const{newSize:i,simultaneouslyUpdated:r}=n??{},s=Dae(r);let o=t.getNonDeletedElementsMap();n!=null&&n.changedElements&&(o=new Map(o),n.changedElements.forEach(a=>{o.set(a.id,a)})),Db(o,e,a=>{var p,U;if(!Ce(a)||a.isDeleted||!Lae(a,e))return;const l=a.startBinding?o.get(a.startBinding.elementId):null,c=a.endBinding?o.get(a.endBinding.elementId):null;let u=null,d=null;l&&c&&(u=so(l,o),d=so(c,o));const f={startBinding:FC(e,a.startBinding,i),endBinding:FC(e,a.endBinding,i)};if(s.has(a.id)){t.mutateElement(a,f);return}const h=Ob(o,a,(y,E)=>{var w,v;if(y&&ro(y)&&(E==="startBinding"||E==="endBinding")&&(e.id===((w=a[E])==null?void 0:w.elementId)||e.id===((v=a[E==="startBinding"?"endBinding":"startBinding"])==null?void 0:v.elementId)&&!cle(u,d))){const x=Bae(a,E,f[E],y,o);if(x)return[E==="startBinding"?0:a.points.length-1,{point:x}]}return null}).filter(y=>y!==null);ce.movePoints(a,t,new Map(h),{...e.id===((p=a.startBinding)==null?void 0:p.elementId)?{startBinding:f.startBinding}:{},...e.id===((U=a.endBinding)==null?void 0:U.elementId)?{endBinding:f.endBinding}:{}});const m=Ne(a,o);m&&!m.isDeleted&&ep(a,t,!1)})},Ym=(e,t,n)=>{Ce(e)?Rb([e],!0,[],t,n==null?void 0:n.zoom):yr(e,t,{...n,changedElements:new Map([[e.id,e]])})},Lae=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},Dae=e=>new Set((e||[]).map(t=>t.id)),Oae=(e,t,n,i,r,s)=>{const o=Sh(se(t,e));return!n||!i?o:Nae(r,n,s)?Yw(n,i,e):Sh(se(e,Xn(n)))},Nae=(e,t,n)=>{const i=h5(t,e),r=ud(t,t.width,t.height,n);return i>r?null:i},Wm=(e,t,n)=>{const i=xo(t),r=e.points[n==="start"?0:e.points.length-1],s=S(e.x+r[0],e.y+r[1]),o=Hse(t)?Pae(t,s):s,a=he(e),l=g9(i),c=n==="start"?1:e.points.length-2,u=Z(S(e.x+e.points[c][0],e.y+e.points[c][1]),l,e.angle??0);let d=null;if(a){const f=Oo(Yw(t,i,s)),h=S(f?l[0]:o[0],f?o[1]:l[1]);d=k7(t,_e(h,Re(xt(Bn(se(o,h)),Math.max(t.width,t.height)*2),h)))[0]}else d=k7(t,_e(u,Re(xt(Bn(se(o,u)),Je(o,u)+Math.max(t.width,t.height)*2),u)),Rt).sort((f,h)=>Sa(f,u)-Sa(h,u))[0];if(!d||Sa(o,d)<Mc)return o;if(a){const f=Sa(o,l)-Sa(d,l)>0?Rt:-5;return Re(xt(Bn(se(o,d)),f),d)}return o},Pae=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle);return i[0]<e.x&&i[1]<e.y?i[1]-e.y>-5?Z(S(e.x-Rt,e.y),n,e.angle):Z(S(e.x,e.y-Rt),n,e.angle):i[0]<e.x&&i[1]>e.y+e.height?i[0]-e.x>-5?Z(S(e.x,e.y+e.height+Rt),n,e.angle):Z(S(e.x-Rt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]>e.y+e.height?i[0]-e.x<e.width+Rt?Z(S(e.x+e.width,e.y+e.height+Rt),n,e.angle):Z(S(e.x+e.width+Rt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]<e.y?i[0]-e.x<e.width+Rt?Z(S(e.x+e.width,e.y-Rt),n,e.angle):Z(S(e.x+e.width+Rt,e.y),n,e.angle):t},Fae=(e,t,n=.05)=>{const{x:i,y:r,width:s,height:o,angle:a}=e,l=Xn(e,-.1,-.1),c=Z(t,l,-a),u=Xe(n*o,5,80),d=Xe(n*s,5,80);if(c[0]<=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u)return Z(S(i-Rt,l[1]),l,a);if(c[1]<=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d)return Z(S(l[0],r-Rt),l,a);if(c[0]>=i+s/2&&c[1]>l[1]-u&&c[1]<l[1]+u)return Z(S(i+s+Rt,l[1]),l,a);if(c[1]>=r+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d)return Z(S(l[0],r+o+Rt),l,a);if(e.type==="diamond"){const f=Rt-1,h=S(i+s/4-f,r+o/4-f),m=S(i+3*s/4+f,r+o/4-f),p=S(i+s/4-f,r+3*o/4+f),U=S(i+3*s/4+f,r+3*o/4+f);if(Je(h,c)<Math.max(d,u))return Z(h,l,a);if(Je(m,c)<Math.max(d,u))return Z(m,l,a);if(Je(p,c)<Math.max(d,u))return Z(p,l,a);if(Je(U,c)<Math.max(d,u))return Z(U,l,a)}return t},Bae=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(he(e)&&Ib(n)){const d=E5(n.fixedPoint)??kb(e,i,t==="startBinding"?"start":"end").fixedPoint,f=Xn(i),h=S(i.x+d[0]*i.width,i.y+d[1]*i.height),m=Z(h,f,i.angle);return ce.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=ce.getPointAtIndexGlobalCoordinates(e,a,r),c=Vae(i,n.focus,l);let u;if(n.gap===0)u=c;else{const d=ce.getPointAtIndexGlobalCoordinates(e,o,r),f=Xn(i),h=Je(l,d)+Je(l,f)+Math.max(i.width,i.height)*2,m=[...k7(i,_e(l,Re(xt(Bn(se(c,l)),h),l)),n.gap).sort((p,U)=>Sa(p,l)-Sa(U,l)),Re(xt(Bn(se(c,l)),Je(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return ce.pointFromAbsoluteCoords(e,u,r)},kb=(e,t,n)=>{const i=[t.x,t.y,t.x+t.width,t.y+t.height],r=Wm(e,t,n),s=S(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),o=Z(r,s,-t.angle);return{fixedPoint:E5([(o[0]-t.x)/t.width,(o[1]-t.y)/t.height])}},FC=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(ud(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},Lb=(e,t,n,i,r)=>Ws(_B(e,t,n),i,n,r,he(e),he(e)),_B=(e,t,n)=>{const i=t==="start"?0:-1;return js(ce.getPointAtIndexGlobalCoordinates(e,i,n))},zae=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}he(i)&&Object.assign(i,ug(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},TB=(e,t)=>{const n=we(e);for(const i of t)Df.unbindAffected(n,i,(r,s)=>mi(r,n,s)),Of.unbindAffected(n,i,(r,s)=>mi(r,n,s))},sm=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},l2=(e,{x:t,y:n},i,r,s)=>{const o=ud(e,e.width,e.height,r),a=Vs(e,i);return J7(S(t,n),a,o)||s===!0&&Mh(S(t,n),xo(e))},ud=(e,t,n,i)=>{const r=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),UB/r+bB)},Hae=(e,t,n)=>{const i=Xn(e);if(no(t,n))return 0;const r=Z(t,i,-e.angle),s=Z(n,i,-e.angle),o=Math.sign(bt(se(s,t),se(s,i)))*-1,a=_e(s,Re(xt(Bn(se(s,r)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[_e(S(e.x+e.width/2,e.y),S(e.x+e.width/2,e.y+e.height)),_e(S(e.x,e.y+e.height/2),S(e.x+e.width,e.y+e.height/2))]:[_e(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),_e(S(e.x+e.width,e.y),S(e.x,e.y+e.height))],c=e.type==="diamond"?[_e(S(e.x+e.width/2,e.y-e.height),S(e.x+e.width/2,e.y+e.height*2)),_e(S(e.x-e.width,e.y+e.height/2),S(e.x+e.width*2,e.y+e.height/2))]:[_e(S(e.x-e.width,e.y-e.height),S(e.x+e.width*2,e.y+e.height*2)),_e(S(e.x+e.width*2,e.y-e.height),S(e.x-e.width,e.y+e.height*2))];return[ad(a,c[0]),ad(a,c[1])].filter(f=>f!==null).sort((f,h)=>Sa(f,n)-Sa(h,n)).map((f,h)=>o*Je(i,f)/(e.type==="diamond"?Je(l[h][0],l[h][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((f,h)=>Math.abs(f)-Math.abs(h))[0]??0},Vae=(e,t,n)=>{const i=Xn(e);if(t===0)return i;const r=(e.type==="diamond"?[S(e.x,e.y+e.height/2),S(e.x+e.width/2,e.y),S(e.x+e.width,e.y+e.height/2),S(e.x+e.width/2,e.y+e.height)]:[S(e.x,e.y),S(e.x+e.width,e.y),S(e.x+e.width,e.y+e.height),S(e.x,e.y+e.height)]).map(a=>Re(xt(se(a,i),Math.abs(t)),i)).map(a=>Z(a,i,e.angle)),s=[bt(se(n,r[0]),se(r[1],r[0]))>0&&(t>0?bt(se(n,r[1]),se(r[2],r[1]))<0:bt(se(n,r[3]),se(r[0],r[3]))<0),bt(se(n,r[1]),se(r[2],r[1]))>0&&(t>0?bt(se(n,r[2]),se(r[3],r[2]))<0:bt(se(n,r[0]),se(r[1],r[0]))<0),bt(se(n,r[2]),se(r[3],r[2]))>0&&(t>0?bt(se(n,r[3]),se(r[0],r[3]))<0:bt(se(n,r[1]),se(r[2],r[1]))<0),bt(se(n,r[3]),se(r[0],r[3]))>0&&(t>0?bt(se(n,r[0]),se(r[1],r[0]))<0:bt(se(n,r[2]),se(r[3],r[2]))<0)];return s[0]?t>0?r[1]:r[0]:s[1]?t>0?r[2]:r[1]:s[2]?t>0?r[3]:r[2]:t>0?r[0]:r[3]},$ae=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Db=(e,t,n)=>{var i;ro(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:s})=>{n(e.get(s),"boundElements",s)})},Ob=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(Gt(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(Me(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class Df{static unbindAffected(t,n,i){n&&Ob(t,n,r=>{!r||r.isDeleted||Db(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:sm(r.boundElements,new Set([a]))})})})}}F(Df,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Ob(t,n,(r,s)=>{var o,a;if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&((o=r.boundElements)!=null&&o.find(l=>l.id===n.id)||(Me(n)&&i(r,{boundElements:sm(r.boundElements,new Set,new Array(n))}),ue(n)&&((a=r.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[s]:null}):i(r,{boundElements:sm(r.boundElements,new Set,new Array(n))}))))})});class Of{static unbindAffected(t,n,i){n&&Db(t,n,r=>{!r||r.isDeleted||Ob(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}}F(Of,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Db(t,n,(r,s,o)=>{var a,l;if(!r||r.isDeleted){i(n,{boundElements:sm(n.boundElements,new Set([o]))});return}ue(r)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:sm(n.boundElements,new Set([r.id]))})))})});const P7=(e,t)=>{const[n,i]=E5(e);return Z(S(t.x+t.width*n,t.y+t.height*i),Xn(t),t.angle)},Gae=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?P7(e.startBinding.fixedPoint,n):S(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?P7(e.endBinding.fixedPoint,i):S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Xae=(e,t)=>{const[n,i]=Gae(e,t);return[ce.pointFromAbsoluteCoords(e,n,t),ce.pointFromAbsoluteCoords(e,i,t)]},E5=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,ve=class ve{constructor(t,n){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");this.elementId=t.id,no(t.points[0],S(0,0))||(console.error("Linear element is not normalized",Error().stack),ve.normalizePoints(t,n)),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=he(t)&&t.elbowed}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=ve.getElement(a,r);if(!l)return!1;const[c,u,d,f]=Oe(n.selectionElement,r),m=ve.getPointsGlobalCoordinates(l,r).reduce((p,U,y)=>((U[0]>=c&&U[0]<=d&&U[1]>=u&&U[1]<=f||t.shiftKey&&(o!=null&&o.includes(y)))&&p.push(y),p),[]).filter(p=>!(he(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s,o,a){var m,p;if(!o)return null;const{elementId:l}=o,c=a.getNonDeletedElementsMap(),u=ve.getElement(l,c);if(!u||he(u)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return null;const d=he(u)?[(m=o.selectedPointsIndices)!=null&&m.includes(0)?0:void 0,(p=o.selectedPointsIndices)!=null&&p.find(U=>U>0)?u.points.length-1:void 0].filter(U=>U!==void 0):o.selectedPointsIndices,f=he(u)?o.pointerDownState.lastClickedPoint>0?u.points.length-1:0:o.pointerDownState.lastClickedPoint,h=u.points[f];if(d&&h){if(tm(t)&&d.length===1&&u.points.length>1){const y=d[0],E=u.points[y===0?1:y-1],[w,v]=ve._getShiftLockedDelta(u,c,E,S(i,r),t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize());ve.movePoints(u,a,new Map([[y,{point:S(w+E[0],v+E[1]),isDragging:y===f}]]))}else{const y=ve.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),E=y[0]-h[0],w=y[1]-h[1];ve.movePoints(u,a,new Map(d.map(v=>{const x=v===f?ve.createPointAt(u,c,i-o.pointerOffset.x,r-o.pointerOffset.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):S(u.points[v][0]+E,u.points[v][1]+w);return[v,{point:x,isDragging:v===f}]})))}if(Ne(u,c)&&ep(u,a,!1),Ia(u,!1)){const y=[];d[0]===0&&y.push(js(ve.getPointGlobalCoordinates(u,u.points[0],c)));const w=d[d.length-1];w===u.points.length-1&&y.push(js(ve.getPointGlobalCoordinates(u,u.points[w],c))),y.length&&s(u,y)}return{...o,selectedPointsIndices:d,segmentMidPointHoveredCoords:f!==0&&f!==u.points.length-1?this.getPointGlobalCoordinates(u,h,c):null,hoverPointIndex:f===0||f===u.points.length-1?f:-1,isDragging:!0}}return null}static handlePointerUp(t,n,i,r){var h;const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:c,pointerDownState:u}=n,d=ve.getElement(a,s);if(!d)return n;const f={};if(c&&l){for(const m of l)if(m===0||m===d.points.length-1){el(d.points,i.zoom.value)&&ve.movePoints(d,r,new Map([[m,{point:m===0?d.points[d.points.length-1]:d.points[0]}]]));const p=Su(i)?Ws(js(ve.getPointAtIndexGlobalCoordinates(d,m,s)),o,s,i.zoom,he(d),he(d)):null;f[m===0?"startBindingElement":"endBindingElement"]=p}}return{...n,...f,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&((h=u.prevSelectedPointsIndices)!=null&&h.includes(u.lastClickedPoint))?l&&l.filter(m=>m!==u.lastClickedPoint):l:l!=null&&l.includes(u.lastClickedPoint)?[u.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,i,r,s){if(he(t))return r>=0&&r<t.points.length?Je(n,i)*s.value<ve.POINT_HANDLE_SIZE/2:!1;let o=Je(n,i);return t.points.length>2&&t.roundness&&(o=Wae(t,i)),o*s.value<ve.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,i,r,s){let o=l5(n,i);if(t.points.length>2&&t.roundness){const a=IB(t,t.points[r]);if(a){const l=Kae(t,t.points[r],.5);o=ve.getPointGlobalCoordinates(t,xB(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,i,r){const s=ve.getElement(t.elementId,r);if(!s)return-1;const o=ve.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(ve.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){var T;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=ve.getElement(d,l);if(!f)return u;const h=ve.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=ve.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(o.mutateElement(f,{points:[...f.points,ve.createPointAt(f,l,r.x,r.y,t[H.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.scheduleCapture(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:Ws(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=ve.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:I,endBindingElement:C}=s;Su(a)&&Ia(f)&&y5(f,I,C,o)}const[U,y,E,w]=Oe(f,l),v=(U+E)/2,x=(y+w)/2,M=p>-1&&Z(S(f.x+f.points[p][0],f.y+f.points[p][1]),S(v,x),f.angle),_=p>-1||t.shiftKey?t.shiftKey||(T=s.selectedPointsIndices)!=null&&T.includes(p)?jae([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:_,pointerOffset:M?{x:r.x-M[0],y:r.y-M[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:no(t,n)}static handlePointerMove(t,n,i,r){const s=r.state;if(!s.editingLinearElement)return null;const{elementId:o,lastUncommittedPoint:a}=s.editingLinearElement,l=r.scene.getNonDeletedElementsMap(),c=ve.getElement(o,l);if(!c)return s.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===a&&ve.deletePoints(c,r.scene,[u.length-1]),{...s.editingLinearElement,lastUncommittedPoint:null};let f;if(tm(t)&&u.length>=2){const h=u[u.length-2],[m,p]=ve._getShiftLockedDelta(c,l,h,S(n,i),t[H.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=S(m+h[0],p+h[1])}else f=ve.createPointAt(c,l,n-s.editingLinearElement.pointerOffset.x,i-s.editingLinearElement.pointerOffset.y,t[H.CTRL_OR_CMD]||he(c)?null:r.getEffectiveGridSize());return d===a?ve.movePoints(c,r.scene,new Map([[c.points.length-1,{point:f}]])):ve.addPoints(c,r.scene,[{point:f}]),{...s.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=Oe(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return Z(S(u+n[0],d+n[1]),S(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=Oe(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return Z(S(u+c[0],d+c[1]),S(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=Oe(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return Z(d?S(f+d[0],h+d[1]):S(f,h),S(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(he(t))return S(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=Oe(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=Z(S(n[0],n[1]),S(l,c),-t.angle);return S(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=ve.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(Je(S(r,s),S(l[0],l[1]))*i.value<ve.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=Rn(i,r,s),[a,l,c,u]=Oe(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=Z(S(o[0],o[1]),S(d,f),-t.angle);return S(h-t.x,m-t.y)}static getNormalizedPoints(t){const{points:n}=t,i=n[0][0],r=n[0][1];return{points:n.map(s=>S(s[0]-i,s[1]-r)),x:t.x+i,y:t.y+r}}static normalizePoints(t,n){mi(t,n,ve.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){Ur(t.editingLinearElement,"Not currently editing a linear element");const i=n.getNonDeletedElementsMap(),{selectedPointsIndices:r,elementId:s}=t.editingLinearElement,o=ve.getElement(s,i);Ur(o,"The linear element does not exist in the provided Scene"),Ur(r!=null,"There are no selected points to duplicate");const{points:a}=o,l=[];let c=!1,u=-1;const d=a.reduce((f,h,m)=>{if(++u,f.push(h),r.includes(m)){const U=a[m+1];U||(c=!0),f.push(U?S((h[0]+U[0])/2,(h[1]+U[1])/2):S(h[0],h[1])),l.push(u+1),++u}return f},[]);if(n.mutateElement(o,{points:d}),c){const f=o.points[o.points.length-1];ve.movePoints(o,n,new Map([[o.points.length-1,{point:S(f[0]+30,f[1]+30)}]]))}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:l}}}static deletePoints(t,n,i){let r=0,s=0;if(i.includes(0)){const l=t.points.find((c,u)=>!i.includes(u));l&&(r=l[0],s=l[1])}const a=t.points.reduce((l,c,u)=>(i.includes(u)||l.push(l.length?S(c[0]-r,c[1]-s):S(0,0)),l),[]);ve._updatePoints(t,n,a,r,s)}static addPoints(t,n,i){const o=[...t.points,...i.map(a=>a.point)];ve._updatePoints(t,n,o,0,0)}static movePoints(t,n,i,r){var d,f,h;const{points:s}=t,[o,a]=((d=i.get(0))==null?void 0:d.point)??S(0,0),[l,c]=S(o-s[0][0],a-s[0][1]),u=he(t)?[((f=i.get(0))==null?void 0:f.point)??s[0],((h=i.get(s.length-1))==null?void 0:h.point)??s[s.length-1]]:s.map((m,p)=>{var y;const U=((y=i.get(p))==null?void 0:y.point)??m;return S(U[0]-l,U[1]-c)});ve._updatePoints(t,n,u,l,c,r,{isDragging:Array.from(i.values()).some(m=>m.isDragging)})}static shouldAddMidpoint(t,n,i,r){const s=ve.getElement(t.elementId,r);if(s&&he(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=Je(S(a.x,a.y),S(n.x,n.y));return!(!i.editingLinearElement&&l<uu/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=ve.getElement(t.elementId,o);if(!a)return;const{segmentMidpoint:l}=t.pointerDownState,c={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},u=ve.createPointAt(a,o,n.x,n.y,r&&!he(a)?i.getEffectiveGridSize():null),d=[...a.points.slice(0,l.index),u,...a.points.slice(l.index)];return s.mutateElement(a,{points:d}),c.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:l.index},c.selectedPointsIndices=[l.index],c}static _updatePoints(t,n,i,r,s,o,a){if(he(t)){const l={};(o==null?void 0:o.startBinding)!==void 0&&(l.startBinding=o.startBinding!==null&&Ib(o.startBinding)?o.startBinding:null),(o==null?void 0:o.endBinding)!==void 0&&(l.endBinding=o.endBinding!==null&&Ib(o.endBinding)?o.endBinding:null),l.points=Array.from(i),n.mutateElement(t,l,{informMutation:!0,isDragging:(a==null?void 0:a.isDragging)??!1})}else{const l=KC(t,i),c=KC(t,t.points),u=(l[0]+l[2])/2,d=(l[1]+l[3])/2,f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,m=f-u,p=h-d,U=Z(S(r,s),S(m,p),t.angle);n.mutateElement(t,{...o,points:i,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,i,r,s){const o=ve.getPointGlobalCoordinates(t,i,n);if(he(t))return[r[0]-o[0],r[1]-o[1]];const[a,l]=Rn(r[0],r[1],s),{width:c,height:u}=H7(o[0],o[1],a,l);return Z(S(c,u),S(0,0),-t.angle)}static moveFixedSegment(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=ve.getElement(t.elementId,o);if(!a||!he(a))return t;if(n&&n>0&&n<a.points.length){const l=Oo(Sh(se(a.points[n],a.points[n-1]))),c=(a.fixedSegments??[]).reduce((h,m)=>(h[m.index]=m,h),{});c[n]={index:n,start:S(l?a.points[n-1][0]:i-a.x,l?r-a.y:a.points[n-1][1]),end:S(l?a.points[n][0]:i-a.x,l?r-a.y:a.points[n][1])};const u=Object.values(c).sort((h,m)=>h.index-m.index),d=u.map(h=>h.index).reduce((h,m)=>m<n?h+1:h,0);s.mutateElement(a,{fixedSegments:u});const f=S(a.x+(a.fixedSegments[d].start[0]+a.fixedSegments[d].end[0])/2,a.y+(a.fixedSegments[d].start[1]+a.fixedSegments[d].end[1])/2);return{...t,segmentMidPointHoveredCoords:f,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[d].index,value:f}}}}return t}static deleteFixedSegment(t,n,i){var r;n.mutateElement(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(s=>s.index!==i)})}};F(ve,"POINT_HANDLE_SIZE",10),F(ve,"getEditorMidPoints",(t,n,i)=>{const r=Ne(t,n);if(!he(t)&&!i.editingLinearElement&&t.points.length>2&&!r)return[];const s=ve.getPointsGlobalCoordinates(t,n);let o=0;const a=[];for(;o<s.length-1;){if(ve.isSegmentTooShort(t,t.points[o],t.points[o+1],o,i.zoom)){a.push(null),o++;continue}const l=ve.getSegmentMidPoint(t,s[o],s[o+1],o+1,n);a.push(l),o++}return a}),F(ve,"getSegmentMidpointHitCoords",(t,n,i,r)=>{const{elementId:s}=t,o=ve.getElement(s,r);if(!o)return null;const a=ve.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!he(o)&&a>=0||ve.getPointsGlobalCoordinates(o,r).length>=3&&!i.editingLinearElement&&!he(o))return null;const c=(ve.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&Je(S(u[0],u[1]),S(n.x,n.y))<=c)return u;let d=0;const f=ve.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&Je(f[d],S(n.x,n.y))<=c)return f[d];d++}return null}),F(ve,"getBoundTextElementPosition",(t,n,i)=>{const r=ve.getPointsGlobalCoordinates(t,i);r.length<2&&mi(n,i,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=ve.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1,l=ve.getSegmentMidPoint(t,r[a],r[a+1],a+1,i);s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}}),F(ve,"getMinMaxXYWithBoundText",(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=ve.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=S(c,u),U=Z(S(s,o),p,t.angle),y=Z(S(a,o),p,t.angle),E=Z(S(d,f),p,-t.angle),w=Z(S(h,f),p,-t.angle),v=Z(S(d,m),p,-t.angle),x=Z(S(h,m),p,-t.angle);return U[0]<y[0]&&U[1]>=y[1]?(s=Math.min(s,v[0]),a=Math.max(a,Math.max(w[0],x[0])),o=Math.min(o,E[1]),l=Math.max(l,x[1])):U[0]>=y[0]&&U[1]>y[1]?(s=Math.min(s,x[0]),a=Math.max(a,Math.max(E[0],w[0])),o=Math.min(o,v[1]),l=Math.max(l,w[1])):U[0]>=y[0]?(s=Math.min(s,w[0]),a=Math.max(a,v[0]),o=Math.min(o,x[1]),l=Math.max(l,E[1])):U[1]<=y[1]&&(s=Math.min(s,Math.min(w[0],E[0])),a=Math.max(a,x[0]),o=Math.min(o,w[1]),l=Math.max(l,v[1])),[s,o,a,l,c,u]}),F(ve,"getElementAbsoluteCoords",(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!$t.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((U,[y,E])=>(U.minY=Math.min(U.minY,E),U.minX=Math.min(U.minX,y),U.maxX=Math.max(U.maxX,y),U.maxY=Math.max(U.maxY,E),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=$t.generateElementShape(t,null),h=Kc(f[0]),[m,p,U,y]=v5(h);s=m+t.x,o=p+t.y,a=U+t.x,l=y+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=Ne(t,n);return d&&(r=ve.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r});let ce=ve;const jae=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null},Vs=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return lz(e);case"arrow":case"line":{const i=((n=$t.get(e))==null?void 0:n[0])??$t.generateElementShape(e,null)[0],[,,,,r,s]=Oe(e,t);return xb(e)?Sce(e,i,S(e.x,e.y),e.angle,S(r,s)):wce(i,S(e.x,e.y),e.angle,S(r,s))}case"ellipse":return vce(e);case"freedraw":{const[,,,,i,r]=Oe(e,t);return Tce(e,S(i,r),xb(e))}}},SB=(e,t)=>{const n=Ne(e,t);return n?e.type==="arrow"?Vs({...n,...ce.getBoundTextElementPosition(e,n,t)},t):Vs(n,t):null},IB=(e,t)=>{const n=$t.generateElementShape(e,null);if(!n)return null;const i=Kc(n[0]);let r=S(0,0),s=0,o=1/0,a=null;for(;s<i.length;){const{op:l,data:c}=i[s];if(l==="move"&&(Ur(Tu(c),"The returned ops is not compatible with a point"),r=c),l==="bcurveTo"){const u=r,d=S(c[0],c[1]),f=S(c[2],c[3]),h=S(c[4],c[5]),m=Je(h,t);m<o&&(o=m,a=[u,d,f,h]),r=h}s++}return a},xB=(e,t,n,i,r)=>{const s=(l,c)=>Math.pow(1-l,3)*i[c]+3*l*Math.pow(1-l,2)*n[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),o=s(r,0),a=s(r,1);return S(o,a)},Yae=(e,t)=>{const n=IB(e,t);if(!n)return[];const i=[];let r=1;for(;r>0;){const s=xB(n[0],n[1],n[2],n[3],r);i.push(S(s[0],s[1])),r-=.05}return i.length&&no(i.at(-1),t)&&i.push(S(t[0],t[1])),i},CB=(e,t)=>{const n=[];n[0]=0;const i=Yae(e,t);let r=0,s=0;for(;r<i.length-1;){const o=Je(i[r],i[r+1]);s+=o,n.push(s),r++}return n},Wae=(e,t)=>CB(e,t).at(-1),Kae=(e,t,n)=>{const i=CB(e,t),r=i.length-1,s=i.at(-1),o=n*s;let a=0,l=r,c=0;for(;a<l;)c=Math.floor(a+(l-a)/2),i[c]<o?a=c+1:l=c;return i[c]>o&&c--,i[c]===o?c/r:1-(c+(o-i[c])/(i[c+1]-i[c]))/r},xo=(e,t)=>{const n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},i=Xn(e),[r,s]=Z(S(n.minX,n.minY),i,e.angle),[o,a]=Z(S(n.maxX,n.minY),i,e.angle),[l,c]=Z(S(n.maxX,n.maxY),i,e.angle),[u,d]=Z(S(n.minX,n.maxY),i,e.angle),f=[Math.min(r,o,l,u),Math.min(s,a,c,d),Math.max(r,o,l,u),Math.max(s,a,c,d)];if(t){const[h,m,p,U]=t;return[f[0]-U,f[1]-h,f[2]+m,f[3]+p]}return f},Mh=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Ji=(e,t)=>{var n,i,r,s;if(((n=t.roundness)==null?void 0:n.type)===gn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===gn.LEGACY)return e*D8;if(((r=t.roundness)==null?void 0:r.type)===gn.ADAPTIVE_RADIUS){const o=((s=t.roundness)==null?void 0:s.value)??Xie,a=o/D8;return e<=a?e*D8:o}return 0},el=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return Je(n,i)<=e2/t}return!1},Rh=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",F7=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",BC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",zC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",B7=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",HC=e=>e==="arrow",Nb=e=>e==="arrow",Zae=e=>[8,8+e],AB=e=>[1.5,6+e];function qae(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&B7(e.type)||Ce(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const kr=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?Zae(e.strokeWidth):e.strokeStyle==="dotted"?AB(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:qae(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<JP.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Ys(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return el(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},VC=(e,t,n)=>cs(e)&&(t||dr(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Ys(e.backgroundColor)&&Ys(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Pl(e)?{...e,strokeColor:Ys(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Ys(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,$C=(e,t,n,i,r,s,o)=>{const a=WC(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,U]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,U],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=AB(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(WC(e,t,n,"crowfoot_one"),s):[]]}}},Qae=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=Ji(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,kr(VC(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,kr(VC(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=Fb(e);if(e.roundness){const m=Ji(Math.abs(o-f),e),p=Ji(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,kr(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],kr(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,kr(e));case"line":case"arrow":{let s;const o=kr(e),a=e.points.length?e.points:[S(0,0)];if(he(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(Jae(a,16),kr(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=$C(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=$C(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(lae(e),el(e.points)){const o=LF(e.points,.75);s=t.curve(o,{...kr(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Xo(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},Jae=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=xa(a,s),c=xa(o,a),u=Math.min(t,Je(e[r],o)/2,Je(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},zf=class zf{static getBounds(t,n){const i=zf.boundsCache.get(t);if(i!=null&&i.version&&i.version===t.version&&!Gt(t))return i.bounds;const r=zf.calculateBounds(t,n);return zf.boundsCache.set(t,{version:t.version,bounds:r}),r}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=Oe(t,n);if(io(t)){const[u,d,f,h]=f9(t.points.map(([m,p])=>Z(S(m,p),S(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(Ce(t))i=ale(t,l,c,n);else if(t.type==="diamond"){const[u,d]=Z(S(l,s),S(l,c),t.angle),[f,h]=Z(S(l,a),S(l,c),t.angle),[m,p]=Z(S(r,c),S(l,c),t.angle),[U,y]=Z(S(o,c),S(l,c),t.angle),E=Math.min(u,f,m,U),w=Math.min(d,h,p,y),v=Math.max(u,f,m,U),x=Math.max(d,h,p,y);i=[E,w,v,x]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=Z(S(r,s),S(l,c),t.angle),[f,h]=Z(S(r,a),S(l,c),t.angle),[m,p]=Z(S(o,a),S(l,c),t.angle),[U,y]=Z(S(o,s),S(l,c),t.angle),E=Math.min(u,f,m,U),w=Math.min(d,h,p,y),v=Math.max(u,f,m,U),x=Math.max(d,h,p,y);i=[E,w,v,x]}return i}};F(zf,"boundsCache",new WeakMap);let z7=zf;const Oe=(e,t,n=!1)=>{if(io(e))return ile(e);if(Ce(e))return ce.getElementAbsoluteCoords(e,t,n);if(ue(e)){const i=t?$n(e,t):null;if(Me(i)){const{x:r,y:s}=ce.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},Pb=(e,t)=>{const n=Vs(e,t),[i,r,s,o,a,l]=Oe(e,t),c=S(a,l);if(n.type==="polycurve"){const y=n.data.map(v=>q0(v,10)).flat();let E=0;const w=[];for(;E<y.length-1;)w.push(_e(S(y[E][0],y[E][1]),S(y[E+1][0],y[E+1][1]))),E++;return w}else{if(n.type==="polyline")return n.data;if(ele(e)){const[U,y]=Gw(e),E=y.map(v=>XC(v,c,e.angle)).flat();return[...GC(U,c,e.angle),...E]}else if(e.type==="diamond"){const[U,y]=Xw(e),E=y.map(v=>XC(v,c,e.angle)).flat();return[...GC(U,c,e.angle),...E]}else if(n.type==="polygon"){if(ue(e)){const E=$n(e,t);if(E&&Ce(E))return[_e(S(i,r),S(s,r)),_e(S(s,r),S(s,o)),_e(S(s,o),S(i,o)),_e(S(i,o),S(i,r))]}const U=n.data,y=[];for(let E=0;E<U.length-1;E++)y.push(_e(U[E],U[E+1]));return y}else if(n.type==="ellipse")return tle(e)}const[u,d,f,h,,,m,p]=[[i,r],[s,r],[i,o],[s,o],[a,r],[a,o],[i,l],[s,l]].map(U=>Z(U,c,e.angle));return[_e(u,d),_e(f,h),_e(u,f),_e(d,h),_e(u,p),_e(f,p),_e(d,m),_e(h,m)]},ele=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),GC=(e,t,n)=>e.map(i=>_e(Z(i[0],t,n),Z(i[1],t,n))),XC=(e,t,n)=>{const i=q0(e,10);let r=0;const s=[];for(;r<i.length-1;)s.push(_e(Z(S(i[r][0],i[r][1]),t,n),Z(S(i[r+1][0],i[r+1][1]),t,n))),r++;return s},tle=e=>{const t=S(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,r=[],s=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);s.push(Z(S(u,d),t,e.angle))}for(let l=0;l<s.length-1;l++)r.push(_e(s[l],s[l+1]));return r.push(_e(s[s.length-1],s[0])),r},Fb=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},jC=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},YC=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=jC(m,e,t,n,i)),p>=0&&p<=1&&(h=jC(p,e,t,n,i)),[f,h]},nle=(e,t,n,i)=>{const r=YC(e[0],t[0],n[0],i[0]),s=YC(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},v5=(e,t)=>{let n=S(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=Nw(c);Ur(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=S(c[0],c[1]),d=S(c[2],c[3]),f=S(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,U=t?t(n):n;n=f;const[y,E,w,v]=nle(U,h,m,p);a.minX=Math.min(a.minX,y),a.minY=Math.min(a.minY,E),a.maxX=Math.max(a.maxX,w),a.maxY=Math.max(a.maxY,v)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},f9=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},ile=e=>{const[t,n,i,r]=f9(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},rle=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},sle=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},WC=(e,t,n,i)=>{if(t.length<1)return null;const r=Kc(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;Ur(o.length===6,"Op data length is not 6");const a=S(o[4],o[5]),l=S(o[2],o[3]),c=S(o[0],o[1]),u=r[s-1];let d=S(0,0);if(u.op==="move"){const V=Nw(u.data);Ur(V!=null,"Op data is not a point"),d=V}else u.op==="bcurveTo"&&(d=S(u.data[4],u.data[5]));const f=(V,z)=>Math.pow(1-V,3)*a[z]+3*V*Math.pow(1-V,2)*l[z]+3*Math.pow(V,2)*(1-V)*c[z]+d[z]*Math.pow(V,3),[h,m]=n==="start"?d:a,[p,U]=[f(.3,0),f(.3,1)],y=Math.hypot(h-p,m-U),E=(h-p)/y,w=(m-U)/y,v=rle(i);let x=0;{const[V,z]=n==="end"?e.points[e.points.length-1]:e.points[0],[G,j]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];x=Math.hypot(V-G,z-j)}const _=Math.min(v,x*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-E*_,I=m-w*_;if(i==="dot"||i==="circle"||i==="circle_outline"){const V=Math.hypot(I-m,T-h)+e.strokeWidth-2;return[h,m,V]}const C=sle(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[V,z]=Z(S(h,m),S(T,I),Vu(-C)),[G,j]=Z(S(h,m),S(T,I),Vu(C));return[T,I,V,z,G,j]}const[R,N]=Z(S(T,I),S(h,m),-C*Math.PI/180),[k,$]=Z(S(T,I),S(h,m),Vu(C));if(i==="diamond"||i==="diamond_outline"){let V,z;if(n==="start"){const[G,j]=e.points.length>1?e.points[1]:[0,0];[V,z]=Z(S(h+_*2,m),S(h,m),Math.atan2(j-m,G-h))}else{const[G,j]=e.points.length>1?e.points[e.points.length-2]:[0,0];[V,z]=Z(S(h-_*2,m),S(h,m),Math.atan2(m-j,h-G))}return[h,m,R,N,V,z,k,$]}return[h,m,R,N,k,$]},ole=e=>{const t=Yc.generator(),n=kr(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},ale=(e,t,n,i)=>{var d;const r=Ne(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=Z(S(e.x+f,e.y+h),S(t,n),e.angle);let U=[m,p,m,p];if(r){const y=ce.getMinMaxXYWithBoundText(e,i,[m,p,m,p],r);U=[y[0],y[1],y[2],y[3]]}return U}const o=((d=$t.get(e))==null?void 0:d[0])??ole(e),a=Kc(o),c=v5(a,([f,h])=>Z(S(e.x+f,e.y+h),S(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const f=ce.getMinMaxXYWithBoundText(e,i,u,r);u=[f[0],f[1],f[2],f[3]]}return u},so=(e,t)=>z7.getBounds(e,t),yt=(e,t)=>{if(!EF(e))return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||we(e);return e.forEach(a=>{const[l,c,u,d]=so(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},h9=(e,t)=>{const[n,i,r,s]=yt(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},uc=(e,t,n,i)=>{if(!(Ce(e)||io(e)))return[e.x,e.y,e.x+t,e.y+n];const r=vb(0,t,vb(1,n,e.points,i),i);let s;if(io(e))s=f9(r);else{const u=Yc.generator(),d=e.roundness?u.curve(r,kr(e)):u.linearPath(r,kr(e)),f=Kc(d);s=v5(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},KC=(e,t)=>{const n=Yc.generator(),i=e.roundness==null?n.linearPath(t,kr(e)):n.curve(t,kr(e)),r=Kc(i),[s,o,a,l]=v5(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},lle=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=we(e);return e.forEach(s=>{const[o,a,l,c]=so(s,r),u=Je(S((o+l)/2,(a+c)/2),S(t.x,t.y));u<n&&(n=u,i=s)}),so(i,r)},Es=e=>{const[t,n,i,r]=yt(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},MB=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],g9=e=>S(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),cle=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},dd=e=>Ce(e)||io(e)?e.points.length<2:e.width===0&&e.height===0,Bb=(e,t,n,i,r)=>{const[s,o,a,l]=so(e,r),c=Mt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=Mt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},c2=(e,t,n,i,r,s)=>{const[o,a,l,c]=yt(e,r),u=Mt({clientX:i.offsetLeft+((s==null?void 0:s.left)||0),clientY:i.offsetTop+((s==null?void 0:s.top)||0)},i),d=Mt({clientX:i.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:i.offsetTop+n-((s==null?void 0:s.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},ZC=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/xc)*xc;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},H7=(e,t,n,i)=>{let r=n-e,s=i-t;const o=Math.round(Math.atan(s/r)/xc)*xc;if(o===0)s=0;else if(o===Math.PI/2)r=0;else{const a=Math.tan(o),l=-1,c=t-a*e,u=-1/a,d=-1,f=i-u*n,h=(l*f-d*c)/(a*d-u*l),m=(c*u-f*a)/(a*d-u*l);r=h-e,s=m-t}return{width:r,height:s}},RB=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},ule=(e,t,n)=>{const i=n.getNonDeletedElementsMap(),r=m5(e,i),s=Es(e);return r.flatMap(o=>{const a=dle(o,s,t);return o.map(l=>{const c=n.mutateElement(l,{x:l.x+a.x,y:l.y+a.y});return yr(l,n,{simultaneouslyUpdated:o}),c})})},dle=(e,t,{axis:n,position:i})=>{const r=Es(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},fle=e=>{const t=e.slice(),n=new Set,i=s=>{var c,u,d;const o=(u=(c=s[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[s[0]],l=[];for(const f of s.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{var a;if(!r.has(s.id))if((a=s.groupIds)!=null&&a.length){const l=s.groupIds[s.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&r.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},hle=e=>{const t=_re(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{var o,a;if(r)if((o=r.boundElements)!=null&&o.length)i.add(r),n[s]=null,r.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(r.type==="text"&&r.containerId){const l=t.get(r.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===r.id)||(i.add(r),n[s]=null)}else i.add(r),n[s]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},gle=e=>hle(fle(e)),mle=(e,t,n,i)=>{const r=Lc(n);return r.id=tr(),r.updated=cg(),i&&(r.seed=Yo(),Ca(r)),r.groupIds=Zoe(r.groupIds,e,s=>(t.has(s)||t.set(s,tr()),t.get(s))),r},zb=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,r=new Map,s=[],o=[],a=new Map,l=new Map,c=new Map,u=we(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(U=>[U.id,U]));if(e.type==="in-place")for(const U of Object.keys(e.appState.selectedGroupIds))t.filter(y=>{var E;return(E=y.groupIds)==null?void 0:E.includes(U)}).forEach(y=>d.set(y.id,y));t=gle(t);const f=t.slice(),h=U=>{const E=F8(U).reduce((w,v)=>{if(i.has(v.id))return w;i.set(v.id,!0);const x=mle(n.editingGroupId,r,v,e.randomizeSeed);return i.set(x.id,!0),c.set(x.id,x),a.set(v.id,x.id),l.set(x.id,v),o.push(v),s.push(x),w.push(x),w},[]);return Array.isArray(U)?E:E[0]||null},m=(U,y)=>{if(y){if(U>f.length-1){f.push(...F8(y));return}f.splice(U+1,0,...F8(y))}},p=new Set(t.filter(U=>d.has(U.id)&&Te(U)).map(U=>U.id));for(const U of t){if(i.has(U.id)||!d.has(U.id))continue;const y=qF(n,U);if(y){const E=kt(t,y).flatMap(v=>Te(v)?[...Ss(t,v.id),v]:[v]),w=bu(f,v=>{var x;return(x=v.groupIds)==null?void 0:x.includes(y)});m(w,h(E));continue}if(!(U.frameId&&p.has(U.frameId))){if(Te(U)){const E=U.id,w=Ss(t,E),v=bu(f,x=>x.frameId===E||x.id===E);m(v,h([...w,U]));continue}if(nr(U)){const E=Ne(U,u),w=bu(f,v=>v.id===U.id||"containerId"in v&&v.containerId===U.id);E?m(w,h([U,E])):m(w,h(U));continue}if(Gt(U)){const E=$n(U,u),w=bu(f,v=>v.id===U.id||v.id===(E==null?void 0:E.id));E?m(w,h([E,U])):m(w,h(U));continue}m(bu(f,E=>E.id===U.id),h(U))}}if(zae(s,a,c),Qoe(f,o,a),e.overrides)for(const U of s){const y=l.get(U.id);y&&Object.assign(U,e.overrides({duplicateElement:U,origElement:y,origIdToDuplicateId:a}))}return{duplicatedElements:s,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},V7=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=V7(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=V7(e[i],t+1);return r}return e},Lc=e=>V7(e),K={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class ple{constructor(t){F(this,"onDurableIncrementEmitter",new Fs);F(this,"onStoreIncrementEmitter",new Fs);F(this,"scheduledMacroActions",new Set);F(this,"scheduledMicroActions",[]);F(this,"_snapshot",Oa.empty());this.app=t}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}scheduleAction(t){this.scheduledMacroActions.add(t),this.satisfiesScheduledActionsInvariant()}scheduleCapture(){this.scheduleAction(K.IMMEDIATELY)}scheduleMicroAction(t){const{action:n}=t;let i;if("change"in t)i=t.change;else{const s=Oa.create(this.app.scene.getElementsMapIncludingDeleted(),this.app.state),o=s.maybeClone(n,t.elements,t.appState);i=Jf.create(s,o)}const r="delta"in t?t.delta:void 0;this.scheduledMicroActions.push(()=>this.processAction({action:n,change:i,delta:r}))}commit(t,n){this.flushMicroActions();try{const i=this.getScheduledMacroAction();this.processAction({action:i,elements:t,appState:n})}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledMacroActions=new Set}}clear(){this.snapshot=Oa.empty(),this.scheduledMacroActions=new Set}emitDurableIncrement(t,n=void 0,i=void 0){const r=this.snapshot;let s,o;if(n?s=n:s=Jf.create(r,t),i)o=i;else{const a=t.metadata.didElementsChange?kh.calculate(r.elements,t.elements):kh.empty(),l=t.metadata.didAppStateChange?Dn.calculate(r.appState,t.appState):Dn.empty();o=m9.create(a,l)}if(!o.isEmpty()){const a=new Ule(s,o);this.onDurableIncrementEmitter.trigger(a),this.onStoreIncrementEmitter.trigger(a)}}emitEphemeralIncrement(t,n=void 0){let i;if(n)i=n;else{const s=this.snapshot;i=Jf.create(s,t)}const r=new ble(i);this.onStoreIncrementEmitter.trigger(r)}applyChangeToSnapshot(t){const n=this.snapshot,i=this.snapshot.applyChange(t);return n===i?null:i}maybeCloneSnapshot(t,n,i){if(!n&&!i)return null;const r=this.snapshot,s=this.snapshot.maybeClone(t,n,i);return r===s?null:s}flushMicroActions(){for(const t of this.scheduledMicroActions)try{t()}catch(n){console.error("Failed to execute scheduled micro action",n)}this.scheduledMicroActions=[]}processAction(t){const{action:n}=t;if(n===K.EVENTUALLY&&!this.onStoreIncrementEmitter.subscribers.length)return;let i;if("change"in t?i=this.applyChangeToSnapshot(t.change):i=this.maybeCloneSnapshot(n,t.elements,t.appState),!i)return;const r="change"in t?t.change:void 0,s="delta"in t?t.delta:void 0;try{switch(n){case K.IMMEDIATELY:this.emitDurableIncrement(i,r,s);break;case K.NEVER:case K.EVENTUALLY:this.emitEphemeralIncrement(i,r);break;default:Xo(n,"Unknown store action")}}finally{switch(n){case K.IMMEDIATELY:case K.NEVER:this.snapshot=i;break}}}getScheduledMacroAction(){let t;return this.scheduledMacroActions.has(K.IMMEDIATELY)?t=K.IMMEDIATELY:this.scheduledMacroActions.has(K.NEVER)?t=K.NEVER:t=K.EVENTUALLY,t}satisfiesScheduledActionsInvariant(){if(!(this.scheduledMacroActions.size>=0&&this.scheduledMacroActions.size<=Object.keys(K).length)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledMacroActions.size}".`;console.error(t,this.scheduledMacroActions.values())}}}class Jf{constructor(t,n){this.elements=t,this.appState=n}static create(t,n){const i=n.getChangedElements(t),r=n.getChangedAppState(t);return new Jf(i,r)}}class kB{constructor(t,n){this.type=t,this.change=n}static isDurable(t){return t.type==="durable"}static isEphemeral(t){return t.type==="ephemeral"}}class Ule extends kB{constructor(t,n){super("durable",t),this.change=t,this.delta=n}}class ble extends kB{constructor(t){super("ephemeral",t),this.change=t}}class m9{constructor(t,n,i){this.id=t,this.elements=n,this.appState=i}static create(t,n,i={id:tr()}){return new this(i.id,t,n)}static restore(t){const{id:n,elements:i,appState:r}=t;return new this(n,kh.restore(i),Dn.restore(r))}static load({id:t,elements:{added:n,removed:i,updated:r}}){const s=kh.create(n,i,r,{shouldRedistribute:!1});return new this(t,s,Dn.empty())}static inverse(t){return this.create(t.elements.inverse(),t.appState.inverse())}static applyLatestChanges(t,n,i){return this.create(t.elements.applyLatestChanges(n,i),t.appState,{id:t.id})}static applyTo(t,n,i,r=Oa.empty()){const[s,o]=t.elements.applyTo(n,r.elements),[a,l]=t.appState.applyTo(i,s);return[s,a,o||l]}isEmpty(){return this.elements.isEmpty()&&this.appState.isEmpty()}}class Oa{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){F(this,"_lastChangedElementsHash",0);F(this,"_lastChangedAppStateHash",0);this.elements=t,this.appState=n,this.metadata=i}static create(t,n,i={didElementsChange:!1,didAppStateChange:!1}){return new Oa(t,qC(n)?n:Hb(n),i)}static empty(){return new Oa(new Map,yle(),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}getChangedElements(t){const n={};for(const i of Nl(t.elements))this.elements.get(i.id)||(n[i.id]=Ie(i,{isDeleted:!0}));for(const i of Nl(this.elements))t.elements.get(i.id)!==i&&(n[i.id]=i);return n}getChangedAppState(t){return ot.getRightDifferences(t.appState,this.appState).reduce((n,i)=>Object.assign(n,{[i]:this.appState[i]}),{})}isEmpty(){return this.metadata.isEmpty}applyChange(t){const n=new Map(this.elements);for(const[r,s]of Object.entries(t.elements))n.set(r,s);const i=Object.assign({},this.appState,t.appState);return Oa.create(n,i,{didElementsChange:Object.keys(t.elements).length>0,didAppStateChange:Object.keys(t.appState).length>0})}maybeClone(t,n,i){const r={shouldCompareHashes:!1};t===K.EVENTUALLY&&(r.shouldCompareHashes=!0);const s=this.maybeCreateElementsSnapshot(n,r),o=this.maybeCreateAppStateSnapshot(i,r);let a=!1,l=!1;return this.elements!==s&&(a=!0),this.appState!==o&&(l=!0),!a&&!l?this:new Oa(s,o,{didElementsChange:a,didAppStateChange:l})}maybeCreateAppStateSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.appState;const i=qC(t)?t:Hb(t);return this.detectChangedAppState(i,n)?i:this.appState}maybeCreateElementsSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.elements;const i=this.detectChangedElements(t,n);return i!=null&&i.size?this.createElementsSnapshot(i):this.elements}detectChangedAppState(t,n={shouldCompareHashes:!1}){if(this.appState===t)return;const i=ot.isRightDifferent(this.appState,t);if(!i)return;const r=T9(JSON.stringify(t));if(!(n.shouldCompareHashes&&this._lastChangedAppStateHash===r))return this._lastChangedAppStateHash=r,i}detectChangedElements(t,n={shouldCompareHashes:!1}){if(this.elements===t)return;const i=new Map;for(const s of Nl(this.elements))t.get(s.id)||i.set(s.id,Ie(s,{isDeleted:!0}));for(const s of Nl(t)){const o=this.elements.get(s.id);(!o||o.version<s.version)&&i.set(s.id,s)}if(!i.size)return;const r=sz(i);if(!(n.shouldCompareHashes&&this._lastChangedElementsHash===r))return this._lastChangedElementsHash=r,i}createElementsSnapshot(t){const n=new Map;for(const i of Nl(this.elements))n.set(i.id,i);for(const i of Nl(t))n.set(i.id,Lc(i));return n}}const LB="__observedAppState",yle=()=>({name:null,editingGroupId:null,viewBackgroundColor:He.white,selectedElementIds:{},selectedGroupIds:{},editingLinearElementId:null,selectedLinearElementId:null,croppingElementId:null,activeLockedId:null,lockedMultiSelections:{}}),Hb=e=>{var n,i;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((i=e.selectedLinearElement)==null?void 0:i.elementId)||null,croppingElementId:e.croppingElementId,activeLockedId:e.activeLockedId,lockedMultiSelections:e.lockedMultiSelections};return Reflect.defineProperty(t,LB,{value:!0,enumerable:!1}),t},qC=e=>!!Reflect.get(e,LB),DB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Nf(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Nf(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+Nf(e.slice(1),null,n)}function OB(e){if(e.length!==NB(e[0]))throw new Error("invalid integer part of order key: "+e)}function NB(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function _1(e){const t=NB(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function QC(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=_1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function JC(e,t){OB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function Ele(e,t){OB(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function Zd(e,t,n=DB){if(e!=null&&QC(e,n),t!=null&&QC(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=_1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Nf("",c,n);if(l<t)return l;const u=Ele(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=_1(e),c=e.slice(l.length),u=JC(l,n);return u??l+Nf(c,null,n)}const i=_1(e),r=e.slice(i.length),s=_1(t),o=t.slice(s.length);if(i===s)return i+Nf(r,o,n);const a=JC(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Nf(r,null,n)}function $7(e,t,n,i=DB){if(n===0)return[];if(n===1)return[Zd(e,t,i)];if(t==null){let o=Zd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Zd(o,t,i),a.push(o);return a}if(e==null){let o=Zd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Zd(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=Zd(e,t,i);return[...$7(e,s,r,i),s,...$7(s,t,n-r-1,i)]}class vle extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const p9=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(G7(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&nr(e[l])){const f=e[l],h=Ne(f,we(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new vle,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},U9=e=>e.sort((t,n)=>eA(t)&&eA(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),oo=(e,t)=>{try{const n=we(e),i=wle(e,t),r=PB(e,i),s=e.map(o=>r.has(o)?{...o,...r.get(o)}:o);p9(s,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,a]of r)mi(o,n,a)}catch{tl(e)}return e},tl=e=>{const t=we(e),n=_le(e),i=PB(e,n);for(const[r,s]of i)mi(r,t,s);return e},wle=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},_le=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{var f;const u=e[r]?e[r].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{var f;const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),G7(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(G7(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},G7=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,PB=(e,t)=>{var i,r;const n=new Map;for(const s of t){const o=s.shift(),a=s.pop(),l=$7((i=e[o])==null?void 0:i.index,(r=e[a])==null?void 0:r.index,s.length);for(let c=0;c<s.length;c++){const u=e[s[c]];n.set(u,{index:l[c]})}}return n},eA=e=>!!e.index,tA=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Tle=Do(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&p9(e,{shouldThrow:Ire(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Sle=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n};class Vb{constructor(t=null){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",jo(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",jo(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:kt(n,t)});t&&this.replaceAllElements(t)}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=Sle(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const r=ze(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&Q7(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=Sre(t),i=[];Tle(n),this.elements=tl(n),this.elementsMap.clear(),this.elements.forEach(s=>{Te(s)&&i.push(s),this.elementsMap.set(s.id,s)});const r=tA(this.elements);this.nonDeletedElements=r.elements,this.nonDeletedElementsMap=r.elementsMap,this.frames=i,this.nonDeletedFramesLikes=tA(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Yo();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];oo(i,we([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];oo(i,we(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}mutateElement(t,n,i={informMutation:!0,isDragging:!1}){const r=this.getNonDeletedElementsMap(),{version:s}=t,{version:o}=mi(t,r,n,i);return this.elementsMap.has(t.id)&&s!==o&&i.informMutation&&this.triggerUpdate(),t}}class ot{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t):t,o=i&&r!=="deleted"?i(n):n;return new ot(s,o)}static calculate(t,n,i,r){if(t===n)return ot.empty();const s={},o={};for(const c of this.distinctKeysIterator("full",t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return ot.create(a,l,i)}static empty(){return new ot({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(ot.mergeObjects(fa(t??[],r),fa(n??[],r),fa(i??[],r)))}static diffObjects(t,n,i,r){if(!t[i]&&!n[i])return;const s=t[i]!==null&&typeof t[i]=="object",o=n[i]!==null&&typeof n[i]=="object";if(s||o){const a=t[i]??{},l=n[i]??{},c=ot.getLeftDifferences(a,l).reduce((d,f)=>(d[f]=r(a[f]),d),{}),u=ot.getRightDifferences(a,l).reduce((d,f)=>(d[f]=r(l[f]),d),{});Object.keys(c).length||Object.keys(u).length?(Reflect.set(t,i,c),Reflect.set(n,i,u)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}else t[i]===n[i]&&(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=fa(ot.getLeftDifferences(fa(s,r),fa(o,r))),l=fa(ot.getRightDifferences(fa(s,r),fa(o,r)));if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i)).sort()}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i)).sort()}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):Xo(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Hi(a,l))continue;yield o}}}}class Dn{constructor(t){this.delta=t}static calculate(t,n){const i=ot.calculate(t,n,Dn.orderAppStateKeys,Dn.postProcess);return new Dn(i)}static restore(t){const{delta:n}=t;return new Dn(n)}static empty(){return new Dn(ot.create({},{}))}inverse(){const t=ot.create(this.delta.inserted,this.delta.deleted);return new Dn(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=ot.mergeObjects(t.selectedElementIds,s,i),d=ot.mergeObjects(t.selectedGroupIds,o,r),f=a&&n.has(a)?new ce(n.get(a),n):null,h=l&&n.has(l)?new ce(n.get(l),n):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return ot.isEmpty(this.delta)}filterInvisibleChanges(t,n,i){const r=Hb(t),s=Hb(n),o=ot.isRightDifferent(Dn.stripElementsProps(r),Dn.stripElementsProps(s)),a=ot.isRightDifferent(Dn.stripStandaloneProps(r),Dn.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=ot.getRightDifferences(Dn.stripStandaloneProps(r),Dn.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=Koe(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=Dn.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=Dn.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d],U=p&&i.get(p);U&&!U.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=Dn.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;case"lockedMultiSelections":{const p=t[d]||{},U=n[d]||{};Hi(p,U)||(l.value=!0);break}case"activeLockedId":{const p=t[d]||null,U=n[d]||null;p!==U&&(l.value=!0);break}default:Xo(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,lockedMultiSelections:l,activeLockedId:c,...u}=t;return u}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}static postProcess(t,n){try{ot.diffObjects(t,n,"selectedElementIds",i=>!0),ot.diffObjects(t,n,"selectedGroupIds",i=>i??!1),ot.diffObjects(t,n,"lockedMultiSelections",i=>i??{}),ot.diffObjects(t,n,"activeLockedId",i=>i??null)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}static orderAppStateKeys(t){const n={};for(const i of Object.keys(t).sort())n[i]=t[i];return n}}const At=class At{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o={},a={},l={},c=[...Object.entries(t),...Object.entries(n),...Object.entries(i)];for(const[u,d]of c)this.satisfiesAddition(d)?o[u]=d:this.satisfiesRemoval(d)?a[u]=d:l[u]=d;s=new At(o,a,l)}else s=new At(t,n,i);return s}static restore(t){const{added:n,removed:i,updated:r}=t;return At.create(n,i,r)}static validate(t,n,i){for(const[r,s]of Object.entries(t[n]))if(!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsDelta invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return At.empty();const i={},r={},s={};for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0},u=ot.create(l,c,At.stripIrrelevantProps);r[o.id]=u}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0},c={...o,isDeleted:!1},u=ot.create(l,c,At.stripIrrelevantProps);i[o.id]=u;continue}if(a.versionNonce!==o.versionNonce){const l=ot.calculate(a,o,At.stripIrrelevantProps,At.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i[o.id]=l:r[o.id]=l;continue}ot.isEmpty(l)||(s[o.id]=l)}}return At.create(i,r,s)}static empty(){return At.create({},{},{})}inverse(){const t=s=>{const o={};for(const[a,l]of Object.entries(s))o[a]=ot.create(l.inserted,l.deleted);return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return At.create(i,n,r)}isEmpty(){return Object.keys(this.added).length===0&&Object.keys(this.removed).length===0&&Object.keys(this.updated).length===0}applyLatestChanges(t,n){const i=l=>c=>{const u={};for(const d of Object.keys(c))switch(d){case"boundElements":u[d]=c[d];break;default:u[d]=l[d]}return u},r=l=>{const c={};for(const[u,d]of Object.entries(l)){const f=t.get(u);if(f){const h=ot.create(d.deleted,d.inserted,i(f),n);c[u]=h}else c[u]=d}return c},s=r(this.added),o=r(this.removed),a=r(this.updated);return At.create(s,o,a,{shouldRedistribute:!0})}applyTo(t,n){let i=new Map(t),r;const s={containsVisibleDifference:!1,containsZindexDifference:!1};try{const o=At.createApplier(i,n,s),a=o("added",this.added),l=o("removed",this.removed),c=o("updated",this.updated),u=this.resolveConflicts(t,i);r=new Map([...a,...l,...c,...u])}catch(o){return console.error("Couldn't apply elements delta",o),[t,!0]}try{i=At.reorderElements(i,r,s);const o=new Vb(i);At.redrawTextBoundingBoxes(o,r),At.redrawBoundArrows(o,r)}catch(o){console.error("Couldn't mutate elements after applying elements change",o)}finally{return[i,s.containsVisibleDifference]}}static applyDelta(t,n,i={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;const{boundElements:r,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){const l=ot.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(s,{boundElements:l})}if(t.type==="image"){const l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!i.containsVisibleDifference){const{index:l,...c}=s,u=At.checkForVisibleDifference(t,c);i.containsVisibleDifference=u}return i.containsZindexDifference||(i.containsZindexDifference=n.deleted.index!==n.inserted.index),Ie(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:ot.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,r=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Ie(d,u):f=mi(d,n,u),i.set(f.id,f),n.set(f.id,f)};for(const c of Object.keys(this.removed))At.unbindAffected(t,n,c,r);for(const c of Object.keys(this.added))At.rebindAffected(t,n,c,r);for(const[c]of Array.from(Object.entries(this.updated)).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>$ae.has(f)))){const u=n.get(c);!u||u.isDeleted||At.rebindAffected(t,n,c,r)}const s=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=At.calculate(s,i);for(const[c,u]of Object.entries(o))this.added[c]=u;for(const[c,u]of Object.entries(a))this.removed[c]=u;for(const[c,u]of Object.entries(l))this.updated[c]=u;return i}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Df.unbindAffected(n,s(),r),Df.unbindAffected(n,o(),r),Of.unbindAffected(n,s(),r),Of.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Df.unbindAffected(n,s(),r),Df.rebindAffected(n,o(),r),Of.unbindAffected(n,s(),(a,l)=>{ue(a)&&r(a,l)}),Of.rebindAffected(n,o(),r)}static redrawTextBoundingBoxes(t,n){const i=t.getNonDeletedElementsMap(),r=new Map;for(const s of n.values()){if(Gt(s)){const{containerId:o}=s,a=o?i.get(o):void 0;a&&r.set(a.id,{container:a,boundText:s})}if(nr(s)){const o=Wo(s),a=o?i.get(o):void 0;a&&r.set(s.id,{container:s,boundText:a})}}for(const{container:s,boundText:o}of r.values())s.isDeleted||o.isDeleted||$i(o,s,t)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&ro(i)&&yr(i,t,{changedElements:n})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=U9([...r]),o=ot.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),we(oo(s,o))}static postProcess(t,n){try{ot.diffArrays(t,n,"boundElements",i=>i.id)}catch{console.error("Couldn't postprocess elements delta.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,version:r,versionNonce:s,...o}=t;return o}};F(At,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(At,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(At,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(At,"createApplier",(t,n,i)=>(r,s)=>{const o=At.createGetter(r,t,n,i);return Object.entries(s).reduce((a,[l,c])=>{const u=o(l,c.inserted);if(u){const d=At.applyDelta(u,c,i);t.set(d.id,d),a.set(d.id,d)}return a},new Map)}),F(At,"createGetter",(t,n,i,r)=>(s,o)=>{let a=n.get(s);return a||(a=i.get(s),a?(r.containsZindexDifference=!0,(o.isDeleted===!1||o.isDeleted!==!0&&a.isDeleted===!1)&&(r.containsVisibleDifference=!0)):a=Ie({id:s,version:1},{...o})),a});let kh=At;const Ile=(e,t,n)=>{const[i,r,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Es(e),l=m5(e,t).map(f=>[f,Es(f)]).sort((f,h)=>f[1][r]-h[1][r]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(U=>U[1][i]===a[i]),h=l.findIndex(U=>U[1][s]===a[s]),m=(l[h][1][r]-l[f][1][r])/(l.length-1);let p=l[f][1][r];return l.flatMap(([U,y],E)=>{const w={x:0,y:0};return E!==f&&E!==h&&(p+=m,w[n.axis]=p-y[r]),U.map(v=>Ie(v,{x:v.x+w.x,y:v.y+w.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Ie(p,{x:p.x+m.x,y:p.y+m.y}))})},xle=(e,t,n,i,r,s)=>{if(t.length===1&&he(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(he(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>Te(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=Cle(yt(c),n,r,s);a.forEach(d=>{if(nA(e,d,i,u),!Me(d)){const f=Ne(d,i.getNonDeletedElementsMap());f&&nA(e,f,i,u),yr(d,i,{simultaneouslyUpdated:Array.from(a)})}})},Cle=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Rn(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},nA=(e,t,n,i)=>{const r=e.originalElements.get(t.id)??t,s=r.x+i.x,o=r.y+i.y;n.mutateElement(t,{x:s,y:o})},Ale=(e,t,n)=>{const[i,r]=yt(e);return[t-i,n-r]},iA=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,scene:d,widthAspectRatio:f=null,originOffset:h=null,informMutation:m=!0})=>{l&&e.type!=="selection"&&(f?a=o/f:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=ZC(t,a,r<n?-o:o):{width:o,height:a}=ZC(t,o,s<i?-a:a),a<0&&(a=-a)));let p=r<n?n-o:n,U=s<i?i-a:i;c&&(o+=o,a+=a,p=n-o/2,U=i-a/2);let y=null;if(ue(e)){a=e.height;const E=Ww(pt({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,E),Math.abs(r-n)>Eie/u&&(y={autoResize:!1}),U=i,c&&(p=n-o/2)}if(o!==0&&a!==0){let E=null;gt(e)&&(E={initialWidth:o,initialHeight:a}),d.mutateElement(e,{x:p+((h==null?void 0:h.x)??0),y:U+((h==null?void 0:h.y)??0),width:o,height:a,...y,...E},{informMutation:m,isDragging:!1})}},FB=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(mb,e),Gr(i.toString())}catch(i){console.error(i)}return Gr(n)},BB=(e,t)=>{if(e.length>0&&$b(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},$b=e=>!!(e.length===1||e.length>1&&Qw(e)),om=e=>{try{const t=new URL(e);return t.searchParams.has(mb)&&t.host===window.location.host}catch{return!1}},Mle=e=>{try{const{searchParams:t}=new URL(e);if(t.has(mb))return t.get(mb)}catch{}return null},ao=(e,{x:t,y:n,strokeColor:i=dn.strokeColor,backgroundColor:r=dn.backgroundColor,fillStyle:s=dn.fillStyle,strokeWidth:o=dn.strokeWidth,strokeStyle:a=dn.strokeStyle,roughness:l=dn.roughness,opacity:c=dn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:U=null,boundElements:y=null,link:E=null,locked:w=dn.locked,...v})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:v.points}),{id:v.id||tr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:U,seed:v.seed??Yo(),version:v.version||1,versionNonce:v.versionNonce??0,isDeleted:!1,boundElements:y,updated:cg(),link:E,locked:w,customData:v.customData}),Zo=e=>ao(e.type,e),rA=e=>ao("embeddable",e),Rle=e=>({...ao("iframe",e)}),b9=e=>Ie({...ao("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),X7=e=>Ie({...ao("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),zB=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Yr=e=>{const t=e.fontFamily||jc,n=e.fontSize||gl,i=e.lineHeight||Ac(t),r=xh(e.text),s=Vn(r,pt({fontFamily:t,fontSize:n}),i),o=e.textAlign||j0,a=e.verticalAlign||db,l=zB({textAlign:o,verticalAlign:a},s),c={...ao("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Ie(c,{})},kle=(e,t,n)=>{let{width:i,height:r}=Vn(n,pt(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===Fr.MIDDLE&&!e.containerId&&e.autoResize){const c=Vn(e.text,pt(e),e.lineHeight),u=zB(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Oe(e,t),[h,m,p,U]=uc(e,i,r,!1),y=(c-h)/2,E=(u-m)/2,w=(d-p)/2,v=(f-U)/2;[a,l]=Lle({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,y,E,w,v)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},Lle=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},HB=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=Wc(i,pt(e),t?Ko(t,e):e.width));const r=kle(e,n,i);return{text:i,...r}},Dle=e=>({...ao(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),dc=e=>({...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),eh=e=>e.elbowed?{...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},VB=e=>({...ao("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),po=new Map,Ole=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,Nle=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,Ple=/^https:\/\/(?:www\.)?figma\.com/,sA=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,Fle=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,Ble=/^(?:https?:\/\/)?forms\.microsoft\.com\//,oA=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,zle=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,Hle=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,Vle=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,aA=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,lA=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,$le=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,j7=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com","forms.microsoft.com"]),cA=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com","forms.microsoft.com"]),am=e=>`<html><body>${e}</body></html>`,Pf=e=>{if(!e)return null;if(po.has(e))return po.get(e);const t=e,n=cA.has(Y7(e,cA)||"");let i="generic",r={w:560,h:840};const s=e.match(Ole);if(s!=null&&s[2]){const c=s[3]?`&start=${s[3]}`:"",u=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${c}`;break}return r=u?{w:315,h:560}:{w:560,h:315},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(Nle);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(Ple))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(Hle);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),po.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(Ble.test(e)&&!e.includes("embed=true")&&(e+=e.includes("?")?"&embed=true":"?embed=true"),oA.test(e)){const c=e.match(oA)[1],u=n2(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>am(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return po.set(t,d),d}if(lA.test(e)){const[,c,u,d]=e.match(lA),f=n2(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>am(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return po.set(t,h),h}if(sA.test(e)){const[,c,u]=e.match(sA),d=n2(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>am(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return po.set(e,f),f}return po.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},$B=e=>{let t;Pl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=ct.Helvetica,r=pt({fontSize:n,fontFamily:i});return Yr({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:Wc(t,r,e.width-20),textAlign:"center",verticalAlign:Fr.MIDDLE,angle:e.angle??0})},Y7=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(j7.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return j7.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},Gle=e=>{const t=e.match(zle);if(t&&t.length===2)return t[1];const n=e.match($le);if(n&&n.length===2)return n[1];const i=e.match(Fle);if(i&&i.length===2)return i[1];if(aA.test(e))return`https://giphy.com/embed/${aA.exec(e)[1]}`;const r=e.match(Vle);return r&&r.length===2?r[1]:e},u2=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(Y7(e,n))return!0;return!1}}return!!Y7(e,j7)},th=100,Iu=100,uA=e=>{switch(e){case H.ARROW_UP:return"up";case H.ARROW_DOWN:return"down";case H.ARROW_RIGHT:return"right";case H.ARROW_LEFT:return"left";default:return"right"}},GB=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{var l;let a;if(he(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return s;Ur(ro(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=Yw(t,xo(t),[u[0]+o.x,u[1]+o.y]);s.push({relative:c,heading:d})}return s},[]);switch(i){case"up":return r.filter(s=>zn(s.heading,Gs)).map(s=>s.relative);case"down":return r.filter(s=>zn(s.heading,qi)).map(s=>s.relative);case"right":return r.filter(s=>zn(s.heading,Pn)).map(s=>s.relative);case"left":return r.filter(s=>zn(s.heading,us)).map(s=>s.relative)}},W7=(e,t,n)=>GB("successors",e,t,n),K7=(e,t,n)=>GB("predecessors",e,t,n),Xle=(e,t,n)=>{const i=Iu+e.width;if(n==="up"||n==="down"){const a=th+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(Iu+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=th+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=th+e.height,s=(t.length===0,Iu+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},jle=(e,t,n,i)=>{const r=i.getNonDeletedElementsMap(),s=W7(e,r,n),o=K7(e,r,n),a=Xle(e,[...s,...o],n),l=Zo({type:e.type,x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Ur(f5(l),"not an ExcalidrawFlowchartNodeElement");const c=XB(e,l,n,t,i);return{nextNode:l,bindingArrow:c}},Yle=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(n==="left"||n==="right"){const d=th*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=Iu+e.width;n==="left"&&(h*=-1),a=e.x+h;const m=(th+e.height)*o;l=f+m}else{const d=Iu*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=th+e.height;n==="up"&&(h*=-1),l=e.y+h;const m=(Iu+e.width)*o;a=f+m}const c=Zo({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Ur(f5(c),"not an ExcalidrawFlowchartNodeElement");const u=XB(e,c,n,t,i);s.push(c),s.push(u)}return s},XB=(e,t,n,i,r)=>{let s,o;switch(n){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(n){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=eh({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[S(0,0),S(l,c)],elbowed:!0}),d=r.getNonDeletedElementsMap();gs(u,e,"start",r),gs(u,t,"end",r);const f=new Map;f.set(e.id,e),f.set(t.id,t),f.set(u.id,u),ce.movePoints(u,r,new Map([[1,{point:u.points[1]}]]));const h=ug(u,jo(new Map([...d.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...h}};class Wle{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!ro(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...W7(t,n,i),...K7(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...W7(t,n,a),...K7(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class Kle{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,r){const s=r.getNonDeletedElementsMap();if(i!==this.direction){const{nextNode:o,bindingArrow:a}=jle(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,a]}else{this.numberOfNodes+=1;const o=Yle(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=s.get(t.frameId);Ur(o&&OF(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(a=>ip([a],o,s)||kc(a,o,s))&&(this.pendingNodes=this.pendingNodes.map(a=>mi(a,s,{frameId:t.frameId})))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const Zle=(e,t)=>{var n,i;for(const[,r]of t)if(r.type==="arrow"&&(((n=r.startBinding)==null?void 0:n.elementId)===e.id||((i=r.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},jB=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),YB=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===ye.binary)throw new Error("Only images can be added to ImageCache");const l=jB(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},WB=e=>e.filter(t=>xn(t)),qle=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",dA=e=>{const t=new DOMParser().parseFromString(e,ye.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!qle(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",rt);let r=n.getAttribute("width"),s=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(s!=null&&s.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},Qle=(e,t,n,i,r,s,o,a,l,c,u)=>{const d=i.getNonDeletedElementsMap();if(n.length===1){const[f]=n;if(t==="rotation")he(f)||(Jle(f,i,a,l,r),yr(f,i));else{if(ue(f)&&t)return ece(e,f,i,t,s,a,l),yr(f,i),!0;if(t){const h=n[0].id,m=d.get(h),p=e.get(h);if(m&&p){const{nextWidth:U,nextHeight:y}=oce(m,p,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});Km(U,y,m,p,e,i,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s})}}}return!0}else if(n.length>1){if(t==="rotation")return tce(e,n,i,a,l,r,c,u),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:U}=ace(n,e,d,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});return KB(n,d,t,i,e,{shouldResizeFromCenter:s,shouldMaintainAspectRatio:o,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:U}),!0}}return!1},Jle=(e,t,n,i,r)=>{const[s,o,a,l]=Oe(e,t.getNonDeletedElementsMap()),c=(s+a)/2,u=(o+l)/2;let d;Te(e)?d=0:(d=5*Math.PI/2+Math.atan2(i-u,n-c),r&&(d=d+xc/2,d=d-d%xc),d=pb(d));const f=Wo(e);if(t.mutateElement(e,{angle:d}),f){const h=t.getElement(f);h&&!Me(e)&&t.mutateElement(h,{angle:d})}},y9=(e,t,n,i)=>Ce(e)||io(e)?{points:vb(0,t,vb(1,n,e.points,i),i)}:{},E9=(e,t,n)=>{let i=e.width;if(Gt(e)){const o=$n(e,t);o&&(i=Ko(o,e))}const s=e.fontSize*(n/i);return s<Aw?null:{size:s}},ece=(e,t,n,i,r,s,o)=>{const a=n.getNonDeletedElementsMap(),[l,c,u,d,f,h]=Oe(t,a),[m,p]=Z(S(s,o),S(f,h),-t.angle);let U=0,y=0;i!=="e"&&i!=="w"&&(i.includes("e")&&(U=(m-l)/(u-l)),i.includes("w")&&(U=(u-m)/(u-l)),i.includes("n")&&(y=(d-p)/(d-c)),i.includes("s")&&(y=(p-c)/(d-c)));const E=Math.max(U,y);if(E>0){const w=t.width*E,v=t.height*E,x=E9(t,a,w);if(x===null)return;const M=[l,c],_=[u,d],T=[f,h];let I=S(l,c);if(["n","w","nw"].includes(i)&&(I=S(_[0]-Math.abs(w),_[1]-Math.abs(v))),i==="ne"){const z=[M[0],_[1]];I=S(z[0],z[1]-Math.abs(v))}if(i==="sw"){const z=[_[0],M[1]];I=S(z[0]-Math.abs(w),z[1])}["s","n"].includes(i)&&(I[0]=T[0]-w/2),["e","w"].includes(i)&&(I[1]=T[1]-v/2),r&&(I[0]=T[0]-Math.abs(w)/2,I[1]=T[1]-Math.abs(v)/2);const C=t.angle,R=Z(I,S(f,h),C),N=S(I[0]+Math.abs(w)/2,I[1]+Math.abs(v)/2),k=Z(N,S(f,h),C);I=Z(R,k,-C);const[$,V]=I;n.mutateElement(t,{fontSize:x.size,width:w,height:v,x:$,y:V})}if(i==="e"||i==="w"){const w=e.get(t.id),[v,x,M,_]=uc(w,w.width,w.height,!0),T=S(v,x),I=S(M,_),C=l5(T,I),R=Z(S(s,o),C,-w.angle),[N,,k]=uc(t,t.width,t.height,!0),$=k-N,V=I[0]-T[0],z=Ww(pt({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight);let G=V/$;i.includes("e")&&(G=(R[0]-T[0])/$),i.includes("w")&&(G=(I[0]-R[0])/$);const j=t.width*G<z?z:t.width*G,X=Wc(t.originalText,pt(t),Math.abs(j)),q=Vn(X,pt(t),t.lineHeight),fe=q.height,[ie,Ue,Ve,$e]=uc(w,j,fe,!0),nt=Ve-ie,zt=$e-Ue;let Ct=[...T];["n","w","nw"].includes(i)&&(Ct=[I[0]-Math.abs(nt),T[1]]);const Zt=w.angle,xe=Z(Ct,C,Zt),Ge=S(Ct[0]+Math.abs(nt)/2,Ct[1]+Math.abs(zt)/2),qt=Z(Ge,C,Zt);Ct=Z(xe,qt,-Zt);const ar={width:Math.abs(j),height:Math.abs(q.height),x:Ct[0],y:Ct[1],text:X,autoResize:!1};n.mutateElement(t,ar)}},tce=(e,t,n,i,r,s,o,a)=>{var u;const l=n.getNonDeletedElementsMap();let c=5*Math.PI/2+Math.atan2(r-a,i-o);s&&(c+=xc/2,c-=c%xc);for(const d of t)if(!Te(d)){const[f,h,m,p]=Oe(d,l),U=(f+m)/2,y=(h+p)/2,E=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[w,v]=Z(S(U,y),S(o,a),c+E-d.angle),x=he(d)?{points:Xae(d,l)}:{x:d.x+(w-U),y:d.y+(v-y),angle:pb(c+E)};n.mutateElement(d,x),yr(d,n,{simultaneouslyUpdated:t});const M=Ne(d,l);M&&!Me(d)&&n.mutateElement(M,{x:M.x+(w-U),y:M.y+(v-y),angle:pb(c+E)})}n.triggerUpdate()},nce=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?Oe(t[0],n):yt(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=Z(S(i,r),S(c,u),-d),e){case"n":return Z(S(i-(s+a)/2,r-o),S(0,0),d);case"s":return Z(S(i-(s+a)/2,r-l),S(0,0),d);case"w":return Z(S(i-s,r-(o+l)/2),S(0,0),d);case"e":return Z(S(i-a,r-(o+l)/2),S(0,0),d);case"nw":return Z(S(i-s,r-o),S(0,0),d);case"ne":return Z(S(i-a,r-o),S(0,0),d);case"sw":return Z(S(i-s,r-l),S(0,0),d);case"se":return Z(S(i-a,r-l),S(0,0),d);default:return[0,0]}},ice=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},rce=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},sce=(e,t,n,i,r,s,o,a,l)=>{const c=rce(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},Km=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let u={};const d=s.getNonDeletedElementsMap(),f=Ne(n,d);if(f){const U=r.get(f.id);if(U&&(u={fontSize:U.fontSize}),l){const y={...n,width:e},E=E9(f,d,Ko(y,f));if(E===null)return;u={fontSize:E.size}}else{const y=jF(pt(f),f.lineHeight),E=YF(f.fontSize,f.lineHeight);e=Math.max(e,y),t=Math.max(t,E)}}const h=y9(i,e,t,!0);let m=S(i.x,i.y);if(Ce(i)){const[U,y]=so(i,r);m=S(U,y)}const p=sce(m,i.width,i.height,e,t,i.angle,o,l,c);if(Ce(i)&&h.points){const U=i.x-m[0],y=i.y-m[1];p.x+=U,p.y+=y;const E=h.points[0][0],w=h.points[0][1];p.x+=E,p.y+=w,h.points=h.points.map(v=>S(v[0]-E,v[1]-w))}if(e<0&&(p.x=p.x+e),t<0&&(p.y=p.y+t),"scale"in n&&"scale"in i&&s.mutateElement(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),Me(n)&&f&&l){const U=e/n.width*f.fontSize;if(U<Aw)return;u.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(p.x)&&Number.isFinite(p.y)){const U={...p,width:Math.abs(e),height:Math.abs(t),...h};s.mutateElement(n,U,{informMutation:a,isDragging:!1}),f&&u!=null&&s.mutateElement(f,{fontSize:u.fontSize}),ep(n,s,o,l),yr(n,s,{newSize:{width:e,height:t}})}},oce=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1}={})=>{const[a,l,c,u]=uc(t,t.width,t.height,!0),d=S(a,l),f=S(c,u),h=l5(d,f),m=Z(S(i,r),h,-t.angle),[p,U,y,E]=uc(e,e.width,e.height,!0),w=y-p,v=E-U,x=f[0]-d[0],M=f[1]-d[1];let _=x/w,T=M/v;n.includes("e")&&(_=(m[0]-d[0])/w),n.includes("s")&&(T=(m[1]-d[1])/v),n.includes("w")&&(_=(f[0]-m[0])/w),n.includes("n")&&(T=(f[1]-m[1])/v);let I=e.width*_,C=e.height*T;if(o&&(I=2*I-t.width,C=2*C-t.height),s){const R=Math.abs(I)/t.width,N=Math.abs(C)/t.height;if(n.length===1&&(C*=R,I*=N),n.length===2){const k=Math.max(R,N);I=t.width*k*Math.sign(I),C=t.height*k*Math.sign(C)}}return{nextWidth:I,nextHeight:C}},ace=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(k=>t.get(k.id)),c=l.reduce((k,$)=>{if(!Ce($))return k;const V=Wo($);if(!V)return k;const z=t.get(V)??null;return Gt(z)?[...k,{...z,...ce.getBoundTextElementPosition($,z,n)}]:k},[]),u=Es(l.map(k=>k).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:U}=u,y=h-d,E=m-f,w={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+E/2],w:[h,f+E/2],n:[d+y/2,m],s:[d+y/2,f]},[v,x]=a?[p,U]:w[i],M=a?2:1,_=Math.max(Math.abs(r-v)/y||0,Math.abs(s-x)/E||0)*M;let T=i.includes("e")||i.includes("w")?Math.abs(r-v)*M:y,I=i.includes("n")||i.includes("s")?Math.abs(s-x)*M:E;o&&(T=y*_*Math.sign(r-v),I=E*_*Math.sign(s-x));const C={ne:[r<v,s>x],se:[r<v,s<x],sw:[r>v,s<x],nw:[r>v,s>x],e:[r<v,!1],w:[r>v,!1],n:[!1,s>x],s:[!1,s<x]},[R,N]=C[i].map(k=>k);return{originalBoundingBox:u,nextWidth:T,nextHeight:I,flipByX:R,flipByY:N}},KB=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((M,_)=>{const T=r.get(_.id);return T&&M.push({orig:T,latest:_}),M},[]);let h;if(d)h=d;else{const M=f.reduce((_,{orig:T})=>{if(!Ce(T))return _;const I=Wo(T);if(!I)return _;const C=r.get(I)??null;return Gt(C)?[..._,{...C,...ce.getBoundTextElementPosition(T,C,t)}]:_},[]);h=Es(f.map(({orig:_})=>_).concat(M))}const{minX:m,minY:p,maxX:U,maxY:y,midX:E,midY:w}=h,v=U-m,x=y-p;if(u===void 0&&c===void 0&&(u=v,c=x),s&&(u===void 0?u=c*(v/x):c===void 0?c=u*(x/v):Math.abs(u/c-v/x)>.001&&(u=c*(v/x))),u&&c){let M=n.includes("e")||n.includes("w")?Math.abs(u)/v:1,_=n.includes("n")||n.includes("s")?Math.abs(c)/x:1,T;n.length===1?T=n.includes("e")||n.includes("w")?M:_:T=Math.max(Math.abs(u)/v||0,Math.abs(c)/x||0);const I={ne:[m,y],se:[m,p],sw:[U,p],nw:[U,y],e:[m,p+x/2],w:[U,p+x/2],n:[m+v/2,y],s:[m+v/2,p]},[C,R]=o?[E,w]:I[n],N=s||f.some(G=>G.latest.angle!==0||ue(G.latest)||Ch(G.latest));N&&(M=T,_=T);const[k,$]=[a?-1:1,l?-1:1],V=[];for(const{orig:G,latest:j}of f){if(ue(G)&&Gt(G))continue;const X=G.width*M,q=G.height*_,fe=pb(G.angle*k*$),ie=Ce(G)||io(G),Ue=G.x-C,Ve=G.y-R,$e=a&&!ie?X:0,nt=l&&!ie?q:0,zt=C+k*(Ue*M+$e),Ct=R+$*(Ve*_+nt),Zt=y9(G,X*k,q*$,!1),xe={x:zt,y:Ct,width:X,height:q,angle:fe,...Zt};if(he(G)&&(G.startBinding&&(xe.startBinding={...G.startBinding,fixedPoint:[a?-G.startBinding.fixedPoint[0]+1:G.startBinding.fixedPoint[0],l?-G.startBinding.fixedPoint[1]+1:G.startBinding.fixedPoint[1]]}),G.endBinding&&(xe.endBinding={...G.endBinding,fixedPoint:[a?-G.endBinding.fixedPoint[0]+1:G.endBinding.fixedPoint[0],l?-G.endBinding.fixedPoint[1]+1:G.endBinding.fixedPoint[1]]}),G.fixedSegments&&Zt.points&&(xe.fixedSegments=G.fixedSegments.map(qt=>({...qt,start:Zt.points[qt.index-1],end:Zt.points[qt.index]})))),gt(G)&&(xe.scale=[G.scale[0]*k,G.scale[1]*$]),ue(G)){const qt=E9(G,t,X);if(!qt)return;xe.fontSize=qt.size}const Ge=r.get(Wo(G)??"");if(Ge)if(N){const qt=Ge.fontSize*T;if(qt<Aw)return;xe.boundTextFontSize=qt}else xe.boundTextFontSize=Ge.fontSize;V.push({element:j,update:xe})}const z=V.map(({element:G})=>G);for(const{element:G,update:{boundTextFontSize:j,...X}}of V){const{width:q,height:fe,angle:ie}=X;i.mutateElement(G,X,{informMutation:!0,isDragging:!0}),yr(G,i,{simultaneouslyUpdated:z,newSize:{width:q,height:fe}});const Ue=Ne(G,t);Ue&&j&&(i.mutateElement(Ue,{fontSize:j,angle:Ce(G)?void 0:ie}),ep(G,i,n,!0))}i.triggerUpdate()}},fA={mouse:8,pen:16,touch:28},lce=16,ZB={e:!0,s:!0,n:!0,w:!0},hA={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},Z8={e:!0,s:!0,n:!0,w:!0},ha=(e,t,n,i,r,s,o)=>{const[a,l]=Z(S(e+n/2,t+i/2),S(r,s),o);return[a-n/2,l-i/2,n,i]},v9=e=>!(e.viewport.isMobile||e.isTouchScreen&&(pie||YP)),lm=e=>v9(e)?ZB:{},w9=([e,t,n,i,r,s],o,a,l,c={},u=4,d=sd)=>{const f=fA[l],h=f/a.value,m=f/a.value,p=f/a.value,U=f/a.value,y=n-e,E=i-t,w=u/a.value,v=(f-d*2)/(2*a.value),x={nw:c.nw?void 0:ha(e-w-p+v,t-w-U+v,h,m,r,s,o),ne:c.ne?void 0:ha(n+w-v,t-w-U+v,h,m,r,s,o),sw:c.sw?void 0:ha(e-w-p+v,i+w-v,h,m,r,s,o),se:c.se?void 0:ha(n+w-v,i+w-v,h,m,r,s,o),rotation:c.rotation?void 0:ha(e+y/2-h/2,t-w-U+v-lce/a.value,h,m,r,s,o)},M=5*fA.mouse/a.value;return Math.abs(y)>M&&(c.n||(x.n=ha(e+y/2-h/2,t-w-U+v,h,m,r,s,o)),c.s||(x.s=ha(e+y/2-h/2,i+w-v,h,m,r,s,o))),Math.abs(E)>M&&(c.w||(x.w=ha(e-w-p+v,t+E/2-m/2,h,m,r,s,o)),c.e||(x.e=ha(n+w-v,t+E/2-m/2,h,m,r,s,o))),x},qB=(e,t,n,i="mouse",r=ZB)=>{if(e.locked||he(e))return{};if(e.type==="freedraw"||Ce(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=Z8:o[0]>0&&o[1]<0?r=hA:o[0]>0&&o[1]>0?r=Z8:o[0]<0&&o[1]>0?r=hA:o[0]<0&&o[1]<0&&(r=Z8)}}else Te(e)&&(r={...r,rotation:!0});const s=Ce(e)?sd+8:gt(e)?0:sd;return w9(Oe(e,n,!0),e.angle,t,i,r,s,gt(e)?0:void 0)},QB=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return he(n)?!1:Ce(n)?n.points.length>2:!0},Z7=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],cce=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=qB(e,s,t,o,lm(a));if(l&&Z7(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?Z7(f,i,r):!1});if(u.length>0)return u[0];if(v9(a)){const[d,f,h,m,p,U]=Oe(e,t);if(!(Ce(e)&&e.points.length<=2)){const y=gt(e)?0:fb/s.value,E=fb/s.value,w=JB(S(d-y,f-y),S(h+y,m+y),S(p,U),e.angle);for(const[v,x]of Object.entries(w))if(od(S(i,r),x,E))return v}}return!1},gA=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=cce(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),mA=([e,t,n,i],r,s,o,a,l)=>{const c=w9([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,lm(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&Z7(f,r,s)});if(u)return u;if(v9(l)){const d=(e+n)/2,f=(t+i)/2,h=fb/o.value,m=JB(S(e-h,t-h),S(n+h,i+h),S(d,f),0);for(const[p,U]of Object.entries(m))if(od(S(r,s),U,h))return p}return!1},q8=["ns","nesw","ew","nwse"],uce=(e,t)=>{const n=q8.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=q8[(n+i)%q8.length]}return e},pA=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=uce(r,t.angle)),r?`${r}-resize`:""},JB=([e,t],[n,i],r,s)=>{const o=Z(S(e,t),r,s),a=Z(S(n,t),r,s),l=Z(S(e,i),r,s),c=Z(S(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},_9=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||ze(t,e).length))},q7=(e,t)=>e.frameId===t||e.id===t,ez=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=we(n||ze(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},dce=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},UA=(e,t,n,i)=>{var r,s;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(s=(r=e.boundElements)==null?void 0:r.find(a=>a.type!=="arrow"))==null?void 0:s.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},fce=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{q7(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},hce=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?bu(t,f=>a(f),Math.max(0,n-1)):gF(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return UA(c,t,i,s)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!r&&(c.frameId||Te(c))){const f=fce(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return UA(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=kt(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},tz=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),nz=(e,t,n,i)=>{const r=ez(e,t),s=tz(e,r);let o=dce(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>Te(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var w;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(v=>{const x=e[v];return x.frameId&&a.has(x.frameId)})?null:(w=e[f])==null?void 0:w.frameId,m=hce(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),U=e.slice(u,d+1),y=n==="left"?e.slice(m,u):e.slice(d+1,m+1),E=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...U,...y,...E]:[...p,...y,...U,...E]}),oo(e,s),e},iz=(e,t,n,i,r)=>{const s=ez(e,t,r),o=tz(e,s),a=[];let l,c;if(n==="left"){if(i)l=gF(e,m=>q7(m,i));else if(t.editingGroupId){const m=kt(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=bu(e,m=>q7(m,i));else if(t.editingGroupId){const m=kt(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return oo(h,o),h};function rz(e,t,n,i){const r=we(ze(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&Te(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(Te(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const gce=(e,t,n)=>nz(e,t,"left",n),mce=(e,t,n)=>nz(e,t,"right",n),pce=(e,t)=>rz(e,t,"left",iz),Uce=(e,t)=>rz(e,t,"right",iz),Gl=e=>e.reduce((t,n)=>t+n.version,0),sz=e=>{let t=5381;for(const n of Nl(e))t=(t<<5)+t+n.versionNonce;return t>>>0},T9=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},bce=e=>e.filter(t=>!t.isDeleted&&!dd(t)),Bt=e=>e.filter(t=>!t.isDeleted),Q7=e=>!e.isDeleted,S9=e=>Bt(e).map(t=>$w(t.type)?{...t,lastCommittedPoint:null}:t),yce=e=>S9(e),oz=e=>S9(e),az=e=>S9(e),lz=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=S(o,a);let c;return e.type==="diamond"?c=iC(Z(S(o,s),l,t),Z(S(r+n,a),l,t),Z(S(o,s+i),l,t),Z(S(r,a),l,t)):c=iC(Z(S(r,s),l,t),Z(S(r+n,s),l,t),Z(S(r+n,s+i),l,t),Z(S(r,s+i),l,t)),{type:"polygon",data:c}},Ece=(e,t,n=10)=>{let[i,r,s,o,a,l]=Oe(e,t,!0);i-=n,s+=n,r-=n,o+=n;const c=S(a,l),u=Z(S(i,r),c,e.angle),d=Z(S(s,r),c,e.angle),f=Z(S(i,o),c,e.angle),h=Z(S(s,o),c,e.angle);return{type:"polygon",data:[u,d,h,f]}},vce=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:S(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},Kc=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},wce=(e,t=S(0,0),n,i)=>{const r=l=>Z(S(l[0]+t[0],l[1]+t[1]),i,n),s=Kc(e),o=[];let a=S(0,0);for(const l of s){if(l.op==="move"){const c=Nw(l.data);Ur(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(S(l.data[0],l.data[1])),u=r(S(l.data[2],l.data[3])),d=r(S(l.data[4],l.data[5]));o.push(Lo(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},_ce=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(_e(t,r)),t=r}return n},Tce=(e,t,n=!1)=>{const i=s=>Z(Re(Kl(se(s),Nn(e.x,e.y))),t,e.angle),r=_ce(e.points.map(s=>i(s)));return n?{type:"polygon",data:Gm(r.flat())}:{type:"polyline",data:r}},Sce=(e,t,n=S(0,0),i,r)=>{const s=u=>Z(S(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:Gm(e.points.map(u=>s(u)))};const o=Kc(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(S(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(S(u.data[0],u.data[1])),a.push(S(u.data[2],u.data[3])),a.push(S(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(S(u.data[0],u.data[1]));const c=q0(a,10,5).map(u=>s(u));return{type:"polygon",data:Gm(c)}},Ice=(e,t)=>{const{angle:n,halfWidth:i,halfHeight:r,center:s}=t,o=i,a=r,l=Kl(se(e),xt(se(s),-1)),[c,u]=Z(Re(l),S(0,0),-n),d=Math.abs(c),f=Math.abs(u);let h=.707,m=.707;for(let y=0;y<3;y++){const E=o*h,w=a*m,v=(o*o-a*a)*h**3/o,x=(a*a-o*o)*m**3/a,M=E-v,_=w-x,T=d-v,I=f-x,C=Math.hypot(_,M),R=Math.hypot(I,T);h=Math.min(1,Math.max(0,(T*C/R+v)/o)),m=Math.min(1,Math.max(0,(I*C/R+x)/a));const N=Math.hypot(m,h);h/=N,m/=N}const[p,U]=[o*h*Math.sign(c),a*m*Math.sign(u)];return Je(S(c,u),S(p,U))},xce=(e,t,n=Mc)=>Ice(e,t)<=n,Cce=(e,t)=>{const{center:n,angle:i,halfWidth:r,halfHeight:s}=t,o=Kl(se(e),xt(se(n),-1)),[a,l]=Z(Re(o),S(0,0),-i);return a/r*(a/r)+l/s*(l/s)<=1},J7=(e,t,n=0)=>{switch(t.type){case"polygon":return lre(e,t.data,n);case"ellipse":return xce(e,t.data,n);case"line":return od(e,t.data,n);case"polyline":return uz(e,t.data,n);case"curve":return cz(e,t.data,n);case"polycurve":return Ace(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},Zm=(e,t)=>{switch(t.type){case"polygon":return rC(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return Cce(e,t.data);case"polyline":{const n=Gm(t.data.flat());return rC(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},Ace=(e,t,n)=>t.some(i=>cz(e,i,n)),Mce=e=>{const[t,n,i,r]=e;return(s,o)=>Math.pow(1-s,3)*r[o]+3*s*Math.pow(1-s,2)*i[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},Rce=(e,t=10)=>{const n=Mce(e);let i=[n(0,0),n(0,1)];const r=[];let s=0;const o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){const l=S(n(s,0),n(s,1));r.push(_e(i,l)),i=l}return r},cz=(e,t,n)=>uz(e,Rce(t),n),uz=(e,t,n=1e-4)=>t.some(i=>od(e,i,n)),kce=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var nl={};let Lce=0;function Kt(e,t){const n=`atom${++Lce}`,i={toString(){return(nl?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Dce,i.write=Oce),i}function Dce(e){return e(this)}function Oce(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const bA=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,e4=e=>"init"in e,Q8=e=>!!e.write,Gb=new WeakMap,t4=e=>{var t;return n4(e)&&!((t=Gb.get(e))!=null&&t[1])},Nce=(e,t)=>{const n=Gb.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((nl?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Pce=e=>{if(Gb.has(e))return;const t=[new Set,!1];Gb.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},n4=e=>typeof(e==null?void 0:e.then)=="function",yA=e=>"v"in e||"e"in e,hU=e=>{if("e"in e)throw e.e;if((nl?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},dz=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},EA=(e,t,n,i,r)=>{var s;if((nl?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),t4(n.v)&&dz(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&Fce(e,i,t)},Qg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),cm=(e,t,n)=>{e[t].add(n)},vA=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),cm(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>cm(e,"M",r))}))},Fce=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Bce=(e,t)=>e.D.get(t),su=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},fz=(...[e,t,n,i])=>{const r=(y,E,w)=>{const v="v"in E,x=E.v,M=t4(E.v)?E.v:null;if(n4(w)){Pce(w);for(const _ of E.d.keys())dz(y,w,e(_));E.v=w}else E.v=w;delete E.e,delete E.x,(!v||!Object.is(x,E.v))&&(++E.n,M&&Nce(M,w))},s=(y,E)=>{var w;const v=e(E);if(yA(v)&&(v.m&&!v.x||Array.from(v.d).every(([C,R])=>s(y,C).n===R)))return v;v.d.clear();let x=!0;const M=C=>{if(bA(E,C)){const N=e(C);if(!yA(N))if(e4(C))r(C,N,C.init);else throw new Error("no atom init");return hU(N)}const R=s(y,C);try{return hU(R)}finally{if(x)EA(y,E,v,C,R);else{const N=Qg();EA(N,E,v,C,R),d(N,E,v),su(N)}}};let _,T;const I={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(nl?"production":void 0)!=="production"&&!Q8(E)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&Q8(E)&&(T=(...C)=>{if((nl?"production":void 0)!=="production"&&x&&console.warn("setSelf function cannot be called in sync"),!x)return u(E,...C)}),T}};try{const C=t(E,M,I);if(r(E,v,C),n4(C)){(w=C.onCancel)==null||w.call(C,()=>_==null?void 0:_.abort());const R=()=>{if(v.m){const N=Qg();d(N,E,v),su(N)}};C.then(R,R)}return v}catch(C){return delete v.v,v.e=C,delete v.x,++v.n,v}finally{x=!1}},o=y=>hU(s(void 0,y)),a=(y,E,w)=>{var v,x;const M=new Map;for(const _ of((v=w.m)==null?void 0:v.t)||[]){const T=e(_);T.m&&M.set(_,T)}for(const _ of w.p)M.set(_,e(_));return(x=Bce(y,E))==null||x.forEach(_=>{M.set(_,e(_))}),M},l=(y,E,w)=>{const v=[],x=new Set,M=new Set,_=[[E,w]];for(;_.length>0;){const[T,I]=_[_.length-1];if(M.has(T)){_.pop();continue}if(x.has(T)){v.push([T,I,I.n]),M.add(T),I.x=!0,_.pop();continue}x.add(T);for(const[C,R]of a(y,T,I))T!==C&&!x.has(C)&&_.push([C,R])}cm(y,"H",()=>{const T=new Set([E]);for(let I=v.length-1;I>=0;--I){const[C,R,N]=v[I];let k=!1;for(const $ of R.d.keys())if($!==C&&T.has($)){k=!0;break}k&&(s(y,C),d(y,C,R),N!==R.n&&(vA(y,C,R),T.add(C))),delete R.x}})},c=(y,E,...w)=>{let v=!0;const x=_=>hU(s(y,_)),M=(_,...T)=>{const I=e(_);try{if(bA(E,_)){if(!e4(_))throw new Error("atom not writable");const C=I.n,R=T[0];r(_,I,R),d(y,_,I),C!==I.n&&(vA(y,_,I),l(y,_,I));return}else return c(y,_,...T)}finally{v||su(y)}};try{return n(E,x,M,...w)}finally{v=!1}},u=(y,...E)=>{const w=Qg();try{return c(w,y,...E)}finally{su(w)}},d=(y,E,w)=>{if(w.m&&!t4(w.v)){for(const v of w.d.keys())w.m.d.has(v)||(f(y,v,e(v)).t.add(E),w.m.d.add(v));for(const v of w.m.d||[])if(!w.d.has(v)){w.m.d.delete(v);const x=h(y,v,e(v));x==null||x.t.delete(E)}}},f=(y,E,w)=>{if(!w.m){s(y,E);for(const v of w.d.keys())f(y,v,e(v)).t.add(E);if(w.m={l:new Set,d:new Set(w.d.keys()),t:new Set},Q8(E)){const v=w.m;let x;const M=(_,T)=>{let I=!0;x=(...C)=>{try{return c(_,E,...C)}finally{I||su(_)}};try{return T()}finally{I=!1}};cm(y,"L",()=>{const _=M(y,()=>i(E,(...T)=>x(...T)));_&&(v.u=T=>M(T,_))})}}return w.m},h=(y,E,w)=>{if(w.m&&!w.m.l.size&&!Array.from(w.m.t).some(v=>{var x;return(x=e(v).m)==null?void 0:x.d.has(E)})){const v=w.m.u;v&&cm(y,"L",()=>v(y)),delete w.m;for(const x of w.d.keys()){const M=h(y,x,e(x));M==null||M.t.delete(E)}return}return w.m};return{get:o,set:u,sub:(y,E)=>{const w=Qg(),v=e(y),M=f(w,y,v).l;return M.add(E),su(w),()=>{M.delete(E);const _=Qg();h(_,y,v),su(_)}},unstable_derive:y=>fz(...y(e,t,n,i))}},zce=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,U,y){return U==="m"&&n.add(f),Reflect.set(p,U,y)},deleteProperty(p,U){return U==="m"&&n.delete(f),Reflect.deleteProperty(p,U)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)e4(f)&&d(f,h)}finally{--r}}})}})},rp=()=>{const e=new WeakMap,n=fz(i=>{if((nl?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(nl?"production":void 0)!=="production"?zce(n):n};let Jg;const Hce=()=>(Jg||(Jg=rp(),(nl?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Jg),globalThis.__JOTAI_DEFAULT_STORE__!==Jg&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Jg);var hz={};const gz=D.createContext(void 0),w5=e=>{const t=D.useContext(gz);return(e==null?void 0:e.store)||t||Hce()},Vce=({children:e,store:t})=>{const n=D.useRef(void 0);return!t&&!n.current&&(n.current=rp()),D.createElement(gz.Provider,{value:t||n.current},e)},i4=e=>typeof(e==null?void 0:e.then)=="function",mz=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},$ce=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(mz(e),e)}),J8=new WeakMap,wA=e=>{let t=J8.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((hz?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");i4(c)?(J8.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),J8.set(e,t)),t};function _5(e,t){const n=w5(t),[[i,r,s],o]=D.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(D.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);i4(u)&&mz(wA(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),D.useDebugValue(a),i4(a)){const c=wA(a);return $ce(c)}return a}function I9(e,t){const n=w5(t);return D.useCallback((...r)=>{if((hz?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function Lh(e,t){return[_5(e,t),I9(e,t)]}const _A=new WeakMap;function Gce(e,t){const n=w5(t),i=Xce(n);for(const[r,s]of e)(!i.has(r)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const Xce=e=>{let t=_A.get(e);return t||(t=new WeakSet,_A.set(e,t)),t};function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ff.apply(this,arguments)}function pz(){const e=D.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=D.useRef(o);return c.current||(c.current=rp()),Gce(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=D.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return w5(Ff({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return Lh(o,Ff({store:l},a))},useAtomValue:(o,a)=>{const l=n();return _5(o,Ff({store:l},a))},useSetAtom:(o,a)=>{const l=n();return I9(o,Ff({store:l},a))}}}const{read:wxe,write:_xe}=Kt(null);D.createContext({scope:void 0,baseStore:void 0});const Uz=pz(),{useAtom:mn,useSetAtom:T5,useAtomValue:bz,useStore:Txe}=Uz,jce=Uz.Provider,Or=rp(),yz={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame",tab:"Tab",shapeSwitch:"Switch shape"},Ez={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},vz={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},wz={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas...",frames:"Frames",texts:"Texts"},_z={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},Tz={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Sz={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Iz={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw",convertElementType:"Toggle shape type"},xz={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},Cz={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},Az={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},Mz={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},Rz={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},kz={or:"Or"},Lz={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},Dz={title:"Error"},Oz={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Nz={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},Pz={title:"Clear canvas"},Fz={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},Bz={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},zz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},Hz={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},Vz={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},$z={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},Gz={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},Xz={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},jz={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},Yz={color:"Color",mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},Wz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},Kz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},Zz={placeholder:"Quick search"},qz={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},Qz={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},Jz={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},x9={labels:yz,elementLink:Ez,library:vz,search:wz,buttons:_z,alerts:Tz,errors:Sz,toolBar:Iz,element:xz,headings:Cz,hints:Az,canvasError:Mz,errorSplash:Rz,shareDialog:kz,roomDialog:Lz,errorDialog:Dz,exportDialog:Oz,helpDialog:Nz,clearCanvasDialog:Pz,publishDialog:Fz,publishSuccessDialog:Bz,confirmDialog:zz,imageExportDialog:Hz,encrypted:Vz,stats:$z,toast:Gz,colors:Xz,welcomeScreen:jz,colorPicker:Yz,overwriteConfirm:Wz,mermaid:Kz,quickSearch:Zz,fontList:qz,userList:Qz,commandPalette:Jz},Yce=Object.freeze(Object.defineProperty({__proto__:null,alerts:Tz,buttons:_z,canvasError:Mz,clearCanvasDialog:Pz,colorPicker:Yz,colors:Xz,commandPalette:Jz,confirmDialog:zz,default:x9,element:xz,elementLink:Ez,encrypted:Vz,errorDialog:Dz,errorSplash:Rz,errors:Sz,exportDialog:Oz,fontList:qz,headings:Cz,helpDialog:Nz,hints:Az,imageExportDialog:Hz,labels:yz,library:vz,mermaid:Kz,overwriteConfirm:Wz,publishDialog:Fz,publishSuccessDialog:Bz,quickSearch:Zz,roomDialog:Lz,search:wz,shareDialog:kz,stats:$z,toast:Gz,toolBar:Iz,userList:Qz,welcomeScreen:jz},Symbol.toStringTag,{value:"Module"})),eH=100,tH=36,nH={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:eH,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:tH,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},Wce=Object.freeze(Object.defineProperty({__proto__:null,default:nH,en:eH,kaa:tH},Symbol.toStringTag,{value:"Module"})),Kce=85,Od={code:"en",label:"English"},S5=[Od,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>nH[e.code]>=Kce).sort((e,t)=>e.label>t.label?1:-1)],iH="__test__";let Bf=Od,d2={};const rH=async e=>{if(Bf=e,document.documentElement.dir=Bf.rtl?"rtl":"ltr",document.documentElement.lang=Bf.code,e.code.startsWith(iH))d2={};else try{d2=await kce(Object.assign({"./locales/ar-SA.json":()=>be(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([]),import.meta.url),"./locales/az-AZ.json":()=>be(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([]),import.meta.url),"./locales/bg-BG.json":()=>be(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([]),import.meta.url),"./locales/bn-BD.json":()=>be(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([]),import.meta.url),"./locales/ca-ES.json":()=>be(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([]),import.meta.url),"./locales/cs-CZ.json":()=>be(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([]),import.meta.url),"./locales/da-DK.json":()=>be(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([]),import.meta.url),"./locales/de-DE.json":()=>be(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([]),import.meta.url),"./locales/el-GR.json":()=>be(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([]),import.meta.url),"./locales/en.json":()=>be(()=>Promise.resolve().then(()=>Yce),void 0,import.meta.url),"./locales/es-ES.json":()=>be(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([]),import.meta.url),"./locales/eu-ES.json":()=>be(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([]),import.meta.url),"./locales/fa-IR.json":()=>be(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([]),import.meta.url),"./locales/fi-FI.json":()=>be(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([]),import.meta.url),"./locales/fr-FR.json":()=>be(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([]),import.meta.url),"./locales/gl-ES.json":()=>be(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([]),import.meta.url),"./locales/he-IL.json":()=>be(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([]),import.meta.url),"./locales/hi-IN.json":()=>be(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([]),import.meta.url),"./locales/hu-HU.json":()=>be(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([]),import.meta.url),"./locales/id-ID.json":()=>be(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([]),import.meta.url),"./locales/it-IT.json":()=>be(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([]),import.meta.url),"./locales/ja-JP.json":()=>be(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([]),import.meta.url),"./locales/kaa.json":()=>be(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([]),import.meta.url),"./locales/kab-KAB.json":()=>be(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([]),import.meta.url),"./locales/kk-KZ.json":()=>be(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([]),import.meta.url),"./locales/km-KH.json":()=>be(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([]),import.meta.url),"./locales/ko-KR.json":()=>be(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([]),import.meta.url),"./locales/ku-TR.json":()=>be(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([]),import.meta.url),"./locales/lt-LT.json":()=>be(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([]),import.meta.url),"./locales/lv-LV.json":()=>be(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([]),import.meta.url),"./locales/mr-IN.json":()=>be(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([]),import.meta.url),"./locales/my-MM.json":()=>be(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([]),import.meta.url),"./locales/nb-NO.json":()=>be(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([]),import.meta.url),"./locales/nl-NL.json":()=>be(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([]),import.meta.url),"./locales/nn-NO.json":()=>be(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([]),import.meta.url),"./locales/oc-FR.json":()=>be(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([]),import.meta.url),"./locales/pa-IN.json":()=>be(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([]),import.meta.url),"./locales/percentages.json":()=>be(()=>Promise.resolve().then(()=>Wce),void 0,import.meta.url),"./locales/pl-PL.json":()=>be(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-BR.json":()=>be(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-PT.json":()=>be(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([]),import.meta.url),"./locales/ro-RO.json":()=>be(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([]),import.meta.url),"./locales/ru-RU.json":()=>be(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([]),import.meta.url),"./locales/si-LK.json":()=>be(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([]),import.meta.url),"./locales/sk-SK.json":()=>be(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([]),import.meta.url),"./locales/sl-SI.json":()=>be(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([]),import.meta.url),"./locales/sv-SE.json":()=>be(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([]),import.meta.url),"./locales/ta-IN.json":()=>be(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([]),import.meta.url),"./locales/th-TH.json":()=>be(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([]),import.meta.url),"./locales/tr-TR.json":()=>be(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([]),import.meta.url),"./locales/uk-UA.json":()=>be(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([]),import.meta.url),"./locales/vi-VN.json":()=>be(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-CN.json":()=>be(()=>import("./locales/zh-CN.json-CXAz8QMA.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-HK.json":()=>be(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-TW.json":()=>be(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]),import.meta.url)}),`./locales/${Bf.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),d2=x9}Or.set(sH,e.code)},qm=()=>Bf,TA=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},L=(e,t,n)=>{if(Bf.code.startsWith(iH))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let r=TA(d2,i)||TA(x9,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},sH=Kt(Od.code),wn=()=>{const e=bz(sH);return{t:L,langCode:e}},Zce=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Br({sceneX:n,sceneY:i},e),{x:l,y:c}=Br({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},oH=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;r+=((i==null?void 0:i.left)??0)/2/n.value;let s=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return s+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:r,scrollY:s}},Qm=(e,t)=>{if(e=bce(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=yt(e);Zce(t,[n,i,r,s])&&([n,i,r,s]=lle(e,Mt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return oH({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Na=e=>Xe(Ha(e,6),Rw,kw),qce=e=>Xe(Math.round(e),1,100),aH=e=>Xe(Math.round(e),1,100),Xs=e=>"var(--icon-fill-color)",lH=e=>e===Ae.LIGHT?fi.white:"#1e1e1e",Y=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:pe({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},le={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Fe={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),le);const C9=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),le),Qce=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),le),Jce=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),le),eue=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),le),I5=Y(P("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Fe),A9=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Fe),tue=Y(g("g",{fill:"currentColor",children:g("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3"})}),{width:24,height:24}),nue=Y(P(ge,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),iue=Y(P(ge,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),rue=Y(P(ge,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),SA=Y(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),sue=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),r4=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),cH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),le),uH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),le),dH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),le),oue=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),le),fH=Y(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Fe),aue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),le),x5=Y(P("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Fe),M9=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),le),lue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Fe),cue=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),le),IA=Y(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Fe),xA=Y(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Fe),uue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),le),fd=Y(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Fe),CA=Y(P("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Fe),s4=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Fe),o4=Y(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Fe),a4=Y(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Fe,strokeWidth:1.5}),hH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),le),C5=Y(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Fe),R9=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),due=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),AA=Y(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Fe),k9=Y(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Fe),gH=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Fe),mH=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),le),fue=Y(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Xb=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Fe),hue=Y("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),gue=Y("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),L9=Y(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Fe);Y("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const mue=Y("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),eE=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),le),pue=Y(g("g",{strokeWidth:1.5,children:g("path",{d:"M6 18l12 -12"})}),le),pH=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),le),Uue=Y("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Y("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Y("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const bue=Y("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Y("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const MA=Y(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Fe),RA=Y(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Fe),yue=Y("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),UH=Y(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Fe);Y("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");const Eue=Y("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),vue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),le),wue=Y(P(ge,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});Y(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const bH=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),yH=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),kA=Y(yH,le),LA=Y(yH,{...le,style:{transform:"rotate(180deg)"}}),DA=Y(bH,le),OA=Y(bH,{...le,style:{transform:"rotate(180deg)"}}),NA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),PA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),FA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),BA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),_ue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Tue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),zA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Fe),HA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Fe),D9=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),le);Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const dg=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe);Y("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});Y("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Y("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const VA=ae.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Xs()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Xs(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Xs()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Xs(),strokeWidth:"2"}),P("g",{fill:lH(e),stroke:Xs(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),$A=ae.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Xs()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Xs(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Xs()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Xs(),strokeWidth:"2"}),P("g",{fill:lH(e),stroke:Xs(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Sue=Y(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Fe),Iue=Y(P(ge,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Fe),xue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Cue=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Fe,fill:"currentColor"}),EH=Y(g(ge,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),Aue=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Fe),Mue=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Fe);ae.memo(({theme:e})=>Y(g("path",{d:"M6 10H34",stroke:Xs(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Rue=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),le),kue=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),le),Lue=Y(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Fe),Due=Y(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Fe),Oue=Y(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Fe),Nue=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Fe),Pue=Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),le),Fue=Y(P("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),le),Bue=ae.memo(({flip:e=!1})=>Y(P("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),zue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Hue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Vue=ae.memo(({flip:e=!1})=>Y(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),$ue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Gue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Xue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),jue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Yue=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Wue=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Kue=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Zue=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),que=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Que=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Jue=Y(g(ge,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),A5=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),le),ede=Y(g(ge,{children:P("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),le),l4=Y(g(ge,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Fe),vH=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),tde=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),le),nde=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),le),ide=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),le),rde=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),le)),sde=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),le)),ode=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),le)),wH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),le),ade=Y(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Y(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const _H=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),le),GA=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),le),sp=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),le),lde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),le),cde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),ude=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),le),dde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),le),fde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),le),hde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),le),gde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),le),mde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),le),jb=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),le),TH=Y(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),f2=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Fe),c4=Y(P("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),SH=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),le);Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),le);Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),le);const pde=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),le),O9=Y(P("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),le),Ude=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),le),bde=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),le),yde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),le),hd=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),le),Ede=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),le),vde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),le),wde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),le),u4=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),le),_de=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),le),Tde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),le),Sde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),le),Ide=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),le),IH=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),le),N9=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),le),xde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),le),Cde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),le),Ade=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),le),Mde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),le),Rde=Y(P("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...le,strokeWidth:1.5});Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),le);const xH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),le),kde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),le),Lde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),le),CH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),le),AH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),le),MH=Y(P("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),le),RH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),le),Dde=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),le),Ode=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),le),XA=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),le),kH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),le);class Nde extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class Dh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class xu extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class LH extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class DH extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class Ks extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const il=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(ae.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Ye=ae.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=sa(),o=ae.useRef(null);ae.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=D.useState(!1),u=D.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(K0(m))try{c(!0),await m}catch(U){if(U instanceof Dh)console.warn(U);else throw U}finally{u.current&&c(!1)}};D.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=D.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return P("button",{className:pe("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&P("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(il,{})]}),i.showAriaLabel&&P("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(il,{})]}),i.children]})}return P("label",{className:pe("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),P("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Ye.displayName="ToolButton";let d4=[];const oe=e=>(d4=d4.concat(e),e),Pde=(e,t,n)=>{const i=new Set(ze(e.filter(u=>Te(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=Ss(e,u);for(const f of d)if(!o.has(f.id)){if(Gt(f)){const h=$n(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Gt(u)?$n(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&he(h)&&n.scene.mutateElement(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding})}),Ie(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Gt(u)||(r[u.id]=!0),Ie(u,{frameId:null})):Gt(u)&&t.selectedElementIds[u.containerId]?Ie(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=kt(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=kt(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Li({selectedElementIds:r,editingGroupId:c},l,t,null)}}},jA=(e,t)=>{if(e.editingGroupId){const n=kt(Bt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},OH=oe({name:"deleteSelectedElements",label:"labels.delete",icon:fd,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=ce.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Ie(p,{isDeleted:!0}):p),m=jA(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return ce.deletePoints(d,i.scene,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:K.IMMEDIATELY}}let{elements:r,appState:s}=Pde(e,t,i);return TB(r,r.filter(o=>o.isDeleted)),s=jA(s,r),{elements:r,appState:{...s,activeTool:en(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:Gn(Bt(e),t)?K.IMMEDIATELY:K.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===H.BACKSPACE||e.key===H.DELETE)&&!e[H.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",icon:fd,title:L("labels.delete"),"aria-label":L("labels.delete"),onClick:()=>n(null),visible:Gn(Bt(e),t)})}),Fde=oe({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:LA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:gce(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[H.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.sendBackward")} — ${Q("CtrlOrCmd+[")}`,children:LA})}),Bde=oe({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:kA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:mce(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[H.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.bringForward")} — ${Q("CtrlOrCmd+]")}`,children:kA})}),zde=oe({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:OA,trackEvent:{category:"element"},perform:(e,t)=>({elements:pce(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Go?e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_LEFT:e[H.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.sendToBack")} — ${Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:OA})}),Hde=oe({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:DA,trackEvent:{category:"element"},perform:(e,t)=>({elements:Uce(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Go?e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_RIGHT:e[H.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${L("labels.bringToFront")} — ${Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:DA})}),Vde=oe({name:"selectAll",label:"labels.selectAll",icon:_de,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const r=e.filter(s=>!s.isDeleted&&!(ue(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Li({editingGroupId:null,selectedElementIds:r},Bt(e),t,i),selectedLinearElement:Object.keys(r).length===1&&Ce(e[0])?new ce(e[0],we(e)):null},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.A}),$de=oe({name:"duplicateSelection",label:"labels.duplicateSelection",icon:s4,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=ce.duplicateSelectedPoints(t,i.scene);return{elements:e,appState:o,captureUpdate:K.IMMEDIATELY}}catch{return!1}let{duplicatedElements:r,elementsWithDuplicates:s}=zb({type:"in-place",elements:e,idsOfElementsToDuplicate:we(ze(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:o,origIdToDuplicateId:a})=>{const l=o.frameId&&a.get(o.frameId);return{x:o.x+hb/2,y:o.y+hb/2,frameId:l??o.frameId}}});if(i.props.onDuplicate&&s){const o=i.props.onDuplicate(s,e);o&&(s=o)}return{elements:oo(s,we(r)),appState:{...t,...eB(r,Bt(s),t)},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",icon:s4,title:`${L("labels.duplicateSelection")} — ${Q("CtrlOrCmd+D")}`,"aria-label":L("labels.duplicateSelection"),onClick:()=>n(null),visible:Gn(Bt(e),t)})});var Gde={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Xde=new Set(["command_palette","export"]),lt=(e,t,n,i)=>{try{if(typeof window>"u"||Gde.VITE_WORKER_ID||!Xde.has(e))return;pF(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},NH=D.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:pe(i,{standalone:o,active:s}),onClick:l,children:a},n)}),ia=e=>g(ge,{children:e.options.map(t=>e.type==="button"?g(NH,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):P("label",{className:pe({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function Ti(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function YA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function PH(...e){return t=>{let n=!1;const i=e.map(r=>{const s=YA(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():YA(e[r],null)}}}}function lo(...e){return D.useCallback(PH(...e),e)}function op(e,t=[]){let n=[];function i(s,o){const a=D.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:h,...m}=d,p=((y=f==null?void 0:f[e])==null?void 0:y[l])||a,U=D.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:U,children:h})};c.displayName=s+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=D.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>D.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return D.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,jde(r,...t)]}function jde(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Jm=D.forwardRef((e,t)=>{const{children:n,...i}=e,r=D.Children.toArray(n),s=r.find(Wde);if(s){const o=s.props.children,a=r.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return g(f4,{...i,ref:t,children:D.isValidElement(o)?D.cloneElement(o,void 0,a):null})}return g(f4,{...i,ref:t,children:n})});Jm.displayName="Slot";var f4=D.forwardRef((e,t)=>{const{children:n,...i}=e;if(D.isValidElement(n)){const r=Zde(n),s=Kde(i,n.props);return n.type!==D.Fragment&&(s.ref=t?PH(t,r):r),D.cloneElement(n,s)}return D.Children.count(n)>1?D.Children.only(null):null});f4.displayName="SlotClone";var Yde=({children:e})=>g(ge,{children:e});function Wde(e){return D.isValidElement(e)&&e.type===Yde}function Kde(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function Zde(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var qde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],sr=qde.reduce((e,t)=>{const n=D.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Jm:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qde(e,t){e&&Sn.flushSync(()=>e.dispatchEvent(t))}function rl(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function Jde(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e);D.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var efe="DismissableLayer",h4="dismissableLayer.update",tfe="dismissableLayer.pointerDownOutside",nfe="dismissableLayer.focusOutside",WA,FH=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),BH=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=D.useContext(FH),[u,d]=D.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=D.useState({}),m=lo(t,_=>d(_)),p=Array.from(c.layers),[U]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(U),E=u?p.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,v=E>=y,x=sfe(_=>{const T=_.target,I=[...c.branches].some(C=>C.contains(T));!v||I||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),M=ofe(_=>{const T=_.target;[...c.branches].some(C=>C.contains(T))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return Jde(_=>{E===c.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),D.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(WA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),KA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=WA)}},[u,f,n,c]),D.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),KA())},[u,c]),D.useEffect(()=>{const _=()=>h({});return document.addEventListener(h4,_),()=>document.removeEventListener(h4,_)},[]),g(sr.div,{...l,ref:m,style:{pointerEvents:w?v?"auto":"none":void 0,...e.style},onFocusCapture:Ti(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ti(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ti(e.onPointerDownCapture,x.onPointerDownCapture)})});BH.displayName=efe;var ife="DismissableLayerBranch",rfe=D.forwardRef((e,t)=>{const n=D.useContext(FH),i=D.useRef(null),r=lo(t,i);return D.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(sr.div,{...e,ref:r})});rfe.displayName=ife;function sfe(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e),i=D.useRef(!1),r=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){zH(tfe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function ofe(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e),i=D.useRef(!1);return D.useEffect(()=>{const r=s=>{s.target&&!i.current&&zH(nfe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function KA(){const e=new CustomEvent(h4);document.dispatchEvent(e)}function zH(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?Qde(r,s):r.dispatchEvent(s)}var tE=0;function afe(){D.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ZA()),document.body.insertAdjacentElement("beforeend",e[1]??ZA()),tE++,()=>{tE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tE--}},[])}function ZA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nE="focusScope.autoFocusOnMount",iE="focusScope.autoFocusOnUnmount",qA={bubbles:!1,cancelable:!0},lfe="FocusScope",HH=D.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=D.useState(null),c=rl(r),u=rl(s),d=D.useRef(null),f=lo(t,p=>l(p)),h=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(i){let p=function(w){if(h.paused||!a)return;const v=w.target;a.contains(v)?d.current=v:Ml(d.current,{select:!0})},U=function(w){if(h.paused||!a)return;const v=w.relatedTarget;v!==null&&(a.contains(v)||Ml(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const x of w)x.removedNodes.length>0&&Ml(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",U);const E=new MutationObserver(y);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",U),E.disconnect()}}},[i,a,h.paused]),D.useEffect(()=>{if(a){JA.add(h);const p=document.activeElement;if(!a.contains(p)){const y=new CustomEvent(nE,qA);a.addEventListener(nE,c),a.dispatchEvent(y),y.defaultPrevented||(cfe(gfe(VH(a)),{select:!0}),document.activeElement===p&&Ml(a))}return()=>{a.removeEventListener(nE,c),setTimeout(()=>{const y=new CustomEvent(iE,qA);a.addEventListener(iE,u),a.dispatchEvent(y),y.defaultPrevented||Ml(p??document.body,{select:!0}),a.removeEventListener(iE,u),JA.remove(h)},0)}}},[a,c,u,h]);const m=D.useCallback(p=>{if(!n&&!i||h.paused)return;const U=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(U&&y){const E=p.currentTarget,[w,v]=ufe(E);w&&v?!p.shiftKey&&y===v?(p.preventDefault(),n&&Ml(w,{select:!0})):p.shiftKey&&y===w&&(p.preventDefault(),n&&Ml(v,{select:!0})):y===E&&p.preventDefault()}},[n,i,h.paused]);return g(sr.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});HH.displayName=lfe;function cfe(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Ml(i,{select:t}),document.activeElement!==n)return}function ufe(e){const t=VH(e),n=QA(t,e),i=QA(t.reverse(),e);return[n,i]}function VH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function QA(e,t){for(const n of e)if(!dfe(n,{upTo:t}))return n}function dfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ffe(e){return e instanceof HTMLInputElement&&"select"in e}function Ml(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ffe(e)&&t&&e.select()}}var JA=hfe();function hfe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=eM(e,t),e.unshift(t)},remove(t){var n;e=eM(e,t),(n=e[0])==null||n.resume()}}}function eM(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function gfe(e){return e.filter(t=>t.tagName!=="A")}var gd=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},mfe=$K.useId||(()=>{}),pfe=0;function P9(e){const[t,n]=D.useState(mfe());return gd(()=>{n(i=>i??String(pfe++))},[e]),e||(t?`radix-${t}`:"")}const Ufe=["top","right","bottom","left"],Dc=Math.min,Lr=Math.max,Yb=Math.round,gU=Math.floor,zo=e=>({x:e,y:e}),bfe={left:"right",right:"left",bottom:"top",top:"bottom"},yfe={start:"end",end:"start"};function g4(e,t,n){return Lr(e,Dc(t,n))}function sl(e,t){return typeof e=="function"?e(t):e}function ol(e){return e.split("-")[0]}function fg(e){return e.split("-")[1]}function F9(e){return e==="x"?"y":"x"}function B9(e){return e==="y"?"height":"width"}function Oc(e){return["top","bottom"].includes(ol(e))?"y":"x"}function z9(e){return F9(Oc(e))}function Efe(e,t,n){n===void 0&&(n=!1);const i=fg(e),r=z9(e),s=B9(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Wb(o)),[o,Wb(o)]}function vfe(e){const t=Wb(e);return[m4(e),t,m4(t)]}function m4(e){return e.replace(/start|end/g,t=>yfe[t])}function wfe(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function _fe(e,t,n,i){const r=fg(e);let s=wfe(ol(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(m4)))),s}function Wb(e){return e.replace(/left|right|bottom|top/g,t=>bfe[t])}function Tfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function $H(e){return typeof e!="number"?Tfe(e):{top:e,right:e,bottom:e,left:e}}function Kb(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function tM(e,t,n){let{reference:i,floating:r}=e;const s=Oc(t),o=z9(t),a=B9(o),l=ol(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(fg(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Sfe=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=tM(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:U,fn:y}=a[p],{x:E,y:w,data:v,reset:x}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=E??u,d=w??d,h={...h,[U]:{...h[U],...v}},x&&m<=50&&(m++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):x.rects),{x:u,y:d}=tM(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function e0(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=sl(t,e),m=$H(h),U=a[f?d==="floating"?"reference":"floating":d],y=Kb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(U)))==null||n?U:U.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},x=Kb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:w,strategy:l}):E);return{top:(y.top-x.top+m.top)/v.y,bottom:(x.bottom-y.bottom+m.bottom)/v.y,left:(y.left-x.left+m.left)/v.x,right:(x.right-y.right+m.right)/v.x}}const Ife=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=sl(e,t)||{};if(c==null)return{};const d=$H(u),f={x:n,y:i},h=z9(r),m=B9(h),p=await o.getDimensions(c),U=h==="y",y=U?"top":"left",E=U?"bottom":"right",w=U?"clientHeight":"clientWidth",v=s.reference[m]+s.reference[h]-f[h]-s.floating[m],x=f[h]-s.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=M?M[w]:0;(!_||!await(o.isElement==null?void 0:o.isElement(M)))&&(_=a.floating[w]||s.floating[m]);const T=v/2-x/2,I=_/2-p[m]/2-1,C=Dc(d[y],I),R=Dc(d[E],I),N=C,k=_-p[m]-R,$=_/2-p[m]/2+T,V=g4(N,$,k),z=!l.arrow&&fg(r)!=null&&$!==V&&s.reference[m]/2-($<N?C:R)-p[m]/2<0,G=z?$<N?$-N:$-k:0;return{[h]:f[h]+G,data:{[h]:V,centerOffset:$-V-G,...z&&{alignmentOffset:G}},reset:z}}}),xfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...U}=sl(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ol(r),E=Oc(a),w=ol(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=f||(w||!p?[Wb(a)]:vfe(a)),M=m!=="none";!f&&M&&x.push(..._fe(a,p,m,v));const _=[a,...x],T=await e0(t,U),I=[];let C=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&I.push(T[y]),d){const $=Efe(r,o,v);I.push(T[$[0]],T[$[1]])}if(C=[...C,{placement:r,overflows:I}],!I.every($=>$<=0)){var R,N;const $=(((R=s.flip)==null?void 0:R.index)||0)+1,V=_[$];if(V)return{data:{index:$,overflows:C},reset:{placement:V}};let z=(N=C.filter(G=>G.overflows[0]<=0).sort((G,j)=>G.overflows[1]-j.overflows[1])[0])==null?void 0:N.placement;if(!z)switch(h){case"bestFit":{var k;const G=(k=C.filter(j=>{if(M){const X=Oc(j.placement);return X===E||X==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(X=>X>0).reduce((X,q)=>X+q,0)]).sort((j,X)=>j[1]-X[1])[0])==null?void 0:k[0];G&&(z=G);break}case"initialPlacement":z=a;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function nM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function iM(e){return Ufe.some(t=>e[t]>=0)}const Cfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=sl(e,t);switch(i){case"referenceHidden":{const s=await e0(t,{...r,elementContext:"reference"}),o=nM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:iM(o)}}}case"escaped":{const s=await e0(t,{...r,altBoundary:!0}),o=nM(s,n.floating);return{data:{escapedOffsets:o,escaped:iM(o)}}}default:return{}}}}};async function Afe(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ol(n),a=fg(n),l=Oc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=sl(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Mfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await Afe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Rfe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:U=>{let{x:y,y:E}=U;return{x:y,y:E}}},...l}=sl(e,t),c={x:n,y:i},u=await e0(t,l),d=Oc(ol(r)),f=F9(d);let h=c[f],m=c[d];if(s){const U=f==="y"?"top":"left",y=f==="y"?"bottom":"right",E=h+u[U],w=h-u[y];h=g4(E,h,w)}if(o){const U=d==="y"?"top":"left",y=d==="y"?"bottom":"right",E=m+u[U],w=m-u[y];m=g4(E,m,w)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},kfe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=sl(e,t),u={x:n,y:i},d=Oc(r),f=F9(d);let h=u[f],m=u[d];const p=sl(a,t),U=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=f==="y"?"height":"width",v=s.reference[f]-s.floating[w]+U.mainAxis,x=s.reference[f]+s.reference[w]-U.mainAxis;h<v?h=v:h>x&&(h=x)}if(c){var y,E;const w=f==="y"?"width":"height",v=["top","left"].includes(ol(r)),x=s.reference[d]-s.floating[w]+(v&&((y=o.offset)==null?void 0:y[d])||0)+(v?0:U.crossAxis),M=s.reference[d]+s.reference[w]+(v?0:((E=o.offset)==null?void 0:E[d])||0)-(v?U.crossAxis:0);m<x?m=x:m>M&&(m=M)}return{[f]:h,[d]:m}}}},Lfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=sl(e,t),u=await e0(t,c),d=ol(r),f=fg(r),h=Oc(r)==="y",{width:m,height:p}=s.floating;let U,y;d==="top"||d==="bottom"?(U=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,U=f==="end"?"top":"bottom");const E=p-u.top-u.bottom,w=m-u.left-u.right,v=Dc(p-u[U],E),x=Dc(m-u[y],w),M=!t.middlewareData.shift;let _=v,T=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(_=E),M&&!f){const C=Lr(u.left,0),R=Lr(u.right,0),N=Lr(u.top,0),k=Lr(u.bottom,0);h?T=m-2*(C!==0||R!==0?C+R:Lr(u.left,u.right)):_=p-2*(N!==0||k!==0?N+k:Lr(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:_});const I=await o.getDimensions(a.floating);return m!==I.width||p!==I.height?{reset:{rects:!0}}:{}}}};function M5(){return typeof window<"u"}function hg(e){return GH(e)?(e.nodeName||"").toLowerCase():"#document"}function Xr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ra(e){var t;return(t=(GH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function GH(e){return M5()?e instanceof Node||e instanceof Xr(e).Node:!1}function co(e){return M5()?e instanceof Element||e instanceof Xr(e).Element:!1}function qo(e){return M5()?e instanceof HTMLElement||e instanceof Xr(e).HTMLElement:!1}function rM(e){return!M5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xr(e).ShadowRoot}function ap(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=uo(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function Dfe(e){return["table","td","th"].includes(hg(e))}function R5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function H9(e){const t=V9(),n=co(e)?uo(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Ofe(e){let t=Nc(e);for(;qo(t)&&!Oh(t);){if(H9(t))return t;if(R5(t))return null;t=Nc(t)}return null}function V9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Oh(e){return["html","body","#document"].includes(hg(e))}function uo(e){return Xr(e).getComputedStyle(e)}function k5(e){return co(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Nc(e){if(hg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rM(e)&&e.host||ra(e);return rM(t)?t.host:t}function XH(e){const t=Nc(e);return Oh(t)?e.ownerDocument?e.ownerDocument.body:e.body:qo(t)&&ap(t)?t:XH(t)}function t0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=XH(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=Xr(r);if(s){const a=p4(o);return t.concat(o,o.visualViewport||[],ap(r)?r:[],a&&n?t0(a):[])}return t.concat(r,t0(r,[],n))}function p4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jH(e){const t=uo(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=qo(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=Yb(n)!==s||Yb(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function $9(e){return co(e)?e:e.contextElement}function nh(e){const t=$9(e);if(!qo(t))return zo(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=jH(t);let o=(s?Yb(n.width):n.width)/i,a=(s?Yb(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Nfe=zo(0);function YH(e){const t=Xr(e);return!V9()||!t.visualViewport?Nfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Pfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xr(e)?!1:t}function md(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=$9(e);let o=zo(1);t&&(i?co(i)&&(o=nh(i)):o=nh(e));const a=Pfe(s,n,i)?YH(s):zo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Xr(s),h=i&&co(i)?Xr(i):i;let m=f,p=p4(m);for(;p&&i&&h!==m;){const U=nh(p),y=p.getBoundingClientRect(),E=uo(p),w=y.left+(p.clientLeft+parseFloat(E.paddingLeft))*U.x,v=y.top+(p.clientTop+parseFloat(E.paddingTop))*U.y;l*=U.x,c*=U.y,u*=U.x,d*=U.y,l+=w,c+=v,m=Xr(p),p=p4(m)}}return Kb({width:u,height:d,x:l,y:c})}function G9(e,t){const n=k5(e).scrollLeft;return t?t.left+n:md(ra(e)).left+n}function WH(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:G9(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function Ffe(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=ra(i),a=t?R5(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=zo(1);const u=zo(0),d=qo(i);if((d||!d&&!s)&&((hg(i)!=="body"||ap(o))&&(l=k5(i)),qo(i))){const h=md(i);c=nh(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?WH(o,l,!0):zo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Bfe(e){return Array.from(e.getClientRects())}function zfe(e){const t=ra(e),n=k5(e),i=e.ownerDocument.body,r=Lr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Lr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+G9(e);const a=-n.scrollTop;return uo(i).direction==="rtl"&&(o+=Lr(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Hfe(e,t){const n=Xr(e),i=ra(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=V9();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function Vfe(e,t){const n=md(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=qo(e)?nh(e):zo(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function sM(e,t,n){let i;if(t==="viewport")i=Hfe(e,n);else if(t==="document")i=zfe(ra(e));else if(co(t))i=Vfe(t,n);else{const r=YH(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Kb(i)}function KH(e,t){const n=Nc(e);return n===t||!co(n)||Oh(n)?!1:uo(n).position==="fixed"||KH(n,t)}function $fe(e,t){const n=t.get(e);if(n)return n;let i=t0(e,[],!1).filter(a=>co(a)&&hg(a)!=="body"),r=null;const s=uo(e).position==="fixed";let o=s?Nc(e):e;for(;co(o)&&!Oh(o);){const a=uo(o),l=H9(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ap(o)&&!l&&KH(e,o))?i=i.filter(u=>u!==o):r=a,o=Nc(o)}return t.set(e,i),i}function Gfe(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?R5(t)?[]:$fe(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=sM(t,u,r);return c.top=Lr(d.top,c.top),c.right=Dc(d.right,c.right),c.bottom=Dc(d.bottom,c.bottom),c.left=Lr(d.left,c.left),c},sM(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xfe(e){const{width:t,height:n}=jH(e);return{width:t,height:n}}function jfe(e,t,n){const i=qo(t),r=ra(t),s=n==="fixed",o=md(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=zo(0);if(i||!i&&!s)if((hg(t)!=="body"||ap(r))&&(a=k5(t)),i){const f=md(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=G9(r));const c=r&&!i&&!s?WH(r,a):zo(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function rE(e){return uo(e).position==="static"}function oM(e,t){if(!qo(e)||uo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ra(e)===n&&(n=n.ownerDocument.body),n}function ZH(e,t){const n=Xr(e);if(R5(e))return n;if(!qo(e)){let r=Nc(e);for(;r&&!Oh(r);){if(co(r)&&!rE(r))return r;r=Nc(r)}return n}let i=oM(e,t);for(;i&&Dfe(i)&&rE(i);)i=oM(i,t);return i&&Oh(i)&&rE(i)&&!H9(i)?n:i||Ofe(e)||n}const Yfe=async function(e){const t=this.getOffsetParent||ZH,n=this.getDimensions,i=await n(e.floating);return{reference:jfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Wfe(e){return uo(e).direction==="rtl"}const Kfe={convertOffsetParentRelativeRectToViewportRelativeRect:Ffe,getDocumentElement:ra,getClippingRect:Gfe,getOffsetParent:ZH,getElementRects:Yfe,getClientRects:Bfe,getDimensions:Xfe,getScale:nh,isElement:co,isRTL:Wfe};function qH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Zfe(e,t){let n=null,i;const r=ra(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=gU(d),p=gU(r.clientWidth-(u+f)),U=gU(r.clientHeight-(d+h)),y=gU(u),w={rootMargin:-m+"px "+-p+"px "+-U+"px "+-y+"px",threshold:Lr(0,Dc(1,l))||1};let v=!0;function x(M){const _=M[0].intersectionRatio;if(_!==l){if(!v)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!qH(c,e.getBoundingClientRect())&&o(),v=!1}try{n=new IntersectionObserver(x,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(x,w)}n.observe(e)}return o(!0),s}function qfe(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=$9(e),u=r||s?[...c?t0(c):[],...t0(t)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Zfe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[E]=y;E&&E.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?md(e):null;l&&U();function U(){const y=md(e);p&&!qH(p,y)&&n(),p=y,m=requestAnimationFrame(U)}return n(),()=>{var y;u.forEach(E=>{r&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Qfe=Mfe,Jfe=Rfe,ehe=xfe,the=Lfe,nhe=Cfe,aM=Ife,ihe=kfe,rhe=(e,t,n)=>{const i=new Map,r={platform:Kfe,...n},s={...r.platform,_c:i};return Sfe(e,t,{...r,platform:s})};var h2=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Zb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Zb(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!Zb(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function QH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lM(e,t){const n=QH(e);return Math.round(t*n)/n}function sE(e){const t=D.useRef(e);return h2(()=>{t.current=e}),t}function she(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=D.useState(i);Zb(f,i)||h(i);const[m,p]=D.useState(null),[U,y]=D.useState(null),E=D.useCallback(j=>{j!==M.current&&(M.current=j,p(j))},[]),w=D.useCallback(j=>{j!==_.current&&(_.current=j,y(j))},[]),v=s||m,x=o||U,M=D.useRef(null),_=D.useRef(null),T=D.useRef(u),I=l!=null,C=sE(l),R=sE(r),N=sE(c),k=D.useCallback(()=>{if(!M.current||!_.current)return;const j={placement:t,strategy:n,middleware:f};R.current&&(j.platform=R.current),rhe(M.current,_.current,j).then(X=>{const q={...X,isPositioned:N.current!==!1};$.current&&!Zb(T.current,q)&&(T.current=q,Sn.flushSync(()=>{d(q)}))})},[f,t,n,R,N]);h2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const $=D.useRef(!1);h2(()=>($.current=!0,()=>{$.current=!1}),[]),h2(()=>{if(v&&(M.current=v),x&&(_.current=x),v&&x){if(C.current)return C.current(v,x,k);k()}},[v,x,k,C,I]);const V=D.useMemo(()=>({reference:M,floating:_,setReference:E,setFloating:w}),[E,w]),z=D.useMemo(()=>({reference:v,floating:x}),[v,x]),G=D.useMemo(()=>{const j={position:n,left:0,top:0};if(!z.floating)return j;const X=lM(z.floating,u.x),q=lM(z.floating,u.y);return a?{...j,transform:"translate("+X+"px, "+q+"px)",...QH(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:q}},[n,a,z.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:k,refs:V,elements:z,floatingStyles:G}),[u,k,V,z,G])}const ohe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?aM({element:i.current,padding:r}).fn(n):{}:i?aM({element:i,padding:r}).fn(n):{}}}},ahe=(e,t)=>({...Qfe(e),options:[e,t]}),lhe=(e,t)=>({...Jfe(e),options:[e,t]}),che=(e,t)=>({...ihe(e),options:[e,t]}),uhe=(e,t)=>({...ehe(e),options:[e,t]}),dhe=(e,t)=>({...the(e),options:[e,t]}),fhe=(e,t)=>({...nhe(e),options:[e,t]}),hhe=(e,t)=>({...ohe(e),options:[e,t]});var ghe="Arrow",JH=D.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(sr.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});JH.displayName=ghe;var mhe=JH;function phe(e){const[t,n]=D.useState(void 0);return gd(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var X9="Popper",[eV,tV]=op(X9),[Uhe,nV]=eV(X9),iV=e=>{const{__scopePopper:t,children:n}=e,[i,r]=D.useState(null);return g(Uhe,{scope:t,anchor:i,onAnchorChange:r,children:n})};iV.displayName=X9;var rV="PopperAnchor",sV=D.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=nV(rV,n),o=D.useRef(null),a=lo(t,o);return D.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(sr.div,{...r,ref:a})});sV.displayName=rV;var j9="PopperContent",[bhe,yhe]=eV(j9),oV=D.forwardRef((e,t)=>{var zt,Ct,Zt,xe,Ge,qt;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,U=nV(j9,n),[y,E]=D.useState(null),w=lo(t,ar=>E(ar)),[v,x]=D.useState(null),M=phe(v),_=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,I=i+(s!=="center"?"-"+s:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],N=R.length>0,k={padding:C,boundary:R.filter(vhe),altBoundary:N},{refs:$,floatingStyles:V,placement:z,isPositioned:G,middlewareData:j}=she({strategy:"fixed",placement:I,whileElementsMounted:(...ar)=>qfe(...ar,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[ahe({mainAxis:r+T,alignmentAxis:o}),l&&lhe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?che():void 0,...k}),l&&uhe({...k}),dhe({...k,apply:({elements:ar,rects:xs,availableWidth:Cs,availableHeight:Sr})=>{const{width:Sy,height:Iy}=xs.reference,Qc=ar.floating.style;Qc.setProperty("--radix-popper-available-width",`${Cs}px`),Qc.setProperty("--radix-popper-available-height",`${Sr}px`),Qc.setProperty("--radix-popper-anchor-width",`${Sy}px`),Qc.setProperty("--radix-popper-anchor-height",`${Iy}px`)}}),v&&hhe({element:v,padding:a}),whe({arrowWidth:_,arrowHeight:T}),f&&fhe({strategy:"referenceHidden",...k})]}),[X,q]=cV(z),fe=rl(m);gd(()=>{G&&(fe==null||fe())},[G,fe]);const ie=(zt=j.arrow)==null?void 0:zt.x,Ue=(Ct=j.arrow)==null?void 0:Ct.y,Ve=((Zt=j.arrow)==null?void 0:Zt.centerOffset)!==0,[$e,nt]=D.useState();return gd(()=>{y&&nt(window.getComputedStyle(y).zIndex)},[y]),g("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:G?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(xe=j.transformOrigin)==null?void 0:xe.x,(Ge=j.transformOrigin)==null?void 0:Ge.y].join(" "),...((qt=j.hide)==null?void 0:qt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(bhe,{scope:n,placedSide:X,onArrowChange:x,arrowX:ie,arrowY:Ue,shouldHideArrow:Ve,children:g(sr.div,{"data-side":X,"data-align":q,...p,ref:w,style:{...p.style,animation:G?void 0:"none"}})})})});oV.displayName=j9;var aV="PopperArrow",Ehe={top:"bottom",right:"left",bottom:"top",left:"right"},lV=D.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=yhe(aV,i),o=Ehe[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(mhe,{...r,ref:n,style:{...r.style,display:"block"}})})});lV.displayName=aV;function vhe(e){return e!==null}var whe=e=>({name:"transformOrigin",options:e,fn(t){var U,y,E;const{placement:n,rects:i,middlewareData:r}=t,o=((U=r.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=cV(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,h=(((E=r.arrow)==null?void 0:E.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function cV(e){const[t,n="center"]=e.split("-");return[t,n]}var _he=iV,uV=sV,The=oV,She=lV,Ihe="Portal",dV=D.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[r,s]=D.useState(!1);gd(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?WK.createPortal(g(sr.div,{...i,ref:t}),o):null});dV.displayName=Ihe;function xhe(e,t){return D.useReducer((n,i)=>t[n][i]??n,e)}var L5=e=>{const{present:t,children:n}=e,i=Che(t),r=typeof n=="function"?n({present:i.isPresent}):D.Children.only(n),s=lo(i.ref,Ahe(r));return typeof n=="function"||i.isPresent?D.cloneElement(r,{ref:s}):null};L5.displayName="Presence";function Che(e){const[t,n]=D.useState(),i=D.useRef({}),r=D.useRef(e),s=D.useRef("none"),o=e?"mounted":"unmounted",[a,l]=xhe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=mU(i.current);s.current=a==="mounted"?c:"none"},[a]),gd(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=mU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),gd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=mU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},f=h=>{h.target===t&&(s.current=mU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function mU(e){return(e==null?void 0:e.animationName)||"none"}function Ahe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Y9({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=Mhe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=rl(n),l=D.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function Mhe({defaultProp:e,onChange:t}){const n=D.useState(e),[i]=n,r=D.useRef(i),s=rl(t);return D.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var Rhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qd=new WeakMap,pU=new WeakMap,UU={},oE=0,fV=function(e){return e&&(e.host||fV(e.parentNode))},khe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=fV(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Lhe=function(e,t,n,i){var r=khe(t,Array.isArray(e)?e:[e]);UU[n]||(UU[n]=new WeakMap);var s=UU[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(qd.get(f)||0)+1,U=(s.get(f)||0)+1;qd.set(f,p),s.set(f,U),o.push(f),p===1&&m&&pU.set(f,!0),U===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(t),a.clear(),oE++,function(){o.forEach(function(d){var f=qd.get(d)-1,h=s.get(d)-1;qd.set(d,f),s.set(d,h),f||(pU.has(d)||d.removeAttribute(i),pU.delete(d)),h||d.removeAttribute(n)}),oE--,oE||(qd=new WeakMap,qd=new WeakMap,pU=new WeakMap,UU={})}},Dhe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=Rhe(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Lhe(i,r,n,"aria-hidden")):function(){return null}},Mo=function(){return Mo=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Mo.apply(this,arguments)};function hV(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Ohe(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var g2="right-scroll-bar-position",m2="width-before-scroll-bar",Nhe="with-scroll-bars-hidden",Phe="--removed-body-scroll-bar-size";function aE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Fhe(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var Bhe=typeof window<"u"?D.useLayoutEffect:D.useEffect,cM=new WeakMap;function zhe(e,t){var n=Fhe(null,function(i){return e.forEach(function(r){return aE(r,i)})});return Bhe(function(){var i=cM.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||aE(a,null)}),s.forEach(function(a){r.has(a)||aE(a,o)})}cM.set(n,e)},[e]),n}function Hhe(e){return e}function Vhe(e,t){t===void 0&&(t=Hhe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function $he(e){e===void 0&&(e={});var t=Vhe(null);return t.options=Mo({async:!0,ssr:!1},e),t}var gV=function(e){var t=e.sideCar,n=hV(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return D.createElement(i,Mo({},n))};gV.isSideCarExport=!0;function Ghe(e,t){return e.useMedium(t),gV}var mV=$he(),lE=function(){},D5=D.forwardRef(function(e,t){var n=D.useRef(null),i=D.useState({onScrollCapture:lE,onWheelCapture:lE,onTouchMoveCapture:lE}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,U=e.as,y=U===void 0?"div":U,E=e.gapMode,w=hV(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,x=zhe([n,t]),M=Mo(Mo({},w),r);return D.createElement(D.Fragment,null,u&&D.createElement(v,{sideCar:mV,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:E}),o?D.cloneElement(D.Children.only(a),Mo(Mo({},M),{ref:x})):D.createElement(y,Mo({},M,{className:l,ref:x}),a))});D5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};D5.classNames={fullWidth:m2,zeroRight:g2};var Xhe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xhe();return t&&e.setAttribute("nonce",t),e}function Yhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Whe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Khe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=jhe())&&(Yhe(t,n),Whe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Zhe=function(){var e=Khe();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},pV=function(){var e=Zhe(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},qhe={left:0,top:0,right:0,gap:0},cE=function(e){return parseInt(e||"",10)||0},Qhe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[cE(n),cE(i),cE(r)]},Jhe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qhe;var t=Qhe(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},ege=pV(),ih="data-scroll-locked",tge=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nhe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(ih,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(g2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(m2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(g2," .").concat(g2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(m2," .").concat(m2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ih,`] {
    `).concat(Phe,": ").concat(a,`px;
  }
`)},uM=function(){var e=parseInt(document.body.getAttribute(ih)||"0",10);return isFinite(e)?e:0},nge=function(){D.useEffect(function(){return document.body.setAttribute(ih,(uM()+1).toString()),function(){var e=uM()-1;e<=0?document.body.removeAttribute(ih):document.body.setAttribute(ih,e.toString())}},[])},ige=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;nge();var s=D.useMemo(function(){return Jhe(r)},[r]);return D.createElement(ege,{styles:tge(s,!t,r,n?"":"!important")})},U4=!1;if(typeof window<"u")try{var bU=Object.defineProperty({},"passive",{get:function(){return U4=!0,!0}});window.addEventListener("test",bU,bU),window.removeEventListener("test",bU,bU)}catch{U4=!1}var Qd=U4?{passive:!1}:!1,rge=function(e){return e.tagName==="TEXTAREA"},UV=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!rge(e)&&n[t]==="visible")},sge=function(e){return UV(e,"overflowY")},oge=function(e){return UV(e,"overflowX")},dM=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=bV(e,i);if(r){var s=yV(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},age=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},lge=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},bV=function(e,t){return e==="v"?sge(t):oge(t)},yV=function(e,t){return e==="v"?age(t):lge(t)},cge=function(e,t){return e==="h"&&t==="rtl"?-1:1},uge=function(e,t,n,i,r){var s=cge(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=yV(e,a),m=h[0],p=h[1],U=h[2],y=p-U-s*m;(m||y)&&bV(e,a)&&(d+=y,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},yU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fM=function(e){return[e.deltaX,e.deltaY]},hM=function(e){return e&&"current"in e?e.current:e},dge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fge=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hge=0,Jd=[];function gge(e){var t=D.useRef([]),n=D.useRef([0,0]),i=D.useRef(),r=D.useState(hge++)[0],s=D.useState(pV)[0],o=D.useRef(e);D.useEffect(function(){o.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=Ohe([e.lockRef.current],(e.shards||[]).map(hM),!0).filter(Boolean);return p.forEach(function(U){return U.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(p,U){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var y=yU(p),E=n.current,w="deltaX"in p?p.deltaX:E[0]-y[0],v="deltaY"in p?p.deltaY:E[1]-y[1],x,M=p.target,_=Math.abs(w)>Math.abs(v)?"h":"v";if("touches"in p&&_==="h"&&M.type==="range")return!1;var T=dM(_,M);if(!T)return!0;if(T?x=_:(x=_==="v"?"h":"v",T=dM(_,M)),!T)return!1;if(!i.current&&"changedTouches"in p&&(w||v)&&(i.current=x),!x)return!0;var I=i.current||x;return uge(I,U,p,I==="h"?w:v)},[]),l=D.useCallback(function(p){var U=p;if(!(!Jd.length||Jd[Jd.length-1]!==s)){var y="deltaY"in U?fM(U):yU(U),E=t.current.filter(function(x){return x.name===U.type&&(x.target===U.target||U.target===x.shadowParent)&&dge(x.delta,y)})[0];if(E&&E.should){U.cancelable&&U.preventDefault();return}if(!E){var w=(o.current.shards||[]).map(hM).filter(Boolean).filter(function(x){return x.contains(U.target)}),v=w.length>0?a(U,w[0]):!o.current.noIsolation;v&&U.cancelable&&U.preventDefault()}}},[]),c=D.useCallback(function(p,U,y,E){var w={name:p,delta:U,target:y,should:E,shadowParent:mge(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(v){return v!==w})},1)},[]),u=D.useCallback(function(p){n.current=yU(p),i.current=void 0},[]),d=D.useCallback(function(p){c(p.type,fM(p),p.target,a(p,e.lockRef.current))},[]),f=D.useCallback(function(p){c(p.type,yU(p),p.target,a(p,e.lockRef.current))},[]);D.useEffect(function(){return Jd.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Qd),document.addEventListener("touchmove",l,Qd),document.addEventListener("touchstart",u,Qd),function(){Jd=Jd.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Qd),document.removeEventListener("touchmove",l,Qd),document.removeEventListener("touchstart",u,Qd)}},[]);var h=e.removeScrollBar,m=e.inert;return D.createElement(D.Fragment,null,m?D.createElement(s,{styles:fge(r)}):null,h?D.createElement(ige,{gapMode:e.gapMode}):null)}function mge(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pge=Ghe(mV,gge);var EV=D.forwardRef(function(e,t){return D.createElement(D5,Mo({},e,{ref:t,sideCar:pge}))});EV.classNames=D5.classNames;var W9="Popover",[vV,Sxe]=op(W9,[tV]),lp=tV(),[Uge,Zc]=vV(W9),wV=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=lp(t),l=D.useRef(null),[c,u]=D.useState(!1),[d=!1,f]=Y9({prop:i,defaultProp:r,onChange:s});return g(_he,{...a,children:g(Uge,{scope:t,contentId:P9(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:D.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:D.useCallback(()=>u(!0),[]),onCustomAnchorRemove:D.useCallback(()=>u(!1),[]),modal:o,children:n})})};wV.displayName=W9;var _V="PopoverAnchor",bge=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(_V,n),s=lp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return D.useEffect(()=>(o(),()=>a()),[o,a]),g(uV,{...s,...i,ref:t})});bge.displayName=_V;var TV="PopoverTrigger",SV=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(TV,n),s=lp(n),o=lo(t,r.triggerRef),a=g(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":RV(r.open),...i,ref:o,onClick:Ti(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(uV,{asChild:!0,...s,children:a})});SV.displayName=TV;var K9="PopoverPortal",[yge,Ege]=vV(K9,{forceMount:void 0}),IV=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=Zc(K9,t);return g(yge,{scope:t,forceMount:n,children:g(L5,{present:n||s.open,children:g(dV,{asChild:!0,container:r,children:i})})})};IV.displayName=K9;var Nh="PopoverContent",xV=D.forwardRef((e,t)=>{const n=Ege(Nh,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=Zc(Nh,e.__scopePopover);return g(L5,{present:i||s.open,children:s.modal?g(vge,{...r,ref:t}):g(wge,{...r,ref:t})})});xV.displayName=Nh;var vge=D.forwardRef((e,t)=>{const n=Zc(Nh,e.__scopePopover),i=D.useRef(null),r=lo(t,i),s=D.useRef(!1);return D.useEffect(()=>{const o=i.current;if(o)return Dhe(o)},[]),g(EV,{as:Jm,allowPinchZoom:!0,children:g(CV,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ti(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ti(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ti(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wge=D.forwardRef((e,t)=>{const n=Zc(Nh,e.__scopePopover),i=D.useRef(!1),r=D.useRef(!1);return g(CV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),CV=D.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Zc(Nh,n),h=lp(n);return afe(),g(HH,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(BH,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(The,{"data-state":RV(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),AV="PopoverClose",_ge=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Zc(AV,n);return g(sr.button,{type:"button",...i,ref:t,onClick:Ti(e.onClick,()=>r.onOpenChange(!1))})});_ge.displayName=AV;var Tge="PopoverArrow",MV=D.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=lp(n);return g(She,{...r,...i,ref:t})});MV.displayName=Tge;function RV(e){return e?"open":"closed"}var O5=wV,N5=SV,Sge=IV,Z9=xV,kV=MV;const LV=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),DV=ae.createContext(null),Ii=()=>ae.useContext(DV),OV=e=>{const[t,n]=D.useState(null),i=ii(),{theme:r}=Ii(),{container:s}=sa();return D.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",r===Ae.DARK))},[t,r,i.editor.isMobile,e==null?void 0:e.className]),D.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function q9(e,t,n){D.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n==null?void 0:n(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(ee.POINTER_DOWN,i),document.addEventListener(ee.TOUCH_START,i),()=>{document.removeEventListener(ee.POINTER_DOWN,i),document.removeEventListener(ee.TOUCH_START,i)}},[e,t,n])}const P5=e=>{const t=D.useRef(e);return Object.assign(t.current,e),t.current},F5=Kt(null),Ige=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=OV({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=Ii(),o=uy(),a=go(),l=ze(o,s),c=P5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=sa();D.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:M,clientY:_})=>{const T=m.getImageData((M-s.offsetLeft)*window.devicePixelRatio,(_-s.offsetTop)*window.devicePixelRatio,1,1).data;return mie(T[0],T[1],T[2])},U=({clientX:M,clientY:_,altKey:T})=>{f.style.top=`${_+20}px`,f.style.left=`${M+20}px`;const I=p({clientX:M,clientY:_});h&&c.onChange(i,I,c.selectedElements,{altKey:T}),f.style.background=I},y=()=>{c.onCancel()},E=(M,_)=>{c.onSelect(M,_)},w=M=>{h=!0,M.stopImmediatePropagation()},v=M=>{h=!1,u==null||u.focus(),M.stopImmediatePropagation(),M.preventDefault(),E(p(M),M)},x=M=>{M.key===H.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),y())};return r.tabIndex=-1,r.focus(),U({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(ee.KEYDOWN,x),r.addEventListener(ee.POINTER_DOWN,w),r.addEventListener(ee.POINTER_UP,v),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener(ee.BLUR,y),()=>{h=!1,r.removeEventListener(ee.KEYDOWN,x),r.removeEventListener(ee.POINTER_DOWN,w),r.removeEventListener(ee.POINTER_UP,v),window.removeEventListener("pointermove",U),window.removeEventListener(ee.BLUR,y)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=D.useRef(null);return q9(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?Sn.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},Qs=ae.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:pe("Island",n),style:{"--padding":t,...i},ref:r,children:e})),NV=ae.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=ii();return g(Sge,{container:t,children:P(Z9,{ref:c,className:pe("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!gre(document.activeElement)&&t.focus(),r()},children:[g(Qs,{padding:3,style:i,children:n}),g(kV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),B5=({palette:e,color:t})=>{if(!t)return null;for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},b4=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),PV=({color:e,palette:t})=>!Object.values(t).flat().includes(e),xge=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return PV({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,uie)},gg=Kt(null),gM=(e,t,n)=>(e*299+t*587+n*114)/1e3,Q9=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return gM(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return gM(n,i,r)<t},Cge=({color:e,onChange:t,label:n,colorPickerType:i,placeholder:r})=>{const s=ii(),[o,a]=D.useState(e),[l,c]=mn(gg);D.useEffect(()=>{a(e)},[e]);const u=D.useCallback(p=>{const U=p.toLowerCase(),y=Nge(U);y&&t(y),a(U)},[t]),d=D.useRef(null),f=D.useRef(null);D.useEffect(()=>{d.current&&d.current.focus()},[l]);const[h,m]=mn(F5);return D.useEffect(()=>()=>{m(null)},[m]),P("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:l==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:p=>{u(p.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:p=>{var U;p.key!==H.TAB&&(p.key===H.ESCAPE&&((U=f.current)==null||U.focus()),p.stopPropagation())},placeholder:r}),!s.editor.isMobile&&P(ge,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:f,className:pe("excalidraw-eye-dropper-trigger",{selected:h}),onClick:()=>m(p=>p?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:i}),title:`${L("labels.eyeDropper")} — ${H.I.toLocaleUpperCase()} or ${Q("Alt")} `,children:gde})]})]})},J9=({color:e,keyLabel:t,isShade:n=!1})=>P("div",{className:"color-picker__button__hotkey-label",style:{color:Q9(e)?"#fff":"#000"},children:[n&&"⇧",t]}),Age=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=mn(gg),o=D.useRef(null);return D.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>P("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(J9,{color:a,keyLabel:l+1})]},l))})},Mge=({palette:e,color:t,onChange:n,activeShade:i})=>{const r=B5({color:t,palette:e}),[s,o]=mn(gg),a=D.useRef(null);return D.useEffect(()=>{a.current&&s==="baseColors"&&a.current.focus()},[r==null?void 0:r.colorName,s]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([l,c],u)=>{const d=(Array.isArray(c)?c[i]:c)||"transparent",f=b4[u],h=L(`colors.${l.replace(/\d+/,"")}`,null,"");return P("button",{ref:(r==null?void 0:r.colorName)===l?a:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:(r==null?void 0:r.colorName)===l,"is-transparent":d==="transparent"||!1}),onClick:()=>{n(d),o("baseColors")},title:`${h}${d.startsWith("#")?` ${d}`:""} — ${f}`,"aria-label":`${h} — ${f}`,style:{"--swatch-color":d},"data-testid":`color-${l}`,children:[g("div",{className:"color-picker__button-outline"}),g(J9,{color:d,keyLabel:f})]},l)})})},p2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Rge=({color:e,onChange:t,palette:n})=>{const i=B5({color:e||"transparent",palette:n}),[r,s]=mn(gg),o=D.useRef(null);if(D.useEffect(()=>{o.current&&r==="shades"&&o.current.focus()},[i,r]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>P("button",{ref:d===l&&r==="shades"?o:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),s("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(J9,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return P("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:L("colorPicker.noShades")})]})},uE=(e,t,n)=>{const i=Math.ceil(n/df);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+df;return r>=n?t%df:r}case"ArrowUp":{const r=t-df,s=r<0?df*i+r:r;return s>=n?void 0:s}}},kge=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(b4.includes(e.key)){const a=b4.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},Lge=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[H.CTRL_OR_CMD])return!1;if(e.key===H.ESCAPE)return u(e),!0;if(e.key===H.ALT)return c(!0),!0;if(e.key===H.I)return c(),!0;const d=B5({color:i,palette:n});if(e.key===H.TAB){const f={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((E,[w,v])=>(v&&E.push(w),E),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,U=m+p>h.length-1?0:m+p<0?h.length-1:m+p,y=h[U];return y&&o(y),y==="custom"?r(s[0]):y==="baseColors"&&(Object.entries(n).find(([w,v])=>Array.isArray(v)?v.includes(i):v===i?w:null)||r(He.black)),e.preventDefault(),e.stopPropagation(),!0}if(kge({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=uE(e.key,f,df);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=uE(e.key,m,h.length);if(p!==void 0){const U=h[p],y=n[U];return r(Array.isArray(y)?y[l]:y),!0}}if(t==="custom"){const f=i!=null?s.indexOf(i):0,h=uE(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},Dge=ae.forwardRef(({color:e,onChange:t,type:n,elements:i,palette:r,updateData:s,children:o,onEyeDropperToggle:a,onEscape:l},c)=>{const[u]=ae.useState(()=>n==="canvasBackground"?[]:xge(i,n,r)),[d,f]=mn(gg),h=B5({color:e,palette:r});D.useEffect(()=>{if(!d){const y=!!e&&PV({color:e,palette:r}),E=y&&!u.includes(e);f(E?null:y?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,r,f,h,u]);const[m,p]=D.useState((h==null?void 0:h.shade)??(n==="elementBackground"?y1:b1));D.useEffect(()=>{(h==null?void 0:h.shade)!=null&&p(h.shade);const y=E=>{E.key===H.ALT&&a(!1)};return document.addEventListener(ee.KEYUP,y,{capture:!0}),()=>{document.removeEventListener(ee.KEYUP,y,{capture:!0})}},[h,a]);const U=ae.useRef(null);return D.useImperativeHandle(c,()=>U.current),D.useEffect(()=>{var y;(y=U==null?void 0:U.current)==null||y.focus()},[]),g("div",{role:"dialog","aria-modal":"true","aria-label":L("labels.colorPicker"),children:P("div",{ref:U,onKeyDown:y=>{Lge({event:y,activeColorPickerSection:d,palette:r,color:e,onChange:t,onEyeDropperToggle:a,customColors:u,setActiveColorPickerSection:f,updateData:s,activeShade:m,onEscape:l})&&(y.preventDefault(),y.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&P("div",{children:[g(p2,{children:L("colorPicker.mostUsedCustomColors")}),g(Age,{colors:u,color:e,label:L("colorPicker.mostUsedCustomColors"),onChange:t})]}),P("div",{children:[g(p2,{children:L("colorPicker.colors")}),g(Mge,{color:e,palette:r,onChange:t,activeShade:m})]}),P("div",{children:[g(p2,{children:L("colorPicker.shades")}),g(Rge,{color:e,onChange:t,palette:r})]}),o]})})}),Oge=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=$P),t==="elementBackground"&&(r=GP),t==="canvasBackground"&&(r=XP),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:pe("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!Q9(s,HP)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},mM=e=>{const t=new Option().style;return t.color=e,!!t.color},Nge=e=>Ys(e)?e:mM(`#${e}`)?`#${e}`:mM(e)?e:null,Pge=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=He,updateData:o})=>{const{container:a}=sa(),[,l]=mn(gg),[c,u]=mn(F5),d=P("div",{children:[g(p2,{children:L("colorPicker.hexCode")}),g(Cge,{color:t||"",label:i,onChange:m=>{n(m)},colorPickerType:e,placeholder:L("colorPicker.color")})]}),f=D.useRef(null),h=()=>{var m;(m=f.current)==null||m.focus()};return g(NV,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?g(Dge,{ref:f,palette:s,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},type:e,elements:r,updateData:o,children:d}):d})},Fge=({label:e,color:t,type:n})=>g(N5,{type:"button",className:pe("color-picker__button active-color properties-trigger",{"is-transparent":!t||t==="transparent","has-outline":!t||!Q9(t,HP)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:L(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline",children:!t&&pue})}),e_=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=He,topPicks:o,updateData:a,appState:l})=>g("div",{children:P("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Oge,{activeColor:t,onChange:n,type:e,topPicks:o}),g(LV,{}),P(O5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Fge,{color:t,label:i,type:e}),l.openPopup===e&&g(Pge,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a})]})]})}),Bge=""+new URL("../fonts/CascadiaCode/CascadiaCode-Regular.woff2",import.meta.url).href,zge=[{uri:Bge}],Hge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",import.meta.url).href,Vge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",import.meta.url).href,$ge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",import.meta.url).href,Gge=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",import.meta.url).href,Xge=[{uri:Hge,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:Gge,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:$ge,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:Vge,descriptors:{unicodeRange:"U+3bb"}}],jge=[{uri:Ow}];class Yge{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class t_{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new LH;if(!import.meta.url||t.toString()===import.meta.url)throw new DH;return new t_(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new Yge(this.workerUrl);return t.debounceTerminate=Za(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let pM=typeof Worker<"u";const Wge=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await Zge();return pM?Rc(async()=>{try{const s=await qge(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return pM=!1,xre()&&(s instanceof LH||s instanceof DH)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let dE=null,fE=null;const Kge=async()=>(dE||(dE=be(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]),import.meta.url)),dE),Zge=async()=>(fE||(fE=be(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]),import.meta.url)),fE);let hE=null;const qge=()=>(hE||(hE=Rc(async()=>{const{WorkerUrl:e}=await Kge();return t_.create(e)})),hE);var gE={};const Hf=class Hf{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Hf.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${Hf.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await Wge(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Rc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(Ow))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,Hf.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Hf,"ASSETS_FALLBACK_URL",`https://esm.sh/${gE.PKG_NAME?`${gE.PKG_NAME}@${gE.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let y4=Hf;const Qge=""+new URL("../fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",import.meta.url).href,Jge=""+new URL("../fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",import.meta.url).href,e1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",import.meta.url).href,t1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",import.meta.url).href,n1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",import.meta.url).href,i1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",import.meta.url).href,r1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",import.meta.url).href,s1e=[{uri:n1e,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:r1e,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:i1e,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:e1e,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:Jge,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:Qge,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:t1e,descriptors:{unicodeRange:"U+300-301,U+303"}}],o1e=[{uri:Ow}],a1e=""+new URL("../fonts/LiberationSans/LiberationSans-Regular.woff2",import.meta.url).href,l1e=[{uri:a1e}],c1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",import.meta.url).href,u1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",import.meta.url).href,d1e=[{uri:c1e,descriptors:{unicodeRange:pu.LATIN_EXT}},{uri:u1e,descriptors:{unicodeRange:pu.LATIN}}],f1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",import.meta.url).href,h1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",import.meta.url).href,g1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",import.meta.url).href,m1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",import.meta.url).href,p1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",import.meta.url).href,U1e=[{uri:g1e,descriptors:{unicodeRange:pu.CYRILIC_EXT,weight:"500"}},{uri:f1e,descriptors:{unicodeRange:pu.CYRILIC,weight:"500"}},{uri:p1e,descriptors:{unicodeRange:pu.VIETNAMESE,weight:"500"}},{uri:m1e,descriptors:{unicodeRange:pu.LATIN_EXT,weight:"500"}},{uri:h1e,descriptors:{unicodeRange:pu.LATIN,weight:"500"}}],b1e=""+new URL("../fonts/Virgil/Virgil-Regular.woff2",import.meta.url).href,y1e=[{uri:b1e}],E1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",import.meta.url).href,v1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",import.meta.url).href,w1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",import.meta.url).href,_1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",import.meta.url).href,T1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",import.meta.url).href,S1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",import.meta.url).href,I1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",import.meta.url).href,x1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",import.meta.url).href,C1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",import.meta.url).href,A1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",import.meta.url).href,M1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",import.meta.url).href,R1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",import.meta.url).href,k1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",import.meta.url).href,L1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",import.meta.url).href,D1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",import.meta.url).href,O1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",import.meta.url).href,N1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",import.meta.url).href,P1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",import.meta.url).href,F1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",import.meta.url).href,B1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",import.meta.url).href,z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",import.meta.url).href,H1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",import.meta.url).href,V1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",import.meta.url).href,$1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",import.meta.url).href,G1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",import.meta.url).href,X1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",import.meta.url).href,j1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",import.meta.url).href,Y1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",import.meta.url).href,W1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",import.meta.url).href,K1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",import.meta.url).href,Z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",import.meta.url).href,q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",import.meta.url).href,Q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",import.meta.url).href,J1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",import.meta.url).href,eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",import.meta.url).href,tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",import.meta.url).href,nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",import.meta.url).href,ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",import.meta.url).href,rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",import.meta.url).href,sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",import.meta.url).href,ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",import.meta.url).href,ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",import.meta.url).href,lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",import.meta.url).href,cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",import.meta.url).href,ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",import.meta.url).href,dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",import.meta.url).href,fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",import.meta.url).href,hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",import.meta.url).href,gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",import.meta.url).href,mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",import.meta.url).href,pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",import.meta.url).href,Ume=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",import.meta.url).href,bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",import.meta.url).href,yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",import.meta.url).href,Eme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",import.meta.url).href,vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",import.meta.url).href,wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",import.meta.url).href,_me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",import.meta.url).href,Tme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",import.meta.url).href,Sme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",import.meta.url).href,Ime=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",import.meta.url).href,xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",import.meta.url).href,Cme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",import.meta.url).href,Ame=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",import.meta.url).href,Mme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",import.meta.url).href,Rme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",import.meta.url).href,kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",import.meta.url).href,Lme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",import.meta.url).href,Dme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",import.meta.url).href,Ome=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",import.meta.url).href,Nme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",import.meta.url).href,Pme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",import.meta.url).href,Fme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",import.meta.url).href,Bme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",import.meta.url).href,zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",import.meta.url).href,Hme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",import.meta.url).href,Vme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",import.meta.url).href,$me=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",import.meta.url).href,Gme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",import.meta.url).href,Xme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",import.meta.url).href,jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",import.meta.url).href,Yme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",import.meta.url).href,Wme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",import.meta.url).href,Kme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",import.meta.url).href,Zme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",import.meta.url).href,qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",import.meta.url).href,Qme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",import.meta.url).href,Jme=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",import.meta.url).href,e0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",import.meta.url).href,t0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",import.meta.url).href,n0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",import.meta.url).href,i0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",import.meta.url).href,r0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",import.meta.url).href,s0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",import.meta.url).href,o0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",import.meta.url).href,a0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",import.meta.url).href,l0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",import.meta.url).href,c0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",import.meta.url).href,u0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",import.meta.url).href,d0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",import.meta.url).href,f0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",import.meta.url).href,h0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",import.meta.url).href,g0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",import.meta.url).href,m0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",import.meta.url).href,p0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",import.meta.url).href,U0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",import.meta.url).href,b0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",import.meta.url).href,y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",import.meta.url).href,E0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",import.meta.url).href,v0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",import.meta.url).href,w0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",import.meta.url).href,_0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",import.meta.url).href,T0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",import.meta.url).href,S0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",import.meta.url).href,I0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",import.meta.url).href,x0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",import.meta.url).href,C0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",import.meta.url).href,A0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",import.meta.url).href,M0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",import.meta.url).href,R0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",import.meta.url).href,k0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",import.meta.url).href,L0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",import.meta.url).href,D0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",import.meta.url).href,O0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",import.meta.url).href,N0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",import.meta.url).href,P0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",import.meta.url).href,F0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",import.meta.url).href,B0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",import.meta.url).href,z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",import.meta.url).href,H0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",import.meta.url).href,V0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",import.meta.url).href,$0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",import.meta.url).href,G0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",import.meta.url).href,X0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",import.meta.url).href,j0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",import.meta.url).href,Y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",import.meta.url).href,W0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",import.meta.url).href,K0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",import.meta.url).href,Z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",import.meta.url).href,q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",import.meta.url).href,Q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",import.meta.url).href,J0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",import.meta.url).href,epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",import.meta.url).href,tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",import.meta.url).href,npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",import.meta.url).href,ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",import.meta.url).href,rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",import.meta.url).href,spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",import.meta.url).href,ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",import.meta.url).href,ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",import.meta.url).href,lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",import.meta.url).href,cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",import.meta.url).href,upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",import.meta.url).href,dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",import.meta.url).href,fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",import.meta.url).href,hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",import.meta.url).href,gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",import.meta.url).href,mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",import.meta.url).href,ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",import.meta.url).href,Upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",import.meta.url).href,bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",import.meta.url).href,ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",import.meta.url).href,Epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",import.meta.url).href,vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",import.meta.url).href,wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",import.meta.url).href,_pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",import.meta.url).href,Tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",import.meta.url).href,Spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",import.meta.url).href,Ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",import.meta.url).href,xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",import.meta.url).href,Cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",import.meta.url).href,Ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",import.meta.url).href,Mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",import.meta.url).href,Rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",import.meta.url).href,kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",import.meta.url).href,Lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",import.meta.url).href,Dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",import.meta.url).href,Ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",import.meta.url).href,Npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",import.meta.url).href,Ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",import.meta.url).href,Fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",import.meta.url).href,Bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",import.meta.url).href,zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",import.meta.url).href,Hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",import.meta.url).href,Vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",import.meta.url).href,$pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",import.meta.url).href,Gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",import.meta.url).href,Xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",import.meta.url).href,jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",import.meta.url).href,Ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",import.meta.url).href,Wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",import.meta.url).href,Kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",import.meta.url).href,Zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",import.meta.url).href,qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",import.meta.url).href,Qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",import.meta.url).href,Jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",import.meta.url).href,eUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",import.meta.url).href,tUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",import.meta.url).href,nUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",import.meta.url).href,iUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",import.meta.url).href,rUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",import.meta.url).href,sUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",import.meta.url).href,oUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",import.meta.url).href,aUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",import.meta.url).href,lUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",import.meta.url).href,cUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",import.meta.url).href,uUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",import.meta.url).href,dUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",import.meta.url).href,fUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",import.meta.url).href,hUe=[{uri:x1e,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:R1e,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:M1e,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:k1e,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:D1e,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:O1e,descriptors:{unicodeRange:"U+d520-d608"}},{uri:L1e,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:N1e,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:F1e,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:B1e,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:A1e,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:z1e,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:H1e,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:w1e,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:C1e,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:V1e,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:v1e,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:$1e,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:G1e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:X1e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:j1e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:Y1e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:W1e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:K1e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:Z1e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:q1e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:Q1e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:J1e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:eme,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:tme,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:P1e,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:nme,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:ime,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:rme,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:sme,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:ome,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:ame,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:lme,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:cme,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:mme,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:pme,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:ume,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:Ume,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:bme,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:yme,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:hme,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:Eme,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:gme,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:vme,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:wme,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:_me,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:Tme,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:Sme,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:Ime,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:xme,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:Cme,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:Ame,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:Mme,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:Rme,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:kme,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:Lme,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:Dme,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:Ome,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:Nme,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:Pme,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:Fme,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:Bme,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:zme,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:Hme,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:Vme,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:$me,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:T1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:Gme,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:Xme,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:jme,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:Yme,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Wme,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:Kme,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:Zme,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:qme,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:E1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:Qme,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:fme,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:Jme,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:e0e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:t0e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:n0e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:i0e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:r0e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:s0e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:o0e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:a0e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:l0e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:c0e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:u0e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:d0e,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:f0e,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:h0e,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:g0e,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:m0e,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:p0e,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:U0e,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:b0e,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:y0e,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:E0e,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:dme,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:v0e,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:w0e,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:_0e,descriptors:{unicodeRange:"U+487a-4932"}},{uri:T0e,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:S0e,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:I0e,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:x0e,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:C0e,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:A0e,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:M0e,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:R0e,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:k0e,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:L0e,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:D0e,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:O0e,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:N0e,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:P0e,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:F0e,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:B0e,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:z0e,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:H0e,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:V0e,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:$0e,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:G0e,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:X0e,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:j0e,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:Y0e,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:W0e,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:K0e,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:Z0e,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:q0e,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:Q0e,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:J0e,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:epe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:tpe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:npe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:ipe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:rpe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:spe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:ope,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:ape,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:lpe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:cpe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:upe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:dpe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:fpe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:hpe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:gpe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:mpe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:ppe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:Upe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:bpe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:ype,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Epe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:vpe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:S1e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:wpe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:_pe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Tpe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Spe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:_1e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Ipe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:xpe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:Cpe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:Mpe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Rpe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:kpe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:Lpe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Dpe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Ope,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:Npe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Ppe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Fpe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:Bpe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:zpe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:Hpe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:Vpe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:I1e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:$pe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:Gpe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:Xpe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:jpe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:Ype,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:Wpe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:Kpe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:Zpe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:qpe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:Qpe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:Jpe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:eUe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:tUe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:nUe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:iUe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:rUe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:sUe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:oUe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:Ape,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:aUe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:lUe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:cUe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:uUe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:dUe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:fUe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Ze=class Ze{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>Ze.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;Ze.loadedFontsCache.has(o)||(Ze.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(ue(s)){i=!0,$t.delete(s),J0.clearCache(pt(s));const o=$n(s,r);o&&$t.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=Ze.getCharsPerFamily(this.scene.getNonDeletedElements());return Ze.loadFontFaces(t,n)});this.scene=t}static get registered(){return Ze._registered?Ze._initialized||(Ze._registered=new Map([...Ze.init().entries(),...Ze._registered.entries()])):Ze._registered=Ze.init(),Ze._registered}get registered(){return Ze.registered}static async generateFontFaceDeclarations(t){const n=Ze.getUniqueFamilies(t),i=Ze.getCharsPerFamily(t),r=n.find(l=>KP(l).includes(Rf));if(r){const l=Ze.getCharacters(i,r);if(voe(l)){const c=kf[Rf];i[c]=new Set(l),n.unshift(kf[Rf])}}const s=Ze.fontFacesStylesGenerator(n,i),o=3,a=await new sC(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of Ze.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=Ze.fontFacesLoader(t,n),r=10;return(await new sC(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=pt({fontFamily:r,fontSize:16}),o=Ze.getCharacters(n,r);window.document.fonts.check(s,o)||(yield Rc(async()=>{var a;try{const l=await window.document.fonts.load(s,o);return[i,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=Ze.registered.get(r))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=Ze.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,Ze.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of s.entries())yield Rc(async()=>{try{const c=Ze.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=ct[t]??kf[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new y4(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=ct[i]??kf[i],o=_h[s]??_h[ct.Excalifont];Ze.register.call(t,i,o,...r)};return n("Cascadia",...zge),n("Comic Shanns",...Xge),n("Excalifont",...s1e),n("Helvetica",...o1e),n("Liberation Sans",...l1e),n("Lilita One",...d1e),n("Nunito",...U1e),n("Virgil",...y1e),n(Rf,...hUe),n(Vm,...jge),Ze._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(ue(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(ue(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(Ze.registered.keys())}};F(Ze,"loadedFontsCache",new Set),F(Ze,"_registered"),F(Ze,"_initialized",!1),F(Ze,"loadElementsFonts",async t=>{const n=Ze.getUniqueFamilies(t),i=Ze.getCharsPerFamily(t);return Ze.loadFontFaces(n,i)});let Ga=Ze;const FV=ae.forwardRef(({className:e,placeholder:t,onChange:n},i)=>P("div",{className:pe("QuickSearch__wrapper",e),children:[hd,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),BV=({className:e,placeholder:t,children:n})=>{const i=!D.Children.count(n);return g("div",{className:pe("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},qb=({children:e,className:t="",style:n,title:i})=>P("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});qb.displayName="DropdownMenuGroup";const zV=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=ii();return P(ge,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!r.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},HV=ae.createContext({}),VV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),$V=(e,t)=>{const n=D.useContext(HV);return u5(e,i=>{var s;const r=new CustomEvent(ee.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(r),r.defaultPrevented||(s=n.onSelect)==null||s.call(n,r)})},_r=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=$V(u,c),h=D.useRef(null);return D.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:VV(s,a,o),title:d.title??d["aria-label"],children:g(zV,{textStyle:l,icon:e,shortcut:r,children:i})})};_r.displayName="DropdownMenuItem";const T1={GREEN:"green",RED:"red",BLUE:"blue"},n_=({type:e=T1.BLUE,children:t})=>{const{theme:n}=hp(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Ae.LIGHT?"1.5px solid white":"none"};switch(e){case T1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case T1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case T1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};n_.displayName="DropdownMenuItemBadge";_r.Badge=n_;const gUe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{var a,l,c;if(!e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===H.F)return(a=t.current)==null||a.focus(),!0;if(e.key===H.ESCAPE)return r(),!0;if(e.key===H.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===H.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===H.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},mUe=e=>{switch(e){case ct.Excalifont:case ct.Virgil:return x5;case ct.Nunito:case ct.Helvetica:return l4;case ct["Lilita One"]:return ede;case ct["Comic Shanns"]:case ct.Cascadia:return vH;default:return l4}},pUe=ae.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=sa(),{fonts:l}=go(),{showDeprecatedFonts:c}=fp(),[u,d]=D.useState(""),f=D.useRef(null),h=D.useMemo(()=>Array.from(Ga.registered.entries()).filter(([T,{metadata:I}])=>!I.private&&!I.fallback).map(([T,{metadata:I,fontFaces:C}])=>{var N,k;const R={value:T,icon:mUe(T),text:((k=(N=C[0])==null?void 0:N.fontFace)==null?void 0:k.family)??"Unknown"};return I.deprecated&&Object.assign(R,{deprecated:I.deprecated,badge:{type:T1.RED,placeholder:L("fontList.badge.old")}}),R}).sort((T,I)=>T.text.toLowerCase()>I.text.toLowerCase()?1:-1),[]),m=D.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=D.useMemo(()=>h.filter(T=>m.has(T.value)),[h,m]),U=D.useMemo(()=>h.filter(T=>!m.has(T.value)&&(c||!T.deprecated)),[h,m,c]),y=D.useMemo(()=>Tre([...p,...U].filter(T=>{var I;return(I=T.text)==null?void 0:I.toLowerCase().includes(u)})),[p,U,u]),E=D.useMemo(()=>{var I;let T;return t?T=y.find(C=>C.value===t):e&&(T=y.find(C=>C.value===e)),!T&&u&&((I=y[0])!=null&&I.value?i(y[0].value):r()),T},[t,e,u,y,i,r]),w=D.useCallback(T=>{gUe({event:T,inputRef:f,hoveredFont:E,filteredFonts:y,onSelect:n,onHover:i,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[E,y,n,i,o]);D.useEffect(()=>(s(),()=>{o()}),[]);const v=D.useMemo(()=>y.filter(T=>m.has(T.value)),[y,m]),x=D.useMemo(()=>y.filter(T=>!m.has(T.value)),[y,m]),M=(T,I)=>P(_r,{icon:T.icon,value:T.value,order:I,textStyle:{fontFamily:Y0({fontFamily:T.value})},hovered:T.value===(E==null?void 0:E.value),selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:C=>{n(Number(C.currentTarget.value))},onMouseMove:()=>{(E==null?void 0:E.value)!==T.value&&i(T.value)},children:[T.text,T.badge&&g(n_,{type:T.badge.type,children:T.badge.placeholder})]},T.value),_=[];return v.length&&_.push(g(qb,{title:L("fontList.sceneFonts"),children:v.map(M)},"group_1")),x.length&&_.push(g(qb,{title:L("fontList.availableFonts"),children:x.map((T,I)=>M(T,I+v.length))},"group_2")),P(NV,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:r,onKeyDown:w,children:[g(FV,{ref:f,placeholder:L("quickSearch.placeholder"),onChange:Za(d,20)}),g(BV,{className:"dropdown-menu fonts manual-hover",placeholder:L("fontList.empty"),children:_.length?_:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),UUe=({selectedFontFamily:e})=>{const t=D.useMemo(()=>!!(e&&!yUe(e)),[e]);return g(N5,{asChild:!0,children:g("div",{children:g(NH,{standalone:!0,icon:M9,title:L("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},GV=[{value:ct.Excalifont,icon:x5,text:L("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:ct.Nunito,icon:l4,text:L("labels.normal"),testId:"font-family-normal"},{value:ct["Comic Shanns"],icon:vH,text:L("labels.code"),testId:"font-family-code"}],bUe=new Set(GV.map(e=>e.value)),yUe=e=>e?bUe.has(e):!1,EUe=ae.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o})=>{const a=D.useMemo(()=>GV,[]),l=D.useCallback(c=>{c&&i(c)},[i]);return P("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g("div",{className:"buttonList",children:g(ia,{type:"button",options:a,value:t,onClick:l})}),g(LV,{}),P(O5,{open:e,onOpenChange:o,children:[g(UUe,{selectedFontFamily:t}),e&&g(pUe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),z5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),E4=({label:e,open:t,openTrigger:n,children:i,className:r,showCollapsedIcon:s=!0})=>P(ge,{children:[P("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,s&&g(z5,{icon:t?Dde:RH})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),vUe=Kt(!1);function wUe({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=ii(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===H.TAB){const p=e.findIndex(y=>y.value===t),U=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[U].value)}else if(E1(h.key)){const p=qm().rtl,U=e.findIndex(y=>y.value===t);if(U!==-1){const y=e.length;let E=U;switch(h.key){case(p?H.ARROW_LEFT:H.ARROW_RIGHT):E=(U+1)%y;break;case(p?H.ARROW_RIGHT:H.ARROW_LEFT):E=(y+U-1)%y;break;case H.ARROW_DOWN:{E=(U+(s??1))%y;break}case H.ARROW_UP:{E=(y+U-(s??1))%y;break}}i(e[E].value)}h.preventDefault()}else(h.key===H.ESCAPE||h.key===H.ENTER)&&(h.preventDefault(),r());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=mn(vUe),u=ae.useMemo(()=>e.slice(0,s),[e,s]),d=ae.useMemo(()=>e.slice(s),[e,s]);D.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>P("button",{type:"button",className:pe("picker-option",{active:t===m.value}),onClick:U=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:U=>{t===m.value&&setTimeout(()=>{U==null||U.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(Z9,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:P("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(E4,{label:L("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function UM({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){var c;const[o,a]=ae.useState(!1),l=ae.useRef(null);return g("div",{children:P(O5,{open:o,onOpenChange:u=>a(u),children:[g(N5,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(wUe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const _Ue=({updateData:e,app:t,testId:n})=>{const i=ae.useRef(null),r=ae.useRef(null),s=t.scene.getSelectedElements(t.state);let o=!0;const a=s.at(0),c=s.reduce((u,d)=>(u!=null&&u!==d.opacity&&(o=!1),u==null||u>d.opacity?d.opacity:u),(a==null?void 0:a.opacity)??null)??t.state.currentItemOpacity;return D.useEffect(()=>{if(i.current&&r.current){const u=i.current,d=r.current,f=u.offsetWidth,h=15,m=c/100*(f-h)+h/2;d.style.left=`${m}px`,u.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${c}%, var(--button-bg) ${c}%, var(--button-bg) 100%)`}},[c]),P("label",{className:"control-label",children:[L("labels.opacity"),P("div",{className:"range-wrapper",children:[g("input",{style:{"--color-slider-track":o?void 0:"var(--button-bg)"},ref:i,type:"range",min:"0",max:"100",step:"10",onChange:u=>{e(+u.target.value)},value:c,className:"range-input","data-testid":n}),g("div",{className:"value-bubble",ref:r,children:c!==0?c:null}),g("div",{className:"zero-label",children:"0"})]})]})},XV=.1,ir=(e,t,n,i=!1)=>{const r=we(ze(e,t,{includeBoundTextElement:i}));return e.map(s=>{var o;return r.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},vr=function(e,t,n,i,r){const s=t.state.editingTextElement,o=Bt(e);let a=null;if(s&&(a=n(s)),!a)if(Gn(o,t.state)){const c=t.scene.getSelectedElements(t.state),u=i===!0?c:c.filter(d=>i(d));a=vF(u,n)??(typeof r=="function"?r(!0):r)}else a=typeof r=="function"?r(!1):r;return a},TUe=(e,t,n)=>Gt(t)||!t.autoResize?t:n.mutateElement(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2}),i_=(e,t,n,i,r)=>{const s=new Set,o=ir(e,t,a=>{if(ue(a)){const l=i(a);s.add(l);let c=Ie(a,{fontSize:l});return $i(c,n.scene.getContainerElement(a),n.scene),c=TUe(a,c,n.scene),c}return a},!0);return ze(e,t,{includeBoundTextElement:!0}).forEach(a=>{ue(a)&&yr(a,n.scene)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:K.IMMEDIATELY}};oe({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:ir(e,t,i=>F7(i.type)?Ie(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:L("labels.stroke")}),g(e_,{topPicks:$P,palette:fie,type:"elementStroke",label:L("labels.stroke"),color:vr(e,i,r=>r.strokeColor,!0,r=>r?null:t.currentItemStrokeColor),onChange:r=>n({currentItemStrokeColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:ir(e,t,i=>Ie(i,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:L("labels.background")}),g(e_,{topPicks:GP,palette:hie,type:"elementBackground",label:L("labels.background"),color:vr(e,i,r=>r.backgroundColor,!0,r=>r?null:t.currentItemBackgroundColor),onChange:r=>n({currentItemBackgroundColor:r}),elements:e,appState:t,updateData:n})]})});oe({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(lt("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:ir(e,t,r=>Ie(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=ze(e,t),s=r.length>0&&r.every(o=>o.fillStyle==="zigzag");return P("fieldset",{children:[g("legend",{children:L("labels.fill")}),g("div",{className:"buttonList",children:g(ia,{type:"button",options:[{value:"hachure",text:`${L(s?"labels.zigzag":"labels.hachure")} (${Q("Alt-Click")})`,icon:s?Sue:Iue,active:s?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:L("labels.crossHatch"),icon:xue,testId:"fill-cross-hatch"},{value:"solid",text:L("labels.solid"),icon:Cue,testId:"fill-solid"}],value:vr(e,i,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,a)=>{const l=a.altKey&&o==="hachure"&&r.every(c=>c.fillStyle==="hachure")?"zigzag":o;n(l)}})})]})}});oe({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ie(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:L("labels.strokeWidth")}),g("div",{className:"buttonList",children:g(ia,{group:"stroke-width",options:[{value:O8.thin,text:L("labels.thin"),icon:EH,testId:"strokeWidth-thin"},{value:O8.bold,text:L("labels.bold"),icon:Aue,testId:"strokeWidth-bold"},{value:O8.extraBold,text:L("labels.extraBold"),icon:Mue,testId:"strokeWidth-extraBold"}],value:vr(e,i,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})})]})});oe({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ie(i,{seed:Yo(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:L("labels.sloppiness")}),g("div",{className:"buttonList",children:g(ia,{group:"sloppiness",options:[{value:0,text:L("labels.architect"),icon:Lue},{value:1,text:L("labels.artist"),icon:Due},{value:2,text:L("labels.cartoonist"),icon:Oue}],value:vr(e,i,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})})]})});oe({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ie(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:L("labels.strokeStyle")}),g("div",{className:"buttonList",children:g(ia,{group:"strokeStyle",options:[{value:"solid",text:L("labels.strokeStyle_solid"),icon:EH},{value:"dashed",text:L("labels.strokeStyle_dashed"),icon:Rue},{value:"dotted",text:L("labels.strokeStyle_dotted"),icon:kue}],value:vr(e,i,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})})]})});oe({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>Ie(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({app:e,updateData:t})=>g(_Ue,{updateData:t,app:e,testId:"opacity"})});oe({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>i_(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:L("labels.fontSize")}),g("div",{className:"buttonList",children:g(ia,{group:"font-size",options:[{value:16,text:L("labels.small"),icon:Zue,testId:"fontSize-small"},{value:20,text:L("labels.medium"),icon:que,testId:"fontSize-medium"},{value:28,text:L("labels.large"),icon:Que,testId:"fontSize-large"},{value:36,text:L("labels.veryLarge"),icon:Jue,testId:"fontSize-veryLarge"}],value:vr(e,i,r=>{if(ue(r))return r.fontSize;const s=Ne(r,i.scene.getNonDeletedElementsMap());return s?s.fontSize:null},r=>ue(r)||Ne(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:t.currentItemFontSize||gl),onChange:r=>n(r)})})]})});const bM=oe({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:A5,trackEvent:!1,perform:(e,t,n,i)=>i_(e,t,i,r=>Math.round(1/(1+XV)*r.fontSize)),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&(e.key===H.CHEVRON_LEFT||e.key===H.COMMA)}),yM=oe({name:"increaseFontSize",label:"labels.increaseFontSize",icon:A5,trackEvent:!1,perform:(e,t,n,i)=>i_(e,t,i,r=>Math.round(r.fontSize*(1+XV))),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&(e.key===H.CHEVRON_RIGHT||e.key===H.PERIOD)});oe({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:ir(e,t,U=>{const y=r==null?void 0:r.get(U.id);return y?Ie(U,{...y}):U},!0),appState:{...t,...a},captureUpdate:K.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=K.EVENTUALLY,d,f=!1;if(l)d=l,u=K.IMMEDIATELY;else if(c){d=c,u=K.EVENTUALLY;const p=ze(e,t,{includeBoundTextElement:!0}).filter(U=>ue(U));if(p.length>200)f=!0;else{let U=0,y=0;for(;U<p.length&&y<5e3;){const E=p[U];y+=(E==null?void 0:E.originalText.length)||0,U++}y>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let U=new Set,y=!1;const E=Array.from(Ga.loadedFontsCache.values()),w=(m=Object.entries(ct).find(([M,_])=>_===d))==null?void 0:m[0];c&&w&&E.some(M=>M.startsWith(w))&&(y=!0),Object.assign(h,{elements:ir(e,t,M=>{if(ue(M)&&(M.fontFamily!==d||l)){const _=Ie(M,{fontFamily:d,lineHeight:Ac(d)}),T=(r==null?void 0:r.get(M.containerId||""))||{},I=i.scene.getContainerElement(M);return o&&I&&T&&i.scene.mutateElement(I,{...T}),y||(U=new Set([...U,...Array.from(_.originalText)])),p.set(_,I),_}return M},!0)});const v=`10px ${Y0({fontFamily:d})}`,x=Array.from(U.values()).join();if(y||window.document.fonts.check(v,x))for(const[M,_]of p)$i(M,_,i.scene);else window.document.fonts.load(v,x).then(M=>{for(const[_,T]of p){const I=i.scene.getElement(_.id),C=T?i.scene.getElement(T.id):null;I&&$i(I,C,i.scene)}i.fonts.onLoaded(M)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=D.useRef(new Map),s=D.useRef(null),[o,a]=D.useState({}),l=D.useRef(!0),c=D.useMemo(()=>{var d;const u=(f,h)=>vr(f,n,m=>{if(ue(m))return m.fontFamily;const p=Ne(m,h);return p?p.fontFamily:null},m=>ue(m)||Ne(m,h)!==null,m=>m?null:t.currentItemFontFamily||jc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=r.current)==null?void 0:d.values())??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n]);return D.useEffect(()=>{s.current=c},[c]),D.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),D.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),P("fieldset",{children:[g("legend",{children:L("labels.fontFamily")}),g(EUe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),r.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:u=>{if(u){r.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);r.current.set(d.id,Ie(f||d,{},!0))}else{const f=ze(e,t,{includeBoundTextElement:!0});for(const h of f)r.current.set(h.id,Ie(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};l.current?i({...o,...d}):a(d),r.current.clear()}}})]})}});oe({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:ir(e,t,r=>{if(ue(r)){const s=Ie(r,{textAlign:n});return $i(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=i.scene.getNonDeletedElementsMap();return P("fieldset",{children:[g("legend",{children:L("labels.textAlign")}),g("div",{className:"buttonList",children:g(ia,{group:"text-align",options:[{value:"left",text:L("labels.left"),icon:tde,testId:"align-left"},{value:"center",text:L("labels.center"),icon:nde,testId:"align-horizontal-center"},{value:"right",text:L("labels.right"),icon:ide,testId:"align-right"}],value:vr(e,i,s=>{if(ue(s))return s.textAlign;const o=Ne(s,r);return o?o.textAlign:null},s=>ue(s)||Ne(s,r)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})})]})}});oe({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:ir(e,t,r=>{if(ue(r)){const s=Ie(r,{verticalAlign:n});return $i(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g("div",{className:"buttonList",children:g(ia,{group:"text-align",options:[{value:Fr.TOP,text:L("labels.alignTop"),icon:g(rde,{theme:t.theme}),testId:"align-top"},{value:Fr.MIDDLE,text:L("labels.centerVertically"),icon:g(ode,{theme:t.theme}),testId:"align-middle"},{value:Fr.BOTTOM,text:L("labels.alignBottom"),icon:g(sde,{theme:t.theme}),testId:"align-bottom"}],value:vr(e,i,r=>{if(ue(r)&&r.containerId)return r.verticalAlign;const s=Ne(r,i.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},r=>ue(r)||Ne(r,i.scene.getNonDeletedElementsMap())!==null,r=>r?null:Fr.MIDDLE),onChange:r=>n(r)})})})});oe({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>he(i)?i:Ie(i,{roundness:n==="round"?{type:Dd(i.type)?gn.ADAPTIVE_RADIUS:gn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const s=JF(Bt(e),t).some(o=>{var a;return((a=o.roundness)==null?void 0:a.type)===gn.LEGACY});return P("fieldset",{children:[g("legend",{children:L("labels.edges")}),g("div",{className:"buttonList",children:g(ia,{group:"edges",options:[{value:"sharp",text:L("labels.sharp"),icon:Nue},{value:"round",text:L("labels.round"),icon:Pue}],value:vr(e,i,o=>s?null:o.roundness?"round":"sharp",o=>!Me(o)&&o.hasOwnProperty("roundness"),o=>o?null:t.currentItemRoundness),onChange:o=>n(o)})})]})}});const EM=e=>[{value:null,text:L("labels.arrowhead_none"),keyBinding:"q",icon:Fue},{value:"arrow",text:L("labels.arrowhead_arrow"),keyBinding:"w",icon:g(Bue,{flip:e})},{value:"triangle",text:L("labels.arrowhead_triangle"),icon:g($ue,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:L("labels.arrowhead_triangle_outline"),icon:g(Gue,{flip:e}),keyBinding:"r"},{value:"circle",text:L("labels.arrowhead_circle"),keyBinding:"a",icon:g(zue,{flip:e})},{value:"circle_outline",text:L("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Hue,{flip:e})},{value:"diamond",text:L("labels.arrowhead_diamond"),icon:g(Xue,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:L("labels.arrowhead_diamond_outline"),icon:g(jue,{flip:e}),keyBinding:"f"},{value:"bar",text:L("labels.arrowhead_bar"),keyBinding:"z",icon:g(Vue,{flip:e})},{value:"crowfoot_one",text:L("labels.arrowhead_crowfoot_one"),icon:g(Wue,{flip:e}),keyBinding:"x"},{value:"crowfoot_many",text:L("labels.arrowhead_crowfoot_many"),icon:g(Yue,{flip:e}),keyBinding:"c"},{value:"crowfoot_one_or_many",text:L("labels.arrowhead_crowfoot_one_or_many"),icon:g(Kue,{flip:e}),keyBinding:"v"}];oe({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:ir(e,t,i=>{if(Ce(i)){const{position:r,type:s}=n;if(r==="start")return Ie(i,{startArrowhead:s});if(r==="end")return Ie(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=qm().rtl;return P("fieldset",{children:[g("legend",{children:L("labels.arrowheads")}),P("div",{className:"iconSelectList buttonList",children:[g(UM,{label:"arrowhead_start",options:EM(!r),value:vr(e,i,s=>Ce(s)&&Nb(s.type)?s.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:s=>n({position:"start",type:s}),numberOfOptionsToAlwaysShow:4}),g(UM,{label:"arrowhead_end",group:"arrowheads",options:EM(!!r),value:vr(e,i,s=>Ce(s)&&Nb(s.type)?s.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:s=>n({position:"end",type:s}),numberOfOptionsToAlwaysShow:4})]})]})}});oe({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const r=ir(e,t,l=>{if(!Me(l))return l;let c=Ie(l,{roundness:n===oi.round?{type:gn.PROPORTIONAL_RADIUS}:null,elbowed:n===oi.elbow,points:n===oi.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(he(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=ce.getPointAtIndexGlobalCoordinates(c,0,u),f=ce.getPointAtIndexGlobalCoordinates(c,-1,u),h=!c.startBinding&&Ws(js(d),e,u,t.zoom,!1,!0),m=!c.endBinding&&Ws(js(f),e,u,t.zoom,!1,!0),p=h||c.startBinding&&u.get(c.startBinding.elementId),U=m||c.endBinding&&u.get(c.endBinding.elementId),y=h?Wm(c,h,"start"):d,E=m?Wm(c,m,"end"):f;h&&gs(c,h,"start",i.scene),m&&gs(c,m,"end",i.scene);const w=p&&c.startBinding?{...c.startBinding,...kb(c,p,"start")}:null,v=U&&c.endBinding?{...c.endBinding,...kb(c,U,"end")}:null;c={...c,startBinding:w,endBinding:v,...ug(c,u,{points:[y,E].map(x=>S(x[0]-c.x,x[1]-c.y)),startBinding:w,endBinding:v,fixedSegments:null})}}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&gs(c,d,"start",i.scene)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&gs(c,d,"end",i.scene)}}return c}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=r.find(c=>c.id===o);l&&(s.selectedLinearElement=new ce(l,we(e)))}return{elements:r,appState:s,captureUpdate:K.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:L("labels.arrowtypes")}),g("div",{className:"buttonList",children:g(ia,{group:"arrowtypes",options:[{value:oi.sharp,text:L("labels.arrowtype_sharp"),icon:CH,testId:"sharp-arrow"},{value:oi.round,text:L("labels.arrowtype_round"),icon:MH,testId:"round-arrow"},{value:oi.elbow,text:L("labels.arrowtype_elbowed"),icon:AH,testId:"elbow-arrow"}],value:vr(e,i,r=>Me(r)?r.elbowed?oi.elbow:r.roundness?oi.round:oi.sharp:null,r=>Me(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})})]})});const SUe=Dw.includes(devicePixelRatio)?devicePixelRatio:1,Qo=()=>({showWelcomeScreen:!1,theme:Ae.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:dn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:dn.fillStyle,currentItemFontFamily:jc,currentItemFontSize:gl,currentItemOpacity:dn.opacity,currentItemRoughness:dn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:dn.strokeColor,currentItemRoundness:"round",currentItemArrowType:oi.round,currentItemStrokeStyle:dn.strokeStyle,currentItemStrokeWidth:dn.strokeWidth,currentItemTextAlign:j0,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:dn.locked,fromSelection:!1,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:SUe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:hb,gridStep:qP,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Lf.generalStats|Lf.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:He.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:null,lockedMultiSelections:{},activeLockedId:null}),IUe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1},lockedMultiSelections:{browser:!0,export:!0,server:!0},activeLockedId:{browser:!1,export:!1,server:!1}}),r_=(e,t)=>{const n={};for(const i of Object.keys(e)){const r=IUe[i];if(r!=null&&r[t]){const s=e[i];n[i]=s}}return n},jV=e=>r_(e,"browser"),YV=e=>r_(e,"export"),xUe=e=>r_(e,"server"),To=({activeTool:e})=>e.type==="eraser",Ph=({activeTool:e})=>e.type==="hand",um=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},WV=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},CUe=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();WV(t,r)},pd=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(D.useEffect(()=>()=>um().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>CUe(s.currentTarget,um(),t,n),onPointerLeave:()=>um().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),KV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',AUe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',ZV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',MUe=`data:${ye.svg},${encodeURIComponent(`${KV}${ZV}</svg>`)}`,RUe=`data:${ye.svg},${encodeURIComponent(`${KV}${AUe}${ZV}</svg>`)}`,Ds=e=>{e&&(e.style.cursor="")},It=(e,t)=>{e&&(e.style.cursor=t)};let Uo,vM;const qV=(e,t)=>{const i=()=>{const r=t===Ae.DARK;Uo=document.createElement("canvas"),Uo.theme=t,Uo.height=20,Uo.width=20;const s=Uo.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(Uo.width/2,Uo.height/2,5,0,2*Math.PI),s.fillStyle=r?fi.black:fi.white,s.fill(),s.strokeStyle=r?fi.white:fi.black,s.stroke(),vM=Uo.toDataURL(ye.svg)};(!Uo||Uo.theme!==t)&&i(),It(e,`url(${vM}) ${20/2} ${20/2}, auto`)},Eo=(e,t)=>{if(e)if(t.activeTool.type==="selection")Ds(e);else if(Ph(t))e.style.cursor=_t.GRAB;else if(To(t))qV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===Ae.LIGHT?MUe:RUe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=_t.AUTO):e.style.cursor=_t.CROSSHAIR},Cu=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};oe({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(e_,{palette:null,topPicks:XP,label:L("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:r=>n({viewBackgroundColor:r}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const dm=oe({name:"clearCanvas",label:"labels.clearCanvas",icon:fd,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var r;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Ie(r,{isDeleted:!0})),appState:{...Qo(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:K.IMMEDIATELY})}),wM=oe({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:IA,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Cu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Na(t.zoom.value+s5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ye,{type:"button",className:"zoom-in-button zoom-button",icon:IA,title:`${L("buttons.zoomIn")} — ${Q("CtrlOrCmd++")}`,"aria-label":L("buttons.zoomIn"),disabled:t.zoom.value>=kw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.EQUAL||e.code===et.NUM_ADD)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),_M=oe({name:"zoomOut",label:"buttons.zoomOut",icon:xA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Cu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Na(t.zoom.value-s5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ye,{type:"button",className:"zoom-out-button zoom-button",icon:xA,title:`${L("buttons.zoomOut")} — ${Q("CtrlOrCmd+-")}`,"aria-label":L("buttons.zoomOut"),disabled:t.zoom.value<=Rw,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.MINUS||e.code===et.NUM_SUBTRACT)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),TM=oe({name:"resetZoom",label:"buttons.resetZoom",icon:uue,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Cu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Na(1)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(pd,{label:L("buttons.resetZoom"),style:{height:"100%"},children:P(Ye,{type:"button",className:"reset-zoom-button zoom-button",title:L("buttons.resetZoom"),"aria-label":L("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===et.ZERO||e.code===et.NUM_ZERO)&&(e[H.CTRL_OR_CMD]||e.shiftKey)}),kUe=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Xe(n,.1,1);return Math.min(f,1)},QV=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Xe(r,Rw,kw);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,y=t.width-h-p,E=t.height-m-U;let w;if(i){const M=c-a,_=u-l;w=Math.min(y/M,E/_)*r}else w=kUe(e,{width:y,height:E},r);const v=Na(Xe(Kie(w,s5,"floor"),s,o)),x=oH({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:v}});return{appState:{...t,scrollX:x.scrollX,scrollY:x.scrollY,zoom:{value:v}},captureUpdate:K.EVENTUALLY}},H5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=yt(Bt(t));return QV({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};oe({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:N9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return H5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.TWO&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});oe({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:N9,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return H5({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.THREE&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});oe({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:N9,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>H5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===et.ONE&&e.shiftKey&&!e.altKey&&!e[H.CTRL_OR_CMD]});const Qb=oe({name:"toggleTheme",label:(e,t)=>t.theme===Ae.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Ae.LIGHT?o4:a4,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Ae.LIGHT?Ae.DARK:Ae.LIGHT)},captureUpdate:K.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===et.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});oe({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return To(t)?n=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=en(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.key===H.E});oe({name:"toggleLassoTool",label:"toolBar.lasso",icon:r4,trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let r;return t.activeTool.type!=="lasso"?(r=en(t,{type:"lasso",fromSelection:!1}),It(i.interactiveCanvas,_t.CROSSHAIR)):r=en(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.NEVER}}});const LUe=oe({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:_H,viewMode:!1,perform:(e,t,n,i)=>{let r;return Ph(t)?r=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=en(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),It(i.interactiveCanvas,_t.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[H.CTRL_OR_CMD]&&e.key===H.H});oe({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=en(t,{type:"embeddable"});return Eo(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:en(t,{type:"embeddable"})},captureUpdate:K.EVENTUALLY}}});const ks=oe({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var f;const{interactiveCanvas:r,focusContainer:s,scene:o}=i,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){const{elementId:h,startBindingElement:m,endBindingElement:p}=t.editingLinearElement,U=ce.getElement(h,a);if(U)return Ia(U)&&y5(U,m,p,o),{elements:U.points.length<2||dd(U)?e.filter(y=>y.id!==U.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}let l=e;const c=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);c&&o.mutateElement(c,{isDeleted:!0},{informMutation:!1,isDragging:!1}),window.document.activeElement instanceof HTMLElement&&s();const u=t.multiElement?t.multiElement:((f=t.newElement)==null?void 0:f.type)==="freedraw"?t.newElement:null;if(u){if(u.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:m,lastCommittedPoint:p}=u;(!p||m[m.length-1]!==p)&&o.mutateElement(u,{points:u.points.slice(0,-1)})}dd(u)&&(l=l.filter(m=>m.id!==u.id));const h=el(u.points,t.zoom.value);if((u.type==="line"||u.type==="freedraw")&&h){const m=u.points,p=m[0];o.mutateElement(u,{points:m.map((U,y)=>y===m.length-1?S(p[0],p[1]):U)})}if(Ia(u)&&!h&&u.points.length>1){const[m,p]=ce.getPointAtIndexGlobalCoordinates(u,-1,we(e));N7(u,t,{x:m,y:p},o)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!u)&&Ds(r);let d;return t.activeTool.type==="eraser"?d=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=en(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&Ce(u)?new ce(u,we(l)):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t)=>e.key===H.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===H.ESCAPE||e.key===H.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(Ye,{type:"button",icon:bue,title:L("buttons.done"),"aria-label":L("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),s_=({children:e,checked:t,onChange:n,className:i})=>P("div",{className:pe("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:fue}),g("div",{className:"Checkbox-label",children:e})]}),DUe=e=>{const t=e.title||(e.value===Ae.DARK?L("buttons.lightMode"):L("buttons.darkMode"));return g(Ye,{type:"icon",icon:e.value===Ae.LIGHT?SM.MOON:SM.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Ae.DARK?Ae.LIGHT:Ae.DARK),"data-testid":"toggle-dark-mode"})},SM={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},OUe=e=>{const{id:t}=sa(),[n,i]=D.useState(e.value),r=o=>{e.ignoreFocus||wre(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===H.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return P("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const NUe=4,IM=0,xM=1,PUe=2;function mg(e){let t=e.length;for(;--t>=0;)e[t]=0}const FUe=0,JV=1,BUe=2,zUe=3,HUe=258,o_=29,cp=256,n0=cp+1+o_,rh=30,a_=19,e$=2*n0+1,Au=15,mE=16,VUe=7,l_=256,t$=16,n$=17,i$=18,v4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),U2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$Ue=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),r$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GUe=512,ba=new Array((n0+2)*2);mg(ba);const fm=new Array(rh*2);mg(fm);const i0=new Array(GUe);mg(i0);const r0=new Array(HUe-zUe+1);mg(r0);const c_=new Array(o_);mg(c_);const Jb=new Array(rh);mg(Jb);function pE(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let s$,o$,a$;function UE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const l$=e=>e<256?i0[e]:i0[256+(e>>>7)],s0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},mr=(e,t,n)=>{e.bi_valid>mE-n?(e.bi_buf|=t<<e.bi_valid&65535,s0(e,e.bi_buf),e.bi_buf=t>>mE-e.bi_valid,e.bi_valid+=n-mE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ro=(e,t,n)=>{mr(e,n[t*2],n[t*2+1])},c$=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},XUe=e=>{e.bi_valid===16?(s0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},jUe=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=Au;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<e$;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},u$=(e,t,n)=>{const i=new Array(Au+1);let r=0,s,o;for(s=1;s<=Au;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=c$(i[a]++,a))}},YUe=()=>{let e,t,n,i,r;const s=new Array(Au+1);for(n=0,i=0;i<o_-1;i++)for(c_[i]=n,e=0;e<1<<v4[i];e++)r0[n++]=i;for(r0[n-1]=i,r=0,i=0;i<16;i++)for(Jb[i]=r,e=0;e<1<<U2[i];e++)i0[r++]=i;for(r>>=7;i<rh;i++)for(Jb[i]=r<<7,e=0;e<1<<U2[i]-7;e++)i0[256+r++]=i;for(t=0;t<=Au;t++)s[t]=0;for(e=0;e<=143;)ba[e*2+1]=8,e++,s[8]++;for(;e<=255;)ba[e*2+1]=9,e++,s[9]++;for(;e<=279;)ba[e*2+1]=7,e++,s[7]++;for(;e<=287;)ba[e*2+1]=8,e++,s[8]++;for(u$(ba,n0+1,s),e=0;e<rh;e++)fm[e*2+1]=5,fm[e*2]=c$(e,5);s$=new pE(ba,v4,cp+1,n0,Au),o$=new pE(fm,U2,0,rh,Au),a$=new pE(new Array(0),$Ue,0,a_,VUe)},d$=e=>{let t;for(t=0;t<n0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<rh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<a_;t++)e.bl_tree[t*2]=0;e.dyn_ltree[l_*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},f$=e=>{e.bi_valid>8?s0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},WUe=(e,t,n,i)=>{f$(e),s0(e,n),s0(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},CM=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},bE=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&CM(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!CM(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},AM=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?Ro(e,r,t):(o=r0[r],Ro(e,o+cp+1,t),a=v4[o],a!==0&&(r-=c_[o],mr(e,r,a)),i--,o=l$(i),Ro(e,o,n),a=U2[o],a!==0&&(i-=Jb[o],mr(e,i,a)));while(s<e.last_lit);Ro(e,l_,t)},w4=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=e$,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)bE(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],bE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,bE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],jUe(e,t),u$(n,l,e.bl_count)},MM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[t$*2]++):a<=10?e.bl_tree[n$*2]++:e.bl_tree[i$*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},RM=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Ro(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Ro(e,s,e.bl_tree),a--),Ro(e,t$,e.bl_tree),mr(e,a-3,2)):a<=10?(Ro(e,n$,e.bl_tree),mr(e,a-3,3)):(Ro(e,i$,e.bl_tree),mr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},KUe=e=>{let t;for(MM(e,e.dyn_ltree,e.l_desc.max_code),MM(e,e.dyn_dtree,e.d_desc.max_code),w4(e,e.bl_desc),t=a_-1;t>=3&&e.bl_tree[r$[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},ZUe=(e,t,n,i)=>{let r;for(mr(e,t-257,5),mr(e,n-1,5),mr(e,i-4,4),r=0;r<i;r++)mr(e,e.bl_tree[r$[r]*2+1],3);RM(e,e.dyn_ltree,t-1),RM(e,e.dyn_dtree,n-1)},qUe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return IM;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return xM;for(n=32;n<cp;n++)if(e.dyn_ltree[n*2]!==0)return xM;return IM};let kM=!1;const QUe=e=>{kM||(YUe(),kM=!0),e.l_desc=new UE(e.dyn_ltree,s$),e.d_desc=new UE(e.dyn_dtree,o$),e.bl_desc=new UE(e.bl_tree,a$),e.bi_buf=0,e.bi_valid=0,d$(e)},h$=(e,t,n,i)=>{mr(e,(FUe<<1)+(i?1:0),3),WUe(e,t,n)},JUe=e=>{mr(e,JV<<1,3),Ro(e,l_,ba),XUe(e)},e2e=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===PUe&&(e.strm.data_type=qUe(e)),w4(e,e.l_desc),w4(e,e.d_desc),o=KUe(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?h$(e,t,n,i):e.strategy===NUe||s===r?(mr(e,(JV<<1)+(i?1:0),3),AM(e,ba,fm)):(mr(e,(BUe<<1)+(i?1:0),3),ZUe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),AM(e,e.dyn_ltree,e.dyn_dtree)),d$(e),i&&f$(e)},t2e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(r0[n]+cp+1)*2]++,e.dyn_dtree[l$(t)*2]++),e.last_lit===e.lit_bufsize-1);var n2e=QUe,i2e=h$,r2e=e2e,s2e=t2e,o2e=JUe,a2e={_tr_init:n2e,_tr_stored_block:i2e,_tr_flush_block:r2e,_tr_tally:s2e,_tr_align:o2e};const l2e=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var o0=l2e;const c2e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},u2e=new Uint32Array(c2e()),d2e=(e,t,n,i)=>{const r=u2e,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var si=d2e,Ud={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:f2e,_tr_stored_block:h2e,_tr_flush_block:g2e,_tr_tally:fc,_tr_align:m2e}=a2e,{Z_NO_FLUSH:Nd,Z_PARTIAL_FLUSH:p2e,Z_FULL_FLUSH:U2e,Z_FINISH:hc,Z_BLOCK:LM,Z_OK:ko,Z_STREAM_END:DM,Z_STREAM_ERROR:vs,Z_DATA_ERROR:b2e,Z_BUF_ERROR:yE,Z_DEFAULT_COMPRESSION:y2e,Z_FILTERED:E2e,Z_HUFFMAN_ONLY:EU,Z_RLE:v2e,Z_FIXED:w2e,Z_DEFAULT_STRATEGY:_2e,Z_UNKNOWN:T2e,Z_DEFLATED:$5}=V5,S2e=9,I2e=15,x2e=8,C2e=29,A2e=256,_4=A2e+1+C2e,M2e=30,R2e=19,k2e=2*_4+1,L2e=15,at=3,Zl=258,Js=Zl+at+1,D2e=32,G5=42,T4=69,b2=73,y2=91,E2=103,Mu=113,S1=666,Jn=1,up=2,bd=3,pg=4,O2e=3,ql=(e,t)=>(e.msg=Ud[t],t),OM=e=>(e<<1)-(e>4?9:0),Xl=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let N2e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,gc=N2e;const Rl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},_i=(e,t)=>{g2e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Rl(e.strm)},wt=(e,t)=>{e.pending_buf[e.pending++]=t},e1=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},P2e=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=o0(e.adler,t,r,n):e.state.wrap===2&&(e.adler=si(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},g$=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Js?e.strstart-(e.w_size-Js):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Zl;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=Zl-(f-i),i=f-Zl,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},yd=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Js)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=P2e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=at)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=gc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=gc(e,e.ins_h,e.window[o+at-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<at)););}while(e.lookahead<Js&&e.strm.avail_in!==0)},F2e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(yd(e),e.lookahead===0&&t===Nd)return Jn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,_i(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Js&&(_i(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===hc?(_i(e,!0),e.strm.avail_out===0?bd:pg):(e.strstart>e.block_start&&(_i(e,!1),e.strm.avail_out===0),Jn)},EE=(e,t)=>{let n,i;for(;;){if(e.lookahead<Js){if(yd(e),e.lookahead<Js&&t===Nd)return Jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=at&&(e.ins_h=gc(e,e.ins_h,e.window[e.strstart+at-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Js&&(e.match_length=g$(e,n)),e.match_length>=at)if(i=fc(e,e.strstart-e.match_start,e.match_length-at),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=at){e.match_length--;do e.strstart++,e.ins_h=gc(e,e.ins_h,e.window[e.strstart+at-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=gc(e,e.ins_h,e.window[e.strstart+1]);else i=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(_i(e,!1),e.strm.avail_out===0))return Jn}return e.insert=e.strstart<at-1?e.strstart:at-1,t===hc?(_i(e,!0),e.strm.avail_out===0?bd:pg):e.last_lit&&(_i(e,!1),e.strm.avail_out===0)?Jn:up},ef=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Js){if(yd(e),e.lookahead<Js&&t===Nd)return Jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=at&&(e.ins_h=gc(e,e.ins_h,e.window[e.strstart+at-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=at-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Js&&(e.match_length=g$(e,n),e.match_length<=5&&(e.strategy===E2e||e.match_length===at&&e.strstart-e.match_start>4096)&&(e.match_length=at-1)),e.prev_length>=at&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-at,i=fc(e,e.strstart-1-e.prev_match,e.prev_length-at),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=gc(e,e.ins_h,e.window[e.strstart+at-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=at-1,e.strstart++,i&&(_i(e,!1),e.strm.avail_out===0))return Jn}else if(e.match_available){if(i=fc(e,0,e.window[e.strstart-1]),i&&_i(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Jn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=fc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<at-1?e.strstart:at-1,t===hc?(_i(e,!0),e.strm.avail_out===0?bd:pg):e.last_lit&&(_i(e,!1),e.strm.avail_out===0)?Jn:up},B2e=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=Zl){if(yd(e),e.lookahead<=Zl&&t===Nd)return Jn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=at&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+Zl;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=Zl-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=at?(n=fc(e,1,e.match_length-at),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(_i(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===hc?(_i(e,!0),e.strm.avail_out===0?bd:pg):e.last_lit&&(_i(e,!1),e.strm.avail_out===0)?Jn:up},z2e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(yd(e),e.lookahead===0)){if(t===Nd)return Jn;break}if(e.match_length=0,n=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(_i(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===hc?(_i(e,!0),e.strm.avail_out===0?bd:pg):e.last_lit&&(_i(e,!1),e.strm.avail_out===0)?Jn:up};function bo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const I1=[new bo(0,0,0,0,F2e),new bo(4,4,8,4,EE),new bo(4,5,16,8,EE),new bo(4,6,32,32,EE),new bo(4,4,16,16,ef),new bo(8,16,32,32,ef),new bo(8,16,128,128,ef),new bo(8,32,128,256,ef),new bo(32,128,258,1024,ef),new bo(32,258,258,4096,ef)],H2e=e=>{e.window_size=2*e.w_size,Xl(e.head),e.max_lazy_match=I1[e.level].max_lazy,e.good_match=I1[e.level].good_length,e.nice_match=I1[e.level].nice_length,e.max_chain_length=I1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=at-1,e.match_available=0,e.ins_h=0};function V2e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(k2e*2),this.dyn_dtree=new Uint16Array((2*M2e+1)*2),this.bl_tree=new Uint16Array((2*R2e+1)*2),Xl(this.dyn_ltree),Xl(this.dyn_dtree),Xl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(L2e+1),this.heap=new Uint16Array(2*_4+1),Xl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*_4+1),Xl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const m$=e=>{if(!e||!e.state)return ql(e,vs);e.total_in=e.total_out=0,e.data_type=T2e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?G5:Mu,e.adler=t.wrap===2?0:1,t.last_flush=Nd,f2e(t),ko},p$=e=>{const t=m$(e);return t===ko&&H2e(e.state),t},$2e=(e,t)=>!e||!e.state||e.state.wrap!==2?vs:(e.state.gzhead=t,ko),U$=(e,t,n,i,r,s)=>{if(!e)return vs;let o=1;if(t===y2e&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>S2e||n!==$5||i<8||i>15||t<0||t>9||s<0||s>w2e)return ql(e,vs);i===8&&(i=9);const a=new V2e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+at-1)/at),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,p$(e)},G2e=(e,t)=>U$(e,t,$5,I2e,x2e,_2e),X2e=(e,t)=>{let n,i;if(!e||!e.state||t>LM||t<0)return e?ql(e,vs):vs;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===S1&&t!==hc)return ql(e,e.avail_out===0?yE:vs);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===G5)if(r.wrap===2)e.adler=0,wt(r,31),wt(r,139),wt(r,8),r.gzhead?(wt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),wt(r,r.gzhead.time&255),wt(r,r.gzhead.time>>8&255),wt(r,r.gzhead.time>>16&255),wt(r,r.gzhead.time>>24&255),wt(r,r.level===9?2:r.strategy>=EU||r.level<2?4:0),wt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(wt(r,r.gzhead.extra.length&255),wt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=si(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=T4):(wt(r,0),wt(r,0),wt(r,0),wt(r,0),wt(r,0),wt(r,r.level===9?2:r.strategy>=EU||r.level<2?4:0),wt(r,O2e),r.status=Mu);else{let o=$5+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=EU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=D2e),o+=31-o%31,r.status=Mu,e1(r,o),r.strstart!==0&&(e1(r,e.adler>>>16),e1(r,e.adler&65535)),e.adler=1}if(r.status===T4)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Rl(e),n=r.pending,r.pending===r.pending_buf_size));)wt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=b2)}else r.status=b2;if(r.status===b2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Rl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,wt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=y2)}else r.status=y2;if(r.status===y2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),Rl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,wt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=si(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=E2)}else r.status=E2;if(r.status===E2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Rl(e),r.pending+2<=r.pending_buf_size&&(wt(r,e.adler&255),wt(r,e.adler>>8&255),e.adler=0,r.status=Mu)):r.status=Mu),r.pending!==0){if(Rl(e),e.avail_out===0)return r.last_flush=-1,ko}else if(e.avail_in===0&&OM(t)<=OM(s)&&t!==hc)return ql(e,yE);if(r.status===S1&&e.avail_in!==0)return ql(e,yE);if(e.avail_in!==0||r.lookahead!==0||t!==Nd&&r.status!==S1){let o=r.strategy===EU?z2e(r,t):r.strategy===v2e?B2e(r,t):I1[r.level].func(r,t);if((o===bd||o===pg)&&(r.status=S1),o===Jn||o===bd)return e.avail_out===0&&(r.last_flush=-1),ko;if(o===up&&(t===p2e?m2e(r):t!==LM&&(h2e(r,0,0,!1),t===U2e&&(Xl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Rl(e),e.avail_out===0))return r.last_flush=-1,ko}return t!==hc?ko:r.wrap<=0?DM:(r.wrap===2?(wt(r,e.adler&255),wt(r,e.adler>>8&255),wt(r,e.adler>>16&255),wt(r,e.adler>>24&255),wt(r,e.total_in&255),wt(r,e.total_in>>8&255),wt(r,e.total_in>>16&255),wt(r,e.total_in>>24&255)):(e1(r,e.adler>>>16),e1(r,e.adler&65535)),Rl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?ko:DM)},j2e=e=>{if(!e||!e.state)return vs;const t=e.state.status;return t!==G5&&t!==T4&&t!==b2&&t!==y2&&t!==E2&&t!==Mu&&t!==S1?ql(e,vs):(e.state=null,t===Mu?ql(e,b2e):ko)},Y2e=(e,t)=>{let n=t.length;if(!e||!e.state)return vs;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==G5||i.lookahead)return vs;if(r===1&&(e.adler=o0(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(Xl(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,yd(i);i.lookahead>=at;){let l=i.strstart,c=i.lookahead-(at-1);do i.ins_h=gc(i,i.ins_h,i.window[l+at-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=at-1,yd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=at-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,ko};var W2e=G2e,K2e=U$,Z2e=p$,q2e=m$,Q2e=$2e,J2e=X2e,ebe=j2e,tbe=Y2e,nbe="pako deflate (from Nodeca project)",hm={deflateInit:W2e,deflateInit2:K2e,deflateReset:Z2e,deflateResetKeep:q2e,deflateSetHeader:Q2e,deflate:J2e,deflateEnd:ebe,deflateSetDictionary:tbe,deflateInfo:nbe};const ibe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var rbe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)ibe(n,i)&&(e[i]=n[i])}}return e},sbe=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},X5={assign:rbe,flattenChunks:sbe};let b$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b$=!1}const a0=new Uint8Array(256);for(let e=0;e<256;e++)a0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;a0[254]=a0[254]=1;var obe=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const abe=(e,t)=>{if(t<65534&&e.subarray&&b$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var lbe=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=a0[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return abe(s,i)},cbe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+a0[e[n]]>t?n:t},l0={string2buf:obe,buf2string:lbe,utf8border:cbe};function ube(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var y$=ube;const E$=Object.prototype.toString,{Z_NO_FLUSH:dbe,Z_SYNC_FLUSH:fbe,Z_FULL_FLUSH:hbe,Z_FINISH:gbe,Z_OK:e6,Z_STREAM_END:mbe,Z_DEFAULT_COMPRESSION:pbe,Z_DEFAULT_STRATEGY:Ube,Z_DEFLATED:bbe}=V5;function j5(e){this.options=X5.assign({level:pbe,method:bbe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ube},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y$,this.strm.avail_out=0;let n=hm.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==e6)throw new Error(Ud[n]);if(t.header&&hm.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=l0.string2buf(t.dictionary):E$.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=hm.deflateSetDictionary(this.strm,i),n!==e6)throw new Error(Ud[n]);this._dict_set=!0}}j5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?gbe:dbe,typeof e=="string"?n.input=l0.string2buf(e):E$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===fbe||s===hbe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=hm.deflate(n,s),r===mbe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=hm.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===e6;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};j5.prototype.onData=function(e){this.chunks.push(e)};j5.prototype.onEnd=function(e){e===e6&&(this.result=X5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ybe(e,t){const n=new j5(t);if(n.push(e,!0),n.err)throw n.msg||Ud[n.err];return n.result}var Ebe=ybe,vbe={deflate:Ebe};const vU=30,wbe=12;var _be=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,U,y,E,w,v,x,M,_,T,I,C;const R=t.state;i=t.next_in,I=t.input,r=i+(t.avail_in-5),s=t.next_out,C=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,d=R.wnext,f=R.window,h=R.hold,m=R.bits,p=R.lencode,U=R.distcode,y=(1<<R.lenbits)-1,E=(1<<R.distbits)-1;e:do{m<15&&(h+=I[i++]<<m,m+=8,h+=I[i++]<<m,m+=8),w=p[h&y];t:for(;;){if(v=w>>>24,h>>>=v,m-=v,v=w>>>16&255,v===0)C[s++]=w&65535;else if(v&16){x=w&65535,v&=15,v&&(m<v&&(h+=I[i++]<<m,m+=8),x+=h&(1<<v)-1,h>>>=v,m-=v),m<15&&(h+=I[i++]<<m,m+=8,h+=I[i++]<<m,m+=8),w=U[h&E];n:for(;;){if(v=w>>>24,h>>>=v,m-=v,v=w>>>16&255,v&16){if(M=w&65535,v&=15,m<v&&(h+=I[i++]<<m,m+=8,m<v&&(h+=I[i++]<<m,m+=8)),M+=h&(1<<v)-1,M>l){t.msg="invalid distance too far back",R.mode=vU;break e}if(h>>>=v,m-=v,v=s-o,M>v){if(v=M-v,v>u&&R.sane){t.msg="invalid distance too far back",R.mode=vU;break e}if(_=0,T=f,d===0){if(_+=c-v,v<x){x-=v;do C[s++]=f[_++];while(--v);_=s-M,T=C}}else if(d<v){if(_+=c+d-v,v-=d,v<x){x-=v;do C[s++]=f[_++];while(--v);if(_=0,d<x){v=d,x-=v;do C[s++]=f[_++];while(--v);_=s-M,T=C}}}else if(_+=d-v,v<x){x-=v;do C[s++]=f[_++];while(--v);_=s-M,T=C}for(;x>2;)C[s++]=T[_++],C[s++]=T[_++],C[s++]=T[_++],x-=3;x&&(C[s++]=T[_++],x>1&&(C[s++]=T[_++]))}else{_=s-M;do C[s++]=C[_++],C[s++]=C[_++],C[s++]=C[_++],x-=3;while(x>2);x&&(C[s++]=C[_++],x>1&&(C[s++]=C[_++]))}}else if(v&64){t.msg="invalid distance code",R.mode=vU;break e}else{w=U[(w&65535)+(h&(1<<v)-1)];continue n}break}}else if(v&64)if(v&32){R.mode=wbe;break e}else{t.msg="invalid literal/length code",R.mode=vU;break e}else{w=p[(w&65535)+(h&(1<<v)-1)];continue t}break}}while(i<r&&s<a);x=m>>3,i-=x,m-=x<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),R.hold=h,R.bits=m};const tf=15,NM=852,PM=592,FM=0,vE=1,BM=2,Tbe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Sbe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ibe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xbe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Cbe=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,U=0,y=0,E=0,w,v,x,M,_,T=null,I=0,C;const R=new Uint16Array(tf+1),N=new Uint16Array(tf+1);let k=null,$=0,V,z,G;for(c=0;c<=tf;c++)R[c]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=l,f=tf;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),U=1,c=1;c<=tf;c++)if(U<<=1,U-=R[c],U<0)return-1;if(U>0&&(e===FM||f!==1))return-1;for(N[1]=0,c=1;c<tf;c++)N[c+1]=N[c]+R[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[N[t[n+u]]++]=u);if(e===FM?(T=k=o,C=19):e===vE?(T=Tbe,I-=257,k=Sbe,$-=257,C=256):(T=Ibe,k=xbe,C=-1),E=0,u=0,c=d,_=s,m=h,p=0,x=-1,y=1<<h,M=y-1,e===vE&&y>NM||e===BM&&y>PM)return 1;for(;;){V=c-p,o[u]<C?(z=0,G=o[u]):o[u]>C?(z=k[$+o[u]],G=T[I+o[u]]):(z=96,G=0),w=1<<c-p,v=1<<m,d=v;do v-=w,r[_+(E>>p)+v]=V<<24|z<<16|G|0;while(v!==0);for(w=1<<c-1;E&w;)w>>=1;if(w!==0?(E&=w-1,E+=w):E=0,u++,--R[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(E&M)!==x){for(p===0&&(p=h),_+=d,m=c-p,U=1<<m;m+p<f&&(U-=R[m+p],!(U<=0));)m++,U<<=1;if(y+=1<<m,e===vE&&y>NM||e===BM&&y>PM)return 1;x=E&M,r[x]=h<<24|m<<16|_-s|0}}return E!==0&&(r[_+E]=c-p<<24|64<<16|0),a.bits=h,0};var gm=Cbe;const Abe=0,v$=1,w$=2,{Z_FINISH:zM,Z_BLOCK:Mbe,Z_TREES:wU,Z_OK:Ed,Z_STREAM_END:Rbe,Z_NEED_DICT:kbe,Z_STREAM_ERROR:Is,Z_DATA_ERROR:_$,Z_MEM_ERROR:T$,Z_BUF_ERROR:Lbe,Z_DEFLATED:HM}=V5,S$=1,VM=2,$M=3,GM=4,XM=5,jM=6,YM=7,WM=8,KM=9,ZM=10,t6=11,ga=12,wE=13,qM=14,_E=15,QM=16,JM=17,eR=18,tR=19,_U=20,TU=21,nR=22,iR=23,rR=24,sR=25,oR=26,TE=27,aR=28,lR=29,rn=30,I$=31,Dbe=32,Obe=852,Nbe=592,Pbe=15,Fbe=Pbe,cR=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Bbe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const x$=e=>{if(!e||!e.state)return Is;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=S$,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Obe),t.distcode=t.distdyn=new Int32Array(Nbe),t.sane=1,t.back=-1,Ed},C$=e=>{if(!e||!e.state)return Is;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,x$(e)},A$=(e,t)=>{let n;if(!e||!e.state)return Is;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Is:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,C$(e))},M$=(e,t)=>{if(!e)return Is;const n=new Bbe;e.state=n,n.window=null;const i=A$(e,t);return i!==Ed&&(e.state=null),i},zbe=e=>M$(e,Fbe);let uR=!0,SE,IE;const Hbe=e=>{if(uR){SE=new Int32Array(512),IE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(gm(v$,e.lens,0,288,SE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;gm(w$,e.lens,0,32,IE,0,e.work,{bits:5}),uR=!1}e.lencode=SE,e.lenbits=9,e.distcode=IE,e.distbits=5},R$=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},Vbe=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,U=0,y,E,w,v,x,M,_,T;const I=new Uint8Array(4);let C,R;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Is;n=e.state,n.mode===ga&&(n.mode=wE),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=Ed;e:for(;;)switch(n.mode){case S$:if(n.wrap===0){n.mode=wE;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,I[0]=c&255,I[1]=c>>>8&255,n.check=si(n.check,I,2,0),c=0,u=0,n.mode=VM;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=rn;break}if((c&15)!==HM){e.msg="unknown compression method",n.mode=rn;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=rn;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?ZM:ga,c=0,u=0;break;case VM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==HM){e.msg="unknown compression method",n.mode=rn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=rn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=si(n.check,I,2,0)),c=0,u=0,n.mode=$M;case $M:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,n.check=si(n.check,I,4,0)),c=0,u=0,n.mode=GM;case GM:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=si(n.check,I,2,0)),c=0,u=0,n.mode=XM;case XM:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=si(n.check,I,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=jM;case jM:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),_)),n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=YM;case YM:if(n.flags&2048){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=WM;case WM:if(n.flags&4096){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=si(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.comment=null);n.mode=KM;case KM:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=rn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ga;break;case ZM:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=cR(c),c=0,u=0,n.mode=t6;case t6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,kbe;e.adler=n.check=1,n.mode=ga;case ga:if(t===Mbe||t===wU)break e;case wE:if(n.last){c>>>=u&7,u-=u&7,n.mode=TE;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=qM;break;case 1:if(Hbe(n),n.mode=_U,t===wU){c>>>=2,u-=2;break e}break;case 2:n.mode=JM;break;case 3:e.msg="invalid block type",n.mode=rn}c>>>=2,u-=2;break;case qM:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=rn;break}if(n.length=c&65535,c=0,u=0,n.mode=_E,t===wU)break e;case _E:n.mode=QM;case QM:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=ga;break;case JM:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=rn;break}n.have=0,n.mode=eR;case eR:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[N[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=gm(Abe,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid code lengths set",n.mode=rn;break}n.have=0,n.mode=tR;case tR:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[c&(1<<n.lenbits)-1],y=U>>>24,E=U>>>16&255,w=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(w<16)c>>>=y,u-=y,n.lens[n.have++]=w;else{if(w===16){for(R=y+2;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=y,u-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=rn;break}_=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(w===17){for(R=y+3;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,_=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=y+7;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=y,u-=y,_=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=rn;break}for(;h--;)n.lens[n.have++]=_}}if(n.mode===rn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=rn;break}if(n.lenbits=9,C={bits:n.lenbits},T=gm(v$,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid literal/lengths set",n.mode=rn;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=gm(w$,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,T){e.msg="invalid distances set",n.mode=rn;break}if(n.mode=_U,t===wU)break e;case _U:n.mode=TU;case TU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,_be(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===ga&&(n.back=-1);break}for(n.back=0;U=n.lencode[c&(1<<n.lenbits)-1],y=U>>>24,E=U>>>16&255,w=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(E&&!(E&240)){for(v=y,x=E,M=w;U=n.lencode[M+((c&(1<<v+x)-1)>>v)],y=U>>>24,E=U>>>16&255,w=U&65535,!(v+y<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=y,u-=y,n.back+=y,n.length=w,E===0){n.mode=oR;break}if(E&32){n.back=-1,n.mode=ga;break}if(E&64){e.msg="invalid literal/length code",n.mode=rn;break}n.extra=E&15,n.mode=nR;case nR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=iR;case iR:for(;U=n.distcode[c&(1<<n.distbits)-1],y=U>>>24,E=U>>>16&255,w=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(E&240)){for(v=y,x=E,M=w;U=n.distcode[M+((c&(1<<v+x)-1)>>v)],y=U>>>24,E=U>>>16&255,w=U&65535,!(v+y<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=y,u-=y,n.back+=y,E&64){e.msg="invalid distance code",n.mode=rn;break}n.offset=w,n.extra=E&15,n.mode=rR;case rR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=rn;break}n.mode=sR;case sR:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=rn;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=TU);break;case oR:if(l===0)break e;r[o++]=n.length,l--,n.mode=TU;break;case TE:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?si(n.check,r,f,o-f):o0(n.check,r,f,o-f)),f=l,(n.flags?c:cR(c))!==n.check){e.msg="incorrect data check",n.mode=rn;break}c=0,u=0}n.mode=aR;case aR:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=rn;break}c=0,u=0}n.mode=lR;case lR:T=Rbe;break e;case rn:T=_$;break e;case I$:return T$;case Dbe:default:return Is}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<rn&&(n.mode<TE||t!==zM))&&R$(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?si(n.check,r,f,e.next_out-f):o0(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ga?128:0)+(n.mode===_U||n.mode===_E?256:0),(d===0&&f===0||t===zM)&&T===Ed&&(T=Lbe),T},$be=e=>{if(!e||!e.state)return Is;let t=e.state;return t.window&&(t.window=null),e.state=null,Ed},Gbe=(e,t)=>{if(!e||!e.state)return Is;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Ed):Is},Xbe=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==t6)?Is:i.mode===t6&&(r=1,r=o0(r,t,n,0),r!==i.check)?_$:(s=R$(e,t,n,n),s?(i.mode=I$,T$):(i.havedict=1,Ed))};var jbe=C$,Ybe=A$,Wbe=x$,Kbe=zbe,Zbe=M$,qbe=Vbe,Qbe=$be,Jbe=Gbe,e6e=Xbe,t6e="pako inflate (from Nodeca project)",ya={inflateReset:jbe,inflateReset2:Ybe,inflateResetKeep:Wbe,inflateInit:Kbe,inflateInit2:Zbe,inflate:qbe,inflateEnd:Qbe,inflateGetHeader:Jbe,inflateSetDictionary:e6e,inflateInfo:t6e};function n6e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var i6e=n6e;const k$=Object.prototype.toString,{Z_NO_FLUSH:r6e,Z_FINISH:s6e,Z_OK:c0,Z_STREAM_END:xE,Z_NEED_DICT:CE,Z_STREAM_ERROR:o6e,Z_DATA_ERROR:dR,Z_MEM_ERROR:a6e}=V5;function Y5(e){this.options=X5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y$,this.strm.avail_out=0;let n=ya.inflateInit2(this.strm,t.windowBits);if(n!==c0)throw new Error(Ud[n]);if(this.header=new i6e,ya.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=l0.string2buf(t.dictionary):k$.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ya.inflateSetDictionary(this.strm,t.dictionary),n!==c0)))throw new Error(Ud[n])}Y5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?s6e:r6e,k$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=ya.inflate(n,o),s===CE&&r&&(s=ya.inflateSetDictionary(n,r),s===c0?s=ya.inflate(n,o):s===dR&&(s=CE));n.avail_in>0&&s===xE&&n.state.wrap>0&&e[n.next_in]!==0;)ya.inflateReset(n),s=ya.inflate(n,o);switch(s){case o6e:case dR:case CE:case a6e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===xE))if(this.options.to==="string"){let l=l0.utf8border(n.output,n.next_out),c=n.next_out-l,u=l0.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===c0&&a===0)){if(s===xE)return s=ya.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Y5.prototype.onData=function(e){this.chunks.push(e)};Y5.prototype.onEnd=function(e){e===c0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=X5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function l6e(e,t){const n=new Y5(t);if(n.push(e),n.err)throw n.msg||Ud[n.err];return n.result}var c6e=l6e,u6e={inflate:c6e};const{deflate:d6e}=vbe,{inflate:f6e}=u6e;var L$=d6e,D$=f6e;const v2=12,h6e=()=>{const e=new Uint8Array(v2);return window.crypto.getRandomValues(e)},u_=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:QP},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},O$=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:QP},!1,[t]),W5=async(e,t)=>{const n=typeof e=="string"?await O$(e,"encrypt"):e,i=h6e(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await Ql(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},u0=async(e,t,n)=>{const i=await O$(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},n6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},N$=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},P$=e=>new TextDecoder("utf-8").decode(N$(e)),F$=(e,t=!1)=>t?window.btoa(e):window.btoa(n6(e)),B$=(e,t=!1)=>t?window.atob(e):P$(window.atob(e)),fR=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),z$=({text:e,compress:t})=>{let n;if(t!==!1)try{n=n6(L$(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||n6(e)}},H$=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:P$(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?D$(new Uint8Array(N$(t)),{to:"string"}):t},V$=1,w2=4,sh=4,AE={1:8,2:16,4:32};function i6(e,t,n,i){if(i!=null){if(i>Math.pow(2,AE[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${AE[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${AE[t]}`;return new DataView(e.buffer)[r](n)}const hR=(...e)=>{const t=new Uint8Array(w2+sh*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;i6(t,w2,n,V$),n+=w2;for(const i of e)i6(t,sh,n,i.byteLength),n+=sh,t.set(i,n),n+=i.byteLength;return t},gR=e=>{const t=[];let n=0;const i=i6(e,sh,n);if(i>V$)throw new Error(`invalid version ${i}`);for(n+=w2;;){const r=i6(e,sh,n);if(n+=sh,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},g6e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await W5(t,L$(e));return{iv:i,buffer:new Uint8Array(n)}},$$=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await g6e(hR(r,e),t.encryptionKey);return hR(i,s,o)},m6e=async(e,t,n,i)=>(t=new Uint8Array(await u0(e,t,n)),i?D$(t):t),G$=async(e,t)=>{const[n,i,r]=gR(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=gR(await m6e(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},Pd=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),p6e=Pd?be(()=>import("./file-open-002ab408-DIuFHtCF.js"),__vite__mapDeps([]),import.meta.url):be(()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]),import.meta.url);async function U6e(...e){return(await p6e).default(...e)}Pd?be(()=>import("./directory-open-4ed118d0-BzWybGaI.js"),__vite__mapDeps([]),import.meta.url):be(()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]),import.meta.url);const b6e=Pd?be(()=>import("./file-save-745eba88-Bb9F9Kg7.js"),__vite__mapDeps([]),import.meta.url):be(()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]),import.meta.url);async function y6e(...e){return(await b6e).default(...e)}const mR=500,d_=e=>{var i,r;const t=(i=e.extensions)==null?void 0:i.reduce((s,o)=>(s.push(ye[o]),s),[]),n=(r=e.extensions)==null?void 0:r.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return U6e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{const l=Za(o,mR),c=()=>{u(),document.addEventListener(ee.KEYUP,l),document.addEventListener(ee.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener(ee.FOCUS,c)});const d=window.setInterval(()=>{u()},mR);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(ee.FOCUS,c),document.removeEventListener(ee.KEYUP,l),document.removeEventListener(ee.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new Dh))}}})},r6=(e,t)=>y6e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),E6e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},Ug=(e,t,n,i)=>{const r={type:bs.excalidraw,version:o5.excalidraw,source:Mw(),elements:i==="local"?oz(e):yce(e),appState:i==="local"?YV(t):xUe(t),files:i==="local"?E6e(e,n):void 0};return JSON.stringify(r,null,2)},X$=async(e,t,n,i=t.name||tF)=>{const r=Ug(e,t,n,"local"),s=new Blob([r],{type:ye.excalidraw});return{fileHandle:await r6(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:m_(t.fileHandle)?null:t.fileHandle})}},v6e=async(e,t)=>{const n=await d_({description:"Excalidraw files"});return p_(await U_(n),e,t,n.handle)},w6e=e=>(e==null?void 0:e.type)===bs.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),j$=e=>typeof e=="object"&&e&&e.type===bs.excalidrawLibrary&&(e.version===1||e.version===2),Y$=e=>{const t={type:bs.excalidrawLibrary,version:o5.excalidrawLibrary,source:Mw(),libraryItems:e};return JSON.stringify(t,null,2)},_6e=async e=>{const t=Y$(e);await r6(new Blob([t],{type:ye.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},T6e=12,W$=document.createElement("img");W$.src=`data:${ye.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const K$=document.createElement("img");K$.src=`data:${ye.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const f_=([e,t,n,i],r,s)=>{const o=T6e,a=s.zoom.value>1?s.zoom.value:1,l=o/a,c=o/a,u=o/a,d=(e+n)/2,f=(t+i)/2,h=(o-8)/(2*a),m=4/a,p=n+m-h,U=t-m-u+h,[y,E]=Z(S(p+l/2,U+c/2),S(d,f),r);return[y-l/2,E-c/2,l,c]},Z$=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=Oe(e,t),[u,d,f,h]=f_([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},ME=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&jw(i,r,e,t)?!0:Z$(e,t,n,S(i,r)),K5=(e,t,n,i,r=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),e.fill(),r&&e.stroke()},Z5=(e,t)=>[e.width/t,e.height/t],q5=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===Ae.DARK&&(a.filter=Lw),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a};function wl(e,t,n=20){e.lineTo(t[0][0],t[0][1]);for(let i=0;i<t.length-1;i++){const r=t[i-1<0?0:i-1],s=t[i],o=t[i+1>=t.length?t.length-1:i+1];for(let a=0;a<=1;a+=1/n){const l=a*a,c=(1-a)*(1-a)*r[0]+2*(1-a)*a*s[0]+l*o[0],u=(1-a)*(1-a)*r[1]+2*(1-a)*a*s[1]+l*o[1];e.lineTo(c,u)}}}function _l(e,t,n=20){e.lineTo(t[0][0],t[0][1]);for(let i=0;i<t.length-1;i++){const r=t[i-1<0?0:i-1],s=t[i],o=t[i+1>=t.length?t.length-1:i+1],a=t[i+2>=t.length?t.length-1:i+2];for(let l=0;l<=1;l+=1/n){const c=l*l,u=c*l,d=.5*(2*s[0]+(-r[0]+o[0])*l+(2*r[0]-5*s[0]+4*o[0]-a[0])*c+(-r[0]+3*s[0]-3*o[0]+a[0])*u),f=.5*(2*s[1]+(-r[1]+o[1])*l+(2*r[1]-5*s[1]+4*o[1]-a[1])*c+(-r[1]+3*s[1]-3*o[1]+a[1])*u);e.lineTo(d,f)}}}const S6e=(e,t,n)=>{const[i,r]=Z(S(t.x,t.y),Xn(t),t.angle);e.save(),e.translate(i,r),e.rotate(t.angle);let s=Ji(Math.min(t.width,t.height),t);s===0&&(s=.01),e.beginPath();{const o=Sl(S(0,0+s),S(0,0),S(0+s,0),n),a=Sl(S(t.width-s,0),S(t.width,0),S(t.width,s),n),l=Sl(S(t.width,t.height-s),S(t.width,t.height),S(t.width-s,t.height),n),c=Sl(S(s,t.height),S(0,t.height),S(0,t.height-s),n);e.moveTo(o[o.length-1][0],o[o.length-1][1]),e.lineTo(a[0][0],a[0][1]),wl(e,a),e.lineTo(l[0][0],l[0][1]),wl(e,l),e.lineTo(c[0][0],c[0][1]),wl(e,c),e.lineTo(o[0][0],o[0][1]),wl(e,o)}{const o=Sl(S(0+s,0),S(0,0),S(0,0+s),-5),a=Sl(S(t.width,s),S(t.width,0),S(t.width-s,0),-5),l=Sl(S(t.width-s,t.height),S(t.width,t.height),S(t.width,t.height-s),-5),c=Sl(S(0,t.height-s),S(0,t.height),S(s,t.height),-5);e.moveTo(o[o.length-1][0],o[o.length-1][1]),e.lineTo(c[0][0],c[0][1]),wl(e,c),e.lineTo(l[0][0],l[0][1]),wl(e,l),e.lineTo(a[0][0],a[0][1]),wl(e,a),e.lineTo(o[0][0],o[0][1]),wl(e,o)}e.closePath(),e.fill(),e.restore()},I6e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},Q5=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},x6e=(e,t,n)=>{const[i,r]=Z(S(n.x,n.y),Xn(n),n.angle);e.save(),e.translate(i,r),e.rotate(n.angle);{e.beginPath();const[s,o,a,l,c,u,d,f]=Fb(n),h=n.roundness?Ji(Math.abs(s-d),n):(s-d)*.01,m=n.roundness?Ji(Math.abs(l-o),n):(l-o)*.01,p=Tl(S(s-h,o+m),S(s,o),S(s,o),S(s+h,o+m),t),U=Tl(S(a-h,l-m),S(a,l),S(a,l),S(a-h,l+m),t),y=Tl(S(c+h,u-m),S(c,u),S(c,u),S(c-h,u-m),t),E=Tl(S(d+h,f+m),S(d,f),S(d,f),S(d+h,f-m),t);e.moveTo(p[p.length-1][0],p[p.length-1][1]),e.lineTo(U[0][0],U[0][1]),_l(e,U),e.lineTo(y[0][0],y[0][1]),_l(e,y),e.lineTo(E[0][0],E[0][1]),_l(e,E),e.lineTo(p[0][0],p[0][1]),_l(e,p)}{const[s,o,a,l,c,u,d,f]=Fb(n),h=n.roundness?Ji(Math.abs(s-d),n):(s-d)*.01,m=n.roundness?Ji(Math.abs(l-o),n):(l-o)*.01,p=Tl(S(s+h,o+m),S(s,o),S(s,o),S(s-h,o+m),-5),U=Tl(S(a-h,l+m),S(a,l),S(a,l),S(a-h,l-m),-5),y=Tl(S(c-h,u-m),S(c,u),S(c,u),S(c+h,u-m),-5),E=Tl(S(d+h,f-m),S(d,f),S(d,f),S(d+h,f+m),-5);e.moveTo(p[p.length-1][0],p[p.length-1][1]),e.lineTo(E[0][0],E[0][1]),_l(e,E),e.lineTo(y[0][0],y[0][1]),_l(e,y),e.lineTo(U[0][0],U[0][1]),_l(e,U),e.lineTo(p[0][0],p[0][1]),_l(e,p)}e.closePath(),e.fill(),e.restore()};function Tl(e,t,n,i,r,s=20){const o=[];for(let a=0;a<=s;a++){const l=a/s,c=Lo(e,t,n,i),u=qf(c,l),d=Bn(sre(c,l)),f=rF(d);o.push(Re(xt(f,r),u))}return o}function Sl(e,t,n,i,r=20){const s=[];for(let o=0;o<=r;o++){const a=o/r,l=1-a,c=S(l*l*e[0]+2*l*a*t[0]+a*a*n[0],l*l*e[1]+2*l*a*t[1]+a*a*n[1]),u=2*(1-a)*(t[0]-e[0])+2*a*(n[0]-t[0]),d=2*(1-a)*(t[1]-e[1])+2*a*(n[1]-t[1]),f=Bn(Nn(u,d)),h=rF(f);s.push(Re(xt(h,i),c))}return s}const SU={Bold:"#dddddd",Regular:"#e5e5e5"},C6e=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?SU.Bold:SU.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?SU.Bold:SU.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},pR=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Pt.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},UR={regularLink:null,elementLink:null},bR=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=Oe(e,i),[l,c,u,d]=f_([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=om(e.link)?"elementLink":"regularLink";let p=UR[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,UR[m]=p;const U=p.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle=n.viewBackgroundColor||"#fff",U.fillRect(0,0,u,d),m==="elementLink"?U.drawImage(K$,0,0,u,d):U.drawImage(W$,0,0,u,d),U.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},q$=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=Z5(e,s),f=q5({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&C6e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(kc(U,o.frameToHighlight,n)||U.groupIds.find(y=>h.has(y)))&&U.groupIds.forEach(y=>h.add(y))});const m=new Map;r.filter(U=>!cs(U)).forEach(U=>{var y;try{const E=U.frameId||((y=o.frameToHighlight)==null?void 0:y.id);if(ue(U)&&U.containerId&&n.has(U.containerId))return;if(f.save(),E&&o.frameRendering.enabled&&o.frameRendering.clip){const v=D7(U,n,o);v&&AC(U,v,o,n,m)&&pR(v,f,a,o),hu(U,n,i,t,f,a,o)}else hu(U,n,i,t,f,a,o);const w=Ne(U,n);w&&hu(w,n,i,t,f,a,o),f.restore(),c||bR(U,f,o,n)}catch(E){console.error(E,U.id,U.x,U.y,U.width,U.height)}}),r.filter(U=>cs(U)).forEach(U=>{var y;try{const E=()=>{if(hu(U,n,i,t,f,a,o),cs(U)&&(c||dr(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){const v=$B(U);hu(v,n,i,t,f,a,o)}c||bR(U,f,o,n)};if((U.frameId||((y=o.frameToHighlight)==null?void 0:y.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const v=D7(U,n,o);v&&AC(U,v,o,n,m)&&pR(v,f,a,o),E(),f.restore()}else E()}catch(E){console.error(E)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(U=>{try{hu(U,n,i,t,f,a,o)}catch(y){console.error(y)}})},Q$=lg(e=>{q$(e)},{trailing:!0}),J$=(e,t)=>{if(t){Q$(e);return}q$(e)},t1=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},n1=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=br(e,r);if(s){const o=t.ownerDocument.createElementNS(rt,"g");return o.setAttributeNS(rt,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},_2=(e,t,n,i,r,s,o,a)=>{var w;const l={x:s,y:o},[c,u,d,f]=Oe(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(ue(e)){const v=$n(e,t);if(Me(v)){const[x,M,_,T]=Oe(v,t),I=ce.getBoundTextElementPosition(v,e,t);h=(_-x)/2-(I.x-x),m=(T-M)/2-(I.y-M),s=s+I.x-e.x,o=o+I.y-e.y}}const p=180*e.angle/Math.PI;let U=i;if(e.link){const v=i.ownerDocument.createElementNS(rt,"a");v.setAttribute("href",Gr(e.link)),U.appendChild(v),U=v}const y=(v,x)=>{U.appendChild(v)},E=(((w=br(e,t))==null?void 0:w.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const v=$t.generateElementShape(e,null),x=t1(n,v,Gg);E!==1&&(x.setAttribute("stroke-opacity",`${E}`),x.setAttribute("fill-opacity",`${E}`)),x.setAttribute("stroke-linecap","round"),x.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const M=n1(e,U,[x],a.frameRendering,t);y(M||x);break}case"iframe":case"embeddable":{const v=$t.generateElementShape(e,a),x=t1(n,v,Gg),M=e.opacity/100;M!==1&&(x.setAttribute("stroke-opacity",`${M}`),x.setAttribute("fill-opacity",`${M}`)),x.setAttribute("stroke-linecap","round"),x.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),y(x);const _=$B(e);_2(_,t,n,U,r,_.x+l.x-e.x,_.y+l.y-e.y,a);const T=t1(n,v,Gg);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);T.firstChild;)T.removeChild(T.firstChild);const I=Ji(Math.min(e.width,e.height),e),C=Pf(zw(e.link||""));if(a.renderEmbeddables===!1||(C==null?void 0:C.type)==="document"){const R=i.ownerDocument.createElementNS(rt,"a");R.setAttribute("href",Gr(e.link||"")),R.setAttribute("target","_blank"),R.setAttribute("rel","noopener noreferrer"),R.style.borderRadius=`${I}px`,T.appendChild(R)}else{const R=i.ownerDocument.createElementNS(rt,"foreignObject");R.style.width=`${e.width}px`,R.style.height=`${e.height}px`,R.style.border="none";const N=R.ownerDocument.createElementNS(rt,"div");N.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),N.style.width="100%",N.style.height="100%";const k=N.ownerDocument.createElement("iframe");k.src=(C==null?void 0:C.link)??"",k.style.width="100%",k.style.height="100%",k.style.border="none",k.style.borderRadius=`${I}px`,k.style.top="0",k.style.left="0",k.allowFullscreen=!0,N.appendChild(k),R.appendChild(N),T.appendChild(R)}y(T);break}case"line":case"arrow":{const v=Ne(e,t),x=i.ownerDocument.createElementNS(rt,"mask");if(v){x.setAttribute("id",`mask-${e.id}`);const I=i.ownerDocument.createElementNS(rt,"rect");s=s||0,o=o||0,I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#fff"),I.setAttribute("width",`${e.width+100+s}`),I.setAttribute("height",`${e.height+100+o}`),x.appendChild(I);const C=i.ownerDocument.createElementNS(rt,"rect"),R=ce.getBoundTextElementPosition(e,v,t),N=s+R.x-e.x,k=o+R.y-e.y;C.setAttribute("x",N.toString()),C.setAttribute("y",k.toString()),C.setAttribute("fill","#000"),C.setAttribute("width",`${v.width}`),C.setAttribute("height",`${v.height}`),C.setAttribute("opacity","1"),x.appendChild(C)}const M=i.ownerDocument.createElementNS(rt,"g");v&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),$t.generateElementShape(e,a).forEach(I=>{const C=t1(n,I,Gg);E!==1&&(C.setAttribute("stroke-opacity",`${E}`),C.setAttribute("fill-opacity",`${E}`)),C.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&el(e.points)&&e.backgroundColor!=="transparent"&&C.setAttribute("fill-rule","evenodd"),M.appendChild(C)});const T=n1(e,U,[M,x],a.frameRendering,t);T?(y(T),U.appendChild(T)):(y(M),U.append(x));break}case"freedraw":{const v=$t.generateElementShape(e,a),x=v?t1(n,v,Gg):i.ownerDocument.createElementNS(rt,"g");E!==1&&(x.setAttribute("stroke-opacity",`${E}`),x.setAttribute("fill-opacity",`${E}`)),x.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),x.setAttribute("stroke","none");const M=i.ownerDocument.createElementNS(rt,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",gB(e)),x.appendChild(M);const _=n1(e,U,[x],a.frameRendering,t);y(_||x);break}case"image":{const v=Math.round(e.width),x=Math.round(e.height),M=xn(e)&&r[e.fileId];if(M){const{reuseImages:_=!0}=a;let T=`image-${M.id}`,I=e.width,C=e.height;e.crop&&({width:I,height:C}=Ja(e),T=`image-crop-${M.id}-${T9(`${I}x${C}`)}`),_||(T=`image-${e.id}`);let R=i.querySelector(`#${T}`);if(!R){R=i.ownerDocument.createElementNS(rt,"symbol"),R.id=T;const X=i.ownerDocument.createElementNS(rt,"image");X.setAttribute("href",M.dataURL),X.setAttribute("preserveAspectRatio","none"),e.crop||!_?(X.setAttribute("width",`${I}`),X.setAttribute("height",`${C}`)):(X.setAttribute("width","100%"),X.setAttribute("height","100%")),R.appendChild(X),(U.querySelector("defs")||U).prepend(R)}const N=i.ownerDocument.createElementNS(rt,"use");N.setAttribute("href",`#${T}`),a.exportWithDarkMode&&M.mimeType!==ye.svg&&N.setAttribute("filter",oB);let k=0,$=0;if(e.crop){const{width:X,height:q}=Ja(e);k=e.crop.x/(e.crop.naturalWidth/X),$=e.crop.y/(e.crop.naturalHeight/q)}const V=h+k,z=m+$;N.setAttribute("width",`${v+k}`),N.setAttribute("height",`${x+$}`),N.setAttribute("opacity",`${E}`),(e.scale[0]!==1||e.scale[1]!==1)&&N.setAttribute("transform",`translate(${V} ${z}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-V} ${-z})`);const G=i.ownerDocument.createElementNS(rt,"g");if(e.crop){const X=i.ownerDocument.createElementNS(rt,"mask");X.setAttribute("id",`mask-image-crop-${e.id}`),X.setAttribute("fill","#fff");const q=i.ownerDocument.createElementNS(rt,"rect");q.setAttribute("x",`${k}`),q.setAttribute("y",`${$}`),q.setAttribute("width",`${v}`),q.setAttribute("height",`${x}`),X.appendChild(q),U.appendChild(X),G.setAttribute("mask",`url(#${X.id})`)}if(G.appendChild(N),G.setAttribute("transform",`translate(${s-k} ${o-$}) rotate(${p} ${V} ${z})`),e.roundness){const X=i.ownerDocument.createElementNS(rt,"clipPath");X.id=`image-clipPath-${e.id}`;const q=i.ownerDocument.createElementNS(rt,"rect"),fe=Ji(Math.min(e.width,e.height),e);q.setAttribute("width",`${e.width}`),q.setAttribute("height",`${e.height}`),q.setAttribute("rx",`${fe}`),q.setAttribute("ry",`${fe}`),X.appendChild(q),y(X),G.setAttributeNS(rt,"clip-path",`url(#${X.id})`)}const j=n1(e,U,[G],a.frameRendering,t);y(j||G)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const v=document.createElementNS(rt,"rect");v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),v.setAttribute("width",`${e.width}px`),v.setAttribute("height",`${e.height}px`),v.setAttribute("rx",Pt.radius.toString()),v.setAttribute("ry",Pt.radius.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",Pt.strokeColor),v.setAttribute("stroke-width",Pt.strokeWidth.toString()),y(v)}break}default:if(ue(e)){const v=i.ownerDocument.createElementNS(rt,"g");E!==1&&(v.setAttribute("stroke-opacity",`${E}`),v.setAttribute("fill-opacity",`${E}`)),v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const x=e.text.replace(/\r\n?/g,`
`).split(`
`),M=Q0(e.fontSize,e.lineHeight),_=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=iF(e.fontFamily,e.fontSize,M),I=fF(e.text)?"rtl":"ltr",C=e.textAlign==="center"?"middle":e.textAlign==="right"||I==="rtl"?"end":"start";for(let N=0;N<x.length;N++){const k=i.ownerDocument.createElementNS(rt,"text");k.textContent=x[N],k.setAttribute("x",`${_}`),k.setAttribute("y",`${N*M+T}`),k.setAttribute("font-family",Y0(e)),k.setAttribute("font-size",`${e.fontSize}px`),k.setAttribute("fill",e.strokeColor),k.setAttribute("text-anchor",C),k.setAttribute("style","white-space: pre;"),k.setAttribute("direction",I),k.setAttribute("dominant-baseline","alphabetic"),v.appendChild(k)}const R=n1(e,U,[v],a.frameRendering,t);y(R||v)}else throw new Error(`Unimplemented type ${e.type}`)}},A6e=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!cs(o)).forEach(o=>{if(!o.isDeleted){if(ue(o)&&o.containerId&&t.has(o.containerId))return;try{_2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=Ne(o,t);a&&_2(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>cs(o)).forEach(o=>{if(!o.isDeleted)try{_2(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},M6e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=pt({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Ie(e,{text:r,width:t})},R6e=(e,t)=>{const n=[];for(const i of e){if(Te(i)){let r=Yr({x:i.x,y:i.y-Pt.nameOffsetY,fontFamily:ct.Helvetica,fontSize:Pt.nameFontSize,lineHeight:Pt.nameLineHeight,strokeColor:t.exportWithDarkMode?Pt.nameColorDarkTheme:Pt.nameColorLightTheme,text:rB(i)});r.y-=r.height,r=M6e(r,i.width),n.push(r)}n.push(i)}return n},eG=(e,t)=>(t=t||Qo().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),tG=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=o9(e,t):n.enabled&&n.name?r=R6e(e,{exportWithDarkMode:i}):r=e,r},nG=async(e,t,n,{exportBackground:i,exportPadding:r=ag,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Ga.loadElementsFonts(e)})=>{await l();const c=eG(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=tG({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=g_(o?[o]:r9(u),r),{canvas:p,scale:U=1}=a(h,m),y=Qo(),{imageCache:E}=await YB({imageCache:new Map,fileIds:WB(u).map(w=>w.fileId),files:n});return J$({canvas:p,rc:Yc.canvas(p),elementsMap:jo(we(u)),allElementsMap:jo(we(tl(e))),visibleElements:u,scale:U,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:y.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Ae.DARK:Ae.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:E,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},x1=e=>document.createComment(` ${e} `),h_=async(e,t,n,i)=>{const r=eG((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:s=ag,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=tG({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=g_(u?[u]:r9(d),s),U=-f+s,y=-h+s,E=document.createElementNS(rt,"svg");E.setAttribute("version","1.1"),E.setAttribute("xmlns",rt),E.setAttribute("viewBox",`0 0 ${m} ${p}`),E.setAttribute("width",`${m*l}`),E.setAttribute("height",`${p*l}`),o&&E.setAttribute("filter",Lw);const w=E.ownerDocument.createElementNS(rt,"defs"),v=E.ownerDocument.createElementNS(rt,"metadata");if(E.appendChild(x1("svg-source:excalidraw")),E.appendChild(v),E.appendChild(w),c)try{k6e({metadataElement:v,payload:Ug(e,t,n||{},"local")})}catch(R){console.error(R)}const x=i9(e);if(x.length){const R=we(e);for(const N of x){const k=E.ownerDocument.createElementNS(rt,"clipPath");k.setAttribute("id",N.id);const[$,V,z,G]=Oe(N,R),j=(z-$)/2-(N.x-$),X=(G-V)/2-(N.y-V),q=E.ownerDocument.createElementNS(rt,"rect");q.setAttribute("transform",`translate(${N.x+U} ${N.y+y}) rotate(${N.angle} ${j} ${X})`),q.setAttribute("width",`${N.width}`),q.setAttribute("height",`${N.height}`),u||(q.setAttribute("rx",`${Pt.radius}`),q.setAttribute("ry",`${Pt.radius}`)),k.appendChild(q),w.appendChild(k)}}const M=i!=null&&i.skipInliningFonts?[]:await Ga.generateFontFaceDeclarations(e),_=`
      `,T=E.ownerDocument.createElementNS(rt,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${_}${M.join(_)}`)),w.appendChild(T),t.exportBackground&&a){const R=E.ownerDocument.createElementNS(rt,"rect");R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("width",`${m}`),R.setAttribute("height",`${p}`),R.setAttribute("fill",a),E.appendChild(R)}const I=Yc.svg(E),C=(i==null?void 0:i.renderEmbeddables)??!1;return A6e(d,jo(we(d)),I,E,n||{},{offsetX:U,offsetY:y,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:C,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:C?new Map(d.filter(R=>Te(R)).map(R=>[R.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),E},k6e=({payload:e,metadataElement:t})=>{const n=F$(JSON.stringify(z$({text:e})),!0);t.appendChild(x1(`payload-type:${ye.excalidraw}`)),t.appendChild(x1("payload-version:2")),t.appendChild(x1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(x1("payload-end"))},L6e=({svg:e})=>{if(e.includes(`payload-type:${ye.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),r=((n==null?void 0:n[1])||"1")!=="1";try{const s=B$(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===bs.excalidraw)return s;throw new Error("FAILED")}return H$(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},g_=(e,t)=>{const[n,i,r,s]=yt(e),o=Ni(n,r)+t*2,a=Ni(i,s)+t*2;return[n,i,o,a]},D6e=(e,t,n)=>{const[,,i,r]=g_(e,t).map(s=>Math.trunc(s*n));return[i,r]},O6e={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},N6e=e=>Object.keys(ct).includes(e)?ct[e]:jc,nf=(e,t)=>{if(!t)return null;const n=t.focus||0;return he(e)?Ib(t)?{...t,focus:n,fixedPoint:E5(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Il=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||tr(),fillStyle:e.fillStyle||dn.fillStyle,strokeWidth:e.strokeWidth||dn.strokeWidth,strokeStyle:e.strokeStyle??dn.strokeStyle,roughness:e.roughness??dn.roughness,opacity:e.opacity==null?dn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||dn.strokeColor,backgroundColor:e.backgroundColor||dn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Dd(e.type)?gn.LEGACY:gn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??cg(),link:e.link?Gr(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...RB(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},P6e=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=N6e(d)}const i=typeof e.text=="string"&&e.text||"",r=e.lineHeight||(e.height?Uoe(e):Ac(e.fontFamily));return e=Il(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||j0,verticalAlign:e.verticalAlign||db,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:r}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=Ca(e)),e;case"freedraw":return Il(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Il(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:s=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=ce.getNormalizedPoints(e)),Il(e,{type:e.type==="draw"?"line":e.type,startBinding:nf(e,e.startBinding),endBinding:nf(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:c,x:a,y:l,...Th(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=ce.getNormalizedPoints(e));const p={type:e.type,startBinding:nf(e,e.startBinding),endBinding:nf(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,...Th(m)};return he(e)?Il(e,{...p,elbowed:!0,startBinding:nf(e,e.startBinding),endBinding:nf(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Il(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Il(e,{});case"magicframe":case"frame":return Il(e,{name:e.name??null})}return null},F6e=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),ue(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},B6e=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=Me(n)?0:(n==null?void 0:n.angle)??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},z6e=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},vd=(e,t,n)=>{const i=new Set,r=t?we(t):null,s=tl((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!dd(l)){let c=P6e(l);if(c){const u=r==null?void 0:r.get(l.id);u&&u.version>c.version&&(c=Ca(c,u.version)),i.has(c.id)&&(c={...c,id:tr()}),i.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;const o=we(s);for(const a of s)a.frameId&&z6e(a,o),ue(a)&&a.containerId?B6e(a,o):a.boundElements&&F6e(a,o),n.refreshDimensions&&ue(a)&&Object.assign(a,HB(a,$n(a,o),o)),Ce(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Me(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Me(a))&&(a.endBinding=null));return s.map(a=>{if(he(a)&&!FF(a)&&!pB(a.points))return{...a,...ug(a,o,{points:[S(0,0),a.points[a.points.length-1]]}),index:a.index};if(he(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[S(0,0),S(0,-10),S(l.width/2+5,-10),S(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},H6e=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},yR={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??H6e("defaultSidebarDockedPreference",e,t)]},iG=(e,t)=>{var r;e=e||{};const n=Qo(),i={};for(const s of Object.keys(yR))if(s in e){const[o,a]=yR[s](e,n);i[o]=a}for(const[s,o]of Object.entries(n)){const a=e[s],l=t?t[s]:void 0;i[s]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...en(n,i.activeTool.type&&O6e[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:Na(nm(e.zoom)?e.zoom:((r=e.zoom)==null?void 0:r.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:ys.name}:i.openSidebar,gridSize:qce(nm(e.gridSize)?e.gridSize:hb),gridStep:aH(nm(e.gridStep)?e.gridStep:qP),editingFrame:null}},wd=(e,t,n,i)=>({elements:vd(e==null?void 0:e.elements,n,i),appState:iG(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),ER=e=>{const t=vd(Bt(e.elements),null);return t.length?{...e,elements:t}:null},J5=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=ER({status:t,elements:i,id:tr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=ER({...r,id:r.id||tr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},rG=async e=>{let t;if(e.type===ye.png)try{return await(await be(()=>Promise.resolve().then(()=>DG),void 0,import.meta.url)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new xu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new xu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===ye.svg)try{return L6e({svg:t})}catch(n){throw n.message==="INVALID"?new xu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new xu("Error: cannot restore image")}return t},sG=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},V6e=e=>e==="png"||e==="svg",m_=e=>{const t=sG(e);return t==="png"||t==="svg"},oG=e=>!!e&&Object.values(wh).includes(e),Xu=e=>{const{type:t}=e||{};return oG(t)},aG=async(e,t,n,i)=>{const r=await rG(e);let s;try{try{s=JSON.parse(r)}catch(o){throw Xu(e)?new xu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(w6e(s))return{type:ye.excalidraw,data:wd({elements:oz(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...YV(s.appState||{}),...t?Qm(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(j$(s))return{type:ye.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof xu?o:new Error("Error: invalid file")}},p_=async(e,t,n,i)=>{const r=await aG(e,t,n,i);if(r.type!==ye.excalidraw)throw new Error("Error: invalid file");return r.data},lG=(e,t="unpublished")=>{const n=JSON.parse(e);if(!j$(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return J5(i,t)},$6e=async(e,t="unpublished")=>lG(await rG(e),t),d0=async e=>new Promise(async(t,n)=>{try{K0(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new Nde("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),G6e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await Ql(e));return mF(new Uint8Array(t))}catch(t){return console.error(t),DF(40)}},S4=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),X6e=(e,t)=>`data:${t};base64,${F$(n6(e),!0)}`,j6e=(e,t="")=>{const n=e.indexOf(","),i=atob(e.slice(n+1)),r=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return new File([s],t,{type:r})},Y6e=e=>B$(e.slice(e.indexOf(",")+1)),I4=async(e,t)=>{if(e.type===ye.svg)return e;const[n,i]=await Promise.all([be(()=>import("./pica-C_5omnZI.js").then(s=>s.p),__vite__mapDeps([2,3]),import.meta.url).then(s=>s.default),be(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([]),import.meta.url).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Xu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},vR=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:ye.svg}),W6e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Xu(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},K6e=async e=>{const t=e.dataTransfer.files.item(0),n=await Z6e(e);return{file:t?await U_(t):null,fileHandle:n}},Z6e=async e=>{if(Pd)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},wR=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=ye.png:n.startsWith(i.jpg)?t=ye.jpg:n.startsWith(i.gif)&&(t=ye.gif),t},C1=(e,t,n)=>new File([e],n||"",{type:t}),U_=async e=>{var t,n;if(e.type){if(Xu(e)){const i=await Ql(e),r=wR(i);r&&r!==e.type&&(e=C1(i,r,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=C1(await Ql(e),ye.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=C1(await Ql(e),ye.excalidraw,e.name);else{const i=await Ql(e),r=wR(i);r&&(e=C1(i,r,e.name))}return e},Ql=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s;if(!((s=r.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),$s=32,Dt=12,mc=256,cG=50,yu="NOT_SPREADSHEET",f0="VALID_SPREADSHEET",A1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},RE=(e,t)=>e.slice(1).every(n=>A1(n[t])!==null),_R=e=>{const t=e[0].length;if(t>2)return{type:yu,reason:"More than 2 columns"};if(t===1){if(!RE(e,0))return{type:yu,reason:"Value is not numeric"};const l=A1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>A1(u[0]));return c.length<2?{type:yu,reason:"Less than two rows"}:{type:f0,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=RE(e,0),i=RE(e,1);if(!n&&!i)return{type:yu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=A1(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:yu,reason:"Less than 2 rows"}:{type:f0,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>A1(l[s]))}}},q6e=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},Q6e=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:yu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:yu,reason:"All rows don't have same number of columns"};const r=_R(t);if(r.type!==f0){const s=_R(q6e(t));if(s.type===f0)return s}return r},s6=gie(die),eo={fillStyle:"hachure",fontFamily:jc,fontSize:gl,opacity:100,roughness:1,strokeColor:He.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Fr.MIDDLE,locked:!1},uG=e=>{const t=($s+Dt)*e.values.length+Dt,n=mc+Dt*2;return{chartWidth:t,chartHeight:n}},J6e=(e,t,n,i,r)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>Yr({groupIds:[i],backgroundColor:r,...eo,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*($s+Dt)+Dt*2,y:n+Dt/2,width:$s,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},e5e=(e,t,n,i,r)=>{const s=Yr({groupIds:[i],backgroundColor:r,...eo,x:t-Dt,y:n-Dt,text:"0",textAlign:"right"}),o=Yr({groupIds:[i],backgroundColor:r,...eo,x:t-Dt,y:n-mc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},t5e=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=uG(e),a=dc({backgroundColor:r,groupIds:[i],...eo,type:"line",x:t,y:n,width:s,points:[S(0,0),S(s,0)]}),l=dc({backgroundColor:r,groupIds:[i],...eo,type:"line",x:t,y:n,height:o,points:[S(0,0),S(0,-280)]}),c=dc({backgroundColor:r,groupIds:[i],...eo,type:"line",x:t,y:n-mc-Dt,strokeStyle:"dotted",width:s,opacity:cG,points:[S(0,0),S(s,0)]});return[a,l,c]},dG=(e,t,n,i,r,s)=>{const{chartWidth:o}=uG(e),a=e.title?Yr({backgroundColor:r,groupIds:[i],...eo,text:e.title,x:t+o/2,y:n-mc-Dt*2-gl,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...J6e(e,t,n,i,r),...e5e(e,t,n,i,r),...t5e(e,t,n,i,r)]},n5e=(e,t,n)=>{const i=Math.max(...e.values),r=tr(),s=s6[Math.floor(Math.random()*s6.length)];return[...e.values.map((a,l)=>{const c=a/i*mc;return Zo({backgroundColor:s,groupIds:[r],...eo,type:"rectangle",x:t+l*($s+Dt)+Dt,y:n-c-Dt,width:$s,height:c})}),...dG(e,t,n,r,s)]},i5e=(e,t,n)=>{const i=Math.max(...e.values),r=tr(),s=s6[Math.floor(Math.random()*s6.length)];let o=0;const a=[];for(const p of e.values){const U=o*($s+Dt),y=-(p/i)*mc;a.push([U,y]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=dc({backgroundColor:s,groupIds:[r],...eo,type:"line",x:t+Dt+$s/2,y:n-Dt,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,U)=>{const y=U*($s+Dt)+Dt/2,E=-(p/i)*mc+Dt/2;return Zo({backgroundColor:s,groupIds:[r],...eo,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+y+$s/2,y:n+E-Dt*2,width:Dt,height:Dt})}),m=e.values.map((p,U)=>{const y=U*($s+Dt)+Dt/2,E=p/i*mc+Dt/2+Dt;return dc({backgroundColor:s,groupIds:[r],...eo,type:"line",x:t+y+$s/2+Dt/2,y:n-E,height:E,strokeStyle:"dotted",opacity:cG,points:[S(0,0),S(0,E)]})});return[...dG(e,t,n,r,s),f,...m,...h]},r5e=(e,t,n,i)=>e==="line"?i5e(t,n,i):n5e(t,n,i),b_="clipboard"in navigator&&"writeText"in navigator.clipboard,y_="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,s5e=e=>!!([bs.excalidraw,bs.excalidrawClipboard,bs.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),o5e=({types:e,files:t})=>{var i,r,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((i=n.clipboardData)==null||i.setData(a,l),((r=n.clipboardData)==null?void 0:r.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},a5e=({elements:e,files:t})=>{const n=we(e),i=new Set(e.filter(a=>Te(a)));let r=!1;const s=e.reduce((a,l)=>(xn(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:bs.excalidrawClipboard,elements:e.map(a=>{if(br(a,n)&&!i.has(br(a,n))){const l=Lc(a);return mi(l,n,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},l5e=async(e,t,n)=>{await qc(a5e({elements:e,files:t}),n)},c5e=e=>{const t=Q6e(e);return t.type===f0?{spreadsheet:t.spreadsheet}:null};function fG(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const r=(n=i.textContent)==null?void 0:n.trim();r&&t.push({type:"text",value:r})}else if(i instanceof HTMLImageElement){const r=i.getAttribute("src");r&&r.startsWith("http")&&t.push({type:"imageUrl",value:r})}else t=t.concat(fG(i));return t}const u5e=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(ye.html);if(!t)return null;try{const i=new DOMParser().parseFromString(t,ye.html),r=fG(i.body);if(r.length)return{type:"mixedContent",value:r}}catch(i){console.error(`error in parseHTMLFromPaste: ${i.message}`)}return null},d5e=async()=>{var n,i,r,s;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((r=navigator.clipboard)==null?void 0:r.readText());if(a)return{[ye.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(bF(Cie,a))try{if(a===ye.text||a===ye.html)e[a]=await(await o.getType(a)).text();else if(oG(a)){const l=await o.getType(a),c=C1(l,a,void 0);e[a]=c}else throw new Ks(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof Ks?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},f5e=async(e,t=!1)=>{var n,i;try{const r=!t&&e&&u5e(e);return r?r.value.every(o=>o.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(ye.text))||r.value.map(o=>o.value).join(`
`).trim()}:r:{type:"text",value:(((i=e.clipboardData)==null?void 0:i.getData(ye.text))||"").trim()}}catch{return{type:"text",value:""}}},hG=async(e,t=!1)=>{const n=await f5e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&c5e(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===bs.excalidrawClipboardWithAPI;if(s5e(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},h5e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[ye.png]:e})])}catch(t){if(K0(e))await navigator.clipboard.write([new window.ClipboardItem({[ye.png]:await e})]);else throw t}},qc=async(e,t)=>{var n,i;if(b_)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if((n=t.clipboardData)==null||n.setData(ye.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(ye.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!g5e(e))throw new Error("Error copying to clipboard.")},g5e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},ey=(e,{selectedElementIds:t},n)=>{e=Bt(e);const i=n&&Gn(e,{selectedElementIds:t});let r=null,s=i?ze(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&Te(s[0])?(r=s[0],s=o9(e,r)):s.length>1&&(s=ze(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Va(s)}},ty=async(e,t,n,i,{exportBackground:r,exportPadding:s=ag,viewBackgroundColor:o,name:a=n.name||tF,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(L("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=h_(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return r6(d.then(f=>new Blob([Hie+f.outerHTML],{type:ye.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[wh.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await qc(f)}catch{throw new Error(L("errors.copyToSystemClipboardFailed"))}return}}const u=nG(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=d0(u);return n.exportEmbedScene&&(d=d.then(f=>be(()=>Promise.resolve().then(()=>DG),void 0,import.meta.url).then(({encodePngMetadata:h})=>h({blob:f,metadata:Ug(t,n,i,"local")})))),r6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[wh.png],fileHandle:l})}else if(e==="clipboard")try{const d=d0(u);await h5e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):Hm&&d.name==="TypeError"?new Error(`${L("alerts.couldNotCopyToClipboard")}

${L("hints.firefox_clipboard_write")}`):new Error(L("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},m5e=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=sG(o);if(!o||!V6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=ey(e,t,!1);return await ty(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},p5e=oe({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(OUe,{label:L("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),U5e=oe({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Bt(e),s=Gn(i,t)?ze(i,t):i;return g(ge,{children:Dw.map(o=>{const[a,l]=D6e(s,ag,o),c=`${L("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Ye,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),b5e=oe({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(s_,{checked:e.exportBackground,onChange:n=>t(n),children:L("imageExportDialog.label.withBackground")})}),gG=oe({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>P(s_,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[L("imageExportDialog.label.embedScene"),g(pd,{label:L("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:yue})})]})}),o6=oe({name:"saveToActiveFile",label:"buttons.save",icon:C5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=m_(t.fileHandle)?await m5e(e,t,i.files,i.getName()):await X$(e,t,i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s!=null&&s.name?L("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):L("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===H.S&&e[H.CTRL_OR_CMD]&&!e.shiftKey}),mG=oe({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:C5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await X$(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:L("toast.fileSaved")}}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===H.S&&e.shiftKey&&e[H.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Ye,{type:"button",icon:gue,title:L("buttons.saveAs"),"aria-label":L("buttons.saveAs"),showAriaLabel:ii().editor.isMobile,hidden:!Pd,onClick:()=>e(null),"data-testid":"save-as-button"})}),x4=oe({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await v6e(t,e);return{elements:r,appState:s,files:o,captureUpdate:K.IMMEDIATELY}}catch(r){return(r==null?void 0:r.name)==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:K.EVENTUALLY}}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.O}),y5e=oe({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(DUe,{value:e.exportWithDarkMode?Ae.DARK:Ae.LIGHT,onChange:n=>{t(n===Ae.DARK)},title:L("imageExportDialog.label.darkMode")})})});let pG="{}";const E5e=oe({name:"copyStyles",label:"labels.copyStyles",icon:IH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&nr(s)){const o=Ne(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(pG=JSON.stringify(r)),{appState:{...t,toast:{message:L("toast.copyStyles")}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.C}),v5e=oe({name:"pasteStyles",label:"labels.pasteStyles",icon:IH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(pG),s=r[0],o=r[1];if(!PF(s))return{elements:e,captureUpdate:K.EVENTUALLY};const a=ze(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(ue(c)&&c.containerId&&(u=o),!u)return c;let d=Ie(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?Vse(u.roundness.type,c)?u.roundness:$se(c):null});if(ue(d)){const f=u.fontSize||gl,h=u.fontFamily||jc;d=Ie(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||j0,lineHeight:u.lineHeight||Ac(h)});let m=null;d.containerId&&(m=a.find(p=>ue(d)&&p.id===d.containerId)||null),$i(d,m,i.scene)}return d.type==="arrow"&&Me(u)&&(d=Ie(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),Te(c)&&(d=Ie(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.V});oe({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(Ye,{type:"button",icon:hH,"aria-label":L("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});oe({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{visible:_9(t,Bt(e)),type:"button",icon:mue,"aria-label":L("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const E_=oe({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:due,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var r,s;return((r=t.openDialog)==null?void 0:r.name)==="help"&&i(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e.key===H.QUESTION_MARK}),w5e=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&jm(r,n),!0))return!0}return!1},TR=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!w5e(i)&&!sB(i)},_5e=oe({name:"group",label:"labels.group",icon:e=>g(VA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=r9(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};const s=Gu(t);if(s.length===1){const U=s[0],y=new Set(kt(e,U).map(v=>v.id)),E=new Set(r.map(v=>v.id));if(new Set([...Array.from(y),...Array.from(E)]).size===y.size)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY}}let o=[...e];new Set(r.map(U=>U.frameId)).size>1&&Joe(r).forEach((y,E)=>{p5(y,i.scene.getNonDeletedElementsMap())});const l=tr(),c=we(r);o=o.map(U=>c.get(U.id)?Ie(U,{groupIds:Yoe(U.groupIds,l,t.editingGroupId)}):U);const u=kt(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(U=>!jm(U,l)),p=oo([...m,...u,...h],we(u));return{appState:{...t,...KF(l,{...t,selectedGroupIds:{}},Bt(o))},elements:p,captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>TR(e,t,i),keyTest:e=>!e.shiftKey&&e[H.CTRL_OR_CMD]&&e.key===H.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!TR(e,t,i),type:"button",icon:g(VA,{theme:t.theme}),onClick:()=>n(null),title:`${L("labels.group")} — ${Q("CtrlOrCmd+G")}`,"aria-label":L("labels.group"),visible:Gn(Bt(e),t)})}),T5e=oe({name:"ungroup",label:"labels.ungroup",icon:e=>g($A,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=Gu(t),s=we(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Gt(f)&&a.push(f.id);const h=Woe(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ie(f,{groupIds:h})});const l=Li(t,Bt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return i9(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=iB(o,o2(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[H.CTRL_OR_CMD]&&e.key===H.G.toUpperCase(),predicate:(e,t)=>Gu(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",hidden:Gu(t).length===0,icon:g($A,{theme:t.theme}),onClick:()=>n(null),title:`${L("labels.ungroup")} — ${Q("CtrlOrCmd+Shift+G")}`,"aria-label":L("labels.ungroup"),visible:Gn(Bt(e),t)})}),UG=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function S5e(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const ny=(e,t)=>`hsl(${Math.abs(S5e((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,I5e=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},x5e=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=ny(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===_u.IDLE||m===_u.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const U=n.theme===Ae.DARK?"#2f6330":xie,y=c==null?void 0:c.isSpeaking;y&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=sU,e.strokeStyle=sU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const E=t.remotePointerUsernames.get(s)||"";if(!f&&E){e.font="600 12px sans-serif";const w=(y?a+0:a)+u/2,v=(y?l+0:l)+d+2,x=5,M=3,_=e.measureText(E),T=_.actualBoundingBoxDescent+_.actualBoundingBoxAscent,I=Math.max(T,12),C=w-1,R=v-1,N=_.width+2+x*2+2,k=I+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(C,R,N,k,8),e.fillStyle=h,e.fill(),e.strokeStyle=sU,e.stroke(),y&&(e.beginPath(),e.roundRect(C-2,R-2,N+4,k+4,8),e.strokeStyle=U,e.stroke())):UG(e,C,R,N,k,8,sU),e.fillStyle=Iie,e.fillText(E,w+x+1,v+M+_.actualBoundingBoxAscent+Math.floor((I-T)/2)+2),y){e.fillStyle=U;const $=8,V=8,z=5;e.fillRect(C+N+V,R+(k/2-$/2),2,$),e.fillRect(C+N+V+z,R+(k/2-$*2/2),2,$*2),e.fillRect(C+N+V+z*2,R+(k/2-$/2),2,$)}}e.restore(),e.closePath()}},SR=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=I5e(n),[o,a]=D.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:pe("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};oe({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:K.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:K.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=ny(i,r),l=pe({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?P("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:L("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:L("userList.hint.micMuted"),children:wde}):g("div",{title:L("userList.hint.inCall"),children:vde}):null;return s?P("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(SR,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),P("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:L("userList.hint.followStatus"),children:O9}),c]})]}):P("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(SR,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const C5e=oe({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of eF)if(r.some(o=>o.type===s))return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:L(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:tr(),status:"unpublished",elements:r.map(Lc),created:Date.now()},...s])).then(()=>({captureUpdate:K.EVENTUALLY,appState:{...t,toast:{message:L("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),Wr=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Te(i))},bg=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=ule(r,i,n.scene),o=we(s);return Ah(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"alignTop",label:"labels.alignTop",icon:NA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"start",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:NA,onClick:()=>n(null),title:`${L("labels.alignTop")} — ${Q("CtrlOrCmd+Shift+Up")}`,"aria-label":L("labels.alignTop"),visible:Gn(Bt(e),t)})});oe({name:"alignBottom",label:"labels.alignBottom",icon:PA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"end",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:PA,onClick:()=>n(null),title:`${L("labels.alignBottom")} — ${Q("CtrlOrCmd+Shift+Down")}`,"aria-label":L("labels.alignBottom"),visible:Gn(Bt(e),t)})});oe({name:"alignLeft",label:"labels.alignLeft",icon:FA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"start",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:FA,onClick:()=>n(null),title:`${L("labels.alignLeft")} — ${Q("CtrlOrCmd+Shift+Left")}`,"aria-label":L("labels.alignLeft"),visible:Gn(Bt(e),t)})});oe({name:"alignRight",label:"labels.alignRight",icon:BA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"end",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[H.CTRL_OR_CMD]&&e.shiftKey&&e.key===H.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:BA,onClick:()=>n(null),title:`${L("labels.alignRight")} — ${Q("CtrlOrCmd+Shift+Right")}`,"aria-label":L("labels.alignRight"),visible:Gn(Bt(e),t)})});oe({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:zA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"center",axis:"y"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:zA,onClick:()=>n(null),title:L("labels.centerVertically"),"aria-label":L("labels.centerVertically"),visible:Gn(Bt(e),t)})});oe({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:HA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Wr(t,i),perform:(e,t,n,i)=>({appState:t,elements:bg(e,t,i,{position:"center",axis:"x"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Wr(t,i),type:"button",icon:HA,onClick:()=>n(null),title:L("labels.centerHorizontally"),"aria-label":L("labels.centerHorizontally"),visible:Gn(Bt(e),t)})});const bG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Te(i))},yG=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Ile(r,n.scene.getNonDeletedElementsMap(),i),o=we(s);return Ah(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:yG(e,t,i,{axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!bG(t,i),type:"button",icon:_ue,onClick:()=>n(null),title:`${L("labels.distributeHorizontally")} — ${Q("Alt+H")}`,"aria-label":L("labels.distributeHorizontally"),visible:Gn(Bt(e),t)})});oe({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:yG(e,t,i,{axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!bG(t,i),type:"button",icon:Tue,onClick:()=>n(null),title:`${L("labels.distributeVertically")} — ${Q("Alt+V")}`,"aria-label":L("labels.distributeVertically"),visible:Gn(Bt(e),t)})});const A5e=oe({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Ide,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Ah(EG(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.H}),M5e=oe({name:"flipVertical",label:"labels.flipVertical",icon:Sde,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Ah(EG(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.V&&!e[H.CTRL_OR_CMD]}),EG=(e,t,n,i,r)=>{const s=ze(Bt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=R5e(s,t,n,i,r),a=we(o);return e.map(l=>a.get(l.id)||l)},R5e=(e,t,n,i,r)=>{if(e.every(h=>Me(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ie(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=Es(e);KB(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,Lc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Rb(e.filter(Ce),Su(n),[],r.scene,n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>he(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Es(e),[d,f]=[s-c,o-u];return l.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),e},T2=oe({name:"copy",label:"labels.copy",icon:s4,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await l5e(r,i.files,n)}catch(s){return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),IR=oe({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await d5e()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),Hm?{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:L("hints.firefox_clipboard_write")}}:{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:L("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(o5e({types:r}))}catch(s){return console.error(s),{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:L("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),xR=oe({name:"cut",label:"labels.cut",icon:lde,trackEvent:{category:"element"},perform:(e,t,n,i)=>(T2.perform(e,t,n,i),OH.perform(e,t,null,i)),keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.X}),CR=oe({name:"copyAsSvg",label:"labels.copyAsSvg",icon:xde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=ey(e,t,!0);try{await ty("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:L("toast.copyToClipboardAsSvg",{exportSelection:o.length?L("toast.selection"):L("toast.canvas"),exportColorScheme:t.exportWithDarkMode?L("buttons.darkMode"):L("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>b_&&e.length>0,keywords:["svg","clipboard","copy"]}),AR=oe({name:"copyAsPng",label:"labels.copyAsPng",icon:Cde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=ey(e,t,!0);try{return await ty("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:L("toast.copyToClipboardAsPng",{exportSelection:r.length?L("toast.selection"):L("toast.canvas"),exportColorScheme:t.exportWithDarkMode?L("buttons.darkMode"):L("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>y_&&e.length>0,keyTest:e=>e.code===et.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),MR=oe({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{qc(WF(r))}catch{throw new Error(L("errors.copyToSystemClipboardFailed"))}return{captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>b_&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(ue),keywords:["text","clipboard","copy"]}),RR=oe({name:"gridMode",icon:kde,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[H.CTRL_OR_CMD]&&e.code===et.QUOTE}),C4=oe({name:"zenMode",label:"buttons.zenMode",icon:Mde,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.Z}),k5e=oe({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:Ade,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.S}),A4=oe({name:"stats",label:"stats.fullTitle",icon:Tde,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:K.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.SLASH}),L5e=oe({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>nr(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{var l;const a=Ne(o,s);if(a){const{width:c,height:u}=Vn(a.originalText,pt(a),a.lineHeight),d=moe(o.id);GF(o.id);const{x:f,y:h}=g5(o,a,s);i.scene.mutateElement(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),i.scene.mutateElement(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:K.IMMEDIATELY}}}),D5e=oe({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=ue(r[0])||ue(r[1]);let o;if($u(r[0])?o=r[0]:$u(r[1])&&(o=r[1]),s&&o&&Ne(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;ue(r[0])&&$u(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),i.scene.mutateElement(s,{containerId:o.id,verticalAlign:Fr.MIDDLE,textAlign:$m.CENTER,autoResize:!0,angle:Me(o)?0:(o==null?void 0:o.angle)??0}),i.scene.mutateElement(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return $i(s,o,i.scene),Cb(o.id,a),{elements:O5e(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:K.IMMEDIATELY}}}),O5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),oo(i,we([t,n])),i},N5e=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),oo(i,we([t,n])),i},P5e=oe({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.some(o=>ue(o));return r.length>0&&s},perform:(e,t,n,i)=>{var a;const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const l of r)if(ue(l)){const c=Zo({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Dd("rectangle")?gn.ADAPTIVE_RADIUS:gn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Fn,y:l.y-Fn,width:cd(l.width,"rectangle"),height:cd(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);s.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&i.scene.mutateElement(f,{startBinding:h,endBinding:m})})}i.scene.mutateElement(l,{containerId:c.id,verticalAlign:Fr.MIDDLE,boundElements:null,textAlign:$m.CENTER,autoResize:!0}),$i(l,c,i.scene),s=N5e([...s,c],c,l),o[c.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:K.IMMEDIATELY}}}),v_=380,F5e=42,M4=5,vG=85,B5e=500;let R4=!1;const IU=new Map,z5e=({element:e,scene:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=t.getNonDeletedElementsMap(),a=hp(),l=fp(),c=ii(),u=e.link||"",[d,f]=D.useState(u),h=D.useRef(null),m=a.showHyperlinkPopup==="editor",p=D.useCallback(()=>{var x;if(!h.current)return;const v=Gr(h.current.value)||null;if(!e.link&&v&&lt("hyperlink","create"),dr(e)){if(((x=a.activeEmbeddable)==null?void 0:x.element)===e&&n({activeEmbeddable:null}),!v){t.mutateElement(e,{link:null}),s(e,!1);return}if(!u2(v,l.validateEmbeddable))v&&r({message:L("toast.unableToEmbed"),closable:!0}),e.link&&IU.set(e.id,e.link),t.mutateElement(e,{link:v}),s(e,!1);else{const{width:M,height:_}=e,T=Pf(v);(T==null?void 0:T.error)instanceof URIError&&r({message:L("toast.unrecognizedLinkFormat"),closable:!0});const I=T?T.intrinsicSize.w/T.intrinsicSize.h:1,C=IU.get(e.id)!==e.link;t.mutateElement(e,{...C?{width:(T==null?void 0:T.type)==="video"?M>_?M:_*I:M,height:(T==null?void 0:T.type)==="video"&&M>_?M/I:_}:{},link:v}),s(e,!0),IU.has(e.id)&&IU.delete(e.id)}}else t.mutateElement(e,{link:v})},[e,t,r,l.validateEmbeddable,a.activeEmbeddable,n,s]);D.useLayoutEffect(()=>()=>{p()},[p]),D.useEffect(()=>{m&&(h!=null&&h.current)&&!(c.viewport.isMobile||c.isTouchScreen)&&h.current.select()},[m,c.viewport.isMobile,c.isTouchScreen]),D.useEffect(()=>{let v=null;const x=M=>{if(m)return;v&&clearTimeout(v),$5e(e,o,a,S(M.clientX,M.clientY))&&(v=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},B5e))};return window.addEventListener(ee.POINTER_MOVE,x,!1),()=>{window.removeEventListener(ee.POINTER_MOVE,x,!1),v&&clearTimeout(v)}},[a,e,m,n,o]);const U=D.useCallback(()=>{lt("hyperlink","delete"),t.mutateElement(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e,t]),y=()=>{lt("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:E,y:w}=wG(e,a,o);return a.contextMenu||a.selectedElementsAreBeingDragged||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:P("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${E}px`,width:v_,padding:M4},children:[m?g("input",{className:pe("excalidraw-hyperlinkContainer-input"),placeholder:L("labels.link.hint"),ref:h,value:d,onChange:v=>f(v.target.value),autoFocus:!0,onKeyDown:v=>{v.stopPropagation(),v[H.CTRL_OR_CMD]&&v.key===H.K&&v.preventDefault(),(v.key===H.ENTER||v.key===H.ESCAPE)&&(p(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:Gr(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:_F(e.link)?"_self":"_blank",onClick:v=>{if(e.link&&i){const x=UF(ee.EXCALIDRAW_LINK,v.nativeEvent);i({...e,link:Gr(e.link)},x),x.defaultPrevented&&v.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:L("labels.link.empty")}),P("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!m&&g(Ye,{type:"button",title:L("buttons.edit"),"aria-label":L("buttons.edit"),label:L("buttons.edit"),onClick:y,className:"excalidraw-hyperlinkContainer--edit",icon:x5}),g(Ye,{type:"button",title:L("labels.linkToElement"),"aria-label":L("labels.linkToElement"),label:L("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:kH}),u&&!dr(e)&&g(Ye,{type:"button",title:L("buttons.remove"),"aria-label":L("buttons.remove"),label:L("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:fd})]})]})},wG=(e,t,n)=>{const[i,r]=Oe(e,n),{x:s,y:o}=Br({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-v_/2,l=o-t.offsetTop-vG;return{x:a,y:l}},kR=(e,t)=>{var r;const n=ze(e,t);return dr(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"};let mm=null;const H5e=(e,t,n)=>{mm&&clearTimeout(mm),mm=window.setTimeout(()=>V5e(e,t,n),Oie)},V5e=(e,t,n)=>{if(!e.link)return;const i=um();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=om(e.link)?L("labels.link.goToElement"):e.link;const[r,s,o,a]=Oe(e,n),[l,c,u,d]=f_([r,s,o,a],e.angle,t),f=Br({sceneX:l,sceneY:c},t);WV(i,{left:f.x,top:f.y,width:u,height:d},"top"),lt("hyperlink","tooltip","link-icon"),R4=!0},LR=()=>{mm&&clearTimeout(mm),R4&&(R4=!1,um().classList.remove("excalidraw-tooltip--visible"))},$5e=(e,t,n,[i,r])=>{const{x:s,y:o}=Mt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(jw(s,o,e,t))return!1;const[l,c,u]=Oe(e,t);if(s>=l&&s<=u&&o>=c-vG&&o<=c)return!1;const{x:d,y:f}=wG(e,n,t);return!(i>=d-a&&i<=d+v_+M4*2+a&&r>=f-a&&r<=f+a+M4*2+F5e)},_G=oe({name:"hyperlink",label:(e,t)=>kR(e,t),icon:Xb,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:K.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.K,predicate:(e,t)=>ze(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=ze(e,t);return g(Ye,{type:"button",icon:Xb,"aria-label":L(kR(e,t)),title:`${dr(e[0])?L("labels.link.labelEmbed"):L("labels.link.label")} - ${Q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),kE=e=>e.every(t=>!t.locked),TG=oe({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return kE(i)?"labels.elementLock.lock":"labels.elementLock.unlock"},icon:(e,t)=>{const n=ze(t,e);return kE(n)?A9:I5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=kE(r),o=we(r),a=r.length>1&&Qw(r),c=r.length===1||a?null:tr();let u={...t.lockedMultiSelections};if(s)u={...t.lockedMultiSelections,...c?{[c]:!0}:{}};else if(a){const y=r[0].groupIds.at(-1);delete u[y]}const d=e.map(y=>{if(!o.has(y.id))return y;let E=y.groupIds;return s?c&&(E=[...E,c]):E=E.filter(w=>!t.lockedMultiSelections[w]),Ie(y,{locked:s,groupIds:E.length!==y.groupIds.length?E:y.groupIds})}),f=we(d),h=s?{}:Object.fromEntries(r.map(y=>[y.id,!0])),m=r.map(y=>f.get(y.id)||y),p=s?{}:np(m,t),U=s?c||(a?r[0].groupIds.at(-1):r[0].id):null;return{elements:d,appState:{...t,selectedElementIds:h,selectedGroupIds:p,selectedLinearElement:s?null:t.selectedLinearElement,lockedMultiSelections:u,activeLockedId:U},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===H.L&&e[H.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),G5e=oe({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:I5,predicate:(e,t)=>ze(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(o=>o.locked),i=e.map(o=>{if(o.locked){const a=o.groupIds.filter(l=>!t.lockedMultiSelections[l]);return Ie(o,{locked:!1,groupIds:o.groupIds.length!==a.length?a:o.groupIds})}return o}),r=we(i),s=n.map(o=>r.get(o.id)||o);return{elements:i,appState:{...t,selectedElementIds:Object.fromEntries(n.map(o=>[o.id,!0])),selectedGroupIds:np(s,t),lockedMultiSelections:{},activeLockedId:null},captureUpdate:K.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var SG={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(SG);var X5e=SG.exports;const j5e=dl(X5e),Y5e=8,W5e=10,M1=["rectangle","diamond","ellipse"],R1=["line","sharpArrow","curvedArrow","elbowArrow"],K5e=new Set(M1),Z5e=new Set(R1),Fh=e=>K5e.has(e),a6=e=>e==="arrow"||Z5e.has(e),Ea=Kt(null),h0=new Map,g0=new Map,q5e=({app:e})=>{const t=e.scene.getSelectedElements(e.state),n=D.useRef(null);return D.useEffect(()=>{if(t.length===0){e.updateEditorAtom(Ea,null);return}const i=iy(t);i&&!n.current?n.current=i:(n.current&&!i||n.current&&i!==n.current)&&(e.updateEditorAtom(Ea,null),n.current=null)},[t,e]),D.useEffect(()=>()=>{h0.clear(),g0.clear()},[]),g(Q5e,{app:e,elements:t})},Q5e=({app:e,elements:t})=>{const n=iy(t),i=D.useMemo(()=>n==="generic"?CG(t):[],[n,t]),r=D.useMemo(()=>n==="linear"?L4(t):[],[n,t]),s=n==="generic"?i.every(d=>d.type===i[0].type):n==="linear"?r.every(d=>Qf(d)===Qf(r[0])):!1,[o,a]=D.useState({x:0,y:0}),l=D.useRef(""),c=D.useRef(null);D.useEffect(()=>{const d=[...i,...r].sort((U,y)=>U.id.localeCompare(y.id)),f=`
      ${e.state.scrollX}${e.state.scrollY}${e.state.offsetTop}${e.state.offsetLeft}${e.state.zoom.value}${d.map(U=>U.id).join(",")}`;if(f===l.current)return;l.current=f;let h;if(d.length===1){const[U,,,y,E,w]=Oe(d[0],e.scene.getNonDeletedElementsMap());h=Z(S(U,y),S(E,w),d[0].angle)}else{const{minX:U,maxY:y}=Es(d);h=S(U,y)}const{x:m,y:p}=Br({sceneX:h[0],sceneY:h[1]},e.state);a({x:m,y:p})},[i,r,e.scene,e.state]),D.useEffect(()=>{for(const d of r){const f=k4(d.id,iye(d));g0.has(f)||g0.set(f,d)}},[r]),D.useEffect(()=>{for(const d of i)if(!h0.has(d.id)){const f=Ne(d,e.scene.getNonDeletedElementsMap());f&&h0.set(d.id,{fontSize:f.fontSize})}},[i,e.scene]);const u=n==="linear"?[["line",fH],["sharpArrow",CH],["curvedArrow",MH],["elbowArrow",AH]]:n==="generic"?[["rectangle",cH],["diamond",uH],["ellipse",dH]]:[];return g("div",{ref:c,tabIndex:-1,style:{position:"absolute",top:`${o.y+(W5e+8)*e.state.zoom.value-e.state.offsetTop}px`,left:`${o.x-e.state.offsetLeft-Y5e}px`,zIndex:2},className:Cc.CONVERT_ELEMENT_TYPE_POPUP,children:u.map(([d,f])=>{const h=s&&(n==="generic"&&i[0].type===d||n==="linear"&&Qf(r[0])===d);return g(Ye,{className:"Shape",type:"radio",icon:f,checked:h,name:"convertElementType-option",title:d,keyBindingLabel:"","aria-label":d,"data-testid":`toolbar-${d}`,onChange:()=>{var m;e.state.activeTool.type!==d&&lt("convertElementType",d,"ui"),IG(e,{conversionType:n,nextType:d}),(m=c.current)==null||m.focus()}},`${t[0].id}${t[0].version}_${d}`)})})},J5e=(e,t,n)=>{const i=Ko(e,t),r=tp(e,t),s=Wc(t.text,pt(t),i);let o=Vn(s,pt(t),t.lineHeight),a=t.fontSize;for(;(o.width>i||o.height>r)&&a>0;){a-=1;const l={...t,fontSize:a};o=Vn(t.text,pt(l),t.lineHeight)}mi(t,n.getNonDeletedElementsMap(),{fontSize:a,width:o.width,height:o.height}),$i(t,e,n)},IG=(e,{conversionType:t,nextType:n,direction:i="right"})=>{var a;if(!t)return!1;const r=e.scene.getSelectedElements(e.state),s=r.reduce((l,c)=>({...l,[c.id]:!0}),{}),o=i==="right"?1:-1;if(t==="generic"){const l=CG(r),u=l.every(d=>d.type===l[0].type)?M1.indexOf(l[0].type):-1;if(n=n??M1[(u+M1.length+o)%M1.length],n&&Fh(n)){const d={};for(const h of l){const m=OR(h,n,e);d[m.id]=m}const f=[];for(const h of e.scene.getElementsIncludingDeleted())d[h.id]?f.push(d[h.id]):f.push(h);e.scene.replaceAllElements(f);for(const h of Object.values(d)){const m=Ne(h,e.scene.getNonDeletedElementsMap());m&&(h0.get(h.id)&&mi(m,e.scene.getNonDeletedElementsMap(),{fontSize:((a=h0.get(h.id))==null?void 0:a.fontSize)??m.fontSize}),J5e(h,m,e.scene))}e.setState(h=>({selectedElementIds:s,activeTool:en(h,{type:"selection"})}))}}if(t==="linear"){const l=L4(r);if(!n){const u=vF(l,Qf),d=u?R1.indexOf(u):-1;n=R1[(d+R1.length+o)%R1.length]}if(a6(n)){const u=[],d=e.scene.getElementsMapIncludingDeleted();for(const f of l){const h=g0.get(k4(f.id,n));if(h&&Qf(h)===n)d.set(h.id,h),u.push(h);else{const m=OR(f,n,e);d.set(m.id,m),u.push(m)}}e.scene.replaceAllElements(d);for(const f of u)if(Ce(f))if(he(f)){const h=eye(f);if(h.length<2)continue;const m=[];for(let U=1;U<h.length-2;U++)m.push({start:h[U],end:h[U+1],index:U+1});const p=ug(f,e.scene.getNonDeletedElementsMap(),{points:h,fixedSegments:m});mi(f,e.scene.getNonDeletedElementsMap(),{...p,endArrowhead:"arrow"})}else{const h=Ere(["line","sharpArrow","curvedArrow"],m=>g0.get(k4(f.id,m)));if(h){const m=h.points;e.scene.mutateElement(f,{points:m})}}}const c=L4(e.scene.getSelectedElements(e.state));e.setState(u=>({selectedElementIds:s,selectedLinearElement:c.length===1?new ce(c[0],e.scene.getNonDeletedElementsMap()):null,activeTool:en(u,{type:"selection"})}))}return!0},iy=e=>{if(e.length===0)return null;let t=!1;for(const n of e){if(Fh(n.type))return"generic";xG(n)&&(t=!0)}return t?"linear":null},xG=e=>Ce(e)&&(!Me(e)||!FF(e)&&!nr(e)),k4=(e,t)=>`${e}:${t}`,CG=e=>e.filter(t=>Fh(t.type)),L4=e=>e.filter(t=>xG(t)),xU=20,gf=(e,t)=>e[0]===t[0],LE=(e,t)=>e[1]===t[1],DR=(e,t)=>gf(e,t)?Math.abs(e[1]-t[1]):Math.abs(e[0]-t[0]),eye=e=>{const t=[e.points[0]],n=tye(e.points);for(let s=1;s<n.length;++s){const o=t[t.length-1],a=[...n[s]];Math.abs(a[0]-o[0])<xU?a[0]=o[0]:Math.abs(a[1]-o[1])<xU&&(a[1]=o[1]),gf(o,a)||LE(o,a)||t.push(S(o[0],a[1])),t.push(a)}const i=[t[0]];for(let s=1;s<t.length-1;++s)gf(t[s-1],t[s])&&gf(t[s],t[s+1])||LE(t[s-1],t[s])&&LE(t[s],t[s+1])||i.push(t[s]);i.push(t[t.length-1]);const r=[i[0]];for(let s=1;s<i.length-1;++s){const o=r[r.length-1],a=i[s],l=i[s+1],c=gf(o,a),u=gf(a,l);if(c!==u){const d=DR(o,a),f=DR(a,l);if(d<xU||f<xU){if(f<d)c?l[0]=o[0]:l[1]=o[1];else if(u)for(let h=r.length-1;h>=0&&r[h][0]===o[0];--h)r[h][0]=a[0];else for(let h=r.length-1;h>=0&&r[h][1]===o[1];--h)r[h][1]=a[1];continue}}r.push(a)}return r.push(i[i.length-1]),r},tye=e=>{if(e.length===0)return[];const t=[e[0]];for(let n=1;n<e.length;n++){const[i,r]=t[t.length-1],[s,o]=e[n];(i!==s||r!==o)&&t.push(e[n])}return t},OR=(e,t,n)=>{if(!nye(e.type,t)||e.type===t)return e;if($t.delete(e),Fh(t)){const i=Ca(Zo({...e,type:t,roundness:t==="diamond"&&e.roundness?{type:Dd(t)?gn.ADAPTIVE_RADIUS:gn.PROPORTIONAL_RADIUS}:e.roundness}));return Ym(i,n.scene),i}if(a6(t))switch(t){case"line":return Ca(dc({...e,type:"line"}));case"sharpArrow":return Ca(eh({...e,type:"arrow",elbowed:!1,roundness:null,startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"curvedArrow":return Ca(eh({...e,type:"arrow",elbowed:!1,roundness:{type:gn.PROPORTIONAL_RADIUS},startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"elbowArrow":return Ca(eh({...e,type:"arrow",elbowed:!0,fixedSegments:null,roundness:null}))}return Xo(t,`unhandled conversion type: ${t}`),e},nye=(e,t)=>!!(Fh(e)&&Fh(t)||a6(e)&&a6(t)),iye=e=>Ce(e)?Qf(e):e.type,rye=oe({name:"toggleShapeSwitch",label:"labels.shapeSwitch",icon:()=>null,viewMode:!0,trackEvent:{category:"shape_switch",action:"toggle"},keywords:["change","switch","swap"],perform(e,t,n,i){return Or.set(Ea,{type:"panel"}),{captureUpdate:K.NEVER}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>iy(e)!==null}),AG=oe({name:"copyElementLink",label:"labels.copyElementLink",icon:sp,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=ze(e,t);try{if(window.location){const s=BB(r,t);return s?(await qc(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):FB(s.id,s.type)),{appState:{toast:{message:L("toast.elementLinkCopied"),closable:!0}},captureUpdate:K.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}},predicate:(e,t)=>$b(ze(e,t))}),sye=oe({name:"linkToElement",label:"labels.linkToElement",icon:kH,perform:(e,t,n,i)=>{const r=ze(e,t);return r.length!==1||!$b(r)?{elements:e,appState:t,app:i,captureUpdate:K.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:ze(e,t)[0].id}},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{var s;const r=ze(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&r.length===1&&$b(r)},trackEvent:!1}),oye={toggleTheme:[Q("Shift+Alt+D")],saveScene:[Q("CtrlOrCmd+S")],loadScene:[Q("CtrlOrCmd+O")],clearCanvas:[Q("CtrlOrCmd+Delete")],imageExport:[Q("CtrlOrCmd+Shift+E")],commandPalette:[Q("CtrlOrCmd+/"),Q("CtrlOrCmd+Shift+P")],cut:[Q("CtrlOrCmd+X")],copy:[Q("CtrlOrCmd+C")],paste:[Q("CtrlOrCmd+V")],copyStyles:[Q("CtrlOrCmd+Alt+C")],pasteStyles:[Q("CtrlOrCmd+Alt+V")],selectAll:[Q("CtrlOrCmd+A")],deleteSelectedElements:[Q("Delete")],duplicateSelection:[Q("CtrlOrCmd+D"),Q(`Alt+${L("helpDialog.drag")}`)],sendBackward:[Q("CtrlOrCmd+[")],bringForward:[Q("CtrlOrCmd+]")],sendToBack:[Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Q("Shift+Alt+C")],group:[Q("CtrlOrCmd+G")],ungroup:[Q("CtrlOrCmd+Shift+G")],gridMode:[Q("CtrlOrCmd+'")],zenMode:[Q("Alt+Z")],objectsSnapMode:[Q("Alt+S")],stats:[Q("Alt+/")],addToLibrary:[],flipHorizontal:[Q("Shift+H")],flipVertical:[Q("Shift+V")],viewMode:[Q("Alt+R")],hyperlink:[Q("CtrlOrCmd+K")],toggleElementLock:[Q("CtrlOrCmd+Shift+L")],resetZoom:[Q("CtrlOrCmd+0")],zoomOut:[Q("CtrlOrCmd+-")],zoomIn:[Q("CtrlOrCmd++")],zoomToFitSelection:[Q("Shift+3")],zoomToFit:[Q("Shift+1")],zoomToFitSelectionInViewport:[Q("Shift+2")],toggleEraserTool:[Q("E")],toggleHandTool:[Q("H")],setFrameAsActiveTool:[Q("F")],saveFileToDisk:[Q("CtrlOrCmd+S")],saveToActiveFile:[Q("CtrlOrCmd+S")],toggleShortcuts:[Q("?")],searchMenu:[Q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Vi=(e,t=0)=>{const n=oye[e];return n&&n.length>0?n[t]||n[0]:""},aye="\\u0300-\\u036f",lye="\\ufe20-\\ufe2f",cye="\\u20d0-\\u20ff",uye=aye+lye+cye,dye=`[${uye}]`,fye=RegExp(dye,"g"),hye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gye={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},NR=e=>e.replace(hye,t=>gye[t]||t).replace(fye,""),MG=()=>{const[e,t]=D.useState(null),n=D.useCallback(i=>t(i),[]);return[e,n]};var ry={},mye=pye;function pye(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var Uye=bye;function bye(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}ry.encode=mye;ry.decode=Uye;var yye=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},w_={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(w_);var Eye=yye,vye=w_,wye=Sye,vo=new Uint8Array(4),_ye=new Int32Array(vo.buffer),Tye=new Uint32Array(vo.buffer);function Sye(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];Tye[0]=l,r[n++]=vo[3],r[n++]=vo[2],r[n++]=vo[1],r[n++]=vo[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(Eye(a)),f=vye.buf(d);_ye[0]=f,r[n++]=vo[3],r[n++]=vo[2],r[n++]=vo[1],r[n++]=vo[0]}return r}const Iye=dl(wye);var xye=w_,Cye=Rye,wo=new Uint8Array(4),Aye=new Int32Array(wo.buffer),Mye=new Uint32Array(wo.buffer);function Rye(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){wo[3]=e[i++],wo[2]=e[i++],wo[1]=e[i++],wo[0]=e[i++];var r=Mye[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];wo[3]=e[i++],wo[2]=e[i++],wo[1]=e[i++],wo[0]=e[i++];var l=Aye[0],c=xye.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const RG=dl(Cye),kG=async e=>{const n=RG(new Uint8Array(await Ql(e))).find(i=>i.name==="tEXt");return n?ry.decode(n.data):null},LG=async({blob:e,metadata:t})=>{const n=RG(new Uint8Array(await Ql(e))),i=ry.encode(ye.excalidraw,JSON.stringify(z$({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([Iye(n)],{type:ye.png})},kye=async e=>{const t=await kG(e);if((t==null?void 0:t.keyword)===ye.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===bs.excalidraw)return t.text;throw new Error("FAILED")}return H$(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},DG=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:kye,encodePngMetadata:LG,getTEXtChunk:kG},Symbol.toStringTag,{value:"Module"})),sy=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=wd({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return nG(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),U=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=f*U,{canvas:h,scale:U}}const m=(r==null?void 0:r(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},Lye=async e=>{var r;let{mimeType:t=ye.png,quality:n}=e;t===ye.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${ye.png}" mimeType`),t==="image/jpg"&&(t=ye.jpg),t===ye.jpg&&!((r=e.appState)!=null&&r.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${ye.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await sy(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((s,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===ye.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await LG({blob:a,metadata:Ug(e.elements,e.appState,e.files||{},"local")})),s(a)},t,n)})},OG=async({elements:e,appState:t=Qo(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=wd({elements:e,appState:t},null,null),u={...c,exportPadding:i};return h_(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},NG=Kt(new Map),PR=async e=>await OG({elements:e,appState:{exportBackground:!1,viewBackgroundColor:He.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),Dye=(e,t,n)=>{const[i,r]=D.useState();return D.useEffect(()=>{if(t)if(e){const s=n.get(e);s?r(s):(async()=>{var a;const o=await PR(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),r(o))})()}else(async()=>{const s=await PR(t);r(s)})()},[e,t,n,r]),i},PG=()=>{const[e]=mn(NG);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},Oye=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],FG=new Fs,m0=Kt({status:"loaded",isInitialized:!1,libraryItems:[]}),i1=e=>Va(e),Nye=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),Pye=(e,t)=>{const n=[];for(const i of t)Nye(e,i)&&n.push(i);return[...n,...e]},BG=(e,t)=>{const n=we(t),i={deletedItems:new Map,addedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=we(e);for(const s of t)r.has(s.id)||i.addedItems.set(s.id,s);return i};class Fye{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=i1(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)Or.set(m0,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Or.set(m0,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=i1(this.currLibraryItems);const s=i1(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,s),FG.trigger(BG(r,s),s)}catch(r){console.error(r)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Or.set(NG,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(i1(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:ys.name,tab:gb}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await $6e(c,o):u=J5(c,o),!i||window.confirm(L("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?Pye(this.currLibraryItems,u):u)):l(new Dh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=i1(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const zG=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,U)=>{const{height:y}=Es(U.elements);return Math.max(p,y)},0),s=h=>{let m=0,p=0,U=0;for(const y of e){if(m%n===0&&(p=0),p===h){const{width:E}=Es(y.elements);U=Math.max(U,E)}m++,p++}return U};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:U,height:y}=Es(h.elements),E=(c-U)/2,w=(l-y)/2;i.push(...h.elements.map(v=>({...v,x:v.x+o+E-m,y:v.y+a+w-p}))),o+=c+50,u++,d++}return i},Bye=(e,t=Oye)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},D4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(v7.addLibrary)||new URLSearchParams(window.location.search).get(E7.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},Fl=class Fl{static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(J5((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?Fl.queue.push(r):r()}constructor(t){this.adapter=t}getLibraryItems(t){return Fl.getLibraryItems(this.adapter,t,!1)}};Fl.queue=new jie,Fl.run=async(t,n)=>{const i=new Fl(t);return Fl.queue.push(()=>n(i))};let oh=Fl,pm=0,l6=0;const O4=e=>T9(e.map(t=>`${t.id}:${sz(t.elements)}`).sort().join()),FR=async(e,t)=>{try{return l6++,await oh.run(e,async n=>{const i=we(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);const s=r.concat(Array.from(i.values())),o=O4(s);return o!==pm&&await e.save({libraryItems:s}),pm=o,s})}finally{l6--}},zye=e=>{const{excalidrawAPI:t}=e,n=D.useRef(e);n.current=e;const i=D.useRef(!1);D.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=zw(a),Bye(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(v7.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(v7.addLibrary),window.history.replaceState({},za,`#${d.toString()}`)}else if(window.location.search.includes(E7.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(E7.addLibrary),window.history.replaceState({},za,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=D4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=D4();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=c5();l?c.resolve(Rc(l.load).then(async u=>{let d=null;try{if(!u)return oh.getLibraryItems(a,"load");d=J5(u.libraryItems||[],"published");const f=await FR(a,BG([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),oh.getLibraryItems(a,"load")))):c.resolve(Rc(oh.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return pm=O4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(ee.HASHCHANGE,s),()=>{window.removeEventListener(ee.HASHCHANGE,s)}},[t]),D.useEffect(()=>{const r=FG.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&pm!==O4(a)&&await FR(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:L("errors.saveLibraryError")}})}}),s=o=>{l6&&Fw(o)};return window.addEventListener(ee.BEFORE_UNLOAD,s),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,s),r(),pm=0,l6=0}},[])},Hye=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${o5.excalidrawLibrary}`,target:"_excalidraw_libraries",children:L("labels.libraries")})},HG=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>P("div",{className:pe("library-menu-control-buttons",s),style:i,children:[g(Hye,{id:n,libraryReturnUrl:e,theme:t}),r]}),Vye=Kt(0),$ye=e=>{const[t,n]=mn(Vye);return D.useEffect(()=>{const{current:i}=e;if(!i)return;const r=Do(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},Bh=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return P("button",{className:pe("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(il,{})})]})},VG=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=L("buttons.confirm"),cancelText:s=L("buttons.cancel"),className:o="",...a}=e,l=Yn(),c=T5(__),{container:u}=sa();return P(Kr,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,P("div",{className:"confirm-dialog-buttons",children:[g(Bh,{label:s,onClick:()=>{l({openMenu:null}),c(!1),Sn.flushSync(()=>{n()}),u==null||u.focus()}}),g(Bh,{label:r,onClick:()=>{l({openMenu:null}),c(!1),Sn.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class ju{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(ju,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(ju,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const Gye=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,Xye=/{{([\w-]+)}}/,jye=/<([\w-]+)>/,Yye=/<\/([\w-]+)>/,Wye=(e,t)=>{const n=[{name:"",children:[]}];return e.split(Gye).filter(Boolean).forEach(i=>{const r=i.match(jye),s=i.match(Yye),o=i.match(Xye);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=ae.createElement(ae.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},pr=({i18nKey:e,children:t,...n})=>{const{t:i}=wn();return ae.createElement(ae.Fragment,{},...Wye(i(e),n))},Kye=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=pre(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=fi.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await sy({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=fi.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await I4(new File([await d0(o)],"preview",{type:ye.png}),{outputType:ye.jpg,maxWidthOrHeight:5e3})},Zye=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=D.useRef(null),o=D.useRef(null);return D.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await OG({elements:e.elements,appState:{...t,viewBackgroundColor:fi.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),P("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:L("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(Ye,{"aria-label":L("buttons.remove"),type:"button",icon:dg,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:L("buttons.remove")}),P("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[P("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[P("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:fi.gray[6]},children:L("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},qye=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=D.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=D.useState(!1);D.useEffect(()=>{const w=ju.get(em.PUBLISH_LIBRARY);w&&l(w)},[]);const[d,f]=D.useState(t.slice());D.useEffect(()=>{f(t.slice())},[t]);const h=w=>{l({...a,[w.target.name]:w.target.value})},m=async w=>{w.preventDefault(),u(!0);const v=[];let x=!1;if(d.forEach(R=>{let N="";R.name||(N=L("publishDialog.errors.required"),x=!0),v.push({...R,error:N})}),x){f(v),u(!1);return}const M=await Kye(d),_={type:bs.excalidrawLibrary,version:o5.excalidrawLibrary,source:Mw(),libraryItems:d},T=JSON.stringify(_,null,2),I=new Blob([T],{type:"application/json"}),C=new FormData;C.append("excalidrawLib",I),C.append("previewImage",M),C.append("previewImageType",M.type),C.append("title",a.name),C.append("authorName",a.authorName),C.append("githubHandle",a.githubHandle),C.append("name",a.name),C.append("description",a.description),C.append("twitterHandle",a.twitterHandle),C.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:C}).then(R=>R.ok?R.json().then(({url:N})=>{ju.delete(em.PUBLISH_LIBRARY),i({url:N,authorName:a.authorName,items:d})}):R.json().catch(()=>{throw new Error(R.statusText||"something went wrong")}).then(N=>{throw new Error(N.message||R.statusText||"something went wrong")}),R=>{console.error(R),r(R),u(!1)}).catch(R=>{console.error(R),r(R),u(!1)})},p=()=>{const w=[];return d.forEach((v,x)=>{w.push(g("div",{className:"single-library-item-wrapper",children:g(Zye,{libItem:v,appState:n,index:x,onChange:(M,_)=>{const T=d.slice();T[_].name=M,f(T)},onRemove:o})},x))}),g("div",{className:"selected-library-items",children:w})},U=D.useCallback(()=>{s(d),ju.set(em.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),y=!!t.length,E=t.some(w=>w.status==="published");return g(Kr,{onCloseRequest:U,title:L("publishDialog.title"),className:"publish-library",children:y?P("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(pr,{i18nKey:"publishDialog.noteDescription",link:w=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener",children:w})})}),g("span",{className:"publish-library-note",children:g(pr,{i18nKey:"publishDialog.noteGuidelines",link:w=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:w})})}),g("div",{className:"publish-library-note",children:L("publishDialog.noteItems")}),E&&g("span",{className:"publish-library-note publish-library-warning",children:L("publishDialog.republishWarning")}),p(),P("div",{className:"publish-library__fields",children:[P("label",{children:[P("div",{children:[g("span",{children:L("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:L("publishDialog.placeholder.libraryName")})]}),P("label",{style:{alignItems:"flex-start"},children:[P("div",{children:[g("span",{children:L("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:L("publishDialog.placeholder.libraryDesc")})]}),P("label",{children:[P("div",{children:[g("span",{children:L("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:L("publishDialog.placeholder.authorName")})]}),P("label",{children:[g("span",{children:L("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:L("publishDialog.placeholder.githubHandle")})]}),P("label",{children:[g("span",{children:L("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:L("publishDialog.placeholder.twitterHandle")})]}),P("label",{children:[g("span",{children:L("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:L("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:L("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(pr,{i18nKey:"publishDialog.noteLicense",link:w=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:w})})})]}),P("div",{className:"publish-library__buttons",children:[g(Bh,{label:L("buttons.cancel"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),g(Bh,{type:"submit",label:L("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:L("publishDialog.atleastOneLibItem")})})},Qye=D.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:pe("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),Jye=D.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:pe("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),ms={Row:Qye,Col:Jye},$G=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r})=>{const s=ii(),o=D.useRef(null),a=P5({onClickOutside:t});q9(o,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),D.useEffect(()=>{const c=d=>{var f;d.key===H.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(ee.KEYDOWN,c,u),()=>{document.removeEventListener(ee.KEYDOWN,c,u)}},[a]);const l=pe(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return g(HV.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:r,"data-testid":"dropdown-menu",children:s.editor.isMobile?g(ms.Col,{className:"dropdown-menu-container",children:e}):g(Qs,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};$G.displayName="DropdownMenuContent";const e8e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),Um=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noopener",...l})=>{const c=$V(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:a||"noopener",className:VV(s,o),title:l.title??l["aria-label"],onClick:c,children:g(zV,{icon:e,shortcut:t,children:i})})};Um.displayName="DropdownMenuItemLink";const GG=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});GG.displayName="DropdownMenuSeparator";const XG=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=ii(),o=pe(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};XG.displayName="DropdownMenuTrigger";const t8e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},n8e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},Qe=({children:e,open:t})=>{const n=t8e(e),i=n8e(e);return P(ge,{children:[n,t&&i]})};Qe.Trigger=XG;Qe.Content=$G;Qe.Item=_r;Qe.ItemLink=Um;Qe.ItemCustom=e8e;Qe.Group=qb;Qe.Separator=GG;Qe.displayName="DropdownMenu";const i8e=(e,t)=>e.filter(n=>t.includes(n.id)),r8e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=mn(m0),[c,u]=mn(__),d=()=>{const C=t.length?L("alerts.removeItemsFromsLibrary",{count:t.length}):L("alerts.resetLibrary"),R=t.length?L("confirmDialog.removeItemsFromLib"):L("confirmDialog.resetLibrary");return g(VG,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:R,children:g("p",{children:C})})},[f,h]=D.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(C=>t.includes(C.id)):l.libraryItems,U=L(m?"buttons.remove":"buttons.resetLibrary"),[y,E]=D.useState(!1),[w,v]=D.useState(null),x=D.useCallback(()=>P(Kr,{onCloseRequest:()=>v(null),title:L("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(pr,{i18nKey:"publishSuccessDialog.content",authorName:w.authorName,link:C=>g("a",{href:w==null?void 0:w.url,target:"_blank",rel:"noopener noreferrer",children:C})})}),g(Ye,{type:"button",title:L("buttons.close"),"aria-label":L("buttons.close"),label:L("buttons.close"),onClick:()=>v(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[v,w]),M=(C,R)=>{E(!1),v({url:C.url,authorName:C.authorName});const N=R.slice();N.forEach(k=>{t.includes(k.id)&&(k.status="published")}),n.setLibrary(N)},_=async()=>{try{await n.updateLibrary({libraryItems:d_({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(C){if((C==null?void 0:C.name)==="AbortError"){console.warn(C);return}e({errorMessage:L("errors.importLibraryError")})}},T=async()=>{const C=m?p:await n.getLatestLibrary();_6e(C).catch(hF).catch(R=>{e({errorMessage:R.message})})},I=()=>P(Qe,{open:c,children:[g(Qe.Trigger,{onToggle:()=>u(!c),children:Jce}),P(Qe.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(Qe.Item,{onSelect:_,icon:L9,"data-testid":"lib-dropdown--load",children:L("buttons.load")}),!!p.length&&g(Qe.Item,{onSelect:T,icon:C5,"data-testid":"lib-dropdown--export",children:L("buttons.export")}),!!p.length&&g(Qe.Item,{onSelect:()=>h(!0),icon:fd,children:U}),m&&g(Qe.Item,{icon:ade,onSelect:()=>E(!0),"data-testid":"lib-dropdown--remove",children:L("buttons.publishLibrary")})]})]});return P("div",{className:pe("library-menu-dropdown-container",a),children:[I(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),y&&g(qye,{onClose:()=>E(!1),libraryItems:i8e(l.libraryItems,t),appState:o,onSuccess:C=>M(C,l.libraryItems),onError:C=>window.alert(C),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:C=>s(t.filter(R=>R!==C))}),w&&x()]})},BR=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=go(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=PG(),o=Ii(),a=Yn(),[l]=mn(m0),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:L("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(r8e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function s8e(){return[!1,D.useCallback(t=>t(),[])]}const o8e=ae.useTransition||s8e,a8e=D.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=D.useRef(null),c=Dye(e,t,a);D.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=D.useState(!1),f=ii().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:Qce});return P("div",{className:pe("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:pe("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(s_,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),l8e=()=>g("div",{className:"library-unit library-unit--skeleton"}),zR=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),DE=D.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=o8e(),[l,c]=D.useState(0);return D.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(ge,{children:e.map((u,d)=>d<l?g(a8e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:r,svgCache:s,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(l8e,{},d))})}),c8e=17,u8e=64;function d8e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=D.useRef(null),d=$ye(u);D.useEffect(()=>{var C;d>0&&((C=u.current)==null||C.scrollTo(0,d))},[]);const{svgCache:f}=PG(),h=D.useMemo(()=>t.filter(C=>C.status!=="published"),[t]),m=D.useMemo(()=>t.filter(C=>C.status==="published"),[t]),p=!t.length&&!r.length,U=!r.length&&!h.length&&!m.length,[y,E]=D.useState(null),w=D.useCallback((C,R)=>{const N=!c.includes(C),k=[...h,...m];if(N){if(R.shiftKey&&y){const $=k.findIndex(j=>j.id===y),V=k.findIndex(j=>j.id===C);if($===-1||V===-1){l([...c,C]);return}const z=we(c),G=k.reduce((j,X,q)=>((q>=$&&q<=V||z.has(X.id))&&j.push(X.id),j),[]);l(G)}else l([...c,C]);E(C)}else E(null),l(c.filter($=>$!==C))},[y,l,m,c,h]),v=D.useCallback(C=>{let R;return c.includes(C)?R=t.filter(N=>c.includes(N.id)):R=t.filter(N=>N.id===C),R.map(N=>({...N,elements:zb({type:"everything",elements:N.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),x=D.useCallback((C,R)=>{R.dataTransfer.setData(ye.excalidrawlib,Y$(v(C)))},[v]),M=D.useCallback(C=>C?c.includes(C):!1,[c]),_=D.useCallback(()=>{n(r)},[r,n]),T=D.useCallback(C=>{C&&i(v(C))},[v,i]),I=f.size>=t.length?u8e:c8e;return P("div",{className:"library-menu-items-container",style:r.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!U&&g(BR,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),P(ms.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[P(ge,{children:[!U&&g("div",{className:"library-menu-items-container__header",children:L("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(il,{})}),!r.length&&!h.length?P("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:L("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?L("library.hint_emptyPrivateLibrary"):L("library.hint_emptyLibrary")})]}):P(zR,{children:[r.length>0&&g(DE,{itemsRenderedPerBatch:I,items:[{id:null,elements:r}],onItemSelectToggle:w,onItemDrag:x,onClick:_,isItemSelected:M,svgCache:f}),g(DE,{itemsRenderedPerBatch:I,items:h,onItemSelectToggle:w,onItemDrag:x,onClick:T,isItemSelected:M,svgCache:f})]})]}),P(ge,{children:[(m.length>0||r.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:L("labels.excalidrawLib")}),m.length>0?g(zR,{children:g(DE,{itemsRenderedPerBatch:I,items:m,onItemSelectToggle:w,onItemDrag:x,onClick:T,isItemSelected:M,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:L("library.noItems")}):null]}),p&&g(HG,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:g(BR,{selectedItems:c,onSelectItems:l})})]})]})}const __=Kt(!1),HR=({children:e})=>g("div",{className:"layer-ui__library",children:e}),f8e=D.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=mn(m0),d=D.useCallback(m=>{(async(U,y)=>{lt("element","addToLibrary","ui");for(const w of eF)if(U.some(v=>v.type===w))return i({errorMessage:L(`errors.libraryElementTypeError.${w}`)});const E=[{status:"unpublished",elements:U,id:tr(),created:Date.now()},...y];n(),s.setLibrary(E).catch(()=>{i({errorMessage:L("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=D.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(HR,{children:g("div",{className:"layer-ui__library-message",children:P("div",{children:[g(il,{size:"2em"}),g("span",{children:L("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return P(HR,{children:[g(d8e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(HG,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),OE=(e,t)=>({elements:e,pending:ze(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),h8e=(e,t)=>{const n=uy(),[i,r]=D.useState(()=>OE(n,e.selectedElementIds)),s=D.useRef(new Map);return D.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),D.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{var l;if(!Hi(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),OE(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==s.current.get(c))return OE(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},g8e=D.memo(()=>{const e=go(),{onInsertElements:t}=e,n=fp(),i=Ii(),r=Yn(),[s,o]=D.useState([]),a=D.useMemo(()=>e.library,[e.library]),l=h8e(i,e),c=D.useCallback(d=>{t(zG(d))},[t]),u=D.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(f8e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),m8e=e=>{const{closeOnClickOutside:t=!0}=e,n=OV({className:"excalidraw-modal-container"}),i=D.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===H.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return Sn.createPortal(P("div",{className:pe("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function p8e(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const Kr=e=>{const[t,n]=MG(),[i]=D.useState(document.activeElement),{id:r}=sa(),s=ii().viewport.isMobile;D.useEffect(()=>{if(!t)return;const c=x7(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===H.TAB){const f=x7(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=Yn(),a=T5(__),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(m8e,{className:pe("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:p8e(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:P(Qs,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:L("buttons.close"),"aria-label":L("buttons.close"),type:"button",children:dg}),g("div",{className:"Dialog__content",children:e.children})]})})},zh=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:u5(s.onClick,o=>{t()}),type:e,className:pe("excalidraw-button",r,{selected:n}),...s,children:i}),Hh=D.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=D.useRef(null);D.useImperativeHandle(d,()=>f.current),D.useLayoutEffect(()=>{var p,U;s&&((p=f.current)==null||p.focus(),(U=f.current)==null||U.select())},[s]);const[h,m]=D.useState(!1);return P("div",{className:pe("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var p;(p=f.current)==null||p.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),P("div",{className:pe("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:pe({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:r,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e==null?void 0:e(p.target.value),onKeyDown:o}),a&&g(zh,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?Ude:O9})]})]})}),T_=[{icon:sue,value:"selection",key:H.V,numericKey:H[1],fillable:!0},{icon:cH,value:"rectangle",key:H.R,numericKey:H[2],fillable:!0},{icon:uH,value:"diamond",key:H.D,numericKey:H[3],fillable:!0},{icon:dH,value:"ellipse",key:H.O,numericKey:H[4],fillable:!0},{icon:oue,value:"arrow",key:H.A,numericKey:H[5],fillable:!0},{icon:fH,value:"line",key:H.L,numericKey:H[6],fillable:!0},{icon:x5,value:"freedraw",key:[H.P,H.X],numericKey:H[7],fillable:!1},{icon:M9,value:"text",key:H.T,numericKey:H[8],fillable:!1},{icon:lue,value:"image",key:null,numericKey:H[9],fillable:!1},{icon:cue,value:"eraser",key:H.E,numericKey:H[0],fillable:!1}],U8e=e=>{const t=T_.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null};var b8e={};const VR=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(b8e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},y8e=e=>e?VR(e):VR;var jG={exports:{}},YG={},WG={exports:{}},KG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=D;function E8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var v8e=typeof Object.is=="function"?Object.is:E8e,w8e=Vh.useState,_8e=Vh.useEffect,T8e=Vh.useLayoutEffect,S8e=Vh.useDebugValue;function I8e(e,t){var n=t(),i=w8e({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return T8e(function(){r.value=n,r.getSnapshot=t,NE(r)&&s({inst:r})},[e,n,t]),_8e(function(){return NE(r)&&s({inst:r}),e(function(){NE(r)&&s({inst:r})})},[e]),S8e(n),n}function NE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!v8e(e,n)}catch{return!0}}function x8e(e,t){return t()}var C8e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x8e:I8e;KG.useSyncExternalStore=Vh.useSyncExternalStore!==void 0?Vh.useSyncExternalStore:C8e;WG.exports=KG;var A8e=WG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=D,M8e=A8e;function R8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var k8e=typeof Object.is=="function"?Object.is:R8e,L8e=M8e.useSyncExternalStore,D8e=oy.useRef,O8e=oy.useEffect,N8e=oy.useMemo,P8e=oy.useDebugValue;YG.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=D8e(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=N8e(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,k8e(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=L8e(e,s[0],s[1]);return O8e(function(){o.hasValue=!0,o.value=a},[a]),P8e(a),a};jG.exports=YG;var F8e=jG.exports;const B8e=dl(F8e);var ZG={};const{useDebugValue:z8e}=ae,{useSyncExternalStoreWithSelector:H8e}=B8e;let $R=!1;const V8e=e=>e;function $8e(e,t=V8e,n){(ZG?"production":void 0)!=="production"&&n&&!$R&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$R=!0);const i=H8e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return z8e(i),i}const GR=e=>{(ZG?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?y8e(e):e,n=(i,r)=>$8e(t,i,r);return Object.assign(n,t),n},G8e=e=>e?GR(e):GR;var XR,jR;const YR=typeof window<"u"&&((XR=window.document)!=null&&XR.createElement||((jR=window.navigator)==null?void 0:jR.product)==="ReactNative")?ae.useLayoutEffect:ae.useEffect;function yo(){const e=G8e(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return YR(()=>{n(r=>({version:r.version+1}))},[]),YR(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return ae.createElement(ae.Fragment,null,t)}}}const qG=ae.createContext(null),or=()=>ae.useContext(qG),X8e=pz(),j8e=()=>ae.useMemo(()=>({MainMenuTunnel:yo(),WelcomeScreenMenuHintTunnel:yo(),WelcomeScreenToolbarHintTunnel:yo(),WelcomeScreenHelpHintTunnel:yo(),WelcomeScreenCenterTunnel:yo(),FooterCenterTunnel:yo(),DefaultSidebarTriggerTunnel:yo(),DefaultSidebarTabTriggersTunnel:yo(),OverwriteConfirmDialogTunnel:yo(),TTDDialogTriggerTunnel:yo(),tunnelsJotai:X8e}),[]),QG=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const r of t)if(r.type!==n){n=null;break}return F7(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(r=>F7(r.type))},JG=(e,t)=>Rh(e.activeTool.type)||t.some(n=>Rh(n.type)),eX=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const r=JF(t,e);let s=!1;r.length===2&&(nr(r[0])||nr(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=ii(),l=document.documentElement.getAttribute("dir")==="rtl",c=Rh(e.activeTool.type)&&!Ys(e.currentItemBackgroundColor)||r.some(m=>Rh(m.type)&&!Ys(m.backgroundColor)),u=r.length===1||s,d=!e.editingLinearElement&&r.length===1&&Ce(r[0])&&!he(r[0]),f=!e.croppingElementId&&r.length===1&&gt(r[0]),h=!s&&Wr(e,i);return P("div",{className:"selected-shape-actions",children:[g("div",{children:QG(e,r)&&n("changeStrokeColor")}),JG(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(BC(e.activeTool.type)||r.some(m=>BC(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(zC(e.activeTool.type)||r.some(m=>zC(m.type)))&&P(ge,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(B7(e.activeTool.type)||r.some(m=>B7(m.type)))&&g(ge,{children:n("changeRoundness")}),(HC(e.activeTool.type)||r.some(m=>HC(m.type)))&&g(ge,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(ue))&&P(ge,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||Doe(r,t))&&n("changeTextAlign")]}),Loe(r,t)&&n("changeVerticalAlign"),(Nb(e.activeTool.type)||r.some(m=>Nb(m.type)))&&g(ge,{children:n("changeArrowhead")}),n("changeOpacity"),P("fieldset",{children:[g("legend",{children:L("labels.layers")}),P("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&P("fieldset",{children:[g("legend",{children:L("labels.align")}),P("div",{className:"buttonList",children:[l?P(ge,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):P(ge,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),P("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&P("fieldset",{children:[g("legend",{children:L("labels.actions")}),P("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},tX=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[r,s]=D.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="lasso",c=e.type==="embeddable",{TTDDialogTriggerTunnel:u}=or();return P(ge,{children:[T_.map(({value:d,icon:f,key:h,numericKey:m,fillable:p},U)=>{var v;if(((v=i.tools)==null?void 0:v[d])===!1)return null;const y=L(`toolBar.${d}`),E=h&&im(typeof h=="string"?h:h[0]),w=E?`${E} ${L("helpDialog.or")} ${m}`:`${m}`;return g(Ye,{className:pe("Shape",{fillable:p}),type:"radio",icon:f,checked:e.type===d,name:"editor-current-shape",title:`${im(y)} — ${w}`,keyBindingLabel:m||E,"aria-label":im(y),"aria-keyshortcuts":w,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:x})=>{!t.penDetected&&x==="pen"&&n.togglePenMode(!0),d==="selection"&&(t.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:x})=>{t.activeTool.type!==d&&lt("toolbar",d,"ui"),d==="image"?n.setActiveTool({type:d,insertOnCanvasDirectly:x!=="mouse"}):n.setActiveTool({type:d})}},d)}),g("div",{className:"App-toolbar__divider"}),P(Qe,{open:r,children:[g(Qe.Trigger,{className:pe("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!r),title:L("toolBar.extraTools"),children:o?jb:c?CA:a&&!n.props.isCollaborating?c4:l?r4:mde}),P(Qe.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:jb,shortcut:H.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:L("toolBar.frame")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:CA,"data-testid":"toolbar-embeddable",selected:c,children:L("toolBar.embeddable")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:c4,"data-testid":"toolbar-laser",selected:a,shortcut:H.K.toLocaleUpperCase(),children:L("toolBar.laser")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:r4,"data-testid":"toolbar-lasso",selected:l,children:L("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(u.Out,{}),g(Qe.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:TH,"data-testid":"toolbar-embeddable",children:L("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(ge,{children:P(Qe.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:SH,"data-testid":"toolbar-magicframe",children:[L("toolBar.magicframe"),g(Qe.Item.Badge,{children:"AI"})]})})]})]})]})},Y8e=({renderAction:e,zoom:t})=>g(ms.Col,{gap:1,className:Cc.ZOOM_ACTIONS,children:P(ms.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),W8e=({renderAction:e,className:t})=>P("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(pd,{label:L("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:P(pd,{label:L("buttons.redo"),children:[" ",e("redo")]})})]}),K8e=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:pe("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(C4),children:L("buttons.exitZenMode")}),Z8e=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),WR=e=>{const t=D.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},ay=Kt(null),q8e=()=>{const[e,t]=mn(ay),n=Tr();return e&&e==="clearCanvas"?g(VG,{onConfirm:()=>{n.executeAction(dm),t(null)},onCancel:()=>t(null),title:L("clearCanvasDialog.title"),children:P("p",{className:"clear-canvas__content",children:[" ",L("alerts.clearReset")]})}):null},Q8e={...Qb,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(Qb,"commandPalette")}},J8e=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:Q8e},Symbol.toStringTag,{value:"Module"})),eEe=Kt(null),dt={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},tEe=e=>{switch(e){case dt.app:return 1;case dt.export:return 2;case dt.editor:return 3;case dt.tools:return 4;case dt.elements:return 5;case dt.links:return 6;default:return 10}},S2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return P("div",{className:pe("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},nX=e=>!e.altKey&&e[H.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===H.P||e.key===H.SLASH),KR=Object.assign(e=>{var i;const t=Ii(),n=Yn();return D.useEffect(()=>{const r=s=>{nX(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&lt("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(ee.KEYDOWN,r,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,r,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(nEe,{...e})},{defaultItems:J8e});function nEe({customCommandPaletteItems:e}){const t=go(),n=Ii(),i=Yn(),r=fp(),s=Tr(),[o,a]=mn(eEe),[l,c]=D.useState(null),u=D.useRef(null),d=P5({uiAppState:n,customCommandPaletteItems:e,appProps:r});D.useEffect(()=>{const{uiAppState:M,customCommandPaletteItems:_,appProps:T}=d,I=k=>{let $="";return k.label&&(typeof k.label=="function"?$=L(k.label(t.scene.getNonDeletedElements(),M,t)):$=L(k.label)),$},C=k=>typeof k.icon=="function"?k.icon(M,t.scene.getNonDeletedElements()):k.icon;let R=[];const N=(k,$,V)=>{const z={label:I(k),icon:C(k),category:$,shortcut:Vi(k.name),keywords:k.keywords,predicate:k.predicate,viewMode:k.viewMode,perform:()=>{s.executeAction(k,"commandPalette")}};return V?V(z,k):z};if(M&&t.scene&&s){const k=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,_G,AG,sye].map(X=>N(X,dt.elements,(q,fe)=>({...q,predicate:fe.predicate?fe.predicate:(ie,Ue,Ve,$e)=>ze(ie,Ue).length>0}))),$=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool,s.actions.toggleLassoTool].map(X=>N(X,dt.tools)),V=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(X=>N(X,dt.editor)),z=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(X=>N(X,dt.export));R=[...k,...V,{label:I(dm),icon:C(dm),shortcut:Vi(dm.name),category:dt.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Or.set(ay,"clearCanvas")}},{label:L("buttons.exportImage"),category:dt.export,icon:pH,shortcut:Vi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...z];const G=[{label:L("toolBar.library"),category:dt.app,icon:C9,viewMode:!1,perform:()=>{M.openSidebar?i({openSidebar:null}):i({openSidebar:{name:ys.name,tab:ys.defaultTab}})}},{label:L("search.title"),category:dt.app,icon:hd,viewMode:!0,perform:()=>{s.executeAction(iX)}},{label:L("labels.shapeSwitch"),category:dt.elements,icon:u4,perform:()=>{s.executeAction(rye)}},{label:L("labels.changeStroke"),keywords:["color","outline"],category:dt.elements,icon:eE,viewMode:!1,predicate:(X,q)=>{const fe=ze(X,q);return fe.length>0&&QG(q,fe)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:L("labels.changeBackground"),keywords:["color","fill"],icon:eE,category:dt.elements,viewMode:!1,predicate:(X,q)=>{const fe=ze(X,q);return fe.length>0&&JG(q,fe)},perform:()=>{i(X=>({openMenu:X.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:L("labels.canvasBackground"),keywords:["color"],icon:eE,category:dt.editor,viewMode:!1,perform:()=>{i(X=>({openMenu:X.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...T_.reduce((X,q)=>{var Ct;const{value:fe,icon:ie,key:Ue,numericKey:Ve}=q;if(((Ct=T.UIOptions.tools)==null?void 0:Ct[fe])===!1)return X;const nt=Ue&&im(typeof Ue=="string"?Ue:Ue[0])||Ve,zt={label:L(`toolBar.${fe}`),category:dt.tools,shortcut:nt,icon:ie,keywords:["toolbar"],viewMode:!1,perform:({event:Zt})=>{fe==="image"?t.setActiveTool({type:fe,insertOnCanvasDirectly:Zt.type===ee.KEYDOWN}):t.setActiveTool({type:fe})}};return X.push(zt),X},[]),...$,{label:L("toolBar.lock"),category:dt.tools,icon:M.activeTool.locked?A9:I5,shortcut:H.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${L("labels.textToDiagram")}...`,category:dt.tools,icon:yde,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${L("toolBar.mermaidToExcalidraw")}...`,category:dt.tools,icon:TH,viewMode:!1,predicate:T.aiEnabled,perform:()=>{i(X=>({...X,openDialog:{name:"ttd",tab:"mermaid"}}))}}],j=[...R,...G,..._||[]].map(X=>{var q;return{...X,icon:X.icon||u4,order:X.order??tEe(X.category),haystack:`${NR(X.label.toLocaleLowerCase())} ${((q=X.keywords)==null?void 0:q.join(" "))||""}`}});c(j),a(j.find(X=>X.label===(o==null?void 0:o.label))??null)}},[d,t,s,c,o==null?void 0:o.label,a,i]);const[f,h]=D.useState(""),[m,p]=D.useState(null),[U,y]=D.useState({}),E=M=>{i({openDialog:null},M),h("")},w=(M,_)=>{var T;((T=n.openDialog)==null?void 0:T.name)==="commandPalette"&&(_.stopPropagation(),_.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),E(()=>{M.perform({actionManager:s,event:_}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},v=WR(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,r,t):M.predicate===void 0||M.predicate),x=WR(M=>{var C;const _=Uu(M.target)||nX(M)||M.key===H.ESCAPE;if(_&&M.key!==H.ARROW_UP&&M.key!==H.ARROW_DOWN&&M.key!==H.ENTER)return;const T=Object.values(U).flat(),I=o&&!f&&v(o);if(M.key===H.ARROW_UP){M.preventDefault();const R=T.findIndex($=>$.label===(m==null?void 0:m.label));if(I){if(R===0){p(o);return}if(m===o){const $=T[T.length-1];$&&p($);return}}let N;R===-1?N=T.length-1:N=R===0?T.length-1:(R-1)%T.length;const k=T[N];k&&p(k);return}if(M.key===H.ARROW_DOWN){M.preventDefault();const R=T.findIndex($=>$.label===(m==null?void 0:m.label));if(I){if(!m||R===T.length-1){p(o);return}if(m===o){const $=T[0];$&&p($);return}}const N=(R+1)%T.length,k=T[N];k&&p(k);return}if(M.key===H.ENTER&&m&&setTimeout(()=>{w(m,M)}),!_){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(C=u==null?void 0:u.current)==null||C.focus();return}M.preventDefault()}});return D.useEffect(()=>(window.addEventListener(ee.KEYDOWN,x,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,x,{capture:!0})),[x]),D.useEffect(()=>{if(!l)return;const M=C=>{const R={};for(const N of C)R[N.category]?R[N.category].push(N):R[N.category]=[N];return R};let _=l.filter(v).sort((C,R)=>C.order-R.order);const T=!f&&o&&v(o);if(!f){y(M(T?_.filter(C=>C.label!==(o==null?void 0:o.label)):_)),p(T?o:_[0]||null);return}const I=NR(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));_=j5e.filter(I,_,{extract:C=>C.haystack}).sort((C,R)=>R.score-C.score).map(C=>C.original),y(M(_)),p(_[0]??null)},[f,l,v,o]),P(Kr,{onCloseRequest:()=>E(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Hh,{value:f,placeholder:L("commandPalette.search.placeholder"),onChange:M=>{h(M)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&P("div",{className:"shortcuts-wrapper",children:[g(S2,{shortcut:"↑↓",children:L("commandPalette.shortcuts.select")}),g(S2,{shortcut:"↵",children:L("commandPalette.shortcuts.confirm")}),g(S2,{shortcut:Q("Esc"),children:L("commandPalette.shortcuts.close")})]}),P("div",{className:"commands",children:[o&&!f&&P("div",{className:"command-category",children:[P("div",{className:"command-category-title",children:[L("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:Ede})]}),g(ZR,{command:o,isSelected:o.label===(m==null?void 0:m.label),onClick:M=>w(o,M),disabled:!v(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(U).length>0?Object.keys(U).map((M,_)=>P("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:M}),U[M].map(T=>g(ZR,{command:T,isSelected:T.label===(m==null?void 0:m.label),onClick:I=>w(T,I),onMouseMove:()=>p(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},M)):l?P("div",{className:"no-match",children:[g("div",{className:"icon",children:hd})," ",L("commandPalette.search.noMatch")]}):null]})]})}const ZR=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o})=>{const a=()=>{};return P("div",{className:pe("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:r,onMouseMove:n?a:i,title:n?L("commandPalette.itemNotAvailable"):"",children:[P("div",{className:"name",children:[e.icon&&g(z5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&g(S2,{shortcut:e.shortcut})]})},iEe=oe({name:"toggleLinearEditor",category:dt.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&r.length===1&&Ce(r[0])&&!he(r[0]))},perform(e,t,n,i){var o;const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===r.id?null:new ce(r,we(e));return{appState:{...t,editingLinearElement:s},captureUpdate:K.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],r=L(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Ye,{type:"button",icon:Lde,title:r,"aria-label":r,onClick:()=>t(null)})}}),iX=oe({name:"searchMenu",icon:hd,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var r,s;if(((r=t.openSidebar)==null?void 0:r.name)===ys.name&&t.openSidebar.tab===Hu){const o=(s=i.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${Cc.SEARCH_MENU_INPUT_WRAPPER} input`);return o==null||o.focus(),o==null||o.select(),!1}return{appState:{...t,openSidebar:{name:ys.name,tab:Hu},openDialog:null},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[H.CTRL_OR_CMD]&&e.key===H.F}),rEe=oe({name:"cropEditor",label:"helpDialog.cropStart",icon:XA,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&gt(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=L("helpDialog.cropStart");return g(Ye,{type:"button",icon:XA,title:i,"aria-label":i,onClick:()=>t(null)})}}),rX=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&Te(n[0])},sEe=oe({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(Te(r)){const s=Ss(Bt(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:K.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>rX(t,i)}),oEe=oe({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return Te(r)?{elements:nB(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:K.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>rX(t,i)});oe({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:K.EVENTUALLY}),checked:e=>e.frameRendering.enabled});oe({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:jb,viewMode:!1,perform:(e,t,n,i)=>{const r=en(t,{type:"frame"});return Eo(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:en(t,{type:"frame"})},captureUpdate:K.EVENTUALLY}},keyTest:e=>!e[H.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===H.F});const aEe=oe({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=ze(e,t);return r.length>0&&!r.some(s=>Te(s))},perform:(e,t,n,i)=>{const r=ze(e,t),s=i.scene.getNonDeletedElementsMap(),[o,a,l,c]=yt(r,s),u=16,d=b9({x:o-u,y:a-u,width:l-o+u*2,height:c-a+u*2});if(t.editingGroupId){const h=kt(r,t.editingGroupId);for(const m of h){const p=m.groupIds.indexOf(t.editingGroupId);mi(m,s,{groupIds:m.groupIds.slice(0,p)})}}return{elements:rm([...i.scene.getElementsIncludingDeleted(),d],r,d,t),appState:{selectedElementIds:{[d.id]:!0}},captureUpdate:K.IMMEDIATELY}}});class CU extends m9{}class c6{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class Ru{constructor(t){F(this,"onHistoryChangedEmitter",new Fs);F(this,"undoStack",[]);F(this,"redoStack",[]);this.store=t}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t){if(t.isEmpty()||t instanceof CU)return;const n=CU.inverse(t);this.undoStack.push(n),n.elements.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new c6(this.isUndoStackEmpty,this.isRedoStackEmpty))}undo(t,n){return this.perform(t,n,()=>Ru.pop(this.undoStack),i=>Ru.push(this.redoStack,i,t))}redo(t,n){return this.perform(t,n,()=>Ru.pop(this.redoStack),i=>Ru.push(this.undoStack,i,t))}perform(t,n,i,r){try{let s=i();if(s===null)return;const o=K.IMMEDIATELY;let a=this.store.snapshot,l=t,c=n,u=!1;for(;s;){try{[l,c,u]=m9.applyTo(s,l,c,a);const d=a.maybeClone(o,l,c);this.store.scheduleMicroAction({action:o,change:Jf.create(a,d),delta:s}),a=d}finally{r(s)}if(u)break;s=i()}return[l,c]}finally{this.onHistoryChangedEmitter.trigger(new c6(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n,i){const r=CU.inverse(n),s=CU.applyLatestChanges(r,i,"inserted");return t.push(s)}}const sX=(e,t)=>{const[n,i]=D.useState(t);return D.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},oX=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:K.EVENTUALLY};const[r,s]=i,o=U9(Array.from(r.values()));return{appState:s,elements:o,captureUpdate:K.NEVER}}return{captureUpdate:K.EVENTUALLY}},lEe=e=>({name:"undo",label:"buttons.undo",icon:MA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>oX(r,n,()=>e.undo(we(t),n)),keyTest:t=>t[H.CTRL_OR_CMD]&&w7(t,H.Z)&&!t.shiftKey,PanelComponent:({updateData:t,data:n})=>{const{isUndoStackEmpty:i}=sX(e.onHistoryChangedEmitter,new c6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ye,{type:"button",icon:MA,"aria-label":L("buttons.undo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),cEe=e=>({name:"redo",label:"buttons.redo",icon:RA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>oX(r,n,()=>e.redo(we(t),n)),keyTest:t=>t[H.CTRL_OR_CMD]&&t.shiftKey&&w7(t,H.Z)||jP&&t.ctrlKey&&!t.shiftKey&&w7(t,H.Y),PanelComponent:({updateData:t,data:n})=>{const{isRedoStackEmpty:i}=sX(e.onHistoryChangedEmitter,new c6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ye,{type:"button",icon:RA,"aria-label":L("buttons.redo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),uEe=oe({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=ze(e,t);return r.length===1&&ue(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=ze(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&ue(s)){const o=Vn(s.originalText,pt(s),s.lineHeight);return Ie(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:K.IMMEDIATELY}}}),qR=oe({name:"viewMode",label:"labels.viewMode",icon:O9,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[H.CTRL_OR_CMD]&&e.altKey&&e.code===et.R}),PE=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&lt(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class dEe{constructor(t,n,i,r){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{PE(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=s=>{if(K0(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return PE(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();PE(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}}class fEe{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const QR=e=>{const t=Array.from(e.values());return{x:ek(t,n=>n.x)/t.length,y:ek(t,n=>n.y)/t.length}},JR=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),ek=(e,t)=>e.reduce((n,i)=>n+t(i),0),hEe=8,tk=99999,ly=e=>hEe/e,Wi=class Wi{};F(Wi,"referenceSnapPoints",null),F(Wi,"visibleGaps",null),F(Wi,"setReferenceSnapPoints",t=>{Wi.referenceSnapPoints=t}),F(Wi,"getReferenceSnapPoints",()=>Wi.referenceSnapPoints),F(Wi,"setVisibleGaps",t=>{Wi.visibleGaps=t}),F(Wi,"getVisibleGaps",()=>Wi.visibleGaps),F(Wi,"destroy",()=>{Wi.referenceSnapPoints=null,Wi.visibleGaps=null});let Bs=Wi;const p0=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Pc=({event:e,app:t,selectedElements:n})=>e?t.state.activeTool.type!=="lasso"&&(t.state.objectsSnapModeEnabled&&!e[H.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[H.CTRL_OR_CMD]&&!p0(t)):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,gEe=(e,t,n=.01)=>Math.abs(e-t)<=n,U0=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Oe(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=Z(S(a,l+m),S(d,f),o.angle),U=Z(S(a+h,l),S(d,f),o.angle),y=Z(S(c,l+m),S(d,f),o.angle),E=Z(S(a+h,u),S(d,f),o.angle),w=S(d,f);s=n?[p,U,y,E]:[p,U,y,E,w]}else{const p=Z(S(a,l),S(d,f),o.angle),U=Z(S(c,l),S(d,f),o.angle),y=Z(S(a,u),S(d,f),o.angle),E=Z(S(c,u),S(d,f),o.angle),w=S(d,f);s=n?[p,U,y,E]:[p,U,y,E,w]}}else if(e.length>1){const[o,a,l,c]=h9(e,r??{x:0,y:0}),u=l-o,d=c-a,f=S(o,a),h=S(l,a),m=S(o,c),p=S(l,c),U=S(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,U]}return s.map(o=>S(an(o[0]),an(o[1])))},aX=(e,t,n,i)=>{const r=t.filter(s=>Te(s)).map(s=>s.id);return QF(e,t,n,i).filter(s=>!(s.frameId&&r.includes(s.frameId)))},mEe=(e,t,n,i)=>{const r=aX(e,t,n,i),s=m5(r,i).filter(d=>!(d.length===1&&Gt(d[0]))).map(d=>yt(d).map(f=>an(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>tk)break e;const m=o[h],[,p,U,y]=f,[E,w,,v]=m;U<E&&yb(Di(p,y),Di(w,v))&&a.push({startBounds:f,endBounds:m,startSide:[S(U,p),S(U,y)],endSide:[S(E,w),S(E,v)],length:E-U,overlap:Eb(Di(p,y),Di(w,v))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>tk)break e;const m=c[h],[p,,U,y]=f,[E,w,v]=m;y<w&&yb(Di(p,U),Di(E,v))&&u.push({startBounds:f,endBounds:m,startSide:[S(p,y),S(U,y)],endSide:[S(E,w),S(v,w)],length:w-y,overlap:Eb(Di(p,U),Di(E,v))})}}return{horizontalGaps:a,verticalGaps:u}},nk=(e,t,n,i,r,s,o)=>{if(!Pc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Bs.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=h9(e,t).map(U=>an(U)),m=(u+f)/2,p=(d+h)/2;for(const U of l){if(!yb(Di(d,h),U.overlap))continue;const y=U.startSide[0][0]+U.length/2,E=an(y-m);if(U.length>f-u&&Math.abs(E)<=o.x){Math.abs(E)<o.x&&(r.length=0),o.x=Math.abs(E);const C={type:"gap",direction:"center_horizontal",gap:U,offset:E};r.push(C);continue}const[,,v]=U.endBounds,x=u-v,M=an(U.length-x);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(r.length=0),o.x=Math.abs(M);const C={type:"gap",direction:"side_right",gap:U,offset:M};r.push(C);continue}const[_,,,]=U.startBounds,T=_-f,I=an(T-U.length);if(Math.abs(I)<=o.x){Math.abs(I)<o.x&&(r.length=0),o.x=Math.abs(I);const C={type:"gap",direction:"side_left",gap:U,offset:I};r.push(C);continue}}for(const U of c){if(!yb(Di(u,f),U.overlap))continue;const y=U.startSide[0][1]+U.length/2,E=an(y-p);if(U.length>h-d&&Math.abs(E)<=o.y){Math.abs(E)<o.y&&(s.length=0),o.y=Math.abs(E);const C={type:"gap",direction:"center_vertical",gap:U,offset:E};s.push(C);continue}const[,v,,]=U.startBounds,x=v-h,M=an(x-U.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);const C={type:"gap",direction:"side_top",gap:U,offset:M};s.push(C);continue}const[,,,_]=U.endBounds,T=an(d-_),I=U.length-T;if(Math.abs(I)<=o.y){Math.abs(I)<o.y&&(s.length=0),o.y=Math.abs(I);const C={type:"gap",direction:"side_bottom",gap:U,offset:I};s.push(C);continue}}}},pEe=(e,t,n,i)=>{const r=aX(e,t,n,i);return m5(r,i).filter(s=>!(s.length===1&&Gt(s[0]))).flatMap(s=>U0(s,i))},$h=(e,t,n,i,r,s,o)=>{if(!Pc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Bs.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},UEe=(e,t,n,i,r)=>{var U,y;const s=n.state,o=ze(e,s);if(!Pc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=an(t.x),t.y=an(t.y);const a=[],l=[],c=ly(s.zoom.value),u={x:c,y:c},d=U0(o,r,{dragOffset:t});$h(o,d,n,i,a,l,u),nk(o,t,n,i,a,l,u);const f={x:((U=a[0])==null?void 0:U.offset)??0,y:((y=l[0])==null?void 0:y.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:an(t.x+f.x),y:an(t.y+f.y)};$h(o,U0(o,r,{dragOffset:h}),n,i,a,l,u),nk(o,h,n,i,a,l,u);const m=S_(a,l),p=yEe(o,h,[...a,...l].filter(E=>E.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},an=e=>Math.round(e*10**6)/10**6,ik=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},S_=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=an(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>S(an(o[0]),an(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=an(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>S(an(o[0]),an(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:ik(s.map(o=>S(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:ik(s.map(o=>S(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},bEe=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[an(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},yEe=(e,t,n)=>{const[i,r,s,o]=h9(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,U]=l.gap.endBounds,y=Eb(Di(r,o),l.gap.overlap),E=Eb(Di(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(l.gap.startSide[0][0],w),S(i,w)]},{type:"gap",direction:"horizontal",points:[S(s,w),S(l.gap.endSide[0][0],w)]})}break}case"center_vertical":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,l.gap.startSide[0][1]),S(w,r)]},{type:"gap",direction:"vertical",points:[S(w,o),S(w,l.gap.endSide[0][1])]})}break}case"side_right":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(d,w),S(h,w)]},{type:"gap",direction:"horizontal",points:[S(p,w),S(i,w)]})}break}case"side_left":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(s,w),S(c,w)]},{type:"gap",direction:"horizontal",points:[S(d,w),S(h,w)]})}break}case"side_top":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,o),S(w,u)]},{type:"gap",direction:"vertical",points:[S(w,f),S(w,m)]})}break}case"side_bottom":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,f),S(w,m)]},{type:"gap",direction:"vertical",points:[S(w,U),S(w,r)]})}break}}}return bEe(a.map(l=>({...l,points:l.points.map(c=>S(an(c[0]),an(c[1])))})))},rk=(e,t,n,i,r,s)=>{var M,_;if(!Pc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!gEe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=yt(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(S(l,a),S(l,c));break}case"w":{u.push(S(o,a),S(o,c));break}case"n":{u.push(S(o,a),S(l,a));break}case"s":{u.push(S(o,c),S(l,c));break}case"ne":{u.push(S(l,a));break}case"nw":{u.push(S(o,a));break}case"se":{u.push(S(l,c));break}case"sw":{u.push(S(o,c));break}}const d=ly(n.state.zoom.value),f={x:d,y:d},h=[],m=[];$h(t,u,n,i,h,m,f);const p={x:((M=h[0])==null?void 0:M.offset)??0,y:((_=m[0])==null?void 0:_.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[U,y,E,w]=yt(e).map(T=>an(T)),v=[S(U,y),S(U,w),S(E,y),S(E,w)];$h(e,v,n,i,h,m,f);const x=S_(h,m);return{snapOffset:p,snapLines:x}},EEe=(e,t,n,i,r,s)=>{var m,p;if(!Pc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[S(i.x+r.x,i.y+r.y)],a=ly(t.state.zoom.value),l={x:a,y:a},c=[],u=[];$h([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=U0([e],s,{boundingBoxCorners:!0,omitCenter:!0});$h([e],f,t,n,c,u,l);const h=S_(c,u);return{snapOffset:d,snapLines:h}},vEe=(e,t,n,i,r)=>{if(!Pc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=QF(e,[],t.state,r),o=ly(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=U0([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,S(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,S(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},wEe=e=>e===Zn.rectangle||e===Zn.ellipse||e===Zn.diamond||e===Zn.frame||e===Zn.magicframe||e===Zn.image||e===Zn.text,AU={width:100,height:0},Jl=100,_Ee=(e,t,n)=>{const i=Yr({x:0,y:0,textAlign:$m.CENTER,verticalAlign:Fr.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),$i(i,e,n),[e,i]},sk=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??Jl,d=(t==null?void 0:t.height)??Jl;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),s=Yr({x:h,y:m,type:"text",...f,...t,text:U}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=Zo({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:Xo(e,`Unhandled element start type "${t.type}"`,!0)}gs(e,s,"start",r)}}if(n){const u=(n==null?void 0:n.height)??Jl,d=(n==null?void 0:n.width)??Jl;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=Yr({x:h,y:m,type:"text",...f,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=Zo({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:Xo(e,`Unhandled element end type "${p}"`,!0)}gs(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Va(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,ce.getNormalizedPoints({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class TEe{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>tl(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>jo(we(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const N4=(e,t)=>{var l,c,u;if(!e)return[];const n=Va(e),i=new TEe,r=new Map,s=new Map;for(const d of n){let f;const h=d.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(d,{id:tr()}),d.type){case"rectangle":case"ellipse":case"diamond":{const p=(l=d==null?void 0:d.label)!=null&&l.text&&d.width===void 0?0:(d==null?void 0:d.width)||Jl,U=(c=d==null?void 0:d.label)!=null&&c.text&&d.height===void 0?0:(d==null?void 0:d.height)||Jl;f=Zo({...d,width:p,height:U});break}case"line":{const p=d.width||AU.width,U=d.height||AU.height;f=dc({width:p,height:U,points:[S(0,0),S(p,U)],...d});break}case"arrow":{const p=d.width||AU.width,U=d.height||AU.height;f=eh({width:p,height:U,endArrowhead:"arrow",points:[S(0,0),S(p,U)],...d,type:"arrow"}),Object.assign(f,Th(f.points));break}case"text":{const p=(d==null?void 0:d.fontFamily)||jc,U=(d==null?void 0:d.fontSize)||gl,y=(d==null?void 0:d.lineHeight)||Ac(p),E=d.text??"",w=xh(E),v=Vn(w,pt({fontFamily:p,fontSize:U}),y);f=Yr({width:v.width,height:v.height,fontFamily:p,fontSize:U,...d});break}case"image":{f=VB({width:(d==null?void 0:d.width)||Jl,height:(d==null?void 0:d.height)||Jl,...d});break}case"frame":{f=b9({x:0,y:0,...d});break}case"magicframe":{f=X7({x:0,y:0,...d});break}case"freedraw":case"iframe":case"embeddable":{f=d;break}default:f=d,Xo(d,`Unhandled element type "${d.type}"`,!0)}i.getElement(f.id)?console.error(`Duplicate id found for ${f.id}`):(i.add(f),r.set(f.id,d),h&&s.set(h,f.id))}const o=i.getElementsMap(),a=new Vb(o);for(const[d,f]of r){const h=i.getElement(d);switch(f.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((u=f.label)!=null&&u.text){let[m,p]=_Ee(h,f==null?void 0:f.label,a);if(i.add(m),i.add(p),Me(m)){const U=f.type==="arrow"?f==null?void 0:f.start:void 0,y=f.type==="arrow"?f==null?void 0:f.end:void 0;if(U&&U.id){const x=s.get(U.id);x&&Object.assign(U,{id:x})}if(y&&y.id){const x=s.get(y.id);x&&Object.assign(y,{id:x})}const{linearElement:E,startBoundElement:w,endBoundElement:v}=sk(m,U,y,i,a);m=E,i.add(E),i.add(w),i.add(v)}}else switch(f.type){case"arrow":{const{start:m,end:p}=f;if(m&&m.id){const w=s.get(m.id);Object.assign(m,{id:w})}if(p&&p.id){const w=s.get(p.id);Object.assign(p,{id:w})}const{linearElement:U,startBoundElement:y,endBoundElement:E}=sk(h,m,p,i,a);i.add(U),i.add(y),i.add(E);break}}break}}}for(const[d,f]of r){if(f.type!=="frame"&&f.type!=="magicframe")continue;const h=i.getElement(d);if(!h)throw new Error(`Excalidraw element with id ${d} doesn't exist`);const m=[];f.children.forEach(T=>{var R;const I=s.get(T);if(!I)throw new Error(`Element with ${T} wasn't mapped correctly`);const C=i.getElement(I);if(!C)throw new Error(`Frame element with id ${I} doesn't exist`);Object.assign(C,{frameId:h.id}),(R=C==null?void 0:C.boundElements)==null||R.forEach(N=>{const k=i.getElement(N.id);if(!k)throw new Error(`Bound element with id ${N.id} doesn't exist`);Object.assign(k,{frameId:h.id}),m.push(k)}),m.push(C)});let[p,U,y,E]=yt(m);const w=10;p=p-w,U=U-w,y=y+w,E=E+w;const v=(h==null?void 0:h.x)||p,x=(h==null?void 0:h.y)||U,M=(h==null?void 0:h.width)||y-p,_=(h==null?void 0:h.height)||E-U;Object.assign(h,{x:v,y:x,width:M,height:_})}return i.getElements()},SEe="#ff6b6b",IEe="#ff0000",ok=1,ak=2,xEe=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===Ae.LIGHT||t.zenModeEnabled?SEe:IEe,i=(t.zenModeEnabled?ok*1.5:ok)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,AEe(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,MEe(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,CEe(r,e,t));e.restore()},CEe=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];Jr(i,r,t)}for(const i of e.points)lX(i,n,t)},AEe=(e,t,n)=>{lX(e.points[0],n,t),n.zenModeEnabled||Jr(e.points[0],e.points[1],t)},lX=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?ak*1.5:ak)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},Jr=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},MEe=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||Jr(S(e[0],e[1]-s),S(e[0],e[1]+s),r),Jr(S(l[0]-a,l[1]-o),S(l[0]-a,l[1]+o),r),Jr(S(l[0]+a,l[1]-o),S(l[0]+a,l[1]+o),r),i.zenModeEnabled||(Jr(S(t[0],t[1]-s),S(t[0],t[1]+s),r),Jr(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||Jr(S(e[0]-s,e[1]),S(e[0]+s,e[1]),r),Jr(S(l[0]-o,l[1]-a),S(l[0]+o,l[1]-a),r),Jr(S(l[0]-o,l[1]+a),S(l[0]+o,l[1]+a),r),i.zenModeEnabled||(Jr(S(t[0]-s,t[1]),S(t[0]+s,t[1]),r),Jr(e,t,r))}},So=4,is=6,REe="rgba(0,0,0,0.3)",kEe=(e,t,n,i)=>{if(!e.size)return{horizontal:null,vertical:null};const[r,s,o,a]=yt(e),l=t/i.zoom.value,c=n/i.zoom.value,u={top:parseInt(lU("sat"))||0,bottom:parseInt(lU("sab"))||0,left:parseInt(lU("sal"))||0,right:parseInt(lU("sar"))||0},d=qm().rtl,f=-i.scrollX+u.left,h=-i.scrollY+u.top,m=f+l-u.right,p=h+c-u.bottom,U=Math.min(r,f),y=Math.min(s,h),E=Math.max(o,m),w=Math.max(a,p),v=o-r,x=a-s,M=E-U,_=w-y,T=Math.max(So*2,u.left+u.right)+is*2,I=t*(l/M)-T,C=Math.max(So*2,u.top+u.bottom)+is*2,R=n*(c/_)-C,N=M>v?M*i.zoom.value/(I+T):t/(I+T),k=_>x?_*i.zoom.value/(R+C):n/(R+C);return{horizontal:f===U&&m===E?null:{x:Math.max(u.left,So)+is+(f-U)/M*t,y:n-is-Math.max(So,u.bottom),width:I,height:is,deltaMultiplier:N},vertical:h===y&&p===w?null:{x:d?Math.max(u.left,So):t-is-Math.max(u.right,So),y:Math.max(u.top,So)+is+(h-y)/_*n,width:is,height:R,deltaMultiplier:k}}},lk=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},LEe=(e,t)=>{Ur(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;Ur(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),cX(n,e,t),e.restore()},DEe=(e,t,n)=>{var a,l;const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(r))return;const s=ce.getElement(i,n);if(!s)return;const o=ce.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),cX(o,e,t),e.restore()},cX=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",K5(t,e[0],e[1],ce.POINT_HANDLE_SIZE/n.zoom.value,!1)},FE=(e,t,n,i,r,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),K5(e,n[0],n[1],i/t.zoom.value,!s)},OEe=(e,t,n,i)=>{const[r,s,o,a]=Oe(t,n),l=o-r,c=a-s;e.strokeStyle="rgba(0,0,0,.05)",e.fillStyle="rgba(0,0,0,.05)";const u=ud(t,t.width,t.height,i);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":S6e(e,t,u);break;case"diamond":x6e(e,u,t);break;case"ellipse":e.lineWidth=ud(t,t.width,t.height,i)-Rt,I6e(e,l+u+Rt,c+u+Rt,r+l/2,s+c/2,t.angle);break}},NEe=(e,t,n,i)=>{const[r,s,o]=t,a=ud(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=ce.getPointAtIndexGlobalCoordinates(r,c,n);K5(e,u,d,a)})},uX=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,U=(n.padding??sd*2)/t.zoom.value,y=8/t.zoom.value,E=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const w=l.length;for(let v=0;v<w;++v)e.strokeStyle=l[v],d&&e.setLineDash([y,E+(y+E)*(w-1)]),e.lineDashOffset=(y+E)*v,Q5(e,r-U,s-U,h+U*2,m+U*2,c,u,i);e.restore()},PEe=(e,t,n,i)=>{const r=Array.isArray(n)?NEe:OEe;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},FEe=(e,t,n,i)=>{const[r,s,o,a]=Oe(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Pt.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Q5(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,Pt.radius/t.zoom.value),e.restore()},ck=(e,t,n,i)=>{const{colors:r=["rgb(0,118,255)"],dashed:s=!1}=i||{},o=n.filter(u=>u.groupIds.length===0),a=n.filter(u=>u.groupIds.length>0),l=u=>{const[d,f,h,m]=yt(u);return{angle:0,x1:d,x2:h,y1:f,y2:m,selectionColors:r,dashed:s,cx:d+(h-d)/2,cy:f+(m-f)/2,activeEmbeddable:!1}},c=u=>{const d=kt(n,u);return l(d)};Object.entries(np(a,t)).filter(([u,d])=>d).map(([u,d])=>u).map(u=>c(u)).concat(o.map(u=>l([u]))).forEach(u=>uX(e,t,u))},BE=(e,t,n,i)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=ce.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=ce,o=t.editingLinearElement?s:s/2;if(r.forEach((l,c)=>{var d,f;if(he(n)&&c!==0&&c!==r.length-1)return;const u=!!((f=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&f.includes(c));FE(e,t,l,o,u)}),he(n)){const l=((a=n.fixedSegments)==null?void 0:a.map(c=>c.index))||[];r.slice(0,-1).forEach((c,u)=>{ce.isSegmentTooShort(n,r[u+1],r[u],u,t.zoom)||FE(e,t,S((c[0]+r[u+1][0])/2,(c[1]+r[u+1][1])/2),s/2,!1,!l.includes(u+1))})}else ce.getEditorMidPoints(n,i,t).filter((c,u,d)=>c!==null&&!(he(n)&&(u===0||u===d.length-1))).forEach(c=>{(t.editingLinearElement||r.length===2)&&FE(e,t,c,s/2,!1,!0)});e.restore()},uk=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?K5(e,a+c/2,l+u/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):Q5(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},BEe=(e,t,n,i,r)=>{const[s,o,,,a,l]=Oe(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),U=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,U]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,U]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-U]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-U]]].forEach(E=>{const[[w,v],[x,M],[_,T],[I,C],[R,N]]=E;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(w+x,v+M),e.lineTo(w+_,v+T),e.stroke(),e.beginPath(),e.moveTo(w+I,v+C),e.lineTo(w+R,v+N),e.stroke(),e.restore()}),e.restore()},zEe=(e,t,n,i)=>{t.save();const r=sd*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},dX=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,device:l})=>{var p,U,y,E;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=Z5(e,s),d=q5({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(w=>{var v;((v=o.editingLinearElement)==null?void 0:v.elementId)===w.id&&w&&(f=w)}),f&&BE(d,o,f,t),o.selectionElement&&!o.isCropping)try{aae(o.selectionElement,d,o,a.selectionColor)}catch(w){console.error(w)}if(o.editingTextElement&&ue(o.editingTextElement)){const w=r.get(o.editingTextElement.id);w&&!w.autoResize&&zEe(w,d,o,a.selectionColor)}if(o.isBindingEnabled&&o.suggestedBindings.filter(w=>w!=null).forEach(w=>{PEe(d,o,w,t)}),o.frameToHighlight&&FEe(d,o,o.frameToHighlight,t),o.elementsToHighlight&&ck(d,o,o.elementsToHighlight),o.activeLockedId){const w=r.get(o.activeLockedId),v=w?[w]:kt(r,o.activeLockedId);ck(d,o,v,{colors:["#ced4da"],dashed:!0})}const h=i.some(w=>Te(w));if(i.length===1&&((p=o.editingLinearElement)==null?void 0:p.elementId)===i[0].id&&BE(d,o,i[0],t),o.selectedLinearElement){const w=o.selectedLinearElement,v=i.find(x=>x.id===w.elementId);w.segmentMidPointHoveredCoords?LEe(d,o):(he(v)?w.hoverPointIndex===0||w.hoverPointIndex===v.points.length-1:w.hoverPointIndex>=0)&&DEe(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const w=QB(i,o),v=i.length===1&&Ce(i[0]);v&&((U=o.selectedLinearElement)==null?void 0:U.elementId)===i[0].id&&!i[0].locked&&BE(d,o,i[0],t);const x=a.selectionColor||fi.black;if(w){const M=we(i),_=[];for(const I of t.values()){const C=[],R=a.remoteSelectedElementIds.get(I.id);if(v&&he(I)&&(I.startBinding||I.endBinding)||(M.has(I.id)&&!ZF(o,I)&&C.push(x),R&&C.push(...R.map(N=>ny(N,o.collaborators.get(N))))),C.length){const[N,k,$,V,z,G]=Oe(I,t,!0);_.push({angle:I.angle,x1:N,y1:k,x2:$,y2:V,selectionColors:I.locked?["#ced4da"]:C,dashed:!!R||I.locked,cx:z,cy:G,activeEmbeddable:((y=o.activeEmbeddable)==null?void 0:y.element)===I&&o.activeEmbeddable.state==="active",padding:I.id===o.croppingElementId||gt(I)?0:void 0})}}const T=I=>{const C=kt(t,I),[R,N,k,$]=yt(C);_.push({angle:0,x1:R,x2:k,y1:N,y2:$,selectionColors:C.some(V=>V.locked)?["#ced4da"]:[fi.black],dashed:!0,cx:R+(k-R)/2,cy:N+($-N)/2,activeEmbeddable:!1})};for(const I of Gu(o))T(I);o.editingGroupId&&T(o.editingGroupId),_.forEach(I=>uX(d,o,I))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=fi.white;const M=qB(i[0],o.zoom,t,"mouse",lm(l));if(!o.viewModeEnabled&&w&&!ue(o.editingTextElement)&&!o.croppingElementId&&uk(d,a,o,M,i[0].angle),o.croppingElementId&&!o.isCropping){const _=t.get(o.croppingElementId);_&&gt(_)&&BEe(d,a,o,_,t)}}else if(i.length>1&&!o.isRotating&&!i.some(M=>M.locked)){const M=sd*2/o.zoom.value;d.fillStyle=fi.white;const[_,T,I,C]=yt(i,t),R=d.getLineDash();d.setLineDash([2/o.zoom.value]);const N=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=x,Q5(d,_-M,T-M,I-_+M*2,C-T+M*2,(_+I)/2,(T+C)/2,0),d.lineWidth=N,d.setLineDash(R);const k=w9([_,T,I,C,(_+I)/2,(T+C)/2],0,o.zoom,"mouse",h?{...lm(l),rotation:!0}:lm(l));i.some($=>!$.locked)&&uk(d,a,o,k,0)}d.restore()}(E=o.searchMatches)==null||E.matches.forEach(({id:w,focus:v,matchedLines:x})=>{const M=t.get(w);if(M){const[_,T,,,I,C]=Oe(M,t,!0);d.save(),o.theme===Ae.LIGHT?v?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":v?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)";const R=Te(M)?o.zoom.value:1;d.translate(o.scrollX,o.scrollY),d.translate(I,C),d.rotate(M.angle),x.forEach(N=>{(N.showOnCanvas||v)&&d.fillRect(_+N.offsetX/R-I,T+N.offsetY/R-C,N.width/R,N.height/R)}),d.restore()}}),xEe(d,o),d.restore(),x5e({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=kEe(t,c,u,o),d.save(),d.fillStyle=REe,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(w=>{w&&UG(d,w.x,w.y,w.width,w.height,is/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},fX=lg(e=>{var n;const t=dX(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),HEe=(e,t)=>{if(t){fX(e);return}const n=dX(e);return e.callback(n),n};class dk{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())Bb(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s,pendingImageElementId:o})=>{const a=jo(new Map);for(const l of i)gt(l)&&o===l.id||s!==l.id&&(!r||r.type!=="text"||l.id!==r.id)&&a.set(l.id,l);return a};return Are(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,pendingImageElementId:f,sceneNonce:h})=>{const m=this.scene.getNonDeletedElements(),p=n({elements:m,editingTextElement:u,newElementId:d,pendingImageElementId:f}),U=t({elementsMap:p,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:p,visibleElements:U}})})());this.scene=t}destroy(){fX.cancel(),Q$.cancel(),this.getRenderableElements.clear()}}const VEe=5,$Ee=(e,t,n)=>{const[i,r]=Oe(e,n),{x:s,y:o}=Br({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},fk=({children:e,element:t,elementsMap:n})=>{const i=hp();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=$Ee(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:VEe},children:e})};function GEe(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var XEe={};GEe(XEe,"LaserPointer",()=>d6);function Un([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function k1([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function Mn([e,t,n],i){return[e*i,t*i,n*i]}function rf([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Mi([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function jEe(e,t,n){return Un(e,Mn(k1(t,e),n))}function hk(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function gk(e){return Math.atan2(Math.sin(e),Math.cos(e))}function mk([e,t]){return Math.sqrt(e**2+t**2)}function ah([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function YEe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=ah(e[n-1],e[n]);return t+=ah(e[e.length-2],e[e.length-1]),t}const WEe=(e,t,n)=>Math.max(t,Math.min(n,e));function KEe(e,t,n){const i=ah(t,n);if(i===0)return ah(e,t);const r=WEe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return ah(s,e)}function u6(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=KEe(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...u6([n,...e.slice(1,s),o],t).slice(0,-1),o,...u6([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}const Bl=class Bl{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Bl.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=jEe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),YEe(this.tailPoints)>Bl.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=u6(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const _=n[0],T=this.getSize(t,_[2],0,i,0);if(T<.5)return[];const I=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)I.push(Un(_,Mn(Mi([1,0,0],C),T)));return I.push(Un(_,Mn([1,0,0],this.getSize(t,_[2],0,i,0)))),I}if(i===2){const _=n[0],T=n[1],I=this.getSize(t,_[2],0,i,0),C=this.getSize(t,T[2],0,i,0);if(I<.5||C<.5)return[];const R=[],N=hk(_,[_[0],_[1]-100,_[2]],T);for(let k=N;k<=Math.PI+N;k+=Math.PI/16)R.push(Un(_,Mn(Mi([1,0,0],k),I)));for(let k=Math.PI+N;k<=Math.PI*2+N;k+=Math.PI/16)R.push(Un(T,Mn(Mi([1,0,0],k),C)));return R.push(R[0]),R}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let _=1;_<i-1;_++){const T=n[_-1],I=n[_],C=n[_+1];let R=I[2];const N=ah(T,I);c+=N,o=a+(N-a)*.2;const k=this.getSize(t,R,_,i,c);if(k===0){l=_+1;continue}const $=rf(k1(T,I)),V=rf(k1(C,I)),z=Mi($,Math.PI/2),G=Mi($,-Math.PI/2),j=Mi(V,Math.PI/2),X=Mi(V,-Math.PI/2),q=Un(I,Mn(z,k)),fe=Un(I,Mn(G,k)),ie=Un(I,Mn(j,k)),Ue=Un(I,Mn(X,k)),Ve=Un(z,X),$e=Un(G,j),nt=Un(I,Mn(mk(Ve)===0?$:rf(Ve),k)),zt=Un(I,Mn(mk($e)===0?V:rf($e),k)),Ct=gk(hk(I,T,C)),Zt=Bl.constants.cornerDetectionMaxAngle/180*Math.PI*Bl.constants.cornerDetectionVariance(o);if(Math.abs(Ct)<Zt){const xe=Math.abs(gk(Math.PI-Ct));if(xe===0)continue;if(Ct<0){s.push(fe,zt);for(let Ge=0;Ge<=xe;Ge+=xe/4)r.push(Un(I,Mi(Mn(z,k),Ge)));for(let Ge=xe;Ge>=0;Ge-=xe/4)s.push(Un(I,Mi(Mn(z,k),Ge)));s.push(zt,ie)}else{r.push(q,nt);for(let Ge=0;Ge<=xe;Ge+=xe/4)s.push(Un(I,Mi(Mn(z,-k),-Ge)));for(let Ge=xe;Ge>=0;Ge-=xe/4)r.push(Un(I,Mi(Mn(z,-k),-Ge)));r.push(nt,Ue)}}else r.push(nt),s.push(zt);a=o}if(l>=i-2)if(this.options.keepHead){const _=n[i-1],T=[];for(let I=0;I<=Math.PI*2;I+=Math.PI/16)T.push(Un(_,Mn(Mi([1,0,0],I),this.options.size)));return T.push(Un(_,Mn([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=rf(k1(d,u)),p=rf(k1(f,h)),U=Mi(m,-Math.PI/2),y=Mi(p,Math.PI/2),E=this.getSize(t,u[2],0,i,0),w=[],v=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),x=[];if(E>1){for(let _=0;_<=Math.PI;_+=Math.PI/16)w.unshift(Un(u,Mi(Mn(U,E),-_)));w.unshift(Un(u,Mn(U,-E)))}else w.push(u);for(let _=0;_<=Math.PI*3;_+=Math.PI/16)x.push(Un(h,Mi(Mn(y,-v),-_)));const M=[...w,...r,...x.reverse(),...s.reverse()];return w.length>0&&M.push(w[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?u6(M,this.options.simplify):M}};Bl.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Bl.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let d6=Bl;class f6{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");F(this,"trailAnimation");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(rt,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(rt,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new d6(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([s,o])=>{const a=Br({sceneX:s,sceneY:o},n);return[a.x,a.y]}),r=this.trailAnimation?i.slice(0,i.length/2):i;return Mre(r,!0)}}class ZEe{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new f6(t,n,{...this.getTrailOptions(),fill:()=>_ie})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(qa(s),qa(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new f6(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=n.pointer)==null?void 0:r.laserColor)||ny(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const on=e=>t=>{Sn.unstable_batchedUpdates(e,t)},zE=e=>lg(t=>{Sn.unstable_batchedUpdates(e,t)}),I_=(()=>{let e;try{const n=D.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),qEe=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},QEe=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(V,z)=>{if(!z.style.fontFamily||!z.style.fontSize)return!1;const G=z.style.fontFamily.replace(/"/g,"");return Y0({fontFamily:V.fontFamily})!==G||`${V.fontSize}px`!==z.style.fontSize},u=()=>{const V=a.state,z=a.scene.getElement(e);if(!z)return;const{textAlign:G,verticalAlign:j}=z,X=a.scene.getNonDeletedElementsMap();if(z&&ue(z)){let q=z.x,fe=z.y;const ie=$n(z,a.scene.getNonDeletedElementsMap());let Ue=z.width,Ve=z.height,$e=z.width,nt=z.height;if(ie&&z.containerId){if(Me(ie)){const Sr=ce.getBoundTextElementPosition(ie,z,X);q=Sr.x,fe=Sr.y}const xs=c(z,d);let Cs;if(xs?Cs=Cb(ie.id,ie.height):(Cs=Ih[ie.id],Cs||(Cs=Cb(ie.id,ie.height))),$e=Ko(ie,z),nt=tp(ie,z),!Me(ie)&&Ve>nt){const Sr=cd(Ve,ie.type);a.scene.mutateElement(ie,{height:Sr});return}else if(!Me(ie)&&ie.height>Cs.height&&Ve<nt){const Sr=cd(Ve,ie.type);a.scene.mutateElement(ie,{height:Sr})}else{const{y:Sr}=g5(ie,z,X);fe=Sr}}const[zt,Ct]=i(q,fe),Zt=d.selectionStart,xe=d.selectionEnd,Ge=d.value.length;if(Zt===xe&&xe!==Ge){const xs=Ge-xe;d.selectionStart=d.value.length-xs,d.selectionEnd=d.value.length-xs}ie?Ue+=.5:($e=(V.width-8-zt)/V.zoom.value,Ue=Math.min(Ue,$e)),Ve*=1.05;const qt=pt(z),ar=(V.height-Ct)/V.zoom.value;Object.assign(d.style,{font:qt,lineHeight:z.lineHeight,width:`${Ue}px`,height:`${Ve}px`,left:`${zt}px`,top:`${Ct}px`,transform:qEe(Ue,Ve,koe(z,ie),V,$e,ar),textAlign:G,verticalAlign:j,color:z.strokeColor,opacity:z.opacity/100,filter:"var(--theme-filter)",maxHeight:`${ar}px`}),d.scrollTop=0,a.scene.mutateElement(z,{x:q,y:fe})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Gt(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async V=>{const z=await hG(V,!0);if(!z.text)return;const G=xh(z.text);if(!G)return;const j=$n(r,a.scene.getNonDeletedElementsMap()),X=pt({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(j){const q=Ne(j,a.scene.getNonDeletedElementsMap()),fe=Wc(`${d.value}${G}`,X,Ko(j,q)),ie=Zw(fe,X);d.style.width=`${ie}px`}},d.oninput=()=>{const V=xh(d.value);if(d.value!==V){const z=d.selectionStart;d.value=V,d.selectionStart=z,d.selectionEnd=z}t(d.value)}),d.onkeydown=V=>{if(!V.shiftKey&&wM.keyTest(V))V.preventDefault(),a.actionManager.executeAction(wM),u();else if(!V.shiftKey&&_M.keyTest(V))V.preventDefault(),a.actionManager.executeAction(_M),u();else if(!V.shiftKey&&TM.keyTest(V))V.preventDefault(),a.actionManager.executeAction(TM),u();else if(bM.keyTest(V))a.actionManager.executeAction(bM);else if(yM.keyTest(V))a.actionManager.executeAction(yM);else if(V.key===H.ESCAPE)V.preventDefault(),x=!0,M();else if(o6.keyTest(V))V.preventDefault(),M(),a.actionManager.executeAction(o6);else if(V.key===H.ENTER&&V[H.CTRL_OR_CMD]){if(V.preventDefault(),V.isComposing||V.keyCode===229)return;x=!0,M()}else if(V.key===H.TAB||V[H.CTRL_OR_CMD]&&(V.code===et.BRACKET_LEFT||V.code===et.BRACKET_RIGHT)){if(V.preventDefault(),V.isComposing)return;V.shiftKey||V.code===et.BRACKET_LEFT?E():y(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),U=new RegExp(`^ {1,${m}}`),y=()=>{const{selectionStart:V,selectionEnd:z}=d,G=w();let j=d.value;G.forEach(X=>{const q=j.slice(0,X),fe=j.slice(X);j=`${q}${p}${fe}`}),d.value=j,d.selectionStart=V+m,d.selectionEnd=z+m*G.length},E=()=>{const{selectionStart:V,selectionEnd:z}=d,G=w(),j=[];let X=d.value;G.forEach(q=>{const fe=X.slice(q,q+m).match(U);if(fe){const ie=X.slice(0,q),Ue=X.slice(q+fe[0].length);X=`${ie}${Ue}`,j.push(q)}}),d.value=X,j.length&&(V>j[j.length-1]?d.selectionStart=Math.max(V-m,j[j.length-1]):d.selectionStart=V,d.selectionEnd=Math.max(d.selectionStart,z-m*j.length))},w=()=>{let{selectionStart:V,selectionEnd:z,value:G}=d;const j=G.slice(0,V).match(/[^\n]*$/)[0].length;return V=V-j,G.slice(V,z).split(`
`).reduce((q,fe,ie,Ue)=>q.concat(ie?q[ie-1]+Ue[ie-1].length+1:V),[]).reverse()},v=V=>{V.target instanceof HTMLCanvasElement&&(V.preventDefault(),V.stopPropagation())};let x=!1;const M=()=>{var G;if(k)return;k=!0,_();const V=a.scene.getElement(r.id);if(!V)return;const z=$n(V,a.scene.getNonDeletedElementsMap());if(z){if(d.value.trim()){const j=Wo(z);!j||j!==r.id?a.scene.mutateElement(z,{boundElements:(z.boundElements||[]).concat({type:"text",id:r.id})}):Me(z)&&Ca(z)}else a.scene.mutateElement(z,{boundElements:(G=z.boundElements)==null?void 0:G.filter(j=>!ue(j))});$i(V,z,a.scene)}n({viaKeyboard:x,nextOriginalText:d.value})},_=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,$&&$.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",v,!0),window.removeEventListener("pointerdown",C),window.removeEventListener("pointerup",T),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),R(),N(),d.remove()},T=V=>{window.removeEventListener("pointerup",T);const z=V==null?void 0:V.target,G=z instanceof HTMLElement&&z.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,G||d.focus()})},I=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",M)},C=V=>{const z=V==null?void 0:V.target;if(V.button===Al.WHEEL){z instanceof HTMLTextAreaElement&&(V.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(V)),I();return}const G=z instanceof HTMLElement&&z.classList.contains("properties-trigger");(V.target instanceof HTMLElement||V.target instanceof SVGElement)&&V.target.closest(`.${Cc.SHAPE_ACTIONS_MENU}, .${Cc.ZOOM_ACTIONS}`)&&!Uu(V.target)||G?I():V.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{M()})},R=a.scene.onUpdate(()=>{var z;u(),!!((z=document.activeElement)!=null&&z.closest(".properties-content"))||d.focus()}),N=a.onScrollChangeEmitter.on(()=>{u()});let k=!1;l&&d.select(),T();let $=null;return s&&"ResizeObserver"in window?($=new window.ResizeObserver(()=>{u()}),$.observe(s)):window.addEventListener("resize",u),d.onpointerdown=V=>V.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",C,{capture:!0})}),window.addEventListener("beforeunload",M),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d),M},JEe=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function HE(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function e3e(e,t,n){const i=HE(t,n);if(i===0)return HE(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),HE(e,t3e(t,n,r))}function t3e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function n3e(e,t){return P4(e,0,e.length,t)}function P4(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=e3e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(P4(e,t,c+1,i,s),P4(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}const i3e=e=>{const{lassoPath:t,elements:n,elementsSegments:i,intersectedElements:r,enclosedElements:s,simplifyDistance:o}=e;let a=t;o&&(a=n3e(t,o));const l=n.filter(u=>!u.locked);s.clear();for(const u of l)!r.has(u.id)&&!s.has(u.id)&&(r3e(a,u,i)?s.add(u.id):s3e(a,u,i)&&r.add(u.id));return{selectedElementIds:[...r,...s]}},r3e=(e,t,n)=>{const i=Gm(e),r=n.get(t.id);return r?r.some(s=>s.some(o=>are(o,i))):!1},s3e=(e,t,n)=>{const i=n.get(t.id);return i?e.reduce((s,o,a)=>(a===0||s.push(_e(e[a-1],o)),s),[]).some(s=>i.some(o=>ad(s,o,1)!==null)):!1};class o3e extends f6{constructor(n,i){super(n,i,{animateTrail:!0,streamline:.4,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/(1/0)),l=(5e3-Math.min(5e3,r.totalLength-r.currentIndex))/5e3;return Math.min(qa(l),qa(a))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"});F(this,"intersectedElements",new Set);F(this,"enclosedElements",new Set);F(this,"elementsSegments",null);F(this,"canvasTranslate",null);F(this,"keepPreviousSelection",!1);F(this,"selectElementsFromIds",n=>{this.app.setState(i=>{const r=n.reduce((l,c)=>(l[c]=!0,l),{});if(this.keepPreviousSelection)for(const l of Object.keys(i.selectedElementIds))r[l]=!0;for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&ue(c)){const u=$n(c,this.app.scene.getNonDeletedElementsMap());u&&(r[u.id]=!0,delete r[c.id])}}for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&Te(c)){const u=Ss(this.app.scene.getNonDeletedElementsMap(),c.id);for(const d of u)delete r[d.id]}}const s=Li({editingGroupId:i.editingGroupId,selectedElementIds:r},this.app.scene.getNonDeletedElements(),i,this.app),o=[...Object.keys(s.selectedElementIds)],a=[...Object.keys(s.selectedGroupIds)];return{selectedElementIds:s.selectedElementIds,selectedGroupIds:s.selectedGroupIds,selectedLinearElement:o.length===1&&!a.length&&Ce(this.app.scene.getNonDeletedElement(o[0]))?new ce(this.app.scene.getNonDeletedElement(o[0]),this.app.scene.getNonDeletedElementsMap()):null}})});F(this,"addPointToPath",(n,i,r=!1)=>{super.addPointToPath(n,i),this.keepPreviousSelection=r,this.updateSelection()});F(this,"updateSelection",()=>{var r,s;const n=(s=(r=super.getCurrentTrail())==null?void 0:r.originalPoints)==null?void 0:s.map(o=>S(o[0],o[1])),i={scrollX:this.app.state.scrollX,scrollY:this.app.state.scrollY,zoom:this.app.state.zoom.value};if(!this.elementsSegments||!Hi(i,this.canvasTranslate??{})){this.canvasTranslate=i,this.elementsSegments=new Map;const o=we(this.app.visibleElements);for(const a of this.app.visibleElements){const l=Pb(a,o);this.elementsSegments.set(a.id,l)}}if(n){const{selectedElementIds:o}=i3e({lassoPath:n,elements:this.app.visibleElements,elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(o)}})}startPath(n,i,r=!1){this.endPath(),super.startPath(n,i),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=r,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}const a3e=2;class l3e extends f6{constructor(n,i){super(n,i,{streamline:.2,size:5,keepHead:!0,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/200),l=(10-Math.min(10,r.totalLength-r.currentIndex))/10;return Math.min(qa(l),qa(a))},fill:()=>i.state.theme===Ae.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});F(this,"elementsToErase",new Set);F(this,"groupsToErase",new Set);F(this,"segmentsCache",new Map);F(this,"geometricShapesCache",new Map)}startPath(n,i){this.endPath(),super.startPath(n,i),this.elementsToErase.clear()}addPointToPath(n,i,r=!1){return super.addPointToPath(n,i),this.updateElementsToBeErased(r)}updateElementsToBeErased(n){var a,l;let i=((l=(a=super.getCurrentTrail())==null?void 0:a.originalPoints)==null?void 0:l.map(c=>S(c[0],c[1])))||[];i=i==null?void 0:i.slice(i.length-a3e);const r=this.app.visibleElements.filter(c=>!c.locked),s=we(r),o=i.reduce((c,u,d)=>(d===0||c.push(_e(i[d-1],u)),c),[]);if(o.length===0)return[];for(const c of r)if(n&&this.elementsToErase.has(c.id)){if(pk(o,c,this.segmentsCache,this.geometricShapesCache,s,this.app)){const d=c.groupIds.at(-1);if(this.groupsToErase.has(d)){const f=kt(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.delete(h.id);this.groupsToErase.delete(d)}if(Gt(c)&&this.elementsToErase.delete(c.containerId),nr(c)){const f=Wo(c);f&&this.elementsToErase.delete(f)}this.elementsToErase.delete(c.id)}}else if(!n&&!this.elementsToErase.has(c.id)&&pk(o,c,this.segmentsCache,this.geometricShapesCache,s,this.app)){const d=c.groupIds.at(-1);if(!this.groupsToErase.has(d)){const f=kt(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.add(h.id);this.groupsToErase.add(d)}if(nr(c)){const f=Wo(c);f&&this.elementsToErase.add(f)}Gt(c)&&this.elementsToErase.add(c.containerId),this.elementsToErase.add(c.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear(),this.segmentsCache.clear()}}const pk=(e,t,n,i,r,s)=>{let o=i.get(t.id);o||(o=Vs(t,r),i.set(t.id,o));const a=e[e.length-1][1];if(xb(t)&&Zm(a,o))return!0;let l=n.get(t.id);return l||(l=Pb(t,r),n.set(t.id,l)),e.some(c=>l==null?void 0:l.some(u=>ad(c,u,s.getElementHitThreshold())!==null))},c3e=()=>P("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(pr,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(pr,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(pr,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(pr,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>P("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),u3e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=D.useRef(null);D.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{var m,p,U;if(h.key===H.TAB){const y=x7(d),{activeElement:E}=document,w=y.findIndex(v=>v===E);E===d?(h.shiftKey?(m=y[y.length-1])==null||m.focus():y[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):w===0&&h.shiftKey?((p=y[y.length-1])==null||p.focus(),h.preventDefault(),h.stopImmediatePropagation()):w===y.length-1&&!h.shiftKey&&((U=y[0])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=D.useRef(null);return D.useLayoutEffect(()=>{var d,f;if(r&&c.current&&n!=null&&t!=null){const h=c.current,{width:m,height:p}=h.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},m>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+m-s>a?h.style.left=`${a-m-10}px`:h.style.left=`${t}px`,p>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+p-o>l?h.style.top=`${l-p}px`:h.style.top=`${n}px`}},[n,t,r,a,l,s,o]),D.useEffect(()=>{if(i){const d=f=>{var h;(h=c.current)!=null&&h.contains(f.target)||Sn.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Kn="separator",d3e=ae.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=hp(),o=uy(),a=t.reduce((l,c)=>(c&&(c===Kn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(u3e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===Kn)return!a[c-1]||a[c-1]===Kn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=L(l.label(o,s,e.app)):d=L(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:P("button",{type:"button",className:pe("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?Vi(u):""})]})},c)})})})}),f3e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:P("div",{className:"follow-mode__badge",children:[P("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:dg})]})}),hX=({delay:e,theme:t})=>{const[n,i]=D.useState(!!e);return D.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:P("div",{className:pe("LoadingMessage",{"LoadingMessage--dark":t===Ae.DARK}),children:[g("div",{children:g(il,{})}),g("div",{className:"LoadingMessage-text",children:L("labels.loadingScene")})]})},h3e="medium",Uk={CHECKED:A9,UNCHECKED:I5},gX=e=>P("label",{className:pe("ToolIcon ToolIcon__lock",`ToolIcon_size_${h3e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?Uk.CHECKED:Uk.UNCHECKED})]}),mX=({children:e,side:t,className:n})=>g("div",{className:pe("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),pX=e=>g(Ye,{className:pe("Shape",{fillable:!1}),type:"radio",icon:_H,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:H.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":H.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),g3e=({appState:e,isMobile:t,device:n,app:i})=>{var u,d;const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===ys.name&&e.openSidebar.tab===Hu&&((d=e.searchMatches)!=null&&d.matches.length))return L("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(To(e))return L("hints.eraserRevert");if(r.type==="arrow"||r.type==="line")return l?L("hints.linearElementMulti"):r.type==="arrow"?L("hints.arrowTool",{arrowShortcut:Q("A")}):L("hints.linearElement");if(r.type==="freedraw")return L("hints.freeDraw");if(r.type==="text")return L("hints.text");if(r.type==="embeddable")return L("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return L("hints.placeImage");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const f=c[0];return Ce(f)&&f.points.length===2?L("hints.lockAngle"):gt(f)?L("hints.resizeImage"):L("hints.resize")}if(o&&a==="mouse")return L("hints.rotate");if(c.length===1&&ue(c[0]))return L("hints.text_selected");if(e.editingTextElement)return L("hints.text_editing");if(e.croppingElementId)return L("hints.leaveCropEditor");if(c.length===1&&gt(c[0]))return L("hints.enterCropEditor");if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return[L("hints.deepBoxSelect")];if(p0(i)&&e.selectedElementsAreBeingDragged)return L("hints.disableSnapping");if(!c.length&&!t)return[L("hints.canvasPanning")];if(c.length===1){if(Ce(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?L("hints.lineEditor_pointSelected"):L("hints.lineEditor_nothingSelected"):L("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&$u(c[0]))return f5(c[0])?Zle(c[0],i.scene.getNonDeletedElementsMap())?[L("hints.bindTextToElement"),L("hints.createFlowchart")]:[L("hints.bindTextToElement"),L("hints.createFlowchart")]:L("hints.bindTextToElement")}}return null},UX=({appState:e,isMobile:t,device:n,app:i})=>{const r=g3e({appState:e,isMobile:t,device:n,app:i});if(!r)return null;const s=Array.isArray(r)?r.map(o=>Q(o).replace(/\. ?$/,"")).join(". "):Q(r);return g("div",{className:"HintViewer",children:g("span",{children:s})})},m3e="medium",bX=e=>e.penDetected?P("label",{className:pe("ToolIcon ToolIcon__penMode",`ToolIcon_size_${m3e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:aue})]}):null,b0=({heading:e,children:t,...n})=>{const{id:i}=sa(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:L(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):P(ge,{children:[r,t]})})},p3e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:r,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{var w,v;const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:U}=or(),y=()=>P(mX,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(b0,{heading:"shapes",children:x=>{var M;return g(ms.Col,{gap:4,align:"center",children:P(ms.Row,{gap:1,className:"App-toolbar-container",children:[P(Qs,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[x,g(ms.Row,{gap:1,children:g(tX,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),P("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&g(U.Out,{}),g(bX,{checked:e.penMode,onChange:()=>o(null),title:L("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(gX,{checked:e.activeTool.locked,onChange:r,title:L("toolBar.lock"),isMobile:!0}),g(pX,{checked:Ph(e),onChange:()=>s(),title:L("toolBar.hand"),isMobile:!0})]})]})})}}),g(UX,{appState:e,isMobile:!0,device:u,app:h})]}),E=()=>{var x;return e.viewModeEnabled||((x=e.openDialog)==null?void 0:x.name)==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):P("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),P("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return P(ge,{children:[c(),!e.viewModeEnabled&&((w=e.openDialog)==null?void 0:w.name)!=="elementLinkSelector"&&y(),g("div",{className:"App-bottom-bar",style:{marginBottom:is+So*2,marginLeft:is+So*2,marginRight:is+So*2},children:P(Qs,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((v=e.openDialog)==null?void 0:v.name)!=="elementLinkSelector"&&_9(e,t)?g(b0,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(eX,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,P("footer",{className:"App-toolbar",children:[E(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(x=>({...Qm(t,x)}))},children:L("buttons.scrollBackToContent")})]})]})})]})},bk=e=>{const t=D.useRef(null),[n,i]=D.useState(null);return D.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=r5e(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>{var a;s=await h_(r,{exportBackground:!1,viewBackgroundColor:fi.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},U3e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=go(),r=ae.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),lt("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(Kr,{size:"small",onCloseRequest:r,title:L("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:P("div",{className:"container",children:[g(bk,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g(bk,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},b3e=4,y3e=8,E3e=({shouldWrap:e,children:t,username:n})=>e?g(pd,{label:n||"Unknown user",children:t}):g(ge,{children:t}),VE=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(E3e,{username:t.username,shouldWrap:r,children:a},n)},v3e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],yX=ae.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=Tr(),s=new Map;n.forEach((p,U)=>{const y=p.id||U;s.set(y,{...p,socketId:U})});const o=Array.from(s.values()).filter(p=>{var U;return(U=p.username)==null?void 0:U.trim()}),[a,l]=ae.useState(""),c=o.filter(p=>{var U;return(U=p.username)==null?void 0:U.toLowerCase().includes(a)}),u=ae.useRef(null);D.useLayoutEffect(()=>{if(u.current){const p=y=>{const E=Math.max(1,Math.min(8,Math.floor(y/38)));f(E)};if(p(u.current.clientWidth),!y7)return;const U=new ResizeObserver(y=>{for(const E of y){const{width:w}=E.contentRect;p(w)}});return U.observe(u.current),()=>{U.disconnect()}}},[]);const[d,f]=ae.useState(b3e),m=o.slice(0,d-1).map(p=>VE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:pe("UserList UserList_mobile",e),children:o.map(p=>VE({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:P("div",{className:pe("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&P(O5,{children:[P(N5,{className:"UserList__more",children:["+",o.length-d+1]}),g(Z9,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:P(Qs,{padding:2,children:[o.length>=y3e&&g(FV,{placeholder:L("quickSearch.placeholder"),onChange:l}),g(BV,{className:"dropdown-menu UserList__collaborators",placeholder:L("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:L("userList.hint.text")}),c.map(p=>VE({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g(kV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!Hi(r,s,v3e))return!1}return!0}),w3e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${L("helpDialog.title")} — ?`,"aria-label":L("helpDialog.title"),children:R9}),EX=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=or(),o=ii(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return P("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:pe("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(ms.Col,{gap:2,children:P(b0,{heading:"canvasActions",children:[g(Y8e,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(W8e,{renderAction:t.renderAction,className:pe("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(Z8e,{renderAction:t.renderAction,className:pe("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:pe("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:P("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(w3e,{onClick:()=>t.executeAction(E_)})]})}),g(K8e,{actionManager:t,showExitZenModeBtn:n})]})};EX.displayName="Footer";const vX=ae.createContext({}),wX=({children:e,className:t})=>{const n=ii(),i=D.useContext(vX),r=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return P("div",{className:pe("sidebar__header",t),"data-testid":"sidebar-header",children:[e,P("div",{className:"sidebar__header__buttons",children:[r&&g(pd,{label:L("labels.sidebarLock"),children:g(zh,{onSelect:()=>{var s;return(s=i.onDock)==null?void 0:s.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":L("labels.sidebarLock"),children:eue})}),g(zh,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":L("buttons.close"),children:dg})]})]})};wX.displayName="SidebarHeader";function _3e(e){const t=e+"CollectionProvider",[n,i]=op(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,U=ae.useRef(null),y=ae.useRef(new Map).current;return g(r,{scope:m,itemMap:y,collectionRef:U,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=ae.forwardRef((h,m)=>{const{scope:p,children:U}=h,y=s(a,p),E=lo(m,y.collectionRef);return g(Jm,{ref:E,children:U})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=ae.forwardRef((h,m)=>{const{scope:p,children:U,...y}=h,E=ae.useRef(null),w=lo(m,E),v=s(c,p);return ae.useEffect(()=>(v.itemMap.set(E,{ref:E,...y}),()=>void v.itemMap.delete(E))),g(Jm,{[u]:"",ref:w,children:U})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return ae.useCallback(()=>{const U=m.collectionRef.current;if(!U)return[];const y=Array.from(U.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((v,x)=>y.indexOf(v.ref.current)-y.indexOf(x.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var T3e=D.createContext(void 0);function _X(e){const t=D.useContext(T3e);return e||t||"ltr"}var $E="rovingFocusGroup.onEntryFocus",S3e={bubbles:!1,cancelable:!0},cy="RovingFocusGroup",[F4,TX,I3e]=_3e(cy),[x3e,SX]=op(cy,[I3e]),[C3e,A3e]=x3e(cy),IX=D.forwardRef((e,t)=>g(F4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(F4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(M3e,{...e,ref:t})})}));IX.displayName=cy;var M3e=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=D.useRef(null),h=lo(t,f),m=_X(s),[p=null,U]=Y9({prop:o,defaultProp:a,onChange:l}),[y,E]=D.useState(!1),w=rl(c),v=TX(n),x=D.useRef(!1),[M,_]=D.useState(0);return D.useEffect(()=>{const T=f.current;if(T)return T.addEventListener($E,w),()=>T.removeEventListener($E,w)},[w]),g(C3e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:D.useCallback(T=>U(T),[U]),onItemShiftTab:D.useCallback(()=>E(!0),[]),onFocusableItemAdd:D.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:D.useCallback(()=>_(T=>T-1),[]),children:g(sr.div,{tabIndex:y||M===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Ti(e.onMouseDown,()=>{x.current=!0}),onFocus:Ti(e.onFocus,T=>{const I=!x.current;if(T.target===T.currentTarget&&I&&!y){const C=new CustomEvent($E,S3e);if(T.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=v().filter(z=>z.focusable),N=R.find(z=>z.active),k=R.find(z=>z.id===p),V=[N,k,...R].filter(Boolean).map(z=>z.ref.current);AX(V,u)}}x.current=!1}),onBlur:Ti(e.onBlur,()=>E(!1))})})}),xX="RovingFocusGroupItem",CX=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=P9(),l=s||a,c=A3e(xX,n),u=c.currentTabStopId===l,d=TX(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return D.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(F4.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(sr.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ti(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:Ti(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ti(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=L3e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let y=d().filter(E=>E.focusable).map(E=>E.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const E=y.indexOf(m.currentTarget);y=c.loop?D3e(y,E+1):y.slice(E+1)}setTimeout(()=>AX(y))}})})})});CX.displayName=xX;var R3e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k3e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function L3e(e,t,n){const i=k3e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return R3e[i]}function AX(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function D3e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var O3e=IX,N3e=CX,x_="Tabs",[P3e,Ixe]=op(x_,[SX]),MX=SX(),[F3e,C_]=P3e(x_),RX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=_X(a),[d,f]=Y9({prop:i,onChange:r,defaultProp:s});return g(F3e,{scope:n,baseId:P9(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(sr.div,{dir:u,"data-orientation":o,...c,ref:t})})});RX.displayName=x_;var kX="TabsList",LX=D.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=C_(kX,n),o=MX(n);return g(O3e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(sr.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});LX.displayName=kX;var DX="TabsTrigger",OX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=C_(DX,n),a=MX(n),l=FX(o.baseId,i),c=BX(o.baseId,i),u=i===o.value;return g(N3e,{asChild:!0,...a,focusable:!r,active:u,children:g(sr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:Ti(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Ti(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Ti(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});OX.displayName=DX;var NX="TabsContent",PX=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=C_(NX,n),l=FX(a.baseId,i),c=BX(a.baseId,i),u=i===a.value,d=D.useRef(u);return D.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(L5,{present:r||u,children:({present:f})=>g(sr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});PX.displayName=NX;function FX(e,t){return`${e}-trigger-${t}`}function BX(e,t){return`${e}-content-${t}`}var zX=RX,HX=LX,VX=OX,$X=PX;const GX=({children:e,tab:t,onSelect:n,...i})=>g(VX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});GX.displayName="SidebarTabTrigger";const XX=({children:e,...t})=>g(HX,{className:"sidebar-triggers",...t,children:e});XX.displayName="SidebarTabTriggers";const jX=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{var u;const l=Yn(),c=Ii();return P("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),s==null||s(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),P("div",{className:pe("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};jX.displayName="SidebarTrigger";const YX=({children:e,...t})=>{const n=Ii(),i=Yn();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g(zX,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};YX.displayName="SidebarTabs";const WX=({tab:e,children:t,...n})=>g($X,{...n,value:e,"data-testid":e,children:t});WX.displayName="SidebarTab";const A_=Kt(!1),KX=D.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=Yn(),l=T5(A_);D.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=D.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=t2(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=D.useRef(null);D.useImperativeHandle(o,()=>u.current);const d=ii(),f=D.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return q9(u,D.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),D.useEffect(()=>{const h=m=>{m.key===H.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(ee.KEYDOWN,h),()=>{document.removeEventListener(ee.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(Qs,{...s,className:pe("sidebar",{"sidebar--docked":i},r),ref:u,children:g(vX.Provider,{value:c.current,children:t})})});KX.displayName="SidebarInner";const _o=Object.assign(D.forwardRef((e,t)=>{var l;const n=Ii(),{onStateChange:i}=e,r=D.useRef(n.openSidebar);D.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=r==null?void 0:r.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=r==null?void 0:r.current)==null?void 0:d.name)!==e.name||((f=r.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==r.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=D.useState(!1);return D.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((l=n.openSidebar)==null?void 0:l.name)===e.name?D.createElement(KX,{...e,ref:t,key:e.name}):null}),{Header:wX,TabTriggers:XX,TabTrigger:GX,Tabs:YX,Tab:WX,Trigger:jX});_o.displayName="Sidebar";const dp=(e,t)=>{const n=Kt(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=or(),[,o]=s(n),a=D.useRef({preferHost:!1,counter:0});return D.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},ZX=Kt({active:!1});async function B4({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{Or.set(ZX,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const qX=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>P("div",{className:pe("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},QX=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=ii();return P(ge,{children:[P("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(qX,{name:s,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};QX.displayName="DropdownMenuItemContentRadio";const JX=()=>{const{t:e}=wn(),t=Tr(),n=uy();return t.isActionEnabled(x4)?g(_r,{icon:L9,onSelect:async()=>{(!n.length||await B4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(pr,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(x4)},"data-testid":"load-button",shortcut:Vi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};JX.displayName="LoadScene";const ej=()=>{const{t:e}=wn(),t=Tr();return t.isActionEnabled(o6)?g(_r,{shortcut:Vi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(o6),icon:hue,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};ej.displayName="SaveToActiveFile";const tj=()=>{const e=Yn(),{t}=wn();return g(_r,{icon:pH,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Vi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};tj.displayName="SaveAsImage";const nj=e=>{const t=Yn(),{t:n}=wn();return g(_r,{icon:u4,"data-testid":"command-palette-button",onSelect:()=>{lt("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Vi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};nj.displayName="CommandPalette";const ij=e=>{const{t}=wn(),n=Tr();return g(_r,{icon:hd,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(iX)},shortcut:Vi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};ij.displayName="SearchMenu";const rj=()=>{const{t:e}=wn(),t=Tr();return g(_r,{"data-testid":"help-menu-item",icon:R9,onSelect:()=>t.executeAction(E_),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};rj.displayName="Help";const sj=()=>{const{t:e}=wn(),t=T5(ay);return Tr().isActionEnabled(dm)?g(_r,{icon:fd,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};sj.displayName="ClearCanvas";const oj=e=>{const{t}=wn(),n=Ii(),i=Tr(),r=Vi("toggleTheme");return i.isActionEnabled(Qb)?e!=null&&e.allowSystemTheme?g(QX,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Ae.LIGHT,label:a4,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:Ae.DARK,label:o4,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:Rde,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(_r,{onSelect:s=>{if(s.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===Ae.DARK?Ae.LIGHT:Ae.DARK);else return i.executeAction(Qb)},icon:n.theme===Ae.DARK?a4:o4,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===Ae.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Ae.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};oj.displayName="ToggleTheme";const aj=()=>{const{t:e}=wn(),t=Ii(),n=Tr(),i=fp();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:P("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};aj.displayName="ChangeCanvasBackground";const lj=()=>{const{t:e}=wn(),t=Yn();return g(_r,{icon:C5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};lj.displayName="Export";const cj=()=>{const{t:e}=wn();return P(ge,{children:[g(Um,{icon:k9,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(Um,{icon:mH,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(Um,{icon:gH,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};cj.displayName="Socials";const uj=({onSelect:e,isCollaborating:t})=>{const{t:n}=wn();return g(_r,{"data-testid":"collab-button",icon:D9,className:pe({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};uj.displayName="LiveCollaborationTrigger";const B3e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:aj,ClearCanvas:sj,CommandPalette:nj,Export:lj,Help:rj,LiveCollaborationTrigger:uj,LoadScene:JX,SaveAsImage:tj,SaveToActiveFile:ej,SearchMenu:ij,Socials:cj,ToggleTheme:oj},Symbol.toStringTag,{value:"Module"})),Jt=Object.assign(dp("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=or(),i=ii(),r=Ii(),s=Yn(),o=i.editor.isMobile?void 0:()=>s({openMenu:null});return g(n.In,{children:P(Qe,{open:r.openMenu==="canvas",children:[g(Qe.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:hH}),P(Qe.Content,{onClickOutside:o,onSelect:u5(t,()=>{s({openMenu:null})}),children:[e,i.editor.isMobile&&r.collaborators.size>0&&P("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:L("labels.collaborators")}),g(yX,{mobile:!0,collaborators:r.collaborators,userToFollow:((a=r.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Qe.Trigger,Item:Qe.Item,ItemLink:Qe.ItemLink,ItemCustom:Qe.ItemCustom,Group:Qe.Group,Separator:Qe.Separator,DefaultItems:B3e}),to=D.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=D.useState(!1),h=async p=>{const U=n==null?void 0:n(p);if(K0(U)){const y=window.setTimeout(()=>{f(!0)},50);try{await U}catch(E){if(E instanceof Dh)console.warn(E);else throw E}finally{clearTimeout(y),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:pe("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:P("div",{className:"ExcButton__contents",children:[m==="loading"?g(il,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:fde}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),M_=({title:e,children:t,actionLabel:n,onClick:i})=>P("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(to,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),z3e=()=>{const{t:e}=wn(),t=Tr(),n=Yn();return g(M_,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(gG,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},H3e=()=>{const{t:e}=wn(),t=Tr();return g(M_,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(mG,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},yk=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:z3e,SaveToDisk:H3e}),ku=Object.assign(dp("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=or(),[n,i]=mn(ZX);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(Kr,{onCloseRequest:r,title:!1,size:916,children:P("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),P("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:hde}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(to,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(yk,{children:e})]})})})}),{Actions:yk,Action:M_});var V3e="Expected a function",Ek=NaN,$3e="[object Symbol]",G3e=/^\s+|\s+$/g,X3e=/^[-+]0x[0-9a-f]+$/i,j3e=/^0b[01]+$/i,Y3e=/^0o[0-7]+$/i,W3e=parseInt,K3e=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa,Z3e=typeof self=="object"&&self&&self.Object===Object&&self,q3e=K3e||Z3e||Function("return this")(),Q3e=Object.prototype,J3e=Q3e.toString,e7e=Math.max,t7e=Math.min,GE=function(){return q3e.Date.now()};function n7e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(V3e);t=vk(t)||0,z4(n)&&(u=!!n.leading,d="maxWait"in n,s=d?e7e(vk(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(M){var _=i,T=r;return i=r=void 0,c=M,o=e.apply(T,_),o}function m(M){return c=M,a=setTimeout(y,t),u?h(M):o}function p(M){var _=M-l,T=M-c,I=t-_;return d?t7e(I,s-T):I}function U(M){var _=M-l,T=M-c;return l===void 0||_>=t||_<0||d&&T>=s}function y(){var M=GE();if(U(M))return E(M);a=setTimeout(y,p(M))}function E(M){return a=void 0,f&&i?h(M):(i=r=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function v(){return a===void 0?o:E(GE())}function x(){var M=GE(),_=U(M);if(i=arguments,r=this,l=M,_){if(a===void 0)return m(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=w,x.flush=v,x}function z4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function i7e(e){return!!e&&typeof e=="object"}function r7e(e){return typeof e=="symbol"||i7e(e)&&J3e.call(e)==$3e}function vk(e){if(typeof e=="number")return e;if(r7e(e))return Ek;if(z4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=z4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(G3e,"");var n=j3e.test(e);return n||Y3e.test(e)?W3e(e.slice(2),n?2:8):X3e.test(e)?Ek:+e}var s7e=n7e;const o7e=dl(s7e),a7e=Kt(""),dj=Kt(null),l7e=350,c7e=()=>{const e=go(),t=Yn(),n=D.useRef(null),[i,r]=mn(a7e),s=i.trim(),[o,a]=D.useState(!1),[l,c]=D.useState({nonce:null,items:[]}),u=D.useRef(null),d=D.useRef(void 0),[f,h]=mn(dj),m=e.scene.getNonDeletedElementsMap();D.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,Tk(s,e,(w,v)=>{c({nonce:Yo(),items:w}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:w.length?{focusedId:null,matches:w.map(x=>({id:x.element.id,focus:!1,matchedLines:x.matchedLines}))}:null})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(w=>w===null?0:(w+1)%l.items.length)},U=()=>{l.items.length>0&&h(w=>w===null?0:w-1<0?l.items.length-1:w-1)};D.useEffect(()=>{t(w=>{var x,M;return w.searchMatches?{searchMatches:{focusedId:f!==null&&((M=(x=w.searchMatches)==null?void 0:x.matches[f])==null?void 0:M.id)||null,matches:w.searchMatches.matches.map((_,T)=>T===f?{..._,focus:!0}:{..._,focus:!1})}}:null})},[f,t]),D.useEffect(()=>{var w,v,x,M;if(l.items.length>0&&f!==null){const _=l.items[f];if(_){const T=e.state.zoom.value,I=Yr({text:_.searchQuery,x:_.element.x+(((w=_.matchedLines[0])==null?void 0:w.offsetX)??0),y:_.element.y+(((v=_.matchedLines[0])==null?void 0:v.offsetY)??0),width:(x=_.matchedLines[0])==null?void 0:x.width,height:(M=_.matchedLines[0])==null?void 0:M.height,fontSize:Te(_.element)?Pt.nameFontSize:_.element.fontSize,fontFamily:Te(_.element)?ct.Assistant:_.element.fontFamily}),C=14,R=I.fontSize,N=R*T<C;if(!c2([I],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||N){let k;N?R>=C?k={fitToContent:!0}:k={fitToViewport:!0,maxZoom:Ha(C/R,1)}:k={fitToContent:!0},e.scrollToContent(I,{animate:!0,duration:300,...k,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),D.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:null}),a(!1)},[t,h]);const y=P5({goToNextItem:p,goToPreviousItem:U,searchMatches:l});D.useEffect(()=>{const w=v=>{var x,M,_;if(v.key===H.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){v.preventDefault(),v.stopPropagation(),t({openSidebar:null});return}v[H.CTRL_OR_CMD]&&v.key===H.F&&(v.preventDefault(),v.stopPropagation(),(x=n.current)!=null&&x.matches(":focus")||(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(_=n.current)==null||_.select())),v.target instanceof HTMLElement&&v.target.closest(".layer-ui__search")&&y.searchMatches.items.length&&(v.key===H.ENTER&&(v.stopPropagation(),y.goToNextItem()),v.key===H.ARROW_UP?(v.stopPropagation(),y.goToPreviousItem()):v.key===H.ARROW_DOWN&&(v.stopPropagation(),y.goToNextItem()))};return sn(window,ee.KEYDOWN,w,{capture:!0,passive:!1})},[t,y,e]);const E=`${l.items.length} ${l.items.length===1?L("search.singleResult"):L("search.multipleResults")}`;return P("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Hh,{className:Cc.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:L("search.placeholder"),icon:hd,onChange:w=>{r(w),a(!0);const v=w.trim();Tk(v,e,(x,M)=>{c({nonce:Yo(),items:x}),h(M),u.current=v,d.current=e.scene.getSceneNonce(),t({searchMatches:x.length?{focusedId:null,matches:x.map(_=>({id:_.element.id,focus:!1,matchedLines:_.matchedLines}))}:null}),a(!1)})},selectOnRender:!0})}),P("div",{className:"layer-ui__search-count",children:[l.items.length>0&&P(ge,{children:[f!==null&&f>-1?P("div",{children:[f+1," / ",E]}):g("div",{children:E}),P("div",{className:"result-nav",children:[g(zh,{onSelect:()=>{p()},className:"result-nav-btn",children:RH}),g(zh,{onSelect:()=>{U()},className:"result-nav-btn",children:Ode})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:L("search.noMatch")})]}),g(f7e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},wk=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:pe("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(D.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},u7e=e=>{const t=D.useMemo(()=>e.matches.items.filter(i=>Te(i.element)),[e.matches]),n=D.useMemo(()=>e.matches.items.filter(i=>ue(i.element)),[e.matches]);return P("div",{children:[t.length>0&&P("div",{className:"layer-ui__search-result-container",children:[P("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:jb}),g("div",{children:L("search.frames")})]}),t.map((i,r)=>g(wk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r===e.focusIndex,onClick:()=>e.onItemClick(r)},i.element.id+i.index)),n.length>0&&g("div",{className:"layer-ui__divider"})]}),n.length>0&&P("div",{className:"layer-ui__search-result-container",children:[P("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:M9}),g("div",{children:L("search.texts")})]}),n.map((i,r)=>g(wk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r+t.length===e.focusIndex,onClick:()=>e.onItemClick(r+t.length)},i.element.id+i.index))]})]})},d7e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,f7e=D.memo(u7e,d7e),_k=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},h7e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},g7e=(e,t,n)=>{const r=h7e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Vn(h,pt(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const v=Vn(d.line,pt(e),e.lineHeight),x=e.textAlign==="center"?(e.width-v.width)/2:e.width-v.width;p.width+=x}const{width:U,height:y}=Vn(m,pt(e),e.lineHeight),E=p.width,w=d.lineNumber*p.height;u.push({offsetX:E,offsetY:w,width:U,height:y,showOnCanvas:!0}),l+=f}}return u},m7e=(e,t,n,i)=>{const r=e.name??s9(e),s=r.slice(n,n+t.length),o=r.slice(0,n),a=pt({fontSize:Pt.nameFontSize,fontFamily:ct.Assistant}),l=Ac(ct.Assistant),c=Vn(o,a,l);o===""&&(c.width=0);const u=Vn(s,a,l),d=c.width,f=-c.height-Pt.strokeWidth,h=u.width;return[{offsetX:d,offsetY:f,width:h,height:u.height,showOnCanvas:d+h<=e.width*i}]},p7e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),Tk=o7e((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements(),r=i.filter(f=>ue(f)),s=i.filter(f=>Te(f));r.sort((f,h)=>f.y-h.y),s.sort((f,h)=>f.y-h.y);const o=[],a=new RegExp(p7e(e),"gi");for(const f of r){let h=null;const m=f.originalText;for(;(h=a.exec(m))!==null;){const p=_k(m,h.index,e),U=g7e(f,e,h.index);U.length>0&&o.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const l=[];for(const f of s){let h=null;const m=f.name??s9(f);for(;(h=a.exec(m))!==null;){const p=_k(m,h.index,e),U=m7e(f,e,h.index,t.state.zoom.value);U.length>0&&l.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const c=new Set(t.visibleElements.map(f=>f.id)),u=[...l,...o],d=u.findIndex(f=>c.has(f.element.id))??null;n(u,d)},l7e),fj=dp("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=or();return g(t.In,{children:g(_o.Trigger,{...e,className:"default-sidebar-trigger",name:ys.name})})});fj.displayName="DefaultSidebarTrigger";const hj=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=or();return g(t.In,{children:e})};hj.displayName="DefaultTabTriggers";const Sk=Object.assign(dp("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{var c;const s=Ii(),o=Yn(),{DefaultSidebarTabTriggersTunnel:a}=or(),l=((c=s.openSidebar)==null?void 0:c.tab)===Hu;return D.createElement(_o,{...r,name:"default",key:"default",className:pe("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:u5(n,u=>{o({defaultSidebarDockedPreference:u})})},P(_o.Tabs,{children:[g(_o.Header,{children:P(_o.TabTriggers,{children:[g(_o.TabTrigger,{tab:Hu,children:hd}),g(_o.TabTrigger,{tab:gb,children:C9}),g(a.Out,{})]})}),g(_o.Tab,{tab:gb,children:g(g8e,{})}),g(_o.Tab,{tab:Hu,children:g(c7e,{})}),e]}))}),{Trigger:fj,TabTriggers:hj}),gj=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=D.useRef(null),s=D.useRef(i);return s.current=i,D.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{var c;l[H.CTRL_OR_CMD]&&l.key===H.ENTER&&(l.preventDefault(),(c=s.current)==null||c.call(s))};return o.focus(),o.addEventListener(ee.KEYDOWN,a),()=>{o.removeEventListener(ee.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,ref:r})},U7e=({error:e})=>P("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),mj=({error:e,canvasRef:t,loaded:n})=>P("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(U7e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(il,{size:"2rem"})]}),h6=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>P("div",{className:"ttd-dialog-panel",children:[P("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s==null?void 0:s()]}),t,P("div",{className:pe("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[P(zh,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[P("div",{className:pe({invisible:r}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),r&&g(il,{})]}),!i&&!r&&(o==null?void 0:o()),a==null?void 0:a()]})]}),pj=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),Uj=()=>P("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("Enter")})]}),b7e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},bj=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){b7e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:N4(c,{regenerateIds:!0}),files:u};const d=await sy({elements:r.current.elements,files:r.current.files,exportPadding:ag,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await d0(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},R_=e=>{ju.set(em.MERMAID_TO_EXCALIDRAW,e)},yj=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&R_(n))},y7e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Ik=Za(R_,300),E7e=({mermaidToExcalidrawLib:e})=>{const[t,n]=D.useState(()=>ju.get(em.MERMAID_TO_EXCALIDRAW)||y7e),i=D.useDeferredValue(t.trim()),[r,s]=D.useState(null),o=D.useRef(null),a=D.useRef({elements:[],files:null}),l=go();D.useEffect(()=>{bj({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),Ik(i)},[i,e]),D.useEffect(()=>()=>{Ik.flush()},[]);const c=()=>{yj({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return P(ge,{children:[g("div",{className:"ttd-dialog-desc",children:g(pr,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),P(pj,{children:[g(h6,{label:L("mermaid.syntax"),children:g(gj,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(h6,{label:L("mermaid.preview"),panelAction:{action:()=>{c()},label:L("mermaid.button"),icon:f2},renderSubmitShortcut:()=>g(Uj,{}),children:g(mj,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},Ej=e=>{const t=Yn(),n=D.useRef(null),i=D.useRef(0);return g(zX,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{var o;if(!r)return;const s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){const a=s.offsetHeight||0;a>i.current&&(i.current=a,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&bF(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};Ej.displayName="TTDDialogTabs";const vj=({children:e,...t})=>g(HX,{className:"ttd-dialog-triggers",...t,children:e});vj.displayName="TTDDialogTabTriggers";const H4=({children:e,tab:t,onSelect:n,...i})=>g(VX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});H4.displayName="TTDDialogTabTrigger";const V4=({tab:e,children:t,...n})=>g($X,{...n,value:e,children:t});V4.displayName="TTDDialogTab";const XE=3,sf=1e3,v7e=Kt(null),w7e=Kt(null),wj=e=>{var n;const t=Ii();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(_7e,{...e,tab:t.openDialog.tab})},_7e=dp("TTDDialogBase",({tab:e,...t})=>{const n=go(),i=Yn(),r=D.useRef(null),[s,o]=mn(w7e),[a,l]=D.useState((s==null?void 0:s.prompt)??""),c=a.trim(),u=M=>{l(M.target.value),o(_=>({generatedResponse:(_==null?void 0:_.generatedResponse)??null,prompt:M.target.value}))},[d,f]=D.useState(!1),[h,m]=mn(v7e),p=async()=>{if(c.length>sf||c.length<XE||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<XE&&x(new Error(`Prompt is too short (min ${XE} characters)`)),c.length>sf&&x(new Error(`Prompt is too long (max ${sf} characters)`));return}try{f(!0),lt("ai","generate","ttd");const{generatedResponse:M,error:_,rateLimit:T,rateLimitRemaining:I}=await t.onTextSubmit(c);if(typeof M=="string"&&o(C=>({generatedResponse:M,prompt:(C==null?void 0:C.prompt)??null})),nm(T)&&nm(I)&&m({rateLimit:T,rateLimitRemaining:I}),_){x(_);return}if(!M){x(new Error("Generation failed"));return}try{await bj({canvasRef:r,data:w,mermaidToExcalidrawLib:y,setError:x,mermaidDefinition:M}),lt("ai","mermaid parse success","ttd")}catch(C){console.info(`%cTTD mermaid render errror: ${C.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${C.message}`,"color: yellow"),lt("ai","mermaid parse failed","ttd"),x(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let _=M.message;(!_||_==="Failed to fetch")&&(_="Request failed"),x(new Error(_))}finally{f(!1)}},U=D.useRef(p);U.current=p;const[y,E]=D.useState({loaded:!1,api:be(()=>import("./index-DUEtOH12.js").then(M=>M.b6),__vite__mapDeps([]),import.meta.url)});D.useEffect(()=>{(async()=>{await y.api,E(_=>({..._,loaded:!0}))})()},[y.api]);const w=D.useRef({elements:[],files:null}),[v,x]=D.useState(null);return g(Kr,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:P(Ej,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:L("mermaid.title")}):P(vj,{children:[g(H4,{tab:"text-to-diagram",children:P("div",{style:{display:"flex",alignItems:"center"},children:[L("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(H4,{tab:"mermaid",children:"Mermaid"})]}),g(V4,{className:"ttd-dialog-content",tab:"mermaid",children:g(E7e,{mermaidToExcalidrawLib:y})}),!("__fallback"in t)&&P(V4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),P(pj,{children:[g(h6,{label:L("labels.prompt"),panelAction:{action:p,label:"Generate",icon:f2},onTextSubmitInProgess:d,panelActionDisabled:c.length>sf||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?P("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(Uj,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return P("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(R_(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(z5,{icon:f2})]});const M=c.length/sf;return M>.8?P("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",sf]}):null},children:g(gj,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),g(h6,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),yj({app:n,data:w})},label:"Insert",icon:f2},children:g(mj,{canvasRef:r,error:v,loaded:y.loaded})})]})]})]})})}),T7e=.01,$4=10,al=(e,t)=>!(t==="height"&&ue(e)||t==="width"&&ue(e)||t==="angle"&&Te(e)),Pi=(e,t)=>{const n=e+t/2;return n-n%t},g6=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),y0=(e,t,n,i,r,s=!0)=>{const o=i.getNonDeletedElementsMap(),a=o.get(n.id);if(!a)return;const[l,c]=[n.x+n.width/2,n.y+n.height/2],[u,d]=Z(S(n.x,n.y),S(l,c),n.angle),f=e-u,h=t-d,[m,p]=Z(S(e,t),S(l+f,c+h),-n.angle);i.mutateElement(a,{x:m,y:p},{informMutation:s,isDragging:!1}),Ym(a,i);const U=Ne(n,r);if(U){const y=o.get(U.id);y&&i.mutateElement(y,{x:U.x+f,y:U.y+h},{informMutation:s,isDragging:!1})}if(Te(n)){const y=Ss(r,n.id);y.forEach(E=>{const w=o.get(E.id);if(!w)return;const[v,x]=[E.x+E.width/2,E.y+E.height/2],[M,_]=Z(S(E.x,E.y),S(v,x),E.angle),T=Math.round(M+f),I=Math.round(_+h),[C,R]=Z(S(T,I),S(v+f,x+h),-E.angle);i.mutateElement(w,{x:C,y:R},{informMutation:s,isDragging:!1}),Ym(w,i,{simultaneouslyUpdated:y})})}},k_=(e,t)=>{const i=Gu(t).map(r=>kt(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!Ch(r)).forEach(r=>{i.push({[r.id]:!0})}),i},ml=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1})=>{const d=go(),f=D.useRef(null),h=D.useRef(null),[m,p]=D.useState(i.toString()),U=D.useRef(null);U.current||(U.current={originalAppState:Va(c),originalElements:r,lastUpdatedValue:m,updatePending:!1}),D.useEffect(()=>{const w=i.toString();p(w),U.current.lastUpdatedValue=w},[i]);const y=(w,v,x)=>{if(!U.current.updatePending)return!1;U.current.updatePending=!1;const M=Number(w);if(isNaN(M)){p(i.toString());return}const _=Number(M.toFixed(2)),T=Number(i);(isNaN(T)||Math.abs(_-T)>=T7e)&&(U.current.lastUpdatedValue=w,n({accumulatedChange:0,instantChange:0,originalElements:v,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:_,property:a,originalAppState:x,setInputValue:I=>p(String(I))}),d.syncActionResult({captureUpdate:K.IMMEDIATELY}))},E=D.useRef({});return E.current.handleInputValue=y,D.useEffect(()=>{const w=f.current,v=E.current;return()=>{var M;const x=w==null?void 0:w.value;x&&((M=v.handleInputValue)==null||M.call(v,x,U.current.originalElements,U.current.originalAppState)),window.removeEventListener(ee.POINTER_MOVE,v.onPointerMove,!1),window.removeEventListener(ee.POINTER_UP,v.onPointerUp,!1)}},[s]),s?P("div",{className:pe("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:h,onPointerDown:w=>{if(f.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(f.current.value);let v=null,x=d.scene.getNonDeletedElements().reduce((N,k)=>(N.set(k.id,Lc(k)),N),new Map),M=r.map(N=>x.get(N.id));const _=Va(c);let T=0,I=0;const C=N=>{if(v&&x!==null&&M!==null){const k=N.clientX-v.x;k!==0&&(I+=k,Math.abs(I)>=u&&(I=Math.sign(I)*Math.floor(Math.abs(I)/u),T+=I,n({accumulatedChange:T,instantChange:I,originalElements:M,originalElementsMap:x,shouldKeepAspectRatio:o,shouldChangeByStepSize:N.shiftKey,property:a,scene:l,originalAppState:_,setInputValue:$=>p(String($))}),I=0))}v={x:N.clientX,y:N.clientY}},R=()=>{window.removeEventListener(ee.POINTER_MOVE,C,!1),d.syncActionResult({captureUpdate:K.IMMEDIATELY}),v=null,T=0,I=0,M=null,x=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(ee.POINTER_UP,R,!1)};E.current.onPointerMove=C,E.current.onPointerUp=R,window.addEventListener(ee.POINTER_MOVE,C,!1),window.addEventListener(ee.POINTER_UP,R,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?g(z5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:w=>{if(s){const v=w.target;v instanceof HTMLInputElement&&w.key===H.ENTER&&(y(v.value,r,c),d.focusContainer())}},ref:f,value:m,onChange:w=>{U.current.updatePending=!0,p(w.target.value)},onFocus:w=>{w.target.select(),U.current.originalElements=r,U.current.originalAppState=Va(c)},onBlur:w=>{m?s&&y(w.target.value,U.current.originalElements,U.current.originalAppState):p(i.toString())},disabled:!s})]}):null},S7e=15,I7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o&&!he(o)){const a=s.get(o.id);if(!a)return;if(i!==void 0){const h=Vu(i);r.mutateElement(a,{angle:h}),Ym(a,r);const m=Ne(a,s);m&&!Me(a)&&r.mutateElement(m,{angle:h});return}const l=Math.round(a5(o.angle)*100)/100,c=Math.round(e);let u=(l+c)%360;n&&(u=Pi(u,S7e)),u=u<0?u+360:u;const d=Vu(u);r.mutateElement(a,{angle:d}),Ym(a,r);const f=Ne(a,s);f&&!Me(a)&&r.mutateElement(f,{angle:d})}},x7e=({element:e,scene:t,appState:n,property:i})=>g(ml,{label:"A",icon:wH,value:Math.round(a5(e.angle)%360*100)/100,elements:[e],dragInputCallback:I7e,editable:al(e,"angle"),scene:t,appState:n,property:i}),xk=5,C7e=({property:e,scene:t,appState:n,setAppState:i})=>g(ml,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?Pi(l.gridStep+xk*Math.sign(s),xk):l.gridStep+s),c?(c=aH(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),Ck=10,A7e=e=>e.type==="image",M7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c})=>{const u=c.getNonDeletedElementsMap(),d=t[0],f=u.get(d.id);if(d&&f){const h=i||A7e(d),m=d.width/d.height;if(a.croppingElementId===d.id){const w=u.get(d.id);if(!w||!gt(w)||!w.crop)return;const v=w.crop;let x={...v};const M=w.scale[0]===-1,_=w.scale[1]===-1,{width:T,height:I}=Ja(w),C=v.naturalWidth/T,R=v.naturalHeight/I,N=M?v.width+v.x:v.naturalWidth-v.x,k=_?v.height+v.y:v.naturalHeight-v.y,$=ri*C,V=ri*R;if(s!==void 0){if(o==="width"){const q=s*C,fe=Xe(q,$,N);x={...x,width:fe,x:M?v.x+v.width-fe:v.x}}else if(o==="height"){const q=s*R,fe=Xe(q,V,k);x={...x,height:fe,y:_?v.y+v.height-fe:v.y}}c.mutateElement(w,{crop:x,width:x.width/(v.naturalWidth/T),height:x.height/(v.naturalHeight/I)});return}const z=o==="width"?l:0,G=o==="height"?l:0,j=Xe(v.width+z,$,N),X=Xe(v.height+G,$,k);x={...v,x:M?v.x+v.width-j:v.x,y:_?v.y+v.height-X:v.y,width:j,height:X},c.mutateElement(w,{crop:x,width:x.width/(v.naturalWidth/T),height:x.height/(v.naturalHeight/I)});return}if(s!==void 0){const w=Math.max(o==="width"?s:h?s*m:d.width,ns),v=Math.max(o==="height"?s:h?s/m:d.height,ns);Km(w,v,f,d,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}const p=o==="width"?e:0,U=o==="height"?e:0;let y=Math.max(0,d.width+p);o==="width"&&(r?y=Pi(y,Ck):y=Math.round(y));let E=Math.max(0,d.height+U);o==="height"&&(r?E=Pi(E,Ck):E=Math.round(E)),h&&(o==="width"?E=Math.round(y/m*100)/100:y=Math.round(E*m*100)/100),E=Math.max(ns,E),y=Math.max(ns,y),Km(y,E,f,d,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},Ak=({property:e,element:t,scene:n,appState:i})=>{let r=Ha(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&gt(t)&&t.crop){const{width:s,height:o}=Ja(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=Ha(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=Ha(t.crop.height*a,2)}}return g(ml,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:M7e,value:r,editable:al(t,e),scene:n,appState:i,property:e})},Mk=4,R7e=4,k7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!ue(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),Mk);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,Mk),n&&(l=Pi(l,R7e))}l&&(r.mutateElement(a,{fontSize:l}),$i(a,r.getContainerElement(a),r))}},L7e=({element:e,scene:t,appState:n,property:i})=>{const r=ue(e)?e:nr(e)?Ne(e,t.getNonDeletedElementsMap()):null;return r?g(ml,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:k7e,icon:A5,appState:n,scene:t,property:i}):null},D7e=15,O7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!Ch(c)&&al(c,r)),l=t.filter(c=>!Ch(c)&&al(c,r));if(i!==void 0){const c=Vu(i);for(const u of a){if(!u)continue;s.mutateElement(u,{angle:c});const d=Ne(u,o);d&&!Me(u)&&s.mutateElement(d,{angle:c})}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(a5(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Pi(m,D7e)),m=m<0?m+360:m;const p=Vu(m);s.mutateElement(u,{angle:p});const U=Ne(u,o);U&&!Me(u)&&s.mutateElement(U,{angle:p})}s.triggerUpdate()},N7e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!Ch(l)&&al(l,"angle")),s=r.map(l=>Math.round(a5(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>al(l,"angle"));return g(ml,{label:"A",icon:wH,value:o,elements:e,dragInputCallback:O7e,editable:a,appState:n,scene:t,property:i})},of=10,P7e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...y9(i,o,a,!1),...ue(i)?{fontSize:i.fontSize*n}:{}}},F7e=(e,t,n,i,r,s,o,a)=>{const l=a.getNonDeletedElementsMap(),c=P7e(e,t,i,s);a.mutateElement(r,c);const u=Ne(s,o);if(u){const d=u.fontSize*i;yr(r,a,{newSize:{width:c.width,height:c.height}});const f=l.get(u.id);f&&ue(f)&&(a.mutateElement(f,{fontSize:d}),ep(r,a,n==="width"?"e":"s",!0))}},Rk=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];F7e(r[0],r[1],s,u,h,f,l,c)}},B7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a})=>{const l=o.getNonDeletedElementsMap(),c=k_(t,i);if(s!==void 0){for(const f of c){const h=g6(f,l,n);if(h.length>1){const m=h.map(I=>I.latest),p=h.map(I=>I.original),[U,y,E,w]=yt(p),v=E-U,x=w-y,M=v/x,_=Math.max(ns,a==="width"?Math.max(0,s):v),T=Math.max(ns,a==="height"?Math.max(0,s):x);Rk(_,T,x,M,S(U,y),a,m,p,n,o)}else{const[m]=h,p=m==null?void 0:m.latest,U=m==null?void 0:m.original;if(p&&U&&al(p,a)){let y=a==="width"?Math.max(0,s):p.width;a==="width"&&(r?y=Pi(y,of):y=Math.round(y));let E=a==="height"?Math.max(0,s):p.height;a==="height"&&(r?E=Pi(E,of):E=Math.round(E)),y=Math.max(ns,y),E=Math.max(ns,E),Km(y,E,p,U,n,o,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}const u=a==="width"?e:0,d=a==="height"?e:0;for(const f of c){const h=g6(f,l,n);if(h.length>1){const m=h.map(I=>I.latest),p=h.map(I=>I.original),[U,y,E,w]=yt(p),v=E-U,x=w-y,M=v/x;let _=Math.max(0,v+u);a==="width"&&(r?_=Pi(_,of):_=Math.round(_));let T=Math.max(0,x+d);a==="height"&&(r?T=Pi(T,of):T=Math.round(T)),_=Math.max(ns,_),T=Math.max(ns,T),Rk(_,T,x,M,S(U,y),a,m,p,n,o)}else{const[m]=h,p=m==null?void 0:m.latest,U=m==null?void 0:m.original;if(p&&U&&al(p,a)){let y=Math.max(0,U.width+u);a==="width"&&(r?y=Pi(y,of):y=Math.round(y));let E=Math.max(0,U.height+d);a==="height"&&(r?E=Pi(E,of):E=Math.round(E)),y=Math.max(ns,y),E=Math.max(ns,E),Km(y,E,p,U,n,o,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},kk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=D.useMemo(()=>i.map(c=>{const u=g6(c,n);if(u.length>1){const[f,h,m,p]=yt(u.map(U=>U.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(ml,{label:e==="width"?"W":"H",elements:t,dragInputCallback:B7e,value:a,editable:l,appState:s,property:e,scene:r})},Lk=4,z7e=4,H7e=(e,t)=>e.reduce((n,i)=>{if(!i||Ch(i))return n;if(ue(i))return n.push(i),n;if(nr(i)){const r=Ne(i,t);if(r)return n.push(r),n}return n},[]),V7e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),Lk);for(const l of o)r.mutateElement(l,{fontSize:a}),$i(l,r.getContainerElement(l),r);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,Lk);n&&(m=Pi(m,z7e)),r.mutateElement(u,{fontSize:m}),$i(u,r.getContainerElement(u),r)}r.triggerUpdate()}},$7e=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=H7e(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(ml,{label:"F",icon:A5,elements:s,dragInputCallback:V7e,value:a,editable:l,scene:t,property:i,appState:n})},G7e=(e,t,n,i,r,s)=>{for(let o=0;o<i.length;o++){const a=i[o],[l,c]=[a.x+a.width/2,a.y+a.height/2],[u,d]=Z(S(a.x,a.y),S(l,c),a.angle),f=e==="x"?Math.round(u+t):u,h=e==="y"?Math.round(d+n):d;y0(f,h,a,s,r,!1)}},X7e=(e,t,n,i,r)=>{const s=r.getNonDeletedElementsMap(),[o,a,,]=yt(n),l=e-o,c=t-a;for(let u=0;u<n.length;u++){const d=n[u],f=s.get(d.id);if(f&&(!ue(f)||!f.containerId)){const[h,m]=[f.x+f.width/2,f.y+f.height/2],[p,U]=Z(S(f.x,f.y),S(h,m),f.angle);y0(p+l,U+c,d,r,i,!1)}}},j7e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{var f,h;const l=o.getNonDeletedElementsMap();if(r!==void 0){for(const m of k_(t,a)){const p=g6(m,l,n);if(p.length>1){const[U,y,,]=yt(p.map(v=>v.latest));X7e(s==="x"?r:U,s==="y"?r:y,p.map(v=>v.original),n,o)}else{const U=(f=p[0])==null?void 0:f.original,y=(h=p[0])==null?void 0:h.latest;if(U&&y&&al(y,s)){const[E,w]=[U.x+U.width/2,U.y+U.height/2],[v,x]=Z(S(U.x,U.y),S(E,w),U.angle);y0(s==="x"?r:v,s==="y"?r:x,U,o,n,!1)}}}o.triggerUpdate();return}const c=i?Pi(e,$4):e;G7e(s,s==="x"?c:0,s==="y"?c:0,t,n,o),o.triggerUpdate()},Dk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=D.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,U]=yt(c);return Math.round((e==="x"?p:U)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=Z(S(u.x,u.y),S(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(ml,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:j7e,value:a,property:e,scene:r,appState:s})},Y7e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=n[0],[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=Z(S(u.x,u.y),S(d,f),u.angle);if(l.croppingElementId===u.id){const w=c.get(u.id);if(!w||!gt(w)||!w.crop)return;const v=w.crop;let x=v;const M=w.scale[0]===-1,_=w.scale[1]===-1,{width:T,height:I}=Ja(w);if(s!==void 0){if(o==="x"){const N=s*(v.naturalWidth/T);M?x={...v,x:Xe(v.naturalWidth-N-v.width,0,v.naturalWidth-v.width)}:x={...v,x:Xe(s*(v.naturalWidth/T),0,v.naturalWidth-v.width)}}o==="y"&&(x={...v,y:Xe(s*(v.naturalHeight/I),0,v.naturalHeight-v.height)}),a.mutateElement(w,{crop:x});return}const C=(o==="x"?t:0)*(M?-1:1),R=(o==="y"?t:0)*(_?-1:1);x={...v,x:Xe(v.x+C,0,v.naturalWidth-v.width),y:Xe(v.y+R,0,v.naturalHeight-v.height)},a.mutateElement(w,{crop:x});return}if(s!==void 0){y0(o==="x"?s:h,o==="y"?s:m,u,a,i);return}const p=o==="x"?e:0,U=o==="y"?e:0,y=o==="x"?Math.round(r?Pi(u.x+p,$4):h+p):h,E=o==="y"?Math.round(r?Pi(u.y+U,$4):m+U):m;y0(y,E,u,a,i)},Ok=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=Z(S(t.x,t.y),S(t.x+t.width/2,t.y+t.height/2),t.angle);let a=Ha(e==="x"?s:o,2);if(r.croppingElementId===t.id&&gt(t)&&t.crop){const l=goe(t);l&&(a=Ha(e==="x"?l.x:l.y,2))}return g(ml,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:Y7e,scene:i,value:a,property:e,appState:r})},W7e=50,va=e=>{const t=hp(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=p0(e.app);return g(K7e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},jt=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:pe("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});jt.displayName="StatsRow";const m6=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});m6.displayName="StatsRows";va.StatsRow=jt;va.StatsRows=m6;const K7e=D.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=Yn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&gt(d),m=h?Ja(d):null,[p,U]=D.useState({width:0,height:0}),y=D.useMemo(()=>Do(v=>{const x=yt(v);U({width:Math.round(x[2])-Math.round(x[0]),height:Math.round(x[3])-Math.round(x[1])})},W7e),[]);D.useEffect(()=>{y(l)},[s,l,y]),D.useEffect(()=>()=>y.cancel(),[y]);const E=D.useMemo(()=>k_(i,r),[i,r]),w=D.useMemo(()=>sB(i),[i]);return g("div",{className:"exc-stats",children:P(Qs,{padding:3,children:[P("div",{className:"title",children:[g("h2",{children:L("stats.title")}),g("div",{className:"close",onClick:t,children:dg})]}),P(E4,{label:g("h3",{children:L("stats.generalStats")}),open:!!(r.stats.panels&Lf.generalStats),openTrigger:()=>u(v=>({stats:{open:!0,panels:v.stats.panels^Lf.generalStats}})),children:[P(m6,{children:[g(jt,{heading:!0,children:L("stats.scene")}),P(jt,{columns:2,children:[g("div",{children:L("stats.shapes")}),g("div",{children:l.length})]}),P(jt,{columns:2,children:[g("div",{children:L("stats.width")}),g("div",{children:p.width})]}),P(jt,{columns:2,children:[g("div",{children:L("stats.height")}),g("div",{children:p.height})]}),o&&P(ge,{children:[g(jt,{heading:!0,children:"Canvas"}),g(jt,{children:g(C7e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n==null?void 0:n(l,r)]}),!w&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(E4,{label:g("h3",{children:L("stats.elementProperties")}),open:!!(r.stats.panels&Lf.elementProperties),openTrigger:()=>u(v=>({stats:{open:!0,panels:v.stats.panels^Lf.elementProperties}})),children:P(m6,{children:[d&&P(ge,{children:[h&&g(jt,{heading:!0,children:L("labels.unCroppedDimension")}),r.croppingElementId&&gt(d)&&m&&P(jt,{columns:2,children:[g("div",{children:L("stats.width")}),g("div",{children:Ha(m.width,2)})]}),r.croppingElementId&&gt(d)&&m&&P(jt,{columns:2,children:[g("div",{children:L("stats.height")}),g("div",{children:Ha(m.height,2)})]}),g(jt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?L("labels.imageCropping"):L(`element.${d.type}`)}),g(jt,{children:g(Ok,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(jt,{children:g(Ok,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(jt,{children:g(Ak,{property:"width",element:d,scene:a,appState:r})}),g(jt,{children:g(Ak,{property:"height",element:d,scene:a,appState:r})}),!he(d)&&g(jt,{children:g(x7e,{property:"angle",element:d,scene:a,appState:r})}),g(jt,{children:g(L7e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&P(ge,{children:[Qw(f)&&g(jt,{heading:!0,children:L("element.group")}),P(jt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:L("stats.shapes")}),g("div",{children:i.length})]}),g(jt,{children:g(Dk,{property:"x",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(jt,{children:g(Dk,{property:"y",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(jt,{children:g(kk,{property:"width",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(jt,{children:g(kk,{property:"height",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:r})}),g(jt,{children:g(N7e,{property:"angle",elements:f,scene:a,appState:r})}),g(jt,{children:g($7e,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),Z7e=({sourceElementId:e,onClose:t,appState:n,scene:i,generateLinkForSelection:r=FB})=>{var f;const s=i.getNonDeletedElementsMap(),o=((f=s.get(e))==null?void 0:f.link)??null,[a,l]=D.useState(o),[c,u]=D.useState(!1);D.useEffect(()=>{const h=ze(s,n);let m=o;if(h.length>0&&r){const p=BB(h,n);p&&(m=Gr(r(p.id,p.type)))}l(m)},[s,n,n.selectedElementIds,o,r]);const d=D.useCallback(()=>{var h;if(a&&a!==((h=s.get(e))==null?void 0:h.link)){const m=s.get(e);m&&i.mutateElement(m,{link:a})}if(!a&&c&&e){const m=s.get(e);m&&i.mutateElement(m,{link:null})}t==null||t()},[e,a,s,c,i,t]);return D.useEffect(()=>{const h=m=>{var p,U;((p=n.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&m.key===H.ENTER&&d(),((U=n.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&m.key===H.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n,t,d]),P("div",{className:"ElementLinkDialog",children:[P("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:L("elementLink.title")}),g("p",{children:L("elementLink.desc")})]}),P("div",{className:"ElementLinkDialog__input",children:[g(Hh,{value:a??"",onChange:h=>{c||u(!0),l(h)},onKeyDown:h=>{h.key===H.ENTER&&d()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&a&&g(Ye,{type:"button",title:L("buttons.remove"),"aria-label":L("buttons.remove"),label:L("buttons.remove"),onClick:()=>{l(null),u(!0)},className:"ElementLinkDialog__remove",icon:fd})]}),P("div",{className:"ElementLinkDialog__actions",children:[g(Bh,{label:L("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g(Bh,{label:L("buttons.confirm"),onClick:d,actionType:"primary"})]})]})},L_=({children:e,onClose:t})=>{const[n,i]=D.useState(!!e),{container:r}=sa(),s=ae.useCallback(()=>{i(!1),t&&t(),r==null||r.focus()},[t,r]);return g(ge,{children:n&&g(Kr,{size:"small",onCloseRequest:s,title:L("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},q7e=()=>P("div",{className:"HelpDialog__header",children:[P("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:AA}),L("helpDialog.documentation")]}),P("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:AA}),L("helpDialog.blog")]}),P("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:k9}),L("helpDialog.github")]}),P("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:xH}),"YouTube"]})]}),Q7e=e=>P(ge,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),jE=e=>P("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*J7e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const e4e=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),me=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(t4e,{children:e4e(o)},o)));return P("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...J7e(i,n?L("helpDialog.or"):null)]})]})},t4e=e=>g("kbd",{className:"HelpDialog__key",...e}),n4e=({onClose:e})=>{const t=ae.useCallback(()=>{e&&e()},[e]);return g(ge,{children:P(Kr,{onCloseRequest:t,title:L("helpDialog.title"),className:"HelpDialog",children:[g(q7e,{}),P(Q7e,{title:L("helpDialog.shortcuts"),children:[P(jE,{className:"HelpDialog__island--tools",caption:L("helpDialog.tools"),children:[g(me,{label:L("toolBar.hand"),shortcuts:[H.H]}),g(me,{label:L("toolBar.selection"),shortcuts:[H.V,H[1]]}),g(me,{label:L("toolBar.rectangle"),shortcuts:[H.R,H[2]]}),g(me,{label:L("toolBar.diamond"),shortcuts:[H.D,H[3]]}),g(me,{label:L("toolBar.ellipse"),shortcuts:[H.O,H[4]]}),g(me,{label:L("toolBar.arrow"),shortcuts:[H.A,H[5]]}),g(me,{label:L("toolBar.line"),shortcuts:[H.L,H[6]]}),g(me,{label:L("toolBar.freedraw"),shortcuts:[H.P,H[7]]}),g(me,{label:L("toolBar.text"),shortcuts:[H.T,H[8]]}),g(me,{label:L("toolBar.image"),shortcuts:[H[9]]}),g(me,{label:L("toolBar.eraser"),shortcuts:[H.E,H[0]]}),g(me,{label:L("toolBar.frame"),shortcuts:[H.F]}),g(me,{label:L("toolBar.laser"),shortcuts:[H.K]}),g(me,{label:L("labels.eyeDropper"),shortcuts:[H.I,"Shift+S","Shift+G"]}),g(me,{label:L("helpDialog.editLineArrowPoints"),shortcuts:[Q("CtrlOrCmd+Enter")]}),g(me,{label:L("helpDialog.editText"),shortcuts:[Q("Enter")]}),g(me,{label:L("helpDialog.textNewLine"),shortcuts:[Q("Enter"),Q("Shift+Enter")]}),g(me,{label:L("helpDialog.textFinish"),shortcuts:[Q("Esc"),Q("CtrlOrCmd+Enter")]}),g(me,{label:L("helpDialog.curvedArrow"),shortcuts:["A",L("helpDialog.click"),L("helpDialog.click"),L("helpDialog.click")],isOr:!1}),g(me,{label:L("helpDialog.curvedLine"),shortcuts:["L",L("helpDialog.click"),L("helpDialog.click"),L("helpDialog.click")],isOr:!1}),g(me,{label:L("helpDialog.cropStart"),shortcuts:[L("helpDialog.doubleClick"),Q("Enter")],isOr:!0}),g(me,{label:L("helpDialog.cropFinish"),shortcuts:[Q("Enter"),Q("Escape")],isOr:!0}),g(me,{label:L("toolBar.lock"),shortcuts:[H.Q]}),g(me,{label:L("helpDialog.preventBinding"),shortcuts:[Q("CtrlOrCmd")]}),g(me,{label:L("toolBar.link"),shortcuts:[Q("CtrlOrCmd+K")]}),g(me,{label:L("toolBar.convertElementType"),shortcuts:["Tab","Shift+Tab"],isOr:!0})]}),P(jE,{className:"HelpDialog__island--view",caption:L("helpDialog.view"),children:[g(me,{label:L("buttons.zoomIn"),shortcuts:[Q("CtrlOrCmd++")]}),g(me,{label:L("buttons.zoomOut"),shortcuts:[Q("CtrlOrCmd+-")]}),g(me,{label:L("buttons.resetZoom"),shortcuts:[Q("CtrlOrCmd+0")]}),g(me,{label:L("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(me,{label:L("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(me,{label:L("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(me,{label:L("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(me,{label:L("buttons.zenMode"),shortcuts:[Q("Alt+Z")]}),g(me,{label:L("buttons.objectsSnapMode"),shortcuts:[Q("Alt+S")]}),g(me,{label:L("labels.toggleGrid"),shortcuts:[Q("CtrlOrCmd+'")]}),g(me,{label:L("labels.viewMode"),shortcuts:[Q("Alt+R")]}),g(me,{label:L("labels.toggleTheme"),shortcuts:[Q("Alt+Shift+D")]}),g(me,{label:L("stats.fullTitle"),shortcuts:[Q("Alt+/")]}),g(me,{label:L("search.title"),shortcuts:[Vi("searchMenu")]}),g(me,{label:L("commandPalette.title"),shortcuts:Hm?[Vi("commandPalette")]:[Vi("commandPalette"),Vi("commandPalette",1)]})]}),P(jE,{className:"HelpDialog__island--editor",caption:L("helpDialog.editor"),children:[g(me,{label:L("helpDialog.createFlowchart"),shortcuts:[Q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(me,{label:L("helpDialog.navigateFlowchart"),shortcuts:[Q("Alt+Arrow Key")],isOr:!0}),g(me,{label:L("labels.moveCanvas"),shortcuts:[Q(`Space+${L("helpDialog.drag")}`),Q(`Wheel+${L("helpDialog.drag")}`)],isOr:!0}),g(me,{label:L("buttons.clearReset"),shortcuts:[Q("CtrlOrCmd+Delete")]}),g(me,{label:L("labels.delete"),shortcuts:[Q("Delete")]}),g(me,{label:L("labels.cut"),shortcuts:[Q("CtrlOrCmd+X")]}),g(me,{label:L("labels.copy"),shortcuts:[Q("CtrlOrCmd+C")]}),g(me,{label:L("labels.paste"),shortcuts:[Q("CtrlOrCmd+V")]}),g(me,{label:L("labels.pasteAsPlaintext"),shortcuts:[Q("CtrlOrCmd+Shift+V")]}),g(me,{label:L("labels.selectAll"),shortcuts:[Q("CtrlOrCmd+A")]}),g(me,{label:L("labels.multiSelect"),shortcuts:[Q(`Shift+${L("helpDialog.click")}`)]}),g(me,{label:L("helpDialog.deepSelect"),shortcuts:[Q(`CtrlOrCmd+${L("helpDialog.click")}`)]}),g(me,{label:L("helpDialog.deepBoxSelect"),shortcuts:[Q(`CtrlOrCmd+${L("helpDialog.drag")}`)]}),(y_||Hm)&&g(me,{label:L("labels.copyAsPng"),shortcuts:[Q("Shift+Alt+C")]}),g(me,{label:L("labels.copyStyles"),shortcuts:[Q("CtrlOrCmd+Alt+C")]}),g(me,{label:L("labels.pasteStyles"),shortcuts:[Q("CtrlOrCmd+Alt+V")]}),g(me,{label:L("labels.sendToBack"),shortcuts:[Q(Go?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(me,{label:L("labels.bringToFront"),shortcuts:[Q(Go?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(me,{label:L("labels.sendBackward"),shortcuts:[Q("CtrlOrCmd+[")]}),g(me,{label:L("labels.bringForward"),shortcuts:[Q("CtrlOrCmd+]")]}),g(me,{label:L("labels.alignTop"),shortcuts:[Q("CtrlOrCmd+Shift+Up")]}),g(me,{label:L("labels.alignBottom"),shortcuts:[Q("CtrlOrCmd+Shift+Down")]}),g(me,{label:L("labels.alignLeft"),shortcuts:[Q("CtrlOrCmd+Shift+Left")]}),g(me,{label:L("labels.alignRight"),shortcuts:[Q("CtrlOrCmd+Shift+Right")]}),g(me,{label:L("labels.duplicateSelection"),shortcuts:[Q("CtrlOrCmd+D"),Q(`Alt+${L("helpDialog.drag")}`)]}),g(me,{label:L("helpDialog.toggleElementLock"),shortcuts:[Q("CtrlOrCmd+Shift+L")]}),g(me,{label:L("buttons.undo"),shortcuts:[Q("CtrlOrCmd+Z")]}),g(me,{label:L("buttons.redo"),shortcuts:jP?[Q("CtrlOrCmd+Y"),Q("CtrlOrCmd+Shift+Z")]:[Q("CtrlOrCmd+Shift+Z")]}),g(me,{label:L("labels.group"),shortcuts:[Q("CtrlOrCmd+G")]}),g(me,{label:L("labels.ungroup"),shortcuts:[Q("CtrlOrCmd+Shift+G")]}),g(me,{label:L("labels.flipHorizontal"),shortcuts:[Q("Shift+H")]}),g(me,{label:L("labels.flipVertical"),shortcuts:[Q("Shift+V")]}),g(me,{label:L("labels.showStroke"),shortcuts:[Q("S")]}),g(me,{label:L("labels.showBackground"),shortcuts:[Q("G")]}),g(me,{label:L("labels.showFonts"),shortcuts:[Q("Shift+F")]}),g(me,{label:L("labels.decreaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+<")]}),g(me,{label:L("labels.increaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+>")]})]})]})]})})},i4e=2e3,D_=()=>{const[e,t]=D.useState(null),n=D.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},i4e)},r=D.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},MU=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:pe("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),r4e="filter"in document.createElement("canvas").getContext("2d"),s4e=()=>P("div",{children:[g("h3",{children:L("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:L("canvasError.canvasTooBig")})}),P("em",{children:["(",L("canvasError.canvasTooBigTip"),")"]})]}),o4e=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=Gn(t,e),[a,l]=D.useState(s),[c,u]=D.useState(o),[d,f]=D.useState(e.exportBackground),[h,m]=D.useState(e.exportWithDarkMode),[p,U]=D.useState(e.exportEmbedScene),[y,E]=D.useState(e.exportScale),w=D.useRef(null),[v,x]=D.useState(null),{onCopy:M,copyStatus:_,resetCopyStatus:T}=D_();D.useEffect(()=>{T()},[a,d,h,y,p,T]);const{exportedElements:I,exportingFrame:C}=ey(t,e,c);return D.useEffect(()=>{const R=w.current;if(!R)return;const N=R.offsetWidth,k=R.offsetHeight;N&&sy({elements:I,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:y,exportEmbedScene:p},files:n,exportPadding:ag,maxWidthOrHeight:Math.max(N,k),exportingFrame:C}).then($=>(x(null),d0($).then(()=>{R.replaceChildren($)}).catch(V=>{throw V.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):V}))).catch($=>{console.error($),x($)})},[e,n,I,C,a,d,h,y,p]),P("div",{className:"ImageExportModal",children:[g("h3",{children:L("imageExportDialog.header")}),P("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:w,children:v&&g(s4e,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!Pd&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:R=>{l(R.target.value),i.executeAction(p5e,"ui",R.target.value)}})})]}),P("div",{className:"ImageExportModal__settings",children:[g("h3",{children:L("imageExportDialog.header")}),o&&g(r1,{label:L("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(MU,{name:"exportOnlySelected",checked:c,onChange:R=>{u(R)}})}),g(r1,{label:L("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(MU,{name:"exportBackgroundSwitch",checked:d,onChange:R=>{f(R),i.executeAction(b5e,"ui",R)}})}),r4e&&g(r1,{label:L("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(MU,{name:"exportDarkModeSwitch",checked:h,onChange:R=>{m(R),i.executeAction(y5e,"ui",R)}})}),g(r1,{label:L("imageExportDialog.label.embedScene"),tooltip:L("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(MU,{name:"exportEmbedSwitch",checked:p,onChange:R=>{U(R),i.executeAction(gG,"ui",R)}})}),g(r1,{label:L("imageExportDialog.label.scale"),name:"exportScale",children:g(qX,{name:"exportScale",value:y,onChange:R=>{E(R),i.executeAction(U5e,"ui",R)},choices:Dw.map(R=>({value:R,label:`${R}×`}))})}),P("div",{className:"ImageExportModal__settings__buttons",children:[g(to,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.exportToPng"),onClick:()=>r(L8.png,I,{exportingFrame:C}),icon:GA,children:L("imageExportDialog.button.exportToPng")}),g(to,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.exportToSvg"),onClick:()=>r(L8.svg,I,{exportingFrame:C}),icon:GA,children:L("imageExportDialog.button.exportToSvg")}),(y_||Hm)&&g(to,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.copyPngToClipboard"),status:_,onClick:async()=>{await r(L8.clipboard,I,{exportingFrame:C}),M()},icon:sp,children:L("imageExportDialog.button.copyPngToClipboard")})]})]})]})},r1=({label:e,children:t,tooltip:n,name:i})=>P("div",{className:"ImageExportModal__settings__setting",title:e,children:[P("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(pd,{label:n,long:!0,children:cde})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),a4e=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=D.useState(()=>({appStateSnapshot:Va(t),elementsSnapshot:Va(e)}));return g(Kr,{onCloseRequest:s,size:"wide",title:!1,children:g(o4e,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},G4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":fi[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":fi[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":fi[t][9]},children:e}),l4e=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:P("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&P(G4,{color:"lime",children:[g("div",{className:"Card-icon",children:Uue}),g("h2",{children:L("exportDialog.disk_title")}),P("div",{className:"Card-details",children:[L("exportDialog.disk_details"),!Pd&&r.renderAction("changeProjectName")]}),g(Ye,{className:"Card-button",type:"button",title:L("exportDialog.disk_button"),"aria-label":L("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(mG,"ui")}})]}),l&&P(G4,{color:"pink",children:[g("div",{className:"Card-icon",children:Xb}),g("h2",{children:L("exportDialog.link_title")}),g("div",{className:"Card-details",children:L("exportDialog.link_details")}),g(Ye,{className:"Card-button",type:"button",title:L("exportDialog.link_button"),"aria-label":L("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{lt("export","link",`ui (${W0()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},c4e=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{var l;const a=ae.useCallback(()=>{o({openDialog:null})},[o]);return g(ge,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g(Kr,{onCloseRequest:a,title:L("buttons.export"),children:g(l4e,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},u4e="small",d4e=e=>P("label",{className:pe("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${u4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:c4})]}),f4e=({UIOptions:e})=>P(Jt,{__fallback:!0,children:[g(Jt.DefaultItems.LoadScene,{}),g(Jt.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(Jt.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(Jt.DefaultItems.SaveAsImage,{}),g(Jt.DefaultItems.SearchMenu,{}),g(Jt.DefaultItems.Help,{}),g(Jt.DefaultItems.ClearCanvas,{}),g(Jt.Separator,{}),g(Jt.Group,{title:"Excalidraw links",children:g(Jt.DefaultItems.Socials,{})}),g(Jt.Separator,{}),g(Jt.DefaultItems.ToggleTheme,{}),g(Jt.DefaultItems.ChangeCanvasBackground,{})]}),h4e=()=>P(ku,{__fallback:!0,children:[g(ku.Actions.SaveToDisk,{}),g(ku.Actions.ExportToImage,{})]}),g4e=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:U,isCollaborating:y,generateLinkForSelection:E})=>{var z,G,j;const w=ii(),v=j8e(),x=v.tunnelsJotai.Provider,[M,_]=mn(F5),T=()=>f.canvasActions.export?g(c4e,{elements:r,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:s,setAppState:i}):null,I=()=>{var X;return!f.canvasActions.saveAsImage||((X=t.openDialog)==null?void 0:X.name)!=="imageExport"?null:g(a4e,{elements:r,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:U.getName()})},C=()=>P("div",{style:{position:"relative"},children:[g(v.MainMenuTunnel.Out,{}),m&&g(v.WelcomeScreenMenuHintTunnel.Out,{})]}),R=()=>g(b0,{heading:"selectedShapeActions",className:pe("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(Qs,{className:Cc.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(eX,{appState:t,elementsMap:U.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:U})})}),N=()=>{var fe,ie,Ue,Ve,$e;const X=_9(t,r),q=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((fe=t.openDialog)==null?void 0:fe.name)!=="elementLinkSelector";return g(mX,{side:"top",children:P("div",{className:"App-menu App-menu_top",children:[P(ms.Col,{gap:6,className:pe("App-menu_top__left"),children:[C(),X&&R()]}),!t.viewModeEnabled&&((ie=t.openDialog)==null?void 0:ie.name)!=="elementLinkSelector"&&g(b0,{heading:"shapes",className:"shapes-section",children:nt=>P("div",{style:{position:"relative"},children:[m&&g(v.WelcomeScreenToolbarHintTunnel.Out,{}),g(ms.Col,{gap:4,align:"start",children:P(ms.Row,{gap:1,className:pe("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[P(Qs,{padding:1,className:pe("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(UX,{appState:t,isMobile:w.editor.isMobile,device:w,app:U}),nt,P(ms.Row,{gap:1,children:[g(bX,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:L("toolBar.penMode"),penDetected:t.penDetected}),g(gX,{checked:t.activeTool.locked,onChange:o,title:L("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(pX,{checked:Ph(t),onChange:()=>a(),title:L("toolBar.hand"),isMobile:!0}),g(tX,{appState:t,activeTool:t.activeTool,UIOptions:f,app:U})]})]}),y&&g(Qs,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(d4e,{title:L("toolBar.laser"),checked:t.activeTool.type===Zn.laser,onChange:()=>U.setActiveTool({type:Zn.laser}),isMobile:!0})})]})})]})}),P("div",{className:pe("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(yX,{collaborators:t.collaborators,userToFollow:((Ue=t.userToFollow)==null?void 0:Ue.socketId)||null}),u==null?void 0:u(w.editor.isMobile,t),!t.viewModeEnabled&&((Ve=t.openDialog)==null?void 0:Ve.name)!=="elementLinkSelector"&&(!$||(($e=t.openSidebar)==null?void 0:$e.name)!==ys.name)&&g(v.DefaultSidebarTriggerTunnel.Out,{}),q&&g(va,{app:U,onClose:()=>{e.executeAction(A4)},renderCustomStats:d})]})]})})},k=()=>g(Sk,{__fallback:!0,onDock:X=>{lt("sidebar",`toggleDock (${X?"dock":"undock"})`,`(${w.editor.isMobile?"mobile":"desktop"})`)}}),$=bz(A_),V=P(ge,{children:[p,g(f4e,{UIOptions:f}),g(Sk.Trigger,{__fallback:!0,icon:C9,title:im(L("toolBar.library")),onToggle:X=>{X&&lt("sidebar",`${ys.name} (open)`,`button (${w.editor.isMobile?"mobile":"desktop"})`)},tab:ys.defaultTab,children:L("toolBar.library")}),g(h4e,{}),((z=t.openDialog)==null?void 0:z.name)==="ttd"&&g(wj,{__fallback:!0}),t.isLoading&&g(hX,{delay:250}),t.errorMessage&&g(L_,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),M&&!w.editor.isMobile&&g(Ige,{colorPickerType:M.colorPickerType,onCancel:()=>{_(null)},onChange:(X,q,fe,{altKey:ie})=>{if(!(X!=="elementBackground"&&X!=="elementStroke"))if(fe.length){for(const Ue of fe)mi(Ue,we(r),{[ie&&M.swapPreviewOnAlt?X==="elementBackground"?"strokeColor":"backgroundColor":X==="elementBackground"?"backgroundColor":"strokeColor"]:q}),$t.delete(Ue);U.scene.triggerUpdate()}else i(X==="elementBackground"?{currentItemBackgroundColor:q}:{currentItemStrokeColor:q})},onSelect:(X,q)=>{var fe;_(ie=>ie!=null&&ie.keepOpenOnAlt&&q.altKey?ie:null),(fe=M==null?void 0:M.onSelect)==null||fe.call(M,X,q)}}),((G=t.openDialog)==null?void 0:G.name)==="help"&&g(n4e,{onClose:()=>{i({openDialog:null})}}),g(q8e,{}),((j=t.openDialog)==null?void 0:j.name)==="elementLinkSelector"&&g(Z7e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},scene:U.scene,appState:t,generateLinkForSelection:E}),g(v.OverwriteConfirmDialogTunnel.Out,{}),I(),T(),t.pasteDialog.shown&&g(U3e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),w.editor.isMobile&&g(p3e,{app:U,appState:t,elements:r,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:I,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:k,device:w,renderWelcomeScreen:m,UIOptions:f}),!w.editor.isMobile&&P(ge,{children:[P("div",{className:"layer-ui__wrapper",style:t.openSidebar&&$&&w.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(v.WelcomeScreenCenterTunnel.Out,{}),N(),g(EX,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(X=>({...Qm(r,X)}))},children:L("buttons.scrollBackToContent")})]}),k()]})]});return g(DV.Provider,{value:t,children:g(x,{children:g(qG.Provider,{value:v,children:V})})})},Nk=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},m4e=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return Hi(Nk(i),Nk(o),{selectedElementIds:Hi,selectedGroupIds:Hi})&&Hi(r,a)},p4e=ae.memo(g4e,m4e),U4e="small",YE=e=>P("label",{className:pe("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${U4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),b4e=({trails:e})=>{const t=D.useRef(null);return D.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},y4e=e=>{const t=D.useRef(!1);return D.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,i=new Map,r=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))r.has(d)||r.set(d,[]),r.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&s.set(u,c.username),c.userState&&o.set(u,c.userState),i.set(u,Br({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";HEe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:r,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:e.renderScrollbars},device:e.device,callback:e.renderInteractiveSceneCallback},I_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?_t.GRAB:_t.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:L("labels.drawingCanvas")})},Pk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches,activeLockedId:e.activeLockedId}),E4e=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements||e.renderScrollbars!==t.renderScrollbars?!1:Hi(Pk(e.appState),Pk(t.appState)),v4e=ae.memo(y4e,E4e),w4e=e=>{const t=D.useRef(null),n=D.useRef(!1);return D.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static"));const s=`${e.appState.width}px`,o=`${e.appState.height}px`;r.style.width!==s&&(r.style.width=s),r.style.height!==o&&(r.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;r.width!==a&&(r.width=a),r.height!==l&&(r.height=l),J$({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},I_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},Fk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),_4e=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Hi(Fk(e.appState),Fk(t.appState))&&Hi(e.renderConfig,t.renderConfig),T4e=ae.memo(w4e,_4e),_j=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{if(e){const[l,c]=Z5(e,s),u=q5({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?hu(n,i,r,t,u,a,o):u.clearRect(0,0,l,c)}},S4e=lg(e=>{_j(e)},{trailing:!0}),I4e=(e,t)=>{if(t){S4e(e);return}_j(e)},x4e=e=>{const t=D.useRef(null);return D.useEffect(()=>{t.current&&I4e({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},I_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},C4e=5e3,A4e=({message:e,onClose:t,closable:n=!1,duration:i=C4e,style:r})=>{const s=D.useRef(0),o=i!==1/0,a=D.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return D.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),P("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(Ye,{icon:dg,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},M4e=({app:e,activeLockedId:t})=>{const n=e.scene.getElement(t),i=n?[n]:kt(e.scene.getNonDeletedElementsMap(),t);if(i.length===0)return null;const[r,s]=yt(i),{x:o,y:a}=Br({sceneX:r,sceneY:s},e.state);return g("div",{className:"UnlockPopup",style:{bottom:`${e.state.height+12-a+e.state.offsetTop}px`,left:`${o-e.state.offsetLeft}px`},onClick:()=>{Sn.flushSync(()=>{const l=np(i,e.state);e.setState({selectedElementIds:i.reduce((c,u)=>({...c,[u.id]:!0}),{}),selectedGroupIds:l,activeLockedId:null})}),e.actionManager.executeAction(TG)},title:L("labels.elementLock.unlock"),children:tue})},Tj=ae.createContext(null),Sj=ae.createContext(null),Ij={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},O_=ae.createContext(Ij);O_.displayName="DeviceContext";const N_=ae.createContext({container:null,id:null});N_.displayName="ExcalidrawContainerContext";const P_=ae.createContext([]);P_.displayName="ExcalidrawElementsContext";const F_=ae.createContext({...Qo(),width:0,height:0,offsetLeft:0,offsetTop:0});F_.displayName="ExcalidrawAppStateContext";const B_=ae.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});B_.displayName="ExcalidrawSetAppStateContext";const z_=ae.createContext(null);z_.displayName="ExcalidrawActionManagerContext";const go=()=>D.useContext(Tj),fp=()=>D.useContext(Sj),ii=()=>D.useContext(O_),sa=()=>D.useContext(N_),uy=()=>D.useContext(P_),hp=()=>D.useContext(F_),Yn=()=>D.useContext(B_),Tr=()=>D.useContext(z_);let s1=!1,WE=0,ou=!1,o1=!1,KE=!1,a1={horizontal:null,vertical:null},xl=0,l1=!1;const ZE=new Map;let RU=!1,Bk=0,zk=!1,au=null;const Ut={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class H_ extends ae.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"device",Ij);F(this,"excalidrawContainerRef",ae.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new Kle);F(this,"flowChartNavigator",new Wle);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new fEe);F(this,"laserTrails",new ZEe(this.animationFrameHandler,this));F(this,"eraserTrail",new l3e(this.animationFrameHandler,this));F(this,"lassoTrail",new o3e(this.animationFrameHandler,this));F(this,"onChangeEmitter",new Fs);F(this,"onPointerDownEmitter",new Fs);F(this,"onPointerUpEmitter",new Fs);F(this,"onUserFollowEmitter",new Fs);F(this,"onScrollChangeEmitter",new Fs);F(this,"missingPointerEventCleanupEmitter",new Fs);F(this,"onRemoveEventListenersEmitter",new Fs);F(this,"updateEditorAtom",(n,...i)=>{const r=Or.set(n,...i);return this.triggerRender(),r});F(this,"getEffectiveGridSize",()=>p0(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),$t.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(r=>{if(dr(r)){if(n.add(r.id),!this.embedsValidationStatus.has(r.id)){i=!0;const s=u2(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,s)}}else Pl(r)&&n.add(r.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((r,s)=>{n.has(s)||this.iFrameRefs.delete(s)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const r=document.getElementById(this.getFrameNameDOMId(n));if(r){const s=r.getBoundingClientRect(),o=Mt({clientX:s.x,clientY:s.y},this.state),a=Mt({clientX:s.right,clientY:s.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&this.scene.mutateElement(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{var s;if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===Ae.DARK,i=this.scene.getNonDeletedFramesLikes(),r=i.length>0&&(s=this.state.searchMatches)!=null&&s.focusedId&&Te(this.scene.getElement(this.state.searchMatches.focusedId))?this.state.searchMatches.matches.find(o=>o.focus):null;return i.map(o=>{if(!Bb(o,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===o.id&&this.resetEditingFrame(o),null;const{x:a,y:l}=Br({sceneX:o.x,sceneY:o.y},this.state),c=6;let u;const d=rB(o);if(o.id===this.state.editingFrame){const f=d;u=g("input",{autoFocus:!0,value:f,onChange:h=>{this.scene.mutateElement(o,{name:h.target.value})},onFocus:h=>h.target.select(),onBlur:()=>this.resetEditingFrame(o),onKeyDown:h=>{(h.key===H.ESCAPE||h.key===H.ENTER)&&this.resetEditingFrame(o)},style:{background:this.state.viewBackgroundColor,filter:n?Lw:"none",zIndex:2,border:"none",display:"block",padding:`${c}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:`${Pt.nameFontSize}px`,transform:`translate(-${c}px, ${c}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-a-c}px`},size:f.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else u=d;return g("div",{id:this.getFrameNameDOMId(o),style:{position:"absolute",bottom:`${this.state.height+Pt.nameOffsetY-l+this.state.offsetTop}px`,left:`${a-this.state.offsetLeft}px`,zIndex:2,fontSize:Pt.nameFontSize,color:n?Pt.nameColorDarkTheme:Pt.nameColorLightTheme,lineHeight:Pt.nameLineHeight,width:"max-content",maxWidth:(r==null?void 0:r.id)===o.id&&(r!=null&&r.focus)?"none":`${o.width*this.state.zoom.value}px`,overflow:o.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:_t.MOVE,pointerEvents:this.state.viewModeEnabled?du.disabled:du.enabled},onPointerDown:f=>this.handleCanvasPointerDown(f),onWheel:f=>this.handleWheel(f),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:o.id})},children:u},o.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElementsMapIncludingDeleted",()=>this.scene.getElementsMapIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,r)=>{lt("export",n,"ui");const s=await ty(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(hF).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&s&&m_(s)&&this.setState({fileHandle:s})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?this.scene.mutateElement(n,{customData:{generationData:void 0}},{informMutation:!1,isDragging:!1}):this.scene.mutateElement(n,{customData:{generationData:i}},{informMutation:!1,isDragging:!1}),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Zn.magicframe}),lt("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&s2(n[0])&&n[0];if(!i&&n.some(s=>Te(s)||s.frameId)){this.setActiveTool({type:Zn.magicframe});return}lt("ai","tool-select (existing selection)","d2c");let r;if(i)r=i;else{const[s,o,a,l]=yt(n),c=50;r=X7({...Pt,x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(r);for(const u of n)this.scene.mutateElement(u,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}});F(this,"openEyeDropper",({type:n})=>{this.updateEditorAtom(F5,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,r)=>{const s=n==="background"&&r.altKey||n==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?s?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:K.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:K.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Ie(a,{[s?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:K.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});F(this,"syncActionResult",on(n=>{var s,o,a,l,c,u;if(this.unmounted||n===!1)return;this.store.scheduleAction(n.captureUpdate);let i=!1,r=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||r||this.state.contextMenu){let d=((s=n==null?void 0:n.appState)==null?void 0:s.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||Ae.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),r=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&r&&n.elements.forEach(U=>{(r==null?void 0:r.id)===U.id&&r!==U&&Q7(U)&&ue(U)&&(r=U)}),r!=null&&r.isDeleted&&(r=null),this.setState(U=>{const y=n.appState||{};return{...U,...y,contextMenu:null,editingTextElement:r,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}i||this.scene.triggerUpdate()}));F(this,"onBlur",on(()=>{ou=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",on(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...Qo(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var r;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async s=>{if(!s.files.length)return;const o=s.files[0],a=await o.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),o)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(s=>{console.error(s)})}catch(s){console.error(s),n={appState:{errorMessage:s.message||"Encountered an error during importing or restoring scene data"}}}const i=wd(n,null,null,{repairBindings:!0});i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((r=i.appState)==null?void 0:r.openSidebar)||this.state.openSidebar,activeTool:i.appState.activeTool.type==="image"?{...i.appState.activeTool,type:"selection"}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...Qm(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:K.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(s=>{this.fonts.onLoaded(s)}),om(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"isMobileBreakpoint",(n,i)=>n<Nie||i<Fie&&n<Pie);F(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:i,clientHeight:r}=document.body,s=this.device.viewport,o=t2(s,{isLandscape:i>r,isMobile:this.isMobileBreakpoint(i,r)});return s!==o?(this.device={...this.device,viewport:o},!0):!1});F(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:r}=n.getBoundingClientRect(),s=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Bie,o=this.device.editor,a=t2(o,{isMobile:this.isMobileBreakpoint(i,r),canFitSidebar:i>s});return o!==a?(this.device={...this.device,editor:a},!0):!1});F(this,"onResize",on(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>$t.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),y7||this.refreshEditorBreakpoints(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:r})=>{i&&(a1=i);const s=this.state.editingTextElement?!1:!n&&r.size>0;this.state.scrolledOutside!==s&&this.setState({scrolledOutside:s}),this.scheduleImageRefresh()});F(this,"onScroll",Za(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===i&&r.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},Die));F(this,"onCut",on(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||Uu(n.target)||(this.actionManager.executeAction(xR,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",on(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||Uu(n.target)||(this.actionManager.executeAction(T2,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(YP&&n.preventDefault(),!s1){s1=!0,clearTimeout(WE),WE=window.setTimeout(H_.resetTapTwice,Mie);return}if(s1&&n.touches.length===1){const i=n.touches[0];this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY}),s1=!1,clearTimeout(WE)}n.touches.length===2&&this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:it(this.state.previousSelectedElementIds,this.state)}):Ut.pointers.clear()});F(this,"pasteFromClipboard",on(async n=>{var d,f;const i=!!RU,r=document.activeElement,s=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(r);if(n&&!s)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||Uu(r)))return;const{x:a,y:l}=Mt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await hG(n,i);if(!c&&!i){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:i,sceneX:a,sceneY:l});if(u.text){const h=u.text.trim();h.startsWith("<svg")&&h.endsWith("</svg>")&&(c=vR(h))}}if(Xu(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:L("errors.imageToolNotSupported")});return}const h=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(h,c),this.initializeImageDimensions(h),this.setState({selectedElementIds:it({[h.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(h){console.error(h)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!i)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const h=u.programmaticAPI?N4(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:h,files:u.files||null,position:"cursor",retainSeed:i})}else if(u.text){if(u.text&&JEe(u.text)){const p=await be(()=>import("./index-DUEtOH12.js").then(U=>U.b6),__vite__mapDeps([]),import.meta.url);try{const{elements:U,files:y}=await p.parseMermaidToExcalidraw(u.text),E=N4(U,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:E,files:y,position:"cursor"});return}catch(U){console.warn(`parsing pasted text as mermaid definition failed: ${U.message}`)}}const h=yF(u.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=h.map(p=>Gle(p)).filter(p=>{var U;return u2(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||((U=Pf(p))==null?void 0:U.type)==="video")});if(!RU&&m.length>0&&m.length===h.length){const p=[];for(const U of m){const y=p[p.length-1],E=this.insertEmbeddableElement({sceneX:y?y.x+y.width+20:a,sceneY:l,link:Gr(U)});E&&p.push(E)}p.length&&this.setState({selectedElementIds:Object.fromEntries(p.map(U=>[U.id,!0]))});return}this.addTextFromPaste(u.text,i)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var T,I;const i=vd(n.elements,null,void 0),[r,s,o,a]=yt(i),l=Ni(r,o)/2,c=Ni(s,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=Mt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[U,y]=Rn(m,p,this.getEffectiveGridSize()),{duplicatedElements:E}=zb({type:"everything",elements:i.map(C=>Ie(C,{x:C.x+U-r,y:C.y+y-s})),randomizeSeed:!n.retainSeed}),w=this.scene.getElementsIncludingDeleted();let v=[...w,...E];v=((I=(T=this.props).onDuplicate)==null?void 0:I.call(T,v,w))||v,oo(v,we(E));const M=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(M){const C=nae(E,M);rm(v,C,M,this.state)}this.scene.replaceAllElements(v),E.forEach(C=>{if(ue(C)&&Gt(C)){const R=$n(C,this.scene.getElementsMapIncludingDeleted());$i(C,R,this.scene)}}),bie&&Ga.loadElementsFonts(E).then(C=>{this.fonts.onLoaded(C)}),n.files&&this.addMissingFiles(n.files),this.store.scheduleCapture();const _=Jw(E);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Or.get(A_)?this.state.openSidebar:null,...Li({editingGroupId:null,selectedElementIds:_.reduce((C,R)=>(Gt(R)||(C[R.id]=!0),C),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(E,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{xl&&this.resetContextMenuTimer(),Ut.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||lt("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...en(this.state,i.activeTool.locked?{type:"selection"}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const r=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(r==null?void 0:r.enabled)??i.frameRendering.enabled,clip:(r==null?void 0:r.clip)??i.frameRendering.clip,name:(r==null?void 0:r.name)??i.frameRendering.name,outline:(r==null?void 0:r.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(LUe)});F(this,"zoomCanvas",n=>{this.setState({...Cu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Na(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(om(n)?c=Mle(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):om(n)&&this.setState({toast:{message:L("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const r=Array.isArray(n)?n:[n];let s=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=H5({canvasOffsets:i.canvasOffsets,targetElements:r,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});s=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=Qm(r,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=mre({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:s.value},interpolateValue:(h,m,p,U)=>{if(U==="zoom")return h*Math.pow(m/h,qa(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:s})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const r=await i.blob(),s=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(s,null),await n.delete("shared-file"),window.history.replaceState(null,za,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",on(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const r=i?{}:{...this.files},s={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!r[a.id]&&(s[a.id]=a,r[a.id]=a,a.mimeType===ye.svg))try{const l=X6e(dA(Y6e(a.dataURL)),ye.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=r,{addedFiles:s}});F(this,"updateScene",on(n=>{const{elements:i,appState:r,collaborators:s,captureUpdate:o}=n,a=i?tl(i):void 0;if(o){const l=i?we(a??[]):void 0,c=r?Object.assign({},this.store.snapshot.appState,r):void 0;this.store.scheduleMicroAction({action:o,elements:l,appState:c})}r&&this.setState(r),a&&this.scene.replaceAllElements(a),s&&this.setState({collaborators:s})}));F(this,"mutateElement",(n,i,r=!0)=>this.scene.mutateElement(n,i,{informMutation:r,isDragging:!1}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:r})=>{var a,l;let s;r===void 0?s=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:s=r?n:null;const o=s?{name:s}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!s});F(this,"updateCurrentCursorPosition",on(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),r=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),s=16;return qm().rtl?{top:n+s,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width),0)+s,bottom:s,left:Math.max((i==null?void 0:i.right)??0,0)+s}:{top:n+s,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+s,0),bottom:s,left:Math.max((r==null?void 0:r.right)??0,0)+s}});F(this,"onKeyDown",on(n=>{var o,a,l,c,u;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(d,f){const h=d[f];return typeof h=="function"?h.bind(d):f==="key"?n.shiftKey?d.key.toUpperCase():d.key.toLowerCase():h}})),!S7(n.target)){if((n.key===H.ESCAPE||n.key===H.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const d=ze(this.scene.getNonDeletedElementsMap(),this.state);if(d.length===1&&gt(d[0])&&n.key===H.ENTER){this.startImageCropping(d[0]);return}if(n.key===H.ESCAPE)this.updateEditorAtom(Ea,null);else if(n.key===H.TAB&&(document.activeElement===((o=this.excalidrawContainerRef)==null?void 0:o.current)||(a=document.activeElement)!=null&&a.classList.contains(Cc.CONVERT_ELEMENT_TYPE_POPUP))){n.preventDefault();const h=iy(d);((l=Or.get(Ea))==null?void 0:l.type)==="panel"&&IG(this,{conversionType:h,direction:n.shiftKey?"left":"right"})&&this.store.scheduleCapture(),h&&this.updateEditorAtom(Ea,{type:"panel"})}if(n.key===H.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const f=E1(n.key);if(n[H.CTRL_OR_CMD]&&f&&!n.shiftKey){n.preventDefault();const h=ze(this.scene.getNonDeletedElementsMap(),this.state);h.length===1&&f5(h[0])&&this.flowChartCreator.createNodes(h[0],this.state,uA(n.key),this.scene),(c=this.flowChartCreator.pendingNodes)!=null&&c.length&&!c2(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const h=ze(this.scene.getNonDeletedElementsMap(),this.state);if(h.length===1&&f){n.preventDefault();const m=this.flowChartNavigator.exploreByDirection(h[0],this.scene.getNonDeletedElementsMap(),uA(n.key));if(m){this.setState(U=>({selectedElementIds:it({[m]:!0},U)}));const p=this.scene.getNonDeletedElementsMap().get(m);p&&!c2([p],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(p,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[H.CTRL_OR_CMD]&&n.key===H.P&&!n.shiftKey&&!n.altKey){this.setToast({message:L("commandPalette.shortcutHint",{shortcut:Vi("commandPalette")})}),n.preventDefault();return}if(n[H.CTRL_OR_CMD]&&n.key.toLowerCase()===H.V&&(RU=n.shiftKey,clearTimeout(Bk),Bk=window.setTimeout(()=>{RU=!1},100)),n[H.CTRL_OR_CMD]&&Uu(n.target)&&(n.code===et.MINUS||n.code===et.EQUAL)){n.preventDefault();return}if(Uu(n.target)&&n.key!==H.ESCAPE||E1(n.key)&&S7(n.target))return;if(n.key===H.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===H.E&&n.shiftKey&&n[H.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===H.PAGE_UP||n.key===H.PAGE_DOWN){let d=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===H.PAGE_DOWN&&(d=-d),n.shiftKey?this.translateCanvas(f=>({scrollX:f.scrollX+d})):this.translateCanvas(f=>({scrollY:f.scrollY+d}))}if(((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[H.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),E1(n.key)){let d=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const f=d.find(he),h=new Set;d.filter(he).filter(y=>{const E=y.startBinding&&!d.some(v=>{var x;return v.id===((x=y.startBinding)==null?void 0:x.elementId)}),w=y.endBinding&&!d.some(v=>{var x;return v.id===((x=y.endBinding)==null?void 0:x.elementId)});return E||w}).forEach(y=>h.add(y.id)),d=d.filter(y=>!h.has(y.id));const m=this.getEffectiveGridSize()&&(n.shiftKey?Wx:this.getEffectiveGridSize())||(n.shiftKey?vie:Wx);let p=0,U=0;n.key===H.ARROW_LEFT?p=-m:n.key===H.ARROW_RIGHT?p=m:n.key===H.ARROW_UP?U=-m:n.key===H.ARROW_DOWN&&(U=m),d.forEach(y=>{this.scene.mutateElement(y,{x:y.x+p,y:y.y+U},{informMutation:!1,isDragging:!1}),yr(y,this.scene,{simultaneouslyUpdated:d})}),this.setState({suggestedBindings:K8(d.filter(y=>y.id!==(f==null?void 0:f.id)||m!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===H.ENTER){const d=this.scene.getSelectedElements(this.state);if(d.length===1){const f=d[0];if(n[H.CTRL_OR_CMD])Ce(f)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&(this.store.scheduleCapture(),he(f)||this.setState({editingLinearElement:new ce(f,this.scene.getNonDeletedElementsMap())}));else if(ue(f)||Noe(f)){let h;ue(f)||(h=f);const m=X8(f,this.state,this.scene.getNonDeletedElementsMap()),p=m.x,U=m.y;this.startTextEditing({sceneX:p,sceneY:U,container:h}),n.preventDefault();return}else Te(f)&&this.setState({editingFrame:f.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const d=U8e(n.key);d?(this.state.activeTool.type!==d&&lt("toolbar",d,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),d==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(f=>({currentItemArrowType:f.currentItemArrowType===oi.sharp?oi.round:f.currentItemArrowType===oi.round?oi.elbow:oi.sharp})),this.setActiveTool({type:d}),n.stopPropagation()):n.key===H.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===H.SPACE&&Ut.pointers.size===0&&(ou=!0,It(this.interactiveCanvas,_t.GRAB),n.preventDefault()),(n.key===H.G||n.key===H.S)&&!n.altKey&&!n[H.CTRL_OR_CMD]){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;n.key===H.G&&(Rh(this.state.activeTool.type)||d.some(f=>Rh(f.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===H.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[H.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===H.F){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;(this.state.activeTool.type==="text"||d.find(f=>ue(f)||Ne(f,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===H.K&&!n.altKey&&!n[H.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[H.CTRL_OR_CMD]&&(n.key===H.BACKSPACE||n.key===H.DELETE)&&this.updateEditorAtom(ay,"clearCanvas");const i=n.key.toLocaleLowerCase(),r=i===H.S&&n.shiftKey,s=n.key===H.I||i===H.G&&n.shiftKey;(r||s)&&this.openEyeDropper({type:r?"stroke":"background"})}));F(this,"onKeyUp",on(n=>{var i,r,s,o;if(n.key===H.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?It(this.interactiveCanvas,_t.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?Ds(this.interactiveCanvas):(Eo(this.interactiveCanvas,this.state),this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),ou=!1),!n[H.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),E1(n.key)&&(Rb(this.scene.getSelectedElements(this.state).filter(Ce),Su(this.state),((r=this.state.selectedLinearElement)==null?void 0:r.selectedPointsIndices)??[],this.scene,this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})),!n[H.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:it({[a.id]:!0},l)})),c2([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",(n,i=!1)=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const r=en(this.state,n);r.type==="hand"?It(this.interactiveCanvas,_t.GRAB):ou||Eo(this.interactiveCanvas,{...this.state,activeTool:r}),hre(document.activeElement)&&this.focusContainer(),$w(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(n.type==="image"&&n.insertOnCanvasDirectly)??!1}),this.setState(s=>{const o={snapLines:s.snapLines.length?[]:s.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.scheduleCapture(),r.type==="lasso"?{...s,activeTool:r,...i?{}:{selectedElementIds:it({},s),selectedGroupIds:it({},s),editingGroupId:null,multiElement:null},...o}:r.type!=="selection"?{...s,activeTool:r,selectedElementIds:it({},s),selectedGroupIds:it({},s),editingGroupId:null,multiElement:null,...o}:{...s,activeTool:r,...o}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{It(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{Ds(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>Ut.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${L("labels.untitled")}-${oC()}`);F(this,"onGestureStart",on(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null}),Ut.initialScale=this.state.zoom.value}));F(this,"onGestureChange",on(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=Ut.initialScale;i&&this.setState(r=>({...Cu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Na(i*n.scale)},r)}))}));F(this,"onGestureEnd",on(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:it(this.state.previousSelectedElementIds,this.state)}),Ut.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:r=!0,container:s,autoEdit:o=!0})=>{let a=!1,l=r&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s);s&&l&&(Ne(s,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?ue(u[0])?c=u[0]:s?c=Ne(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Ac(d),h=this.state.currentItemFontSize;if(!c&&a&&s&&!Me(s)){const y=jF(pt({fontSize:h,fontFamily:d}),f),E=YF(h,f),w=Math.max(s.height,E),v=Math.max(s.width,y);this.scene.mutateElement(s,{height:w,width:v}),n=s.x+v/2,i=s.y+w/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||Yr({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?Fr.MIDDLE:db,containerId:a?s==null?void 0:s.id:void 0,groupIds:(s==null?void 0:s.groupIds)??[],lineHeight:f,angle:s?Me(s)?0:s.angle:0,frameId:m?m.id:null});if(!c&&a&&s&&this.scene.mutateElement(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(s&&a){const U=this.scene.getElementIndex(s.id);this.scene.insertElementAtIndex(p,U+1)}else this.scene.insertElement(p);o||c||s?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.scheduleCapture(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.scheduleCapture(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const i=this.scene.getSelectedElements(this.state);let{x:r,y:s}=Mt(n,this.state);if(i.length===1&&Ce(i[0])){if(n[H.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&!he(i[0])){this.store.scheduleCapture(),this.setState({editingLinearElement:new ce(i[0],this.scene.getNonDeletedElementsMap())});return}else if(this.state.selectedLinearElement&&he(i[0])){const a=ce.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),l=a?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.scheduleCapture(),ce.deleteFixedSegment(i[0],this.scene,l);const c=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),u=c?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}}if(i.length===1&&gt(i[0])){this.startImageCropping(i[0]);return}if(Ds(this.interactiveCanvas),Gu(this.state).length>0){const a=this.getElementAtPosition(r,s),l=a&&joe(a,this.state.selectedGroupIds);if(l){this.store.scheduleCapture(),this.setState(c=>({...c,...Li({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),c,this)}));return}}if(Ds(this.interactiveCanvas),!n[H.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const a=this.getElementAtPosition(r,s);if(cs(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}const l=this.getTextBindableContainerAtPosition(r,s);if(l&&(nr(l)||!Ys(l.backgroundColor)||hf({x:r,y:s,element:l,shape:Vs(l,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){const c=X8(l,this.state,this.scene.getNonDeletedElementsMap());r=c.x,s=c.y}this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:l})}});F(this,"getElementLinkAtPosition",(n,i)=>{if(i&&i.locked)return;const r=this.scene.getNonDeletedElements();let s=-1;for(let o=r.length-1;o>=0;o--){const a=r[o];if(i&&a.id===i.id&&(s=o),a.link&&o>=s&&ME(a,this.scene.getNonDeletedElementsMap(),this.state,S(n.x,n.y),this.device.editor.isMobile))return a}});F(this,"redirectToLink",(n,i)=>{const r=Je(S(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),S(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||r>uu)return;const s=Mt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=ME(this.hitLinkElement,o,this.state,S(s.x,s.y),this.device.editor.isMobile),l=Mt(this.lastPointerUpEvent,this.state),c=ME(this.hitLinkElement,o,this.state,S(l.x,l.y),this.device.editor.isMobile);if(a&&c){LR();let u=this.hitLinkElement.link;if(u){u=Gr(u);let d;if(this.props.onLinkOpen&&(d=UF(ee.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=_F(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(s=>CC(n,s,i));return r.length?r[r.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var m,p,U,y,E,w;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,Ut.pointers.has(n.pointerId)&&Ut.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=Ut.initialScale;if(Ut.pointers.size===2&&Ut.lastCenter&&i&&Ut.initialDistance){const v=QR(Ut.pointers),x=v.x-Ut.lastCenter.x,M=v.y-Ut.lastCenter.y;Ut.lastCenter=v;const _=JR(Array.from(Ut.pointers.values())),T=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:_/Ut.initialDistance,I=T?Na(i*T):this.state.zoom.value;this.setState(C=>{const R=Cu({viewportX:v.x,viewportY:v.y,nextZoom:I},C);this.translateCanvas({zoom:R.zoom,scrollX:R.scrollX+2*(x/I),scrollY:R.scrollY+2*(M/I),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Ut.lastCenter=Ut.initialDistance=Ut.initialScale=null;if(ou||o1||KE||Ph(this.state))return;const s=lk(a1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(s?Ds(this.interactiveCanvas):Eo(this.interactiveCanvas,this.state));const o=Mt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&wEe(this.state.activeTool.type)){const{originOffset:v,snapLines:x}=vEe(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(M=>{const _=jg(M.snapLines,x),T=M.originSnapOffset?jg(M.originSnapOffset,v):v;return M.snapLines===_&&M.originSnapOffset===T?null:{snapLines:_,originSnapOffset:T}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(v=>v.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const v=ce.handlePointerMove(n,a,l,this);v&&v!==this.state.editingLinearElement&&Sn.flushSync(()=>{this.setState({editingLinearElement:v})}),(v==null?void 0:v.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(o,v.elbowed):Sn.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(NF(this.state.activeTool.type)){const{newElement:v}=this.state;Ia(v,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(v,[o],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:v}=this.state,{x,y:M}=v,{points:_,lastCommittedPoint:T}=v,I=_[_.length-1];if(Eo(this.interactiveCanvas,this.state),I===T)Je(S(a-x,l-M),I)>=e2?this.scene.mutateElement(v,{points:[..._,S(a-x,l-M)]},{informMutation:!1,isDragging:!1}):It(this.interactiveCanvas,_t.POINTER);else if(_.length>2&&T&&Je(S(a-x,l-M),T)<e2)It(this.interactiveCanvas,_t.POINTER),this.scene.mutateElement(v,{points:_.slice(0,-1)},{informMutation:!1,isDragging:!1});else{const[C,R]=Rn(a,l,n[H.CTRL_OR_CMD]||he(v)?null:this.getEffectiveGridSize()),[N,k]=(v==null?void 0:v.lastCommittedPoint)??[0,0];let $=C-x-N,V=R-M-k;tm(n)&&({width:$,height:V}=H7(N+x,k+M,C,R)),el(_,this.state.zoom.value)&&It(this.interactiveCanvas,_t.POINTER),this.scene.mutateElement(v,{points:[..._.slice(0,-1),S(N+$,k+V)]},{isDragging:!0,informMutation:!1}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!s&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"&&!(d.length===1&&he(d[0]))){const v=gA(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(v&&v.transformHandleType){It(this.interactiveCanvas,pA(v));return}}}else if(d.length>1&&!s&&((p=this.state.openDialog)==null?void 0:p.name)!=="elementLinkSelector"){const v=mA(yt(d),a,l,this.state.zoom,n.pointerType,this.device);if(v){It(this.interactiveCanvas,pA({transformHandleType:v}));return}}const f=this.getElementAtPosition(a,l,{preferSelected:!0,includeLockedElements:!0});let h=null;f&&f.locked?h=null:h=f,this.hitLinkElement=this.getElementLinkAtPosition(o,f),!To(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(It(this.interactiveCanvas,_t.POINTER),H5e(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(LR(),h&&(h.link||dr(h))&&this.state.selectedElementIds[h.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?It(this.interactiveCanvas,ue(h)?_t.TEXT:_t.CROSSHAIR):this.state.viewModeEnabled?It(this.interactiveCanvas,_t.GRAB):((U=this.state.openDialog)==null?void 0:U.name)==="elementLinkSelector"?It(this.interactiveCanvas,_t.AUTO):s?It(this.interactiveCanvas,_t.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[H.CTRL_OR_CMD]?It(this.interactiveCanvas,_t.AUTO):(h||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(h!=null&&h.locked)&&(h&&cs(h)&&this.isIframeLikeElementCenter(h,n,a,l)?(It(this.interactiveCanvas,_t.POINTER),this.setState({activeEmbeddable:{element:h,state:"hover"}})):(!h||!he(h)||!(h.startBinding||h.endBinding))&&(It(this.interactiveCanvas,_t.MOVE),((y=this.state.activeEmbeddable)==null?void 0:y.state)==="hover"&&this.setState({activeEmbeddable:null})))),((E=this.state.openDialog)==null?void 0:E.name)==="elementLinkSelector"&&h?this.setState(v=>({hoveredElementIds:jg(v.hoveredElementIds,Li({editingGroupId:v.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),v,this).selectedElementIds)})):((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"&&!h&&this.setState(v=>({hoveredElementIds:jg(v.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i)=>{const r=this.eraserTrail.addPointToPath(i.x,i.y,n.altKey);this.elementsPendingErasure=new Set(r),this.triggerRender()});F(this,"handleTouchMove",n=>{l1=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches&&{focusedId:null,matches:m.searchMatches.matches.map(p=>({...p,focus:!1}))}})),this.updateEditorAtom(dj,null)),Or.get(Ea)&&this.updateEditorAtom(Ea,null),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:it(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,U)=>(p[U]=this.state.selectedElementIds[U],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?K.EVENTUALLY:K.NEVER});return}const r=document.getSelection();if(r!=null&&r.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=t2(this.device,{isTouchScreen:!0})),o1||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===Al.ERASER&&this.state.activeTool.type!==Zn.eraser){this.setState({activeTool:en(this.state,{type:Zn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),U==null||U(),To(this.state)&&this.setState({activeTool:en(this.state,{...this.state.activeTool.lastActiveTool||{type:Zn.selection},lastActiveToolBeforeEraser:null})})},p=sn(window,ee.POINTER_UP,m,{once:!0});let U;requestAnimationFrame(()=>{U=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==Al.MAIN&&n.button!==Al.TOUCH&&n.button!==Al.ERASER||Ut.pointers.size>1)return;const s=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,s)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,s))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="lasso")this.lassoTrail.startPath(s.origin.x,s.origin.y,n.shiftKey);else if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(n,s);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,s);else if(this.state.activeTool.type==="image"){It(this.interactiveCanvas,_t.CROSSHAIR);const m=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!m)return;this.setState({newElement:m,pendingImageElementId:null,multiElement:null});const{x:p,y:U}=Mt(n,this.state),y=this.getTopLayerFrameAtSceneCoords({x:p,y:U});this.scene.mutateElement(m,{x:p,y:U,frameId:y?y.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="custom"?Eo(this.interactiveCanvas,this.state):this.state.activeTool.type===Zn.frame||this.state.activeTool.type===Zn.magicframe?this.createFrameElementOnPointerDown(s,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(s.lastCoords.x,s.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,s);(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,s),this.onPointerDownEmitter.trigger(this.state.activeTool,s,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(s.lastCoords.x,s.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(s),l=this.onPointerUpFromPointerDownHandler(s),c=this.onKeyDownFromPointerDownHandler(s),u=this.onKeyUpFromPointerDownHandler(s);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(ee.POINTER_MOVE,a),window.addEventListener(ee.POINTER_UP,l),window.addEventListener(ee.KEYDOWN,c),window.addEventListener(ee.KEYUP,u),s.eventListeners.onMove=a,s.eventListeners.onUp=l,s.eventListeners.onKeyUp=u,s.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var s;this.removePointer(n),this.lastPointerUpEvent=n;const i=Mt({clientX:n.clientX,clientY:n.clientY},this.state),r=n.timeStamp-(((s=this.lastPointerDownEvent)==null?void 0:s.timeStamp)??0);if(this.device.editor.isMobile&&r<300){const o=this.getElementAtPosition(i.x,i.y);if(cs(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.device.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y,{includeLockedElements:!0});this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&cs(this.hitLinkElement)&&!Z$(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,S(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(l1=!1,xl?l1=!0:xl=window.setTimeout(()=>{xl=0,l1||this.handleCanvasContextMenu(n)},Rie))});F(this,"resetContextMenuTimer",()=>{clearTimeout(xl),xl=0,l1=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{au==null||au(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(Ut.pointers.size<=1&&(n.button===Al.WHEEL||n.button===Al.MAIN&&ou||Ph(this.state)||this.state.viewModeEnabled)))return!1;o1=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);It(this.interactiveCanvas,_t.GRABBING);let{clientX:s,clientY:o}=n;const a=zE(c=>{const u=s-c.clientX,d=o-c.clientY;if(s=c.clientX,o=c.clientY,r&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(ee.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(ee.PASTE,f),window.removeEventListener(ee.POINTER_UP,h)},100)};document.body.addEventListener(ee.PASTE,f),window.addEventListener(ee.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=on(au=()=>{au=null,o1=!1,ou||(this.state.viewModeEnabled?It(this.interactiveCanvas,_t.GRAB):Eo(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,a),window.removeEventListener(ee.POINTER_UP,l),window.removeEventListener(ee.BLUR,l),a.flush()});return window.addEventListener(ee.BLUR,l),window.addEventListener(ee.POINTER_MOVE,a,{passive:!0}),window.addEventListener(ee.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var r;if(this.state.activeTool.type==="selection"){const s=this.scene.getNonDeletedElements(),o=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!he(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=gA(s,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType))}else a.length>1&&(i.resize.handleType=mA(yt(a),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.device));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=js(nce(i.resize.handleType,a,o,i.origin.x,i.origin.y)),a.length===1&&Ce(a[0])&&a[0].points.length===2&&(i.resize.arrowDirection=ice(i.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const h=this.state.editingLinearElement||this.state.selectedLinearElement,m=ce.handlePointerDown(n,this,this.store,i.origin,h,this.scene);if(m.hitElement&&(i.hit.element=m.hitElement),m.linearElementEditor&&(this.setState({selectedLinearElement:m.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:m.linearElementEditor})),m.didAddPoint)return!0}const l=this.getElementsAtPosition(i.origin.x,i.origin.y,{includeLockedElements:!0}),c=l.filter(h=>!h.locked),u=this.getElementAtPosition(i.origin.x,i.origin.y,{allHitElements:l});if((!u||u.id!==this.state.activeLockedId)&&this.setState({activeLockedId:null}),u&&u.locked&&!c.some(h=>this.state.selectedElementIds[h.id])?i.hit.element=null:i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,u),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((r=i.hit.element)==null?void 0:r.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=c;const d=i.hit.element,f=i.hit.allHitElements.some(h=>this.isASelectedElement(h));if((d===null||!f)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(d),this.state.editingLinearElement)this.setState({selectedElementIds:it({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(d!=null){if(n[H.CTRL_OR_CMD])return n.altKey||(this.state.selectedElementIds[d.id]||(i.hit.wasAddedToSelection=!0),this.setState(h=>({...Xoe(h,d),previousSelectedElementIds:this.state.selectedElementIds}))),!1;this.state.selectedElementIds[d.id]||(this.state.editingGroupId&&!jm(d,this.state.editingGroupId)&&this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!f&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(h=>{var U;let m={...h.selectedElementIds,[d.id]:!0};const p=[];if(Object.keys(h.selectedElementIds).forEach(y=>{const E=this.scene.getElement(y);E&&p.push(E)}),Te(d))Ss(p,d.id).forEach(y=>{delete m[y.id]});else if(d.frameId)m[d.frameId]&&delete m[d.id];else{const y=d.groupIds,E=new Set(y.flatMap(w=>kt(this.scene.getNonDeletedElements(),w)).filter(w=>Te(w)).map(w=>w.id));E.size>0&&p.forEach(w=>{w.frameId&&E.has(w.frameId)&&(delete m[w.id],w.groupIds.flatMap(v=>kt(this.scene.getNonDeletedElements(),v)).forEach(v=>{delete m[v.id]}))})}return((U=h.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&(d.groupIds.some(y=>h.selectedGroupIds[y])||(m={[d.id]:!0})),{...Li({editingGroupId:h.editingGroupId,selectedElementIds:m},this.scene.getNonDeletedElements(),h,this),showHyperlinkPopup:d.link||dr(d)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let r=i.origin.x,s=i.origin.y;const o=this.getElementAtPosition(r,s,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(r,s);nr(o)&&(a=o,r=o.x+o.width/2,s=o.y+o.height/2),this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),Ds(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:en(this.state,{type:"selection"})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,r)=>{const[s,o]=Rn(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),l=n.pressure===.5,c=Dle({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[S(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:it(f,d)}});const u=Ws(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:r,height:s})=>{var c;const[o,a]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=Rle({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:s});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:r})=>{var c;const[s,o]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Pf(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:L("toast.unrecognizedLinkFormat"),closable:!0});const l=rA({type:"embeddable",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.insertElement(l),l});F(this,"createImageElement",({sceneX:n,sceneY:i,addToFrameUnderCursor:r=!0})=>{var c;const[s,o]=Rn(n,i,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=r?this.getTopLayerFrameAtSceneCoords({x:s,y:o}):null;return VB({type:"image",x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})});F(this,"handleLinearElementOnPointerDown",(n,i,r)=>{if(this.state.multiElement){const{multiElement:s}=this.state;if(s.type==="line"&&el(s.points,this.state.zoom.value)){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(ks);return}if(he(s)&&s.points.length>1){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(ks);return}const{x:o,y:a,lastCommittedPoint:l}=s;if(s.points.length>1&&l&&Je(S(r.origin.x-o,r.origin.y-a),l)<e2){this.actionManager.executeAction(ks);return}this.setState(c=>({selectedElementIds:it({...c.selectedElementIds,[s.id]:!0},c)})),this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),It(this.interactiveCanvas,_t.POINTER)}else{const[s,o]=Rn(r.origin.x,r.origin.y,n[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?eh({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===oi.round?{type:gn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===oi.elbow,fixedSegments:this.state.currentItemArrowType===oi.elbow?[]:null}):dc({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:gn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:it(p,m)}}),this.scene.mutateElement(f,{points:[...f.points,S(0,0)]});const h=Ws(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,he(f),he(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[r,s]=Rn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=rA({type:"embeddable",...a}):l=Zo({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[r,s]=Rn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:r,y:s,opacity:this.state.currentItemOpacity,locked:!1,...Pt},a=i===Zn.magicframe?X7(o):b9(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||Gt(r)&&this.elementsPendingErasure.has(r.containerId)?(n=!0,Ie(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,n&&(this.store.scheduleCapture(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async({imageFile:n,imageElement:i,showCursorImagePreview:r=!1})=>{var u,d,f,h;if(!Xu(n))throw new Error(L("errors.unsupportedFileType"));const s=n.type;if(It(this.interactiveCanvas,"wait"),s===ye.svg)try{n=vR(dA(await n.text()),n.name)}catch(m){throw console.warn(m),new Error(L("errors.svgImageInsertError"))}const o=await(((d=(u=this.props).generateIdForFile)==null?void 0:d.call(u,n))||G6e(n));if(!o)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(L("errors.imageInsertError"));const a=this.files[o];if(!(a!=null&&a.dataURL)){try{n=await I4(n,{maxWidthOrHeight:zie})}catch(m){console.error("Error trying to resizing image file on insertion",m)}if(n.size>Qx)throw new Error(L("errors.fileTooBig",{maxSize:`${Math.trunc(Qx/1024/1024)}MB`}))}if(r){const m=(f=this.files[o])==null?void 0:f.dataURL,p=m&&j6e(m);this.setImagePreviewCursor(p||n)}const l=((h=this.files[o])==null?void 0:h.dataURL)||await S4(n),c=this.scene.mutateElement(i,{fileId:o},{informMutation:!1,isDragging:!1});return new Promise(async(m,p)=>{var U;try{this.addMissingFiles([{mimeType:s,id:o,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}]);const y=this.imageCache.get(o);y||(this.addNewImagesToImageCache(),await this.updateImageCache([c])),(y==null?void 0:y.image)instanceof Promise&&await y.image,this.state.pendingImageElementId!==c.id&&((U=this.state.newElement)==null?void 0:U.id)!==c.id&&this.initializeImageDimensions(c,!0),m(c)}catch(y){console.error(y),p(new Error(L("errors.imageInsertError")))}finally{r||Ds(this.interactiveCanvas)}})});F(this,"insertImageElement",async(n,i,r)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:L("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{return await this.initializeImage({imageFile:i,imageElement:n,showCursorImagePreview:r})}catch(s){return this.scene.mutateElement(n,{isDeleted:!0}),this.actionManager.executeAction(ks),this.setState({errorMessage:s.message||L("errors.imageInsertError")}),null}});F(this,"setImagePreviewCursor",async n=>{let r;try{r=await I4(n,{maxWidthOrHeight:96})}catch(o){throw o.cause==="UNSUPPORTED"?new Error(L("errors.unsupportedFileType")):o}let s=await S4(r);if(n.type===ye.svg){const o=await jB(s);let a=Math.min(o.height,96),l=a*(o.width/o.height);l>96&&(l=96,a=l*(o.height/o.width));const c=document.createElement("canvas");c.height=a,c.width=l,c.getContext("2d").drawImage(o,0,0,l,a),s=c.toDataURL(ye.svg)}this.state.pendingImageElementId&&It(this.interactiveCanvas,`url(${s}) 4 4, auto`)});F(this,"onImageAction",async({insertOnCanvasDirectly:n})=>{try{const i=this.state.width/2+this.state.offsetLeft,r=this.state.height/2+this.state.offsetTop,{x:s,y:o}=Mt({clientX:i,clientY:r},this.state),a=await d_({description:"Image",extensions:Object.keys(wh)}),l=this.createImageElement({sceneX:s,sceneY:o,addToFrameUnderCursor:!1});n?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:it({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(ks)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(i){i.name!=="AbortError"?console.error(i):console.warn(i),this.setState({pendingImageElementId:null,newElement:null,activeTool:en(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(ks)})}});F(this,"initializeImageDimensions",(n,i=!1)=>{var s;const r=xn(n)&&((s=this.imageCache.get(n.fileId))==null?void 0:s.image);if(!r||r instanceof Promise){if(n.width<uu/this.state.zoom.value&&n.height<uu/this.state.zoom.value){const o=100/this.state.zoom.value;this.scene.mutateElement(n,{x:n.x-o/2,y:n.y-o/2,width:o,height:o})}return}if(i||n.width<uu/this.state.zoom.value&&n.height<uu/this.state.zoom.value){const o=Math.max(this.state.height-120,160),a=Math.min(o,Math.floor(this.state.height*.5)/this.state.zoom.value),l=Math.min(r.naturalHeight,a),c=l*(r.naturalWidth/r.naturalHeight),u=n.x+n.width/2-c/2,d=n.y+n.height/2-l/2;this.scene.mutateElement(n,{x:u,y:d,width:c,height:l,crop:null})}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:r,erroredFiles:s}=await YB({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});if(r.size||s.size)for(const o of n)r.has(o.fileId)&&$t.delete(o);return s.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(o=>xn(o)&&s.has(o.fileId)?Ie(o,{status:"error"}):o)),{updatedFiles:r,erroredFiles:s}});F(this,"addNewImagesToImageCache",async(n=WB(this.scene.getNonDeletedElements()),i=this.files)=>{const r=n.filter(s=>!s.isDeleted&&!this.imageCache.has(s.fileId));if(r.length){const{updatedFiles:s}=await this.updateImageCache(r,i);s.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",Do(()=>{this.addNewImagesToImageCache()},Aie));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=_ae(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const r=Ws(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:r!=null?[r]:[]})});F(this,"maybeSuggestBindingsForLinearElementAtCoords",(n,i,r)=>{if(!i.length)return;const s=i.reduce((o,a)=>{const l=Ws(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,he(n),he(n));return l!=null&&!vB(n,r==null?void 0:r.id,l)&&o.push(l),o},[]);this.setState({suggestedBindings:s})});F(this,"handleInteractiveCanvasRef",n=>{var i,r;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(ee.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(ee.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(ee.TOUCH_START,this.onTouchStart),(r=this.interactiveCanvas)==null||r.removeEventListener(ee.TOUCH_END,this.onTouchEnd))});F(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:i,fileHandle:r}=await K6e(n),{x:s,y:o}=Mt(n,this.state);try{if(Xu(i)&&this.isToolSupported("image")){if((i==null?void 0:i.type)===ye.png||(i==null?void 0:i.type)===ye.svg)try{const h=await p_(i,this.state,this.scene.getElementsIncludingDeleted(),r);this.syncActionResult({...h,appState:{...h.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY});return}catch(h){if(h.name!=="EncodingError")throw new Error(L("alerts.couldNotLoadInvalidFile"))}const f=this.createImageElement({sceneX:s,sceneY:o});this.insertImageElement(f,i),this.initializeImageDimensions(f),this.setState({selectedElementIds:it({[f.id]:!0},this.state)});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(ye.excalidrawlib);if(a&&typeof a=="string"){try{const f=lG(a);this.addElementsFromPasteOrLibrary({elements:zG(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(i&&await this.loadFileToCanvas(i,r),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&u2(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=Pf(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:s,sceneY:o,link:Gr(f)});h&&this.setState({selectedElementIds:{[h.id]:!0}})}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await U_(n);try{const r=this.scene.getElementsIncludingDeleted();let s;try{s=await aG(n,this.state,r,i)}catch(o){const a=o instanceof xu;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:L("errors.imageToolNotSupported")});return}const l=L(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!s)return;s.type===ye.excalidraw?(tl(r.concat(s.data.elements)),this.store.scheduleMicroAction({action:K.NEVER,elements:we(r),appState:void 0}),this.setState({isLoading:!0}),this.syncActionResult({...s.data,appState:{...s.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY})):s.type===ye.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:L("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==Al.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:i,y:r}=Mt(n,this.state),s=this.getElementAtPosition(i,r,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:r},o),l=s||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;lt("contextMenu","openContextMenu",l),this.setState({...s&&!this.state.selectedElementIds[s.id]?{...this.state,...Li({editingGroupId:this.state.editingGroupId,selectedElementIds:{[s.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:Ce(s)?new ce(s,this.scene.getNonDeletedElementsMap()):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,r=!0)=>{var m,p,U;const s=this.state.selectionElement,o=n.lastCoords;if(s&&this.state.activeTool.type!=="eraser"){iA({newElement:s,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Ni(n.origin.x,o.x),height:Ni(n.origin.y,o.y),shouldMaintainAspectRatio:Xg(i),shouldResizeFromCenter:!1,scene:this.scene,zoom:this.state.zoom.value,informMutation:!1});return}const a=this.state.newElement;if(!a)return;let[l,c]=Rn(o.x,o.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=xn(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=EEe(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((U=this.state.originSnapOffset)==null?void 0:U.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),iA({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Ni(n.originInGrid.x,l),height:Ni(n.originInGrid.y,c),shouldMaintainAspectRatio:gt(a)?!Xg(i):Xg(i),shouldResizeFromCenter:Jx(i),zoom:this.state.zoom.value,scene:this.scene,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:r}),this.setState({newElement:a}),(this.state.activeTool.type===Zn.frame||this.state.activeTool.type===Zn.magicframe)&&this.setState({elementsToHighlight:o2(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const r=n.resize.handleType,s=n.lastCoords,[o,a]=Rn(s.x-n.resize.offset.x,s.y-n.resize.offset.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(r&&l&&gt(l)){const u=n.originalElements.get(l.id),d=xn(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&gt(u)&&d&&!(d instanceof Promise)){const[f,h]=Rn(s.x,s.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:U}=rk([l],[u],this,i,m,r);this.scene.mutateElement(l,uoe(l,r,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),yr(l,this.scene,{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:r&&r!=="rotation",snapLines:U})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const r=this.scene.getSelectedElements(this.state),s=r.filter(d=>Te(d)),o=n.resize.handleType;if(s.length>0&&o==="rotation"||r.length===1&&he(r[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Rn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(s.forEach(d=>{Ss(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Rn(a.x,a.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,r);const{snapOffset:p,snapLines:U}=rk(r,ze(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:U})}if(Qle(n.originalElements,o,r,this.scene,tm(i),Jx(i),r.some(d=>gt(d))?!Xg(i):Xg(i),l,c,n.resize.center.x,n.resize.center.y)){const d=K8(r,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return s.forEach(h=>{o2(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];return i.push(AR,CR),n==="canvas"?this.state.viewModeEnabled?[...i,RR,C4,qR,A4]:[IR,Kn,AR,CR,MR,Kn,Vde,G5e,Kn,RR,k5e,C4,qR,A4]:(i.push(MR),this.state.viewModeEnabled?[T2,...i]:[Kn,xR,T2,IR,Kn,sEe,oEe,aEe,Kn,rEe,Kn,...i,Kn,E5e,v5e,Kn,_5e,uEe,L5e,D5e,P5e,T5e,Kn,C5e,Kn,Fde,Bde,zde,Hde,Kn,A5e,M5e,Kn,iEe,Kn,_G,AG,Kn,$de,TG,Kn,OH])});F(this,"handleWheel",on(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[H.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),o1)return;const{deltaX:i,deltaY:r}=n;if(n.metaKey||n.ctrlKey){const s=Math.sign(r),o=s5*100,a=Math.abs(r);let l=r;a>o&&(l=o*s);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-s*Math.min(1,a/20),this.translateCanvas(u=>({...Cu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Na(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:s,scrollX:o})=>({scrollX:o-(r||i)/s.value}));return}this.translateCanvas(({zoom:s,scrollX:o,scrollY:a})=>({scrollX:o-i/s.value,scrollY:a-r/s.value}))}));F(this,"savePointer",(n,i,r)=>{var l,c;if(!n||!i)return;const{x:s,y:o}=Mt({clientX:n,clientY:i},this.state),a={x:s,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:r,pointersMap:Ut.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",Za(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const r=this.excalidrawContainerRef.current,{width:s,height:o,left:a,top:l}=r.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(s===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:s,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=Qo(),{excalidrawAPI:r,viewModeEnabled:s=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${L("labels.untitled")}-${oC()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:s,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=DF(),this.library=new Fye(this),this.actionManager=new dEe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Vb,this.canvas=document.createElement("canvas"),this.rc=Yc.canvas(this.canvas),this.renderer=new dk(this.scene),this.visibleElements=[],this.store=new ple(this),this.history=new Ru(this.store),r){const d={updateScene:this.updateScene,mutateElement:this.mutateElement,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onIncrement:f=>this.store.onStoreIncrementEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof r=="function"?r(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Ga(this.scene),this.history=new Ru(this.store),this.actionManager.registerAll(d4),this.actionManager.registerAction(lEe(this.history)),this.actionManager.registerAction(cEe(this.history))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let r=null;const s=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!s)break;for(const o of s)o.contentWindow===n.source&&(r=o.contentWindow);r==null||r.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const r=i.id,s=i.info.playerState;Object.values(rU).includes(s)&&ZE.set(r,s)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var r,s,o,a;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===n&&((s=this.state.activeEmbeddable)==null?void 0:s.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Pl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=ZE.get(n.id);switch(l||(ZE.set(n.id,rU.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case rU.PLAYING:case rU.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,r,s){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&r>=n.x+n.width/3&&r<=n.x+2*n.width/3&&s>=n.y+n.height/3&&s<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,r=this.state.height,s=this.scene.getNonDeletedElements().filter(o=>dr(o)&&this.embedsValidationStatus.get(o.id)===!0||Pl(o));return g(ge,{children:s.map(o=>{var p,U,y,E,w,v,x,M,_;const{x:a,y:l}=Br({sceneX:o.x,sceneY:o.y},this.state),c=Bb(o,i,r,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Pl(o)){f=null;const T=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(T.status==="done"){const I=T.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>I}}else if(T.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>am(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Ae.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let I;T.code==="ERR_GENERATION_INTERRUPTED"?I="Generation was interrupted...":I=T.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>am(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${He.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${I}</h3>
                  `)}}}else f=Pf(zw(o.link||""));const h=((U=this.state.activeEmbeddable)==null?void 0:U.element)===o&&((y=this.state.activeEmbeddable)==null?void 0:y.state)==="active",m=((E=this.state.activeEmbeddable)==null?void 0:E.element)===o&&((w=this.state.activeEmbeddable)==null?void 0:w.state)==="hover";return g("div",{className:pe("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:cB(o,br(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?nF:1),"--embeddable-radius":`${Ji(Math.min(o.width,o.height),o)}px`},children:P("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?du.enabled:du.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:L("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(dr(o)?(M=(x=this.props).renderEmbeddable)==null?void 0:M.call(x,o,this.state):null)??g("iframe",{ref:T=>this.cacheEmbeddableRef(o,T),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(_=f==null?void 0:f.sandbox)!=null&&_.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var f,h,m,p,U,y,E,w,v;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderCustomStats:r}=this.props,s=this.scene.getSceneNonce(),{elementsMap:o,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:s,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(f=this.state.newElement)==null?void 0:f.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0],d=((h=Or.get(Ea))==null?void 0:h.type)==="panel";return g("div",{className:pe("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((m=this.state.openDialog)==null?void 0:m.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?du.disabled:du.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(Tj.Provider,{value:this,children:g(Sj.Provider,{value:this.props,children:g(N_.Provider,{value:this.excalidrawContainerValue,children:g(O_.Provider,{value:this.device,children:g(B_.Provider,{value:this.setAppState,children:g(F_.Provider,{value:this.state,children:P(P_.Provider,{value:this.scene.getNonDeletedElements(),children:[P(z_.Provider,{value:this.actionManager,children:[g(p4e,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:qm().code,renderTopRightUI:i,renderCustomStats:r,showExitZenModeBtn:typeof((p=this.props)==null?void 0:p.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(b4e,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),n.length===1&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(z5e,{element:u,scene:this.scene,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&s2(u)&&g(fk,{element:u,elementsMap:o,children:g(YE,{title:L("labels.convertToCode"),icon:SH,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&Pl(u)&&((E=(y=u.customData)==null?void 0:y.generationData)==null?void 0:E.status)==="done"&&P(fk,{element:u,elementsMap:o,children:[g(YE,{title:L("labels.copySource"),icon:sp,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),g(YE,{title:"Enter fullscreen",icon:pde,checked:!1,onChange:()=>{const x=this.getHTMLIFrameElement(u);if(x)try{x.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(M){console.warn(M),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(A4e,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(d3e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:x=>{this.setState({contextMenu:null},()=>{this.focusContainer(),x==null||x()})}}),g(T4e,{canvas:this.canvas,rc:this.rc,elementsMap:o,allElementsMap:l,visibleElements:a,sceneNonce:s,selectionNonce:(w=this.state.selectionElement)==null?void 0:w.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:p0(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(x4e,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:o,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(v4e,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:o,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:s,selectionNonce:(v=this.state.selectionElement)==null?void 0:v.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderScrollbars:this.props.renderScrollbars===!0,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(f3e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames(),this.state.activeLockedId&&g(M4e,{app:this,activeLockedId:this.state.activeLockedId}),d&&g(q5e,{app:this})]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const r=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}const s=o9(this.scene.getNonDeletedElements(),n).filter(l=>!s2(l));if(!s.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),lt("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),lt("ai","generate (start)","d2c");try{const{html:l}=await r({frame:n,children:s});if(lt("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){lt("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,r;((r=(i=n.customData)==null?void 0:i.generationData)==null?void 0:r.status)==="done"&&(qc(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(r=>{xn(r)&&i[r.fileId]&&(this.imageCache.delete(r.fileId),$t.delete(r))})}async componentDidMount(){var r;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onDurableIncrementEmitter.on(s=>{this.history.record(s.delta)});const{onIncrement:n}=this.props;n&&this.store.onStoreIncrementEmitter.on(s=>{n(s)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),y7&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(r=this.resizeObserver)==null||r.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),yie()&&!poe()&&this.setState({errorMessage:g(c3e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Vb,this.fonts=new Ga(this.scene),this.renderer=new dk(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),this.store.onDurableIncrementEmitter.clear(),$t.destroy(),Bs.destroy(),clearTimeout(xl),Gn.clearCache(),Li.clearCache(),xl=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(sn(document,ee.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(sn(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),sn(window,ee.MESSAGE,this.onWindowMessage,!1),sn(document,ee.POINTER_UP,this.removePointer,{passive:!1}),sn(document,ee.COPY,this.onCopy,{passive:!1}),sn(document,ee.KEYUP,this.onKeyUp,{passive:!0}),sn(document,ee.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),sn(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),sn(document,ee.GESTURE_START,this.onGestureStart,!1),sn(document,ee.GESTURE_CHANGE,this.onGestureChange,!1),sn(document,ee.GESTURE_END,this.onGestureEnd,!1),sn(window,ee.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(sn(document,ee.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),sn(document,ee.PASTE,this.pasteFromClipboard,{passive:!1}),sn(document,ee.CUT,this.onCut,{passive:!1}),sn(window,ee.RESIZE,this.onResize,!1),sn(window,ee.UNLOAD,this.onUnload,!1),sn(window,ee.BLUR,this.onBlur,!1),sn(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),sn(this.excalidrawContainerRef.current,ee.DRAG_OVER,this.disableEvent,!1),sn(this.excalidrawContainerRef.current,ee.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(sn(vre(this.excalidrawContainerRef.current),ee.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var c,u,d,f,h,m,p,U,y,E;this.updateEmbeddables();const r=this.scene.getElementsIncludingDeleted(),s=this.scene.getElementsMapIncludingDeleted(),o=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((u=(c=this.props)==null?void 0:c.onScrollChange)==null||u.call(c,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&To(this.state)&&this.setState({activeTool:en(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&qV(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),To(i)&&!To(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((d=i.openDialog)==null?void 0:d.name)==="elementLinkSelector"||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")&&((h=i.openDialog)==null?void 0:h.name)!==((m=this.state.openDialog)==null?void 0:m.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(p=this.excalidrawContainerRef.current)==null||p.classList.toggle("theme--dark",this.state.theme===Ae.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(ks)}),(U=this.state.editingTextElement)!=null&&U.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});const{multiElement:l}=i;i.activeTool!==this.state.activeTool&&l!=null&&Su(this.state)&&Ia(l,!1)&&N7(l,this.state,js(ce.getPointAtIndexGlobalCoordinates(l,-1,o)),this.scene),this.store.commit(s,this.state),this.state.isLoading||((E=(y=this.props).onChange)==null||E.call(y,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){s1=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:r,sceneY:s}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(o.map(async f=>{try{return{file:await W6e(f)}}catch(h){let m=h.message;return h.cause==="FETCH_ERROR"?m=L("errors.failedToFetchImage"):h.cause==="UNSUPPORTED"&&(m=L("errors.unsupportedFileType")),{errorMessage:m}}}));let l=s,c=!1;const u={};for(const f of a)if(f.file){const h=this.createImageElement({sceneX:r,sceneY:l}),m=await this.insertImageElement(h,f.file);m&&(c||(c=!0,l-=m.height/2),this.scene.mutateElement(m,{y:l},{informMutation:!1,isDragging:!1}),l=h.y+h.height+25,u[h.id]=!0)}this.setState({selectedElementIds:it(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:r,y:s}=Mt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:j0,verticalAlign:db,locked:!1},a=pt({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Ac(o.fontFamily),[c,,u]=MB(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=s;const m=i?[n]:n.split(`
`),p=m.reduce((U,y,E)=>{var v;const w=xh(y).trim();if(w.length){const x=this.getTopLayerFrameAtSceneCoords({x:r,y:h});let M=Vn(w,a,l);const _=M.width>d,T=_?Wc(w,a,d):w;M=_?Vn(T,a,l):M;const I=r-M.width/2,C=h-M.height/2,R=Yr({...o,x:I,y:C,text:T,originalText:w,lineHeight:l,autoResize:!_,frameId:x?x.id:null});U.push(R),h+=R.height+f}else((v=m[E-1])==null?void 0:v.trim())&&(h+=Q0(o.fontSize,l)+f);return U},[]);p.length!==0&&(this.scene.insertElements(p),this.setState({selectedElementIds:it(Object.fromEntries(p.map(U=>[U.id,!0])),this.state)}),!i&&p.length>1&&zk===!1&&!this.device.editor.isMobile&&(this.setToast({message:L("toast.pasteAsSingleElement",{shortcut:Q("CtrlOrCmd+Shift+V")}),duration:5e3}),zk=!0),this.store.scheduleCapture())}handleTextWysiwyg(n,{isExistingElement:i=!1}){const r=this.scene.getElementsMapIncludingDeleted(),s=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&ue(l)?Ie(l,{originalText:o,isDeleted:a??l.isDeleted,...HB(l,$n(l,r),r,o)}):l)])};QEe({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=Br({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:on(o=>{s(o,!1),Q7(n)&&yr(n,this.scene)}),onSubmit:on(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(s(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;Sn.flushSync(()=>{this.setState(u=>({selectedElementIds:it({...u.selectedElementIds,[c]:!0},u)}))})}l&&TB(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.scheduleCapture(),Sn.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Eo(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),s(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const r=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return r&&ue(r)&&!r.isDeleted?r:null}getElementAtPosition(n,i,r){let s=[];if(r&&"allHitElements"in r?s=(r==null?void 0:r.allHitElements)||[]:s=this.getElementsAtPosition(n,i,{includeBoundTextElement:r==null?void 0:r.includeBoundTextElement,includeLockedElements:r==null?void 0:r.includeLockedElements}),s.length>1){if(r!=null&&r.preferSelected){for(let a=s.length-1;a>-1;a--)if(this.state.selectedElementIds[s[a].id])return s[a]}const o=s[s.length-1];return hf({x:n,y:i,element:o,shape:Vs(o,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:Te(o)?this.frameNameBoundsCache.get(o):null})?o:s[s.length-2]}return s.length===1?s[0]:null}getElementsAtPosition(n,i,r){const s=[],o=this.scene.getNonDeletedElementsMap();return(r!=null&&r.includeBoundTextElement&&(r!=null&&r.includeLockedElements)?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(l=>((r==null?void 0:r.includeLockedElements)||!l.locked)&&((r==null?void 0:r.includeBoundTextElement)||!(ue(l)&&l.containerId)))).filter(l=>this.hitElement(n,i,l)).filter(l=>{const c=br(l,o);return c&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?CC({x:n,y:i},c,o):!0}).filter(l=>Pl(l)?(s.push(l),!1):!0).concat(s)}getElementHitThreshold(){return Sie/this.state.zoom.value}hitElement(n,i,r,s=!0){if(s&&this.state.selectedElementIds[r.id]&&QB([r],this.state)){const a=Ece(r,this.scene.getNonDeletedElementsMap(),gt(r)?0:this.getElementHitThreshold());if(Zm(S(n,i),a))return!0}return HF(n,i,SB(r,this.scene.getNonDeletedElementsMap()))?!0:hf({x:n,y:i,element:r,shape:Vs(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Te(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(n,i){const r=this.scene.getNonDeletedElements(),s=this.scene.getSelectedElements(this.state);if(s.length===1)return $u(s[0],!1)?s[0]:null;let o=null;for(let a=r.length-1;a>=0;--a){if(r[a].isDeleted)continue;const[l,c,u,d]=Oe(r[a],this.scene.getNonDeletedElementsMap());if(Me(r[a])&&hf({x:n,y:i,element:r[a],shape:Vs(r[a],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){o=r[a];break}else if(l<n&&n<u&&c<i&&i<d){o=r[a];break}}return $u(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,r){const s=this.scene.getNonDeletedElementsMap(),o=ce.getElement(n.elementId,s);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;hf({x:i,y:r,element:o,shape:Vs(o,this.scene.getNonDeletedElementsMap())})?(a=ce.getPointIndexUnderCursor(o,s,this.state.zoom,i,r),l=ce.getSegmentMidpointHitCoords(n,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),(he(o)?a===0||a===o.points.length-1:a>=0)||l?It(this.interactiveCanvas,_t.POINTER):this.hitElement(i,r,o)&&(!he(o)||!(o.startBinding||o.endBinding))&&It(this.interactiveCanvas,_t.MOVE)):this.hitElement(i,r,o)&&(!he(o)||!(o.startBinding||o.endBinding))&&It(this.interactiveCanvas,_t.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),ce.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else It(this.interactiveCanvas,_t.AUTO)}updateGestureOnPointerDown(n){Ut.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),Ut.pointers.size===2&&(Ut.lastCenter=QR(Ut.pointers),Ut.initialScale=this.state.zoom.value,Ut.initialDistance=JR(Array.from(Ut.pointers.values())))}initialPointerDownState(n){const i=Mt(n,this.state),r=this.scene.getSelectedElements(this.state),[s,o,a,l]=yt(r),c=r.findIndex(he)===0;return{origin:i,withCmdOrCtrl:n[H.CTRL_OR_CMD],originInGrid:js(Rn(i.x,i.y,n[H.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:lk(a1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,Lc(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+s)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,r)},drag:{hasOccurred:!1,offset:null,origin:{...i}},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;KE=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const r=zE(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),s=on(()=>{au=null,KE=!1,Eo(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,r),window.removeEventListener(ee.POINTER_UP,s),r.flush()});return au=s,window.addEventListener(ee.POINTER_MOVE,r),window.addEventListener(ee.POINTER_UP,s),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const r=this.getElementHitThreshold(),[s,o,a,l]=yt(i);return n.x>s-r&&n.x<a+r&&n.y>o-r&&n.y<l+r}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:Dd(n)?gn.ADAPTIVE_RADIUS:gn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,r=!1){Pc({event:n,app:this,selectedElements:i})&&(r||!Bs.getReferenceSnapPoints())&&Bs.setReferenceSnapPoints(pEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,r=!1){Pc({event:n,app:this,selectedElements:i})&&(r||!Bs.getVisibleGaps())&&Bs.setVisibleGaps(mEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return on(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return on(i=>{i.key===H.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return zE(i=>{var f,h,m,p,U,y;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const r=Mt(i,this.state);if(this.state.activeLockedId&&this.setState({activeLockedId:null}),this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[E,w]=Rn(r.x,r.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let v=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(v<0){const M=ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:E,y:w},this.state,this.scene.getNonDeletedElementsMap());v=M?ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,M,this.scene.getNonDeletedElementsMap()):-1}const x=ce.moveFixedSegment(this.state.selectedLinearElement,v,E,w,this.scene);Sn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:x.segmentMidPointHoveredCoords,pointerDownState:x.pointerDownState}})});return}const s=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=r,n.drag.offset===null&&(n.drag.offset=js(Ale(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(To(this.state)){this.handleEraser(i,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);const[a,l]=Rn(r.x,r.y,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&Je(S(r.x,r.y),S(n.origin.x,n.origin.y))<uu)return;if(n.resize.isResizing&&(n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const E=this.state.editingLinearElement||this.state.selectedLinearElement;if(ce.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,c)){const v=ce.addMidpoint(this.state.selectedLinearElement,r,this,!i[H.CTRL_OR_CMD],this.scene);if(!v)return;Sn.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:v.pointerDownState,selectedPointsIndices:v.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:v.pointerDownState,selectedPointsIndices:v.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(E.pointerDownState.segmentMidpoint.value!==null&&!E.pointerDownState.segmentMidpoint.added)return;const w=ce.handlePointDragging(i,this,r.x,r.y,(v,x)=>{this.maybeSuggestBindingsForLinearElementAtCoords(v,x)},E,this.scene);if(w){n.lastCoords.x=r.x,n.lastCoords.y=r.y,n.drag.hasOccurred=!0,this.setState({editingLinearElement:this.state.editingLinearElement?w:null,selectedLinearElement:w});return}}const u=n.hit.allHitElements.some(E=>this.isASelectedElement(E)),d=this.state.editingLinearElement&&i.shiftKey&&this.state.editingLinearElement.elementId===((h=n.hit.element)==null?void 0:h.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d&&this.state.activeTool.type!=="lasso"){const E=this.scene.getSelectedElements(this.state);if(E.every(M=>M.locked))return;const w=E.find(M=>Te(M)),v=this.getTopLayerFrameAtSceneCoords(r),x=v&&!w?v:null;if(this.state.frameToHighlight!==x&&Sn.flushSync(()=>{this.setState({frameToHighlight:x})}),n.drag.hasOccurred=!0,E.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((m=this.state.activeEmbeddable)==null?void 0:m.state)!=="active"){const M={x:r.x-n.drag.origin.x,y:r.y-n.drag.origin.y},_=[...n.originalElements.values()],T=i.shiftKey;if(T){const R=Math.abs(M.x),N=Math.abs(M.y),k=T&&R<N,$=T&&R>N;k&&(M.x=0),$&&(M.y=0)}if(this.state.croppingElementId){const R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&gt(R)&&R.crop!==null&&n.hit.element===R){const N=R.crop,k=xn(R)&&((p=this.imageCache.get(R.fileId))==null?void 0:p.image);if(k&&!(k instanceof Promise)){const $=xt(Nn(r.x-s.x,r.y-s.y),Math.max(this.state.zoom.value,2)),[V,z,G,j,X,q]=Oe(R,c),fe=se(Z(S(V,z),S(X,q),R.angle)),ie=se(Z(S(G,z),S(X,q),R.angle)),Ue=se(Z(S(V,j),S(X,q),R.angle)),Ve=Bn(Ub(ie,fe)),$e=Bn(Ub(Ue,fe)),nt=Nn(tC($,Ve),tC($,$e)),zt={...N,x:Xe(N.x-nt[0]*Math.sign(R.scale[0]),0,k.naturalWidth-N.width),y:Xe(N.y-nt[1]*Math.sign(R.scale[1]),0,k.naturalHeight-N.height)};this.scene.mutateElement(R,{crop:zt});return}}}this.maybeCacheVisibleGaps(i,E),this.maybeCacheReferenceSnapPoints(i,E);const{snapOffset:I,snapLines:C}=UEe(_,M,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:C}),this.state.editingFrame||xle(n,E,M,this.scene,I,i[H.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(E.length!==1||!he(E[0]))&&this.setState({suggestedBindings:K8(E,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const R=this.scene.getElementsIncludingDeleted(),N=n.hit.element,k=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});N&&n.hit.wasAddedToSelection&&!k.find(ie=>ie.id===N.id)&&k.push(N);const $=new Map(k.map(ie=>[ie.id,ie])),{duplicatedElements:V,duplicateElementsMap:z,elementsWithDuplicates:G,origIdToDuplicateId:j}=zb({type:"in-place",elements:R,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:$,overrides:({duplicateElement:ie,origElement:Ue})=>({frameId:ie.frameId??Ue.frameId,seed:Yo()})});V.forEach(ie=>{n.originalElements.set(ie.id,Lc(ie))});const X=G.map(ie=>{if($.has(ie.id)){const Ue=n.originalElements.get(ie.id);if(Ue)return Ie(ie,{x:Ue.x,y:Ue.y})}return ie}),q=(y=(U=this.props).onDuplicate)==null?void 0:y.call(U,X,R),fe=oo(q||X,we(V));Sn.flushSync(()=>{if(n.hit.element){const ie=j.get(n.hit.element.id),Ue=ie&&z.get(ie);n.hit.element=Ue||null}n.hit.allHitElements=n.hit.allHitElements.reduce((ie,Ue)=>{const Ve=j.get(Ue.id),$e=Ve&&z.get(Ve);return $e&&ie.push($e),ie},[]),n.drag.origin=Mt(i,this.state),this.setState(ie=>({...eB(V,this.scene.getNonDeletedElements(),ie)})),this.scene.replaceAllElements(fe),this.maybeCacheVisibleGaps(i,k,!0),this.maybeCacheReferenceSnapPoints(i,k,!0)})}return}}if(this.state.selectionElement)n.lastCoords.x=r.x,n.lastCoords.y=r.y,i.altKey?Sn.flushSync(()=>{this.setActiveTool({type:"lasso",fromSelection:!0},i.shiftKey),this.lassoTrail.startPath(n.origin.x,n.origin.y,i.shiftKey),this.setAppState({selectionElement:null})}):this.maybeDragNewGenericElement(n,i);else if(this.state.activeTool.type==="lasso")!i.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",n),n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(r.x,r.y,i.shiftKey);else{const E=this.state.newElement;if(!E)return;if(E.type==="freedraw"){const w=E.points,v=r.x-E.x,x=r.y-E.y,M=w.length>0&&w[w.length-1];if(!(M&&M[0]===v&&M[1]===x)){const T=E.simulatePressure?E.pressures:[...E.pressures,i.pressure];this.scene.mutateElement(E,{points:[...w,S(v,x)],pressures:T},{informMutation:!1,isDragging:!1}),this.setState({newElement:E})}}else if(Ce(E)){n.drag.hasOccurred=!0;const w=E.points;let v=a-E.x,x=l-E.y;tm(i)&&w.length===2&&({width:v,height:x}=H7(E.x,E.y,r.x,r.y)),w.length===1?this.scene.mutateElement(E,{points:[...w,S(v,x)]},{informMutation:!1,isDragging:!1}):(w.length===2||w.length>1&&he(E))&&this.scene.mutateElement(E,{points:[...w.slice(0,-1),S(v,x)]},{isDragging:!0,informMutation:!1}),this.setState({newElement:E}),Ia(E,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(E,[r],this.state.startBoundElement)}else n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const E=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)ce.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let w=!0;!i.shiftKey&&Gn(E,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(x=>Li({...x,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),x,this)):w=!1);const v=this.state.selectionElement?e9(E,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(x=>{const M={...w&&x.selectedElementIds,...v.reduce((_,T)=>(_[T.id]=!0,_),{})};return n.hit.element&&(v.length?delete M[n.hit.element.id]:M[n.hit.element.id]=!0),x=w?x:{...x,selectedGroupIds:{},editingGroupId:null},{...Li({editingGroupId:x.editingGroupId,selectedElementIds:M},this.scene.getNonDeletedElements(),x,this),selectedLinearElement:v.length===1&&Ce(v[0])?new ce(v[0],this.scene.getNonDeletedElementsMap()):null,showHyperlinkPopup:v.length===1&&(v[0].link||dr(v[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){var r,s;if(i.scrollbars.isOverHorizontal){const o=n.clientX,a=o-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-a*(((r=a1.horizontal)==null?void 0:r.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.x=o,!0}if(i.scrollbars.isOverVertical){const o=n.clientY,a=o-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-a*(((s=a1.vertical)==null?void 0:s.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.y=o,!0}return!1}onPointerUpFromPointerDownHandler(n){return on(i=>{var y,E,w,v,x,M,_,T,I,C,R,N;this.removePointer(i),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:r,resizingElement:s,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState(k=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:jg(k.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Bs.setReferenceSnapPoints(null),Bs.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up");const f=n.hit.allHitElements;if(this.state.activeTool.type==="selection"&&!n.boxSelection.hasOccurred&&!n.resize.isResizing&&!f.some(k=>this.state.selectedElementIds[k.id])){const k=Mt({clientX:i.clientX,clientY:i.clientY},this.state),$=this.getElementAtPosition(k.x,k.y,{includeLockedElements:!0});this.store.scheduleCapture(),$!=null&&$.locked?this.setState({activeLockedId:$.groupIds.length>0?$.groupIds.at(-1)||"":$.id}):this.setState({activeLockedId:null})}else this.setState({activeLockedId:null});this.setState({selectedElementsAreBeingDragged:!1});const h=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((E=(y=n.hit)==null?void 0:y.element)!=null&&E.id)){const k=h.get(n.hit.element.id);ro(k)&&((w=k.boundElements)==null||w.filter($=>$.type==="arrow").map($=>h.get($.id)).filter($=>he($)).forEach($=>{$&&this.scene.mutateElement($,{})}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((x=(v=n.hit)==null?void 0:v.element)==null?void 0:x.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(ks);else{const k=ce.handlePointerUp(i,this.state.editingLinearElement,this.state,this.scene);k!==this.state.editingLinearElement&&this.setState({editingLinearElement:k,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const k=ce.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());k&&this.scene.mutateElement(k,{})}if(((_=(M=n.hit)==null?void 0:M.element)==null?void 0:_.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{const k=ce.handlePointerUp(i,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:$,endBindingElement:V}=k,z=this.scene.getElement(k.elementId);Ia(z)&&y5(z,$,V,this.scene),k!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...k,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(ee.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(ee.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(ee.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(ee.KEYUP,n.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(I=(T=this.props)==null?void 0:T.onPointerUp)==null||I.call(T,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(r==null?void 0:r.type)==="freedraw"){const k=Mt(i,this.state),$=r.points;let V=k.x-r.x,z=k.y-r.y;V===$[0][0]&&z===$[0][1]&&(z+=1e-4,V+=1e-4);const G=r.simulatePressure?[]:[...r.pressures,i.pressure];this.scene.mutateElement(r,{points:[...$,S(V,z)],pressures:G,lastCommittedPoint:S(V,z)}),this.actionManager.executeAction(ks);return}if(gt(r)){const k=r;try{this.initializeImageDimensions(k),this.setState({selectedElementIds:it({[k.id]:!0},this.state)},()=>{this.actionManager.executeAction(ks)})}catch($){console.error($),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(V=>V.id!==k.id)),this.actionManager.executeAction(ks)}return}if(Ce(r)){r.points.length>1&&this.store.scheduleCapture();const k=Mt(i,this.state);!n.drag.hasOccurred&&r&&!a?(this.scene.mutateElement(r,{points:[...r.points,S(k.x-r.x,k.y-r.y)]},{informMutation:!1,isDragging:!1}),this.setState({multiElement:r,newElement:r})):n.drag.hasOccurred&&!a&&(Su(this.state)&&Ia(r,!1)&&N7(r,this.state,k,this.scene),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState($=>({newElement:null})):(Ds(this.interactiveCanvas),this.setState($=>({newElement:null,activeTool:en(this.state,{type:"selection"}),selectedElementIds:it({...$.selectedElementIds,[r.id]:!0},$),selectedLinearElement:new ce(r,this.scene.getNonDeletedElementsMap())}))),this.scene.triggerUpdate());return}if(ue(r)){const k=Ww(pt({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<k&&this.scene.mutateElement(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(l.type!=="selection"&&r&&dd(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(k=>k.id!==r.id),appState:{newElement:null},captureUpdate:K.NEVER});return}if(Te(r)){const k=eae(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(rm(this.scene.getElementsMapIncludingDeleted(),k,r,this.state))}if(r&&(this.scene.mutateElement(r,RB(r),{informMutation:!1,isDragging:!1}),this.scene.triggerUpdate()),n.drag.hasOccurred){const k=Mt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const $=this.scene.getElement(this.state.selectedLinearElement.elementId);if($!=null&&$.frameId){const V=br($,h);V&&$&&(kc($,V,this.scene.getNonDeletedElementsMap())||(this.scene.mutateElement($,{groupIds:[]}),p5([$],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const $=this.getTopLayerFrameAtSceneCoords(k),V=this.scene.getSelectedElements(this.state);let z=this.scene.getElementsMapIncludingDeleted();const G=j=>{if(j.length>0){for(const X of j){const q=X.groupIds.indexOf(this.state.editingGroupId);this.scene.mutateElement(X,{groupIds:X.groupIds.slice(0,q)},{informMutation:!1,isDragging:!1})}z.forEach(X=>{X.groupIds.length&&kt(z,X.groupIds[X.groupIds.length-1]).length<2&&this.scene.mutateElement(X,{groupIds:[]},{informMutation:!1,isDragging:!1})}),this.setState({editingGroupId:null})}};if($&&!this.state.selectedElementIds[$.id]){const j=V.filter(X=>X.frameId!==$.id&&Ab(X,z,this.state));this.state.editingGroupId&&G(j),z=rm(z,j,$,this.state)}else if(!$&&this.state.editingGroupId){const j=V.filter(X=>X.frameId&&!Ab(X,z,this.state));G(j)}z=Ah(z,this.state,this),this.scene.replaceAllElements(z)}}if(s&&this.store.scheduleCapture(),s&&dd(s)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(k=>k.id!==s.id),captureUpdate:K.NEVER}),n.resize.isResizing){let k=Ah(this.scene.getElementsIncludingDeleted(),this.state,this);const $=this.scene.getSelectedElements(this.state).filter(V=>Te(V));for(const V of $)k=iB(k,o2(this.scene.getElementsIncludingDeleted(),V,this.state,h),V,this);this.scene.replaceAllElements(k)}const m=n.hit.element;((C=this.state.selectedLinearElement)==null?void 0:C.elementId)!==(m==null?void 0:m.id)&&Ce(m)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new ce(m,this.scene.getNonDeletedElementsMap())}),(!o||o&&(!m&&!d||m&&m.id!==o))&&this.finishImageCropping();const p=this.lastPointerDownEvent,U=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(To(this.state)&&p&&U){if(this.eraserTrail.endPath(),Je(S(p.clientX,p.clientY),S(U.clientX,U.clientY))===0){const $=Mt({clientX:U.clientX,clientY:U.clientY},this.state);this.getElementsAtPosition($.x,$.y).forEach(z=>this.elementsPendingErasure.add(z.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(m&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&this.state.activeTool.type!=="lasso"&&(i.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[m.id]?ZF(this.state,m)?this.setState(k=>{const $={...k.selectedElementIds};for(const V of m.groupIds.flatMap(z=>kt(this.scene.getNonDeletedElements(),z)))delete $[V.id];return{selectedGroupIds:{...k.selectedElementIds,...m.groupIds.map(V=>({[V]:!1})).reduce((V,z)=>({...V,...z}),{})},selectedElementIds:it($,k)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(k=>{const $={...k.selectedElementIds};delete $[m.id];const V=ze(this.scene.getNonDeletedElements(),{selectedElementIds:$});return{...Li({editingGroupId:k.editingGroupId,selectedElementIds:$},this.scene.getNonDeletedElements(),k,this),selectedLinearElement:V.length===1&&Ce(V[0])?new ce(V[0],this.scene.getNonDeletedElementsMap()):k.selectedLinearElement}}):m.frameId&&this.state.selectedElementIds[m.frameId]?this.setState(k=>{var V;const $={...k.selectedElementIds,[m.id]:!0};return delete $[m.frameId],(((V=this.scene.getElement(m.frameId))==null?void 0:V.groupIds)??[]).flatMap(z=>kt(this.scene.getNonDeletedElements(),z)).forEach(z=>{delete $[z.id]}),{...Li({editingGroupId:k.editingGroupId,selectedElementIds:$},this.scene.getNonDeletedElements(),k,this),showHyperlinkPopup:m.link||dr(m)?"info":!1}}):this.setState(k=>({selectedElementIds:it({...k.selectedElementIds,[m.id]:!0},k)})):this.setState(k=>{var $;return{...Li({editingGroupId:k.editingGroupId,selectedElementIds:{[m.id]:!0}},this.scene.getNonDeletedElements(),k,this),selectedLinearElement:Ce(m)&&(($=k.selectedLinearElement)==null?void 0:$.elementId)!==m.id?new ce(m,this.scene.getNonDeletedElementsMap()):k.selectedLinearElement}})),this.state.activeTool.type!=="lasso"&&!(m&&he(m))&&!n.drag.hasOccurred&&!this.state.isResizing&&(m&&jse({x:n.origin.x,y:n.origin.y,element:m,shape:Vs(m,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Te(m)?this.frameNameBoundsCache.get(m):null},h)||!m&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),It(this.interactiveCanvas,_t.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&r&&this.setState(k=>({selectedElementIds:it({...k.selectedElementIds,[r.id]:!0},k),showHyperlinkPopup:dr(r)&&!r.link?"editor":k.showHyperlinkPopup})),(l.type!=="selection"||Gn(this.scene.getNonDeletedElements(),this.state)||!Hi(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.scheduleCapture(),n.drag.hasOccurred||c||u||d){const k=this.scene.getSelectedElements(this.state).filter(Ce);Rb(k,Su(this.state),((N=this.state.selectedLinearElement)==null?void 0:N.selectedPointsIndices)??[],this.scene,this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"&&(l.type!=="lasso"||l.type==="lasso"&&l.fromSelection)?(Ds(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:en(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),m&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Ut.pointers.size<=1&&cs(m)&&this.isIframeLikeElementCenter(m,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(m)})}clearSelection(n){this.setState(i=>({selectedElementIds:it({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&jm(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,r,s){if(s){let o=s.x+s.width/2,a=s.y+s.height/2;const l=X8(s,r,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<wie){const{x:d,y:f}=Br({sceneX:o,sceneY:a},r);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:r,top:s}=i.getBoundingClientRect();return{offsetLeft:r,offsetTop:s}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=S5.find(i=>i.code===this.props.langCode)||Od;await rH(n),this.setAppState({})}}const R4e=e=>{const[t,n]=D.useState(!0);return D.useEffect(()=>{const i=async()=>{await rH(r),n(!1)},r=S5.find(s=>s.code===e.langCode)||Od;i()},[e.langCode]),t?g(hX,{theme:e.theme}):e.children},xj=({children:e})=>{const{FooterCenterTunnel:t}=or(),n=Ii();return g(t.In,{children:g("div",{className:pe("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};xj.displayName="FooterCenter";const k4e=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),L4e=()=>P("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),Cj=({style:e,size:t="small",withText:n})=>P("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(k4e,{}),n&&g(L4e,{})]}),V_=({icon:e,shortcut:t,children:n})=>{const i=ii();return P(ge,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};V_.displayName="WelcomeScreenMenuItemContent";const gp=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(V_,{icon:n,shortcut:i,children:t})});gp.displayName="WelcomeScreenMenuItem";const Aj=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noopener",children:g(V_,{icon:n,shortcut:i,children:e})});Aj.displayName="WelcomeScreenMenuItemLink";const mo=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=or();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||P(ge,{children:[g($_,{}),g(G_,{children:L("welcomeScreen.defaults.center_heading")}),P(X_,{children:[g(Y_,{}),g(j_,{})]})]})})})};mo.displayName="Center";const $_=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(Cj,{withText:!0})});$_.displayName="Logo";const G_=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});G_.displayName="Heading";const X_=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});X_.displayName="Menu";const j_=()=>{const e=Tr();return g(gp,{onSelect:()=>e.executeAction(E_),shortcut:"?",icon:R9,children:L("helpDialog.title")})};j_.displayName="MenuItemHelp";const Y_=()=>{const e=Ii(),t=Tr();return e.viewModeEnabled?null:g(gp,{onSelect:()=>t.executeAction(x4),shortcut:Vi("loadScene"),icon:L9,children:L("buttons.load")})};Y_.displayName="MenuItemLoadScene";const Mj=({onSelect:e})=>{const{t}=wn();return g(gp,{shortcut:null,onSelect:e,icon:D9,children:t("labels.liveCollaboration")})};Mj.displayName="MenuItemLiveCollaborationTrigger";mo.Logo=$_;mo.Heading=G_;mo.Menu=X_;mo.MenuItem=gp;mo.MenuItemLink=Aj;mo.MenuItemHelp=j_;mo.MenuItemLoadScene=Y_;mo.MenuItemLiveCollaborationTrigger=Mj;const W_=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=or();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[nue,g("div",{className:"welcome-screen-decor-hint__label",children:e||L("welcomeScreen.defaults.menuHint")})]})})};W_.displayName="MenuHint";const K_=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=or();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||L("welcomeScreen.defaults.toolbarHint")}),rue]})})};K_.displayName="ToolbarHint";const Z_=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=or();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||L("welcomeScreen.defaults.helpHint")}),iue]})})};Z_.displayName="HelpHint";const Cr=e=>g(ge,{children:e.children||P(ge,{children:[g(mo,{}),g(W_,{}),g(K_,{}),g(Z_,{})]})});Cr.displayName="WelcomeScreen";Cr.Center=mo;Cr.Hints={MenuHint:W_,ToolbarHint:K_,HelpHint:Z_};const Rj=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},D4e=(e,t,n)=>{var i,r,s;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((r=e.resizingElement)==null?void 0:r.id)||t.id===((s=e.newElement)==null?void 0:s.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},O4e=Do((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const i=tl(e.map(r=>({...r})));p9(i,{shouldThrow:pF(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),q_=(e,t,n)=>{const i=we(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=D4e(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=U9(r);return O4e(o,e,t),tl(o),o},kj=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=or(),i=Yn();return g(n.In,{children:P(Qe.Item,{onSelect:()=>{lt("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??bde,children:[e??L("labels.textToDiagram"),g(Qe.Item.Badge,{children:"AI"})]})})};kj.displayName="TTDDialogTrigger";const N4e=e=>{const t=go();return D.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};Rj();const P4e=e=>{var q,fe,ie,Ue;const{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s=!1,onPointerUpdate:o,renderTopRightUI:a,langCode:l=Od.code,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,onPaste:U,detectScroll:y=!0,handleKeyboardGlobally:E=!1,onLibraryChange:w,autoFocus:v=!1,generateIdForFile:x,onLinkOpen:M,generateLinkForSelection:_,onPointerDown:T,onPointerUp:I,onScrollChange:C,onDuplicate:R,children:N,validateEmbeddable:k,renderEmbeddable:$,aiEnabled:V,showDeprecatedFonts:z,renderScrollbars:G}=e,j=(q=e.UIOptions)==null?void 0:q.canvasActions,X={...e.UIOptions,canvasActions:{...qx.canvasActions,...j},tools:{image:((ie=(fe=e.UIOptions)==null?void 0:fe.tools)==null?void 0:ie.image)??!0}};return j!=null&&j.export&&(X.canvasActions.export.saveFileToDisk=((Ue=j.export)==null?void 0:Ue.saveFileToDisk)??qx.canvasActions.export.saveFileToDisk),X.canvasActions.toggleTheme===null&&typeof h>"u"&&(X.canvasActions.toggleTheme=!0),D.useEffect(()=>{(async()=>{await be(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]),import.meta.url)})();const $e=nt=>{typeof nt.scale=="number"&&nt.scale!==1&&nt.preventDefault()};return document.addEventListener("touchmove",$e,{passive:!1}),()=>{document.removeEventListener("touchmove",$e)}},[]),g(jce,{store:Or,children:g(R4e,{langCode:l,theme:h,children:g(H_,{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s,onPointerUpdate:o,renderTopRightUI:a,langCode:l,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,UIOptions:X,onPaste:U,detectScroll:y,handleKeyboardGlobally:E,onLibraryChange:w,autoFocus:v,generateIdForFile:x,onLinkOpen:M,generateLinkForSelection:_,onPointerDown:T,onPointerUp:I,onScrollChange:C,onDuplicate:R,validateEmbeddable:k,renderEmbeddable:$,aiEnabled:V!==!1,showDeprecatedFonts:z,renderScrollbars:G,children:N})})})},F4e=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,U,y;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((U=i==null?void 0:i.canvasActions)==null?void 0:U[h])===((y=o==null?void 0:o.canvasActions)==null?void 0:y[h])}):i[d]===o[d])&&Hi(r,a)},Lj=ae.memo(P4e,F4e);Lj.displayName="Excalidraw";const B4e=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=wn(),[,r]=D.useState(!1),s=D.useRef(0),o=D.useRef(null),a=async()=>{var u;try{await qc(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=D_();return g(Kr,{onCloseRequest:t,title:!1,size:"small",children:P("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),P("div",{className:"ShareableLinkDialog__linkRow",children:[g(Hh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(to,{size:"large",label:i("buttons.copyLink"),icon:sp,status:c,onClick:()=>{l(),a()}})]}),P("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},z4e=300,H4e=5e3,V4e=300,$4e=500,Hk=2e4,G4e=50,X4e=33,j4e=24*60*60*1e3,Q_=3*1024*1024,Y4e=31536e3,I2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Ki=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Ki||{});const Dj={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},W4e=10,vn={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},K4e={AUTH_STATE_COOKIE:"excplus-auth"},J_=document.cookie.includes(K4e.AUTH_STATE_COOKIE),Z4e=e=>{try{localStorage.setItem(vn.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},Oj=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},Nj=()=>{let e=null,t=null;try{e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=az(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...Qo(),...jV(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},Pj=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},q4e=()=>{try{const e=localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(vn.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+Pj()}catch(e){return console.error(e),0}},Q4e=500,Vk=Za(e=>{e({scene:Pj(),total:q4e()})},Q4e),J4e=e=>{const[t,n]=D.useState({scene:0,total:0});D.useEffect(()=>{Vk(o=>{n(o)})},[e.elements,e.appState]),D.useEffect(()=>()=>Vk.cancel(),[]);const i=I7();let r,s;return i!==ZP?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=L("stats.versionNotAvailable"),P(va.StatsRows,{order:-1,children:[g(va.StatsRow,{heading:!0,children:L("stats.version")}),P(va.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await qc(I7()),e.setToast(L("toast.copyToClipboard"))}catch{}},title:L("stats.versionCopy"),children:[s,g("br",{}),r]}),g(va.StatsRow,{heading:!0,children:L("stats.storage")}),P(va.StatsRow,{columns:2,children:[g("div",{children:L("stats.scene")}),g("div",{children:lC(t.scene,1)})]}),P(va.StatsRow,{columns:2,children:[g("div",{children:L("stats.total")}),g("div",{children:lC(t.total,1)})]})]})},kl=rp(),eve=(e,t)=>{const[n,i]=Lh(e);return D.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class Fj{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=xn(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>xn(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>xn(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const eT=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await $$(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(L("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},L1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>xn(t)&&e.erroredFiles.has(t.fileId)?Ie(t,{status:"error"}):t),captureUpdate:K.NEVER})};var $k={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},tve=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},zj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bj(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tve(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new nve;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ive=function(e){const t=Bj(e);return zj.encodeByteArray(t,!0)},p6=function(e){return ive(e).replace(/\./g,"")},rve=function(e){try{return zj.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=()=>sve().__FIREBASE_DEFAULTS__,ave=()=>{if(typeof process>"u"||typeof $k>"u")return;const e=$k.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},lve=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rve(e[1]);return t&&JSON.parse(t)},tT=()=>{try{return ove()||ave()||lve()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cve=e=>{var t,n;return(n=(t=tT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Hj=e=>{const t=cve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Vj=()=>{var e;return(e=tT())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p6(JSON.stringify(n)),p6(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fve(){var e;const t=(e=tT())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hve(){return!fve()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gve(){try{return typeof indexedDB=="object"}catch{return!1}}function mve(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pve="FirebaseError";class Fd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=pve,Object.setPrototypeOf(this,Fd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gj.prototype.create)}}class Gj{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Uve(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Fd(r,a,i)}}function Uve(e,t){return e.replace(bve,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const bve=/\{\$([^}]+)}/g;function X4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(Gk(s)&&Gk(o)){if(!X4(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Gk(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(e){return e&&e._delegate?e._delegate:e}class Gh{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new uve;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(vve(t))try{this.getOrInitializeService({instanceIdentifier:gu})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=gu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gu){return this.instances.has(t)}getOptions(t=gu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Eve(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=gu){return this.component?this.component.multipleInstances?t:gu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Eve(e){return e===gu?void 0:e}function vve(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wve{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yve(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));const _ve={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},Tve=ft.INFO,Sve={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},Ive=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=Sve[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xj{constructor(t){this.name=t,this._logLevel=Tve,this._logHandler=Ive,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_ve[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const xve=(e,t)=>t.some(n=>e instanceof n);let Xk,jk;function Cve(){return Xk||(Xk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ave(){return jk||(jk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jj=new WeakMap,j4=new WeakMap,Yj=new WeakMap,qE=new WeakMap,nT=new WeakMap;function Mve(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(pc(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&jj.set(n,e)}).catch(()=>{}),nT.set(t,e),t}function Rve(e){if(j4.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});j4.set(e,t)}let Y4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return j4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Yj.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function kve(e){Y4=e(Y4)}function Lve(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(QE(this),t,...n);return Yj.set(i,t.sort?t.sort():[t]),pc(i)}:Ave().includes(e)?function(...t){return e.apply(QE(this),t),pc(jj.get(this))}:function(...t){return pc(e.apply(QE(this),t))}}function Dve(e){return typeof e=="function"?Lve(e):(e instanceof IDBTransaction&&Rve(e),xve(e,Cve())?new Proxy(e,Y4):e)}function pc(e){if(e instanceof IDBRequest)return Mve(e);if(qE.has(e))return qE.get(e);const t=Dve(e);return t!==e&&(qE.set(e,t),nT.set(t,e)),t}const QE=e=>nT.get(e);function Ove(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=pc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(pc(o.result),l.oldVersion,l.newVersion,pc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Nve=["get","getKey","getAll","getAllKeys","count"],Pve=["put","add","delete","clear"],JE=new Map;function Yk(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(JE.get(t))return JE.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Pve.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Nve.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return JE.set(t,s),s}kve(e=>({...e,get:(t,n,i)=>Yk(t,n)||e.get(t,n,i),has:(t,n)=>!!Yk(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bve(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Bve(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const W4="@firebase/app",Wk="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Xj("@firebase/app"),zve="@firebase/app-compat",Hve="@firebase/analytics-compat",Vve="@firebase/analytics",$ve="@firebase/app-check-compat",Gve="@firebase/app-check",Xve="@firebase/auth",jve="@firebase/auth-compat",Yve="@firebase/database",Wve="@firebase/data-connect",Kve="@firebase/database-compat",Zve="@firebase/functions",qve="@firebase/functions-compat",Qve="@firebase/installations",Jve="@firebase/installations-compat",ewe="@firebase/messaging",twe="@firebase/messaging-compat",nwe="@firebase/performance",iwe="@firebase/performance-compat",rwe="@firebase/remote-config",swe="@firebase/remote-config-compat",owe="@firebase/storage",awe="@firebase/storage-compat",lwe="@firebase/firestore",cwe="@firebase/vertexai",uwe="@firebase/firestore-compat",dwe="firebase",fwe="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="[DEFAULT]",hwe={[W4]:"fire-core",[zve]:"fire-core-compat",[Vve]:"fire-analytics",[Hve]:"fire-analytics-compat",[Gve]:"fire-app-check",[$ve]:"fire-app-check-compat",[Xve]:"fire-auth",[jve]:"fire-auth-compat",[Yve]:"fire-rtdb",[Wve]:"fire-data-connect",[Kve]:"fire-rtdb-compat",[Zve]:"fire-fn",[qve]:"fire-fn-compat",[Qve]:"fire-iid",[Jve]:"fire-iid-compat",[ewe]:"fire-fcm",[twe]:"fire-fcm-compat",[nwe]:"fire-perf",[iwe]:"fire-perf-compat",[rwe]:"fire-rc",[swe]:"fire-rc-compat",[owe]:"fire-gcs",[awe]:"fire-gcs-compat",[lwe]:"fire-fst",[uwe]:"fire-fst-compat",[cwe]:"fire-vertex","fire-js":"fire-js",[dwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Map,gwe=new Map,Z4=new Map;function Kk(e,t){try{e.container.addComponent(t)}catch(n){ll.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function E0(e){const t=e.name;if(Z4.has(t))return ll.debug(`There were multiple attempts to register component ${t}.`),!1;Z4.set(t,e);for(const n of U6.values())Kk(n,e);for(const n of gwe.values())Kk(n,e);return!0}function Wj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mwe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uc=new Gj("app","Firebase",mwe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Uc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=fwe;function qj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:K4,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Uc.create("bad-app-name",{appName:String(r)});if(n||(n=Vj()),!n)throw Uc.create("no-options");const s=U6.get(r);if(s){if(X4(n,s.options)&&X4(i,s.config))return s;throw Uc.create("duplicate-app",{appName:r})}const o=new wve(r);for(const l of Z4.values())o.addComponent(l);const a=new pwe(n,i,o);return U6.set(r,a),a}function Qj(e=K4){const t=U6.get(e);if(!t&&e===K4&&Vj())return qj();if(!t)throw Uc.create("no-app",{appName:e});return t}function bc(e,t,n){var i;let r=(i=hwe[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ll.warn(a.join(" "));return}E0(new Gh(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uwe="firebase-heartbeat-database",bwe=1,v0="firebase-heartbeat-store";let e3=null;function Jj(){return e3||(e3=Ove(Uwe,bwe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(v0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Uc.create("idb-open",{originalErrorMessage:e.message})})),e3}async function ywe(e){try{const n=(await Jj()).transaction(v0),i=await n.objectStore(v0).get(eY(e));return await n.done,i}catch(t){if(t instanceof Fd)ll.warn(t.message);else{const n=Uc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ll.warn(n.message)}}}async function Zk(e,t){try{const i=(await Jj()).transaction(v0,"readwrite");await i.objectStore(v0).put(t,eY(e)),await i.done}catch(n){if(n instanceof Fd)ll.warn(n.message);else{const i=Uc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ll.warn(i.message)}}}function eY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ewe=1024,vwe=30;class wwe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Twe(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qk();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>vwe){const o=Swe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ll.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qk(),{heartbeatsToSend:i,unsentEntries:r}=_we(this._heartbeatsCache.heartbeats),s=p6(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ll.warn(n),""}}}function qk(){return new Date().toISOString().substring(0,10)}function _we(e,t=Ewe){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Qk(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Qk(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Twe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gve()?mve().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ywe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Zk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Zk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Qk(e){return p6(JSON.stringify({version:2,heartbeats:e})).length}function Swe(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iwe(e){E0(new Gh("platform-logger",t=>new Fve(t),"PRIVATE")),E0(new Gh("heartbeat",t=>new wwe(t),"PRIVATE")),bc(W4,Wk,e),bc(W4,Wk,"esm2017"),bc("fire-js","")}Iwe("");var xwe="firebase",Cwe="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc(xwe,Cwe,"app");var Jk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yc,tY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,T){function I(){}I.prototype=T.prototype,_.D=T.prototype,_.prototype=new I,_.prototype.constructor=_,_.C=function(C,R,N){for(var k=Array(arguments.length-2),$=2;$<arguments.length;$++)k[$-2]=arguments[$];return T.prototype[R].apply(C,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,I){I||(I=0);var C=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)C[R]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(R=0;16>R;++R)C[R]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=_.g[0],I=_.g[1],R=_.g[2];var N=_.g[3],k=T+(N^I&(R^N))+C[0]+3614090360&4294967295;T=I+(k<<7&4294967295|k>>>25),k=N+(R^T&(I^R))+C[1]+3905402710&4294967295,N=T+(k<<12&4294967295|k>>>20),k=R+(I^N&(T^I))+C[2]+606105819&4294967295,R=N+(k<<17&4294967295|k>>>15),k=I+(T^R&(N^T))+C[3]+3250441966&4294967295,I=R+(k<<22&4294967295|k>>>10),k=T+(N^I&(R^N))+C[4]+4118548399&4294967295,T=I+(k<<7&4294967295|k>>>25),k=N+(R^T&(I^R))+C[5]+1200080426&4294967295,N=T+(k<<12&4294967295|k>>>20),k=R+(I^N&(T^I))+C[6]+2821735955&4294967295,R=N+(k<<17&4294967295|k>>>15),k=I+(T^R&(N^T))+C[7]+4249261313&4294967295,I=R+(k<<22&4294967295|k>>>10),k=T+(N^I&(R^N))+C[8]+1770035416&4294967295,T=I+(k<<7&4294967295|k>>>25),k=N+(R^T&(I^R))+C[9]+2336552879&4294967295,N=T+(k<<12&4294967295|k>>>20),k=R+(I^N&(T^I))+C[10]+4294925233&4294967295,R=N+(k<<17&4294967295|k>>>15),k=I+(T^R&(N^T))+C[11]+2304563134&4294967295,I=R+(k<<22&4294967295|k>>>10),k=T+(N^I&(R^N))+C[12]+1804603682&4294967295,T=I+(k<<7&4294967295|k>>>25),k=N+(R^T&(I^R))+C[13]+4254626195&4294967295,N=T+(k<<12&4294967295|k>>>20),k=R+(I^N&(T^I))+C[14]+2792965006&4294967295,R=N+(k<<17&4294967295|k>>>15),k=I+(T^R&(N^T))+C[15]+1236535329&4294967295,I=R+(k<<22&4294967295|k>>>10),k=T+(R^N&(I^R))+C[1]+4129170786&4294967295,T=I+(k<<5&4294967295|k>>>27),k=N+(I^R&(T^I))+C[6]+3225465664&4294967295,N=T+(k<<9&4294967295|k>>>23),k=R+(T^I&(N^T))+C[11]+643717713&4294967295,R=N+(k<<14&4294967295|k>>>18),k=I+(N^T&(R^N))+C[0]+3921069994&4294967295,I=R+(k<<20&4294967295|k>>>12),k=T+(R^N&(I^R))+C[5]+3593408605&4294967295,T=I+(k<<5&4294967295|k>>>27),k=N+(I^R&(T^I))+C[10]+38016083&4294967295,N=T+(k<<9&4294967295|k>>>23),k=R+(T^I&(N^T))+C[15]+3634488961&4294967295,R=N+(k<<14&4294967295|k>>>18),k=I+(N^T&(R^N))+C[4]+3889429448&4294967295,I=R+(k<<20&4294967295|k>>>12),k=T+(R^N&(I^R))+C[9]+568446438&4294967295,T=I+(k<<5&4294967295|k>>>27),k=N+(I^R&(T^I))+C[14]+3275163606&4294967295,N=T+(k<<9&4294967295|k>>>23),k=R+(T^I&(N^T))+C[3]+4107603335&4294967295,R=N+(k<<14&4294967295|k>>>18),k=I+(N^T&(R^N))+C[8]+1163531501&4294967295,I=R+(k<<20&4294967295|k>>>12),k=T+(R^N&(I^R))+C[13]+2850285829&4294967295,T=I+(k<<5&4294967295|k>>>27),k=N+(I^R&(T^I))+C[2]+4243563512&4294967295,N=T+(k<<9&4294967295|k>>>23),k=R+(T^I&(N^T))+C[7]+1735328473&4294967295,R=N+(k<<14&4294967295|k>>>18),k=I+(N^T&(R^N))+C[12]+2368359562&4294967295,I=R+(k<<20&4294967295|k>>>12),k=T+(I^R^N)+C[5]+4294588738&4294967295,T=I+(k<<4&4294967295|k>>>28),k=N+(T^I^R)+C[8]+2272392833&4294967295,N=T+(k<<11&4294967295|k>>>21),k=R+(N^T^I)+C[11]+1839030562&4294967295,R=N+(k<<16&4294967295|k>>>16),k=I+(R^N^T)+C[14]+4259657740&4294967295,I=R+(k<<23&4294967295|k>>>9),k=T+(I^R^N)+C[1]+2763975236&4294967295,T=I+(k<<4&4294967295|k>>>28),k=N+(T^I^R)+C[4]+1272893353&4294967295,N=T+(k<<11&4294967295|k>>>21),k=R+(N^T^I)+C[7]+4139469664&4294967295,R=N+(k<<16&4294967295|k>>>16),k=I+(R^N^T)+C[10]+3200236656&4294967295,I=R+(k<<23&4294967295|k>>>9),k=T+(I^R^N)+C[13]+681279174&4294967295,T=I+(k<<4&4294967295|k>>>28),k=N+(T^I^R)+C[0]+3936430074&4294967295,N=T+(k<<11&4294967295|k>>>21),k=R+(N^T^I)+C[3]+3572445317&4294967295,R=N+(k<<16&4294967295|k>>>16),k=I+(R^N^T)+C[6]+76029189&4294967295,I=R+(k<<23&4294967295|k>>>9),k=T+(I^R^N)+C[9]+3654602809&4294967295,T=I+(k<<4&4294967295|k>>>28),k=N+(T^I^R)+C[12]+3873151461&4294967295,N=T+(k<<11&4294967295|k>>>21),k=R+(N^T^I)+C[15]+530742520&4294967295,R=N+(k<<16&4294967295|k>>>16),k=I+(R^N^T)+C[2]+3299628645&4294967295,I=R+(k<<23&4294967295|k>>>9),k=T+(R^(I|~N))+C[0]+4096336452&4294967295,T=I+(k<<6&4294967295|k>>>26),k=N+(I^(T|~R))+C[7]+1126891415&4294967295,N=T+(k<<10&4294967295|k>>>22),k=R+(T^(N|~I))+C[14]+2878612391&4294967295,R=N+(k<<15&4294967295|k>>>17),k=I+(N^(R|~T))+C[5]+4237533241&4294967295,I=R+(k<<21&4294967295|k>>>11),k=T+(R^(I|~N))+C[12]+1700485571&4294967295,T=I+(k<<6&4294967295|k>>>26),k=N+(I^(T|~R))+C[3]+2399980690&4294967295,N=T+(k<<10&4294967295|k>>>22),k=R+(T^(N|~I))+C[10]+4293915773&4294967295,R=N+(k<<15&4294967295|k>>>17),k=I+(N^(R|~T))+C[1]+2240044497&4294967295,I=R+(k<<21&4294967295|k>>>11),k=T+(R^(I|~N))+C[8]+1873313359&4294967295,T=I+(k<<6&4294967295|k>>>26),k=N+(I^(T|~R))+C[15]+4264355552&4294967295,N=T+(k<<10&4294967295|k>>>22),k=R+(T^(N|~I))+C[6]+2734768916&4294967295,R=N+(k<<15&4294967295|k>>>17),k=I+(N^(R|~T))+C[13]+1309151649&4294967295,I=R+(k<<21&4294967295|k>>>11),k=T+(R^(I|~N))+C[4]+4149444226&4294967295,T=I+(k<<6&4294967295|k>>>26),k=N+(I^(T|~R))+C[11]+3174756917&4294967295,N=T+(k<<10&4294967295|k>>>22),k=R+(T^(N|~I))+C[2]+718787259&4294967295,R=N+(k<<15&4294967295|k>>>17),k=I+(N^(R|~T))+C[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+N&4294967295}i.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var I=T-this.blockSize,C=this.B,R=this.h,N=0;N<T;){if(R==0)for(;N<=I;)r(this,_,N),N+=this.blockSize;if(typeof _=="string"){for(;N<T;)if(C[R++]=_.charCodeAt(N++),R==this.blockSize){r(this,C),R=0;break}}else for(;N<T;)if(C[R++]=_[N++],R==this.blockSize){r(this,C),R=0;break}}this.h=R,this.o+=T},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var I=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=I&255,I/=256;for(this.u(_),_=Array(16),T=I=0;4>T;++T)for(var C=0;32>C;C+=8)_[I++]=this.g[T]>>>C&255;return _};function s(_,T){var I=a;return Object.prototype.hasOwnProperty.call(I,_)?I[_]:I[_]=T(_)}function o(_,T){this.h=T;for(var I=[],C=!0,R=_.length-1;0<=R;R--){var N=_[R]|0;C&&N==T||(I[R]=N,C=!1)}this.g=I}var a={};function l(_){return-128<=_&&128>_?s(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return U(c(-_));for(var T=[],I=1,C=0;_>=I;C++)T[C]=_/I|0,I*=4294967296;return new o(T,0)}function u(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return U(u(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(T,8)),C=d,R=0;R<_.length;R+=8){var N=Math.min(8,_.length-R),k=parseInt(_.substring(R,R+N),T);8>N?(N=c(Math.pow(T,N)),C=C.j(N).add(c(k))):(C=C.j(I),C=C.add(c(k)))}return C}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-U(this).m();for(var _=0,T=1,I=0;I<this.g.length;I++){var C=this.i(I);_+=(0<=C?C:4294967296+C)*T,T*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+U(this).toString(_);for(var T=c(Math.pow(_,6)),I=this,C="";;){var R=v(I,T).g;I=y(I,R.j(T));var N=((0<I.g.length?I.g[0]:I.h)>>>0).toString(_);if(I=R,m(I))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function p(_){return _.h==-1}e.l=function(_){return _=y(this,_),p(_)?-1:m(_)?0:1};function U(_){for(var T=_.g.length,I=[],C=0;C<T;C++)I[C]=~_.g[C];return new o(I,~_.h).add(f)}e.abs=function(){return p(this)?U(this):this},e.add=function(_){for(var T=Math.max(this.g.length,_.g.length),I=[],C=0,R=0;R<=T;R++){var N=C+(this.i(R)&65535)+(_.i(R)&65535),k=(N>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);C=k>>>16,N&=65535,k&=65535,I[R]=k<<16|N}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(_,T){return _.add(U(T))}e.j=function(_){if(m(this)||m(_))return d;if(p(this))return p(_)?U(this).j(U(_)):U(U(this).j(_));if(p(_))return U(this.j(U(_)));if(0>this.l(h)&&0>_.l(h))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,I=[],C=0;C<2*T;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<_.g.length;R++){var N=this.i(C)>>>16,k=this.i(C)&65535,$=_.i(R)>>>16,V=_.i(R)&65535;I[2*C+2*R]+=k*V,E(I,2*C+2*R),I[2*C+2*R+1]+=N*V,E(I,2*C+2*R+1),I[2*C+2*R+1]+=k*$,E(I,2*C+2*R+1),I[2*C+2*R+2]+=N*$,E(I,2*C+2*R+2)}for(C=0;C<T;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=T;C<2*T;C++)I[C]=0;return new o(I,0)};function E(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function w(_,T){this.g=_,this.h=T}function v(_,T){if(m(T))throw Error("division by zero");if(m(_))return new w(d,d);if(p(_))return T=v(U(_),T),new w(U(T.g),U(T.h));if(p(T))return T=v(_,U(T)),new w(U(T.g),T.h);if(30<_.g.length){if(p(_)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var I=f,C=T;0>=C.l(_);)I=x(I),C=x(C);var R=M(I,1),N=M(C,1);for(C=M(C,2),I=M(I,2);!m(C);){var k=N.add(C);0>=k.l(_)&&(R=R.add(I),N=k),C=M(C,1),I=M(I,1)}return T=y(_,R.j(T)),new w(R,T)}for(R=d;0<=_.l(T);){for(I=Math.max(1,Math.floor(_.m()/T.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=c(I),k=N.j(T);p(k)||0<k.l(_);)I-=C,N=c(I),k=N.j(T);m(N)&&(N=f),R=R.add(N),_=y(_,k)}return new w(R,_)}e.A=function(_){return v(this,_).h},e.and=function(_){for(var T=Math.max(this.g.length,_.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)&_.i(C);return new o(I,this.h&_.h)},e.or=function(_){for(var T=Math.max(this.g.length,_.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)|_.i(C);return new o(I,this.h|_.h)},e.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)^_.i(C);return new o(I,this.h^_.h)};function x(_){for(var T=_.g.length+1,I=[],C=0;C<T;C++)I[C]=_.i(C)<<1|_.i(C-1)>>>31;return new o(I,_.h)}function M(_,T){var I=T>>5;T%=32;for(var C=_.g.length-I,R=[],N=0;N<C;N++)R[N]=0<T?_.i(N+I)>>>T|_.i(N+I+1)<<32-T:_.i(N+I);return new o(R,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tY=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,yc=o}).apply(typeof Jk<"u"?Jk:typeof self<"u"?self:typeof window<"u"?window:{});var kU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nY,D1,iY,x2,q4,rY,sY,oY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,A,O){return b==Array.prototype||b==Object.prototype||(b[A]=O.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof kU=="object"&&kU];for(var A=0;A<b.length;++A){var O=b[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var i=n(this);function r(b,A){if(A)e:{var O=i;b=b.split(".");for(var B=0;B<b.length-1;B++){var W=b[B];if(!(W in O))break e;O=O[W]}b=b[b.length-1],B=O[b],A=A(B),A!=B&&A!=null&&t(O,b,{configurable:!0,writable:!0,value:A})}}function s(b,A){b instanceof String&&(b+="");var O=0,B=!1,W={next:function(){if(!B&&O<b.length){var J=O++;return{value:A(J,b[J]),done:!1}}return B=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(b){return b||function(){return s(this,function(A,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(b){var A=typeof b;return A=A!="object"?A:b?Array.isArray(b)?"array":A:"null",A=="array"||A=="object"&&typeof b.length=="number"}function c(b){var A=typeof b;return A=="object"&&b!=null||A=="function"}function u(b,A,O){return b.call.apply(b.bind,arguments)}function d(b,A,O){if(!b)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,B),b.apply(A,W)}}return function(){return b.apply(A,arguments)}}function f(b,A,O){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(b,A){var O=Array.prototype.slice.call(arguments,1);return function(){var B=O.slice();return B.push.apply(B,arguments),b.apply(this,B)}}function m(b,A){function O(){}O.prototype=A.prototype,b.aa=A.prototype,b.prototype=new O,b.prototype.constructor=b,b.Qb=function(B,W,J){for(var de=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)de[Ht-2]=arguments[Ht];return A.prototype[W].apply(B,de)}}function p(b){const A=b.length;if(0<A){const O=Array(A);for(let B=0;B<A;B++)O[B]=b[B];return O}return[]}function U(b,A){for(let O=1;O<arguments.length;O++){const B=arguments[O];if(l(B)){const W=b.length||0,J=B.length||0;b.length=W+J;for(let de=0;de<J;de++)b[W+de]=B[de]}else b.push(B)}}class y{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function E(b){return/^[\s\xa0]*$/.test(b)}function w(){var b=a.navigator;return b&&(b=b.userAgent)?b:""}function v(b){return v[" "](b),b}v[" "]=function(){};var x=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(b,A,O){for(const B in b)A.call(O,b[B],B,b)}function _(b,A){for(const O in b)A.call(void 0,b[O],O,b)}function T(b){const A={};for(const O in b)A[O]=b[O];return A}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(b,A){let O,B;for(let W=1;W<arguments.length;W++){B=arguments[W];for(O in B)b[O]=B[O];for(let J=0;J<I.length;J++)O=I[J],Object.prototype.hasOwnProperty.call(B,O)&&(b[O]=B[O])}}function R(b){var A=1;b=b.split(":");const O=[];for(;0<A&&b.length;)O.push(b.shift()),A--;return b.length&&O.push(b.join(":")),O}function N(b){a.setTimeout(()=>{throw b},0)}function k(){var b=X;let A=null;return b.g&&(A=b.g,b.g=b.g.next,b.g||(b.h=null),A.next=null),A}class ${constructor(){this.h=this.g=null}add(A,O){const B=V.get();B.set(A,O),this.h?this.h.next=B:this.g=B,this.h=B}}var V=new y(()=>new z,b=>b.reset());class z{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let G,j=!1,X=new $,q=()=>{const b=a.Promise.resolve(void 0);G=()=>{b.then(fe)}};var fe=()=>{for(var b;b=k();){try{b.h.call(b.g)}catch(O){N(O)}var A=V;A.j(b),100>A.h&&(A.h++,b.next=A.g,A.g=b)}j=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(b,A){this.type=b,this.g=this.target=A,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,A=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const O=()=>{};a.addEventListener("test",O,A),a.removeEventListener("test",O,A)}catch{}return b}();function $e(b,A){if(Ue.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var O=this.type=b.type,B=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=A,A=b.relatedTarget){if(x){e:{try{v(A.nodeName);var W=!0;break e}catch{}W=!1}W||(A=null)}}else O=="mouseover"?A=b.fromElement:O=="mouseout"&&(A=b.toElement);this.relatedTarget=A,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:nt[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&$e.aa.h.call(this)}}m($e,Ue);var nt={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),Ct=0;function Zt(b,A,O,B,W){this.listener=b,this.proxy=null,this.src=A,this.type=O,this.capture=!!B,this.ha=W,this.key=++Ct,this.da=this.fa=!1}function xe(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Ge(b){this.src=b,this.g={},this.h=0}Ge.prototype.add=function(b,A,O,B,W){var J=b.toString();b=this.g[J],b||(b=this.g[J]=[],this.h++);var de=ar(b,A,B,W);return-1<de?(A=b[de],O||(A.fa=!1)):(A=new Zt(A,this.src,J,!!B,W),A.fa=O,b.push(A)),A};function qt(b,A){var O=A.type;if(O in b.g){var B=b.g[O],W=Array.prototype.indexOf.call(B,A,void 0),J;(J=0<=W)&&Array.prototype.splice.call(B,W,1),J&&(xe(A),b.g[O].length==0&&(delete b.g[O],b.h--))}}function ar(b,A,O,B){for(var W=0;W<b.length;++W){var J=b[W];if(!J.da&&J.listener==A&&J.capture==!!O&&J.ha==B)return W}return-1}var xs="closure_lm_"+(1e6*Math.random()|0),Cs={};function Sr(b,A,O,B,W){if(Array.isArray(A)){for(var J=0;J<A.length;J++)Sr(b,A[J],O,B,W);return null}return O=GT(O),b&&b[zt]?b.K(A,O,c(B)?!!B.capture:!1,W):Sy(b,A,O,!1,B,W)}function Sy(b,A,O,B,W,J){if(!A)throw Error("Invalid event type");var de=c(W)?!!W.capture:!!W,Ht=Cy(b);if(Ht||(b[xs]=Ht=new Ge(b)),O=Ht.add(A,O,B,de,J),O.proxy)return O;if(B=Iy(),O.proxy=B,B.src=b,B.listener=O,b.addEventListener)Ve||(W=de),W===void 0&&(W=!1),b.addEventListener(A.toString(),B,W);else if(b.attachEvent)b.attachEvent($T(A.toString()),B);else if(b.addListener&&b.removeListener)b.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Iy(){function b(O){return A.call(b.src,b.listener,O)}const A=ZW;return b}function Qc(b,A,O,B,W){if(Array.isArray(A))for(var J=0;J<A.length;J++)Qc(b,A[J],O,B,W);else B=c(B)?!!B.capture:!!B,O=GT(O),b&&b[zt]?(b=b.i,A=String(A).toString(),A in b.g&&(J=b.g[A],O=ar(J,O,B,W),-1<O&&(xe(J[O]),Array.prototype.splice.call(J,O,1),J.length==0&&(delete b.g[A],b.h--)))):b&&(b=Cy(b))&&(A=b.g[A.toString()],b=-1,A&&(b=ar(A,O,B,W)),(O=-1<b?A[b]:null)&&xy(O))}function xy(b){if(typeof b!="number"&&b&&!b.da){var A=b.src;if(A&&A[zt])qt(A.i,b);else{var O=b.type,B=b.proxy;A.removeEventListener?A.removeEventListener(O,B,b.capture):A.detachEvent?A.detachEvent($T(O),B):A.addListener&&A.removeListener&&A.removeListener(B),(O=Cy(A))?(qt(O,b),O.h==0&&(O.src=null,A[xs]=null)):xe(b)}}}function $T(b){return b in Cs?Cs[b]:Cs[b]="on"+b}function ZW(b,A){if(b.da)b=!0;else{A=new $e(A,this);var O=b.listener,B=b.ha||b.src;b.fa&&xy(b),b=O.call(B,A)}return b}function Cy(b){return b=b[xs],b instanceof Ge?b:null}var Ay="__closure_events_fn_"+(1e9*Math.random()>>>0);function GT(b){return typeof b=="function"?b:(b[Ay]||(b[Ay]=function(A){return b.handleEvent(A)}),b[Ay])}function xi(){ie.call(this),this.i=new Ge(this),this.M=this,this.F=null}m(xi,ie),xi.prototype[zt]=!0,xi.prototype.removeEventListener=function(b,A,O,B){Qc(this,b,A,O,B)};function Xi(b,A){var O,B=b.F;if(B)for(O=[];B;B=B.F)O.push(B);if(b=b.M,B=A.type||A,typeof A=="string")A=new Ue(A,b);else if(A instanceof Ue)A.target=A.target||b;else{var W=A;A=new Ue(B,b),C(A,W)}if(W=!0,O)for(var J=O.length-1;0<=J;J--){var de=A.g=O[J];W=Ep(de,B,!0,A)&&W}if(de=A.g=b,W=Ep(de,B,!0,A)&&W,W=Ep(de,B,!1,A)&&W,O)for(J=0;J<O.length;J++)de=A.g=O[J],W=Ep(de,B,!1,A)&&W}xi.prototype.N=function(){if(xi.aa.N.call(this),this.i){var b=this.i,A;for(A in b.g){for(var O=b.g[A],B=0;B<O.length;B++)xe(O[B]);delete b.g[A],b.h--}}this.F=null},xi.prototype.K=function(b,A,O,B){return this.i.add(String(b),A,!1,O,B)},xi.prototype.L=function(b,A,O,B){return this.i.add(String(b),A,!0,O,B)};function Ep(b,A,O,B){if(A=b.i.g[String(A)],!A)return!0;A=A.concat();for(var W=!0,J=0;J<A.length;++J){var de=A[J];if(de&&!de.da&&de.capture==O){var Ht=de.listener,pi=de.ha||de.src;de.fa&&qt(b.i,de),W=Ht.call(pi,B)!==!1&&W}}return W&&!B.defaultPrevented}function XT(b,A,O){if(typeof b=="function")O&&(b=f(b,O));else if(b&&typeof b.handleEvent=="function")b=f(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:a.setTimeout(b,A||0)}function jT(b){b.g=XT(()=>{b.g=null,b.i&&(b.i=!1,jT(b))},b.l);const A=b.h;b.h=null,b.m.apply(null,A)}class qW extends ie{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:jT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _g(b){ie.call(this),this.h=b,this.g={}}m(_g,ie);var YT=[];function WT(b){M(b.g,function(A,O){this.g.hasOwnProperty(O)&&xy(A)},b),b.g={}}_g.prototype.N=function(){_g.aa.N.call(this),WT(this)},_g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var My=a.JSON.stringify,QW=a.JSON.parse,JW=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function Ry(){}Ry.prototype.h=null;function KT(b){return b.h||(b.h=b.i())}function ZT(){}var Tg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ky(){Ue.call(this,"d")}m(ky,Ue);function Ly(){Ue.call(this,"c")}m(Ly,Ue);var Jc={},qT=null;function vp(){return qT=qT||new xi}Jc.La="serverreachability";function QT(b){Ue.call(this,Jc.La,b)}m(QT,Ue);function Sg(b){const A=vp();Xi(A,new QT(A))}Jc.STAT_EVENT="statevent";function JT(b,A){Ue.call(this,Jc.STAT_EVENT,b),this.stat=A}m(JT,Ue);function ji(b){const A=vp();Xi(A,new JT(A,b))}Jc.Ma="timingevent";function eS(b,A){Ue.call(this,Jc.Ma,b),this.size=A}m(eS,Ue);function Ig(b,A){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},A)}function xg(){this.g=!0}xg.prototype.xa=function(){this.g=!1};function eK(b,A,O,B,W,J){b.info(function(){if(b.g)if(J)for(var de="",Ht=J.split("&"),pi=0;pi<Ht.length;pi++){var vt=Ht[pi].split("=");if(1<vt.length){var Ci=vt[0];vt=vt[1];var Ai=Ci.split("_");de=2<=Ai.length&&Ai[1]=="type"?de+(Ci+"="+vt+"&"):de+(Ci+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+B+") [attempt "+W+"]: "+A+`
`+O+`
`+de})}function tK(b,A,O,B,W,J,de){b.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+W+"]: "+A+`
`+O+`
`+J+" "+de})}function $d(b,A,O,B){b.info(function(){return"XMLHTTP TEXT ("+A+"): "+iK(b,O)+(B?" "+B:"")})}function nK(b,A){b.info(function(){return"TIMEOUT: "+A})}xg.prototype.info=function(){};function iK(b,A){if(!b.g)return A;if(!A)return null;try{var O=JSON.parse(A);if(O){for(b=0;b<O.length;b++)if(Array.isArray(O[b])){var B=O[b];if(!(2>B.length)){var W=B[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return My(O)}catch{return A}}var wp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dy;function _p(){}m(_p,Ry),_p.prototype.g=function(){return new XMLHttpRequest},_p.prototype.i=function(){return{}},Dy=new _p;function pl(b,A,O,B){this.j=b,this.i=A,this.l=O,this.R=B||1,this.U=new _g(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nS}function nS(){this.i=null,this.g="",this.h=!1}var iS={},Oy={};function Ny(b,A,O){b.L=1,b.v=xp(oa(A)),b.m=O,b.P=!0,rS(b,null)}function rS(b,A){b.F=Date.now(),Tp(b),b.A=oa(b.v);var O=b.A,B=b.R;Array.isArray(B)||(B=[String(B)]),bS(O.i,"t",B),b.C=0,O=b.j.J,b.h=new nS,b.g=NS(b.j,O?A:null,!b.m),0<b.O&&(b.M=new qW(f(b.Y,b,b.g),b.O)),A=b.U,O=b.g,B=b.ca;var W="readystatechange";Array.isArray(W)||(W&&(YT[0]=W.toString()),W=YT);for(var J=0;J<W.length;J++){var de=Sr(O,W[J],B||A.handleEvent,!1,A.h||A);if(!de)break;A.g[de.key]=de}A=b.H?T(b.H):{},b.m?(b.u||(b.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,A)):(b.u="GET",b.g.ea(b.A,b.u,null,A)),Sg(),eK(b.i,b.u,b.A,b.l,b.R,b.m)}pl.prototype.ca=function(b){b=b.target;const A=this.M;A&&aa(b)==3?A.j():this.Y(b)},pl.prototype.Y=function(b){try{if(b==this.g)e:{const Ai=aa(this.g);var A=this.g.Ba();const jd=this.g.Z();if(!(3>Ai)&&(Ai!=3||this.g&&(this.h.h||this.g.oa()||SS(this.g)))){this.J||Ai!=4||A==7||(A==8||0>=jd?Sg(3):Sg(2)),Py(this);var O=this.g.Z();this.X=O;t:if(sS(this)){var B=SS(this.g);b="";var W=B.length,J=aa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){eu(this),Cg(this);var de="";break t}this.h.i=new a.TextDecoder}for(A=0;A<W;A++)this.h.h=!0,b+=this.h.i.decode(B[A],{stream:!(J&&A==W-1)});B.length=0,this.h.g+=b,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=O==200,tK(this.i,this.u,this.A,this.l,this.R,Ai,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,pi=this.g;if((Ht=pi.g?pi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ht)){var vt=Ht;break t}}vt=null}if(O=vt)$d(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fy(this,O);else{this.o=!1,this.s=3,ji(12),eu(this),Cg(this);break e}}if(this.P){O=!0;let As;for(;!this.J&&this.C<de.length;)if(As=rK(this,de),As==Oy){Ai==4&&(this.s=4,ji(14),O=!1),$d(this.i,this.l,null,"[Incomplete Response]");break}else if(As==iS){this.s=4,ji(15),$d(this.i,this.l,de,"[Invalid Chunk]"),O=!1;break}else $d(this.i,this.l,As,null),Fy(this,As);if(sS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ai!=4||de.length!=0||this.h.h||(this.s=1,ji(16),O=!1),this.o=this.o&&O,!O)$d(this.i,this.l,de,"[Invalid Chunked Response]"),eu(this),Cg(this);else if(0<de.length&&!this.W){this.W=!0;var Ci=this.j;Ci.g==this&&Ci.ba&&!Ci.M&&(Ci.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Gy(Ci),Ci.M=!0,ji(11))}}else $d(this.i,this.l,de,null),Fy(this,de);Ai==4&&eu(this),this.o&&!this.J&&(Ai==4?kS(this.j,this):(this.o=!1,Tp(this)))}else vK(this.g),O==400&&0<de.indexOf("Unknown SID")?(this.s=3,ji(12)):(this.s=0,ji(13)),eu(this),Cg(this)}}}catch{}finally{}};function sS(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function rK(b,A){var O=b.C,B=A.indexOf(`
`,O);return B==-1?Oy:(O=Number(A.substring(O,B)),isNaN(O)?iS:(B+=1,B+O>A.length?Oy:(A=A.slice(B,B+O),b.C=B+O,A)))}pl.prototype.cancel=function(){this.J=!0,eu(this)};function Tp(b){b.S=Date.now()+b.I,oS(b,b.I)}function oS(b,A){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Ig(f(b.ba,b),A)}function Py(b){b.B&&(a.clearTimeout(b.B),b.B=null)}pl.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(nK(this.i,this.A),this.L!=2&&(Sg(),ji(17)),eu(this),this.s=2,Cg(this)):oS(this,this.S-b)};function Cg(b){b.j.G==0||b.J||kS(b.j,b)}function eu(b){Py(b);var A=b.M;A&&typeof A.ma=="function"&&A.ma(),b.M=null,WT(b.U),b.g&&(A=b.g,b.g=null,A.abort(),A.ma())}function Fy(b,A){try{var O=b.j;if(O.G!=0&&(O.g==b||By(O.h,b))){if(!b.K&&By(O.h,b)&&O.G==3){try{var B=O.Da.g.parse(A)}catch{B=null}if(Array.isArray(B)&&B.length==3){var W=B;if(W[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<b.F)Lp(O),Rp(O);else break e;$y(O),ji(18)}}else O.za=W[1],0<O.za-O.T&&37500>W[2]&&O.F&&O.v==0&&!O.C&&(O.C=Ig(f(O.Za,O),6e3));if(1>=cS(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else nu(O,11)}else if((b.K||O.g==b)&&Lp(O),!E(A))for(W=O.Da.g.parse(A),A=0;A<W.length;A++){let vt=W[A];if(O.T=vt[0],vt=vt[1],O.G==2)if(vt[0]=="c"){O.K=vt[1],O.ia=vt[2];const Ci=vt[3];Ci!=null&&(O.la=Ci,O.j.info("VER="+O.la));const Ai=vt[4];Ai!=null&&(O.Aa=Ai,O.j.info("SVER="+O.Aa));const jd=vt[5];jd!=null&&typeof jd=="number"&&0<jd&&(B=1.5*jd,O.L=B,O.j.info("backChannelRequestTimeoutMs_="+B)),B=O;const As=b.g;if(As){const Op=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Op){var J=B.h;J.g||Op.indexOf("spdy")==-1&&Op.indexOf("quic")==-1&&Op.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(zy(J,J.h),J.h=null))}if(B.D){const Xy=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;Xy&&(B.ya=Xy,Qt(B.I,B.D,Xy))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-b.F,O.j.info("Handshake RTT: "+O.R+"ms")),B=O;var de=b;if(B.qa=OS(B,B.J?B.ia:null,B.W),de.K){uS(B.h,de);var Ht=de,pi=B.L;pi&&(Ht.I=pi),Ht.B&&(Py(Ht),Tp(Ht)),B.g=de}else MS(B);0<O.i.length&&kp(O)}else vt[0]!="stop"&&vt[0]!="close"||nu(O,7);else O.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?nu(O,7):Vy(O):vt[0]!="noop"&&O.l&&O.l.ta(vt),O.v=0)}}Sg(4)}catch{}}var sK=class{constructor(b,A){this.g=b,this.map=A}};function aS(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lS(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function cS(b){return b.h?1:b.g?b.g.size:0}function By(b,A){return b.h?b.h==A:b.g?b.g.has(A):!1}function zy(b,A){b.g?b.g.add(A):b.h=A}function uS(b,A){b.h&&b.h==A?b.h=null:b.g&&b.g.has(A)&&b.g.delete(A)}aS.prototype.cancel=function(){if(this.i=dS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function dS(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let A=b.i;for(const O of b.g.values())A=A.concat(O.D);return A}return p(b.i)}function oK(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(l(b)){for(var A=[],O=b.length,B=0;B<O;B++)A.push(b[B]);return A}A=[],O=0;for(B in b)A[O++]=b[B];return A}function aK(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(l(b)||typeof b=="string"){var A=[];b=b.length;for(var O=0;O<b;O++)A.push(O);return A}A=[],O=0;for(const B in b)A[O++]=B;return A}}}function fS(b,A){if(b.forEach&&typeof b.forEach=="function")b.forEach(A,void 0);else if(l(b)||typeof b=="string")Array.prototype.forEach.call(b,A,void 0);else for(var O=aK(b),B=oK(b),W=B.length,J=0;J<W;J++)A.call(void 0,B[J],O&&O[J],b)}var hS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lK(b,A){if(b){b=b.split("&");for(var O=0;O<b.length;O++){var B=b[O].indexOf("="),W=null;if(0<=B){var J=b[O].substring(0,B);W=b[O].substring(B+1)}else J=b[O];A(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function tu(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof tu){this.h=b.h,Sp(this,b.j),this.o=b.o,this.g=b.g,Ip(this,b.s),this.l=b.l;var A=b.i,O=new Rg;O.i=A.i,A.g&&(O.g=new Map(A.g),O.h=A.h),gS(this,O),this.m=b.m}else b&&(A=String(b).match(hS))?(this.h=!1,Sp(this,A[1]||"",!0),this.o=Ag(A[2]||""),this.g=Ag(A[3]||"",!0),Ip(this,A[4]),this.l=Ag(A[5]||"",!0),gS(this,A[6]||"",!0),this.m=Ag(A[7]||"")):(this.h=!1,this.i=new Rg(null,this.h))}tu.prototype.toString=function(){var b=[],A=this.j;A&&b.push(Mg(A,mS,!0),":");var O=this.g;return(O||A=="file")&&(b.push("//"),(A=this.o)&&b.push(Mg(A,mS,!0),"@"),b.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&b.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&b.push("/"),b.push(Mg(O,O.charAt(0)=="/"?dK:uK,!0))),(O=this.i.toString())&&b.push("?",O),(O=this.m)&&b.push("#",Mg(O,hK)),b.join("")};function oa(b){return new tu(b)}function Sp(b,A,O){b.j=O?Ag(A,!0):A,b.j&&(b.j=b.j.replace(/:$/,""))}function Ip(b,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);b.s=A}else b.s=null}function gS(b,A,O){A instanceof Rg?(b.i=A,gK(b.i,b.h)):(O||(A=Mg(A,fK)),b.i=new Rg(A,b.h))}function Qt(b,A,O){b.i.set(A,O)}function xp(b){return Qt(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Ag(b,A){return b?A?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function Mg(b,A,O){return typeof b=="string"?(b=encodeURI(b).replace(A,cK),O&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function cK(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var mS=/[#\/\?@]/g,uK=/[#\?:]/g,dK=/[#\?]/g,fK=/[#\?@]/g,hK=/#/g;function Rg(b,A){this.h=this.g=null,this.i=b||null,this.j=!!A}function Ul(b){b.g||(b.g=new Map,b.h=0,b.i&&lK(b.i,function(A,O){b.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}e=Rg.prototype,e.add=function(b,A){Ul(this),this.i=null,b=Gd(this,b);var O=this.g.get(b);return O||this.g.set(b,O=[]),O.push(A),this.h+=1,this};function pS(b,A){Ul(b),A=Gd(b,A),b.g.has(A)&&(b.i=null,b.h-=b.g.get(A).length,b.g.delete(A))}function US(b,A){return Ul(b),A=Gd(b,A),b.g.has(A)}e.forEach=function(b,A){Ul(this),this.g.forEach(function(O,B){O.forEach(function(W){b.call(A,W,B,this)},this)},this)},e.na=function(){Ul(this);const b=Array.from(this.g.values()),A=Array.from(this.g.keys()),O=[];for(let B=0;B<A.length;B++){const W=b[B];for(let J=0;J<W.length;J++)O.push(A[B])}return O},e.V=function(b){Ul(this);let A=[];if(typeof b=="string")US(this,b)&&(A=A.concat(this.g.get(Gd(this,b))));else{b=Array.from(this.g.values());for(let O=0;O<b.length;O++)A=A.concat(b[O])}return A},e.set=function(b,A){return Ul(this),this.i=null,b=Gd(this,b),US(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[A]),this.h+=1,this},e.get=function(b,A){return b?(b=this.V(b),0<b.length?String(b[0]):A):A};function bS(b,A,O){pS(b,A),0<O.length&&(b.i=null,b.g.set(Gd(b,A),p(O)),b.h+=O.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],A=Array.from(this.g.keys());for(var O=0;O<A.length;O++){var B=A[O];const J=encodeURIComponent(String(B)),de=this.V(B);for(B=0;B<de.length;B++){var W=J;de[B]!==""&&(W+="="+encodeURIComponent(String(de[B]))),b.push(W)}}return this.i=b.join("&")};function Gd(b,A){return A=String(A),b.j&&(A=A.toLowerCase()),A}function gK(b,A){A&&!b.j&&(Ul(b),b.i=null,b.g.forEach(function(O,B){var W=B.toLowerCase();B!=W&&(pS(this,B),bS(this,W,O))},b)),b.j=A}function mK(b,A){const O=new xg;if(a.Image){const B=new Image;B.onload=h(bl,O,"TestLoadImage: loaded",!0,A,B),B.onerror=h(bl,O,"TestLoadImage: error",!1,A,B),B.onabort=h(bl,O,"TestLoadImage: abort",!1,A,B),B.ontimeout=h(bl,O,"TestLoadImage: timeout",!1,A,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=b}else A(!1)}function pK(b,A){const O=new xg,B=new AbortController,W=setTimeout(()=>{B.abort(),bl(O,"TestPingServer: timeout",!1,A)},1e4);fetch(b,{signal:B.signal}).then(J=>{clearTimeout(W),J.ok?bl(O,"TestPingServer: ok",!0,A):bl(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(W),bl(O,"TestPingServer: error",!1,A)})}function bl(b,A,O,B,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),B(O)}catch{}}function UK(){this.g=new JW}function bK(b,A,O){const B=O||"";try{fS(b,function(W,J){let de=W;c(W)&&(de=My(W)),A.push(B+J+"="+encodeURIComponent(de))})}catch(W){throw A.push(B+"type="+encodeURIComponent("_badmap")),W}}function Cp(b){this.l=b.Ub||null,this.j=b.eb||!1}m(Cp,Ry),Cp.prototype.g=function(){return new Ap(this.l,this.j)},Cp.prototype.i=function(b){return function(){return b}}({});function Ap(b,A){xi.call(this),this.D=b,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ap,xi),e=Ap.prototype,e.open=function(b,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=A,this.readyState=1,Lg(this)},e.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(A.body=b),(this.D||a).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kg(this)),this.readyState=0},e.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Lg(this)),this.g&&(this.readyState=3,Lg(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yS(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function yS(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}e.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var A=b.value?b.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!b.done}))&&(this.response=this.responseText+=A)}b.done?kg(this):Lg(this),this.readyState==3&&yS(this)}},e.Ra=function(b){this.g&&(this.response=this.responseText=b,kg(this))},e.Qa=function(b){this.g&&(this.response=b,kg(this))},e.ga=function(){this.g&&kg(this)};function kg(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Lg(b)}e.setRequestHeader=function(b,A){this.u.append(b,A)},e.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,b.push(O[0]+": "+O[1]),O=A.next();return b.join(`\r
`)};function Lg(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Ap.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function ES(b){let A="";return M(b,function(O,B){A+=B,A+=":",A+=O,A+=`\r
`}),A}function Hy(b,A,O){e:{for(B in O){var B=!1;break e}B=!0}B||(O=ES(O),typeof b=="string"?O!=null&&encodeURIComponent(String(O)):Qt(b,A,O))}function pn(b){xi.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(pn,xi);var yK=/^https?$/i,EK=["POST","PUT"];e=pn.prototype,e.Ha=function(b){this.J=b},e.ea=function(b,A,O,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);A=A?A.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dy.g(),this.v=this.o?KT(this.o):KT(Dy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(b),!0),this.B=!1}catch(J){vS(this,J);return}if(b=O||"",O=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var W in B)O.set(W,B[W]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const J of B.keys())O.set(J,B.get(J));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(O.keys()).find(J=>J.toLowerCase()=="content-type"),W=a.FormData&&b instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EK,A,void 0))||B||W||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of O)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TS(this),this.u=!0,this.g.send(b),this.u=!1}catch(J){vS(this,J)}};function vS(b,A){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=A,b.m=5,wS(b),Mp(b)}function wS(b){b.A||(b.A=!0,Xi(b,"complete"),Xi(b,"error"))}e.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,Xi(this,"complete"),Xi(this,"abort"),Mp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mp(this,!0)),pn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_S(this):this.bb())},e.bb=function(){_S(this)};function _S(b){if(b.h&&typeof o<"u"&&(!b.v[1]||aa(b)!=4||b.Z()!=2)){if(b.u&&aa(b)==4)XT(b.Ea,0,b);else if(Xi(b,"readystatechange"),aa(b)==4){b.h=!1;try{const de=b.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var O;if(!(O=A)){var B;if(B=de===0){var W=String(b.D).match(hS)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),B=!yK.test(W?W.toLowerCase():"")}O=B}if(O)Xi(b,"complete"),Xi(b,"success");else{b.m=6;try{var J=2<aa(b)?b.g.statusText:""}catch{J=""}b.l=J+" ["+b.Z()+"]",wS(b)}}finally{Mp(b)}}}}function Mp(b,A){if(b.g){TS(b);const O=b.g,B=b.v[0]?()=>{}:null;b.g=null,b.v=null,A||Xi(b,"ready");try{O.onreadystatechange=B}catch{}}}function TS(b){b.I&&(a.clearTimeout(b.I),b.I=null)}e.isActive=function(){return!!this.g};function aa(b){return b.g?b.g.readyState:0}e.Z=function(){try{return 2<aa(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(b){if(this.g){var A=this.g.responseText;return b&&A.indexOf(b)==0&&(A=A.substring(b.length)),QW(A)}};function SS(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function vK(b){const A={};b=(b.g&&2<=aa(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<b.length;B++){if(E(b[B]))continue;var O=R(b[B]);const W=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const J=A[W]||[];A[W]=J,J.push(O)}_(A,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dg(b,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[b]||A}function IS(b){this.Aa=0,this.i=[],this.j=new xg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dg("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dg("baseRetryDelayMs",5e3,b),this.cb=Dg("retryDelaySeedMs",1e4,b),this.Wa=Dg("forwardChannelMaxRetries",2,b),this.wa=Dg("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new aS(b&&b.concurrentRequestLimit),this.Da=new UK,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=IS.prototype,e.la=8,e.G=1,e.connect=function(b,A,O,B){ji(0),this.W=b,this.H=A||{},O&&B!==void 0&&(this.H.OSID=O,this.H.OAID=B),this.F=this.X,this.I=OS(this,null,this.W),kp(this)};function Vy(b){if(xS(b),b.G==3){var A=b.U++,O=oa(b.I);if(Qt(O,"SID",b.K),Qt(O,"RID",A),Qt(O,"TYPE","terminate"),Og(b,O),A=new pl(b,b.j,A),A.L=2,A.v=xp(oa(O)),O=!1,a.navigator&&a.navigator.sendBeacon)try{O=a.navigator.sendBeacon(A.v.toString(),"")}catch{}!O&&a.Image&&(new Image().src=A.v,O=!0),O||(A.g=NS(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Tp(A)}DS(b)}function Rp(b){b.g&&(Gy(b),b.g.cancel(),b.g=null)}function xS(b){Rp(b),b.u&&(a.clearTimeout(b.u),b.u=null),Lp(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&a.clearTimeout(b.s),b.s=null)}function kp(b){if(!lS(b.h)&&!b.s){b.s=!0;var A=b.Ga;G||q(),j||(G(),j=!0),X.add(A,b),b.B=0}}function wK(b,A){return cS(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=A.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Ig(f(b.Ga,b,A),LS(b,b.B)),b.B++,!0)}e.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const W=new pl(this,this.j,b);let J=this.o;if(this.S&&(J?(J=T(J),C(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var A=0,O=0;O<this.i.length;O++){t:{var B=this.i[O];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(A+=B,4096<A){A=O;break e}if(A===4096||O===this.i.length-1){A=O+1;break e}}A=1e3}else A=1e3;A=AS(this,W,A),O=oa(this.I),Qt(O,"RID",b),Qt(O,"CVER",22),this.D&&Qt(O,"X-HTTP-Session-Id",this.D),Og(this,O),J&&(this.O?A="headers="+encodeURIComponent(String(ES(J)))+"&"+A:this.m&&Hy(O,this.m,J)),zy(this.h,W),this.Ua&&Qt(O,"TYPE","init"),this.P?(Qt(O,"$req",A),Qt(O,"SID","null"),W.T=!0,Ny(W,O,null)):Ny(W,O,A),this.G=2}}else this.G==3&&(b?CS(this,b):this.i.length==0||lS(this.h)||CS(this))};function CS(b,A){var O;A?O=A.l:O=b.U++;const B=oa(b.I);Qt(B,"SID",b.K),Qt(B,"RID",O),Qt(B,"AID",b.T),Og(b,B),b.m&&b.o&&Hy(B,b.m,b.o),O=new pl(b,b.j,O,b.B+1),b.m===null&&(O.H=b.o),A&&(b.i=A.D.concat(b.i)),A=AS(b,O,1e3),O.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),zy(b.h,O),Ny(O,B,A)}function Og(b,A){b.H&&M(b.H,function(O,B){Qt(A,B,O)}),b.l&&fS({},function(O,B){Qt(A,B,O)})}function AS(b,A,O){O=Math.min(b.i.length,O);var B=b.l?f(b.l.Na,b.l,b):null;e:{var W=b.i;let J=-1;for(;;){const de=["count="+O];J==-1?0<O?(J=W[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let Ht=!0;for(let pi=0;pi<O;pi++){let vt=W[pi].g;const Ci=W[pi].map;if(vt-=J,0>vt)J=Math.max(0,W[pi].g-100),Ht=!1;else try{bK(Ci,de,"req"+vt+"_")}catch{B&&B(Ci)}}if(Ht){B=de.join("&");break e}}}return b=b.i.splice(0,O),A.D=b,B}function MS(b){if(!b.g&&!b.u){b.Y=1;var A=b.Fa;G||q(),j||(G(),j=!0),X.add(A,b),b.v=0}}function $y(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Ig(f(b.Fa,b),LS(b,b.v)),b.v++,!0)}e.Fa=function(){if(this.u=null,RS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Ig(f(this.ab,this),b)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ji(10),Rp(this),RS(this))};function Gy(b){b.A!=null&&(a.clearTimeout(b.A),b.A=null)}function RS(b){b.g=new pl(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var A=oa(b.qa);Qt(A,"RID","rpc"),Qt(A,"SID",b.K),Qt(A,"AID",b.T),Qt(A,"CI",b.F?"0":"1"),!b.F&&b.ja&&Qt(A,"TO",b.ja),Qt(A,"TYPE","xmlhttp"),Og(b,A),b.m&&b.o&&Hy(A,b.m,b.o),b.L&&(b.g.I=b.L);var O=b.g;b=b.ia,O.L=1,O.v=xp(oa(A)),O.m=null,O.P=!0,rS(O,b)}e.Za=function(){this.C!=null&&(this.C=null,Rp(this),$y(this),ji(19))};function Lp(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function kS(b,A){var O=null;if(b.g==A){Lp(b),Gy(b),b.g=null;var B=2}else if(By(b.h,A))O=A.D,uS(b.h,A),B=1;else return;if(b.G!=0){if(A.o)if(B==1){O=A.m?A.m.length:0,A=Date.now()-A.F;var W=b.B;B=vp(),Xi(B,new eS(B,O)),kp(b)}else MS(b);else if(W=A.s,W==3||W==0&&0<A.X||!(B==1&&wK(b,A)||B==2&&$y(b)))switch(O&&0<O.length&&(A=b.h,A.i=A.i.concat(O)),W){case 1:nu(b,5);break;case 4:nu(b,10);break;case 3:nu(b,6);break;default:nu(b,2)}}}function LS(b,A){let O=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(O*=2),O*A}function nu(b,A){if(b.j.info("Error code "+A),A==2){var O=f(b.fb,b),B=b.Xa;const W=!B;B=new tu(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sp(B,"https"),xp(B),W?mK(B.toString(),O):pK(B.toString(),O)}else ji(2);b.G=0,b.l&&b.l.sa(A),DS(b),xS(b)}e.fb=function(b){b?(this.j.info("Successfully pinged google.com"),ji(2)):(this.j.info("Failed to ping google.com"),ji(1))};function DS(b){if(b.G=0,b.ka=[],b.l){const A=dS(b.h);(A.length!=0||b.i.length!=0)&&(U(b.ka,A),U(b.ka,b.i),b.h.i.length=0,p(b.i),b.i.length=0),b.l.ra()}}function OS(b,A,O){var B=O instanceof tu?oa(O):new tu(O);if(B.g!="")A&&(B.g=A+"."+B.g),Ip(B,B.s);else{var W=a.location;B=W.protocol,A=A?A+"."+W.hostname:W.hostname,W=+W.port;var J=new tu(null);B&&Sp(J,B),A&&(J.g=A),W&&Ip(J,W),O&&(J.l=O),B=J}return O=b.D,A=b.ya,O&&A&&Qt(B,O,A),Qt(B,"VER",b.la),Og(b,B),B}function NS(b,A,O){if(A&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=b.Ca&&!b.pa?new pn(new Cp({eb:O})):new pn(b.pa),A.Ha(b.J),A}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function PS(){}e=PS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Dp(){}Dp.prototype.g=function(b,A){return new Ir(b,A)};function Ir(b,A){xi.call(this),this.g=new IS(A),this.l=b,this.h=A&&A.messageUrlParams||null,b=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(b?b["X-WebChannel-Content-Type"]=A.messageContentType:b={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(b?b["X-WebChannel-Client-Profile"]=A.va:b={"X-WebChannel-Client-Profile":A.va}),this.g.S=b,(b=A&&A.Sb)&&!E(b)&&(this.g.m=b),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!E(A)&&(this.g.D=A,b=this.h,b!==null&&A in b&&(b=this.h,A in b&&delete b[A])),this.j=new Xd(this)}m(Ir,xi),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){Vy(this.g)},Ir.prototype.o=function(b){var A=this.g;if(typeof b=="string"){var O={};O.__data__=b,b=O}else this.u&&(O={},O.__data__=My(b),b=O);A.i.push(new sK(A.Ya++,b)),A.G==3&&kp(A)},Ir.prototype.N=function(){this.g.l=null,delete this.j,Vy(this.g),delete this.g,Ir.aa.N.call(this)};function FS(b){ky.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var A=b.__sm__;if(A){e:{for(const O in A){b=O;break e}b=void 0}(this.i=b)&&(b=this.i,A=A!==null&&b in A?A[b]:void 0),this.data=A}else this.data=b}m(FS,ky);function BS(){Ly.call(this),this.status=1}m(BS,Ly);function Xd(b){this.g=b}m(Xd,PS),Xd.prototype.ua=function(){Xi(this.g,"a")},Xd.prototype.ta=function(b){Xi(this.g,new FS(b))},Xd.prototype.sa=function(b){Xi(this.g,new BS)},Xd.prototype.ra=function(){Xi(this.g,"b")},Dp.prototype.createWebChannel=Dp.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,oY=function(){return new Dp},sY=function(){return vp()},rY=Jc,q4={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wp.NO_ERROR=0,wp.TIMEOUT=8,wp.HTTP_ERROR=6,x2=wp,tS.COMPLETE="complete",iY=tS,ZT.EventType=Tg,Tg.OPEN="a",Tg.CLOSE="b",Tg.ERROR="c",Tg.MESSAGE="d",xi.prototype.listen=xi.prototype.K,D1=ZT,pn.prototype.listenOnce=pn.prototype.L,pn.prototype.getLastError=pn.prototype.Ka,pn.prototype.getLastErrorCode=pn.prototype.Ba,pn.prototype.getStatus=pn.prototype.Z,pn.prototype.getResponseJson=pn.prototype.Oa,pn.prototype.getResponseText=pn.prototype.oa,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Ha,nY=pn}).apply(typeof kU<"u"?kU:typeof self<"u"?self:typeof window<"u"?window:{});const eL="@firebase/firestore",tL="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Xj("@firebase/firestore");function mf(){return _d.logLevel}function Ee(e,...t){if(_d.logLevel<=ft.DEBUG){const n=t.map(iT);_d.debug(`Firestore (${yg}): ${e}`,...n)}}function cl(e,...t){if(_d.logLevel<=ft.ERROR){const n=t.map(iT);_d.error(`Firestore (${yg}): ${e}`,...n)}}function Xh(e,...t){if(_d.logLevel<=ft.WARN){const n=t.map(iT);_d.warn(`Firestore (${yg}): ${e}`,...n)}}function iT(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(e="Unexpected state"){const t=`FIRESTORE (${yg}) INTERNAL ASSERTION FAILED: `+e;throw cl(t),new Error(t)}function Xt(e,t){e||ke()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Fd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Awe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Oi.UNAUTHENTICATED))}shutdown(){}}class Mwe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Rwe{constructor(t){this.t=t,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Xt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Ec;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ec,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ec)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xt(typeof i.accessToken=="string"),new aY(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string"),new Oi(t)}}class kwe{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Lwe{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new kwe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nL{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dwe{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Kj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Xt(this.o===void 0);const i=s=>{s.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new nL(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Xt(typeof n.token=="string"),this.R=n.token,new nL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Owe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Owe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function ht(e,t){return e<t?-1:e>t?1:0}function jh(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=-62135596800,rL=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*rL);return new gi(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Se(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<iL)throw new Se(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Se(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rL}_compareTo(t){return this.seconds===t.seconds?ht(this.nanoseconds,t.nanoseconds):ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-iL;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(t){return new Pe(t)}static min(){return new Pe(new gi(0,0))}static max(){return new Pe(new gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="__name__";class Io{constructor(t,n,i){n===void 0?n=0:n>t.length&&ke(),i===void 0?i=t.length-n:i>t.length-n&&ke(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Io.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Io?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Io.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=Io.isNumericId(t),r=Io.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Io.extractNumericId(t).compare(Io.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return yc.fromString(t.substring(4,t.length-2))}}class ln extends Io{construct(t,n,i){return new ln(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Se(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ln(n)}static emptyPath(){return new ln([])}}const Nwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fi extends Io{construct(t,n,i){return new Fi(t,n,i)}static isValidIdentifier(t){return Nwe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sL}static keyField(){return new Fi([sL])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Se(re.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Se(re.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Se(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Se(re.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fi(n)}static emptyPath(){return new Fi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.path=t}static fromPath(t){return new Le(ln.fromString(t))}static fromName(t){return new Le(ln.fromString(t).popFirst(5))}static empty(){return new Le(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ln.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ln.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Le(new ln(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=-1;function Pwe(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Pe.fromTimestamp(i===1e9?new gi(n+1,0):new gi(n,i));return new Fc(r,Le.empty(),t)}function Fwe(e){return new Fc(e.readTime,e.key,w0)}class Fc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Fc(Pe.min(),Le.empty(),w0)}static max(){return new Fc(Pe.max(),Le.empty(),w0)}}function Bwe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Le.comparator(e.documentKey,t.documentKey),n!==0?n:ht(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zwe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hwe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(e){if(e.code!==re.FAILED_PRECONDITION||e.message!==zwe)throw e;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ne((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.reject(n)}static resolve(t){return new ne((n,i)=>{n(t)})}static reject(t){return new ne((n,i)=>{i(t)})}static waitFor(t){return new ne((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=ne.resolve(!1);for(const i of t)n=n.next(r=>r?ne.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new ne((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new ne((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function Vwe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eg(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}fy.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $we=-1;function mp(e){return e==null}function b6(e){return e===0&&1/e==-1/0}function Gwe(e){return typeof e=="number"&&Number.isInteger(e)&&!b6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY="";function Xwe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=oL(t)),t=jwe(e.get(n),t);return oL(t)}function jwe(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case cY:n+="";break;default:n+=s}}return n}function oL(e){return e+cY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,n){this.comparator=t,this.root=n||Ei.EMPTY}insert(t,n){return new An(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(t){return new An(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new LU(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new LU(this.root,t,this.comparator,!1)}getReverseIterator(){return new LU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new LU(this.root,t,this.comparator,!0)}}class LU{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ei{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Ei.RED,this.left=r??Ei.EMPTY,this.right=s??Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new Ei(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Ei.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const t=this.left.check();if(t!==this.right.check())throw ke();return t+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1;Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(t,n,i,r,s){return this}insert(t,n,i){return new Ei(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.comparator=t,this.data=new An(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new lL(this.data.getIterator())}getIteratorFrom(t){return new lL(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ti)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ti(this.comparator);return n.data=t,n}}class lL{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t){this.fields=t,t.sort(Fi.comparator)}static empty(){return new ps([])}unionWith(t){let n=new ti(Fi.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ps(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return jh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dY("Invalid base64 string: "+s):s}}(t);return new Si(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Si(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const Ywe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(e){if(Xt(!!e),typeof e=="string"){let t=0;const n=Ywe.exec(e);if(Xt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:In(e.seconds),nanos:In(e.nanos)}}function In(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function zc(e){return typeof e=="string"?Si.fromBase64String(e):Si.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="server_timestamp",hY="__type__",gY="__previous_value__",mY="__local_write_time__";function rT(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[hY])===null||n===void 0?void 0:n.stringValue)===fY}function hy(e){const t=e.mapValue.fields[gY];return rT(t)?hy(t):t}function _0(e){const t=Bc(e.mapValue.fields[mY].timestampValue);return new gi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wwe{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const y6="(default)";class T0{constructor(t,n){this.projectId=t,this.database=n||y6}static empty(){return new T0("","")}get isDefaultDatabase(){return this.database===y6}isEqual(t){return t instanceof T0&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY="__type__",Kwe="__max__",DU={mapValue:{}},UY="__vector__",E6="value";function Hc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rT(e)?4:qwe(e)?9007199254740991:Zwe(e)?10:11:ke()}function Jo(e,t){if(e===t)return!0;const n=Hc(e);if(n!==Hc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _0(e).isEqual(_0(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Bc(r.timestampValue),a=Bc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return zc(r.bytesValue).isEqual(zc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return In(r.geoPointValue.latitude)===In(s.geoPointValue.latitude)&&In(r.geoPointValue.longitude)===In(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return In(r.integerValue)===In(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=In(r.doubleValue),a=In(s.doubleValue);return o===a?b6(o)===b6(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return jh(e.arrayValue.values||[],t.arrayValue.values||[],Jo);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(aL(o)!==aL(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Jo(o[l],a[l])))return!1;return!0}(e,t);default:return ke()}}function S0(e,t){return(e.values||[]).find(n=>Jo(n,t))!==void 0}function Yh(e,t){if(e===t)return 0;const n=Hc(e),i=Hc(t);if(n!==i)return ht(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=In(s.integerValue||s.doubleValue),l=In(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return cL(e.timestampValue,t.timestampValue);case 4:return cL(_0(e),_0(t));case 5:return ht(e.stringValue,t.stringValue);case 6:return function(s,o){const a=zc(s),l=zc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ht(a[c],l[c]);if(u!==0)return u}return ht(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ht(In(s.latitude),In(o.latitude));return a!==0?a:ht(In(s.longitude),In(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return uL(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[E6])===null||a===void 0?void 0:a.arrayValue,m=(l=f[E6])===null||l===void 0?void 0:l.arrayValue,p=ht(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:uL(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===DU.mapValue&&o===DU.mapValue)return 0;if(s===DU.mapValue)return 1;if(o===DU.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ht(l[d],u[d]);if(f!==0)return f;const h=Yh(a[l[d]],c[u[d]]);if(h!==0)return h}return ht(l.length,u.length)}(e.mapValue,t.mapValue);default:throw ke()}}function cL(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ht(e,t);const n=Bc(e),i=Bc(t),r=ht(n.seconds,i.seconds);return r!==0?r:ht(n.nanos,i.nanos)}function uL(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Yh(n[r],i[r]);if(s)return s}return ht(n.length,i.length)}function Wh(e){return Q4(e)}function Q4(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Bc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return zc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Le.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Q4(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Q4(n.fields[o])}`;return r+"}"}(e.mapValue):ke()}function C2(e){switch(Hc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hy(e);return t?16+C2(t):16;case 5:return 2*e.stringValue.length;case 6:return zc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+C2(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Bd(i.fields,(s,o)=>{r+=s.length+C2(o)}),r}(e.mapValue);default:throw ke()}}function J4(e){return!!e&&"integerValue"in e}function sT(e){return!!e&&"arrayValue"in e}function dL(e){return!!e&&"nullValue"in e}function fL(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function t3(e){return!!e&&"mapValue"in e}function Zwe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[pY])===null||n===void 0?void 0:n.stringValue)===UY}function bm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Bd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=bm(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bm(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qwe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Kwe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t){this.value=t}static empty(){return new hr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!t3(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=bm(n)}setAll(t){let n=Fi.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=bm(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());t3(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Jo(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];t3(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Bd(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new hr(bm(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ui(t,0,Pe.min(),Pe.min(),Pe.min(),hr.empty(),0)}static newFoundDocument(t,n,i,r){return new ui(t,1,n,Pe.min(),i,r,0)}static newNoDocument(t,n){return new ui(t,2,n,Pe.min(),Pe.min(),hr.empty(),0)}static newUnknownDocument(t,n){return new ui(t,3,n,Pe.min(),Pe.min(),hr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t,n){this.position=t,this.inclusive=n}}function hL(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=Le.comparator(Le.fromName(o.referenceValue),n.key):i=Yh(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function gL(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Jo(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t,n="asc"){this.field=t,this.dir=n}}function Qwe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{}class ei extends bY{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new e9e(t,n,i):n==="array-contains"?new i9e(t,i):n==="in"?new r9e(t,i):n==="not-in"?new s9e(t,i):n==="array-contains-any"?new o9e(t,i):new ei(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new t9e(t,i):new n9e(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yh(n,this.value)):n!==null&&Hc(this.value)===Hc(n)&&this.matchesComparison(Yh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ea extends bY{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new ea(t,n)}matches(t){return yY(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function yY(e){return e.op==="and"}function EY(e){return Jwe(e)&&yY(e)}function Jwe(e){for(const t of e.filters)if(t instanceof ea)return!1;return!0}function ev(e){if(e instanceof ei)return e.field.canonicalString()+e.op.toString()+Wh(e.value);if(EY(e))return e.filters.map(t=>ev(t)).join(",");{const t=e.filters.map(n=>ev(n)).join(",");return`${e.op}(${t})`}}function vY(e,t){return e instanceof ei?function(i,r){return r instanceof ei&&i.op===r.op&&i.field.isEqual(r.field)&&Jo(i.value,r.value)}(e,t):e instanceof ea?function(i,r){return r instanceof ea&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&vY(o,r.filters[a]),!0):!1}(e,t):void ke()}function wY(e){return e instanceof ei?function(n){return`${n.field.canonicalString()} ${n.op} ${Wh(n.value)}`}(e):e instanceof ea?function(n){return n.op.toString()+" {"+n.getFilters().map(wY).join(" ,")+"}"}(e):"Filter"}class e9e extends ei{constructor(t,n,i){super(t,n,i),this.key=Le.fromName(i.referenceValue)}matches(t){const n=Le.comparator(t.key,this.key);return this.matchesComparison(n)}}class t9e extends ei{constructor(t,n){super(t,"in",n),this.keys=_Y("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class n9e extends ei{constructor(t,n){super(t,"not-in",n),this.keys=_Y("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function _Y(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Le.fromName(i.referenceValue))}class i9e extends ei{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return sT(n)&&S0(n.arrayValue,this.value)}}class r9e extends ei{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&S0(this.value.arrayValue,n)}}class s9e extends ei{constructor(t,n){super(t,"not-in",n)}matches(t){if(S0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!S0(this.value.arrayValue,n)}}class o9e extends ei{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!sT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>S0(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9e{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function mL(e,t=null,n=[],i=[],r=null,s=null,o=null){return new a9e(e,t,n,i,r,s,o)}function oT(e){const t=tt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>ev(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),mp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Wh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Wh(i)).join(",")),t.le=n}return t.le}function aT(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qwe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vY(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gL(e.startAt,t.startAt)&&gL(e.endAt,t.endAt)}function tv(e){return Le.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function l9e(e,t,n,i,r,s,o,a){return new gy(e,t,n,i,r,s,o,a)}function lT(e){return new gy(e)}function pL(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function c9e(e){return e.collectionGroup!==null}function ym(e){const t=tt(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ti(Fi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new w6(s,i))}),n.has(Fi.keyField().canonicalString())||t.he.push(new w6(Fi.keyField(),i))}return t.he}function Ho(e){const t=tt(e);return t.Pe||(t.Pe=u9e(t,ym(e))),t.Pe}function u9e(e,t){if(e.limitType==="F")return mL(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new w6(r.field,s)});const n=e.endAt?new v6(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new v6(e.startAt.position,e.startAt.inclusive):null;return mL(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function nv(e,t,n){return new gy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function my(e,t){return aT(Ho(e),Ho(t))&&e.limitType===t.limitType}function TY(e){return`${oT(Ho(e))}|lt:${e.limitType}`}function pf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>wY(r)).join(", ")}]`),mp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Wh(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Wh(r)).join(",")),`Target(${i})`}(Ho(e))}; limitType=${e.limitType})`}function py(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Le.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of ym(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=hL(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,ym(i),r)||i.endAt&&!function(o,a,l){const c=hL(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,ym(i),r))}(e,t)}function d9e(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SY(e){return(t,n)=>{let i=!1;for(const r of ym(e)){const s=f9e(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function f9e(e,t,n){const i=e.field.isKeyField()?Le.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Yh(l,c):ke()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Bd(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return uY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9e=new An(Le.comparator);function Vc(){return h9e}const IY=new An(Le.comparator);function O1(...e){let t=IY;for(const n of e)t=t.insert(n.key,n);return t}function g9e(e){let t=IY;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Lu(){return Em()}function xY(){return Em()}function Em(){return new zd(e=>e.toString(),(e,t)=>e.isEqual(t))}const m9e=new ti(Le.comparator);function Et(...e){let t=m9e;for(const n of e)t=t.add(n);return t}const p9e=new ti(ht);function U9e(){return p9e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b6(t)?"-0":t}}function CY(e){return{integerValue:""+e}}function b9e(e,t){return Gwe(t)?CY(t):cT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this._=void 0}}function y9e(e,t,n){return e instanceof _6?function(r,s){const o={fields:{[hY]:{stringValue:fY},[mY]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&rT(s)&&(s=hy(s)),s&&(o.fields[gY]=s),{mapValue:o}}(n,t):e instanceof I0?AY(e,t):e instanceof x0?MY(e,t):function(r,s){const o=v9e(r,s),a=UL(o)+UL(r.Ie);return J4(o)&&J4(r.Ie)?CY(a):cT(r.serializer,a)}(e,t)}function E9e(e,t,n){return e instanceof I0?AY(e,t):e instanceof x0?MY(e,t):n}function v9e(e,t){return e instanceof T6?function(i){return J4(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class _6 extends Uy{}class I0 extends Uy{constructor(t){super(),this.elements=t}}function AY(e,t){const n=RY(t);for(const i of e.elements)n.some(r=>Jo(r,i))||n.push(i);return{arrayValue:{values:n}}}class x0 extends Uy{constructor(t){super(),this.elements=t}}function MY(e,t){let n=RY(t);for(const i of e.elements)n=n.filter(r=>!Jo(r,i));return{arrayValue:{values:n}}}class T6 extends Uy{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function UL(e){return In(e.integerValue||e.doubleValue)}function RY(e){return sT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function w9e(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof I0&&r instanceof I0||i instanceof x0&&r instanceof x0?jh(i.elements,r.elements,Jo):i instanceof T6&&r instanceof T6?Jo(i.Ie,r.Ie):i instanceof _6&&r instanceof _6}(e.transform,t.transform)}class ds{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ds}static exists(t){return new ds(void 0,t)}static updateTime(t){return new ds(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function A2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class by{}function kY(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new uT(e.key,ds.none()):new pp(e.key,e.data,ds.none());{const n=e.data,i=hr.empty();let r=new ti(Fi.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Hd(e.key,i,new ps(r.toArray()),ds.none())}}function _9e(e,t,n){e instanceof pp?function(r,s,o){const a=r.value.clone(),l=yL(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Hd?function(r,s,o){if(!A2(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=yL(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(LY(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function vm(e,t,n,i){return e instanceof pp?function(s,o,a,l){if(!A2(s.precondition,o))return a;const c=s.value.clone(),u=EL(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Hd?function(s,o,a,l){if(!A2(s.precondition,o))return a;const c=EL(s.fieldTransforms,l,o),u=o.data;return u.setAll(LY(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return A2(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function bL(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&jh(i,r,(s,o)=>w9e(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pp extends by{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hd extends by{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LY(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function yL(e,t,n){const i=new Map;Xt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,E9e(o,a,n[r]))}return i}function EL(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,y9e(s,o,t))}return i}class uT extends by{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DY extends by{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9e{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&_9e(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=vm(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=vm(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=xY();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=kY(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Et())}isEqual(t){return this.batchId===t.batchId&&jh(this.mutations,t.mutations,(n,i)=>bL(n,i))&&jh(this.baseMutations,t.baseMutations,(n,i)=>bL(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9e{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9e{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn,ut;function x9e(e){switch(e){case re.OK:return ke();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ke()}}function OY(e){if(e===void 0)return cl("GRPC error has no .code"),re.UNKNOWN;switch(e){case kn.OK:return re.OK;case kn.CANCELLED:return re.CANCELLED;case kn.UNKNOWN:return re.UNKNOWN;case kn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case kn.INTERNAL:return re.INTERNAL;case kn.UNAVAILABLE:return re.UNAVAILABLE;case kn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case kn.NOT_FOUND:return re.NOT_FOUND;case kn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case kn.ABORTED:return re.ABORTED;case kn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case kn.DATA_LOSS:return re.DATA_LOSS;default:return ke()}}(ut=kn||(kn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9e=new yc([4294967295,4294967295],0);function vL(e){const t=C9e().encode(e),n=new tY;return n.update(t),new Uint8Array(n.digest())}function wL(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new yc([n,i],0),new yc([r,s],0)]}class dT{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new N1(`Invalid padding: ${n}`);if(i<0)throw new N1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new N1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new N1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=yc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(yc.fromNumber(i)));return r.compare(A9e)===1&&(r=new yc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=vL(t),[i,r]=wL(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new dT(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=vL(t),[i,r]=wL(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class N1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Up.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new yy(Pe.min(),r,new An(ht),Vc(),Et())}}class Up{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Up(i,n,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class NY{constructor(t,n){this.targetId=t,this.ge=n}}class PY{constructor(t,n,i=Si.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class _L{constructor(){this.pe=0,this.ye=TL(),this.we=Si.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Et(),n=Et(),i=Et();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ke()}}),new Up(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=TL()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Xt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class M9e{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Vc(),this.$e=OU(),this.Ke=OU(),this.Ue=new An(ht)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:ke()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(tv(s))if(i===0){const o=new Le(s.path);this.ze(n,o,ui.newNoDocument(o,Pe.min()))}else Xt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=zc(i).toUint8Array()}catch(l){if(l instanceof dY)return Xh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dT(o,r,s)}catch(l){return Xh(l instanceof N1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&tv(a.target)){const l=new Le(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,ui.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=Et();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new yy(t,n,this.Ue,this.Qe,i);return this.Qe=Vc(),this.$e=OU(),this.Ke=OU(),this.Ue=new An(ht),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new _L,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new ti(ht),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new ti(ht),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new _L),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function OU(){return new An(Le.comparator)}function TL(){return new An(Le.comparator)}const R9e={asc:"ASCENDING",desc:"DESCENDING"},k9e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L9e={and:"AND",or:"OR"};class D9e{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function iv(e,t){return e.useProto3Json||mp(t)?t:{value:t}}function S6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function FY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function O9e(e,t){return S6(e,t.toTimestamp())}function Xa(e){return Xt(!!e),Pe.fromTimestamp(function(n){const i=Bc(n);return new gi(i.seconds,i.nanos)}(e))}function fT(e,t){return rv(e,t).canonicalString()}function rv(e,t){const n=function(r){return new ln(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BY(e){const t=ln.fromString(e);return Xt(GY(t)),t}function I6(e,t){return fT(e.databaseId,t.path)}function wm(e,t){const n=BY(t);if(n.get(1)!==e.databaseId.projectId)throw new Se(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Se(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Le(HY(n))}function zY(e,t){return fT(e.databaseId,t)}function N9e(e){const t=BY(e);return t.length===4?ln.emptyPath():HY(t)}function SL(e){return new ln(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function HY(e){return Xt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function IL(e,t,n){return{name:I6(e,t),fields:n.value.mapValue.fields}}function P9e(e,t){return"found"in t?function(i,r){Xt(!!r.found),r.found.name,r.found.updateTime;const s=wm(i,r.found.name),o=Xa(r.found.updateTime),a=r.found.createTime?Xa(r.found.createTime):Pe.min(),l=new hr({mapValue:{fields:r.found.fields}});return ui.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){Xt(!!r.missing),Xt(!!r.readTime);const s=wm(i,r.missing),o=Xa(r.readTime);return ui.newNoDocument(s,o)}(e,t):ke()}function F9e(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ke()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Xt(u===void 0||typeof u=="string"),Si.fromBase64String(u||"")):(Xt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Si.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?re.UNKNOWN:OY(c.code);return new Se(u,c.message||"")}(o);n=new PY(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=wm(e,i.document.name),s=Xa(i.document.updateTime),o=i.document.createTime?Xa(i.document.createTime):Pe.min(),a=new hr({mapValue:{fields:i.document.fields}}),l=ui.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new M2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=wm(e,i.document),s=i.readTime?Xa(i.readTime):Pe.min(),o=ui.newNoDocument(r,s),a=i.removedTargetIds||[];n=new M2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=wm(e,i.document),s=i.removedTargetIds||[];n=new M2([],s,r,null)}else{if(!("filter"in t))return ke();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new I9e(r,s),a=i.targetId;n=new NY(a,o)}}return n}function B9e(e,t){let n;if(t instanceof pp)n={update:IL(e,t.key,t.value)};else if(t instanceof uT)n={delete:I6(e,t.key)};else if(t instanceof Hd)n={update:IL(e,t.key,t.data),updateMask:Y9e(t.fieldMask)};else{if(!(t instanceof DY))return ke();n={verify:I6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof _6)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof I0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof x0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof T6)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ke()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:O9e(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ke()}(e,t.precondition)),n}function z9e(e,t){return{documents:[zY(e,t.path)]}}function H9e(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zY(e,r);const s=function(c){if(c.length!==0)return $Y(ea.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Uf(f.field),direction:G9e(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iv(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function V9e(e){let t=N9e(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Xt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=VY(d);return f instanceof ea&&EY(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new w6(bf(m.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,mp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new v6(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new v6(h,f)}(n.endAt)),l9e(t,r,o,s,a,"F",l,c)}function $9e(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function VY(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bf(n.unaryFilter.field);return ei.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=bf(n.unaryFilter.field);return ei.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bf(n.unaryFilter.field);return ei.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bf(n.unaryFilter.field);return ei.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(e):e.fieldFilter!==void 0?function(n){return ei.create(bf(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ea.create(n.compositeFilter.filters.map(i=>VY(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ke()}}(n.compositeFilter.op))}(e):ke()}function G9e(e){return R9e[e]}function X9e(e){return k9e[e]}function j9e(e){return L9e[e]}function Uf(e){return{fieldPath:e.canonicalString()}}function bf(e){return Fi.fromServerFormat(e.fieldPath)}function $Y(e){return e instanceof ei?function(n){if(n.op==="=="){if(fL(n.value))return{unaryFilter:{field:Uf(n.field),op:"IS_NAN"}};if(dL(n.value))return{unaryFilter:{field:Uf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fL(n.value))return{unaryFilter:{field:Uf(n.field),op:"IS_NOT_NAN"}};if(dL(n.value))return{unaryFilter:{field:Uf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uf(n.field),op:X9e(n.op),value:n.value}}}(e):e instanceof ea?function(n){const i=n.getFilters().map(r=>$Y(r));return i.length===1?i[0]:{compositeFilter:{op:j9e(n.op),filters:i}}}(e):ke()}function Y9e(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function GY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,n,i,r,s=Pe.min(),o=Pe.min(),a=Si.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new ec(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9e{constructor(t){this.Tt=t}}function K9e(e){const t=V9e({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?nv(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9e{constructor(){this.Tn=new q9e}addToCollectionParentIndex(t,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(t,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ne.resolve()}deleteFieldIndex(t,n){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,n){return ne.resolve()}getDocumentsMatchingTarget(t,n){return ne.resolve(null)}getIndexType(t,n){return ne.resolve(0)}getFieldIndexes(t,n){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,n){return ne.resolve(Fc.min())}getMinOffsetFromCollectionGroup(t,n){return ne.resolve(Fc.min())}updateCollectionGroup(t,n,i){return ne.resolve()}updateIndexEntries(t,n){return ne.resolve()}}class q9e{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ti(ln.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ti(ln.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XY=41943040;class fr{static withCacheSize(t){return new fr(t,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(XY,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Kh(0)}static Un(){return new Kh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="LruGarbageCollector",Q9e=1048576;function AL([e,t],[n,i]){const r=ht(e,n);return r===0?ht(t,i):r}class J9e{constructor(t){this.Hn=t,this.buffer=new ti(AL),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();AL(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e_e{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ee(CL,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eg(n)?Ee(CL,"Ignoring IndexedDB error during garbage collection: ",n):await dy(n)}await this.er(3e5)})}}class t_e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ne.resolve(fy.ae);const i=new J9e(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(xL)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),mf()<=ft.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function n_e(e,t){return new t_e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_e{constructor(){this.changes=new zd(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ui.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_e{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&vm(i.mutation,r,ps.empty(),gi.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Et()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Et()){const r=Lu();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=O1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Lu();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Et()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Vc();const o=Em(),a=function(){return Em()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Hd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),vm(u.mutation,c,u.mutation.getFieldMask(),gi.now())):o.set(c.key,ps.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new r_e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=Em();let r=new An((o,a)=>o-a),s=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||ps.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||Et()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=xY();u.forEach(f=>{if(!s.has(f)){const h=kY(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ne.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return Le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):c9e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):ne.resolve(Lu());let a=w0,l=s;return o.next(c=>ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Et())).next(u=>({batchId:a,changes:g9e(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Le(n)).next(i=>{let r=O1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=O1();return this.indexManager.getCollectionParents(t,s).next(a=>ne.forEach(a,l=>{const c=function(d,f){return new gy(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ui.newInvalidDocument(u)))});let a=O1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&vm(u.mutation,c,ps.empty(),gi.now()),py(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Xa(r.createTime)}}(n)),ne.resolve()}getNamedQuery(t,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:K9e(r.bundledQuery),readTime:Xa(r.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_e{constructor(){this.overlays=new An(Le.comparator),this.Rr=new Map}getOverlay(t,n){return ne.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Lu();return ne.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),ne.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(t,n,i){const r=Lu(),s=n.length+1,o=new Le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return ne.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new An((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Lu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Lu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return ne.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new S9e(n,i));let s=this.Rr.get(n);s===void 0&&(s=Et(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_e{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.Vr=new ti(ai.mr),this.gr=new ti(ai.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new ai(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new ai(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Le(new ln([])),i=new ai(n,t),r=new ai(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Le(new ln([])),i=new ai(n,t),r=new ai(n,t+1);let s=Et();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ai(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ai{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Le.comparator(t.key,n.key)||ht(t.Cr,n.Cr)}static pr(t,n){return ht(t.Cr,n.Cr)||Le.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ti(ai.mr)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T9e(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new ai(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(t,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?$we:this.Fr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ai(n,0),r=new ai(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ti(ht);return n.forEach(r=>{const s=new ai(r,0),o=new ai(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Le.isDocumentKey(s)||(s=s.child(""));const o=new ai(new Le(s),0);let a=new ti(ht);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),ne.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Xt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(n.mutations,r=>{const s=new ai(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new ai(n,0),r=this.Mr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_e{constructor(t){this.kr=t,this.docs=function(){return new An(Le.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():ui.newInvalidDocument(n))}getEntries(t,n){let i=Vc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ui.newInvalidDocument(r))}),ne.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Vc();const o=n.path,a=new Le(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Bwe(Fwe(u),i)<=0||(r.has(u.key)||py(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(t,n,i,r){ke()}qr(t,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new d_e(this)}getSize(t){return ne.resolve(this.size)}}class d_e extends i_e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),ne.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_e{constructor(t){this.persistence=t,this.Qr=new zd(n=>oT(n),aT),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new hT,this.targetCount=0,this.Ur=Kh.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ne.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Kh(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(t,n){return this.zn(n),ne.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),ne.waitFor(s).next(()=>r)}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ne.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ne.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ne.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ne.resolve(i)}containsKey(t,n){return ne.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new fy(0),this.zr=!1,this.zr=!0,this.jr=new l_e,this.referenceDelegate=t(this),this.Hr=new f_e(this),this.indexManager=new Z9e,this.remoteDocumentCache=function(r){return new u_e(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new W9e(n),this.Yr=new o_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new a_e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new c_e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){Ee("MemoryPersistence","Starting transaction:",t);const r=new h_e(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class h_e extends Hwe{constructor(t){super(),this.currentSequenceNumber=t}}class gT{constructor(t){this.persistence=t,this.ti=new hT,this.ni=null}static ri(t){return new gT(t)}get ii(){if(this.ni)return this.ni;throw ke()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ne.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const r=Le.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,Pe.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class x6{constructor(t,n){this.persistence=t,this.oi=new zd(i=>Xwe(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=n_e(this,n)}static ri(t,n){return new x6(t,n)}Zr(){}Xr(t){return ne.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ne.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?ne.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,Pe.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=C2(t.data.value)),n}ar(t,n,i){return ne.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return ne.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=Et(),r=Et();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new mT(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hve()?8:Vwe(dve())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g_e;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(mf()<=ft.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",pf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(mf()<=ft.DEBUG&&Ee("QueryEngine","Query:",pf(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(mf()<=ft.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",pf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ho(n))):ne.resolve())}rs(t,n){if(pL(n))return ne.resolve(null);let i=Ho(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=nv(n,null,"F"),i=Ho(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=Et(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,nv(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return pL(n)||r.isEqual(Pe.min())?ne.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?ne.resolve(null):(mf()<=ft.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pf(n)),this.hs(t,o,n,Pwe(r,w0)).next(a=>a))})}cs(t,n){let i=new ti(SY(t));return n.forEach((r,s)=>{py(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return mf()<=ft.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",pf(n)),this.ns.getDocumentsMatchingQuery(t,n,Fc.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="LocalStore",p_e=3e8;class U_e{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new An(ht),this.Is=new zd(s=>oT(s),aT),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new s_e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function b_e(e,t,n,i){return new U_e(e,t,n,i)}async function YY(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Et();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function WY(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function y_e(e,t){const n=tt(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Si.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,U,y){return p.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=p_e?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Vc(),c=Et();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(E_e(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Pe.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function E_e(e,t,n){let i=Et(),r=Et();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Vc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Ee(pT,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function v_e(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,ne.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new ec(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function sv(e,t,n){const i=tt(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Eg(o))throw o;Ee(pT,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function ML(e,t,n){const i=tt(e);let r=Pe.min(),s=Et();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=tt(l),f=d.Is.get(u);return f!==void 0?ne.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Ho(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:Pe.min(),n?s:Et())).next(a=>(w_e(i,d9e(t),a),{documents:a,gs:s})))}function w_e(e,t,n){let i=e.Es.get(t)||Pe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class RL{constructor(){this.activeTargetIds=U9e()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class __e{constructor(){this.ho=new RL,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new RL,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="ConnectivityMonitor";class LL{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ee(kL,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ee(kL,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NU=null;function ov(){return NU===null?NU=function(){return 268435456+Math.round(2147483648*Math.random())}():NU++,"0x"+NU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="RestConnection",S_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I_e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===y6?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=ov(),a=this.bo(t,n.toUriEncodedString());Ee(n3,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(Ee(n3,`Received RPC '${t}' ${o}: `,c),c),c=>{throw Xh(n3,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=S_e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="WebChannelConnection";class C_e extends I_e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=ov();return new Promise((o,a)=>{const l=new nY;l.setWithCredentials(!0),l.listenOnce(iY.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case x2.NO_ERROR:const u=l.getResponseJson();Ee(Ri,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case x2.TIMEOUT:Ee(Ri,`RPC '${t}' ${s} timed out`),a(new Se(re.DEADLINE_EXCEEDED,"Request time out"));break;case x2.HTTP_ERROR:const d=l.getStatus();if(Ee(Ri,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(U){const y=U.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(y)>=0?y:re.UNKNOWN}(h.status);a(new Se(m,h.message))}else a(new Se(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Se(re.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{Ee(Ri,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Ee(Ri,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=ov(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=oY(),a=sY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Ee(Ri,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new x_e({Fo:U=>{h?Ee(Ri,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(f||(Ee(Ri,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),Ee(Ri,`RPC '${t}' stream ${r} sending:`,U),d.send(U))},Mo:()=>d.close()}),p=(U,y,E)=>{U.listen(y,w=>{try{E(w)}catch(v){setTimeout(()=>{throw v},0)}})};return p(d,D1.EventType.OPEN,()=>{h||(Ee(Ri,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,D1.EventType.CLOSE,()=>{h||(h=!0,Ee(Ri,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,D1.EventType.ERROR,U=>{h||(h=!0,Xh(Ri,`RPC '${t}' stream ${r} transport errored:`,U),m.Ko(new Se(re.UNAVAILABLE,"The operation could not be completed")))}),p(d,D1.EventType.MESSAGE,U=>{var y;if(!h){const E=U.data[0];Xt(!!E);const w=E,v=(w==null?void 0:w.error)||((y=w[0])===null||y===void 0?void 0:y.error);if(v){Ee(Ri,`RPC '${t}' stream ${r} received error:`,v);const x=v.status;let M=function(I){const C=kn[I];if(C!==void 0)return OY(C)}(x),_=v.message;M===void 0&&(M=re.INTERNAL,_="Unknown error status: "+x+" with message "+v.message),h=!0,m.Ko(new Se(M,_)),d.close()}else Ee(Ri,`RPC '${t}' stream ${r} received:`,E),m.Uo(E)}}),p(a,rY.STAT_EVENT,U=>{U.stat===q4.PROXY?Ee(Ri,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===q4.NOPROXY&&Ee(Ri,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function i3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(e){return new D9e(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&Ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="PersistentStream";class A_e{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new UT(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(cl(n.toString()),cl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new Se(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ee(DL,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Ee(DL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M_e extends A_e{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=F9e(this.serializer,t),i=function(s){if(!("targetChange"in s))return Pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?Xa(o.readTime):Pe.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=SL(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=tv(l)?{documents:z9e(s,l)}:{query:H9e(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FY(s,o.resumeToken);const c=iv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=S6(s,o.snapshotVersion.toTimestamp());const c=iv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=$9e(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=SL(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_e{}class k_e extends R_e{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Se(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,rv(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Se(re.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,rv(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(re.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class L_e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(cl(n),this.N_=!1):Ee("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RemoteStore";class D_e{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{yp(this)&&(Ee(Zh,"Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.W_.add(4),await bp(c),c.j_.set("Unknown"),c.W_.delete(4),await vy(c)}(this))})}),this.j_=new L_e(i,r)}}async function vy(e){if(yp(e))for(const t of e.G_)await t(!0)}async function bp(e){for(const t of e.G_)await t(!1)}function KY(e,t){const n=tt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),vT(n)?ET(n):vg(n).c_()&&yT(n,t))}function bT(e,t){const n=tt(e),i=vg(n);n.U_.delete(t),i.c_()&&ZY(n,t),n.U_.size===0&&(i.c_()?i.P_():yp(n)&&n.j_.set("Unknown"))}function yT(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Pe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vg(e).y_(t)}function ZY(e,t){e.H_.Ne(t),vg(e).w_(t)}function ET(e){e.H_=new M9e({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),vg(e).start(),e.j_.B_()}function vT(e){return yp(e)&&!vg(e).u_()&&e.U_.size>0}function yp(e){return tt(e).W_.size===0}function qY(e){e.H_=void 0}async function O_e(e){e.j_.set("Online")}async function N_e(e){e.U_.forEach((t,n)=>{yT(e,t)})}async function P_e(e,t){qY(e),vT(e)?(e.j_.q_(t),ET(e)):e.j_.set("Unknown")}async function F_e(e,t,n){if(e.j_.set("Online"),t instanceof PY&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){Ee(Zh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await OL(e,i)}else if(t instanceof M2?e.H_.We(t):t instanceof NY?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Pe.min()))try{const i=await WY(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Si.EMPTY_BYTE_STRING,u.snapshotVersion)),ZY(s,l);const d=new ec(u.target,l,c,u.sequenceNumber);yT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){Ee(Zh,"Failed to raise snapshot:",i),await OL(e,i)}}async function OL(e,t,n){if(!Eg(t))throw t;e.W_.add(1),await bp(e),e.j_.set("Offline"),n||(n=()=>WY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ee(Zh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await vy(e)})}async function NL(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),Ee(Zh,"RemoteStore received new credentials");const i=yp(n);n.W_.add(3),await bp(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await vy(n)}async function B_e(e,t){const n=tt(e);t?(n.W_.delete(2),await vy(n)):t||(n.W_.add(2),await bp(n),n.j_.set("Unknown"))}function vg(e){return e.J_||(e.J_=function(n,i,r){const s=tt(n);return s.M_(),new M_e(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:O_e.bind(null,e),No:N_e.bind(null,e),Lo:P_e.bind(null,e),p_:F_e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),vT(e)?ET(e):e.j_.set("Unknown")):(await e.J_.stop(),qY(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new wT(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(re.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function QY(e,t){if(cl("AsyncQueue",`${t}: ${e}`),Eg(e))return new Se(re.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{static emptySet(t){return new lh(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Le.comparator(n.key,i.key):(n,i)=>Le.comparator(n.key,i.key),this.keyedMap=O1(),this.sortedSet=new An(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof lh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new lh;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.Z_=new An(Le.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):ke():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class qh{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qh(t,n,lh.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&my(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class H_e{constructor(){this.queries=FL(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=tt(n),s=r.queries;r.queries=FL(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Se(re.ABORTED,"Firestore shutting down"))}}function FL(){return new zd(e=>TY(e),my)}async function V_e(e,t){const n=tt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new z_e,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=QY(o,`Initialization of query '${pf(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&_T(n)}async function $_e(e,t){const n=tt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function G_e(e,t){const n=tt(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&_T(n)}function X_e(e,t,n){const i=tt(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function _T(e){e.ia.forEach(t=>{t.next()})}var av,BL;(BL=av||(av={}))._a="default",BL.Cache="cache";class j_e{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new qh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==av.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(t){this.key=t}}class eW{constructor(t){this.key=t}}class Y_e{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Et(),this.mutatedKeys=Et(),this.ya=SY(t),this.wa=new lh(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new PL,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=py(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let U=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),U=!0):this.va(f,h)||(i.track({type:2,doc:h}),U=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),U=!0):f&&!h&&(i.track({type:1,doc:f}),U=!0,(l||c)&&(a=!0)),U&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new qh(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new PL,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Et(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new eW(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new JY(i))}),n}Oa(t){this.fa=t.gs,this.pa=Et();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return qh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const TT="SyncEngine";class W_e{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class K_e{constructor(t){this.key=t,this.Ba=!1}}class Z_e{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new zd(a=>TY(a),my),this.qa=new Map,this.Qa=new Set,this.$a=new An(Le.comparator),this.Ka=new Map,this.Ua=new hT,this.Wa={},this.Ga=new Map,this.za=Kh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function q_e(e,t,n=!0){const i=sW(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await tW(i,t,n,!0),r}async function Q_e(e,t){const n=sW(e);await tW(n,t,!0,!1)}async function tW(e,t,n,i){const r=await v_e(e.localStore,Ho(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await J_e(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&KY(e.remoteStore,r),a}async function J_e(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,U,y,E){let w=U.view.ba(y);w.ls&&(w=await ML(p.localStore,U.query,!1).then(({documents:_})=>U.view.ba(_,w)));const v=E&&E.targetChanges.get(U.targetId),x=E&&E.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(w,p.isPrimaryClient,v,x);return HL(p,U.targetId,M.Ma),M.snapshot}(e,d,f,h);const s=await ML(e.localStore,t,!0),o=new Y_e(t,s.gs),a=o.ba(s.documents),l=Up.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);HL(e,n,c.Ma);const u=new W_e(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function eTe(e,t,n){const i=tt(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!my(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await sv(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&bT(i.remoteStore,r.targetId),lv(i,r.targetId)}).catch(dy)):(lv(i,r.targetId),await sv(i.localStore,r.targetId,!0))}async function tTe(e,t){const n=tt(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),bT(n.remoteStore,i.targetId))}async function nW(e,t){const n=tt(e);try{const i=await y_e(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(Xt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?Xt(o.Ba):r.removedDocuments.size>0&&(Xt(o.Ba),o.Ba=!1))}),await rW(n,i,t)}catch(i){await dy(i)}}function zL(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&_T(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function nTe(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new An(Le.comparator);o=o.insert(s,ui.newNoDocument(s,Pe.min()));const a=Et().add(s),l=new yy(Pe.min(),new Map,new An(ht),o,a);await nW(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),ST(i)}else await sv(i.localStore,t,!1).then(()=>lv(i,t,n)).catch(dy)}function lv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||iW(e,i)})}function iW(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(bT(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),ST(e))}function HL(e,t,n){for(const i of n)i instanceof JY?(e.Ua.addReference(i.key,t),iTe(e,i)):i instanceof eW?(Ee(TT,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||iW(e,i.key)):ke()}function iTe(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(Ee(TT,"New document in limbo: "+n),e.Qa.add(i),ST(e))}function ST(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Le(ln.fromString(t)),i=e.za.next();e.Ka.set(i,new K_e(n)),e.$a=e.$a.insert(n,i),KY(e.remoteStore,new ec(Ho(lT(n.path)),i,"TargetPurposeLimboResolution",fy.ae))}}async function rW(e,t,n){const i=tt(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=mT.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(c,f=>ne.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ne.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Eg(d))throw d;Ee(pT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function rTe(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){Ee(TT,"User change. New user:",t.toKey());const i=await YY(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Se(re.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await rW(n,i.Rs)}}function sTe(e,t){const n=tt(e),i=n.Ka.get(t);if(i&&i.Ba)return Et().add(i.key);{let r=Et();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function sW(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sTe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nTe.bind(null,t),t.La.p_=G_e.bind(null,t.eventManager),t.La.Ja=X_e.bind(null,t.eventManager),t}class C6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ey(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return b_e(this.persistence,new m_e,t.initialUser,this.serializer)}Xa(t){return new jY(gT.ri,this.serializer)}Za(t){return new __e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C6.provider={build:()=>new C6};class oTe extends C6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Xt(this.persistence.referenceDelegate instanceof x6);const i=this.persistence.referenceDelegate.garbageCollector;return new e_e(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new jY(i=>x6.ri(i,n),this.serializer)}}class cv{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rTe.bind(null,this.syncEngine),await B_e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new H_e}()}createDatastore(t){const n=Ey(t.databaseInfo.databaseId),i=function(s){return new C_e(s)}(t.databaseInfo);return function(s,o,a,l){return new k_e(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new D_e(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>zL(this.syncEngine,n,0),function(){return LL.D()?new LL:new T_e}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new Z_e(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=tt(r);Ee(Zh,"RemoteStore shutting down."),s.W_.add(5),await bp(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cv.provider={build:()=>new cv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aTe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):cl("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lTe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=tt(r),a={documents:s.map(d=>I6(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,ln.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=P9e(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());Xt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new uT(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Le.fromPath(i);this.mutations.push(new DY(r,this.precondition(r)))}),await async function(i,r){const s=tt(i),o={writes:r.map(a=>B9e(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,ln.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw ke();n=Pe.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Se(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Pe.min())?ds.exists(!1):ds.updateTime(n):ds.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Pe.min()))throw new Se(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ds.updateTime(n)}return ds.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cTe{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new UT(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new lTe(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!mp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!x9e(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="FirestoreClient";class uTe{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Oi.UNAUTHENTICATED,this.clientId=lY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{Ee($c,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Ee($c,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=QY(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function r3(e,t){e.asyncQueue.verifyOperationInProgress(),Ee($c,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await YY(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function VL(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dTe(e);Ee($c,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>NL(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>NL(t.remoteStore,r)),e._onlineComponents=t}async function dTe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ee($c,"Using user provided OfflineComponentProvider");try{await r3(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xh("Error using user provided cache. Falling back to memory cache: "+n),await r3(e,new C6)}}else Ee($c,"Using default OfflineComponentProvider"),await r3(e,new oTe(void 0));return e._offlineComponents}async function oW(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ee($c,"Using user provided OnlineComponentProvider"),await VL(e,e._uninitializedComponentsProvider._online)):(Ee($c,"Using default OnlineComponentProvider"),await VL(e,new cv))),e._onlineComponents}function fTe(e){return oW(e).then(t=>t.datastore)}async function hTe(e){const t=await oW(e),n=t.eventManager;return n.onListen=q_e.bind(null,t.syncEngine),n.onUnlisten=eTe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Q_e.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tTe.bind(null,t.syncEngine),n}function gTe(e,t,n={}){const i=new Ec;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new aTe({next:f=>{u.su(),o.enqueueAndForget(()=>$_e(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Se(re.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Se(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new j_e(lT(a.path),u,{includeMetadataChanges:!0,Ta:!0});return V_e(s,d)}(await hTe(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mTe(e,t,n){if(!n)throw new Se(re.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pTe(e,t,n,i){if(t===!0&&i===!0)throw new Se(re.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function GL(e){if(!Le.isDocumentKey(e))throw new Se(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function IT(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ke()}function A6(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Se(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=IT(e);throw new Se(re.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW="firestore.googleapis.com",XL=!0;class jL{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Se(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lW,this.ssl=XL}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:XL;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=XY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Q9e)throw new Se(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pTe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aW((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class xT{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Se(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jL(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Awe;switch(i.type){case"firstParty":return new Lwe(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=$L.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),$L.delete(n),i.terminate())}(this),Promise.resolve()}}function UTe(e,t,n,i={}){var r;const s=(e=A6(e,xT))._getSettings(),o=`${t}:${n}`;if(s.host!==lW&&s.host!==o&&Xh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Oi.MOCK_USER;else{a=$j(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Se(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Oi(c)}e._authCredentials=new Mwe(new aY(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new CT(this.firestore,t,this._query)}}class ws{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new C0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ws(this.firestore,t,this._key)}}class C0 extends CT{constructor(t,n,i){super(t,n,lT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ws(this.firestore,null,new Le(t))}withConverter(t){return new C0(this.firestore,t,this._path)}}function cW(e,t,...n){if(e=fo(e),arguments.length===1&&(t=lY.newId()),mTe("doc","path",t),e instanceof xT){const i=ln.fromString(t,...n);return GL(i),new ws(e,null,new Le(i))}{if(!(e instanceof ws||e instanceof C0))throw new Se(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ln.fromString(t,...n));return GL(i),new ws(e.firestore,e instanceof C0?e.converter:null,new Le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="AsyncQueue";class WL{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new UT(this,"async_queue_retry"),this.Su=()=>{const i=i3();i&&Ee(YL,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=i3();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=i3();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Ec;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Eg(t))throw t;Ee(YL,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw cl("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=wT.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&ke()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class AT extends xT{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new WL,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new WL(t),this._firestoreClient=void 0,await t}}}function bTe(e,t){const n=typeof e=="object"?e:Qj(),i=typeof e=="string"?e:y6,r=Wj(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Hj("firestore");s&&UTe(r,...s)}return r}function uW(e){if(e._terminated)throw new Se(re.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||yTe(e),e._firestoreClient}function yTe(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new Wwe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aW(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new uTe(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ul(Si.fromBase64String(t))}catch(n){throw new Se(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ul(Si.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Se(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Se(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Se(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ht(this._lat,t._lat)||ht(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ETe=/^__.*__$/;class vTe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Hd(t,this.data,this.fieldMask,n,this.fieldTransforms):new pp(t,this.data,n,this.fieldTransforms)}}class dW{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Hd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function fW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class LT{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new LT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return M6(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(fW(this.Lu)&&ETe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class wTe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Ey(t)}ju(t,n,i,r=!1){return new LT({Lu:t,methodName:n,zu:i,path:Fi.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _Te(e){const t=e._freezeSettings(),n=Ey(e._databaseId);return new wTe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function TTe(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);DT("Data must be an object, but it was:",o,i);const a=hW(i,o);let l,c;if(s.merge)l=new ps(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=uv(t,d,n);if(!o.contains(f))throw new Se(re.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mW(u,f)||u.push(f)}l=new ps(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new vTe(new hr(a),l,c)}class _y extends MT{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _y}}function STe(e,t,n,i){const r=e.ju(1,t,n);DT("Data must be an object, but it was:",r,i);const s=[],o=hr.empty();Bd(i,(l,c)=>{const u=OT(t,l,n);c=fo(c);const d=r.Ku(u);if(c instanceof _y)s.push(u);else{const f=Ty(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new ps(s);return new dW(o,a,r.fieldTransforms)}function ITe(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[uv(t,i,n)],l=[r];if(s.length%2!=0)throw new Se(re.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(uv(t,s[f])),l.push(s[f+1]);const c=[],u=hr.empty();for(let f=a.length-1;f>=0;--f)if(!mW(c,a[f])){const h=a[f];let m=l[f];m=fo(m);const p=o.Ku(h);if(m instanceof _y)c.push(h);else{const U=Ty(m,p);U!=null&&(c.push(h),u.set(h,U))}}const d=new ps(c);return new dW(u,d,o.fieldTransforms)}function Ty(e,t){if(gW(e=fo(e)))return DT("Unsupported field value:",t,e),hW(e,t);if(e instanceof MT)return function(i,r){if(!fW(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Ty(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=fo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return b9e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=gi.fromDate(i);return{timestampValue:S6(r.serializer,s)}}if(i instanceof gi){const s=new gi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:S6(r.serializer,s)}}if(i instanceof RT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ul)return{bytesValue:FY(r.serializer,i._byteString)};if(i instanceof ws){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof kT)return function(o,a){return{mapValue:{fields:{[pY]:{stringValue:UY},[E6]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return cT(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${IT(i)}`)}(e,t)}function hW(e,t){const n={};return uY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bd(e,(i,r)=>{const s=Ty(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function gW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof gi||e instanceof RT||e instanceof ul||e instanceof ws||e instanceof MT||e instanceof kT)}function DT(e,t,n){if(!gW(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=IT(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function uv(e,t,n){if((t=fo(t))instanceof wy)return t._internalPath;if(typeof t=="string")return OT(e,t);throw M6("Field path arguments must be of type string or ",e,!1,void 0,n)}const xTe=new RegExp("[~\\*/\\[\\]]");function OT(e,t,n){if(t.search(xTe)>=0)throw M6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wy(...t.split("."))._internalPath}catch{throw M6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function M6(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Se(re.INVALID_ARGUMENT,a+e+l)}function mW(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ws(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pW("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CTe extends R6{data(){return super.data()}}function pW(e,t){return typeof t=="string"?OT(e,t):t instanceof wy?t._internalPath:t._delegate._internalPath}class UW{convertValue(t,n="none"){switch(Hc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return In(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ke()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Bd(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[E6].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>In(o.doubleValue));return new kT(s)}convertGeoPoint(t){return new RT(In(t.latitude),In(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=hy(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(_0(t));default:return null}}convertTimestamp(t){const n=Bc(t);return new gi(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ln.fromString(t);Xt(GY(i));const r=new T0(i.get(1),i.get(3)),s=new Le(i.popFirst(5));return r.isEqual(n)||cl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ATe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class MTe extends UW{constructor(t){super(),this.firestore=t}convertBytes(t){return new ul(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ws(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class NT extends R6{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new RTe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(pW("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class RTe extends NT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kTe(e){e=A6(e,ws);const t=A6(e.firestore,AT);return gTe(uW(t),e._key).then(n=>LTe(t,e,n))}class yW extends UW{constructor(t){super(),this.firestore=t}convertBytes(t){return new ul(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ws(this.firestore,null,n)}}function LTe(e,t,n){const i=n.docs.get(t._key),r=new yW(e);return new NT(e,r,t._key,i,new bW(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DTe={maxAttempts:5};function P1(e,t){if((e=fo(e)).firestore!==t)throw new Se(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OTe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=_Te(t)}get(t){const n=P1(t,this._firestore),i=new MTe(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return ke();const s=r[0];if(s.isFoundDocument())return new R6(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new R6(this._firestore,i,n._key,null,n.converter);throw ke()})}set(t,n,i){const r=P1(t,this._firestore),s=ATe(r.converter,n,i),o=TTe(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=P1(t,this._firestore);let o;return o=typeof(n=fo(n))=="string"||n instanceof wy?ITe(this._dataReader,"Transaction.update",s._key,n,i,r):STe(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=P1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NTe extends OTe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=P1(t,this._firestore),i=new yW(this._firestore);return super.get(t).then(r=>new NT(this._firestore,i,n._key,r._document,new bW(!1,!1),n.converter))}}function PTe(e,t,n){e=A6(e,AT);const i=Object.assign(Object.assign({},DTe),n);return function(s){if(s.maxAttempts<1)throw new Se(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Ec;return s.asyncQueue.enqueueAndForget(async()=>{const c=await fTe(s);new cTe(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(uW(e),r=>t(new NTe(e,r)),i)}(function(t,n=!0){(function(r){yg=r})(Zj),E0(new Gh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new AT(new Rwe(i.getProvider("auth-internal")),new Dwe(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Se(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new T0(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bc(eL,tL,t),bc(eL,tL,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW="firebasestorage.googleapis.com",vW="storageBucket",FTe=2*60*1e3,BTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Fd{constructor(t,n,i=0){super(s3(t),`Firebase Storage: ${n} (${s3(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return s3(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jn||(jn={}));function s3(e){return"storage/"+e}function PT(){const e="An unknown error occurred, please check the error payload for server response.";return new Wn(jn.UNKNOWN,e)}function zTe(e){return new Wn(jn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HTe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wn(jn.UNAUTHENTICATED,e)}function VTe(){return new Wn(jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $Te(e){return new Wn(jn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function GTe(){return new Wn(jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XTe(){return new Wn(jn.CANCELED,"User canceled the upload/download.")}function jTe(e){return new Wn(jn.INVALID_URL,"Invalid URL '"+e+"'.")}function YTe(e){return new Wn(jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function WTe(){return new Wn(jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vW+"' property when initializing the app?")}function KTe(){return new Wn(jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZTe(e){return new Wn(jn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dv(e){return new Wn(jn.INVALID_ARGUMENT,e)}function wW(){return new Wn(jn.APP_DELETED,"The Firebase app was deleted.")}function qTe(e){return new Wn(jn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _m(e,t){return new Wn(jn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function c1(e){throw new Wn(jn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=zr.makeFromUrl(t,n)}catch{return new zr(t,"")}if(i.path==="")return i;throw YTe(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(v){v.path_=decodeURIComponent(v.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===EW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",y=new RegExp(`^https?://${p}/${r}/${U}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let v=0;v<w.length;v++){const x=w[v],M=x.regex.exec(t);if(M){const _=M[x.indices.bucket];let T=M[x.indices.path];T||(T=""),i=new zr(_,T),x.postModify(i);break}}if(i==null)throw jTe(t);return i}}class QTe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JTe(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...U){c||(c=!0,t.apply(null,U))}function d(U){r=setTimeout(()=>{r=null,e(h,l())},U)}function f(){s&&clearTimeout(s)}function h(U,...y){if(c){f();return}if(U){f(),u.call(null,U,...y);return}if(l()||o){f(),u.call(null,U,...y);return}i<64&&(i*=2);let w;a===1?(a=2,w=0):w=(i+Math.random())*1e3,d(w)}let m=!1;function p(U){m||(m=!0,f(),!c&&(r!==null?(U||(a=2),clearTimeout(r),d(0)):U||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function eSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tSe(e){return e!==void 0}function nSe(e){return typeof e=="object"&&!Array.isArray(e)}function _W(e){return typeof e=="string"||e instanceof String}function KL(e){return FT()&&e instanceof Blob}function FT(){return typeof Blob<"u"}function ZL(e,t,n,i){if(i<t)throw dv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw dv(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iSe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function rSe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Yu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Yu||(Yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sSe(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oSe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new PU(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Yu.NO_ERROR,l=s.getStatus();if(!a||sSe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Yu.ABORT;i(!1,new PU(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new PU(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());tSe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=PT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?wW():XTe();o(l)}else{const l=GTe();o(l)}};this.canceled_?n(!1,new PU(!1,null,!0)):this.backoffId_=JTe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&eSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class PU{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function aSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function lSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function cSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function uSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function dSe(e,t,n,i,r,s,o=!0){const a=rSe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return cSe(c,t),aSe(c,n),lSe(c,s),uSe(c,i),new oSe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hSe(...e){const t=fSe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(FT())return new Blob(e);throw new Wn(jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gSe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mSe(e){if(typeof atob>"u")throw ZTe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class o3{constructor(t,n){this.data=t,this.contentType=n||null}}function pSe(e,t){switch(e){case No.RAW:return new o3(TW(t));case No.BASE64:case No.BASE64URL:return new o3(SW(e,t));case No.DATA_URL:return new o3(bSe(t),ySe(t))}throw PT()}function TW(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function USe(e){let t;try{t=decodeURIComponent(e)}catch{throw _m(No.DATA_URL,"Malformed data URL.")}return TW(t)}function SW(e,t){switch(e){case No.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw _m(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw _m(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mSe(t)}catch(r){throw r.message.includes("polyfill")?r:_m(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class IW{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw _m(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ESe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function bSe(e){const t=new IW(e);return t.base64?SW(No.BASE64,t.rest):USe(t.rest)}function ySe(e){return new IW(e).contentType}function ESe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){let i=0,r="";KL(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(KL(this.data_)){const i=this.data_,r=gSe(i,t,n);return r===null?null:new jl(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new jl(i,!0)}}static getBlob(...t){if(FT()){const n=t.map(i=>i instanceof jl?i.data_:i);return new jl(hSe.apply(null,n))}else{const n=t.map(o=>_W(o)?pSe(No.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new jl(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vSe(e){let t;try{t=JSON.parse(e)}catch{return null}return nSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wSe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function _Se(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function xW(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TSe(e,t){return t}class Yi{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||TSe}}let FU=null;function SSe(e){return!_W(e)||e.length<2?e:xW(e)}function ISe(){if(FU)return FU;const e=[];e.push(new Yi("bucket")),e.push(new Yi("generation")),e.push(new Yi("metageneration")),e.push(new Yi("name","fullPath",!0));function t(s,o){return SSe(o)}const n=new Yi("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Yi("size");return r.xform=i,e.push(r),e.push(new Yi("timeCreated")),e.push(new Yi("updated")),e.push(new Yi("md5Hash",null,!0)),e.push(new Yi("cacheControl",null,!0)),e.push(new Yi("contentDisposition",null,!0)),e.push(new Yi("contentEncoding",null,!0)),e.push(new Yi("contentLanguage",null,!0)),e.push(new Yi("contentType",null,!0)),e.push(new Yi("metadata","customMetadata",!0)),FU=e,FU}function xSe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new zr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function CSe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return xSe(i,e),i}function ASe(e,t,n){const i=vSe(t);return i===null?null:CSe(e,i,n)}function MSe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class RSe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSe(e){if(!e)throw PT()}function LSe(e,t){function n(i,r){const s=ASe(e,r,t);return kSe(s!==null),s}return n}function DSe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=VTe():r=HTe():n.getStatus()===402?r=zTe(e.bucket):n.getStatus()===403?r=$Te(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function OSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function NSe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=OSe(null,t)),i}function PSe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let v=0;v<2;v++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=NSe(t,i,r),u=MSe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=jl.getBlob(d,i,f);if(h===null)throw KTe();const m={name:c.fullPath},p=iSe(s,e.host,e._protocol),U="POST",y=e.maxUploadRetryTime,E=new RSe(p,U,LSe(e,n),y);return E.urlParams=m,E.headers=o,E.body=h.uploadData(),E.errorHandler=DSe(t),E}class FSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw c1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw c1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw c1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw c1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw c1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class BSe extends FSe{initXhr(){this.xhr_.responseType="text"}}function zSe(){return new BSe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,n){this._service=t,n instanceof zr?this._location=n:this._location=zr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Td(t,n)}get root(){const t=new zr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xW(this._location.path)}get storage(){return this._service}get parent(){const t=wSe(this._location.path);if(t===null)return null;const n=new zr(this._location.bucket,t);return new Td(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw qTe(t)}}function HSe(e,t,n){e._throwIfRoot("uploadBytes");const i=PSe(e.storage,e._location,ISe(),new jl(t,!0),n);return e.storage.makeRequestWithTokens(i,zSe).then(r=>({metadata:r,ref:e}))}function VSe(e,t){const n=_Se(e._location.path,t),i=new zr(e._location.bucket,n);return new Td(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Se(e){return/^[A-Za-z]+:\/\//.test(e)}function GSe(e,t){return new Td(e,t)}function CW(e,t){if(e instanceof BT){const n=e;if(n._bucket==null)throw WTe();const i=new Td(n,n._bucket);return t!=null?CW(i,t):i}else return t!==void 0?VSe(e,t):e}function XSe(e,t){if(t&&$Se(t)){if(e instanceof BT)return GSe(e,t);throw dv("To use ref(service, url), the first argument must be a Storage instance.")}else return CW(e,t)}function qL(e,t){const n=t==null?void 0:t[vW];return n==null?null:zr.makeFromBucketSpec(n,e)}function jSe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:$j(r,e.app.options.projectId))}class BT{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=EW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FTe,this._maxUploadRetryTime=BTe,this._requests=new Set,r!=null?this._bucket=zr.makeFromBucketSpec(r,this._host):this._bucket=qL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=zr.makeFromBucketSpec(this._url,t):this._bucket=qL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){ZL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){ZL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Kj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Td(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new QTe(wW());{const o=dSe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const QL="@firebase/storage",JL="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="storage";function MW(e,t,n){return e=fo(e),HSe(e,t,n)}function RW(e,t){return e=fo(e),XSe(e,t)}function YSe(e=Qj(),t){e=fo(e);const i=Wj(e,AW).getImmediate({identifier:t}),r=Hj("storage");return r&&WSe(i,...r),i}function WSe(e,t,n,i={}){jSe(e,t,n,i)}function KSe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new BT(n,i,r,t,Zj)}function ZSe(){E0(new Gh(AW,KSe,"PUBLIC").setMultipleInstances(!0)),bc(QL,JL,""),bc(QL,JL,"esm2017")}ZSe();let k6;try{k6=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),k6={}}let a3=null,l3=null,c3=null;const kW=()=>(a3||(a3=qj(k6)),a3),LW=()=>(l3||(l3=bTe(kW())),l3),qSe=()=>(c3||(c3=YSe(kW())),c3),DW=async()=>qSe(),QSe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await W5(e,i);return{ciphertext:r,iv:s}},fv=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await u0(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)},Eu=class Eu{};F(Eu,"cache",new WeakMap),F(Eu,"get",t=>Eu.cache.get(t)),F(Eu,"set",(t,n)=>{Eu.cache.set(t,Gl(n))});let A0=Eu;const OW=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=Gl(t);return A0.get(e.socket)===n}return!0},zT=async({prefix:e,files:t})=>{const n=await DW(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=RW(n,`${e}/${s}`);await MW(a,o,{cacheControl:`public, max-age=${Y4e}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},eD=async(e,t)=>{const n=Gl(e),{ciphertext:i,iv:r}=await QSe(t,e);return{sceneVersion:n,ciphertext:ul.fromUint8Array(new Uint8Array(i)),iv:ul.fromUint8Array(r)}},JSe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||OW(e,t))return null;const o=LW(),a=cW(o,"scenes",i),l=await PTe(o,async u=>{const d=await u.get(a);if(!d.exists()){const U=await eD(t,r);return u.set(a,U),U}const f=d.data(),h=tc(vd(await fv(f,r),null)),m=tc(q_(t,h,n)),p=await eD(m,r);return u.update(a,p),p}),c=tc(vd(await fv(l,r),null));return A0.set(s,c),c},eIe=async(e,t,n)=>{const i=LW(),r=cW(i,"scenes",e),s=await kTe(r);if(!s.exists())return null;const o=s.data(),a=tc(vd(await fv(o,t),null));return n&&A0.set(n,a),a},NW=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${k6.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await G$(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||ye.binary,id:s,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},PW=e=>e.isDeleted?e.updated>Date.now()-j4e:!dd(e),tc=e=>e.filter(t=>PW(t)),tIe="https://json.excalidraw.com/api/v2/",nIe="https://json.excalidraw.com/api/v2/post/",iIe=async()=>{const e=new Uint8Array(W4e);return window.crypto.getRandomValues(e),mF(e)},FW=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,tD=e=>{const t=new URL(e).hash;return FW.test(t)},rIe=e=>{const n=new URL(e).hash.match(FW);return n&&n[2].length!==22?(window.alert(L("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},sIe=async()=>{const e=await iIe(),t=await u_();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},oIe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,aIe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,v2),o=e.slice(v2,e.byteLength);n=await u0(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(v2);n=await u0(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},lIe=async(e,t)=>{try{const n=await fetch(`${tIe}${e}`);if(!n.ok)return window.alert(L("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await G$(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),aIe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(L("alerts.importBackendFailed")),console.error(n),{}}},nD=async(e,t,n)=>{let i;return e!=null&&t!=null?i=wd(await lIe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):i=wd(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},cIe=async(e,t,n)=>{const i=await u_("string"),r=await $$(new TextEncoder().encode(Ug(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)xn(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await eT({files:s,encryptionKey:i,maxBytes:Q_}),l=await(await fetch(nIe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await zT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:L("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:L("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:L("alerts.couldNotCreateShareableLink")}}};function uIe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Vd(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function HT(e,t){const n=uIe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Vd(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let u3;function wg(){return u3||(u3=HT("keyval-store","keyval")),u3}function dIe(e,t=wg()){return t("readonly",n=>Vd(n.get(e)))}function BW(e,t,n=wg()){return n("readwrite",i=>(i.put(t,e),Vd(i.transaction)))}function fIe(e,t=wg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Vd(n.transaction)))}function hIe(e,t=wg()){return t("readonly",n=>Promise.all(e.map(i=>Vd(n.get(i)))))}function gIe(e,t=wg()){return t("readwrite",n=>(n.delete(e),Vd(n.transaction)))}function mIe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Vd(n.transaction)))}function pIe(e=wg()){const t=[];return mIe(e,n=>t.push([n.key,n.value])).then(()=>t)}class UIe{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const L6={[vn.VERSION_DATA_STATE]:-1,[vn.VERSION_FILES]:-1},iD=e=>JSON.parse(localStorage.getItem(e)||"-1")>L6[e],zW=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),L6[e]=t}catch(n){console.error("error while updating browser state verison",n)}},bIe=()=>{try{for(const e of Object.keys(L6))localStorage.setItem(e,JSON.stringify(-1)),L6[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},Tm=HT("files-db","files-store");class yIe extends Fj{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await pIe(Tm).then(i=>{for(const[r,s]of i)(!s.lastRetrieved||Date.now()-s.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(r)&&gIe(r,Tm)})})}}const EIe=(e,t)=>{var n;try{const i=jV(t);((n=i.openSidebar)==null?void 0:n.name)===ys.name&&i.openSidebar.tab===Hu&&(i.openSidebar=null),localStorage.setItem(vn.LOCAL_STORAGE_ELEMENTS,JSON.stringify(az(e))),localStorage.setItem(vn.LOCAL_STORAGE_APP_STATE,JSON.stringify(i)),zW(vn.VERSION_DATA_STATE)}catch(i){console.error(i)}},Ui=class Ui{};F(Ui,"_save",Za(async(t,n,i,r)=>{EIe(t,n),await Ui.fileStorage.saveFiles({elements:t,files:i}),r()},z4e)),F(Ui,"save",(t,n,i,r)=>{Ui.isSavePaused()||Ui._save(t,n,i,r)}),F(Ui,"flushSave",()=>{Ui._save.flush()}),F(Ui,"locker",new UIe),F(Ui,"pauseSave",t=>{Ui.locker.lock(t)}),F(Ui,"resumeSave",t=>{Ui.locker.unlock(t)}),F(Ui,"isSavePaused",()=>document.hidden||Ui.locker.isLocked()),F(Ui,"fileStorage",new yIe({getFiles(t){return hIe(t,Tm).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{fIe(s,Tm)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return zW(vn.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await BW(r,s,Tm),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}}));let yi=Ui;const Os=class Os{static async load(){return await dIe(Os.key,Os.store)||null}static save(t){return BW(Os.key,t,Os.store)}};F(Os,"idb_name",vn.IDB_LIBRARY),F(Os,"key","libraryData"),F(Os,"store",HT(`${Os.idb_name}-db`,`${Os.idb_name}-store`));let D6=Os;class vIe{static load(){const t=localStorage.getItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(vn.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const rD=Kt({message:null,nonce:0});class wIe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",Do(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ie(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER})},V4e));F(this,"broadcastScene",async(t,n,i)=>{if(t===Ki.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&PW(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const r={type:Ki.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(r,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(I2.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),lt("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(Ki.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var r;if(this.isOpen()){const s=JSON.stringify(t),o=new TextEncoder().encode(s),{encryptedBuffer:a,iv:l}=await W5(this.roomKey,o);(r=this.socket)==null||r.emit(n?I2.SERVER_VOLATILE:I2.SERVER,i??this.roomId,a,l)}}}var _Ie={};const HW=Kt(null),hv=Kt(!1),VW=Kt(!1),$W=Kt(null);class TIe extends D.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{kl.set(VW,!window.navigator.onLine)});F(this,"isCollaborating",()=>kl.get(hv));F(this,"setIsCollaborating",n=>{kl.set(hv,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",on(n=>{const i=tc(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!OW(this.portal,i))&&(this.saveCollabRoomToFirebase(i),_Ie.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Fw(n):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await JSe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const r=/is longer than.*?bytes/.test(i.message)?L("errors.collabSaveFailed_sizeExceeded"):L("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[r]||!this.isCollaborating())&&(this.setErrorDialog(r),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[r]:!0}})),this.isCollaborating()&&this.setErrorIndicator(r),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(tc(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)yi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(L("alerts.collabStopOverridePrompt"))){bIe(),window.history.pushState({},za,window.location.origin),this.destroySocketClient(),yi.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>gt(r)&&r.status==="saved"?Ie(r,{status:"pending"}):r);this.excalidrawAPI.updateScene({elements:i,captureUpdate:K.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),yi.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(r=>xn(r)&&!this.fileManager.isFileTracked(r.fileId)&&!r.isDeleted&&(n.forceFetchFiles?r.status!=="pending"||Date.now()-r.updated>1e4:r.status==="saved")).map(r=>r.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,r)=>{try{const s=await u0(n,i,r),o=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(o)}catch(s){return window.alert(L("alerts.decryptFailed")),console.error(s),{type:Ki.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||be(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([]),import.meta.url).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,r;n?{roomId:i,roomKey:r}=n:({roomId:i,roomKey:r}=await sIe(),window.history.pushState({},za,oIe({roomId:i,roomKey:r})));const s=c5();this.setIsCollaborating(!0),yi.pauseSave("collaboration");const{default:o}=await be(()=>import("./index-ChGp7972.js"),__vite__mapDeps([]),import.meta.url),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{s.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),i,r),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>gt(c)&&c.status==="saved"?Ie(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:K.NEVER}),this.saveCollabRoomToFirebase(tc(l))}return this.socketInitializationTimer=window.setTimeout(a,H4e),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Ki.INVALID_RESPONSE:return;case Ki.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),s.resolve({elements:h,scrollToContent:!0})}break}case Ki.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Ki.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,U=u.payload.socketId||u.payload.socketID;this.updateCollaborator(U,{pointer:f,button:h,selectedElementIds:p,username:m});break}case Ki.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:QV({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Ki.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:Xo(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});s.resolve(l)}),this.portal.socket.on(I2.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),s});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const r=await eIe(i.roomId,i.roomKey,this.portal.socket);if(r)return this.setLastBroadcastedOrReceivedSceneVersion(Gl(r)),{elements:r,scrollToContent:!0}}catch(r){console.error(r)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),r=this.excalidrawAPI.getAppState(),s=vd(n,null),o=q_(i,s,r);return this.setLastBroadcastedOrReceivedSceneVersion(Gl(o)),o});F(this,"loadImageFiles",Do(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),L1({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},$4e));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,Kx),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,Zx))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(_u.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,Kx),this.activeIntervalId=window.setInterval(this.reportActive,Zx),this.onIdleStateChange(_u.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(_u.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(_u.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(ee.POINTER_MOVE,this.onPointerMove),document.addEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const r=new Map(this.collaborators),s=Object.assign({},r.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});r.set(n,s),this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",Do(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},X4e));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:MB(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{Gl(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Ki.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=Gl(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",Do(()=>{this.portal.broadcastScene(Ki.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,Gl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},Hk));F(this,"queueSaveToFirebase",Do(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(tc(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},Hk,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),Z4e(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),kl.set($W,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{kl.set(rD,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{kl.set(rD,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:Oj()||"",activeRoomLink:null},this.portal=new wIe(this),this.fileManager=new Fj({getFiles:async i=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new Dh;return NW(`files/rooms/${r}`,s,i)},saveFiles:async({addedFiles:i})=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new Dh;const{savedFiles:o,erroredFiles:a}=await zT({prefix:`${Dj.collabFiles}/${r}`,files:await eT({files:i,encryptionKey:s,maxBytes:Q_})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(ee.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=lg(this.relayVisibleSceneBounds),r=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),r()},this.onOfflineStatusToggle();const s={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};kl.set(HW,s)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(ee.UNLOAD,this.onUnload),window.removeEventListener(ee.POINTER_MOVE,this.onPointerMove),window.removeEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var r;const i=new Map;for(const s of n)i.set(s,Object.assign({},this.collaborators.get(s),{isCurrentUser:s===((r=this.portal.socket)==null?void 0:r.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(ge,{children:n!=null&&g(L_,{onClose:()=>this.setErrorDialog(null),children:n})})}}const SIe=()=>J_?g("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noopener",className:"plus-button",children:"Go to Excalidraw+"}):null,IIe=ae.memo(({onChange:e})=>g(xj,{children:g("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:g(SIe,{})})}));function xIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M0(e){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M0(e)}function CIe(e,t){if(M0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(M0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function AIe(e){var t=CIe(e,"string");return M0(t)=="symbol"?t:t+""}function MIe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,AIe(i.key),i)}}function RIe(e,t,n){return t&&MIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var GW=[],kIe=GW.forEach,LIe=GW.slice;function DIe(e){return kIe.call(LIe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var sD=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OIe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!sD.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!sD.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},oD={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=OIe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},NIe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=oD.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&oD.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},PIe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},u1=null,aD=function(){if(u1!==null)return u1;try{u1=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{u1=!1}return u1},FIe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&aD()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&aD()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},d1=null,lD=function(){if(d1!==null)return d1;try{d1=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{d1=!1}return d1},BIe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&lD()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&lD()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},zIe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},HIe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},VIe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},$Ie={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function GIe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var XW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xIe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return RIe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=DIe(i,this.options||{},GIe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(NIe),this.addDetector(PIe),this.addDetector(FIe),this.addDetector(BIe),this.addDetector(zIe),this.addDetector(HIe),this.addDetector(VIe),this.addDetector($Ie)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();XW.type="languageDetector";const VT=new XW;VT.init({languageUtils:{}});const jW=()=>{var i;const e=VT.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=S5.find(r=>r.code.startsWith(t)))==null?void 0:i.code:null)||Od.code},YW=Kt(jW()),XIe=()=>{const[e,t]=Lh(YW);return D.useEffect(()=>{VT.cacheUserLanguage(e)},[e]),[e,t]},jIe=({style:e})=>{const{t,langCode:n}=wn(),i=I9(YW);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:S5.map(r=>g("option",{value:r.code,children:r.label},r.code))})},YIe=ae.memo(e=>P(Jt,{children:[g(Jt.DefaultItems.LoadScene,{}),g(Jt.DefaultItems.SaveToActiveFile,{}),g(Jt.DefaultItems.Export,{}),g(Jt.DefaultItems.SaveAsImage,{}),g(Jt.DefaultItems.Help,{}),g(Jt.DefaultItems.ClearCanvas,{}),g(Jt.Separator,{}),g(Jt.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(Jt.ItemCustom,{children:g(jIe,{style:{width:"100%"}})}),g(Jt.DefaultItems.ChangeCanvasBackground,{})]})),WIe=ae.memo(e=>{const{t}=wn();let n;return J_?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:du.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),P(Cr,{children:[g(Cr.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(Cr.Hints.ToolbarHint,{}),g(Cr.Hints.HelpHint,{}),P(Cr.Center,{children:[g(Cr.Center.Logo,{}),g(Cr.Center.Heading,{children:n}),P(Cr.Center.Menu,{children:[g(Cr.Center.MenuItemLoadScene,{}),g(Cr.Center.MenuItemHelp,{})]})]})]})}),gv=async(e,t,n,i)=>{const r=await DW(),s=`${uF(12)}`,o=await u_(),a=await W5(o,Ug(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:ye.binary}),c=RW(r,`/migrations/scenes/${s}`);await MW(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)xn(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await eT({files:u,encryptionKey:o,maxBytes:Q_});await zT({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},KIe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=wn();return P(G4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(Cj,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Ye,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{lt("export","eplus",`ui (${W0()})`),await gv(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class ZIe extends ae.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const r={};for(const[s,o]of Object.entries({...localStorage}))try{r[s]=JSON.parse(o)}catch{r[s]=o}vw(s=>{s.setExtras(i);const o=Sw(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(r)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await be(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]),import.meta.url)).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:P("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(pr,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),P("div",{className:"ErrorSplash-paragraph align-center",children:[g(pr,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),P("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),L("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),P("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:L("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(pr,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:P("div",{className:"ErrorSplash-details",children:[g("label",{children:L("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const WW=Kt({isOpen:!1}),qIe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?Eue:n?wue:UH},QIe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=wn(),[,r]=D.useState(!1),s=D.useRef(0),o=D.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=D_(),u=async()=>{var f;try{await qc(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return P(ge,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Hh,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===H.ENTER&&n()}),P("div",{className:"ShareDialog__active__linkRow",children:[g(Hh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(to,{size:"large",variant:"icon",label:"Share",icon:qIe(),className:"ShareDialog__active__share",onClick:d}),g(to,{size:"large",label:i("buttons.copyLink"),icon:sp,status:c,onClick:()=>{u(),l()}})]}),P("div",{className:"ShareDialog__active__description",children:[P("p",{children:[P("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(to,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:dde,onClick:()=>{lt("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},JIe=e=>{const{t}=wn(),{collabAPI:n}=e,i=n?P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),P("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(to,{size:"large",label:t("roomDialog.button_startSession"),icon:ude,onClick:()=>{lt("share","room creation",`ui (${W0()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return P(ge,{children:[i,e.type==="share"&&P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(to,{size:"large",label:t("exportDialog.link_button"),icon:Xb,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},exe=e=>{const t=_5($W);return g(Kr,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(QIe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(JIe,{...e})})})},txe=e=>{const[t,n]=Lh(WW),{openDialog:i}=Ii();return D.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(exe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},cD=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},nxe=()=>{const[e,t]=D.useState(()=>localStorage.getItem(vn.LOCAL_STORAGE_THEME)||Ae.LIGHT),[n,i]=D.useState(Ae.LIGHT);return D.useEffect(()=>{const r=cD(),s=a=>{i(a.matches?Ae.DARK:Ae.LIGHT)};e==="system"&&(r==null||r.addEventListener("change",s));const o=a=>{!a[H.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===et.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===Ae.DARK?Ae.LIGHT:Ae.DARK))};return document.addEventListener(ee.KEYDOWN,o,{capture:!0}),()=>{r==null||r.removeEventListener("change",s),document.removeEventListener(ee.KEYDOWN,o,{capture:!0})}},[e,n,t]),D.useLayoutEffect(()=>{var r;localStorage.setItem(vn.LOCAL_STORAGE_THEME,e),i(e==="system"?(r=cD())!=null&&r.matches?Ae.DARK:Ae.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},ixe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},rxe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},sxe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},uD=(e,t,n)=>{e.forEach(i=>{switch(!0){case ere(i.data):ixe(t,n.zoom.value,i.data,i.color);break;case rre(i.data):rxe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},oxe=(e,t,n,i)=>{var a,l,c,u;const[r,s]=Z5(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=q5({canvas:e,scale:n,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),sxe(o,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=axe();uD(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{uD(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},axe=()=>{var n,i,r;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((r=window.visualDebug)==null?void 0:r.currentFrame)??0]:[0,0]},lxe=lg((e,t,n,i)=>{oxe(e,t,n,i)},{trailing:!0}),cxe=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},uxe=({appState:e,scale:t,ref:n})=>{const{width:i,height:r}=e,s=D.useRef(null);return D.useImperativeHandle(n,()=>s.current,[s]),g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:s,children:"Debug Canvas"})},dxe=({excalidrawAPI:e})=>P(ge,{children:[g(N4e,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await Lye({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:ye.jpg}),s=await S4(r),o=WF(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=kre(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(wj,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),fxe="REQUEST_SCENE",BU="https://app.excalidraw.com",hxe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new Ks("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new Ks("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await yi.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof Ks?n:new Ks("Failed to parse scene data.")}},gxe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new Ks("Invalid JWT format");const s=fR(i),o=fR(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},mxe=()=>{const e=D.useRef(!1);return D.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==BU)throw new Ks("Invalid origin");if(n.data.type===fxe){if(!n.data.jwt)throw new Ks("JWT is missing");try{try{await gxe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new Ks("Failed to verify JWT")}const i=await hxe({rawAppStateString:localStorage.getItem(vn.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(vn.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:BU})}catch(i){const r={type:"ERROR",message:i instanceof Ks?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:BU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,BU)}return()=>{window.removeEventListener("message",t)}},[]),null};var pxe={};Rj();window.EXCALIDRAW_THROTTLE_RENDER=!0;let yf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),yf=e});let KW=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(KW=!0)}catch{}const dD={title:L("overwriteConfirm.modal.shareableLink.title"),description:g(pr,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:L("overwriteConfirm.modal.shareableLink.button"),color:"danger"},mv=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=Nj();let o=await nD(null,null,s),a=rIe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await B4(dD))i&&(o=await nD(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},za,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>mv(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},za,window.location.origin)}else if(r){window.history.replaceState({},za,window.location.origin);const d=r[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await p_(await f.blob(),null,null);if(!o.elements.length||await B4(dD))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:L("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...iG({...f==null?void 0:f.appState,theme:((c=s==null?void 0:s.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:q_((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},Uxe=()=>{const[e,t]=D.useState(""),n=Cre(),{editorTheme:i,appTheme:r,setAppTheme:s}=nxe(),[o,a]=XIe(),l=D.useRef({promise:null});l.current.promise||(l.current.promise=c5());const c=D.useRef(null);D.useEffect(()=>{lt("load","frame",W0()),setTimeout(()=>{lt("load","version",I7())},Lie)},[]);const[u,d]=MG(),[,f]=Lh(WW),[h]=Lh(HW),[m]=eve(hv,()=>tD(window.location.href));zye({excalidrawAPI:u,adapter:D6,migrationAdapter:vIe});const[,p]=D.useState(!1);D.useEffect(()=>{},[u]),D.useEffect(()=>{if(!u||!n&&!h)return;const I=(V,z=!1)=>{var G;if(V.scene)if(h!=null&&h.isCollaborating())V.scene.elements&&h.fetchImageFilesFromFirebase({elements:V.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:j,erroredFiles:X})=>{u.addFiles(j),L1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})});else{const j=((G=V.scene.elements)==null?void 0:G.reduce((X,q)=>xn(q)?X.concat(q.fileId):X,[]))||[];V.isExternalScene?NW(`${Dj.shareLinkFiles}/${V.id}`,V.key,j).then(({loadedFiles:X,erroredFiles:q})=>{u.addFiles(X),L1({excalidrawAPI:u,erroredFiles:q,elements:u.getSceneElementsIncludingDeleted()})}):z&&(j.length&&yi.fileStorage.getFiles(j).then(({loadedFiles:X,erroredFiles:q})=>{X.length&&u.addFiles(X),L1({excalidrawAPI:u,erroredFiles:q,elements:u.getSceneElementsIncludingDeleted()})}),yi.fileStorage.clearObsoleteFiles({currentFileIds:j}))}};mv({collabAPI:h,excalidrawAPI:u}).then(async V=>{I(V,!0),l.current.promise.resolve(V.scene)});const C=async V=>{V.preventDefault(),D4()||(h!=null&&h.isCollaborating()&&!tD(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),mv({collabAPI:h,excalidrawAPI:u}).then(G=>{I(G),G.scene&&u.updateScene({...G.scene,...wd(G.scene,null,null,{repairBindings:!0}),captureUpdate:K.IMMEDIATELY})}))},R=setTimeout(()=>document.title=za,kie),N=Za(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(iD(vn.VERSION_DATA_STATE)){const V=Nj(),z=Oj();a(jW()),u.updateScene({...V,captureUpdate:K.NEVER}),D6.load().then(G=>{G&&u.updateLibrary({libraryItems:G.libraryItems})}),h==null||h.setUsername(z||"")}if(iD(vn.VERSION_FILES)){const V=u.getSceneElementsIncludingDeleted(),z=u.getFiles(),G=(V==null?void 0:V.reduce((j,X)=>xn(X)&&!z[X.fileId]?j.concat(X.fileId):j,[]))||[];G.length&&yi.fileStorage.getFiles(G).then(({loadedFiles:j,erroredFiles:X})=>{j.length&&u.addFiles(j),L1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})})}}},G4e),k=()=>{yi.flushSave()},$=V=>{(V.type===ee.BLUR||document.hidden)&&yi.flushSave(),(V.type===ee.VISIBILITY_CHANGE||V.type===ee.FOCUS)&&N()};return window.addEventListener(ee.HASHCHANGE,C,!1),window.addEventListener(ee.UNLOAD,k,!1),window.addEventListener(ee.BLUR,$,!1),document.addEventListener(ee.VISIBILITY_CHANGE,$,!1),window.addEventListener(ee.FOCUS,$,!1),()=>{window.removeEventListener(ee.HASHCHANGE,C,!1),window.removeEventListener(ee.UNLOAD,k,!1),window.removeEventListener(ee.BLUR,$,!1),window.removeEventListener(ee.FOCUS,$,!1),document.removeEventListener(ee.VISIBILITY_CHANGE,$,!1),clearTimeout(R)}},[n,h,u,a]),D.useEffect(()=>{const I=C=>{yi.flushSave(),u&&yi.fileStorage.shouldPreventUnload(u.getSceneElements())&&(pxe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?Fw(C):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(ee.BEFORE_UNLOAD,I),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,I)}},[u]);const U=(I,C,R)=>{h!=null&&h.isCollaborating()&&h.syncElements(I),yi.isSavePaused()||yi.save(I,C,R,()=>{if(u){let N=!1;const k=u.getSceneElementsIncludingDeleted().map($=>{if(yi.fileStorage.shouldUpdateImageElementStatus($)){const V=Ie($,{status:"saved"});return V!==$&&(N=!0),V}return $});N&&u.updateScene({elements:k,captureUpdate:K.NEVER})}}),c.current&&u&&lxe(c.current,C,window.devicePixelRatio,()=>p(N=>!N))},[y,E]=D.useState(null),w=async(I,C,R)=>{if(I.length===0)throw new Error(L("alerts.cannotExportEmptyCanvas"));try{const{url:N,errorMessage:k}=await cIe(I,{...C,viewBackgroundColor:C.exportBackground?C.viewBackgroundColor:Qo().viewBackgroundColor},R);if(k)throw new Error(k);N&&E(N)}catch(N){if(N.name!=="AbortError"){const{width:k,height:$}=C;throw console.error(N,{width:k,height:$,devicePixelRatio:window.devicePixelRatio}),new Error(N.message)}}},v=(I,C)=>g(J4e,{setToast:R=>u.setToast({message:R}),appState:C,elements:I}),x=_5(VW),M=D.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(KW)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const _={label:"Excalidraw+",category:dt.links,predicate:!0,icon:g("div",{style:{width:14},children:SA}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},T={label:"Sign up",category:dt.links,predicate:!0,icon:g("div",{style:{width:14},children:SA}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return g("div",{style:{height:"100%"},className:pe("excalidraw-app",{"is-collaborating":m}),children:P(Lj,{excalidrawAPI:d,onChange:U,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h==null?void 0:h.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:w,renderCustomUI:u?(I,C,R)=>g(KIe,{elements:I,appState:C,files:R,name:u.getName(),onError:N=>{u==null||u.updateScene({appState:{errorMessage:N.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:v,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:I=>null,children:[g(YIe,{onCollabDialogOpen:M,isCollaborating:m,isCollabEnabled:!n,theme:r,setTheme:I=>s(I),refresh:()=>p(I=>!I)}),g(WIe,{onCollabDialogOpen:M,isCollabEnabled:!n}),P(ku,{children:[g(ku.Actions.ExportToImage,{}),g(ku.Actions.SaveToDisk,{}),u&&g(ku.Action,{title:L("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:L("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{gv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:L("overwriteConfirm.action.excalidrawPlus.description")})]}),g(IIe,{onChange:()=>u==null?void 0:u.refresh()}),u&&g(dxe,{excalidrawAPI:u}),g(kj,{}),m&&x&&g("div",{className:"collab-offline-warning",children:L("alerts.collabOfflineWarning")}),y&&g(B4e,{link:y,onCloseRequest:()=>E(null),setErrorMessage:t}),u&&!n&&g(TIe,{excalidrawAPI:u}),g(txe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await w(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(I){t(I.message)}}}),e&&g(L_,{onClose:()=>t(""),children:e}),g(KR,{customCommandPaletteItems:[{label:L("labels.liveCollaboration"),category:dt.app,keywords:["team","multiplayer","share","public","session","invite"],icon:D9,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:L("roomDialog.button_stopSession"),category:dt.app,predicate:()=>!!(h!=null&&h.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:L("labels.share"),category:dt.app,predicate:!0,icon:UH,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:k9,category:dt.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:L("labels.followUs"),icon:mH,category:dt.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:L("labels.discordChat"),category:dt.links,predicate:!0,icon:gH,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:xH,category:dt.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...J_?[{...T,label:"Sign in / Go to Excalidraw+"}]:[_,T],{label:L("overwriteConfirm.action.excalidrawPlus.button"),category:dt.export,icon:vue,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&gv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...KR.defaultItems.toggleTheme,perform:()=>{s(i===Ae.DARK?Ae.LIGHT:Ae.DARK)}},{label:L("labels.installPWA"),category:dt.app,predicate:()=>!!yf,perform:()=>{yf&&(yf.prompt(),yf.userChoice.then(()=>{yf=null}))}}]}),cxe()&&u&&g(uxe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},bxe=()=>window.location.pathname==="/excalidraw-plus-export"?g(mxe,{}):g(ZIe,{children:g(Vce,{store:kl,children:g(Uxe,{})})});window.__EXCALIDRAW_SHA__="";const yxe=document.getElementById("root"),Exe=_Q.createRoot(yxe);IQ();Exe.render(g(D.StrictMode,{children:g(bxe,{})}));export{be as _,Aa as c,dl as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./subset-worker.chunk-CVR6pt27.js","./subset-shared.chunk-D3ioWSie.js","./pica-C_5omnZI.js","./_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BUfDwLug.js.map
